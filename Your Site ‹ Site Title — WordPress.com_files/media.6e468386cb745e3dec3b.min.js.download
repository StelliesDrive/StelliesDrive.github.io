webpackJsonp(["media"],{"./client/blocks/image-editor/image-editor-buttons.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/i18n-calypso/index.js"),j=s("./client/components/button/index.jsx"),x=o(j),E=s("./client/state/ui/editor/image-editor/selectors.js"),C=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,s=e.onCancel,o=e.src,n=e.onDone,i=e.onReset,a=e.translate,r=e.doneButtonText;return b.default.createElement("div",{className:"image-editor__buttons"},s&&b.default.createElement(x.default,{className:"image-editor__buttons-button",onClick:s,"data-e2e-button":"cancel"},a("Cancel")),b.default.createElement(x.default,{className:"image-editor__buttons-button",disabled:!t,onClick:i,"data-e2e-button":"reset"},a("Reset")),b.default.createElement(x.default,{className:"image-editor__buttons-button",disabled:!o,primary:!0,onClick:n,"data-e2e-button":"done"},r||a(" Done ")))}}]),t}(g.Component);C.propTypes={src:h.default.string,hasChanges:h.default.bool,resetImageEditorState:h.default.func,onDone:h.default.func,onCancel:h.default.func,onReset:h.default.func,doneButtonText:h.default.string},C.defaultProps={src:"",hasChanges:!1,resetImageEditorState:v.noop,onDone:v.noop,onCancel:v.noop,onReset:v.noop,doneButtonText:""},t.default=(0,_.connect)(function(e){var t=(0,E.getImageEditorFileInfo)(e),s=t.src,o=(0,E.imageEditorHasChanges)(e);return{src:s,hasChanges:o}})((0,y.localize)(C)),e.exports=t.default},"./client/blocks/image-editor/image-editor-canvas.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorCanvas=void 0;var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-dom/index.js"),v=o(_),y=s("./node_modules/react-redux/es/index.js"),j=s("./node_modules/lodash/lodash.js"),x=s("./node_modules/classnames/index.js"),E=o(x),C=s("./client/blocks/image-editor/image-editor-crop.jsx"),I=o(C),S=s("./client/lib/media/utils.js"),k=o(S),M=s("./client/state/ui/editor/image-editor/selectors.js"),R=s("./client/state/ui/editor/image-editor/actions.js"),w=s("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),P=o(w),D=t.ImageEditorCanvas=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.frameRateInterval=1e3/30,s.requestAnimationFrameId=null,s.lastTimestamp=null,s.onWindowResize=function(){s.requestAnimationFrameId=window.requestAnimationFrame(s.updateCanvasPosition)},s.onLoadComplete=s.onLoadComplete.bind(s),s.updateCanvasPosition=s.updateCanvasPosition.bind(s),s.isVisible=!1,s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,j.startsWith)(e,"blob")}},{key:"getImage",value:function(e){var t=this,s=this.props,o=s.onLoadError,n=s.mimeType,i=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([i.response],{type:n}));t.initImage(e)}},i.onerror=function(e){return o(e)},i.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),"undefined"!=typeof window&&(this.lastTimestamp=window.performance.now(),window.addEventListener("resize",this.onWindowResize)),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.requestAnimationFrameId)),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,s=t.leftRatio,o=t.topRatio,n=t.widthRatio,i=t.heightRatio,a=this.props,r=a.mimeType,l=a.transform,d=v.default.findDOMNode(this.refs.canvas),u=d.getContext("2d"),c=l.degrees%180!==0,p=c?this.image.height:this.image.width,m=c?this.image.width:this.image.height,f=s*p,h=o*m,g=n*p,b=i*m,_=u.getImageData(f,h,g,b),y=document.createElement("canvas");y.width=g,y.height=b;var j=y.getContext("2d");j.putImageData(_,0,0),k.default.canvasToBlob(y,e,r,1)}},{key:"drawImage",value:function(){if(this.image){var e=v.default.findDOMNode(this.refs.canvas),t=this.image.width,s=this.image.height,o=this.props.transform,n=o.degrees%180!==0;e.width=n?s:t,e.height=n?t:s;var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),i.save(),i.setTransform(1,0,0,1,e.width/2,e.height/2),i.scale(o.scaleX,o.scaleY),i.rotate(o.degrees*Math.PI/180),i.drawImage(this.image,-t/2,-s/2),i.restore()}}},{key:"updateCanvasPosition",value:function(e){var t=e,s=t-this.lastTimestamp;if(!(s<this.frameRateInterval)){this.lastTimestamp=t-s%this.frameRateInterval;var o=this.props.crop,n=o.leftRatio,i=o.topRatio,a=o.widthRatio,r=o.heightRatio,l=v.default.findDOMNode(this.refs.canvas),d=-50*a-100*n,u=-50*r-100*i,c=l.offsetTop,p=l.offsetLeft,m=l.offsetWidth,f=l.offsetHeight;this.props.setImageEditorCropBounds(c-f*-u/100,p-m*-d/100,c+f*(1+u/100),p+m*(1+d/100))}}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,s=e.topRatio,o=e.widthRatio,n=e.heightRatio,i=this.props,a=i.isImageLoaded,r=i.showCrop,l=-50*o-100*t,d=-50*n-100*s,u={transform:"translate("+l+"%, "+d+"%)",maxWidth:85/o+"%",maxHeight:85/n+"%"},c=(0,E.default)("image-editor__canvas",{"is-placeholder":!a});return b.default.createElement("div",{className:"image-editor__canvas-container"},b.default.createElement("canvas",{ref:"canvas",style:u,onMouseDown:this.preventDrag,className:c}),r&&b.default.createElement(I.default,null))}}]),t}(g.Component);D.propTypes={src:h.default.string,mimeType:h.default.string,transform:h.default.shape({degrees:h.default.number,scaleX:h.default.number,scaleY:h.default.number}),crop:h.default.shape({topRatio:h.default.number,leftRatio:h.default.number,widthRatio:h.default.number,heightRatio:h.default.number}),setImageEditorCropBounds:h.default.func,setImageEditorImageHasLoaded:h.default.func,onLoadError:h.default.func,isImageLoaded:h.default.bool,showCrop:h.default.bool},D.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:j.noop,setImageEditorImageHasLoaded:j.noop,onLoadError:j.noop,isImageLoaded:!1,showCrop:!0},t.default=(0,y.connect)(function(e){var t=(0,M.getImageEditorTransform)(e),s=(0,M.getImageEditorFileInfo)(e),o=s.src,n=s.mimeType,i=(0,M.getImageEditorCrop)(e),a=(0,M.isImageEditorImageLoaded)(e),r=(0,P.default)(e);return{src:o,mimeType:n,transform:t,crop:i,isImageLoaded:a,showCrop:!(!a||!r)}},{setImageEditorCropBounds:R.setImageEditorCropBounds,setImageEditorImageHasLoaded:R.setImageEditorImageHasLoaded},null,{withRef:!0})(D)},"./client/blocks/image-editor/image-editor-crop.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/assign.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./node_modules/react/react.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),E=s("./node_modules/lodash/lodash.js"),C=s("./node_modules/classnames/index.js"),I=o(C),S=s("./client/components/draggable/index.jsx"),k=o(S),M=s("./client/state/ui/editor/image-editor/selectors.js"),R=s("./client/state/ui/editor/image-editor/constants.js"),w=s("./client/state/ui/editor/image-editor/actions.js"),P=s("./client/state/ui/editor/image-editor/reducer.js"),D=s("./client/state/selectors/get-image-editor-original-aspect-ratio.js"),N=o(D),T=function(e){function t(e){(0,c.default)(this,t);var s=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return s.state=s.getDefaultState(e),s.onTopLeftDrag=s.onTopLeftDrag.bind(s),s.onTopRightDrag=s.onTopRightDrag.bind(s),s.onBottomLeftDrag=s.onBottomLeftDrag.bind(s),s.onBottomRightDrag=s.onBottomRightDrag.bind(s),s.applyCrop=s.applyCrop.bind(s),s.onBorderDrag=s.onBorderDrag.bind(s),s}return(0,b.default)(t,e),(0,m.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,s=t.bounds,o=t.aspectRatio,n=t.crop;if(!(0,E.isEqual)(s,e.bounds)){var i=e.bounds.rightBound-e.bounds.leftBound,a=e.bounds.bottomBound-e.bounds.topBound,r=e.bounds.topBound+e.crop.topRatio*a,l=e.bounds.leftBound+e.crop.leftRatio*i,d=r+e.crop.heightRatio*a,u=l+e.crop.widthRatio*i,c={top:r,left:l,bottom:d,right:u};this.setState(c),this.updateCrop(c)}o!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,E.isEqual)(e.crop,P.defaultCrop)||(0,E.isEqual)(n,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,s){t=t||this.props;var o=t.aspectRatio;if(o===R.AspectRatios.FREE)return void this.setState(e,s);var n=t.degrees%180!==0,i=(0,r.default)({},this.state,e),a=i.right-i.left,l=i.bottom-i.top,d=void 0,u=void 0,c=a,p=l;switch(o){case R.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,s);var m=this.props.originalAspectRatio,f=m.width,h=m.height;d=n?h:f,u=n?f:h;break;case R.AspectRatios.ASPECT_1X1:d=1,u=1;break;case R.AspectRatios.ASPECT_16X9:d=n?9:16,u=n?16:9;break;case R.AspectRatios.ASPECT_4X3:d=n?3:4,u=n?4:3;break;case R.AspectRatios.ASPECT_3X2:d=n?2:3,u=n?3:2}var g=Math.min(a/d,l/u);c=d*g,p=u*g,e.hasOwnProperty("top")?e.top=i.bottom-p:e.hasOwnProperty("bottom")&&(e.bottom=i.top+p),e.hasOwnProperty("left")?e.left=i.right-c:e.hasOwnProperty("right")&&(e.right=i.left+c),this.setState(e,s)}},{key:"onTopLeftDrag",value:function(e,t){var s=this.state,o=s.right,n=s.bottom,i=this.props.minCropSize,a=t,r=e;o-r<=i.width&&(r=o-i.width),n-a<=i.height&&(a=n-i.height),this.updateCrop({top:a,left:r})}},{key:"onTopRightDrag",value:function(e,t){var s=this.state,o=s.left,n=s.bottom,i=this.props.minCropSize,a=t,r=e;r-o<=i.width&&(r=o+i.width),n-a<=i.height&&(a=n-i.height),this.updateCrop({top:a,right:r})}},{key:"onBottomRightDrag",value:function(e,t){var s=this.state,o=s.left,n=s.top,i=this.props.minCropSize,a=t,r=e;r-o<=i.width&&(r=o+i.width),a-n<=i.height&&(a=n+i.height),this.updateCrop({bottom:a,right:r})}},{key:"onBottomLeftDrag",value:function(e,t){var s=this.state,o=s.right,n=s.top,i=this.props.minCropSize,a=t,r=e;o-r<=i.width&&(r=o-i.width),a-n<=i.height&&(a=n+i.height),this.updateCrop({bottom:a,left:r})}},{key:"onBorderDrag",value:function(e,t){var s=this.state,o=s.top,n=s.left,i=s.right,a=s.bottom,r=i-n,l=a-o;this.setState({top:t,left:e,bottom:t+l,right:e+r})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,s=e.left,o=e.right,n=e.bottom,i=this.props.bounds,a=i.topBound,r=i.leftBound,l=i.rightBound,d=i.bottomBound,u=t-a,c=s-r,p=o-s,m=n-t,f=l-r,h=d-a,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var b=this.props.originalAspectRatio,_=b.width,v=b.height,y=g?v:_,j=g?_:v,x=j/y;h=f*x}return[u/h,c/f,p/f,m/h]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,s=e.left,o=e.right,n=e.bottom,i=o-s,a=n-t,r="image-editor__crop-handle",l=this.props.bounds,d=l.topBound,u=l.leftBound,c=l.rightBound,p=l.bottomBound;return j.default.createElement("div",null,j.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:s+"px",width:i+"px",height:Math.max(0,t-d)+"px"}}),j.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:u+"px",width:Math.max(0,s-u)+"px",height:Math.max(0,p-d)+"px"}}),j.default.createElement("div",{className:"image-editor__crop-background",style:{top:n+"px",left:s+"px",width:i+"px",height:Math.max(0,p-n)+"px"}}),j.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:o+"px",width:Math.max(0,c-o)+"px",height:Math.max(0,p-d)+"px"}}),j.default.createElement(k.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:s,y:t,width:i,height:a,bounds:{top:d,left:u,bottom:p,right:c},className:"image-editor__crop"}),j.default.createElement(k.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:s,y:t,controlled:!0,bounds:{bottom:n,right:o,top:d,left:u},ref:"topLeft",className:(0,I.default)(r,r+"-nwse")}),j.default.createElement(k.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:o,controlled:!0,bounds:{bottom:n,left:s,top:d,right:c},ref:"topRight",className:(0,I.default)(r,r+"-nesw")}),j.default.createElement(k.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:n,x:o,controlled:!0,bounds:{top:t,left:s,bottom:p,right:c},ref:"bottomRight",className:(0,I.default)(r,r+"-nwse")}),j.default.createElement(k.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:n,x:s,controlled:!0,bounds:{top:t,right:o,bottom:p,left:u},ref:"bottomLeft",className:(0,I.default)(r,r+"-nesw")}))}}]),t}(y.Component);T.propTypes={degrees:v.default.number,bounds:v.default.shape({topBound:v.default.number,leftBound:v.default.number,bottomBound:v.default.number,rightBound:v.default.number}),crop:v.default.shape({topRatio:v.default.number,leftRatio:v.default.number,widthRatio:v.default.number,heightRatio:v.default.number}),aspectRatio:v.default.string,imageEditorCrop:v.default.func,imageEditorComputedCrop:v.default.func,minCropSize:v.default.shape({width:v.default.number,height:v.default.number}),imageEditorHasChanges:v.default.bool},T.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:E.noop,imageEditorComputedCrop:E.noop,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,x.connect)(function(e){var t=(0,M.getImageEditorCropBounds)(e),s=(0,M.getImageEditorCrop)(e),o=(0,M.getImageEditorAspectRatio)(e),n=(0,M.getImageEditorTransform)(e),i=n.degrees;return{bounds:t,crop:s,aspectRatio:o,degrees:i,originalAspectRatio:(0,N.default)(e),imageEditorHasChanges:(0,M.imageEditorHasChanges)(e)}},{imageEditorCrop:w.imageEditorCrop,imageEditorComputedCrop:w.imageEditorComputedCrop})(T),e.exports=t.default},"./client/blocks/image-editor/image-editor-toolbar.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorToolbar=void 0;var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/i18n-calypso/index.js"),j=s("./node_modules/gridicons/build/index.js"),x=o(j),E=s("./node_modules/classnames/index.js"),C=o(E),I=s("./client/components/popover/menu.jsx"),S=o(I),k=s("./client/components/popover/menu-item.jsx"),M=o(k),R=s("./client/state/ui/editor/image-editor/constants.js"),w=s("./client/state/ui/editor/image-editor/selectors.js"),P=s("./client/state/ui/editor/image-editor/actions.js"),D=s("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),N=o(D),T=t.ImageEditorToolbar=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.state={showAspectPopover:!1},s.setAspectMenuContext=s.setAspectMenuContext.bind(s),s.onAspectOpen=s.onAspectOpen.bind(s),s.onAspectClose=s.onAspectClose.bind(s),s.rotate=s.rotate.bind(s),s.flip=s.flip.bind(s),s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault();var t=this.props,s=t.isAspectRatioDisabled,o=t.onShowNotice,n=t.translate;if(s){var i=n("To change the aspect ratio, the height and width must be bigger than {{strong}}%(width)dpx{{/strong}}.",{args:{width:R.MinimumImageDimensions.WIDTH,height:R.MinimumImageDimensions.HEIGHT},components:{strong:b.default.createElement("strong",null)}});return void o(i)}this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,s=e.showAspectPopover,o=this.props,n=o.translate,i=o.aspectRatio,a=o.allowedAspectRatios;if(t&&1!==a.length){var r=[{action:R.AspectRatios.FREE,label:n("Free")},{action:R.AspectRatios.ORIGINAL,label:n("Original")},{action:R.AspectRatios.ASPECT_1X1,label:n("Square")},{action:R.AspectRatios.ASPECT_16X9,label:n("16:9")},{action:R.AspectRatios.ASPECT_4X3,label:n("4:3")},{action:R.AspectRatios.ASPECT_3X2,label:n("3:2")}];return b.default.createElement(S.default,{isVisible:s,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},r.map(function(e){return a.indexOf(e.action)!==-1?b.default.createElement(M.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},i===e.action&&b.default.createElement(x.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,s=e.allowedAspectRatios,o=e.isAspectRatioDisabled,n=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===s.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"crop",text:t("Crop"),onClick:this.onAspectOpen,disabled:o},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return n.map(function(e){var t=(0,C.default)("image-editor__toolbar-button",{"is-disabled":e&&e.disabled});return e?b.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:t,onClick:e.onClick},b.default.createElement(x.default,{icon:e.icon}),b.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return b.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(g.Component);T.propTypes={aspectRatio:h.default.string,imageEditorRotateCounterclockwise:h.default.func,imageEditorFlip:h.default.func,setImageEditorAspectRatio:h.default.func,allowedAspectRatios:h.default.array,onShowNotice:h.default.func,isAspectRatioDisabled:h.default.bool},T.defaultProps={imageEditorRotateCounterclockwise:v.noop,imageEditorFlip:v.noop,setImageEditorAspectRatio:v.noop,allowedAspectRatios:(0,v.values)(R.AspectRatios),onShowNotice:v.noop,isAspectRatioDisabled:!1},t.default=(0,_.connect)(function(e){var t=(0,w.getImageEditorAspectRatio)(e),s=(0,N.default)(e);return{aspectRatio:t,isAspectRatioDisabled:!s}},{imageEditorRotateCounterclockwise:P.imageEditorRotateCounterclockwise,imageEditorFlip:P.imageEditorFlip,setImageEditorAspectRatio:P.setImageEditorAspectRatio})((0,y.localize)(T))},"./client/blocks/image-editor/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/react-redux/es/index.js"),j=s("./node_modules/redux/lib/index.js"),x=s("./node_modules/lodash/lodash.js"),E=s("./node_modules/path-browserify/index.js"),C=o(E),I=s("./node_modules/i18n-calypso/index.js"),S=s("./node_modules/classnames/index.js"),k=o(S),M=s("./client/components/close-on-escape/index.jsx"),R=o(M),w=s("./client/components/notice/index.jsx"),P=o(w),D=s("./client/blocks/image-editor/image-editor-canvas.jsx"),N=o(D),T=s("./client/blocks/image-editor/image-editor-toolbar.jsx"),A=o(T),L=s("./client/blocks/image-editor/image-editor-buttons.jsx"),O=o(L),H=s("./client/lib/media/utils.js"),U=o(H),V=s("./client/state/ui/editor/image-editor/actions.js"),F=s("./client/state/ui/editor/image-editor/selectors.js"),B=s("./client/state/ui/selectors.js"),q=s("./client/state/sites/selectors.js"),W=s("./client/components/data/query-sites/index.jsx"),z=o(W),G=s("./client/state/ui/editor/image-editor/constants.js"),K=s("./client/blocks/image-editor/utils.js"),Z=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),o.state={noticeText:null,noticeStatus:"is-info"},o.setDefaultAspectRatio=function(){var e=o.props,t=e.defaultAspectRatio,s=e.allowedAspectRatios;o.props.setImageEditorDefaultAspectRatio((0,K.getDefaultAspectRatio)(t,s))},o.updateFileInfo=function(e){var t=o.props.site,s=void 0,n="default",i="image/png",a="default";e&&(s=e.src||U.default.url(e,{photon:t&&!t.is_private}),n=e.file||C.default.basename(s),i=U.default.getMimeType(e)||i,a=e.title||a),o.props.resetImageEditorState(),o.props.setImageEditorFileInfo(s,n,i,a)},o.convertBlobToImage=function(e){var t=o.props.onDone,s=document.createElement("img"),n=URL.createObjectURL(e),a=o.getImageEditorProps();s.onload=function(){URL.revokeObjectURL(n),t(null,e,(0,i.default)({},a,{width:s.width,height:s.height}))},s.onerror=function(){t(null,e,a)},s.src=n},o.onDone=function(){var e=o.props,t=e.isImageLoaded,s=e.onDone;if(!t)return void s(new Error("Image not loaded yet."),null,o.getImageEditorProps());var n=o.refs.editCanvas.getWrappedInstance();n.toBlob(o.convertBlobToImage)},o.onCancel=function(){o.props.onCancel(o.getImageEditorProps())},o.onReset=function(){o.props.resetImageEditorState(),o.props.onReset(o.getImageEditorProps())},o.getImageEditorProps=function(){var e=o.props,t=e.src,s=e.fileName,n=e.media,i=e.mimeType,a=e.title,r=e.site,l={src:t,fileName:s,mimeType:i,title:a,site:r,resetAllImageEditorState:o.props.resetAllImageEditorState};return n&&n.ID&&(l.ID=n.ID),l},o.showNotice=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-info";o.setState({noticeText:e,noticeStatus:t})},o.clearNoticeState=function(){o.setState({noticeText:null,noticeStatus:"is-info"})},o.renderNotice=function(){if(!o.state.noticeText)return null;var e="is-info"===o.state.noticeStatus;return v.default.createElement(P.default,{status:o.state.noticeStatus,showDismiss:e,text:o.state.noticeText,isCompact:!1,onDismissClick:o.clearNoticeState,className:"image-editor__notice"})},o.onLoadCanvasError=function(){var e=o.props.translate;o.showNotice(e("Sorry, there was a problem loading the image. Please close this editor and try selecting the image again."),"is-error")},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.media;e.media&&!(0,x.isEqual)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())}},{key:"componentDidMount",value:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.siteId,o=e.allowedAspectRatios,n=this.state.noticeText,i=(0,k.default)("image-editor",t);return v.default.createElement("div",{className:i},n&&this.renderNotice(),v.default.createElement(R.default,{onEscape:this.onCancel}),v.default.createElement(z.default,{siteId:s}),v.default.createElement("figure",null,v.default.createElement("div",{className:"image-editor__content"},v.default.createElement(N.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),v.default.createElement(A.default,{onShowNotice:this.showNotice,allowedAspectRatios:o}),v.default.createElement(O.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset,doneButtonText:this.props.doneButtonText}))))}}]),t}(v.default.Component);Z.propTypes={media:b.default.object,siteId:b.default.number,onDone:b.default.func,onCancel:b.default.func,onReset:b.default.func,className:b.default.string,defaultAspectRatio:b.default.oneOf(G.AspectRatiosValues),allowedAspectRatios:b.default.arrayOf(b.default.oneOf(G.AspectRatiosValues)),site:b.default.object,fileName:b.default.string,setImageEditorFileInfo:b.default.func,setImageEditorDefaultAspectRatio:b.default.func,translate:b.default.func,isImageLoaded:b.default.bool},Z.defaultProps={media:null,onDone:x.noop,onCancel:null,onReset:x.noop,isImageLoaded:!1,defaultAspectRatio:G.AspectRatios.FREE,allowedAspectRatios:G.AspectRatiosValues,setImageEditorDefaultAspectRatio:x.noop},t.default=(0,y.connect)(function(e,t){var s=t.siteId;return s||(s=(0,B.getSelectedSiteId)(e)),(0,i.default)({},(0,F.getImageEditorFileInfo)(e),{site:(0,q.getSite)(e,s),isImageLoaded:(0,F.isImageEditorImageLoaded)(e)})},function(e,t){var s=(0,K.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),o={aspectRatio:s};return(0,j.bindActionCreators)({setImageEditorFileInfo:V.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:V.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,x.partial)(V.resetImageEditorState,o),resetAllImageEditorState:(0,x.partial)(V.resetAllImageEditorState,o)},e)})((0,I.localize)(Z)),e.exports=t.default},"./client/blocks/image-editor/utils.js":function(e,t,s){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.AspectRatiosValues;return(0,n.includes)(t,e)||(e=(0,n.get)(t,"0",i.AspectRatios.FREE)),(0,n.includes)(i.AspectRatiosValues,e)?e:o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultAspectRatio=o;var n=s("./node_modules/lodash/lodash.js"),i=s("./client/state/ui/editor/image-editor/constants.js")},"./client/blocks/plan-storage/bar.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/i18n-calypso/index.js"),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./node_modules/filesize/lib/filesize.js"),x=o(j),E=s("./client/components/progress-bar/index.jsx"),C=o(E),I=s("./client/lib/plans/constants.js"),S=80,k=60,M=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,s=e.mediaStorage,o=e.sitePlanSlug,n=e.siteSlug,i=e.translate;if(o===I.PLAN_BUSINESS)return null;if(!s||s.max_storage_bytes===-1)return null;var a=Math.min(Math.round(s.storage_used_bytes/s.max_storage_bytes*1e3)/10,100),r=(0,y.default)(t,"plan-storage__bar",{"is-alert":a>S,"is-warn":a>k&&a<=S}),l=(0,x.default)(s.max_storage_bytes);return b.default.createElement("div",{className:r},b.default.createElement(C.default,{value:a,total:100,compact:!0}),b.default.createElement("span",{className:"plan-storage__storage-label"},i("%(percent)f%% of %(max)s used",{args:{percent:a,max:l}})),b.default.createElement("a",{className:"plan-storage__storage-link",href:"/plans/"+n},i("Upgrade")),this.props.children)}}]),t}(g.Component);M.propTypes={className:h.default.string,mediaStorage:h.default.object,siteSlug:h.default.string.isRequired,sitePlanSlug:h.default.string.isRequired},M.defaultProps={siteSlug:""},t.default=(0,_.localize)(M),e.exports=t.default},"./client/blocks/plan-storage/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/classnames/index.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/react-redux/es/index.js"),j=s("./client/components/data/query-media-storage/index.jsx"),x=o(j),E=s("./client/state/sites/media-storage/selectors.js"),C=s("./client/state/sites/selectors.js"),I=s("./client/lib/plans/constants.js"),S=s("./client/blocks/plan-storage/bar.jsx"),k=o(S),M=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{
key:"render",value:function(){var e=this.props,t=e.className,s=e.jetpackSite,o=e.siteId,n=e.sitePlanSlug,i=e.siteSlug;return s||!n?null:n===I.PLAN_BUSINESS?null:v.default.createElement("div",{className:(0,h.default)(t,"plan-storage")},v.default.createElement(x.default,{siteId:o}),v.default.createElement(k.default,{siteSlug:i,sitePlanSlug:n,mediaStorage:this.props.mediaStorage},this.props.children))}}]),t}(_.Component);M.propTypes={className:b.default.string,mediaStorage:b.default.object,siteId:b.default.number,sitePlanSlug:b.default.string,siteSlug:b.default.string},t.default=(0,y.connect)(function(e,t){var s=t.siteId;return{mediaStorage:(0,E.getMediaStorage)(e,s),jetpackSite:(0,C.isJetpackSite)(e,s),sitePlanSlug:(0,C.getSitePlanSlug)(e,s),siteSlug:(0,C.getSiteSlug)(e,s)}})(M),e.exports=t.default},"./client/blocks/video-editor/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/i18n-calypso/index.js"),j=s("./node_modules/classnames/index.js"),x=o(j),E=s("./client/components/progress-bar/index.jsx"),C=o(E),I=s("./client/components/notice/index.jsx"),S=o(I),k=s("./client/post-editor/media-modal/detail/detail-preview-video.jsx"),M=o(k),R=s("./client/blocks/video-editor/video-editor-controls.jsx"),w=o(R),P=s("./client/state/ui/editor/video-editor/actions.js"),D=s("./client/state/selectors/get-poster-upload-progress.js"),N=o(D),T=s("./client/state/selectors/get-poster-url.js"),A=o(T),L=s("./client/state/selectors/should-show-video-editor-error.js"),O=o(L),H=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={error:!1,isLoading:!0,isSelectingFrame:!1,pauseVideo:!1},o.selectFrame=function(){var e=o.state.isLoading;return e?void o.setState({error:!0}):void o.setState({error:!1,isSelectingFrame:!0,pauseVideo:!0})},o.updatePoster=function(e){if(o.state.isSelectingFrame){var t=o.props.media,s=(0,v.get)(t,"videopress_guid",null);s&&o.props.updatePoster(s,{atTime:e})}},o.setError=function(){o.setState({error:!0})},o.setIsLoading=function(){o.setState({isLoading:!1})},o.pauseVideo=function(){o.setState({error:!1,isSelectingFrame:!1,pauseVideo:!0})},o.uploadImage=function(e){if(e){var t=o.props.media,s=(0,v.get)(t,"videopress_guid",null);s&&o.props.updatePoster(s,{file:e})}},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){return e.shouldShowError&&!this.props.shouldShowError?void this.setState({error:!0,pauseVideo:!1}):void(this.props.posterUrl!==e.posterUrl&&this.props.onUpdatePoster(this.getVideoEditorProps(e.posterUrl)))}},{key:"getVideoEditorProps",value:function(e){var t=this.props.media,s={posterUrl:e};return t&&t.ID&&(s.ID=t.ID),s}},{key:"renderError",value:function(){var e=this.props,t=e.onCancel,s=e.translate;return b.default.createElement(S.default,{status:"is-error",showDismiss:!0,text:s("We are unable to edit this video."),isCompact:!1,onDismissClick:t})}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.media,o=e.onCancel,n=e.uploadProgress,i=e.translate,a=this.state,r=a.error,l=a.isLoading,d=a.isSelectingFrame,u=a.pauseVideo,c=(0,x.default)("video-editor",t);return b.default.createElement("div",{className:c},r&&this.renderError(),b.default.createElement("figure",null,b.default.createElement("div",{className:"video-editor__content"},b.default.createElement("div",{className:"video-editor__preview-wrapper"},b.default.createElement(M.default,{className:"video-editor__preview",isPlaying:!u,item:s,onPause:this.updatePoster,onScriptLoadError:this.setError,onVideoLoaded:this.setIsLoading})),n&&!r&&!d&&b.default.createElement(C.default,{className:"video-editor__progress-bar",isPulsing:!0,total:100,value:n}),b.default.createElement("span",{className:"video-editor__text"},i("Select a frame to use as the thumbnail image or upload your own.")),b.default.createElement(w.default,{isPosterUpdating:n&&!r,isVideoLoading:l,onCancel:o,onSelectFrame:this.selectFrame,onUploadImage:this.uploadImage,onUploadImageClick:this.pauseVideo}))))}}]),t}(g.Component);H.propTypes={className:h.default.string,media:h.default.object.isRequired,onCancel:h.default.func,onUpdatePoster:h.default.func,posterUrl:h.default.string,shouldShowError:h.default.bool,uploadProgress:h.default.number},H.defaultProps={onCancel:v.noop,onUpdatePoster:v.noop},t.default=(0,_.connect)(function(e){return{posterUrl:(0,A.default)(e),shouldShowError:(0,O.default)(e),uploadProgress:(0,N.default)(e)}},{updatePoster:P.updatePoster})((0,y.localize)(H)),e.exports=t.default},"./client/blocks/video-editor/video-editor-controls.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/prop-types/index.js"),i=o(n),a=s("./node_modules/react/react.js"),r=o(a),l=s("./node_modules/lodash/lodash.js"),d=s("./node_modules/i18n-calypso/index.js"),u=s("./client/components/button/index.jsx"),c=o(u),p=s("./client/blocks/video-editor/video-editor-upload-button.js"),m=o(p),f=function(e){var t=e.isPosterUpdating,s=e.isVideoLoading,o=e.onCancel,n=e.onSelectFrame,i=e.onUploadImage,a=e.onUploadImageClick,l=e.translate;return r.default.createElement("div",{className:"video-editor__controls"},o&&r.default.createElement(c.default,{className:"video-editor__controls-button",disabled:t,onClick:o},l("Cancel")),r.default.createElement(m.default,{isPosterUpdating:t,onClick:a,onUploadImage:i},l("Upload Image")),r.default.createElement(c.default,{className:"video-editor__controls-button",disabled:s||t,onClick:n,primary:!0},l("Select Frame")))};f.propTypes={isPosterUpdating:i.default.bool,isVideoLoading:i.default.bool,onCancel:i.default.func,onSelectFrame:i.default.func,onUploadImage:i.default.func,onUploadImageClick:i.default.func},f.defaultProps={isPosterUpdating:!1,isVideoLoading:!0,onSelectFrame:l.noop,onUploadImage:l.noop,onUploadImageClick:l.noop},t.default=(0,d.localize)(f),e.exports=t.default},"./client/blocks/video-editor/video-editor-upload-button.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./client/components/button/index.jsx"),y=o(v),j=s("./client/components/file-picker/index.jsx"),x=o(j),E=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.uploadImage=function(e){var t=e[0];t&&o.props.onUploadImage(t)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,s=e.isPosterUpdating,o=e.onClick;return h.default.createElement("form",{className:"video-editor__upload-form"},h.default.createElement(x.default,{accept:"image/*",onPick:this.uploadImage},h.default.createElement(y.default,{className:"video-editor__controls-button",disabled:s,onClick:o},t)))}}]),t}(f.Component);E.propTypes={isPosterUpdating:b.default.bool,onClick:b.default.func,onUploadImage:b.default.func},E.defaultProps={isPosterUpdating:!1,onClick:_.noop,onUploadImage:_.noop},t.default=E,e.exports=t.default},"./client/components/button-group/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/classnames/index.js"),b=o(g),_=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,b.default)("button-group",this.props.className,{"is-busy":this.props.busy,"is-primary":this.props.primary});return h.default.createElement("span",{className:e},this.props.children)}}]),t}(f.PureComponent);_.propTypes={children:function(e){var t=null;return h.default.Children.forEach(e.children,function(e){!e||e.props&&"button"===e.props.type||(t=new Error("All children elements should be a Button."))}),t}},t.default=_,e.exports=t.default},"./client/components/data/media-library-selected-data/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return{mediaLibrarySelectedItems:y.default.getAll(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(i),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(r),d=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(d),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(c),m=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(m),h=s("./node_modules/react/react.js"),g=o(h),b=s("./node_modules/prop-types/index.js"),_=o(b),v=s("./client/lib/media/library-selected-store.js"),y=o(v),j=s("./client/lib/react-pass-to-children/index.js"),x=o(j),E=function(e){function t(){var e,s,o,i;(0,l.default)(this,t);for(var r=arguments.length,d=Array(r),u=0;u<r;u++)d[u]=arguments[u];return s=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(d))),o.state=n(o.props.siteId),o.updateState=function(){o.setState(n(o.props.siteId))},i=s,(0,p.default)(o,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){y.default.on("change",this.updateState)}},{key:"componentWillUnmount",value:function(){y.default.off("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.setState(n(e.siteId))}},{key:"render",value:function(){return(0,x.default)(this,this.state)}}]),t}(g.default.Component);E.displayName="MediaLibrarySelectedData",E.propTypes={siteId:_.default.number.isRequired},t.default=E,e.exports=t.default},"./client/components/data/media-list-data/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return{media:E.default.getAll(e),mediaHasNextPage:E.default.hasNextPage(e),mediaFetchingNextPage:E.default.isFetchingNextPage(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(i),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(r),d=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(d),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(c),m=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(m),h=s("./node_modules/lodash/lodash.js"),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./client/lib/media/actions.js"),j=o(y),x=s("./client/lib/media/list-store.js"),E=o(x),C=s("./client/lib/react-pass-to-children/index.js"),I=o(C),S=s("./client/components/data/media-list-data/utils.js"),k=o(S),M=function(e){function t(){var e,s,o,i;(0,l.default)(this,t);for(var r=arguments.length,d=Array(r),u=0;u<r;u++)d[u]=arguments[u];return s=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(d))),o.state=n(o.props.siteId),o.getQuery=function(e){var t={};return e=e||o.props,e.search&&(t.search=e.search),e.filter&&!e.source&&("this-post"===e.filter?e.postId&&(t.post_ID=e.postId):t.mime_type=k.default.getMimeBaseTypeFromFilter(e.filter)),e.source&&(t.source=e.source,t.path="recent"),t},o.fetchData=function(){j.default.fetchNextPage(o.props.siteId)},o.updateStateData=function(){o.setState(n(o.props.siteId))},i=s,(0,p.default)(o,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){j.default.setQuery(this.props.siteId,this.getQuery()),E.default.on("change",this.updateStateData),this.updateStateData()}},{key:"componentWillUnmount",value:function(){E.default.off("change",this.updateStateData)}},{key:"componentWillReceiveProps",value:function(e){var t=this.getQuery(e);this.props.siteId===e.siteId&&(0,h.isEqual)(t,this.getQuery())||(j.default.setQuery(e.siteId,t),this.setState(n(e.siteId)))}},{key:"render",value:function(){return(0,I.default)(this,(0,h.assign)({},this.state,{mediaOnFetchNextPage:this.fetchData}))}}]),t}(v.default.Component);M.displayName="MediaListData",M.propTypes={siteId:b.default.number.isRequired,source:b.default.string,postId:b.default.number,filter:b.default.string,search:b.default.string},t.default=M,e.exports=t.default},"./client/components/data/media-list-data/utils.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getMimeBaseTypeFromFilter:function(e){var t;switch(e){case"images":t="image/";break;case"audio":t="audio/";break;case"videos":t="video/";break;case"documents":t="application/";break;default:t=""}return t}},e.exports=t.default},"./client/components/data/media-validation-data/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return{mediaValidationErrors:y.default.getAllErrors(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(i),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(r),d=s("./node_modules/babel-runtime/helpers/createClass.js"),u=o(d),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(c),m=s("./node_modules/babel-runtime/helpers/inherits.js"),f=o(m),h=s("./node_modules/prop-types/index.js"),g=o(h),b=s("./node_modules/react/react.js"),_=o(b),v=s("./client/lib/media/validation-store.js"),y=o(v),j=s("./client/lib/react-pass-to-children/index.js"),x=o(j),E=function(e){function t(){var e,s,o,i;(0,l.default)(this,t);for(var r=arguments.length,d=Array(r),u=0;u<r;u++)d[u]=arguments[u];return s=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(d))),o.state=n(o.props.siteId),o.updateState=function(){o.setState(n(o.props.siteId))},i=s,(0,p.default)(o,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){y.default.on("change",this.updateState)}},{key:"componentWillUnmount",value:function(){y.default.off("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.setState(n(e.siteId))}},{key:"render",value:function(){return(0,x.default)(this,this.state)}}]),t}(_.default.Component);E.displayName="MediaValidationData",E.propTypes={siteId:g.default.number.isRequired},t.default=E,e.exports=t.default},"./client/components/data/query-jetpack-modules/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=s("./node_modules/react-redux/es/index.js"),_=s("./client/state/selectors/is-fetching-jetpack-modules.js"),v=o(_),y=s("./client/state/jetpack/modules/actions.js"),j=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){e.requestingModules||e.fetchModuleList(e.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);j.propTypes={siteId:h.default.number.isRequired,requestingModules:h.default.bool,fetchModuleList:h.default.func},t.default=(0,b.connect)(function(e,t){return{requestingModules:(0,v.default)(e,t.siteId)}},{fetchModuleList:y.fetchModuleList})(j),e.exports=t.default},"./client/components/data/query-keyring-services/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=s("./node_modules/react-redux/es/index.js"),_=s("./client/state/sharing/services/selectors.js"),v=s("./client/state/sharing/services/actions.js"),y=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.props.isRequesting||this.props.requestKeyringServices()}},{key:"render",value:function(){return null}}]),t}(g.Component);y.propTypes={isRequesting:h.default.bool,requestKeyringServices:h.default.func},t.default=(0,b.connect)(function(e){return{isRequesting:(0,_.isKeyringServicesFetching)(e)}},{requestKeyringServices:v.requestKeyringServices})(y),e.exports=t.default},"./client/components/data/query-media-storage/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=s("./node_modules/react-redux/es/index.js"),_=s("./node_modules/redux/lib/index.js"),v=s("./client/state/sites/media-storage/selectors.js"),y=s("./client/state/sites/media-storage/actions.js"),j=s("./client/lib/media/store.js"),x=o(j),E=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.requestStorage=s.requestStorage.bind(s),s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"requestStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!e.requestingMediaStorage&&e.siteId&&e.requestMediaStorage(e.siteId)}},{key:"componentWillMount",value:function(){this.requestStorage(),x.default.on("fetch-media-limits",this.requestStorage)}},{key:"componentWillUnmount",value:function(){x.default.off("fetch-media-limits",this.requestStorage)}},{key:"componentWillReceiveProps",value:function(e){!e.requestingMediaStorage&&e.siteId&&this.props.siteId!==e.siteId&&this.requestStorage(e)}},{key:"render",value:function(){return null}}]),t}(g.Component);E.propTypes={siteId:h.default.number,requestingMediaStorage:h.default.bool,requestMediaStorage:h.default.func},E.defaultProps={requestMediaStorage:function(){}},t.default=(0,b.connect)(function(e,t){return{requestingMediaStorage:(0,v.isRequestingMediaStorage)(e,t.siteId)}},function(e){return(0,_.bindActionCreators)({requestMediaStorage:y.requestMediaStorage},e)})(E),e.exports=t.default},"./client/components/data/query-publicize-connections/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=s("./node_modules/react-redux/es/index.js"),_=s("./client/state/sharing/publicize/selectors.js"),v=s("./client/state/sharing/publicize/actions.js"),y=s("./client/state/ui/selectors.js"),j=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){!this.props.requestingConnections&&this.props.siteId&&this.props.requestConnections(this.props.siteId)}},{key:"componentDidUpdate",value:function(e){var t=e.siteId;this.props.siteId&&t!==this.props.siteId&&!this.props.requestingConnections&&this.props.requestConnections(this.props.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);j.propTypes={requestConnections:h.default.func,requestingConnections:h.default.bool,selectedSite:h.default.bool,siteId:h.default.number},j.defaultProps={requestConnections:function(){},requestingConnections:!1,selectedSite:!1,siteId:0},t.default=(0,b.connect)(function(e,t){var s=t.siteId,o=t.selectedSite;return s=s||o&&(0,y.getSelectedSiteId)(e),{requestingConnections:(0,_.isFetchingConnections)(e,s),siteId:s}},{requestConnections:v.fetchConnections})(j),e.exports=t.default},"./client/components/draggable/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/keys.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./node_modules/react/react.js"),j=o(y),x=s("./node_modules/lodash/lodash.js"),E=function(e){function t(e){(0,c.default)(this,t);var s=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return s.state={x:s.props.x,y:s.props.y},s.onTouchStartHandler=s.onTouchStartHandler.bind(s),s.onMouseDownHandler=s.onMouseDownHandler.bind(s),s.draggingHandler=s.draggingHandler.bind(s),s.draggingEndedHandler=s.draggingEndedHandler.bind(s),s.update=s.update.bind(s),s}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var s=t.pageX-this.relativePos.x,o=t.pageY-this.relativePos.y;this.mousePos={x:s,y:o}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,s=t.x,o=t.y;e&&(s=Math.max(e.left,Math.min(e.right-this.props.width,s)),o=Math.max(e.top,Math.min(e.bottom-this.props.height,o))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),this.props.onDrag(s,o),this.props.controlled||this.setState({x:s,y:o})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,x.omit)(this.props,(0,r.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),j.default.createElement("div",(0,i.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(y.Component);E.propTypes={onDrag:v.default.func,onStop:v.default.func,width:v.default.number,height:v.default.number,x:v.default.number,y:v.default.number,controlled:v.default.bool,bounds:v.default.shape({top:v.default.number,left:v.default.number,bottom:v.default.number,right:v.default.number})},E.defaultProps={onDrag:x.noop,onStop:x.noop,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=E,e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var n=s("./node_modules/babel-runtime/core-js/array/from.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/react-dom/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),E=s("./node_modules/classnames/index.js"),C=o(E),I=s("./node_modules/gridicons/build/index.js"),S=o(I),k=s("./node_modules/i18n-calypso/index.js"),M=s("./node_modules/lodash/lodash.js"),R=s("./client/components/root-child/index.jsx"),w=o(R),P=s("./client/state/ui/drop-zone/actions.js"),D=t.DropZone=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),o.state={isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1},o.resetDragState=function(){(o.state.isDraggingOverDocument||o.state.isDraggingOverElement)&&(o.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),o.toggleDropZoneReduxState(!1))},o.toggleMutationObserver=function(){o.disconnectMutationObserver(),o.state.isDraggingOverDocument&&(o.observer=new window.MutationObserver(o.detectNodeRemoval),o.observer.observe(document.body,{childList:!0,subtree:!0}))},o.disconnectMutationObserver=function(){o.observer&&(o.observer.disconnect(),delete o.observer)},o.detectNodeRemoval=function(e){e.forEach(function(e){e.removedNodes.length&&(o.dragEnterNodes=(0,M.without)(o.dragEnterNodes,(0,i.default)(e.removedNodes)))})},o.toggleDraggingOverDocument=function(e){"dragenter"!==e.type||(0,M.includes)(o.dragEnterNodes,e.target)?"dragleave"===e.type&&(o.dragEnterNodes=(0,M.without)(o.dragEnterNodes,e.target)):o.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,s=o.props.onVerifyValidTransfer(t.dataTransfer),n=s&&o.dragEnterNodes.length;o.setState({isDraggingOverDocument:n,isDraggingOverElement:n&&(o.props.fullScreen||o.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(o.dragEnterNodes=(0,M.without)(o.dragEnterNodes,window)),o.toggleDropZoneReduxState(!(!o.state.isDraggingOverDocument&&!o.state.isDraggingOverElement))},o.toggleDropZoneReduxState=function(e){o.state.lastVisibleState!==e&&(e?o.props.showDropZone(o.props.dropZoneName):o.props.hideDropZone(o.props.dropZoneName),o.setState({lastVisibleState:e}))},o.preventDefault=function(e){e.preventDefault()},o.isWithinZoneBounds=function(e,t){if(!o.refs.zone)return!1;var s=o.refs.zone.getBoundingClientRect();return s.bottom!==s.top&&s.left!==s.right&&(e>=s.left&&e<=s.right&&t>=s.top&&t<=s.bottom)},o.onDrop=function(e){e.dataTransfer&&e.dataTransfer.files.length,o.resetDragState(),e.preventDefault(),(o.props.fullScreen||b.default.findDOMNode(o.refs.zone).contains(e.target))&&(o.props.onDrop(e),o.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&o.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation()))},o.renderContent=function(){var e=o.props.textLabel?o.props.textLabel:o.props.translate("Drop files to upload");return v.default.createElement("div",{className:"drop-zone__content"},o.props.children?o.props.children:v.default.createElement("div",null,v.default.createElement("span",{className:"drop-zone__content-icon"},o.props.icon),v.default.createElement("span",{className:"drop-zone__content-text"},e)))},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)}},{key:"componentDidUpdate",value:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver();
}},{key:"render",value:function(){var e=(0,C.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=v.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?v.default.createElement(w.default,null,t):t}}]),t}(v.default.Component);D.propTypes={className:j.default.string,fullScreen:j.default.bool,icon:j.default.node,onDrop:j.default.func,onVerifyValidTransfer:j.default.func,onFilesDrop:j.default.func,textLabel:j.default.string,translate:j.default.func,showDropZone:j.default.func.isRequired,hideDropZone:j.default.func.isRequired,dropZoneName:j.default.string},D.defaultProps={className:null,onDrop:M.noop,onVerifyValidTransfer:function(){return!0},onFilesDrop:M.noop,fullScreen:!1,icon:v.default.createElement(S.default,{icon:"cloud-upload",size:48}),translate:M.identity,dropZoneName:null};var N={showDropZone:P.showDropZone,hideDropZone:P.hideDropZone};t.default=(0,x.connect)(null,N)((0,k.localize)(D))},"./client/components/file-picker/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/component-file-picker/index.js"),y=o(v),j=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.showPicker=s.showPicker.bind(s),s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,y.default)((0,_.assign)({},this.props),this.props.onPick)}},{key:"render",value:function(){return b.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(b.default.Component);t.default=j,j.displayName="FilePicker",j.propTypes={multiple:h.default.bool,directory:h.default.bool,accept:h.default.string,onClick:h.default.func,onPick:h.default.func},j.defaultProps={multiple:!1,directory:!1,accept:null,onClick:_.noop,onPick:_.noop},e.exports=t.default},"./client/components/forms/form-checkbox/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=o(a),l=s("./node_modules/react/react.js"),d=o(l),u=s("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,s=(0,r.default)(e,["className"]);return d.default.createElement("input",(0,i.default)({},s,{type:"checkbox",className:(0,c.default)(t,"form-checkbox")}))};t.default=p,e.exports=t.default},"./client/components/forms/form-range/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./node_modules/lodash/lodash.js"),j=s("./node_modules/classnames/index.js"),x=o(j),E=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),o.shouldNormalizeChange=function(){var e=window.navigator.userAgent;return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")},o.onChange=function(e){o.props.onChange(e)},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.shouldNormalizeChange()&&this.refs.range.addEventListener("change",this.onChange)}},{key:"componentWillUnmount",value:function(){this.refs.range.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=(0,x.default)(this.props.className,"form-range");return b.default.createElement("input",(0,i.default)({ref:"range",type:"range",className:e},(0,y.omit)(this.props,"className")))}}]),t}(b.default.Component);E.displayName="FormRange",E.propTypes={onChange:v.default.func},E.defaultProps={onChange:y.noop},t.default=E,e.exports=t.default},"./client/components/forms/form-textarea/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=o(a),l=s("./node_modules/react/react.js"),d=o(l),u=s("./node_modules/classnames/index.js"),c=o(u),p=function(e){var t=e.className,s=e.isError,o=e.isValid,n=e.children,a=(0,r.default)(e,["className","isError","isValid","children"]);return d.default.createElement("textarea",(0,i.default)({},a,{className:(0,c.default)(t,"form-textarea",{"is-error":s,"is-valid":o})}),n)};t.default=p,e.exports=t.default},"./client/components/forms/range/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./node_modules/lodash/lodash.js"),j=s("./node_modules/classnames/index.js"),x=o(j),E=s("./client/components/forms/form-range/index.jsx"),C=o(E),I=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),o.state={id:(0,y.uniqueId)("range")},o.getMinContentElement=function(){if(o.props.minContent)return b.default.createElement("span",{className:"range__content is-min"},o.props.minContent)},o.getMaxContentElement=function(){if(o.props.maxContent)return b.default.createElement("span",{className:"range__content is-max"},o.props.maxContent)},o.getValueLabelElement=function(){var e,t;if(o.props.showValueLabel)return e=100*(o.props.value-o.props.min)/(o.props.max-o.props.min),t=Math.floor(13*((50-e)/50)),b.default.createElement("span",{className:"range__label",style:{left:(e||0)+"%",marginLeft:t}},b.default.createElement("output",{className:"range__label-inner",htmlFor:o.state.id,value:o.props.value},o.props.value))},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,x.default)(this.props.className,"range",{"has-min-content":!!this.props.minContent,"has-max-content":!!this.props.maxContent});return b.default.createElement("div",{className:e},this.getMinContentElement(),b.default.createElement(C.default,(0,i.default)({id:this.state.id,className:"range__input"},(0,y.omit)(this.props,"minContent","maxContent","showValueLabel","className"))),this.getMaxContentElement(),this.getValueLabelElement())}}]),t}(b.default.Component);I.displayName="Range",I.propTypes={minContent:v.default.oneOfType([v.default.element,v.default.string]),maxContent:v.default.oneOfType([v.default.element,v.default.string]),min:v.default.oneOfType([v.default.string,v.default.number]),max:v.default.oneOfType([v.default.string,v.default.number]),value:v.default.oneOfType([v.default.string,v.default.number]),showValueLabel:v.default.bool},I.defaultProps={min:0,max:10,value:0,showValueLabel:!1},t.default=I,e.exports=t.default},"./client/components/header-cake/back.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./node_modules/i18n-calypso/index.js"),j=s("./node_modules/gridicons/build/index.js"),x=o(j),E=s("./node_modules/lodash/lodash.js"),C=s("./client/components/button/index.jsx"),I=o(C),S=s("./client/lib/viewport/index.js"),k=o(S),M={windowWidth:480,characterLength:8},R=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={windowWidth:k.default.getWindowInnerWidth()},o.handleWindowResize=function(){o.setState({windowWidth:k.default.getWindowInnerWidth()})},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.resizeThrottled=(0,E.throttle)(this.handleWindowResize,100),window.addEventListener("resize",this.resizeThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeThrottled)}},{key:"hideText",value:function(e){return this.state.windowWidth<=M.windowWidth&&e.length>=M.characterLength||this.state.windowWidth<=300}},{key:"render",value:function(){var e=this.props,t=e.href,s=e.icon,o=e.onClick,n=e.spacer,i=e.text,a=e.translate,r=void 0===i?a("Back"):i,l=(0,v.default)({"header-cake__back":!0,"is-spacer":n,"is-action":!!s});return h.default.createElement(I.default,{compact:!0,borderless:!0,className:l,href:t,onClick:o,disabled:n},h.default.createElement(x.default,{icon:s||"arrow-left",size:18}),!this.hideText(r)&&r)}}]),t}(f.Component);R.propTypes={onClick:b.default.func,href:b.default.string,text:b.default.string,spacer:b.default.bool},R.defaultProps={spacer:!1,disabled:!1},t.default=(0,y.localize)(R),e.exports=t.default},"./client/components/header-cake/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./client/components/card/index.jsx"),j=o(y),x=s("./client/components/header-cake/back.jsx"),E=o(x),C=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.backText,s=e.backHref,o=e.actionButton,n=e.actionText,i=e.actionIcon,a=e.actionHref,r=e.actionOnClick,l=(0,v.default)("header-cake",this.props.className,{"is-compact":this.props.isCompact});return b.default.createElement(j.default,{className:l},b.default.createElement(E.default,{text:t,href:s,onClick:this.props.onClick}),b.default.createElement("div",{className:"header-cake__title",onClick:this.props.onTitleClick},this.props.children),o||b.default.createElement(E.default,{text:n||t,href:a||s,onClick:r,icon:i,spacer:!r}))}}]),t}(g.Component);t.default=C,C.displayName="HeaderCake",C.propTypes={onClick:h.default.func,onTitleClick:h.default.func,backText:h.default.string,backHref:h.default.string,actionButton:h.default.element,actionText:h.default.string,actionHref:h.default.string,actionIcon:h.default.string,actionOnClick:h.default.func},C.defaultProps={isCompact:!1},e.exports=t.default},"./client/components/image-preloader/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/keys.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./node_modules/react/react.js"),j=o(y),x=s("./node_modules/lodash/lodash.js"),E={PENDING:"PENDING",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"},C=function(e){function t(){var e,s,o,n;(0,c.default)(this,t);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return s=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(a))),o.state={status:E.PENDING},o.createLoader=function(e){var t=(e||o.props).src;o.destroyLoader(),o.setState({status:E.LOADING}),t&&(o.image=new Image,o.image.src=t,o.image.onload=o.onLoadComplete,o.image.onerror=o.onLoadComplete)},o.destroyLoader=function(){o.image&&(o.image.onload=x.noop,o.image.onerror=x.noop,delete o.image)},o.onLoadComplete=function(e){return o.destroyLoader(),"load"!==e.type?o.setState({status:E.FAILED},function(){o.props.onError&&o.props.onError(e)}):void o.setState({status:E.LOADED},function(){o.props.onLoad&&o.props.onLoad(e)})},n=s,(0,h.default)(o,n)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){this.createLoader()}},{key:"componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.createLoader(e)}},{key:"componentWillUnmount",value:function(){this.destroyLoader()}},{key:"render",value:function(){var e=void 0,t=void 0;switch(this.state.status){case E.LOADING:e=this.props.placeholder;break;case E.LOADED:t=(0,x.omit)(this.props,(0,r.default)(this.constructor.propTypes)),e=j.default.createElement("img",(0,i.default)({src:this.props.src},t));break;case E.FAILED:e=this.props.children}return j.default.createElement("div",{className:"image-preloader"},e)}}]),t}(j.default.Component);C.propTypes={src:v.default.string,placeholder:v.default.element.isRequired,onLoad:v.default.func,onError:v.default.func},t.default=C,e.exports=t.default},"./client/components/infinite-list/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(n),a=s("./node_modules/debug/browser.js"),r=o(a),l=s("./node_modules/lodash/lodash.js"),d=s("./node_modules/page/index.js"),u=o(d),c=s("./node_modules/prop-types/index.js"),p=o(c),m=s("./node_modules/react/react.js"),f=o(m),h=s("./node_modules/create-react-class/index.js"),g=o(h),b=s("./node_modules/react-dom/index.js"),_=o(b),v=s("./client/lib/detect-history-navigation/index.js"),y=o(v),j=s("./client/lib/infinite-list/actions.js"),x=o(j),E=s("./client/lib/infinite-list/positions-store.js"),C=o(E),I=s("./client/lib/infinite-list/scroll-store.js"),S=o(I),k=s("./client/components/infinite-list/scroll-helper.js"),M=o(k),R=s("./client/lib/scroll-to/index.js"),w=o(R),P=s("./client/lib/react-smart-set-state/index.js"),D=o(P),N=(0,r.default)("calypso:infinite-list");t.default=(0,g.default)({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:p.default.array.isRequired,fetchingNextPage:p.default.bool.isRequired,lastPage:p.default.bool.isRequired,guessedItemHeight:p.default.number.isRequired,itemsPerRow:p.default.number,fetchNextPage:p.default.func.isRequired,getItemRef:p.default.func.isRequired,renderItem:p.default.func.isRequired,renderLoadingPlaceholders:p.default.func.isRequired,renderTrailingItems:p.default.func,context:p.default.oneOfType([p.default.object,p.default.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:D.default,componentWillMount:function(){var e=u.default.current,t=void 0,s=void 0;y.default.loadedViaHistory()&&(t=C.default.get(e),s=S.default.get(e)),t&&s&&(N("overriding scrollTop:",s),t.scrollTop=s),this.scrollHelper=new M.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?N("infinite-list positions loaded from store"):(N("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),N("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),y.default.loadedViaHistory()&&this._overrideHistoryScroll(),N("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),y.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new M.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(N("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,w.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=u.default.current,s=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),x.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(s={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,N("new scroll positions",s,this.state),this.smartSetState(s),x.default.storePositions(t,s)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?_.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=_.default.findDOMNode(this),s=[],o=this.state.firstRenderedIndex,n=this.state.lastRenderedIndex,i=e&&e.offsetTop?e.offsetTop:0,a=void 0,r=void 0,l=void 0,d=void 0,u=e&&e.offsetBottom?e.offsetBottom:0;if(u=u||0,n>-1)for(l=t.children,d=1;d<l.length-1;d++)r=t.children[d].getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,(r.top<0&&Math.abs(r.top)<r.height-i||r.top>0&&r.top<a-u)&&s.push({index:o+d-1,bounds:r});return s},render:function(){var e=(0,l.omit)(this.props,(0,i.default)(this.constructor.propTypes)),t="infinite-list__spacer",s=void 0,o=this.state.lastRenderedIndex,n=[];for((o===-1||o>this.props.items.length-1)&&(N("resetting lastRenderedIndex, currently at %s, %d items",o,this.props.items.length),o=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),N("reset lastRenderedIndex to %s",o)),N("rendering %d to %d",this.state.firstRenderedIndex,o),s=this.state.firstRenderedIndex;s<=o;s++)n.push(this.props.renderItem(this.props.items[s],s));return this.props.fetchingNextPage&&(n=n.concat(this.props.renderLoadingPlaceholders())),f.default.createElement("div",e,f.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),n,this.props.renderTrailingItems(),f.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(N("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),N("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}}),e.exports=t.default},"./client/components/infinite-list/scroll-helper.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/createClass.js"),r=o(a),l=s("./node_modules/debug/browser.js"),d=o(l),u=(0,d.default)("calypso:infinite-list:helper"),c=function(){function e(t){(0,i.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,r.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,s){if("function"==typeof t){s&&(t=t.bind(s));for(var o=e-e%this.props.itemsPerRow,n=Math.min(o+this.props.itemsPerRow,this.props.items.length)-1,i=o;i<=n;i++)t(this.props.items[i],i)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var s=this.props.getItemRef(t),o=this.boundsForRef(s),n=void 0;n=o?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-o.top:o.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[s]=n},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var s=t.props.getItemRef(e);delete t.itemHeights[s]},this)}},{key:"getRowHeight",value:function(e){var t=this,s=0;return this.forEachInRow(e,function(e){var o=t.props.getItemRef(e),n=t.storedItemHeight(o);s=Math.max(s,n)},this),s}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,s=this.firstRenderedIndex||0,o=this.props.items.length,n=t;0===o&&(n=-1),t>=o&&(n=Math.min(s+e,o-1)),n===-1&&o>0&&0===s&&(n=e),n!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=n)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,u("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,u("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,u("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,s=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),s=this.containerBottom-this.bottomPlaceholderHeight,t=s+e,!(t>this.bottomHideLevelSoft&&s>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,u("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;u("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();t.default=c,e.exports=t.default},"./client/components/progress-bar/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./client/components/screen-reader-text/index.js"),j=o(y),x=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,
c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={allTimeMax:o.props.value},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getCompletionPercentage",value:function(){var e=Math.ceil(this.state.allTimeMax/this.props.total*100);return Math.min(e,100)}},{key:"renderBar",value:function(){var e=this.props.title?b.default.createElement(j.default,null,this.props.title):null,t={width:this.getCompletionPercentage()+"%"};return this.props.color&&(t.backgroundColor=this.props.color),b.default.createElement("div",{className:"progress-bar__progress",style:t},e)}},{key:"componentWillReceiveProps",value:function(e){this.setState({allTimeMax:Math.max(this.state.allTimeMax,e.value)})}},{key:"render",value:function(){var e=(0,v.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return b.default.createElement("div",{className:e},this.renderBar())}}]),t}(g.PureComponent);x.defaultProps={total:100,compact:!1,isPulsing:!1},x.propTypes={value:h.default.number.isRequired,total:h.default.number,color:h.default.string,title:h.default.string,compact:h.default.bool,className:h.default.string,isPulsing:h.default.bool},t.default=x,e.exports=t.default},"./client/components/screen-reader-text/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.children;return a.default.createElement("span",{className:"screen-reader-text"},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=s("./node_modules/react/react.js"),a=o(i);e.exports=t.default},"./client/components/section-nav/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./node_modules/lodash/lodash.js"),j=s("./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx"),x=o(j),E=s("./client/components/section-nav/tabs.jsx"),C=o(E),I=s("./client/components/section-nav/item.jsx"),S=o(I),k=s("./client/components/search/index.jsx"),M=o(k),R=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),w.call(o),n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.checkForSiblingControls(this.props.children)}},{key:"componentWillReceiveProps",value:function(e){(0,y.isEqual)(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())}},{key:"render",value:function(){var e=this.getChildren(),t=void 0;return e?(t=(0,v.default)({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems},this.props.className),h.default.createElement("div",{className:t},this.renderDropdown(),h.default.createElement("div",{className:"section-nav__panel"},e))):(t=(0,v.default)({"section-nav":!0,"is-empty":!0},this.props.className),h.default.createElement("div",{className:t},h.default.createElement("div",{className:"section-nav__panel"},h.default.createElement(S.default,null))))}}]),t}(f.Component);R.propTypes={selectedText:b.default.node,selectedCount:b.default.number,hasPinnedItems:b.default.bool,onMobileNavPanelOpen:b.default.func,className:b.default.string,allowDropdown:b.default.bool},R.defaultProps={onMobileNavPanelOpen:function(){},allowDropdown:!0};var w=function(){var e=this;this.state={mobileOpen:!1},this.renderDropdown=function(){return e.props.allowDropdown?h.default.createElement("div",{className:"section-nav__mobile-header",onClick:e.toggleMobileOpenState},h.default.createElement("span",{className:"section-nav__mobile-header-text"},e.props.selectedText)):h.default.createElement("div",null)},this.getChildren=function(){return h.default.Children.map(e.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==C.default||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===C.default&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===M.default&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),h.default.cloneElement(e,t)):null}.bind(e))},this.closeMobilePanel=function(){window.innerWidth<480&&e.state.mobileOpen&&e.setState({mobileOpen:!1})},this.toggleMobileOpenState=function(){var t=!e.state.mobileOpen;e.setState({mobileOpen:t}),t&&e.props.onMobileNavPanelOpen()},this.generateOnSearch=function(t){return function(){t.apply(void 0,arguments),e.closeMobilePanel()}},this.checkForSiblingControls=function(t){e.hasSiblingControls=!1;var s=[M.default,x.default];h.default.Children.forEach(t,function(e,t){t&&e&&!(0,y.includes)(s,e.type)&&(this.hasSiblingControls=!0)}.bind(e))}};t.default=R,e.exports=t.default},"./client/components/section-nav/item.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./client/components/count/index.jsx"),j=o(y),x=s("./client/sections-preload.js"),E=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o._preloaded=!1,o.preload=function(){!o._preloaded&&o.props.preloadSectionName&&(o._preloaded=!0,(0,x.preload)(o.props.preloadSectionName))},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.itemType?this.props.itemType:"tab",t={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};t["section-nav-"+e]=!0;var s=(0,v.default)(this.props.className,t),o=void 0,n=void 0;return this.props.isExternalLink&&(o="_blank"),this.props.disabled||(n=this.props.onClick),h.default.createElement("li",{className:s},h.default.createElement("a",{href:this.props.path,target:o,className:"section-nav-"+e+"__link",onClick:n,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},h.default.createElement("span",{className:"section-nav-"+e+"__text"},this.props.children,"number"==typeof this.props.count&&h.default.createElement(j.default,{count:this.props.count}))))}}]),t}(f.PureComponent);E.propTypes={itemType:b.default.string,path:b.default.string,selected:b.default.bool,tabIndex:b.default.number,onClick:b.default.func,isExternalLink:b.default.bool,disabled:b.default.bool,count:b.default.oneOfType([b.default.number,b.default.bool]),className:b.default.string,preloadSectionName:b.default.string},t.default=E,e.exports=t.default},"./client/components/section-nav/tabs.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-dom/index.js"),v=o(_),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/classnames/index.js"),E=o(x),C=s("./node_modules/lodash/lodash.js"),I=s("./client/components/select-dropdown/item.jsx"),S=o(I),k=s("./client/components/select-dropdown/index.jsx"),M=o(k),R=s("./client/lib/viewport/index.js"),w=o(R),P=480,D=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),o.state={isDropdown:!1},o.getTabWidths=function(){var e=0;b.default.Children.forEach(o.props.children,function(t,s){if(t){var o=v.default.findDOMNode(this.refs["tab-"+s]).offsetWidth;e+=o}}.bind(o)),o.tabsWidth=Math.max(e,o.tabsWidth||0)},o.getDropdown=function(){var e=b.default.Children.map(o.props.children,function(e,t){return e?b.default.createElement(S.default,(0,i.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return b.default.createElement(M.default,{className:"section-nav-tabs__dropdown",selectedText:o.props.selectedText,selectedCount:o.props.selectedCount},e)},o.setDropdown=function(){var e=void 0;if(window.innerWidth>P){if(!o.refs.navGroup)return;e=o.refs.navGroup.offsetWidth,o.getTabWidths(),e<=o.tabsWidth&&!o.state.isDropdown?o.setState({isDropdown:!0}):e>o.tabsWidth&&o.state.isDropdown&&o.setState({isDropdown:!1})}else window.innerWidth<=P&&o.state.isDropdown&&o.setState({isDropdown:!1})},o.keyHandler=function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setDropdown(),this.debouncedAfterResize=(0,C.debounce)(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)}},{key:"componentDidUpdate",value:function(){this.setDropdown()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedAfterResize)}},{key:"render",value:function(){var e=b.default.Children.map(this.props.children,function(e,t){return e&&b.default.cloneElement(e,{ref:"tab-"+t})}),t=(0,E.default)({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),s=w.default.getWindowInnerWidth();return b.default.createElement("div",{className:"section-nav-group",ref:"navGroup"},b.default.createElement("div",{className:t},this.props.label&&b.default.createElement("h6",{className:"section-nav-group__label"},this.props.label),b.default.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&s>P&&this.getDropdown()))}}]),t}(g.Component);D.propTypes={selectedText:j.default.string,selectedCount:j.default.number,label:j.default.string,hasSiblingControls:j.default.bool},D.defaultProps={hasSiblingControls:!1},t.default=D,e.exports=t.default},"./client/components/segmented-control/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/lodash/lodash.js"),h=s("./node_modules/prop-types/index.js"),g=o(h),b=s("./node_modules/react-dom/index.js"),_=o(b),v=s("./node_modules/react/react.js"),y=o(v),j=s("./node_modules/classnames/index.js"),x=o(j),E=s("./client/components/segmented-control/item.jsx"),C=o(E),I=1,S=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));s.getSegmentedItems=function(){var e=0;return s.props.children?y.default.Children.map(s.props.children,function(t,s){var o=y.default.cloneElement(t,{ref:t.type===C.default?"item-"+e:null,key:"item-"+s,onClick:function(e){this.setKeyboardNavigation(!1),"function"==typeof t.props.onClick&&t.props.onClick(e)}.bind(this)});return t.type===C.default&&e++,o},s):s.props.options.map(function(e,t){return y.default.createElement(C.default,{key:"segmented-control-"+this.id+"-"+e.value,ref:"item-"+t,selected:this.state.selected===e.value,onClick:this.selectItem.bind(this,e),path:e.path,index:t,value:e.value},e.label)},s)},s.selectItem=function(e){e&&(s.props.onSelect&&s.props.onSelect(e),s.setState({selected:e.value,keyboardNavigation:!1}))},s.setKeyboardNavigation=function(e){s.setState({keyboardNavigation:e})},s.navigateItem=function(e){switch(e.keyCode){case 9:s.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),document.activeElement.click();break;case 37:e.preventDefault(),s.focusSibling("previous");break;case 39:e.preventDefault(),s.focusSibling("next")}},s.navigateItemByTabKey=function(e){var t=e.shiftKey?"previous":"next",o=s.focusSibling(t);o!==!1&&e.preventDefault()},s.focusSibling=function(e){var t,o,n;return o=s.props.options?(0,f.filter)((0,f.map)(s.props.options,"value"),Boolean):(0,f.filter)(s.props.children,function(e){return e.type===C.default}),"number"!=typeof s.focused&&(s.focused=s.getCurrentFocusedIndex()),t="previous"===e?-1:1,n=s.focused+t,!(n>=o.length||n<0)&&(_.default.findDOMNode(s.refs["item-"+n].refs.itemLink).focus(),s.focused=n,n)},s.getCurrentFocusedIndex=function(){var e=document.activeElement.parentNode,t=Array.prototype.slice(e.parentNode.children),s=t.indexOf(e);return s>-1?s:0};var o;return e.options&&(o=e.initialSelected||e.options[0].value),s.state={selected:o,keyboardNavigation:!1},s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.id=I,I++}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.navigateItem)}},{key:"render",value:function(){var e={"segmented-control":!0,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};return this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0}),y.default.createElement("ul",{className:(0,x.default)(e),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,!0)},this.getSegmentedItems())}}]),t}(y.default.Component);S.propTypes={initialSelected:g.default.string,compact:g.default.bool,className:g.default.string,style:g.default.object,onSelect:g.default.func,options:g.default.arrayOf(g.default.shape({value:g.default.string.isRequired,label:g.default.string.isRequired,path:g.default.string}))},S.defaultProps={compact:!1},t.default=S,e.exports=t.default},"./client/components/segmented-control/item.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/classnames/index.js"),j=o(y),x=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,j.default)({"segmented-control__item":!0,"is-selected":this.props.selected}),t=(0,j.default)("segmented-control__link",(0,i.default)({},"item-index-"+this.props.index,null!=this.props.index));return v.default.createElement("li",{className:e},v.default.createElement("a",{href:this.props.path,className:t,ref:"itemLink",onClick:this.props.onClick,title:this.props.title,"data-e2e-value":this.props.value,role:"radio",tabIndex:0,"aria-selected":this.props.selected},v.default.createElement("span",{className:"segmented-control__text"},this.props.children)))}}]),t}(v.default.Component);x.propTypes={children:b.default.node.isRequired,path:b.default.string,selected:b.default.bool,title:b.default.string,value:b.default.string,onClick:b.default.func},x.defaultProps={selected:!1},t.default=x,e.exports=t.default},"./client/components/sidebar-navigation/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/gridicons/build/index.js"),y=o(v),j=s("./client/state/document-head/selectors.js"),x=s("./client/state/ui/layout-focus/actions.js"),E=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.toggleSidebar=s.toggleSidebar.bind(s),s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return b.default.createElement("header",{className:"current-section"},b.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},b.default.createElement(y.default,{icon:"chevron-left"}),this.props.children,b.default.createElement("div",null,b.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),b.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(b.default.Component);E.propTypes={title:h.default.string,linkClassName:h.default.string,sectionTitle:h.default.string,sectionName:h.default.string.isRequired,setLayoutFocus:h.default.func.isRequired},t.default=(0,_.connect)(function(e){return{title:(0,j.getDocumentHeadTitle)(e)}},{setLayoutFocus:x.setLayoutFocus})(E),e.exports=t.default},"./client/components/sorted-grid/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/lodash/lodash.js"),E=s("./client/components/infinite-list/index.jsx"),C=o(E),I=s("./client/components/sorted-grid/label.jsx"),S=o(I),k=function(e){function t(){var e,s,o,n;(0,c.default)(this,t);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return s=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(a))),o.renderItem=function(e){return e.isGridLabel?o.renderLabels(e):o.props.renderItem(e)},n=s,(0,h.default)(o,n)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"getItems",value:function(){for(var e=[],t=0;t<this.props.items.length;t+=this.props.itemsPerRow){var s=(0,x.slice)(this.props.items,t,t+this.props.itemsPerRow),o=(0,x.reduce)((0,x.map)(s,this.props.getItemGroup),function(e,t){return e[t]=(0,x.get)(e,t,0)+1,e},{});e.push.apply(e,[{isGridLabel:!0,id:t,groups:o}].concat((0,r.default)(s)))}return e}},{key:"renderLabels",value:function(e){var t=this;return v.default.createElement("div",{key:"header_"+e.id,className:"sorted-grid__header"},(0,x.map)(e.groups,function(s,o){return v.default.createElement(S.default,{key:"group_"+o,text:t.props.getGroupLabel(o),itemsCount:s,itemsPerRow:t.props.itemsPerRow,lastInRow:(0,x.last)((0,x.keys)(e.groups))===o})}))}},{key:"render",value:function(){var e=(0,x.omit)(this.props,"getGroupLabel","getItemGroup","items","renderItem");return v.default.createElement(C.default,(0,i.default)({items:this.getItems(),renderItem:this.renderItem},e))}}]),t}(_.PureComponent);k.propTypes={getGroupLabel:j.default.func.isRequired,getItemGroup:j.default.func.isRequired,items:j.default.array,itemsPerRow:j.default.number.isRequired},t.default=k,e.exports=t.default},"./client/components/sorted-grid/label.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/react/react.js"),i=o(n),a=s("./node_modules/prop-types/index.js"),r=o(a),l=s("./node_modules/react-redux/es/index.js"),d=s("./client/state/preferences/selectors.js"),u=function(e){var t=e.itemsCount,s=e.itemsPerRow,o=e.lastInRow,n=e.scale,a=e.text,r=1%n/(s-1)*100||0,l={marginRight:(o?0:r)+"%",width:n*t*100+r*(t-1)+"%"};return i.default.createElement("div",{className:"sorted-grid__label",style:l},a)};u.propTypes={itemsCount:r.default.number,itemsPerRow:r.default.number,lastInRow:r.default.bool,scale:r.default.number.isRequired,text:r.default.string},u.defaultProps={text:""};var c=(0,l.connect)(function(e){return{scale:(0,d.getPreference)(e,"mediaScale")}},null,null,{pure:!1});t.default=c(u),e.exports=t.default},"./client/components/sticky-panel/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/lodash/lodash.js"),h=s("./node_modules/prop-types/index.js"),g=o(h),b=s("./node_modules/react-dom/index.js"),_=o(b),v=s("./node_modules/react/react.js"),y=o(v),j=s("./node_modules/classnames/index.js"),x=o(j),E=s("./client/lib/viewport/index.js"),C=o(E),I=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={isSticky:!1,spacerHeight:0,blockWidth:0},o.onWindowScroll=function(){o.rafHandle=window.requestAnimationFrame(o.updateIsSticky)},o.onWindowResize=function(){o.setState({spacerHeight:o.state.isSticky?_.default.findDOMNode(o).clientHeight:0,blockWidth:o.state.isSticky?_.default.findDOMNode(o).clientWidth:0})},o.updateIsSticky=function(){var e=window.pageYOffset>o.threshold;return o.props.minLimit!==!1&&o.props.minLimit>=window.innerWidth||C.default.isMobile()?o.setState({isSticky:!1}):void(e!==o.state.isSticky&&o.setState({isSticky:e,spacerHeight:e?_.default.findDOMNode(o).clientHeight:0,blockWidth:e?_.default.findDOMNode(o).clientWidth:0}))},o.getBlockStyle=function(){var e;if(o.state.isSticky)return e=document.getElementById("header").getBoundingClientRect().height,{top:e,width:o.state.blockWidth}},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.threshold=_.default.findDOMNode(this).offsetTop,this.throttleOnResize=(0,f.throttle)(this.onWindowResize,200),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.throttleOnResize),this.updateIsSticky()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.throttleOnResize),window.cancelAnimationFrame(this.rafHandle)}},{key:"render",value:function(){var e=(0,x.default)("sticky-panel",this.props.className,{"is-sticky":this.state.isSticky});return y.default.createElement("div",{className:e},y.default.createElement("div",{className:"sticky-panel__content",style:this.getBlockStyle()},this.props.children),y.default.createElement("div",{className:"sticky-panel__spacer",style:{height:this.state.spacerHeight}}))}}]),t}(y.default.Component);I.displayName="StickyPanel",I.propTypes={minLimit:g.default.oneOfType([g.default.bool,g.default.number])},I.defaultProps={minLimit:!1},t.default=I,e.exports=t.default},"./client/components/track-input-changes/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onInputChange=function(){o.inputEdited=!0},o.onInputBlur=function(e){o.inputEdited&&(o.props.onNewValue(e),o.inputEdited=!1)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.inputEdited=!1}},{key:"render",value:function(){var e=this,t=h.default.Children.only(this.props.children),s=(0,_.assign)({},t.props,{onChange:function(s){"function"==typeof t.props.onChange&&t.props.onChange.call(t,s),e.onInputChange(s)},onBlur:function(s){"function"==typeof t.props.onBlur&&t.props.onBlur.call(t,s),e.onInputBlur(s)}});return h.default.cloneElement(t,s)}}]),t}(f.Component);v.displayName="TrackInputChanges",v.propTypes={onNewValue:b.default.func},v.defaultProps={onNewValue:_.noop},t.default=v,e.exports=t.default},"./client/lib/build-url/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s=a.default.parse(e,!0);return t?s.query.s=t:delete s.query.s,s=(0,n.pick)(s,"pathname","hash","query"),a.default.format(s).replace(/\%20/g,"+")};var n=s("./node_modules/lodash/lodash.js"),i=s("./node_modules/url/url.js"),a=o(i);e.exports=t.default},"./client/lib/infinite-list/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/dispatcher/index.js"),a=o(i),r=s("./client/lib/infinite-list/scroll-store.js"),l=o(r),d=s("./client/lib/infinite-list/positions-store.js"),u=o(d),c=null,p=null,m=1e3,f={leading:!1};t.default={storePositions:(0,n.throttle)(function(e,t){c||setTimeout(function(){var e=u.default.get(c.url);(0,n.isEqual)(c.positions,e)||a.default.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:c.url,positions:c.positions}),c=null},0),c={url:e,positions:t}},m,f),storeScroll:(0,n.throttle)(function(e,t){p||setTimeout(function(){var e=l.default.get(p.url);p.scrollPosition!==e&&a.default.handleViewAction({type:"SCROLL_CHANGED",url:p.url,scrollPosition:p.scrollPosition}),p=null},0),p={url:e,scrollPosition:t}},m,f)},e.exports=t.default},"./client/lib/infinite-list/positions-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var s=f.get(e);p("comparing positions:",e,s,t),(0,i.isEqual)(s,t)||(p("storing values:",e,t),m[e]=t,f.emit("change"))}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/lodash/lodash.js"),a=s("./node_modules/debug/browser.js"),r=o(a),l=s("./client/dispatcher/index.js"),d=o(l),u=s("./client/lib/mixins/emitter/index.js"),c=o(u),p=(0,r.default)("calypso:infinite-list:positions-store"),m={},f={get:function(e){return p("positions-store:get(): ",e,m),m[e]}};(0,c.default)(f),f.dispatchToken=d.default.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":n(t.url,t.positions)}}),t.default=f,e.exports=t.default},"./client/lib/infinite-list/scroll-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var s=l.get(e);s!==t&&(r[e]=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./client/dispatcher/index.js"),a=o(i),r={},l={get:function(e){return r[e]}};l.dispatchToken=a.default.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":n(t.url,t.scrollPosition)}}),t.default=l,e.exports=t.default},"./client/lib/media/library-selected-store.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){e in b._media||(b._media[e]=[])}function i(e,t){b._media[e]=(0,u.map)(t,"ID")}function a(e,t){n(e),b._media[e].push(t.ID)}function r(e,t,s){var o;s||(s=t.ID),s&&e in b._media&&(o=b._media[e].indexOf(s),-1!==o&&b._media[e].splice(o,1,t.ID))}function l(e,t){t.forEach(function(t){r(e,t)})}function d(e,t){var s;e in b._media&&(s=b._media[e].indexOf(t.ID),-1!==s&&b._media[e].splice(s,1))}Object.defineProperty(t,"__esModule",{value:!0});var u=s("./node_modules/lodash/lodash.js"),c=s("./client/lib/media/store.js"),p=o(c),m=s("./client/dispatcher/index.js"),f=o(m),h=s("./client/lib/mixins/emitter/index.js"),g=o(h),b={_media:{}};(0,g.default)(b),b.get=function(e,t){return p.default.get(e,t)},b.getAll=function(e){return e in b._media?b._media[e].map(function(t){return p.default.get(e,t)}).filter(function(e){return e&&(e.guid||e.transient)}):[]},b.dispatchToken=f.default.register(function(e){var t=e.action;switch(f.default.waitFor([p.default.dispatchToken]),t.type){case"CHANGE_MEDIA_SOURCE":i(t.siteId,[]),b.emit("change");break;case"SET_MEDIA_LIBRARY_SELECTED_ITEMS":if(t.error||!t.siteId||!t.data||!Array.isArray(t.data))break;i(t.siteId,t.data),b.emit("change");break;case"CREATE_MEDIA_ITEM":!t.error&&t.siteId&&t.data&&(a(t.siteId,t.data),b.emit("change"));break;case"RECEIVE_MEDIA_ITEM":if(t.error&&t.siteId&&t.id&&(d(t.siteId,{ID:t.id}),b.emit("change")),!t.siteId||!t.data||t.error)break;r(t.siteId,t.data,t.id),b.emit("change");break;case"RECEIVE_MEDIA_ITEMS":!t.error&&t.siteId&&t.data&&t.data.media&&(l(t.siteId,t.data.media),b.emit("change"));break;case"REMOVE_MEDIA_ITEM":if(!t.siteId||!t.data||t.error)break;d(t.siteId,t.data),b.emit("change")}}),t.default=b,e.exports=t.default},"./client/lib/popup-monitor/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(){this.intervals={},this.monitorInterval=null}Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(i),r=s("./client/lib/mixins/emitter/index.js"),l=o(r);
(0,l.default)(n.prototype),n.prototype.open=function(e,t,s){var o;return t=t||Date.now(),o=window.open(e,t,s),this.startMonitoring(t,o),this},n.prototype.getScreenCenterSpecs=function(e,t){var s="undefined"!=typeof window.screenTop?window.screenTop:window.screenY,o="undefined"!=typeof window.screenLeft?window.screenLeft:window.screenX;return["width="+e,"height="+t,"top="+(s+window.innerHeight/2-t/2),"left="+(o+window.innerWidth/2-e/2)].join()},n.prototype.isOpen=function(e){var t=!1;try{t=this.intervals[e]&&this.intervals[e].closed}catch(e){}return!t},n.prototype.checkStatus=function(){for(var e in this.intervals)this.intervals.hasOwnProperty(e)&&!this.isOpen(e)&&(this.emit("close",e),delete this.intervals[e]);0===(0,a.default)(this.intervals).length&&(clearInterval(this.monitorInterval),delete this.monitorInterval)},n.prototype.startMonitoring=function(e,t){this.monitorInterval||(this.monitorInterval=setInterval(this.checkStatus.bind(this),100)),this.intervals[e]=t},t.default=n,e.exports=t.default},"./client/lib/react-pass-to-children/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s,o=(0,n.assign)({},e.props,t);return delete o.children,a.default.Children.count(e.props.children)>1?(s=a.default.Children.map(e.props.children,function(e){return a.default.isValidElement(e)?a.default.cloneElement(e,o):e}),a.default.createElement("div",null,s)):a.default.cloneElement(e.props.children,o)};var n=s("./node_modules/lodash/lodash.js"),i=s("./node_modules/react/react.js"),a=o(i);e.exports=t.default},"./client/lib/search-url/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){if(s)return void s(e);var o=(0,l.default)(window.location.href,e);c("search posts for:",e),t&&e?(c("replacing URL: "+o),a.default.replace(o)):(c("setting URL: "+o),a.default.show(o))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=s("./node_modules/page/index.js"),a=o(i),r=s("./client/lib/build-url/index.js"),l=o(r),d=s("./node_modules/debug/browser.js"),u=o(d),c=(0,u.default)("calypso:search-url");e.exports=t.default},"./client/lib/sharing/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./client/lib/popup-monitor/index.js"),i=o(n),a=function(e,t){var s=new i.default;s.open(e,null,"toolbar=0,location=0,status=0,menubar=0,"+s.getScreenCenterSpecs(780,500)),s.once("close",t)};t.default=a,e.exports=t.default},"./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentNavigationTab=void 0;var n=s("./node_modules/react/react.js"),i=o(n),a=s("./node_modules/classnames/index.js"),r=o(a),l=t.CommentNavigationTab=function(e){var t=e.children,s=e.className,o=e.onClick;return i.default.createElement("div",{className:(0,r.default)("comment-navigation__tab",s),onClick:o},t)};t.default=l},"./client/my-sites/media-library/content.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/page/index.js"),E=o(x),C=s("./node_modules/i18n-calypso/index.js"),I=s("./client/lib/analytics/index.js"),S=o(I),k=s("./client/lib/analytics/track-component-view/index.jsx"),M=o(k),R=s("./client/components/notice/index.jsx"),w=o(R),P=s("./client/components/notice/notice-action.jsx"),D=o(P),N=s("./client/components/data/media-list-data/index.jsx"),T=o(N),A=s("./client/components/data/media-library-selected-data/index.jsx"),L=o(A),O=s("./client/lib/media/actions.js"),H=o(O),U=s("./client/lib/media/constants.js"),V=s("./client/state/sites/selectors.js"),F=s("./client/my-sites/media-library/header.jsx"),B=o(F),q=s("./client/my-sites/media-library/external-media-header.jsx"),W=o(q),z=s("./client/my-sites/media-library/list.jsx"),G=o(z),K=s("./client/my-sites/sharing/connections/inline-connection.jsx"),Z=o(K),Y=s("./client/state/sharing/keyring/selectors.js"),Q=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),o.retryList=function(){H.default.sourceChanged(o.props.site.ID)},o.goToSharing=function(e){e.preventDefault(),(0,E.default)("/sharing/"+o.props.site.slug)},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"renderErrors",value:function(){var e=this,t=(0,v.values)(this.props.mediaValidationErrors).map(v.head);return(0,v.map)((0,v.groupBy)(t),function(t,s){var o=void 0,n=void 0,i={count:t.length,args:t.length};e.props.site&&(n=H.default.clearValidationErrorsByType.bind(null,e.props.site.ID,s));var a="is-error",r=void 0,l=void 0,d=!1;switch(s){case U.ValidationErrors.FILE_TYPE_NOT_IN_PLAN:a="is-warning",r="plan-media-storage-error-video",l="video-upload",o=e.props.translate("%d file could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.","%d files could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.",i);break;case U.ValidationErrors.FILE_TYPE_UNSUPPORTED:o=e.props.translate("%d file could not be uploaded because the file type is not supported.","%d files could not be uploaded because their file types are unsupported.",i);break;case U.ValidationErrors.UPLOAD_VIA_URL_404:o=e.props.translate("%d file could not be uploaded because no image exists at the specified URL.","%d files could not be uploaded because no images exist at the specified URLs",i);break;case U.ValidationErrors.EXCEEDS_MAX_UPLOAD_SIZE:o=e.props.translate("%d file could not be uploaded because it exceeds the maximum upload size.","%d files could not be uploaded because they exceed the maximum upload size.",i);break;case U.ValidationErrors.NOT_ENOUGH_SPACE:r="plan-media-storage-error",l="extra-storage",o=e.props.translate("%d file could not be uploaded because there is not enough space left.","%d files could not be uploaded because there is not enough space left.",i);break;case U.ValidationErrors.EXCEEDS_PLAN_STORAGE_LIMIT:r="plan-media-storage-error",l="extra-storage",o=e.props.translate("%d file could not be uploaded because you have reached your plan storage limit.","%d files could not be uploaded because you have reached your plan storage limit.",i);break;case U.ValidationErrors.SERVICE_FAILED:o=e.props.translate("We are unable to retrieve your full media library."),d=!0;break;default:o=e.props.translate("%d file could not be uploaded because an error occurred while uploading.","%d files could not be uploaded because errors occurred while uploading.",i)}return b.default.createElement(w.default,{key:s,status:a,text:o,onDismissClick:n},e.renderNoticeAction(r,l),d&&e.renderTryAgain())})}},{key:"renderTryAgain",value:function(){return b.default.createElement(D.default,{onClick:this.retryList},this.props.translate("Retry"))}},{key:"renderNoticeAction",value:function(e,t){if(!e)return null;var s="calypso_upgrade_nudge_impression",o={cta_name:e,cta_feature:t};return b.default.createElement(D.default,{external:!0,href:t?"/plans/compare/"+this.props.siteSlug+"?feature="+t:"/plans/"+this.props.siteSlug,onClick:this.recordPlansNavigation.bind(this,"calypso_upgrade_nudge_cta_click",o)},this.props.translate("Upgrade Plan"),b.default.createElement(M.default,{eventName:s,eventProperties:o}))}},{key:"recordPlansNavigation",value:function(e,t){S.default.ga.recordEvent("Media","Clicked Upload Error Action"),S.default.tracks.recordEvent(e,t)}},{key:"renderExternalMedia",value:function(){var e=this.props.translate("To show Photos from Google, you need to connect your Google account.");return b.default.createElement("div",{className:"media-library__connect-message"},b.default.createElement("p",null,b.default.createElement("img",{src:"/calypso/images/sharing/google-photos-logo.svg",width:"96",height:"96"})),b.default.createElement("p",null,e),b.default.createElement(Z.default,{serviceName:"google_photos"}))}},{key:"getThumbnailType",value:function(){return""!==this.props.source?U.MEDIA_IMAGE_THUMBNAIL:this.props.site.is_private?U.MEDIA_IMAGE_RESIZER:U.MEDIA_IMAGE_PHOTON}},{key:"renderMediaList",value:function(){return!this.props.site||this.props.isRequesting&&!this.hasRequested?(this.hasRequested=!0,b.default.createElement(G.default,{key:"list-loading",filterRequiresUpgrade:this.props.filterRequiresUpgrade})):""===this.props.source||this.props.isConnected?b.default.createElement(T.default,{siteId:this.props.site.ID,postId:this.props.postId,filter:this.props.filter,search:this.props.search,source:this.props.source},b.default.createElement(L.default,{siteId:this.props.site.ID},b.default.createElement(G.default,{key:"list-"+[this.props.site.ID,this.props.search,this.props.filter].join(),site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.props.filterRequiresUpgrade,search:this.props.search,containerWidth:this.props.containerWidth,thumbnailType:this.getThumbnailType(),single:this.props.single,scrollable:this.props.scrollable,onEditItem:this.props.onEditItem}))):this.renderExternalMedia()}},{key:"renderHeader",value:function(){return this.props.isConnected?""!==this.props.source?b.default.createElement(W.default,{onMediaScaleChange:this.props.onMediaScaleChange,site:this.props.site,visible:!this.props.isRequesting,canCopy:void 0===this.props.postId,source:this.props.source,onSourceChange:this.props.onSourceChange,selectedItems:this.props.selectedItems,sticky:!this.props.scrollable}):this.props.filterRequiresUpgrade?null:b.default.createElement(B.default,{site:this.props.site,filter:this.props.filter,onMediaScaleChange:this.props.onMediaScaleChange,onAddMedia:this.props.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDeleteItem:this.props.onDeleteItem,sticky:!this.props.scrollable}):null}},{key:"render",value:function(){return b.default.createElement("div",{className:"media-library__content"},this.renderHeader(),this.renderErrors(),this.renderMediaList())}}]),t}(b.default.Component);Q.propTypes={site:j.default.object,mediaValidationErrors:j.default.object,filter:j.default.string,filterRequiresUpgrade:j.default.bool,search:j.default.string,source:j.default.string,containerWidth:j.default.number,single:j.default.bool,scrollable:j.default.bool,onAddMedia:j.default.func,onMediaScaleChange:j.default.func,onEditItem:j.default.func,postId:j.default.number,isConnected:j.default.bool},Q.defaultProps={mediaValidationErrors:(0,i.default)({}),onAddMedia:v.noop,source:""},t.default=(0,_.connect)(function(e,t){return{siteSlug:t.site?(0,V.getSiteSlug)(e,t.site.ID):"",isRequesting:(0,Y.isKeyringConnectionsFetching)(e)}},null,null,{pure:!1})((0,C.localize)(Q)),e.exports=t.default},"./client/my-sites/media-library/data-source.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryDataSource=void 0;var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/gridicons/build/index.js"),_=o(b),v=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/classnames/index.js"),E=o(x),C=s("./client/components/button/index.jsx"),I=o(C),S=s("./client/components/popover/menu.jsx"),k=o(S),M=s("./client/components/popover/menu-item.jsx"),R=o(M),w=s("./client/config/index.js"),P=o(w),D=t.MediaLibraryDataSource=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.togglePopover=function(){s.setState({popover:!s.state.popover})},s.changeSource=function(e){var t=e.target,o=t.getAttribute("action")?t.getAttribute("action"):t.parentNode.getAttribute("action"),n=o?o:"";n!==s.props.source&&s.props.onSourceChange(n)},s.state={popover:!1},s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"renderScreenReader",value:function(e){return h.default.createElement("span",{className:"screen-reader-text"},e&&e.label)}},{key:"renderMenuItems",value:function(e){var t=this;return e.map(function(e){return h.default.createElement(R.default,{action:e.value,key:e.value,onClick:t.changeSource},e.icon,e.label)})}},{key:"render",value:function(){var e=this.props,t=e.translate,s=e.source,o=[{value:"",label:t("WordPress library"),icon:h.default.createElement(_.default,{icon:"my-sites",size:24})},{value:"google_photos",label:t("Photos from Your Google library"),icon:h.default.createElement("img",{src:"/calypso/images/sharing/google-photos-logo.svg",width:"24",height:"24"})}],n=(0,v.find)(o,function(e){return e.value===s}),i=(0,E.default)({button:!0,"media-library__source-button":!0,"is-open":this.state.popover});return P.default.isEnabled("external-media")?h.default.createElement("div",{className:"media-library__datasource"},h.default.createElement(I.default,{borderless:!0,ref:"popoverMenuButton",className:i,onClick:this.togglePopover,title:t("Choose media library source")},n&&n.icon,this.renderScreenReader(n),h.default.createElement(k.default,{context:this.refs&&this.refs.popoverMenuButton,isVisible:this.state.popover,position:"bottom right",onClose:this.togglePopover,className:"is-dialog-visible media-library__header-popover"},this.renderMenuItems(o)))):null}}]),t}(f.Component);D.propTypes={source:j.default.string.isRequired,onSourceChange:j.default.func.isRequired},t.default=(0,g.localize)(D)},"./client/my-sites/media-library/drop-zone.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./client/lib/analytics/index.js"),y=o(v),j=s("./client/components/drop-zone/index.jsx"),x=o(j),E=s("./client/lib/media/actions.js"),C=o(E),I=s("./client/lib/site/utils.js"),S=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.uploadFiles=function(e){o.props.site&&(C.default.clearValidationErrors(o.props.site.ID),C.default.add(o.props.site.ID,e),o.props.onAddMedia(),o.props.trackStats&&y.default.mc.bumpStat("editor_upload_via","drop"))},o.isValidTransfer=function(e){return!!e&&(!e.mozSourceNode&&(!e.types||-1!==Array.prototype.indexOf.call(e.types,"Files")))},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return(0,I.userCan)("upload_files",this.props.site)?b.default.createElement(x.default,{fullScreen:this.props.fullScreen,onVerifyValidTransfer:this.isValidTransfer,onFilesDrop:this.uploadFiles}):null}}]),t}(b.default.Component);S.displayName="MediaLibraryDropZone",S.propTypes={site:h.default.object,fullScreen:h.default.bool,onAddMedia:h.default.func,trackStats:h.default.bool},S.defaultProps={fullScreen:!0,onAddMedia:_.noop,trackStats:!0},t.default=S,e.exports=t.default},"./client/my-sites/media-library/external-media-header.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/gridicons/build/index.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/i18n-calypso/index.js"),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./client/my-sites/media-library/scale.jsx"),E=o(x),C=s("./client/components/card/index.jsx"),I=o(C),S=s("./client/components/button/index.jsx"),k=o(S),M=s("./client/lib/media/actions.js"),R=o(M),w=s("./client/lib/media/list-store.js"),P=o(w),D=s("./client/components/sticky-panel/index.jsx"),N=o(D),T=250,A=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.onCopy=function(){var e=s.props,t=e.site,o=e.selectedItems,n=e.source,i=e.onSourceChange;i("",function(){R.default.addExternal(t.ID,o,n)})},s.handleClick=s.onClick.bind(s),s.handleMedia=s.onUpdateState.bind(s),s.handleFetchOn=s.onSetFetch.bind(s),s.handleFetchOff=(0,_.debounce)(s.onDisableFetch.bind(s),T),s.state=s.getState(),s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"onSetFetch",value:function(){this.handleFetchOff.cancel(),this.setState({fetching:!0})}},{key:"onDisableFetch",value:function(){this.setState({fetching:!1})}},{key:"componentDidMount",value:function(){P.default.on("change",this.handleMedia)}},{key:"componentWillUnmount",value:function(){this.handleFetchOff.cancel(),P.default.off("change",this.handleMedia)}},{key:"onUpdateState",value:function(){var e=this.getState(),t=e.fetching;t?this.handleFetchOn():this.handleFetchOff()}},{key:"getState",value:function(){return{fetching:P.default.isFetchingNextPage(this.props.site.ID)}}},{key:"onClick",value:function(){var e=this.props.site.ID;R.default.sourceChanged(e),R.default.fetchNextPage(e)}},{key:"renderCopyButton",value:function(){var e=this.props,t=e.selectedItems,s=e.translate;return h.default.createElement(k.default,{compact:!0,disabled:0===t.length,onClick:this.onCopy,primary:!0},s("Copy to media library"))}},{key:"renderCard",value:function(){var e=this.props,t=e.onMediaScaleChange,s=e.translate,o=e.canCopy;return h.default.createElement(I.default,{className:"media-library__header"},h.default.createElement(k.default,{compact:!0,disabled:this.state.fetching,onClick:this.handleClick},h.default.createElement(b.default,{icon:"refresh",size:24}),s("Refresh")),o&&this.renderCopyButton(),h.default.createElement(E.default,{onChange:t}))}},{key:"render",value:function(){var e=this.props.visible;return e?this.props.sticky?h.default.createElement(N.default,{minLimit:660},this.renderCard()):this.renderCard():null}}]),t}(h.default.Component);A.propTypes={onMediaScaleChange:j.default.func,site:j.default.object.isRequired,visible:j.default.bool.isRequired,canCopy:j.default.bool,selectedItems:j.default.array,onSourceChange:j.default.func,sticky:j.default.bool},t.default=(0,v.localize)(A),e.exports=t.default},"./client/my-sites/media-library/filter-bar.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryFilterBar=void 0;var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/lodash/lodash.js"),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./client/components/section-nav/index.jsx"),j=o(y),x=s("./client/components/section-nav/tabs.jsx"),E=o(x),C=s("./client/components/search/index.jsx"),I=o(C),S=s("./client/lib/analytics/track-component-view/index.jsx"),k=o(S),M=s("./client/blocks/plan-storage/index.jsx"),R=o(M),w=s("./client/my-sites/media-library/filter-item.jsx"),P=o(w),D=s("./client/my-sites/media-library/data-source.jsx"),N=o(D),T=t.MediaLibraryFilterBar=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.changeFilter=function(e){o.props.onFilterChange(e)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getSearchPlaceholderText",value:function(){var e=this.props,t=e.filter,s=e.source,o=e.translate;if("google_photos"===s)return o("Search your Google library…");switch(t){case"this-post":return o("Search media uploaded to this post…");case"images":return o("Search images…");case"audio":return o("Search audio files…");case"videos":return o("Search videos…");case"documents":return o("Search documents…");default:return o("Search all media…")}}},{key:"getFilterLabel",value:function(e){var t=this.props.translate;switch(e){case"this-post":return t("This Post",{comment:"Filter label for media list"});case"images":return t("Images",{comment:"Filter label for media list"});case"audio":return t("Audio",{comment:"Filter label for media list"});case"videos":return t("Videos",{comment:"Filter label for media list"});case"documents":return t("Documents",{comment:"Filter label for media list"});default:return t("All",{comment:"Filter label for media list"})}}},{key:"isFilterDisabled",value:function(e){var t=this.props.enabledFilters;return t&&(!e.length||!(0,b.includes)(t,e))}},{key:"renderTabItems",value:function(){var e=this;if(""!==this.props.source)return null;var t=["","this-post","images","documents","videos","audio"];return this.props.post||(0,b.pull)(t,"this-post"),h.default.createElement(E.default,null,t.map(function(t){return h.default.createElement(P.default,{key:"filter-tab-"+t,value:t,selected:e.props.filter===t,onChange:e.changeFilter,disabled:e.isFilterDisabled(t)},e.getFilterLabel(t))}))}},{key:"renderSearchSection",value:function(){if(this.props.filterRequiresUpgrade||!this.props.isConnected)return null;var e=""===this.props.source;return h.default.createElement(I.default,{key:this.props.source,analyticsGroup:"Media",pinned:e,fitsContainer:!0,onSearch:this.props.onSearch,initialValue:this.props.search,placeholder:this.getSearchPlaceholderText(),delaySearch:!0})}},{key:"renderPlanStorage",value:function(){if(this.props.source)return null;var e="calypso_upgrade_nudge_impression",t={cta_name:"plan-media-storage"};return h.default.createElement(R.default,{siteId:this.props.site.ID},h.default.createElement(k.default,{eventName:e,eventProperties:t}))}},{key:"render",value:function(){return h.default.createElement("div",{className:"media-library__filter-bar"},h.default.createElement(N.default,{source:this.props.source,onSourceChange:this.props.onSourceChange}),h.default.createElement(j.default,{selectedText:this.getFilterLabel(this.props.filter),hasSearch:!0,allowDropdown:!this.props.source},this.renderTabItems(),this.renderSearchSection()),this.renderPlanStorage())}}]),t}(f.Component);T.propTypes={basePath:v.default.string,enabledFilters:v.default.arrayOf(v.default.string),filter:v.default.string,filterRequiresUpgrade:v.default.bool,search:v.default.string,source:v.default.string,site:v.default.object,onFilterChange:v.default.func,onSearch:v.default.func,translate:v.default.func,post:v.default.bool,isConnected:v.default.bool},T.defaultProps={filter:"",basePath:"/media",onFilterChange:b.noop,onSourceChange:b.noop,onSearch:b.noop,translate:b.identity,source:"",post:!1,isConnected:!0},t.default=(0,g.localize)(T)},"./client/my-sites/media-library/filter-item.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./client/components/section-nav/item.jsx"),b=o(g),_=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.activate=function(){o.props.onChange(o.props.value)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,s=e.selected;return h.default.createElement(b.default,{selected:s,onClick:this.activate,disabled:t},this.props.children)}}]),t}(f.Component);t.default=_,e.exports=t.default},"./client/my-sites/media-library/filter-to-mime-prefix.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;switch(e){case"images":t="image";break;case"audio":t="audio";break;case"videos":t="video";break;case"documents":t="application"}return t},e.exports=t.default},"./client/my-sites/media-library/header.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/react/react.js"),_=o(b),v=s("./node_modules/gridicons/build/index.js"),y=o(v),j=s("./client/components/popover/menu.jsx"),x=o(j),E=s("./client/components/popover/menu-item.jsx"),C=o(E),I=s("./client/my-sites/media-library/scale.jsx"),S=o(I),k=s("./client/my-sites/media-library/upload-button.jsx"),M=o(k),R=s("./client/my-sites/media-library/upload-url.jsx"),w=o(R),P=s("./client/lib/site/utils.js"),D=s("./client/post-editor/media-modal/secondary-actions.jsx"),N=o(D),T=s("./client/components/card/index.jsx"),A=o(T),L=s("./client/components/button-group/index.jsx"),O=o(L),H=s("./client/components/button/index.jsx"),U=o(H),V=s("./client/components/sticky-panel/index.jsx"),F=o(V),B=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={addingViaUrl:!1,isMoreOptionsVisible:!1},o.setMoreOptionsContext=function(e){e&&o.setState({moreOptionsContext:e})},o.toggleAddViaUrl=function(e){o.setState({addingViaUrl:e,isMoreOptionsVisible:!1})},o.toggleMoreOptions=function(e){o.setState({isMoreOptionsVisible:e})},o.renderUploadButtons=function(){var e=o.props,t=e.site,s=e.filter,n=e.onAddMedia;if((0,P.userCan)("upload_files",t))return _.default.createElement(O.default,{className:"media-library__upload-buttons"},_.default.createElement(M.default,{site:t,filter:s,onAddMedia:n,className:"button is-compact"},_.default.createElement(y.default,{icon:"add-image"}),_.default.createElement("span",{className:"is-desktop"},o.props.translate("Add New",{context:"Media upload"}))),_.default.createElement(U.default,{compact:!0,ref:o.setMoreOptionsContext,onClick:o.toggleMoreOptions.bind(o,!o.state.isMoreOptionsVisible),className:"button media-library__upload-more"},_.default.createElement("span",{className:"screen-reader-text"},o.props.translate("More Options")),_.default.createElement(y.default,{icon:"chevron-down",size:20}),_.default.createElement(x.default,{context:o.state.moreOptionsContext,isVisible:o.state.isMoreOptionsVisible,onClose:o.toggleMoreOptions.bind(o,!1),position:"bottom right",className:"is-dialog-visible media-library__header-popover"},_.default.createElement(C.default,{onClick:o.toggleAddViaUrl.bind(o,!0)},o.props.translate("Add via URL",{context:"Media upload"})))))},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.site,s=e.onAddMedia;if(this.state.addingViaUrl)return _.default.createElement(w.default,{site:t,onAddMedia:s,onClose:this.toggleAddViaUrl.bind(this,!1),className:"media-library__header"});var o=_.default.createElement(A.default,{className:"media-library__header"},this.renderUploadButtons(),_.default.createElement(N.default,{selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDelete:this.props.onDeleteItem,site:this.props.site,view:"LIST"}),_.default.createElement(S.default,{onChange:this.props.onMediaScaleChange}));return this.props.sticky?_.default.createElement(F.default,{minLimit:660},o):o}}]),t}(_.default.Component);B.displayName="MediaLibraryHeader",B.propTypes={site:h.default.object,filter:h.default.string,sliderPositionCount:h.default.number,onMediaScaleChange:h.default.func,onAddMedia:h.default.func,sticky:h.default.bool},B.defaultProps={onAddMedia:function(){},sliderPositionCount:100,sticky:!1},t.default=(0,g.localize)(B),e.exports=t.default},"./client/my-sites/media-library/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/classnames/index.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/prop-types/index.js"),y=o(v),j=s("./node_modules/react-redux/es/index.js"),x=s("./client/my-sites/media-library/content.jsx"),E=o(x),C=s("./client/lib/media/actions.js"),I=o(C),S=s("./client/my-sites/media-library/drop-zone.jsx"),k=o(S),M=s("./client/lib/media/library-selected-store.js"),R=o(M),w=s("./client/lib/media/utils.js"),P=o(w),D=s("./client/my-sites/media-library/filter-to-mime-prefix.js"),N=o(D),T=s("./client/my-sites/media-library/filter-bar.jsx"),A=o(T),L=s("./client/components/data/media-validation-data/index.jsx"),O=o(L),H=s("./client/components/data/query-preferences/index.jsx"),U=o(H),V=s("./client/lib/search-url/index.js"),F=o(V),B=s("./client/state/sharing/keyring/selectors.js"),q=s("./client/state/sharing/keyring/actions.js"),W=function(e){return""===e.source||(0,_.some)(e.connectedServices,function(t){
return t.service===e.source})},z=function(e){return!e.isRequesting&&""!==e.source&&0===e.connectedServices.length},G=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.doSearch=function(e){(0,F.default)(e,o.props.search,o.props.onSearch)},o.onAddMedia=function(){var e=R.default.getAll(o.props.site.ID),t=e;o.props.site&&(o.props.filter&&(t=P.default.filterItemsByMimePrefix(t,(0,N.default)(o.props.filter))),o.props.single&&t.length>1&&(t=t.slice(-1)),(0,_.isEqual)(e,t)||I.default.setLibrarySelectedItems(o.props.site.ID,t),o.props.onAddMedia())},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){z(this.props)&&this.props.requestKeyringConnections()}},{key:"componentWillReceiveProps",value:function(e){z(e)&&""===this.props.source&&this.props.requestKeyringConnections()}},{key:"filterRequiresUpgrade",value:function(){var e=this.props,t=e.filter,s=e.site,o=e.source;if(o)return!1;switch(t){case"audio":return!(s&&s.options.upgraded_filetypes_enabled||s.jetpack);case"videos":return!(s&&s.options.videopress_enabled||s.jetpack)}return!1}},{key:"renderDropZone",value:function(){return""!==this.props.source?null:h.default.createElement(k.default,{site:this.props.site,filter:this.props.filter,fullScreen:this.props.fullScreenDropZone,onAddMedia:this.onAddMedia})}},{key:"render",value:function(){var e=void 0;e=h.default.createElement(E.default,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),search:this.props.search,source:this.props.source,isConnected:W(this.props),containerWidth:this.props.containerWidth,single:this.props.single,scrollable:this.props.scrollable,onAddMedia:this.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,onMediaScaleChange:this.props.onScaleChange,onSourceChange:this.props.onSourceChange,selectedItems:this.props.mediaLibrarySelectedItems,onDeleteItem:this.props.onDeleteItem,onEditItem:this.props.onEditItem,onViewDetails:this.props.onViewDetails,postId:this.props.postId}),this.props.site&&(e=h.default.createElement(O.default,{siteId:this.props.site.ID},e));var t=(0,b.default)("media-library",{"is-single":this.props.single},this.props.className);return h.default.createElement("div",{className:t},h.default.createElement(U.default,null),this.renderDropZone(),h.default.createElement(A.default,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),enabledFilters:this.props.enabledFilters,search:this.props.search,onFilterChange:this.props.onFilterChange,onSourceChange:this.props.onSourceChange,source:this.props.source,onSearch:this.doSearch,isConnected:W(this.props),post:!!this.props.postId}),e)}}]),t}(f.Component);G.propTypes={className:y.default.string,site:y.default.object,filter:y.default.string,enabledFilters:y.default.arrayOf(y.default.string),search:y.default.string,source:y.default.string,onAddMedia:y.default.func,onFilterChange:y.default.func,onSourceChange:y.default.func,onSearch:y.default.func,onScaleChange:y.default.func,onEditItem:y.default.func,fullScreenDropZone:y.default.bool,containerWidth:y.default.number,single:y.default.bool,scrollable:y.default.bool,postId:y.default.number},G.defaultProps={fullScreenDropZone:!0,onAddMedia:function(){},onScaleChange:function(){},scrollable:!1,source:""},t.default=(0,j.connect)(function(e){return{connectedServices:(0,_.toArray)((0,B.getKeyringConnections)(e)).filter(function(e){return"other"===e.type&&"ok"===e.status}),isRequesting:(0,B.isKeyringConnectionsFetching)(e)}},{requestKeyringConnections:q.requestKeyringConnections})(G),e.exports=t.default},"./client/my-sites/media-library/list-item-audio.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./client/my-sites/media-library/list-item-file-details.jsx"),v=o(_),y=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return b.default.createElement(v.default,(0,i.default)({},this.props,{icon:"audio"}))}}]),t}(b.default.Component);y.displayName="MediaLibraryListItemDocument",t.default=y,e.exports=t.default},"./client/my-sites/media-library/list-item-document.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./client/my-sites/media-library/list-item-file-details.jsx"),b=o(g),_=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement(b.default,this.props)}}]),t}(h.default.Component);_.displayName="MediaLibraryListItemDocument",t.default=_,e.exports=t.default},"./client/my-sites/media-library/list-item-file-details.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/gridicons/build/index.js"),v=o(_),y=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return b.default.createElement("div",{className:"media-library__list-item-file-details media-library__list-item-centered"},b.default.createElement("div",{className:"media-library__list-item-icon"},b.default.createElement(v.default,{icon:this.props.icon})),b.default.createElement("div",{className:"media-library__list-item-file-name",style:{fontSize:12*(1+this.props.scale)}},this.props.media.title),b.default.createElement("hr",{className:"media-library__list-item-details-separator"}),b.default.createElement("div",{className:"media-library__list-item-file-extension",style:{fontSize:9*(1+this.props.scale)}},(this.props.media.extension||"").toUpperCase()))}}]),t}(b.default.Component);y.displayName="MediaLibraryListItemFileDetails",y.propTypes={media:h.default.object,scale:h.default.number,icon:h.default.string},y.defaultProps={icon:"pages"},t.default=y,e.exports=t.default},"./client/my-sites/media-library/list-item-image.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./client/lib/media/utils.js"),v=o(_),y=s("./client/my-sites/media-library/list-item-file-details.jsx"),j=o(y),x=s("./client/lib/media/constants.js"),E=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={},o.getImageDimensions=function(){var e,t;return e=o.props.media.width?o.props.media.width:o.state.imageWidth,t=o.props.media.height?o.props.media.height:o.state.imageHeight,{width:e,height:t}},o.getImageStyle=function(){var e=o.getImageDimensions();return{maxHeight:e.height>e.width?"none":"100%",maxWidth:e.height<e.width?"none":"100%"}},o.setUnknownImageDimensions=function(e){o.props.media.width||o.setState({imageWidth:e.target.clientWidth}),o.props.media.height||o.setState({imageHeight:e.target.clientHeight})},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=v.default.url(this.props.media,{photon:this.props.thumbnailType===x.MEDIA_IMAGE_PHOTON,maxWidth:this.props.maxImageWidth,size:this.props.thumbnailType===x.MEDIA_IMAGE_THUMBNAIL&&"medium"});return e?b.default.createElement("img",{src:e,onLoad:this.setUnknownImageDimensions,alt:this.props.media.alt||this.props.media.title,style:this.getImageStyle(),className:"media-library__list-item-centered",draggable:"false"}):b.default.createElement(j.default,{scale:this.props.scale,media:this.props.media,icon:"image"})}}]),t}(b.default.Component);E.displayName="MediaLibraryListItemImage",E.propTypes={media:h.default.object,scale:h.default.number,maxImageWidth:h.default.number,thumbnailType:h.default.string},E.defaultProps={maxImageWidth:450,thumbnailType:x.MEDIA_IMAGE_PHOTON},t.default=E,e.exports=t.default},"./client/my-sites/media-library/list-item-video.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/photon/index.js"),j=o(y),x=s("./client/my-sites/media-library/list-item-file-details.jsx"),E=o(x),C=s("./node_modules/gridicons/build/index.js"),I=o(C),S=s("./client/lib/media/constants.js"),k=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),o.getHighestQualityThumbnail=function(){if(o.props.media.thumbnails)return o.props.media.thumbnails.fmt_hd||o.props.media.thumbnails.fmt_dvd||o.props.media.thumbnails.fmt_std},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.getHighestQualityThumbnail();if(e){var t=this.props.thumbnailType===S.MEDIA_IMAGE_THUMBNAIL?e:(0,j.default)(e,{width:this.props.maxImageWidth});return v.default.createElement("div",{className:"media-library__list-item-video",style:{backgroundImage:"url("+t+")"}},v.default.createElement("span",{className:"media-library__list-item-icon media-library__list-item-centered"},v.default.createElement(I.default,{icon:"video-camera"})))}return v.default.createElement(E.default,(0,i.default)({},this.props,{icon:"video-camera"}))}}]),t}(v.default.Component);k.displayName="MediaLibraryListItemVideo",k.propTypes={media:b.default.object,maxImageWidth:b.default.number,thumbnailType:b.default.string},k.defaultProps={maxImageWidth:450,thumbnailType:S.MEDIA_IMAGE_PHOTON},t.default=k,e.exports=t.default},"./client/my-sites/media-library/list-item.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/keys.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/prop-types/index.js"),y=o(v),j=s("./node_modules/react/react.js"),x=o(j),E=s("./node_modules/classnames/index.js"),C=o(E),I=s("./client/components/spinner/index.jsx"),S=o(I),k=s("./node_modules/gridicons/build/index.js"),M=o(k),R=s("./client/my-sites/media-library/list-item-image.jsx"),w=o(R),P=s("./client/my-sites/media-library/list-item-video.jsx"),D=o(P),N=s("./client/my-sites/media-library/list-item-audio.jsx"),T=o(N),A=s("./client/my-sites/media-library/list-item-document.jsx"),L=o(A),O=s("./client/lib/media/utils.js"),H=o(O),U=s("./client/post-editor/media-modal/gallery-help.jsx"),V=o(U),F=s("./client/lib/media/constants.js"),B=function(e){function t(){var e,s,o,n;(0,c.default)(this,t);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return s=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(a))),o.clickItem=function(e){o.props.onToggle(o.props.media,e.shiftKey)},o.renderItem=function(){var e;if(o.props.media){switch(H.default.getMimePrefix(o.props.media)){case"image":e=w.default;break;case"video":e=D.default;break;case"audio":e=T.default;break;default:e=L.default}return x.default.createElement(e,o.props)}},o.renderSpinner=function(){if(o.props.media&&o.props.media.transient)return x.default.createElement(S.default,{className:"media-library__list-item-spinner"})},n=s,(0,h.default)(o,n)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!(e.media===this.props.media&&e.scale===this.props.scale&&e.maxImageWidth===this.props.maxImageWidth&&e.thumbnailType===this.props.thumbnailType&&e.selectedIndex===this.props.selectedIndex&&(0,_.isEqual)(e.style,this.props.style))}},{key:"render",value:function(){var e,t,s,o;return e=(0,C.default)("media-library__list-item",{"is-placeholder":!this.props.media,"is-selected":-1!==this.props.selectedIndex,"is-transient":this.props.media&&this.props.media.transient,"is-small":this.props.scale<=.125}),t=(0,_.omit)(this.props,(0,r.default)(this.constructor.propTypes)),s=(0,_.assign)({width:100*this.props.scale+"%"},this.props.style),this.props.media&&(o=this.props.media.file),-1!==this.props.selectedIndex&&(t["data-selected-number"]=this.props.selectedIndex+1),x.default.createElement("div",(0,i.default)({className:e,style:s,onClick:this.clickItem},t),x.default.createElement("span",{className:"media-library__list-item-selected-icon"},x.default.createElement(M.default,{icon:"checkmark",size:20})),x.default.createElement("figure",{className:"media-library__list-item-figure",title:o},this.renderItem(),this.renderSpinner(),this.props.showGalleryHelp&&x.default.createElement(V.default,null)))}}]),t}(x.default.Component);B.displayName="MediaLibraryListItem",B.propTypes={media:y.default.object,scale:y.default.number.isRequired,maxImageWidth:y.default.number,thumbnailType:y.default.string,showGalleryHelp:y.default.bool,selectedIndex:y.default.number,onToggle:y.default.func,onEditItem:y.default.func,style:y.default.object},B.defaultProps={maxImageWidth:450,thumbnailType:F.MEDIA_IMAGE_PHOTON,selectedIndex:-1,onToggle:_.noop,onEditItem:_.noop},t.default=B,e.exports=t.default},"./client/my-sites/media-library/list-no-content.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/i18n-calypso/index.js"),v=s("./client/components/empty-content/index.jsx"),y=o(v),j=s("./client/my-sites/media-library/upload-button.jsx"),x=o(j),E=s("./client/lib/site/utils.js"),C=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getLabel",value:function(){var e=this.props,t=e.filter,s=e.source,o=e.translate;if("google_photos"===s)return o("You don't have any photos in your Google library.",{comment:"Media no results"});switch(t){case"this-post":return o("There are no media items uploaded to this post.",{comment:"Media no results"});case"images":return o("You don't have any images.",{comment:"Media no results"});case"videos":return o("You don't have any videos.",{comment:"Media no results"});case"audio":return o("You don't have any audio files.",{comment:"Media no results"});case"documents":return o("You don't have any documents.",{comment:"Media no results"});default:return o("You don't have any media.",{comment:"Media no results"})}}},{key:"render",value:function(){var e="",t="";return(0,E.userCan)("upload_files",this.props.site)&&!this.props.source?(e=this.props.translate("Would you like to upload something?"),t=b.default.createElement(x.default,{className:"button is-primary",site:this.props.site},this.props.translate("Upload Media"))):this.props.source&&(e=this.props.translate("New photos may take a few minutes to appear.")),b.default.createElement(y.default,{title:this.getLabel(),line:e,action:t,illustration:"/calypso/images/media/illustration-media.svg",illustrationWidth:150})}}]),t}(g.Component);C.propTypes={site:h.default.object,filter:h.default.string,source:h.default.string},t.default=(0,_.localize)(C),e.exports=t.default},"./client/my-sites/media-library/list-no-results.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/react/react.js"),_=o(b),v=s("./client/my-sites/no-results/index.jsx"),y=o(v),j=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getLabel=function(){var e;switch(o.props.filter){case"images":e=o.props.translate("No images match your search for {{searchTerm/}}.",{components:{searchTerm:_.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;case"videos":e=o.props.translate("No videos match your search for {{searchTerm/}}.",{components:{searchTerm:_.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;case"audio":e=o.props.translate("No audio files match your search for {{searchTerm/}}.",{components:{searchTerm:_.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;case"documents":e=o.props.translate("No documents match your search for {{searchTerm/}}.",{components:{searchTerm:_.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;default:e=o.props.translate("No media files match your search for {{searchTerm/}}.",{components:{searchTerm:_.default.createElement("em",null,o.props.search)},context:"Media no search results"})}return e},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return _.default.createElement(y.default,{text:this.getLabel(),image:"/calypso/images/pages/illustration-pages.svg"})}}]),t}(_.default.Component);j.displayName="MediaLibraryListNoResults",j.propTypes={filter:h.default.string,search:h.default.string},j.defaultProps={search:""},t.default=(0,g.localize)(j),e.exports=t.default},"./client/my-sites/media-library/list-plan-promo.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/prop-types/index.js"),_=o(b),v=s("./node_modules/page/index.js"),y=o(v),j=s("./client/lib/analytics/index.js"),x=o(j),E=s("./client/lib/formatting/index.js"),C=s("./client/components/empty-content/index.jsx"),I=o(C),S=s("./client/components/button/index.jsx"),k=o(S),M=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getTitle=function(){switch(o.props.filter){case"videos":return o.props.translate("Upload Videos",{textOnly:!0,context:"Media upload plan needed"});case"audio":return o.props.translate("Upload Audio",{textOnly:!0,context:"Media upload plan needed"});default:return o.props.translate("Upload Media",{textOnly:!0,context:"Media upload plan needed"})}},o.getSummary=function(){switch(o.props.filter){case"videos":return(0,E.preventWidows)(o.props.translate("To upload video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);case"audio":return(0,E.preventWidows)(o.props.translate("To upload audio files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);default:return(0,E.preventWidows)(o.props.translate("To upload audio and video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2)}},o.viewPlansPage=function(){var e=o.props.site.slug,t=void 0===e?"":e;x.default.tracks.recordEvent("calypso_media_plans_button_click"),(0,y.default)("/plans/"+t)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=h.default.createElement(k.default,{className:"button is-primary",onClick:this.viewPlansPage},this.props.translate("See Plans"));return h.default.createElement(I.default,{title:this.getTitle(),line:this.getSummary(),action:this.props.children||e,illustration:""})}}]),t}(h.default.Component);M.displayName="MediaLibraryListPlanPromo",M.propTypes={site:_.default.object,filter:_.default.string},t.default=(0,g.localize)(M),e.exports=t.default},"./client/my-sites/media-library/list-plan-upgrade-nudge.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return t("audio"===e?"Upgrade to the Premium Plan and Enable Audio Uploads":"Upgrade to a Premium Plan and Enable VideoPress")}function i(e,t){return t("audio"===e?"By upgrading to the Premium plan you'll enable audio upload support on your site.":"By upgrading to a Premium Plan you'll enable VideoPress support on your site.")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryUpgradeNudge=void 0;var a=s("./node_modules/prop-types/index.js"),r=o(a),l=s("./node_modules/react/react.js"),d=o(l),u=s("./node_modules/lodash/lodash.js"),c=s("./node_modules/i18n-calypso/index.js"),p=s("./client/lib/plans/constants.js"),m=s("./client/my-sites/upgrade-nudge/index.jsx"),f=o(m),h=s("./client/my-sites/media-library/list-plan-promo.js"),g=o(h),b=t.MediaLibraryUpgradeNudge=function(e){var t=e.translate,s=e.filter,o=e.site;return d.default.createElement("div",{className:"media-library__videopress-nudge-container"},d.default.createElement(g.default,{site:o,filter:s},d.default.createElement(f.default,{className:"media-library__videopress-nudge-regular",title:n(s,t),message:i(s,t),feature:"audio"===s?p.FEATURE_AUDIO_UPLOADS:p.FEATURE_VIDEO_UPLOADS,event:"calypso_media_uploads_upgrade_nudge"})))};b.propTypes={site:r.default.object,translate:r.default.func,filter:r.default.string},b.defaultProps={translate:u.identity,filter:"video"},t.default=(0,c.localize)(b)},"./client/my-sites/media-library/list.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryList=void 0;var n=s("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/i18n-calypso/index.js"),y=s("./node_modules/lodash/lodash.js"),j=s("./node_modules/react-dom/index.js"),x=o(j),E=s("./node_modules/react/react.js"),C=o(E),I=s("./client/lib/media/actions.js"),S=o(I),k=s("./client/lib/media/utils.js"),M=o(k),R=s("./client/my-sites/media-library/list-item.jsx"),w=o(R),P=s("./client/my-sites/media-library/list-no-results.jsx"),D=o(P),N=s("./client/my-sites/media-library/list-no-content.jsx"),T=o(N),A=s("./client/lib/user/index.js"),L=o(A),O=s("./client/components/sorted-grid/index.jsx"),H=o(O),U=s("./client/my-sites/media-library/list-plan-upgrade-nudge.jsx"),V=o(U),F=s("./client/state/preferences/selectors.js"),B=(0,L.default)(),q=1e3,W=t.MediaLibraryList=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),o.state={},o.setListContext=function(e){e&&o.setState({listContext:x.default.findDOMNode(e)})},o.getMediaItemHeight=function(){return Math.round(o.props.containerWidth*o.props.mediaScale)+o.props.rowPadding},o.getItemsPerRow=function(){return Math.floor(1/o.props.mediaScale)},o.getMediaItemStyle=function(e){var t,s,n=o.getItemsPerRow(),i=n===1/o.props.mediaScale,a=0===(e+1)%n;return t={paddingBottom:o.props.rowPadding,fontSize:225*o.props.mediaScale},i||a||(s=1%o.props.mediaScale/(n-1)*100+"%",B.isRTL()?t.marginLeft=s:t.marginRight=s),t},o.toggleItem=function(e,t){var s=void 0;s=o.props.single?(0,y.filter)(o.props.mediaLibrarySelectedItems,{ID:e.ID}):(0,y.clone)(o.props.mediaLibrarySelectedItems);var n=(0,y.findIndex)(s,{ID:e.ID}),i=-1===n,a=(0,y.findIndex)(o.props.media,{ID:e.ID}),r=a,l=a;!o.props.single&&t&&(r=Math.min(r,o.state.lastSelectedMediaIndex),l=Math.max(l,o.state.lastSelectedMediaIndex));for(var d=r;d<=l;d++){var u=(0,y.findIndex)(s,{ID:o.props.media[d].ID});i&&-1===u?s.push(o.props.media[d]):i||-1===u||s.splice(u,1)}o.setState({lastSelectedMediaIndex:a}),o.props.site&&S.default.setLibrarySelectedItems(o.props.site.ID,s)},o.getItemRef=function(e){return"item-"+e.ID},o.getGroupLabel=function(e){var t=new Date(e),s=new Date;return t.getYear()===s.getYear()?(0,v.moment)(e).format("MMM DD"):(0,v.moment)(e).format("MMM DD, YYYY")},o.getItemGroup=function(e){return e.date.slice(0,10)},o.renderItem=function(e){var t,s=(0,y.findIndex)(o.props.media,{ID:e.ID}),n=o.props.mediaLibrarySelectedItems,i=(0,y.findIndex)(n,{ID:e.ID}),a=o.getItemRef(e);return t=!o.props.single&&i!==-1&&1===n.length&&"image"===M.default.getMimePrefix(e),C.default.createElement(w.default,{ref:a,key:a,style:o.getMediaItemStyle(s),media:e,scale:o.props.mediaScale,thumbnailType:o.props.thumbnailType,showGalleryHelp:t,selectedIndex:i,onToggle:o.toggleItem,onEditItem:o.props.onEditItem})},o.renderLoadingPlaceholders=function(){var e=o.getItemsPerRow(),t=(o.props.media||[]).length,s=e-t%e;return Array.apply(null,new Array(s)).map(function(e,s){return C.default.createElement(w.default,{key:"placeholder-"+s,style:this.getMediaItemStyle(t+s),scale:this.props.mediaScale})},o)},o.renderTrailingItems=function(){var e=o.props,t=e.media,s=e.source;if("google_photos"===s&&t&&t.length>=q){var n=(0,v.translate)("Use the search button to access more photos. You can search for dates, locations, and things.");return C.default.createElement("p",null,C.default.createElement("em",null,n))}return null},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e;return this.props.filterRequiresUpgrade?C.default.createElement(V.default,{filter:this.props.filter,site:this.props.site}):!this.props.mediaHasNextPage&&this.props.media&&0===this.props.media.length?C.default.createElement(this.props.search?D.default:T.default,{site:this.props.site,filter:this.props.filter,search:this.props.search,source:this.props.source}):(e=function(){this.props.mediaOnFetchNextPage()}.bind(this),C.default.createElement(H.default,{ref:this.setListContext,getItemGroup:this.getItemGroup,getGroupLabel:this.getGroupLabel,context:!!this.props.scrollable&&this.state.listContext,items:this.props.media||[],itemsPerRow:this.getItemsPerRow(),lastPage:!this.props.mediaHasNextPage,fetchingNextPage:this.props.mediaFetchingNextPage,guessedItemHeight:this.getMediaItemHeight(),fetchNextPage:e,getItemRef:this.getItemRef,renderItem:this.renderItem,renderLoadingPlaceholders:this.renderLoadingPlaceholders,renderTrailingItems:this.renderTrailingItems,className:"media-library__list"}))}}]),t}(C.default.Component);W.displayName="MediaLibraryList",W.propTypes={site:b.default.object,media:b.default.arrayOf(b.default.object),mediaLibrarySelectedItems:b.default.arrayOf(b.default.object),filter:b.default.string,filterRequiresUpgrade:b.default.bool.isRequired,search:b.default.string,containerWidth:b.default.number,rowPadding:b.default.number,mediaScale:b.default.number.isRequired,thumbnailType:b.default.string,mediaHasNextPage:b.default.bool,mediaFetchingNextPage:b.default.bool,mediaOnFetchNextPage:b.default.func,single:b.default.bool,scrollable:b.default.bool,onEditItem:b.default.func},W.defaultProps={mediaLibrarySelectedItems:(0,i.default)([]),containerWidth:0,rowPadding:10,mediaHasNextPage:!1,mediaFetchingNextPage:!1,mediaOnFetchNextPage:y.noop,single:!1,scrollable:!1,onEditItem:y.noop},t.default=(0,_.connect)(function(e){return{mediaScale:(0,F.getPreference)(e,"mediaScale")}},null,null,{pure:!1})(W)},"./client/my-sites/media-library/scale.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/i18n-calypso/index.js"),j=s("./node_modules/gridicons/build/index.js"),x=o(j),E=s("./client/components/forms/range/index.jsx"),C=o(E),I=s("./client/components/segmented-control/index.jsx"),S=o(I),k=s("./client/components/segmented-control/item.jsx"),M=o(k),R=s("./client/state/preferences/actions.js"),w=s("./client/state/preferences/selectors.js"),P=[.077,.115,.157,.24,.323],D=100,N=.32,T=function(e){
function t(){(0,r.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.onScaleChange=e.onScaleChange.bind(e),e.savePreference=e.savePreference.bind(e),e.debouncedSavePreference=(0,v.debounce)(e.savePreference,1e3),e.setScaleToMobileGrid=e.setScale.bind(e,N),e.setScaleToMobileFull=e.setScale.bind(e,1),e.state={},e}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillUnmount",value:function(){this.debouncedSavePreference.cancel()}},{key:"savePreference",value:function(e){this.props.saveMediaScalePreference(e)}},{key:"setScale",value:function(e){e!==this.props.scale&&(this.props.onChange(e),this.props.setMediaScalePreference(e),this.debouncedSavePreference(e))}},{key:"onScaleChange",value:function(e){var t=parseInt(e.target.value,10),s=t*P.length/D,o=P[Math.floor(s)];this.setState({sliderPosition:t}),this.setScale(o)}},{key:"getSliderPosition",value:function(){if(this.state.hasOwnProperty("sliderPosition"))return this.state.sliderPosition;var e=this.props.scale,t=P.indexOf(e);return-1===t?0:Math.floor(t*(D-1)/(P.length-1))}},{key:"render",value:function(){var e=this.props,t=e.translate,s=e.scale;return b.default.createElement("div",{className:"media-library__scale"},b.default.createElement(S.default,{className:"media-library__scale-toggle",compact:!0},b.default.createElement(M.default,{selected:1!==s,onClick:this.setScaleToMobileGrid},b.default.createElement("span",{className:"media-library__scale-toggle-label"},t("Grid")),b.default.createElement(x.default,{icon:"grid",size:18})),b.default.createElement(M.default,{selected:1===s,onClick:this.setScaleToMobileFull},b.default.createElement("span",{className:"media-library__scale-toggle-label"},t("List")),b.default.createElement(x.default,{icon:"menu",size:18}))),b.default.createElement(C.default,{step:"1",min:"0",max:D-1,minContent:b.default.createElement(x.default,{icon:"image",size:12}),maxContent:b.default.createElement(x.default,{icon:"image",size:24}),value:this.getSliderPosition(),onChange:this.onScaleChange,className:"media-library__scale-range"}))}}]),t}(g.Component);T.propTypes={mediaScale:h.default.number,onChange:h.default.func,setMediaScalePreference:h.default.func,saveMediaScalePreference:h.default.func},T.defaultProps={onChange:function(){}},t.default=(0,_.connect)(function(e){return{scale:(0,w.getPreference)(e,"mediaScale")}},{setMediaScalePreference:(0,v.partial)(R.setPreference,"mediaScale"),saveMediaScalePreference:(0,v.partial)(R.savePreference,"mediaScale")})((0,y.localize)(T)),e.exports=t.default},"./client/my-sites/media-library/upload-url.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./node_modules/gridicons/build/index.js"),x=o(j),E=s("./node_modules/i18n-calypso/index.js"),C=s("./client/lib/analytics/index.js"),I=o(C),S=s("./client/components/forms/form-text-input/index.jsx"),k=o(S),M=s("./client/lib/media/actions.js"),R=o(M),w=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={value:"",isError:!1},o.upload=function(e){e.preventDefault();var t=!e.target.checkValidity();o.setState({isError:t}),!t&&o.props.site&&(R.default.clearValidationErrors(o.props.site.ID),R.default.add(o.props.site.ID,o.state.value),o.setState({value:"",isError:!1}),o.props.onAddMedia(),o.props.onClose(),I.default.mc.bumpStat("editor_upload_via","url"))},o.onChange=function(e){o.setState({isError:!1,value:e.target.value})},o.onKeyDown=function(e){return"Escape"===e.key?o.props.onClose(e):void("Enter"===e.key&&o.upload(e))},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,y.default)("media-library__upload-url",this.props.className),t=this.props,s=t.onClose,o=t.translate;return b.default.createElement("form",{className:e,onSubmit:this.upload,noValidate:!0},b.default.createElement(k.default,{type:"url",value:this.state.value,placeholder:"https://",onChange:this.onChange,onKeyDown:this.onKeyDown,isError:this.state.isError,autoFocus:!0,required:!0}),b.default.createElement("div",{className:"media-library__upload-url-button-group"},b.default.createElement("button",{type:"submit",className:"button is-primary"},o("Upload",{context:"verb"})),b.default.createElement("button",{type:"button",className:"media-library__upload-url-cancel",onClick:s},b.default.createElement("span",{className:"screen-reader-text"},o("Cancel")),b.default.createElement(x.default,{icon:"cross"}))))}}]),t}(g.Component);w.propTypes={className:h.default.string,site:h.default.object,onAddMedia:h.default.func,onClose:h.default.func},w.defaultProps={onAddMedia:_.noop,onClose:_.noop},t.default=(0,E.localize)(w),e.exports=t.default},"./client/my-sites/media/controller.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/react/react.js"),i=o(n),a=s("./node_modules/i18n-calypso/index.js"),r=o(a),l=s("./client/lib/route/index.js"),d=o(l),u=s("./client/lib/analytics/index.js"),c=o(u),p=s("./client/state/document-head/actions.js"),m=s("./client/lib/react-helpers/index.js"),f=s("./client/state/ui/selectors.js");t.default={media:function(e){var t=s("./client/my-sites/media/main.jsx"),o=e.params.filter,n=e.query.s,a=d.default.sectionify(e.path),l=e.store.getState(),u=(0,f.getSelectedSite)(l);u&&(a+="/:site"),c.default.pageView.record(a,"Media"),e.store.dispatch((0,p.setDocumentHeadTitle)(r.default.translate("Media",{textOnly:!0}))),(0,m.renderWithReduxStore)(i.default.createElement(t,{selectedSite:u,filter:o,search:n}),document.getElementById("primary"),e.store)}},e.exports=t.default},"./client/my-sites/media/index.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){u.default.isEnabled("manage/media")&&((0,i.default)("/media",a.siteSelection,a.sites),(0,i.default)("/media/:filter?/:domain",a.siteSelection,a.navigation,l.default.media))};var n=s("./node_modules/page/index.js"),i=o(n),a=s("./client/my-sites/controller.js"),r=s("./client/my-sites/media/controller.js"),l=o(r),d=s("./client/config/index.js"),u=o(d);e.exports=t.default},"./client/my-sites/media/main.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/createClass.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),g=s("./node_modules/prop-types/index.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/page/index.js"),j=o(y),x=s("./node_modules/i18n-calypso/index.js"),E=s("./client/my-sites/media-library/index.jsx"),C=o(E),I=s("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),S=o(I),k=s("./client/components/dialog/index.jsx"),M=o(k),R=s("./client/post-editor/media-modal/detail/index.jsx"),w=s("./client/blocks/image-editor/index.jsx"),P=o(w),D=s("./client/blocks/video-editor/index.jsx"),N=o(D),T=s("./client/lib/media/actions.js"),A=o(T),L=s("./client/lib/media/utils.js"),O=o(L),H=s("./client/components/data/media-library-selected-data/index.jsx"),U=o(H),V=s("./client/lib/media/library-selected-store.js"),F=o(V),B=s("./client/lib/accept/index.js"),q=o(B),W=s("./client/lib/search-url/index.js"),z=o(W),G=function(e){function t(){var e,s,o,n;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return s=o=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),o.state={currentDetail:null,editedImageItem:null,editedVideoItem:null,selectedItems:[],source:""},o.onFilterChange=function(e){var t="/media";e&&(t+="/"+e),o.props.selectedSite&&(t+="/"+o.props.selectedSite.slug),o.props.selectedSite&&A.default.setLibrarySelectedItems(o.props.selectedSite.ID,[]),(0,j.default)(t)},o.openDetailsModalForASingleImage=function(e){o.setState({currentDetail:0,selectedItems:[e]})},o.openDetailsModalForAllSelected=function(){var e=o.props.selectedSite,t=F.default.getAll(e.ID);o.setState({currentDetail:0,selectedItems:t})},o.closeDetailsModal=function(){o.setState({editedImageItem:null,editedVideoItem:null,currentDetail:null,selectedItems:[]})},o.editImage=function(){o.setState({currentDetail:null,editedImageItem:o.state.currentDetail})},o.editVideo=function(){o.setState({currentDetail:null,editedVideoItem:o.state.currentDetail})},o.onImageEditorCancel=function(e){var t=e.resetAllImageEditorState;o.setState({currentDetail:o.state.editedImageItem,editedImageItem:null}),t()},o.onImageEditorDone=function(e,t,s){if(e)return void o.onEditImageCancel(s);var n=s.fileName,i=s.site,a=s.ID,r=s.resetAllImageEditorState,l=O.default.getMimeType(n),d={ID:a,media:{fileName:n,fileContents:t,mimeType:l}};A.default.update(i.ID,d,!0),r(),o.setState({currentDetail:null,editedImageItem:null,selectedItems:[]})},o.onVideoEditorCancel=function(){o.setState({currentDetail:o.state.editedVideoItem,editedVideoItem:null})},o.onVideoEditorUpdatePoster=function(e){var t=e.ID,s=e.posterUrl,n=o.props.selectedSite,i=(s||"").split("?")[0];n&&A.default.edit(n.ID,{ID:t,thumbnails:{fmt_hd:i,fmt_dvd:i,fmt_std:i}}),o.setState({currentDetail:null,editedVideoItem:null,selectedItems:[]})},o.restoreOriginalMedia=function(e,t){e&&t&&(A.default.update(e,{ID:t.ID,media_url:t.guid},!0),o.setState({currentDetail:null,editedImageItem:null,selectedItems:[]}))},o.setDetailSelectedIndex=function(e){o.setState({currentDetail:e})},o.handleDeleteMediaEvent=function(){o.deleteMedia()},o.handleSourceChange=function(e,t){o.props.search&&(0,z.default)("",o.props.search),A.default.sourceChanged(o.props.selectedSite.ID),o.setState({source:e},t)},o.deleteMediaByItemDetail=function(){o.deleteMedia(function(){return o.closeDetailsModal()})},o.confirmDeleteMedia=function(){var e=o.props.selectedSite;if(e){var t=o.state.selectedItems&&o.state.selectedItems.length?o.state.selectedItems:F.default.getAll(e.ID);A.default.delete(e.ID,t)}},n=s,(0,m.default)(o,n)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setState({containerWidth:this.refs.container.clientWidth})}},{key:"getModalButtons",value:function(){if(null!==this.state.editedImageItem||null!==this.state.editedVideoItem)return null;var e=this.props.translate;return[{action:"delete",additionalClassNames:"media__modal-delete-item-button is-link",label:e("Delete"),isPrimary:!1,disabled:!1,onClick:this.deleteMediaByItemDetail},{action:"confirm",label:e("Done"),isPrimary:!0,disabled:!1,onClose:this.closeDetailsModal}]}},{key:"deleteMedia",value:function(e){var t=this,s=this.props,o=s.selectedSite,n=s.translate,i=F.default.getAll(o.ID),a=i.length,r=n("Are you sure you want to delete this item? Deleted media will no longer appear anywhere on your website, including all posts, pages, and widgets. This cannot be undone.","Are you sure you want to delete these items? Deleted media will no longer appear anywhere on your website, including all posts, pages, and widgets. This cannot be undone.",{count:a});(0,q.default)(r,function(s){s&&(t.confirmDeleteMedia(),e&&e())},n("Delete"),null,{isScary:!0})}},{key:"render",value:function(){var e=this.props.selectedSite;return v.default.createElement("div",{ref:"container",className:"main main-column media",role:"main"},v.default.createElement(S.default,null),(null!==this.state.editedImageItem||null!==this.state.editedVideoItem||null!==this.state.currentDetail)&&v.default.createElement(M.default,{isVisible:!0,additionalClassNames:"editor-media-modal media__item-dialog",buttons:this.getModalButtons(),onClose:this.closeDetailsModal},null!==this.state.currentDetail&&v.default.createElement(R.EditorMediaModalDetail,{site:e,items:this.state.selectedItems,selectedIndex:this.state.currentDetail,onReturnToList:this.closeDetailsModal,onEditImageItem:this.editImage,onEditVideoItem:this.editVideo,onRestoreItem:this.restoreOriginalMedia,onSelectedIndexChange:this.setDetailSelectedIndex}),null!==this.state.editedImageItem&&v.default.createElement(P.default,{siteId:e&&e.ID,media:this.state.selectedItems[this.state.editedImageItem],onDone:this.onImageEditorDone,onCancel:this.onImageEditorCancel}),null!==this.state.editedVideoItem&&v.default.createElement(N.default,{media:this.state.selectedItems[this.state.editedVideoItem],onCancel:this.onVideoEditorCancel,onUpdatePoster:this.onVideoEditorUpdatePoster})),e&&e.ID&&v.default.createElement(U.default,{siteId:e.ID},v.default.createElement(C.default,(0,i.default)({},this.props,{className:"media__main-section",onFilterChange:this.onFilterChange,site:e,single:!1,filter:this.props.filter,source:this.state.source,onEditItem:this.openDetailsModalForASingleImage,onViewDetails:this.openDetailsModalForAllSelected,onDeleteItem:this.handleDeleteMediaEvent,onSourceChange:this.handleSourceChange,modal:!1,containerWidth:this.state.containerWidth}))))}}]),t}(_.Component);G.propTypes={selectedSite:b.default.object,filter:b.default.string,search:b.default.string,source:b.default.string},t.default=(0,x.localize)(G),e.exports=t.default},"./client/my-sites/no-results/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"no-results"},this.props.image?h.default.createElement("img",{className:"no-results__img",src:this.props.image}):null,h.default.createElement("span",null,this.props.text))}}]),t}(h.default.Component);g.defaultProps={text:"No results",image:!1},t.default=g,e.exports=t.default},"./client/my-sites/sharing/connections/inline-connection-action.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNamedConnectedService=void 0;var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/react-redux/es/index.js"),b=s("./node_modules/prop-types/index.js"),_=o(b),v=s("./client/my-sites/sharing/connections/service-action.jsx"),y=o(v),j=s("./client/state/sharing/keyring/actions.js"),x=s("./client/state/sharing/keyring/selectors.js"),E=s("./client/state/analytics/actions.js"),C=s("./client/lib/sharing/index.js"),I=o(C),S=t.getNamedConnectedService=function(e,t){return(0,x.getKeyringConnections)(e).filter(function(e){return e.service===t})},k="unknown",M="not-connected",R="reconnect",w="connected",P=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.handleAction=s.onAction.bind(s),s.state={isConnecting:!1,isRefreshing:!1},s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"getConnectionStatus",value:function(e,t){return t?k:e?"broken"===e.status?R:w:M}},{key:"onAction",value:function(){var e=this.props.service,t=this.getConnectionStatus(this.props.connectedService,this.state.isFetching);R===t?this.refresh(e):this.addConnection(e)}},{key:"refresh",value:function(e){this.setState({isRefreshing:!0}),this.requestAccess(e.refresh_URL),this.trackEvent(e.ID,"Clicked Connect Button")}},{key:"addConnection",value:function(e){this.setState({isConnecting:!0}),this.requestAccess(e.connect_URL),this.trackEvent(e.ID,"Clicked Reconnect Button")}},{key:"requestAccess",value:function(e){var t=this;(0,I.default)(e,function(){t.props.requestKeyringConnections()})}},{key:"trackEvent",value:function(e,t){this.props.recordGoogleEvent("Sharing",t,e)}},{key:"componentWillReceiveProps",value:function(e){e.isFetching===!0&&this.setState({isConnecting:!1,isRefreshing:!1})}},{key:"render",value:function(){var e=this.getConnectionStatus(this.props.connectedService,this.props.isFetching),t=this.state,s=t.isConnecting,o=t.isRefreshing,n=this.props.service;return h.default.createElement(y.default,{status:e,service:n,onAction:this.handleAction,isConnecting:s,isRefreshing:o,isDisconnecting:!1})}}]),t}(f.Component);P.propTypes={service:_.default.object.isRequired,isFetching:_.default.bool.isRequired,connectedService:_.default.object},t.default=(0,g.connect)(function(e,t){var s=S(e,t.serviceName);return{isFetching:(0,x.isKeyringConnectionsFetching)(e),connectedService:s.length>0?s[0]:null}},{requestKeyringConnections:j.requestKeyringConnections,recordGoogleEvent:E.recordGoogleEvent})(P)},"./client/my-sites/sharing/connections/inline-connection.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/react/react.js"),h=o(f),g=s("./node_modules/react-redux/es/index.js"),b=s("./node_modules/prop-types/index.js"),_=o(b),v=s("./client/state/sharing/services/selectors.js"),y=s("./client/components/data/query-keyring-services/index.jsx"),j=o(y),x=s("./client/components/data/query-publicize-connections/index.jsx"),E=o(x),C=s("./client/my-sites/sharing/connections/inline-connection-action.jsx"),I=o(C),S=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.service;return h.default.createElement("div",null,h.default.createElement(E.default,{selectedSite:!0}),h.default.createElement(j.default,null),e&&h.default.createElement(I.default,{service:e}))}}]),t}(f.Component);S.propTypes={serviceName:_.default.string.isRequired},t.default=(0,g.connect)(function(e,t){return{service:(0,v.getKeyringServiceByName)(e,t.serviceName)}})(S),e.exports=t.default},"./client/my-sites/sharing/connections/service-action.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/prop-types/index.js"),i=o(n),a=s("./node_modules/react/react.js"),r=o(a),l=s("./node_modules/react-redux/es/index.js"),d=s("./node_modules/lodash/lodash.js"),u=s("./node_modules/i18n-calypso/index.js"),c=s("./client/components/button/index.jsx"),p=o(c),m=s("./client/state/sharing/publicize/selectors.js"),f=function(e){var t=e.isConnecting,s=e.isDisconnecting,o=e.isRefreshing,n=e.onAction,i=e.removableConnections,a=e.status,l=e.translate,d=!1,u=!1,c=void 0,m="unknown"===a||s||o||t,f=function(e){e.stopPropagation(),n()};return"unknown"===a?c=l("Loading…",{context:"Sharing: Publicize status pending button label"}):s?c=l("Disconnecting…",{context:"Sharing: Publicize disconnect pending button label"}):o?(c=l("Reconnecting…",{context:"Sharing: Publicize reconnect pending button label"}),u=!0):t?c=l("Connecting…",{context:"Sharing: Publicize connect pending button label"}):"connected"===a?c=i.length>1?l("Disconnect All",{context:"Sharing: Publicize disconnect button label"}):l("Disconnect",{context:"Sharing: Publicize disconnect button label"}):"reconnect"===a?(c=l("Reconnect",{context:"Sharing: Publicize reconnect pending button label"}),u=!0):(c=l("Connect",{context:"Sharing: Publicize connect pending button label"}),d=!0),r.default.createElement(p.default,{primary:d,scary:u,compact:!0,onClick:f,disabled:m},c)};f.propTypes={isConnecting:i.default.bool,isDisconnecting:i.default.bool,isRefreshing:i.default.bool,onAction:i.default.func,removableConnections:i.default.arrayOf(i.default.object),service:i.default.object.isRequired,status:i.default.string,translate:i.default.func},f.defaultProps={isConnecting:!1,isDisconnecting:!1,isRefreshing:!1,onAction:function(){},removableConnections:[],status:"unknown",translate:d.identity},t.default=(0,l.connect)(function(e,t){var s=t.service;return{removableConnections:(0,m.getRemovableConnections)(e,s.ID)}})((0,u.localize)(f)),e.exports=t.default},"./client/my-sites/sidebar-navigation/sidebar-navigation.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/react/react.js"),i=o(n),a=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/i18n-calypso/index.js"),l=s("./client/components/sidebar-navigation/index.jsx"),d=o(l),u=s("./client/blocks/site-icon/index.jsx"),c=o(u),p=s("./client/state/ui/selectors.js"),m=function(e){var t=e.site,s=e.translate,o=s("All Sites"),n="all-sites";return t&&(o=t.title,n=null),i.default.createElement(d.default,{linkClassName:n,sectionName:"site",sectionTitle:o},t&&i.default.createElement(c.default,{site:t}))};t.default=(0,a.connect)(function(e){return{site:(0,p.getSelectedSite)(e)}})((0,r.localize)(m)),e.exports=t.default},"./client/my-sites/upgrade-nudge/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/typeof.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/react/react.js"),v=o(_),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),E=s("./node_modules/classnames/index.js"),C=o(E),I=s("./node_modules/lodash/lodash.js"),S=s("./node_modules/i18n-calypso/index.js"),k=s("./node_modules/gridicons/build/index.js"),M=o(k),R=s("./client/components/button/index.jsx"),w=o(R),P=s("./client/components/card/index.jsx"),D=o(P),N=s("./client/state/sites/plans/selectors.js"),T=s("./client/lib/plans/index.js"),A=s("./client/lib/products-values/index.js"),L=s("./client/lib/analytics/track-component-view/index.jsx"),O=o(L),H=s("./client/state/analytics/actions.js"),U=s("./client/state/ui/selectors.js"),V=function(e){function t(){var e,s,o,n;(0,c.default)(this,t);for(var i=arguments.length,a=Array(i),r=0;r<i;r++)a[r]=arguments[r];return s=o=(0,h.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(a))),o.handleClick=function(){var e=o.props,t=e.event,s=e.feature,n=e.onClick,i=e.recordTracksEvent;(t||s)&&i("calypso_upgrade_nudge_cta_click",{cta_name:t,cta_feature:s,cta_size:"regular"}),n()},n=s,(0,h.default)(o,n)}return(0,b.default)(t,e),(0,m.default)(t,[{key:"shouldDisplay",value:function e(){var t=this.props,s=t.feature,o=t.jetpack,n=t.planHasFeature,e=t.shouldDisplay,i=t.site;return e?e():!(!i||"object"!==("undefined"==typeof i?"undefined":(0,r.default)(i))||"boolean"!=typeof i.jetpack)&&((!s||!n)&&(!(!s&&!(0,A.isFreePlan)(i.plan))&&(("no-adverts"!==s||!i.options.wordads)&&!(!o&&i.jetpack||o&&!i.jetpack))))}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.compact,o=e.event,n=e.feature,i=e.icon,a=e.message,r=e.site,l=e.title,d=e.translate,u=(0,C.default)(t,"upgrade-nudge"),c=this.props.href;return this.shouldDisplay()?(!c&&r&&(c=n?"/plans/"+r.slug+"?feature="+n:"/plans/"+r.slug),s?v.default.createElement(w.default,{className:u,onClick:this.handleClick,href:c},v.default.createElement(M.default,{className:"upgrade-nudge__icon",icon:i}),v.default.createElement("div",{className:"upgrade-nudge__info"},v.default.createElement("span",{className:"upgrade-nudge__title"},l||d("Upgrade to Premium")),v.default.createElement("span",{className:"upgrade-nudge__message"},a))):v.default.createElement(D.default,{compact:!0,className:u,onClick:this.handleClick,href:c},v.default.createElement(M.default,{className:"upgrade-nudge__icon",icon:i,size:18}),v.default.createElement("div",{className:"upgrade-nudge__info"},v.default.createElement("span",{className:"upgrade-nudge__title"},l||d("Upgrade to Premium")),v.default.createElement("span",{className:"upgrade-nudge__message"},a)),(o||n)&&v.default.createElement(O.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:o,cta_feature:n,cta_size:"regular"}}))):null}}]),t}(v.default.Component);V.propTypes={onClick:j.default.func,className:j.default.string,message:j.default.string,icon:j.default.string,event:j.default.string,href:j.default.string,jetpack:j.default.bool,compact:j.default.bool,feature:j.default.oneOf([!1].concat((0,i.default)((0,T.getValidFeatureKeys)()))),shouldDisplay:j.default.func,site:j.default.object,translate:j.default.func},V.defaultProps={onClick:I.noop,message:"And get your own domain address.",icon:"star",event:null,jetpack:!1,feature:!1,compact:!1,shouldDisplay:null,site:null,translate:I.identity},t.default=(0,x.connect)(function(e,t){var s=(0,U.getSelectedSiteId)(e);return{site:(0,U.getSelectedSite)(e),planHasFeature:(0,N.hasFeature)(e,s,t.feature)}},{recordTracksEvent:H.recordTracksEvent})((0,S.localize)(V)),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-fields.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(n),a=s("./node_modules/babel-runtime/core-js/object/assign.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/react-dom/index.js"),v=o(_),y=s("./node_modules/prop-types/index.js"),j=o(y),x=s("./node_modules/react/react.js"),E=o(x),C=s("./node_modules/lodash/lodash.js"),I=s("./node_modules/i18n-calypso/index.js"),S=s("./client/lib/analytics/index.js"),k=o(S),M=s("./client/lib/media/utils.js"),R=o(M),w=s("./client/lib/media/actions.js"),P=o(w),D=s("./client/components/clipboard-button-input/index.jsx"),N=o(D),T=s("./client/components/forms/form-textarea/index.jsx"),A=o(T),L=s("./client/components/forms/form-text-input/index.jsx"),O=o(L),H=s("./client/components/track-input-changes/index.jsx"),U=o(H),V=s("./client/post-editor/media-modal/fieldset.jsx"),F=o(V),B=function(e){function t(){(0,c.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments));return e.bumpTitleStat=function(){k.default.ga.recordEvent("Media","Changed Item Title"),k.default.mc.bumpStat("calypso_media_edit_details","title")},e.bumpAltStat=function(){k.default.ga.recordEvent("Media","Changed Image Alt"),k.default.mc.bumpStat("calypso_media_edit_details","alt")},e.bumpCaptionStat=function(){k.default.ga.recordEvent("Media","Changed Item Caption"),k.default.mc.bumpStat("calypso_media_edit_details","caption")},e.bumpDescriptionStat=function(){k.default.ga.recordEvent("Media","Changed Item Description"),k.default.mc.bumpStat("calypso_media_edit_details","description")},e.setFieldValue=function(t){var s=t.target,o=(0,r.default)({ID:e.props.item.ID},(0,C.get)(e.state,"modifiedItem",{}),(0,i.default)({},s.name,s.value));e.setState({modifiedItem:o}),e.persistChange()},e.scrollToShowVisibleDropdown=function(e){e.open&&"scrollIntoView"in window.Element.prototype&&v.default.findDOMNode(e.target).scrollIntoView()},e.persistChange=(0,C.debounce)(e.persistChange,1e3),e}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.item&&e.item&&e.item.ID!==this.props.item.ID&&(this.setState({modifiedItem:null}),this.persistChange.cancel())}},{key:"isMimePrefix",value:function(e){return R.default.getMimePrefix(this.props.item)===e}},{key:"persistChange",value:function(){this.props.site&&this.state.modifiedItem&&P.default.update(this.props.site.ID,this.state.modifiedItem)}},{key:"getItemValue",value:function(e){var t=(0,C.get)(this.state,["modifiedItem",e],null);return null!==t?t:this.props.item?this.props.item[e]:void 0}},{key:"renderImageAltText",value:function(){return this.isMimePrefix("image")?E.default.createElement(F.default,{legend:this.props.translate("Alt text")},E.default.createElement(U.default,{onNewValue:this.bumpAltStat},E.default.createElement(O.default,{name:"alt",value:this.getItemValue("alt"),onChange:this.setFieldValue}))):null}},{key:"render",value:function(){var e=this.props.translate;return E.default.createElement("div",{className:"editor-media-modal-detail__fields"},E.default.createElement(F.default,{legend:e("Title")},E.default.createElement(U.default,{onNewValue:this.bumpTitleStat},E.default.createElement(O.default,{name:"title",value:this.getItemValue("title"),onChange:this.setFieldValue}))),E.default.createElement(F.default,{legend:e("Caption")},E.default.createElement(U.default,{onNewValue:this.bumpCaptionStat},E.default.createElement(A.default,{name:"caption",value:this.getItemValue("caption"),onChange:this.setFieldValue}))),this.renderImageAltText(),E.default.createElement(F.default,{legend:e("Description")},E.default.createElement(U.default,{onNewValue:this.bumpDescriptionStat},E.default.createElement(A.default,{name:"description",value:this.getItemValue("description"),onChange:this.setFieldValue}))),E.default.createElement(F.default,{legend:e("URL")},E.default.createElement(N.default,{value:R.default.url(this.props.item)})))}}]),t}(x.Component);B.propTypes={site:j.default.object,item:j.default.object},t.default=(0,I.localize)(B),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-file-info.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/react/react.js"),_=o(b),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./client/lib/media/utils.js"),x=o(j),E=function(e){
function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getItemValue=function(e){var t=void 0;if(!o.props.item)return o.props.translate("Loading…");switch(e){case"extension":t=(o.props.item[e]||"").toUpperCase();break;case"dimensions":t=[_.default.createElement("abbr",{key:"width",title:o.props.translate("Width in pixels")},o.props.item.width)," ✕ ",_.default.createElement("abbr",{key:"height",title:o.props.translate("Height in pixels")},o.props.item.height)];break;case"date":t=o.props.moment(o.props.item[e]).format("D MMMM YYYY");break;case"length":t=x.default.playtime(o.props.item[e]);break;default:t=o.props.item[e]}return t},o.renderDimensions=function(){if(o.props.item&&(o.props.item.width||o.props.item.height))return _.default.createElement("tr",null,_.default.createElement("th",null,o.props.translate("Dimensions")),_.default.createElement("td",null,o.getItemValue("dimensions")))},o.renderDuration=function(){if(o.props.item&&o.props.item.length)return _.default.createElement("tr",null,_.default.createElement("th",null,o.props.translate("Duration")),_.default.createElement("td",null,o.getItemValue("length")))},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,y.default)("editor-media-modal-detail__file-info",{"is-loading":!this.props.item});return _.default.createElement("table",{className:e},_.default.createElement("tbody",null,_.default.createElement("tr",null,_.default.createElement("th",null,this.props.translate("File Name")),_.default.createElement("td",{title:this.getItemValue("file")},_.default.createElement("span",null,this.getItemValue("file")))),_.default.createElement("tr",null,_.default.createElement("th",null,this.props.translate("File Type")),_.default.createElement("td",null,this.getItemValue("extension"))),this.renderDimensions(),this.renderDuration(),_.default.createElement("tr",null,_.default.createElement("th",null,this.props.translate("Upload Date")),_.default.createElement("td",null,this.getItemValue("date")))))}}]),t}(_.default.Component);E.displayName="EditorMediaModalDetailFileInfo",E.propTypes={item:h.default.object},t.default=(0,g.localize)(E),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-item.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/react-redux/es/index.js"),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./node_modules/lodash/lodash.js"),x=s("./node_modules/i18n-calypso/index.js"),E=s("./node_modules/url/url.js"),C=o(E),I=s("./node_modules/gridicons/build/index.js"),S=o(I),k=s("./client/post-editor/media-modal/detail/detail-fields.jsx"),M=o(k),R=s("./client/post-editor/media-modal/detail/detail-file-info.jsx"),w=o(R),P=s("./client/post-editor/media-modal/detail/detail-preview-image.jsx"),D=o(P),N=s("./client/post-editor/media-modal/detail/detail-preview-video.jsx"),T=o(N),A=s("./client/post-editor/media-modal/detail/detail-preview-audio.jsx"),L=o(A),O=s("./client/post-editor/media-modal/detail/detail-preview-document.jsx"),H=o(O),U=s("./client/components/button/index.jsx"),V=o(U),F=s("./client/components/data/query-jetpack-modules/index.jsx"),B=o(F),q=s("./client/lib/site/utils.js"),W=s("./client/lib/version-compare/index.js"),z=o(W),G=s("./client/lib/media/utils.js"),K=o(G),Z=s("./client/config/index.js"),Y=o(Z),Q=s("./client/state/ui/selectors.js"),J=s("./client/state/sites/selectors.js"),X=s("./client/state/selectors/is-private-site.js"),$=o(X),ee=function(e,t){return!!e&&(!!Y.default.isEnabled("post-editor/image-editor")&&(!(0,j.get)(t,"is_private")&&(!(0,j.get)(t,"jetpack",!1)||!(0,z.default)((0,j.get)(t,"options.jetpack_version","0.0"),"4.7-alpha","<"))))},te=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleOnRestoreClick=function(){var e=o.props,t=e.site,s=e.item,n=e.onRestore;n(t&&t.ID,s)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"enableVideoEditing",value:function(e){var t=this.props,s=t.isJetpack,o=t.isVideoPressEnabled,n=t.isVideoPressModuleActive;if(!K.default.isVideoPressItem(e))return!1;if(s){if(!n)return!1}else if(!o)return!1;return!0}},{key:"renderEditButton",value:function(){var e=this.props,t=e.item,s=e.onEdit,o=e.site,n=e.translate;if(!(0,q.userCan)("upload_files",o))return null;if(this.props.isPrivateSite)return null;var i=K.default.getMimePrefix(t);if(!(0,j.includes)(["image","video"],i))return null;var a=n("video"===i?"Edit Thumbnail":"Edit Image");return b.default.createElement(V.default,{className:"editor-media-modal-detail__edit",onClick:s,disabled:(0,G.isItemBeingUploaded)(t)},b.default.createElement(S.default,{icon:"pencil",size:36})," ",a)}},{key:"renderRestoreButton",value:function(){var e=this.props,t=e.item,s=e.translate,o=C.default.parse(t.guid),n=C.default.parse(t.URL);return o.pathname!==n.pathname&&b.default.createElement(V.default,{className:(0,y.default)("editor-media-modal-detail__restore"),onClick:this.handleOnRestoreClick,disabled:(0,G.isItemBeingUploaded)(t)},b.default.createElement(S.default,{icon:"refresh",size:36}),s("Restore Original"))}},{key:"renderMediaEditorButtons",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-desktop";if(!e)return null;var s=K.default.getMimePrefix(e);return"video"===s?this.renderVideoEditorButtons(e,t):this.renderImageEditorButtons(t)}},{key:"renderImageEditorButtons",value:function(e){var t=this.props.site;if(!ee(t))return null;var s=(0,y.default)("editor-media-modal-detail__edition-bar",e);return b.default.createElement("div",{className:s},this.renderRestoreButton(e),this.renderEditButton())}},{key:"renderVideoEditorButtons",value:function(e,t){if(!this.enableVideoEditing(e))return null;var s=(0,y.default)("editor-media-modal-detail__edition-bar",t);return b.default.createElement("div",{className:s},this.renderEditButton())}},{key:"renderFields",value:function(){var e=this.props,t=e.site,s=e.item;return(0,q.userCan)("upload_files",t)?b.default.createElement(M.default,{site:t,item:s}):null}},{key:"renderPreviousItemButton",value:function(){var e=this.props,t=e.hasPreviousItem,s=e.onShowPreviousItem,o=e.translate;return t?b.default.createElement("button",{onClick:s,className:"editor-media-modal-detail__previous"},b.default.createElement(S.default,{icon:"chevron-left",size:36}),b.default.createElement("span",{className:"screen-reader-text"},o("Previous"))):null}},{key:"renderNextItemButton",value:function(){var e=this.props,t=e.hasNextItem,s=e.onShowNextItem,o=e.translate;return t?b.default.createElement("button",{onClick:s,className:"editor-media-modal-detail__next"},b.default.createElement(S.default,{icon:"chevron-right",size:36}),b.default.createElement("span",{className:"screen-reader-text"},o("Next"))):null}},{key:"renderItem",value:function(){var e=this.props,t=e.item,s=e.site;if(!t)return null;var o=K.default.getMimePrefix(t),n=void 0;switch(o){case"image":n=D.default;break;case"video":n=T.default;break;case"audio":n=L.default;break;default:n=H.default}return b.default.createElement(n,{className:"editor-media-modal-detail__preview",site:s,item:t})}},{key:"render",value:function(){var e=this.props,t=e.isJetpack,s=e.item,o=e.siteId,n=(0,y.default)("editor-media-modal-detail__item",{"is-loading":!s});return b.default.createElement("figure",{className:n},b.default.createElement("div",{className:"editor-media-modal-detail__content editor-media-modal__content"},b.default.createElement("div",{className:"editor-media-modal-detail__preview-wrapper"},this.renderItem(),this.renderMediaEditorButtons(s),this.renderPreviousItemButton(),this.renderNextItemButton()),b.default.createElement("div",{className:"editor-media-modal-detail__sidebar"},t&&b.default.createElement(B.default,{siteId:o}),this.renderMediaEditorButtons(s,"is-mobile"),this.renderFields(),b.default.createElement(w.default,{item:s}))))}}]),t}(g.Component);te.propTypes={site:h.default.object,item:h.default.object,hasPreviousItem:h.default.bool,hasNextItem:h.default.bool,onShowPreviousItem:h.default.func,onShowNextItem:h.default.func,onEdit:h.default.func,onRestore:h.default.func},te.defaultProps={hasPreviousItem:!1,hasNextItem:!1,onShowPreviousItem:j.noop,onShowNextItem:j.noop,onEdit:j.noop,onRestore:j.noop};var se=(0,_.connect)(function(e){var t=(0,Q.getSelectedSiteId)(e);return{isJetpack:(0,J.isJetpackSite)(e,t),isVideoPressEnabled:(0,J.getSiteOption)(e,t,"videopress_enabled"),isVideoPressModuleActive:(0,J.isJetpackModuleActive)(e,t,"videopress"),isPrivateSite:(0,$.default)(e,t),siteId:t}});t.default=(0,j.flowRight)(se,x.localize)(te),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-audio.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./client/lib/media/utils.js"),j=o(y),x=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,v.default)(this.props.className,"is-audio");return b.default.createElement("audio",{src:j.default.url(this.props.item),controls:!0,className:e})}}]),t}(b.default.Component);x.displayName="EditorMediaModalDetailPreviewAudio",x.propTypes={className:h.default.string,item:h.default.object.isRequired},t.default=x,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-document.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/gridicons/build/index.js"),v=o(_),y=s("./node_modules/classnames/index.js"),j=o(y),x=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=(0,j.default)(this.props.className,"is-document");return b.default.createElement("div",{className:e},b.default.createElement(v.default,{icon:"pages",size:120}))}}]),t}(b.default.Component);x.displayName="EditorMediaModalDetailPreviewDocument",x.propTypes={className:h.default.string},t.default=x,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-image.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./client/components/image-preloader/index.jsx"),x=o(j),E=s("./client/components/spinner/index.jsx"),C=o(E),I=s("./client/lib/media/utils.js"),S=function(e){function t(e){(0,r.default)(this,t);var s=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return s.onImagePreloaderLoad=s.onImagePreloaderLoad.bind(s),s.state={loading:!1},s}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){return this.props.item.URL===e.item.URL?null:void this.setState({loading:!0})}},{key:"onImagePreloaderLoad",value:function(){this.setState({loading:!1}),this.props.onLoad()}},{key:"render",value:function(){var e=(0,I.url)(this.props.item,{photon:this.props.site&&!this.props.site.is_private}),t=(0,I.isItemBeingUploaded)(this.props.item),s=this.state.loading,o=/^blob/.test(e),n=(0,y.default)(this.props.className,"is-image",{"is-uploading":t},{"is-loading":s},{"is-blob":o}),i=(0,y.default)(this.props.className,"is-image","is-fake",{"is-uploading":t},{"is-loading":s},{"is-blob":o});return b.default.createElement("div",null,b.default.createElement("img",{src:e,width:this.props.item.width,height:this.props.item.height,alt:this.props.item.alt||this.props.item.title,className:i}),b.default.createElement(x.default,{src:e,width:this.props.item.width,height:this.props.item.height,onLoad:this.onImagePreloaderLoad,placeholder:b.default.createElement("span",null),alt:this.props.item.alt||this.props.item.title,className:n}),(t||s)&&b.default.createElement(C.default,null))}}]),t}(g.Component);S.propTypes={className:h.default.string,item:h.default.object.isRequired,site:h.default.object},S.defaultProps={onLoad:_.noop},t.default=S,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-video.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=s("./client/lib/media/utils.js"),j=o(y),x=s("./client/post-editor/media-modal/detail/detail-preview-videopress.jsx"),E=o(x),C=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){if(j.default.isVideoPressItem(this.props.item))return b.default.createElement(E.default,this.props);var e=(0,v.default)(this.props.className,"is-video");return b.default.createElement("video",{src:j.default.url(this.props.item),controls:!0,className:e})}}]),t}(b.default.Component);C.displayName="EditorMediaModalDetailPreviewVideo",C.propTypes={className:h.default.string,item:h.default.object.isRequired},t.default=C,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-videopress.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/classnames/index.js"),y=o(v),j=s("./node_modules/debug/browser.js"),x=o(j),E=s("./client/lib/load-script/index.js"),C=(0,x.default)("calypso:post-editor:videopress"),I="https://wordpress.com/wp-content/plugins/video/assets/js/next/videopress.js",S=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.setVideoInstance=function(e){return o.video=e},o.onScriptLoaded=function(e){var t=o.props,s=t.isPlaying,n=t.item,i=t.onScriptLoadError;if(e)return C("Script"+(0,_.get)(e,"src","")+" failed to load."),void i();var a=n.height,r=void 0===a?480:a,l=n.videopress_guid,d=n.width,u=void 0===d?854:d;l&&"undefined"!=typeof window&&window.videopress&&(o.player=window.videopress(l,o.video,{autoPlay:s,height:r,width:u}))},o.receiveMessage=function(e){if(!e.origin||e.origin===location.origin){var t=e.data;t&&"videopress_loading_state"===t.event&&"state"in t&&"converting"in t&&("loaded"!==t.state||t.converting||o.props.onVideoLoaded())}},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.loadInitializeScript(),window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){(0,E.removeScriptCallback)(I,this.onScriptLoaded),this.destroy()}},{key:"componentWillReceiveProps",value:function(e){this.props.isPlaying&&!e.isPlaying?this.pause():!this.props.isPlaying&&e.isPlaying&&this.play()}},{key:"componentDidUpdate",value:function(e){this.props.item.videopress_guid!==e.item.videopress_guid&&(this.destroy(),this.loadInitializeScript())}},{key:"shouldComponentUpdate",value:function(e){return this.props.item.videopress_guid!==e.item.videopress_guid}},{key:"loadInitializeScript",value:function(){(0,E.loadScript)(I,this.onScriptLoaded)}},{key:"destroy",value:function(){if(window.removeEventListener("message",this.receiveMessage),this.player)for((0,_.invoke)(this,"player.destroy");this.video.firstChild;)this.video.removeChild(this.video.firstChild)}},{key:"play",value:function(){var e=(0,_.get)(this,"player.state");e&&(0,_.invoke)(this,"player.state.play")}},{key:"pause",value:function(){var e=(0,_.get)(this,"player.state");if(e){(0,_.invoke)(this,"player.state.pause");var t=(0,_.invoke)(this,"player.state.videoAt");t&&this.props.onPause(t)}}},{key:"render",value:function(){var e=(0,y.default)(this.props.className,"is-video");return b.default.createElement("div",{className:e,ref:this.setVideoInstance})}}]),t}(g.Component);S.propTypes={className:h.default.string,isPlaying:h.default.bool,item:h.default.object.isRequired,onPause:h.default.func,onScriptLoadError:h.default.func,onVideoLoaded:h.default.func},S.defaultProps={isPlaying:!1,onPause:_.noop,onScriptLoadError:_.noop,onVideoLoaded:_.noop},t.default=S,e.exports=t.default},"./client/post-editor/media-modal/detail/index.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalDetail=void 0;var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/react/react.js"),_=o(b),v=s("./node_modules/react-redux/es/index.js"),y=s("./node_modules/lodash/lodash.js"),j=s("./client/post-editor/media-modal/detail/detail-item.jsx"),x=o(j),E=s("./client/lib/media/utils.js"),C=o(E),I=s("./client/components/header-cake/index.jsx"),S=o(I),k=s("./client/post-editor/media-modal/preload-image.js"),M=o(k),R=s("./client/state/ui/media-modal/constants.js"),w=s("./client/state/ui/editor/actions.js"),P=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.preloadImages=function(){C.default.filterItemsByMimePrefix(o.props.items,"image").forEach(function(e){var t=C.default.url(e,{photon:this.props.site&&!this.props.site.is_private});(0,M.default)(t)},o)},o.incrementIndex=function(e){o.props.onSelectedIndexChange(o.props.selectedIndex+e)},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.preloadImages()}},{key:"componentDidUpdate",value:function(){this.preloadImages()}},{key:"render",value:function(){var e=this.props,t=e.items,s=e.selectedIndex,o=e.site,n=e.onEditImageItem,i=e.onEditVideoItem,a=e.onRestoreItem,r=e.onReturnToList,l=t[s],d=C.default.getMimePrefix(l);return _.default.createElement("div",{className:"editor-media-modal-detail"},_.default.createElement(S.default,{onClick:r,backText:this.props.translate("Media Library")}),_.default.createElement(x.default,{site:o,item:l,hasPreviousItem:s-1>=0,hasNextItem:s+1<t.length,onShowPreviousItem:this.incrementIndex.bind(this,-1),onShowNextItem:this.incrementIndex.bind(this,1),onRestore:a,onEdit:"video"===d?i:n}))}}]),t}(_.default.Component);P.propTypes={site:h.default.object,items:h.default.array,selectedIndex:h.default.number,onSelectedIndexChange:h.default.func,onReturnToList:h.default.func,onEdit:h.default.func,onRestore:h.default.func},P.defaultProps={selectedIndex:0,onSelectedIndexChange:y.noop};var D=t.EditorMediaModalDetail=(0,g.localize)(P);t.default=(0,v.connect)(null,{onReturnToList:(0,y.partial)(w.setEditorMediaModalView,R.ModalViews.LIST),onEditImageItem:(0,y.partial)(w.setEditorMediaModalView,R.ModalViews.IMAGE_EDITOR),onEditVideoItem:(0,y.partial)(w.setEditorMediaModalView,R.ModalViews.VIDEO_EDITOR)})(D)},"./client/post-editor/media-modal/fieldset.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/react/react.js"),b=o(g),_=s("./node_modules/classnames/index.js"),v=o(_),y=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return b.default.createElement("fieldset",{className:(0,v.default)("editor-media-modal__fieldset",this.props.className)},b.default.createElement("legend",{className:"editor-media-modal__fieldset-legend"},this.props.legend),this.props.children)}}]),t}(b.default.Component);y.displayName="EditorMediaModalFieldset",y.propTypes={legend:h.default.oneOfType([h.default.string,h.default.element]).isRequired},t.default=y,e.exports=t.default},"./client/post-editor/media-modal/gallery-help.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=o(a),l=s("./node_modules/babel-runtime/helpers/createClass.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),f=s("./node_modules/prop-types/index.js"),h=o(f),g=s("./node_modules/i18n-calypso/index.js"),b=s("./node_modules/react/react.js"),_=o(b),v=s("./node_modules/react-redux/es/index.js"),y=s("./node_modules/redux/lib/index.js"),j=s("./node_modules/gridicons/build/index.js"),x=o(j),E=s("./client/lib/viewport/index.js"),C=s("./client/components/popover/index.jsx"),I=o(C),S=s("./client/components/forms/form-checkbox/index.jsx"),k=o(S),M=s("./client/components/button/index.jsx"),R=o(M),w=s("./client/state/preferences/actions.js"),P=s("./client/state/preferences/selectors.js"),D=s("./client/state/ui/selectors.js"),N=s("./client/components/data/query-preferences/index.jsx"),T=o(N),A=function(e){function t(){var e,s,o,n;(0,r.default)(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return s=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={isDismissed:!1,rememberDismiss:!0},o.setRenderContext=function(e){e&&o.setState({renderContext:e})},o.toggleRememberDismiss=function(){setTimeout(function(){o.setState({rememberDismiss:!o.state.rememberDismiss})},0)},o.dismiss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.remember;o.setState({isDismissed:!0}),o.props.onDismiss({remember:t})},o.renderPopover=function(){var e=o.state,t=e.renderContext,s=e.isDismissed;if(t&&!s)return _.default.createElement(I.default,{onClose:function(){return o.dismiss()},context:t,position:"bottom",isVisible:!(0,E.isMobile)(),className:"popover__gallery-help is-dialog-visible"},_.default.createElement("div",{className:"editor-media-modal__gallery-help-content"},_.default.createElement("div",{className:"editor-media-modal__gallery-help-instruction"},_.default.createElement("span",{className:"editor-media-modal__gallery-help-icon"},_.default.createElement(x.default,{icon:"image-multiple",size:20})),_.default.createElement("span",{className:"editor-media-modal__gallery-help-text"},o.props.translate("Select more than one image to create a gallery."))),_.default.createElement("div",{className:"editor-media-modal__gallery-help-actions"},_.default.createElement("label",{className:"editor-media-modal__gallery-help-remember-dismiss"},_.default.createElement(k.default,{checked:o.state.rememberDismiss,onChange:o.toggleRememberDismiss}),_.default.createElement("span",null,o.props.translate("Don't show again"))),_.default.createElement(R.default,{onClick:function(){return o.dismiss({remember:o.state.rememberDismiss})},compact:!0},o.props.translate("Got it",{context:"Button label",comment:"User clicks this to confirm that he has understood the text"})))))},n=s,(0,c.default)(o,n)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return"post-editor"!==this.props.sectionName?null:this.props.isMediaModalGalleryInstructionsDismissed?null:_.default.createElement("div",{ref:this.setRenderContext,className:"editor-media-modal__gallery-help"},_.default.createElement(T.default,null),this.renderPopover())}}]),t}(_.default.PureComponent);A.displayName="EditorMediaModalGalleryHelp",A.propTypes={onDismiss:h.default.func,sectionName:h.default.string},A.defaultProps={onDismiss:function(){}},t.default=(0,v.connect)(function(e){return{sectionName:(0,D.getSectionName)(e),isMediaModalGalleryInstructionsDismissed:(0,P.getPreference)(e,"mediaModalGalleryInstructionsDismissed")||(0,P.getPreference)(e,"mediaModalGalleryInstructionsDismissedForSession")}},function(e){return(0,y.bindActionCreators)({onDismiss:function(e){return e.remember?(0,w.savePreference)("mediaModalGalleryInstructionsDismissed",!0):(0,w.setPreference)("mediaModalGalleryInstructionsDismissedForSession",!0)}},e)})((0,g.localize)(A)),e.exports=t.default},"./client/post-editor/media-modal/preload-image.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("./node_modules/lodash/lodash.js");t.default=(0,o.memoize)(function(e){(new window.Image).src=e}),e.exports=t.default},"./client/post-editor/media-modal/secondary-actions.jsx":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(n),a=s("./node_modules/babel-runtime/helpers/extends.js"),r=o(a),l=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=o(l),u=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/createClass.js"),m=o(p),f=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(f),g=s("./node_modules/babel-runtime/helpers/inherits.js"),b=o(g),_=s("./node_modules/prop-types/index.js"),v=o(_),y=s("./node_modules/react/react.js"),j=o(y),x=s("./node_modules/react-redux/es/index.js"),E=s("./node_modules/classnames/index.js"),C=o(E),I=s("./node_modules/lodash/lodash.js"),S=s("./node_modules/gridicons/build/index.js"),k=o(S),M=s("./node_modules/i18n-calypso/index.js"),R=s("./client/lib/media/utils.js"),w=s("./client/state/current-user/selectors.js"),P=s("./client/state/sites/selectors.js"),D=s("./client/state/ui/media-modal/selectors.js"),N=s("./client/state/ui/editor/actions.js"),T=s("./client/state/ui/media-modal/constants.js"),A=s("./client/state/analytics/actions.js"),L=s("./client/components/button/index.jsx"),O=o(L),H=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,b.default)(t,e),(0,m.default)(t,[{key:"getButtons",value:function(){var e=this.props,t=e.disabled,s=e.selectedItems,o=e.site,n=e.translate,i=e.user,a=e.view,r=e.onDelete,l=e.onViewDetails,d=[];T.ModalViews.LIST===a&&s.length&&d.push({key:"edit",text:n("Edit"),disabled:t,primary:!0,onClick:l});var u=s.length&&(0,I.every)(s,function(e){return(0,R.canUserDeleteItem)(e,i,o)});if(T.ModalViews.GALLERY!==a&&u){var c=t||(0,I.some)(s,"transient");d.push({key:"delete",icon:"trash",className:"editor-media-modal__delete",disabled:c,onClick:c?I.noop:r})}return d}},{key:"render",value:function(){return j.default.createElement("div",null,this.getButtons().map(function(e){return j.default.createElement(O.default,(0,r.default)({className:(0,C.default)("editor-media-modal__secondary-action",e.className),"data-e2e-button":e.key,icon:!!e.icon,compact:!0},(0,I.pick)(e,["key","disabled","onClick","primary"])),e.icon&&j.default.createElement(k.default,{icon:e.icon}),e.text&&e.text)}))}}]),t}(y.Component);H.propTypes={user:v.default.object,site:v.default.object,selectedItems:v.default.array,view:v.default.oneOf((0,I.values)(T.ModalViews)),disabled:v.default.bool,onDelete:v.default.func,onViewDetails:v.default.func},H.defaultProps={disabled:!1,onDelete:I.noop},t.default=(0,x.connect)(function(e,t){return{view:(0,D.getMediaModalView)(e),user:(0,w.getCurrentUser)(e),siteSlug:t.site?(0,P.getSiteSlug)(e,t.site.ID):""}},{onViewDetails:(0,I.flow)((0,A.withAnalytics)((0,A.bumpStat)("editor_media_actions","edit_button_dialog")),(0,A.withAnalytics)((0,A.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,I.partial)(N.setEditorMediaModalView,T.ModalViews.DETAIL))},function(e,t,s){return(0,i.default)({},s,e,t,(0,I.pick)(s,["onViewDetails","view"]))})((0,M.localize)(H)),e.exports=t.default},"./client/state/jetpack/modules/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return{type:l.JETPACK_MODULES_RECEIVE,siteId:e,modules:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchModuleList=t.deactivateModule=t.activateModule=void 0;
var i=s("./node_modules/babel-runtime/helpers/extends.js"),a=o(i);t.receiveJetpackModules=n;var r=s("./node_modules/lodash/lodash.js"),l=s("./client/state/action-types.js"),d=s("./client/lib/wp/browser.js"),u=o(d);t.activateModule=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){return o({type:l.JETPACK_MODULE_ACTIVATE,siteId:e,moduleSlug:t,silent:s}),u.default.undocumented().jetpackModuleActivate(e,t).then(function(){o({type:l.JETPACK_MODULE_ACTIVATE_SUCCESS,siteId:e,moduleSlug:t,silent:s})}).catch(function(n){o({type:l.JETPACK_MODULE_ACTIVATE_FAILURE,siteId:e,moduleSlug:t,silent:s,error:n.message})})}},t.deactivateModule=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){return o({type:l.JETPACK_MODULE_DEACTIVATE,siteId:e,moduleSlug:t,silent:s}),u.default.undocumented().jetpackModuleDeactivate(e,t).then(function(){o({type:l.JETPACK_MODULE_DEACTIVATE_SUCCESS,siteId:e,moduleSlug:t,silent:s})}).catch(function(n){o({type:l.JETPACK_MODULE_DEACTIVATE_FAILURE,siteId:e,moduleSlug:t,silent:s,error:n.message})})}},t.fetchModuleList=function(e){return function(t){return t({type:l.JETPACK_MODULES_REQUEST,siteId:e}),u.default.undocumented().getJetpackModules(e).then(function(s){var o=s.data,i=(0,r.mapValues)(o,function(e){return(0,a.default)({active:e.activated},(0,r.omit)(e,"activated"))});t(n(e,i)),t({type:l.JETPACK_MODULES_REQUEST_SUCCESS,siteId:e})}).catch(function(s){t({type:l.JETPACK_MODULES_REQUEST_FAILURE,siteId:e,error:s.message})})}}},"./client/state/sharing/keyring/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(){return function(e){return e({type:c.KEYRING_CONNECTIONS_REQUEST}),u.default.undocumented().mekeyringConnections().then(function(t){var s=t.connections;e({type:c.KEYRING_CONNECTIONS_RECEIVE,connections:s}),e({type:c.KEYRING_CONNECTIONS_REQUEST_SUCCESS})}).catch(function(t){return e({type:c.KEYRING_CONNECTIONS_REQUEST_FAILURE,error:t})})}}function i(e){return{type:c.KEYRING_CONNECTION_DELETE,connection:e}}function a(e){return function(t){return u.default.undocumented().deletekeyringConnection(e.ID).then(function(){return t(i(e))}).catch(function(s){s&&404===s.statusCode&&t(i(e)),t({type:c.KEYRING_CONNECTION_DELETE_FAILURE,error:(0,l.default)({},s,{label:e.label})})})}}Object.defineProperty(t,"__esModule",{value:!0});var r=s("./node_modules/babel-runtime/helpers/extends.js"),l=o(r);t.requestKeyringConnections=n,t.deleteKeyringConnection=i,t.deleteStoredKeyringConnection=a;var d=s("./client/lib/wp/browser.js"),u=o(d),c=s("./client/state/action-types.js")},"./client/state/sharing/keyring/selectors.js":function(e,t,s){"use strict";function o(e){return(0,l.values)(e.sharing.keyring.items)}function n(e,t){return e.sharing.keyring.items[t]||null}function i(e,t){return(0,l.filter)(o(e),{service:t})}function a(e,t){return(0,l.filter)(e.sharing.keyring.items,function(e){return e.shared||e.keyring_connection_user_ID===t})}function r(e){return e.sharing.keyring.isFetching}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyringConnections=o,t.getKeyringConnectionById=n,t.getKeyringConnectionsByName=i,t.getUserConnections=a,t.isKeyringConnectionsFetching=r;var l=s("./node_modules/lodash/lodash.js")},"./client/state/sharing/publicize/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return{type:y.PUBLICIZE_SHARE_DISMISS,siteId:e,postId:t}}function i(e,t,s,o){return function(n){return n({type:y.PUBLICIZE_SHARE,siteId:e,postId:t,skippedConnections:s,message:o}),new b.default(function(i){v.default.undocumented().publicizePost(e,t,o,s,function(s,o){n(s||!o.results?{type:y.PUBLICIZE_SHARE_FAILURE,siteId:e,postId:t,error:s}:{type:y.PUBLICIZE_SHARE_SUCCESS,siteId:e,postId:t}),i()})})}}function a(e){return function(t){return t({type:y.PUBLICIZE_CONNECTIONS_REQUEST,siteId:e}),v.default.undocumented().siteConnections(e).then(function(s){t(m(e,s)),t({type:y.PUBLICIZE_CONNECTIONS_REQUEST_SUCCESS,siteId:e})}).catch(function(s){return t({type:y.PUBLICIZE_CONNECTIONS_REQUEST_FAILURE,siteId:e,error:s})})}}function r(e,t){return function(s){return s({type:y.PUBLICIZE_CONNECTION_REQUEST,connectionId:t,siteId:e}),v.default.undocumented().site(e).getConnection(t).then(function(o){s({type:y.PUBLICIZE_CONNECTION_RECEIVE,connection:o,siteId:e}),s({type:y.PUBLICIZE_CONNECTION_REQUEST_SUCCESS,connectionId:t,siteId:e})}).catch(function(o){return s({type:y.PUBLICIZE_CONNECTION_REQUEST_FAILURE,connectionId:t,error:o,siteId:e})})}}function l(e,t,s){return function(o){return v.default.undocumented().createConnection(t,e,s,{shared:!1}).then(function(e){return o({type:y.PUBLICIZE_CONNECTION_CREATE,connection:e})}).catch(function(e){return o(c(e))})}}function d(e,t){return function(s){return v.default.undocumented().updateConnection(e.site_ID,e.ID,t).then(function(e){return s({type:y.PUBLICIZE_CONNECTION_UPDATE,connection:e})}).catch(function(t){return s({type:y.PUBLICIZE_CONNECTION_UPDATE_FAILURE,error:(0,h.default)({},t,{label:e.label})})})}}function u(e){return function(t){return v.default.undocumented().deleteSiteConnection(e.site_ID,e.ID).then(function(){return t(p(e))}).catch(function(s){s&&404===s.statusCode&&t(p(e)),t({type:y.PUBLICIZE_CONNECTION_DELETE_FAILURE,error:(0,h.default)({},s,{label:e.label})})})}}function c(e){return{type:y.PUBLICIZE_CONNECTION_CREATE_FAILURE,error:e}}function p(e){return{type:y.PUBLICIZE_CONNECTION_DELETE,connection:e}}function m(e,t){return{type:y.PUBLICIZE_CONNECTIONS_RECEIVE,siteId:e,data:t}}Object.defineProperty(t,"__esModule",{value:!0});var f=s("./node_modules/babel-runtime/helpers/extends.js"),h=o(f),g=s("./node_modules/babel-runtime/core-js/promise.js"),b=o(g);t.dismissShareConfirmation=n,t.sharePost=i,t.fetchConnections=a,t.fetchConnection=r,t.createSiteConnection=l,t.updateSiteConnection=d,t.deleteSiteConnection=u,t.failCreateConnection=c,t.deleteConnection=p,t.receiveConnections=m;var _=s("./client/lib/wp/browser.js"),v=o(_),y=s("./client/state/action-types.js")},"./client/state/sharing/services/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(){return function(e){return e({type:r.KEYRING_SERVICES_REQUEST}),a.default.undocumented().metaKeyring().then(function(t){e({type:r.KEYRING_SERVICES_RECEIVE,services:t.services}),e({type:r.KEYRING_SERVICES_REQUEST_SUCCESS})}).catch(function(t){return e({type:r.KEYRING_SERVICES_REQUEST_FAILURE,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.requestKeyringServices=n;var i=s("./client/lib/wp/browser.js"),a=o(i),r=s("./client/state/action-types.js")},"./client/state/sharing/services/selectors.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return e.sharing.services.items}function i(e,t){return(0,d.filter)(n(e),{type:t})}function a(e,t){var s=n(e);return!!s[t]&&s[t]}function r(e,t,s){var o=i(e,s);return t?o.filter(function(s){return!((0,p.isJetpackSite)(e,t)&&!s.jetpack_support)&&(!((0,p.isJetpackSite)(e,t)&&s.jetpack_module_required&&!(0,p.isJetpackModuleActive)(e,t,s.jetpack_module_required))&&(!("eventbrite"===s.ID&&!(0,c.default)(e,t,"manage_options"))&&!("publicize"===s.type&&!(0,c.default)(e,t,"publish_posts"))))}):o}function l(e){return e.sharing.services.isFetching}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyringServices=n,t.getKeyringServicesByType=i,t.getKeyringServiceByName=a,t.getEligibleKeyringServices=r,t.isKeyringServicesFetching=l;var d=s("./node_modules/lodash/lodash.js"),u=s("./client/state/selectors/can-current-user.js"),c=o(u),p=s("./client/state/sites/selectors.js")},"./client/state/sites/media-storage/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return{type:l.SITE_MEDIA_STORAGE_RECEIVE,mediaStorage:e,siteId:t}}function i(e){return function(t){return t({type:l.SITE_MEDIA_STORAGE_REQUEST,siteId:e}),r.default.undocumented().site(e).mediaStorage().then(function(s){t(n(s,e)),t({type:l.SITE_MEDIA_STORAGE_REQUEST_SUCCESS,siteId:e})}).catch(function(s){t({type:l.SITE_MEDIA_STORAGE_REQUEST_FAILURE,siteId:e,error:s})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMediaStorage=n,t.requestMediaStorage=i;var a=s("./client/lib/wp/browser.js"),r=o(a),l=s("./client/state/action-types.js")},"./client/state/ui/drop-zone/actions.js":function(e,t,s){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:i.DROPZONE_SHOW,dropZoneName:e}}function n(e){return{type:i.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=o,t.hideDropZone=n;var i=s("./client/state/action-types.js")},"./client/state/ui/editor/actions.js":function(e,t,s){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return{type:h.EDITOR_START,siteId:e,postId:t,postType:s}}function i(e,t){return{type:h.EDITOR_STOP,siteId:e,postId:t}}function a(e){return{type:h.EDITOR_PASTE_EVENT,source:e}}function r(e){var t=(0,b.setMediaModalView)(e),s=j[e];return s?(0,_.withAnalytics)((0,_.bumpStat)("editor_media_actions",s),t):t}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(s,o){var n=(0,y.getPreference)(o(),"editorConfirmationDisabledSites");s(t?(0,v.savePreference)("editorConfirmationDisabledSites",(0,f.filter)(n,function(t){return e!==t})):(0,v.savePreference)("editorConfirmationDisabledSites",[].concat((0,c.default)(n),[e]))),s((0,_.recordTracksEvent)(t?"calypso_publish_confirmation_preference_enable":"calypso_publish_confirmation_preference_disable")),s((0,_.bumpStat)("calypso_publish_confirmation",t?"enabled":"disabled"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.MODAL_VIEW_STATS=void 0;var d,u=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=o(u),p=s("./node_modules/babel-runtime/helpers/defineProperty.js"),m=o(p);t.startEditingPost=n,t.stopEditingPost=i,t.pasteEvent=a,t.setEditorMediaModalView=r,t.saveConfirmationSidebarPreference=l;var f=s("./node_modules/lodash/lodash.js"),h=s("./client/state/action-types.js"),g=s("./client/state/ui/media-modal/constants.js"),b=s("./client/state/ui/media-modal/actions.js"),_=s("./client/state/analytics/actions.js"),v=s("./client/state/preferences/actions.js"),y=s("./client/state/preferences/selectors.js"),j=t.MODAL_VIEW_STATS=(d={},(0,m.default)(d,g.ModalViews.LIST,"view_list"),(0,m.default)(d,g.ModalViews.DETAIL,"view_detail"),(0,m.default)(d,g.ModalViews.GALLERY,"view_gallery"),(0,m.default)(d,g.ModalViews.IMAGE_EDITOR,"view_edit"),(0,m.default)(d,g.ModalViews.VIDEO_EDITOR,"view_edit"),d)},"./client/state/ui/editor/image-editor/actions.js":function(e,t,s){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:f.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:f.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function i(){return{type:f.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function a(){return{type:f.IMAGE_EDITOR_FLIP}}function r(e){return{type:f.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:f.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function d(e,t,s,o){return{type:f.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:s,title:o}}function u(e,t,s,o){return{type:f.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:s,rightBound:o}}function c(e,t,s,o){return{type:f.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:s,heightRatio:o}}function p(e,t,s,o){return{type:f.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:s,heightRatio:o}}function m(e,t){return{type:f.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=o,t.resetAllImageEditorState=n,t.imageEditorRotateCounterclockwise=i,t.imageEditorFlip=a,t.setImageEditorAspectRatio=r,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=d,t.setImageEditorCropBounds=u,t.imageEditorComputedCrop=c,t.imageEditorCrop=p,t.setImageEditorImageHasLoaded=m;var f=s("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/selectors.js":function(e,t,s){"use strict";function o(e){return e.ui.editor.imageEditor.transform}function n(e){return e.ui.editor.imageEditor.fileInfo}function i(e){return e.ui.editor.imageEditor.hasChanges}function a(e){return!e.ui.editor.imageEditor.imageIsLoading}function r(e){return e.ui.editor.imageEditor.cropBounds}function l(e){return e.ui.editor.imageEditor.crop}function d(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=o,t.getImageEditorFileInfo=n,t.imageEditorHasChanges=i,t.isImageEditorImageLoaded=a,t.getImageEditorCropBounds=r,t.getImageEditorCrop=l,t.getImageEditorAspectRatio=d},"./client/state/ui/media-modal/actions.js":function(e,t,s){"use strict";function o(e){return{type:i.MEDIA_MODAL_VIEW_SET,view:e}}function n(){return o(null)}Object.defineProperty(t,"__esModule",{value:!0}),t.setMediaModalView=o,t.resetMediaModalView=n;var i=s("./client/state/action-types.js")},"./client/state/ui/media-modal/constants.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModalViews={LIST:"LIST",DETAIL:"DETAIL",GALLERY:"GALLERY",IMAGE_EDITOR:"IMAGE_EDITOR",VIDEO_EDITOR:"VIDEO_EDITOR"}},"./client/state/ui/media-modal/selectors.js":function(e,t,s){"use strict";function o(e){return e.ui.mediaModal.view}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaModalView=o},"./node_modules/component-file-picker/index.js":function(e,t,s){function o(e,t){function s(e){t(a.files,e,a),n.unbind(a,"change",s),r=!1}"function"==typeof e&&(t=e,e={}),e=e||{},a.multiple=!!e.multiple,a.webkitdirectory=a.mozdirectory=a.directory=!!e.directory,null==e.accept?delete a.accept:e.accept.join?a.accept=e.accept.join(","):e.accept&&(a.accept=e.accept),r&&n.unbind(a,"change",r),n.bind(a,"change",s),r=s,i.reset(),a.click()}var n=s("./node_modules/component-event/index.js");e.exports=o;var i=document.createElement("form");i.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(i);var a=i.childNodes[0],r=!1},"./node_modules/filesize/lib/filesize.js":function(e,t,s){"use strict";(function(t){!function(t){function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=[],i=0,a=void 0,r=void 0,l=void 0,d=void 0,u=void 0,c=void 0,p=void 0,m=void 0,f=void 0,h=void 0,g=void 0;if(isNaN(e))throw new Error("Invalid arguments");return l=t.bits===!0,f=t.unix===!0,r=t.base||2,m=void 0!==t.round?t.round:f?1:2,h=void 0!==t.spacer?t.spacer:f?"":" ",g=t.symbols||t.suffixes||{},p=t.output||"string",a=void 0!==t.exponent?t.exponent:-1,c=Number(e),u=c<0,d=r>2?1e3:1024,u&&(c=-c),0===c?(s[0]=0,s[1]=f?"":l?"b":"B"):((a===-1||isNaN(a))&&(a=Math.floor(Math.log(c)/Math.log(d)),a<0&&(a=0)),a>8&&(a=8),i=2===r?c/Math.pow(2,10*a):c/Math.pow(1e3,a),l&&(i=8*i,i>d&&a<8&&(i/=d,a++)),s[0]=Number(i.toFixed(a>0?m:0)),s[1]=10===r&&1===a?l?"kb":"kB":n[l?"bits":"bytes"][a],f&&(s[1]=s[1].charAt(0),o.test(s[1])&&(s[0]=Math.floor(s[0]),s[1]=""))),u&&(s[0]=-s[0]),s[1]=g[s[1]]||s[1],"array"===p?s:"exponent"===p?a:"object"===p?{value:s[0],suffix:s[1],symbol:s[1]}:s.join(h)}var o=/^(b|B)$/,n={bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]};e.exports=s}("undefined"!=typeof window?window:t)}).call(t,s("./node_modules/webpack/buildin/global.js"))}});