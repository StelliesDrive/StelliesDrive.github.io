webpackJsonp(["plugins"],{"./client/blocks/eligibility-warnings/hold-list.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return{TRANSFER_ALREADY_EXISTS:{title:t("Installation in progress"),description:t("Please wait for the other installation to complete, then try again."),supportUrl:"https://wordpress.com/help"},NO_JETPACK_SITES:{title:t("Jetpack site not supported"),description:t("Try using a different site.")},NO_VIP_SITES:{title:t("VIP site not supported"),description:t("Try using a different site.")},SITE_PRIVATE:{title:t("Private site not supported"),description:t("Make your site public or hidden to resolve."),supportUrl:"/settings/general/"+e},SITE_GRAYLISTED:{title:t("Flagged site not supported"),description:t("Contact us to review your site's standing to resolve."),supportUrl:"https://support.wordpress.com/suspended-blogs/"},NON_ADMIN_USER:{title:t("Site owner access required"),description:t("Only site owners are allowed to use this feature."),supportUrl:"https://support.wordpress.com/user-roles/"},NOT_DOMAIN_OWNER:{title:t("Not a custom domain owner"),description:t("You must be the owner of the primary domain subscription to use this feature."),supportUrl:"https://support.wordpress.com/domains/"},NO_WPCOM_NAMESERVERS:{title:t("Domain not using WordPress.com name servers"),description:t("Your domain must use WordPress.com name servers to support custom code. Ask your domain provider to update your DNS settings."),supportUrl:"https://en.support.wordpress.com/domains/map-existing-domain/#2-ask-your-domain-provider-to-update-your-dns-settings"},NOT_RESOLVING_TO_WPCOM:{title:t("Domain not pointing to WordPress.com servers"),description:t("We cannot manage your site because your domain does not point to WordPress.com servers. Follow the instructions to reset your domain's A records to resolve this."),supportUrl:"https://support.wordpress.com/move-domain/setting-custom-a-records/"},NO_SSL_CERTIFICATE:{title:t("Security certificate required"),description:t("We are setting up a security certificate for your domain now. Please try again in a few minutes.")},EMAIL_UNVERIFIED:{title:t("Unconfirmed email"),description:t("You must have verified your email address with WordPress.com to install custom code. Please check your email to confirm your address.")},EXCESSIVE_DISK_SPACE:{title:t("We can't proceed with this upload"),description:t("This site is not currently eligible for installing themes and plugins. Please contact support to straighten things out."),supportUrl:"https://support.wordpress.com/help-support-options/"}}}Object.defineProperty(t,"__esModule",{value:!0}),t.HoldList=void 0;var a=n("./node_modules/react/react.js"),l=s(a),r=n("./node_modules/i18n-calypso/index.js"),o=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/gridicons/build/index.js"),d=s(u),c=n("./client/components/button/index.jsx"),p=s(c),f=n("./client/components/card/index.jsx"),g=s(f),m=n("./client/components/section-header/index.jsx"),h=s(m),_=t.HoldList=function(e){var t=e.holds,n=e.isPlaceholder,s=e.siteSlug,a=e.translate,r=i(s,a);return l.default.createElement("div",null,l.default.createElement(h.default,{label:a("Please resolve this issue:","Please resolve these issues:",{count:t.length})}),l.default.createElement(g.default,{className:"eligibility-warnings__hold-list"},n&&l.default.createElement("div",null,l.default.createElement("div",{className:"eligibility-warnings__hold"},l.default.createElement(d.default,{icon:"notice-outline",size:24}),l.default.createElement("div",{className:"eligibility-warnings__message"})),l.default.createElement("div",{className:"eligibility-warnings__hold"},l.default.createElement(d.default,{icon:"notice-outline",size:24}),l.default.createElement("div",{className:"eligibility-warnings__message"}))),!n&&(0,o.map)(t,function(e){return l.default.createElement("div",{className:"eligibility-warnings__hold",key:e},l.default.createElement(d.default,{icon:"notice-outline",size:24}),l.default.createElement("div",{className:"eligibility-warnings__message"},l.default.createElement("span",{className:"eligibility-warnings__message-title"},r[e].title),":Â ",l.default.createElement("span",{className:"eligibility-warnings__message-description"},r[e].description)),r[e].supportUrl&&l.default.createElement("div",{className:"eligibility-warnings__action"},l.default.createElement(p.default,{compact:!0,href:r[e].supportUrl,rel:"noopener noreferrer"},a("Resolve"))))})))};t.default=(0,r.localize)(_)},"./client/blocks/eligibility-warnings/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EligibilityWarnings=void 0;var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),r=s(l),o=n("./node_modules/prop-types/index.js"),u=s(o),d=n("./node_modules/react/react.js"),c=s(d),p=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/i18n-calypso/index.js"),g=n("./node_modules/lodash/lodash.js"),m=n("./node_modules/classnames/index.js"),h=s(m),_=n("./node_modules/gridicons/build/index.js"),b=s(_),v=n("./client/lib/analytics/track-component-view/index.jsx"),E=s(v),y=n("./client/lib/plans/constants.js"),j=n("./client/state/analytics/actions.js"),S=n("./client/state/automated-transfer/selectors.js"),P=n("./client/state/sites/selectors.js"),x=n("./client/state/ui/selectors.js"),k=n("./client/components/banner/index.jsx"),I=s(k),w=n("./client/components/button/index.jsx"),T=s(w),N=n("./client/components/card/index.jsx"),C=s(N),A=n("./client/components/data/query-atat-eligibility/index.jsx"),U=s(A),D=n("./client/blocks/eligibility-warnings/hold-list.jsx"),M=s(D),L=n("./client/blocks/eligibility-warnings/warning-list.jsx"),O=s(L),R=t.EligibilityWarnings=function(e){var t=e.backUrl,n=e.context,s=e.eligibilityData,i=e.hasBusinessPlan,a=e.isEligible,l=e.isJetpack,o=e.isPlaceholder,u=e.onProceed,d=e.onCancel,p=e.siteId,f=e.siteSlug,m=e.translate,_=(0,g.get)(s,"eligibilityWarnings",[]),v=(0,g.partition)((0,g.get)(s,"eligibilityHolds",[]),function(e){return(0,g.includes)(["NO_BUSINESS_PLAN","NOT_USING_CUSTOM_DOMAIN"],e)}),j=(0,r.default)(v,2),S=j[0],P=j[1],x=(0,h.default)("eligibility-warnings",{"eligibility-warnings__placeholder":o});return c.default.createElement("div",{className:x},c.default.createElement(U.default,{siteId:p}),c.default.createElement(E.default,{eventName:"calypso_automated_transfer_eligibility_show_warnings",eventProperties:{context:n}}),!i&&!l&&c.default.createElement(I.default,{description:m("Also get unlimited themes, advanced customization, no ads, live chat support, and more."),feature:"plugins"===n?y.FEATURE_UPLOAD_PLUGINS:y.FEATURE_UPLOAD_THEMES,event:"plugins"===n?"calypso-plugin-eligibility-upgrade-nudge":"calypso-theme-eligibility-upgrade-nudge",plan:y.PLAN_BUSINESS,title:m("Business plan required")}),i&&!l&&(0,g.includes)(S,"NOT_USING_CUSTOM_DOMAIN")&&c.default.createElement(I.default,{className:"eligibility-warnings__banner",description:m("plugins"===n?"To install this plugin, add a free custom domain.":"To upload themes, add a free custom domain."),href:"/domains/manage/"+f,icon:"domains",title:m("Custom domain required")}),(o||P.length>0)&&c.default.createElement(M.default,{holds:P,isPlaceholder:o,siteSlug:f}),_.length>0&&c.default.createElement(O.default,{warnings:_}),a&&0===P.length&&0===_.length&&c.default.createElement(C.default,{className:"eligibility-warnings__no-conflicts"},c.default.createElement(b.default,{icon:"thumbs-up",size:24}),c.default.createElement("span",null,m("This site is eligible to install plugins and upload themes."))),c.default.createElement(C.default,{className:"eligibility-warnings__confirm-box"},c.default.createElement("div",{className:"eligibility-warnings__confirm-text"},!a&&m("The errors above must be resolved before proceeding. "),a&&_.length>0&&m("If you proceed you will no longer be able to use these features. "),m("Have questions? Please {{a}}contact support{{/a}}.",{components:{a:c.default.createElement("a",{href:"https://wordpress.com/help/contact",target:"_blank",rel:"noopener noreferrer"})}})),c.default.createElement("div",{className:"eligibility-warnings__confirm-buttons"},c.default.createElement(T.default,{href:t,onClick:d},m("Cancel")),c.default.createElement(T.default,{primary:!0,disabled:!a,onClick:u},m("Proceed")))))};R.propTypes={onProceed:u.default.func,backUrl:u.default.string,translate:u.default.func},R.defaultProps={onProceed:g.noop};var V=function(e){var t=(0,x.getSelectedSiteId)(e),n=(0,x.getSelectedSiteSlug)(e),s=(0,S.getEligibility)(e,t),i=(0,S.isEligibleForAutomatedTransfer)(e,t),a=(0,g.get)(s,"eligibilityHolds",[]),l=!(0,g.includes)(a,"NO_BUSINESS_PLAN"),r=(0,P.isJetpackSite)(e,t),o=!!s.lastUpdate;return{eligibilityData:s,hasBusinessPlan:l,isEligible:i,isJetpack:r,isPlaceholder:!o,siteId:t,siteSlug:n}},F={trackCancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,j.recordTracksEvent)("calypso_automated_transfer_eligibility_click_cancel",e)},trackProceed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,j.recordTracksEvent)("calypso_automated_transfer_eligibilty_click_proceed",e)}},G=function(e,t,n){var s=(0,g.includes)(n.backUrl,"plugins")?"plugins":"themes",i=function(){return t.trackCancel({context:s})},l=function(){n.onProceed(),t.trackProceed({context:s})};return(0,a.default)({},n,e,t,{onCancel:i,onProceed:l,context:s})};t.default=(0,p.connect)(V,F,G)((0,f.localize)(R))},"./client/blocks/eligibility-warnings/warning-list.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WarningList=void 0;var i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/i18n-calypso/index.js"),r=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/gridicons/build/index.js"),u=s(o),d=n("./client/components/card/index.jsx"),c=s(d),p=n("./client/components/external-link/index.jsx"),f=s(p),g=n("./client/components/section-header/index.jsx"),m=s(g),h=t.WarningList=function(e){var t=e.translate,n=e.warnings;return a.default.createElement("div",null,a.default.createElement(m.default,{label:t("By proceeding you'll lose %d feature:","By proceeding you'll lose these %d features:",{count:n.length,args:n.length})}),a.default.createElement(c.default,{className:"eligibility-warnings__warning-list"},(0,r.map)(n,function(e,t){var n=e.name,s=e.description,i=e.supportUrl;return a.default.createElement("div",{className:"eligibility-warnings__warning",key:t},a.default.createElement(u.default,{icon:"cross-small",size:24}),a.default.createElement("div",{className:"eligibility-warnings__message"},a.default.createElement("span",{className:"eligibility-warnings__message-title"},n),":Â ",a.default.createElement("span",{className:"eligibility-warnings__message-description"},s)),a.default.createElement("div",{className:"eligibility-warnings__action"},a.default.createElement(f.default,{href:i,target:"_blank",rel:"noopener noreferrer"},a.default.createElement(u.default,{icon:"help-outline",size:24}))))})))};t.default=(0,l.localize)(h)},"./client/blocks/upload-drop-zone/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),E=n("./node_modules/gridicons/build/index.js"),y=s(E),j=n("./node_modules/classnames/index.js"),S=s(j),P=n("./client/components/file-picker/index.jsx"),x=s(P),k=n("./client/components/drop-zone/index.jsx"),I=s(k),w=n("./client/state/ui/selectors.js"),T=n("./client/notices/index.js"),N=s(T),C=n("./node_modules/debug/browser.js"),A=s(C),U=n("./client/lib/automated-transfer/constants.js"),D=(0,A.default)("calypso:upload-drop-zone"),M=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.onFileSelect=function(e){var t=s.props,n=t.translate,i=t.siteId,a=t.doUpload;if(1!==e.length)return void N.default.error(n("Please drop a single zip file"));var l=e[0]||e.item(0);return D("zip file:",l),l.size>U.MAX_UPLOAD_ZIP_SIZE?void N.default.error(n("Zip file is too large. Please upload a file under 50 MB.")):void a(i,l)},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.translate,n=e.disabled,s=t("Drop files or click here to upload"),i=t("Only single .zip files are accepted."),a=(0,S.default)("upload-drop-zone",{"is-disabled":n});return _.default.createElement("div",{className:a},_.default.createElement("div",{className:"upload-drop-zone__dropzone"},_.default.createElement(I.default,{onFilesDrop:this.onFileSelect}),_.default.createElement(x.default,{accept:"application/zip",onPick:this.onFileSelect},_.default.createElement(y.default,{className:"upload-drop-zone__icon",icon:"cloud-upload",size:48}),s,_.default.createElement("span",{className:"upload-drop-zone__instructions"},i))))}}]),t}(h.Component);M.propTypes={doUpload:m.default.func.isRequired,disabled:m.default.bool,siteId:m.default.number},t.default=(0,b.connect)(function(e){return{siteId:(0,w.getSelectedSiteId)(e)}})((0,v.localize)(M)),e.exports=t.default},"./client/components/bulk-select/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./node_modules/gridicons/build/index.js"),y=s(E),j=n("./client/components/count/index.jsx"),S=s(j),P=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.getStateIcon=function(){if(s.hasSomeElementsSelected())return _.default.createElement(y.default,{className:"bulk-select__some-checked-icon",icon:"minus-small",size:18})},s.hasAllElementsSelected=function(){return s.props.selectedElements&&s.props.selectedElements===s.props.totalElements},s.hasSomeElementsSelected=function(){return s.props.selectedElements&&s.props.selectedElements<s.props.totalElements},s.handleToggleAll=function(){var e=!(s.hasSomeElementsSelected()||s.hasAllElementsSelected());s.props.onToggle(e)},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.hasAllElementsSelected(),t=(0,v.default)("bulk-select__box",{"is-checked":e});return _.default.createElement("span",{className:"bulk-select",onClick:this.handleToggleAll},_.default.createElement("span",{className:"bulk-select__container"},_.default.createElement("input",{type:"checkbox",className:t,checked:e,readOnly:!0}),_.default.createElement(S.default,{count:this.props.selectedElements}),this.getStateIcon()))}}]),t}(_.default.Component);P.displayName="BulkSelect",P.propTypes={totalElements:m.default.number.isRequired,selectedElements:m.default.number.isRequired,onToggle:m.default.func.isRequired},t.default=P,e.exports=t.default},"./client/components/button-group/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/classnames/index.js"),_=s(h),b=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,_.default)("button-group",this.props.className,{"is-busy":this.props.busy,"is-primary":this.props.primary});return m.default.createElement("span",{className:e},this.props.children)}}]),t}(g.PureComponent);b.propTypes={children:function(e){var t=null;return m.default.Children.forEach(e.children,function(e){!e||e.props&&"button"===e.props.type||(t=new Error("All children elements should be a Button."))}),t}},t.default=b,e.exports=t.default},"./client/components/card/compact.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return o.default.createElement(p.default,(0,l.default)({},e,{className:(0,d.default)(e.className,"is-compact")}),e.children)}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/helpers/extends.js"),l=s(a);t.default=i;var r=n("./node_modules/react/react.js"),o=s(r),u=n("./node_modules/classnames/index.js"),d=s(u),c=n("./client/components/card/index.jsx"),p=s(c);e.exports=t.default},"./client/components/data/query-atat-eligibility/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=t.QueryAutomatedTransferEligibility=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/automated-transfer/actions.js"),v=t.QueryAutomatedTransferEligibility=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){var t=e.requestEligibility,n=e.siteId;n&&t(n)}},{key:"render",value:function(){return null}}]),t}(h.Component);v.propTypes={requestEligibility:m.default.func.isRequired,siteId:m.default.number};var E=t.mapDispatchToProps={requestEligibility:b.requestEligibility};t.default=(0,_.connect)(null,E)(v)},"./client/components/data/query-plugin-keys/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/plugins/premium/actions.js"),v=n("./client/state/plugins/premium/selectors.js"),E=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.props.siteId&&!this.props.hasRequested&&this.props.fetchInstallInstructions(this.props.siteId)}},{key:"componentWillReceiveProps",value:function(e){e.siteId!==this.props.siteId&&this.refresh(e.hasRequested,e.siteId)}},{key:"refresh",value:function(e,t){e||this.props.fetchInstallInstructions(t)}},{key:"render",value:function(){return null}}]),t}(h.Component);E.propTypes={siteId:m.default.number.isRequired,hasRequested:m.default.bool,fetchInstallInstructions:m.default.func},E.defaultProps={fetchInstallInstructions:function(){}},t.default=(0,_.connect)(function(e,t){var n=t.siteId;return{hasRequested:(0,v.hasRequested)(e,n)}},{fetchInstallInstructions:b.fetchInstallInstructions})(E),e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var i=n("./node_modules/babel-runtime/core-js/array/from.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(g),h=n("./node_modules/react-dom/index.js"),_=s(h),b=n("./node_modules/react/react.js"),v=s(b),E=n("./node_modules/prop-types/index.js"),y=s(E),j=n("./node_modules/react-redux/es/index.js"),S=n("./node_modules/classnames/index.js"),P=s(S),x=n("./node_modules/gridicons/build/index.js"),k=s(x),I=n("./node_modules/i18n-calypso/index.js"),w=n("./node_modules/lodash/lodash.js"),T=n("./client/components/root-child/index.jsx"),N=s(T),C=n("./client/state/ui/drop-zone/actions.js"),A=t.DropZone=function(e){function t(){var e,n,s,i;(0,u.default)(this,t);for(var l=arguments.length,o=Array(l),d=0;d<l;d++)o[d]=arguments[d];return n=s=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),s.state={isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1},s.resetDragState=function(){(s.state.isDraggingOverDocument||s.state.isDraggingOverElement)&&(s.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),s.toggleDropZoneReduxState(!1))},s.toggleMutationObserver=function(){s.disconnectMutationObserver(),s.state.isDraggingOverDocument&&(s.observer=new window.MutationObserver(s.detectNodeRemoval),s.observer.observe(document.body,{childList:!0,subtree:!0}))},s.disconnectMutationObserver=function(){s.observer&&(s.observer.disconnect(),delete s.observer)},s.detectNodeRemoval=function(e){e.forEach(function(e){e.removedNodes.length&&(s.dragEnterNodes=(0,w.without)(s.dragEnterNodes,(0,a.default)(e.removedNodes)))})},s.toggleDraggingOverDocument=function(e){"dragenter"!==e.type||(0,w.includes)(s.dragEnterNodes,e.target)?"dragleave"===e.type&&(s.dragEnterNodes=(0,w.without)(s.dragEnterNodes,e.target)):s.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,n=s.props.onVerifyValidTransfer(t.dataTransfer),i=n&&s.dragEnterNodes.length;s.setState({isDraggingOverDocument:i,isDraggingOverElement:i&&(s.props.fullScreen||s.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(s.dragEnterNodes=(0,w.without)(s.dragEnterNodes,window)),s.toggleDropZoneReduxState(!(!s.state.isDraggingOverDocument&&!s.state.isDraggingOverElement))},s.toggleDropZoneReduxState=function(e){s.state.lastVisibleState!==e&&(e?s.props.showDropZone(s.props.dropZoneName):s.props.hideDropZone(s.props.dropZoneName),s.setState({lastVisibleState:e}))},s.preventDefault=function(e){e.preventDefault()},s.isWithinZoneBounds=function(e,t){if(!s.refs.zone)return!1;var n=s.refs.zone.getBoundingClientRect();return n.bottom!==n.top&&n.left!==n.right&&(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)},s.onDrop=function(e){e.dataTransfer&&e.dataTransfer.files.length,s.resetDragState(),e.preventDefault(),(s.props.fullScreen||_.default.findDOMNode(s.refs.zone).contains(e.target))&&(s.props.onDrop(e),s.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&s.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation()))},s.renderContent=function(){var e=s.props.textLabel?s.props.textLabel:s.props.translate("Drop files to upload");return v.default.createElement("div",{className:"drop-zone__content"},s.props.children?s.props.children:v.default.createElement("div",null,v.default.createElement("span",{className:"drop-zone__content-icon"},s.props.icon),v.default.createElement("span",{className:"drop-zone__content-text"},e)))},i=n,(0,f.default)(s,i)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)}},{key:"componentDidUpdate",value:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()}},{key:"render",value:function(){var e=(0,P.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=v.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?v.default.createElement(N.default,null,t):t}}]),t}(v.default.Component);A.propTypes={className:y.default.string,fullScreen:y.default.bool,icon:y.default.node,onDrop:y.default.func,onVerifyValidTransfer:y.default.func,onFilesDrop:y.default.func,textLabel:y.default.string,translate:y.default.func,showDropZone:y.default.func.isRequired,hideDropZone:y.default.func.isRequired,dropZoneName:y.default.string},A.defaultProps={className:null,onDrop:w.noop,onVerifyValidTransfer:function(){return!0},onFilesDrop:w.noop,fullScreen:!1,icon:v.default.createElement(k.default,{icon:"cloud-upload",size:48}),translate:w.identity,dropZoneName:null};var U={showDropZone:C.showDropZone,hideDropZone:C.hideDropZone};t.default=(0,j.connect)(null,U)((0,I.localize)(A))},"./client/components/file-picker/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/component-file-picker/index.js"),E=s(v),y=function(e){function t(e){(0,r.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.showPicker=n.showPicker.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,E.default)((0,b.assign)({},this.props),this.props.onPick)}},{key:"render",value:function(){return _.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(_.default.Component);t.default=y,y.displayName="FilePicker",y.propTypes={multiple:m.default.bool,directory:m.default.bool,accept:m.default.string,onClick:m.default.func,onPick:m.default.func},y.defaultProps={multiple:!1,directory:!1,accept:null,onClick:b.noop,onPick:b.noop},e.exports=t.default},"./client/components/foldable-card/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./node_modules/i18n-calypso/index.js"),y=n("./node_modules/lodash/lodash.js"),j=n("./client/components/card/index.jsx"),S=s(j),P=n("./client/components/card/compact.jsx"),x=s(P),k=n("./node_modules/gridicons/build/index.js"),I=s(k),w=n("./client/components/screen-reader-text/index.js"),T=s(w),N=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={expanded:s.props.expanded},s.onClick=function(){s.props.children&&s.setState({expanded:!s.state.expanded}),s.props.onClick&&s.props.onClick(),s.state.expanded?s.props.onClose(s.props.cardKey):s.props.onOpen(s.props.cardKey)},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:e.expanded})}},{key:"getClickAction",value:function(){if(!this.props.disabled)return this.onClick}},{key:"getActionButton",value:function(){return this.state.expanded?this.props.actionButtonExpanded||this.props.actionButton:this.props.actionButton}},{key:"renderActionButton",value:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return _.default.createElement("div",{className:"foldable-card__action",onClick:e},this.getActionButton());if(this.props.children){var t=24,n=this.props.screenReaderText||this.props.translate("More");return _.default.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},_.default.createElement(T.default,null,n),_.default.createElement(I.default,{icon:this.props.icon,size:t}))}}},{key:"renderContent",value:function(){return _.default.createElement("div",{className:"foldable-card__content"},this.props.children)}},{key:"renderHeader",value:function(){var e=this.props.summary?_.default.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?_.default.createElement("span",{className:"foldable-card__summary-expanded"},this.props.expandedSummary," "):null,n=this.props.clickableHeader?this.getClickAction():null,s=(0,v.default)("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return _.default.createElement("div",{className:s,onClick:n},_.default.createElement("span",{
className:"foldable-card__main"},this.props.header," "),_.default.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))}},{key:"render",value:function(){var e=this.props.compact?x.default:S.default,t=(0,v.default)("foldable-card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary});return _.default.createElement(e,{className:t},this.renderHeader(),this.state.expanded&&this.renderContent())}}]),t}(h.Component);N.propTypes={actionButton:m.default.element,actionButtonExpanded:m.default.element,cardKey:m.default.string,compact:m.default.bool,disabled:m.default.bool,expandedSummary:m.default.oneOfType([m.default.string,m.default.element]),expanded:m.default.bool,icon:m.default.string,onClick:m.default.func,onClose:m.default.func,onOpen:m.default.func,screenReaderText:m.default.oneOfType([m.default.string,m.default.bool]),summary:m.default.oneOfType([m.default.string,m.default.element])},N.defaultProps={onOpen:y.noop,onClose:y.noop,cardKey:"",icon:"chevron-down",expanded:!1,screenReaderText:!1},t.default=(0,E.localize)(N),e.exports=t.default},"./client/components/forms/form-toggle/compact.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=s(l),o=n("./node_modules/react/react.js"),u=s(o),d=n("./node_modules/classnames/index.js"),c=s(d),p=n("./client/components/forms/form-toggle/index.jsx"),f=s(p),g=function(e){var t=e.className,n=e.children,s=(0,r.default)(e,["className","children"]);return u.default.createElement(f.default,(0,a.default)({},s,{className:(0,c.default)(t,"is-compact")}),n)};t.default=g,e.exports=t.default},"./client/components/forms/form-toggle/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./node_modules/lodash/lodash.js"),y=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.onKeyDown=function(e){s.props.disabled||("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s.props.onChange(!s.props.checked)),s.props.onKeyDown(e))},s.onClick=function(e){e&&e.stopPropagation&&e.stopPropagation(),s.props.disabled||s.props.onChange(!s.props.checked)},s.onLabelClick=function(e){if(!s.props.disabled){var t=e.target.nodeName.toLowerCase();"a"!==t&&"input"!==t&&"select"!==t&&(e.preventDefault(),s.props.onChange(!s.props.checked))}},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.id=this.constructor.idNum++}},{key:"render",value:function(){var e=this.props.id||"toggle-"+this.id,t=(0,v.default)("form-toggle__wrapper",{"is-disabled":this.props.disabled}),n=(0,v.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return m.default.createElement("span",{className:t},m.default.createElement("input",{id:e,className:n,type:"checkbox",checked:this.props.checked,readOnly:!0,disabled:this.props.disabled}),m.default.createElement("label",{className:"form-toggle__label",htmlFor:e},m.default.createElement("span",{className:"form-toggle__switch",onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),m.default.createElement("span",{className:"form-toggle__label-content",onClick:this.onLabelClick},this.props.children)))}}]),t}(g.PureComponent);y.propTypes={onChange:_.default.func,onKeyDown:_.default.func,checked:_.default.bool,disabled:_.default.bool,id:_.default.string,className:_.default.string,toggling:_.default.bool,"aria-label":_.default.string},y.defaultProps={checked:!1,disabled:!1,onKeyDown:E.noop,onChange:E.noop},y.idNum=0,t.default=y,e.exports=t.default},"./client/components/header-button/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=s(l),o=n("./node_modules/react/react.js"),u=s(o),d=n("./node_modules/prop-types/index.js"),c=s(d),p=n("./node_modules/gridicons/build/index.js"),f=s(p),g=n("./client/components/button/index.jsx"),m=s(g),h=function(e){var t=e.icon,n=e.label,s=(0,r.default)(e,["icon","label"]);return u.default.createElement(m.default,(0,a.default)({className:"header-button"},s),t&&u.default.createElement(f.default,{icon:t,size:18}),u.default.createElement("span",{className:"header-button__text"},n))};h.propTypes={icon:c.default.string,label:c.default.node},t.default=h,e.exports=t.default},"./client/components/header-cake/back.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./node_modules/i18n-calypso/index.js"),y=n("./node_modules/gridicons/build/index.js"),j=s(y),S=n("./node_modules/lodash/lodash.js"),P=n("./client/components/button/index.jsx"),x=s(P),k=n("./client/lib/viewport/index.js"),I=s(k),w={windowWidth:480,characterLength:8},T=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={windowWidth:I.default.getWindowInnerWidth()},s.handleWindowResize=function(){s.setState({windowWidth:I.default.getWindowInnerWidth()})},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.resizeThrottled=(0,S.throttle)(this.handleWindowResize,100),window.addEventListener("resize",this.resizeThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeThrottled)}},{key:"hideText",value:function(e){return this.state.windowWidth<=w.windowWidth&&e.length>=w.characterLength||this.state.windowWidth<=300}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.icon,s=e.onClick,i=e.spacer,a=e.text,l=e.translate,r=void 0===a?l("Back"):a,o=(0,v.default)({"header-cake__back":!0,"is-spacer":i,"is-action":!!n});return m.default.createElement(x.default,{compact:!0,borderless:!0,className:o,href:t,onClick:s,disabled:i},m.default.createElement(j.default,{icon:n||"arrow-left",size:18}),!this.hideText(r)&&r)}}]),t}(g.Component);T.propTypes={onClick:_.default.func,href:_.default.string,text:_.default.string,spacer:_.default.bool},T.defaultProps={spacer:!1,disabled:!1},t.default=(0,E.localize)(T),e.exports=t.default},"./client/components/header-cake/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./client/components/card/index.jsx"),y=s(E),j=n("./client/components/header-cake/back.jsx"),S=s(j),P=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.backText,n=e.backHref,s=e.actionButton,i=e.actionText,a=e.actionIcon,l=e.actionHref,r=e.actionOnClick,o=(0,v.default)("header-cake",this.props.className,{"is-compact":this.props.isCompact});return _.default.createElement(y.default,{className:o},_.default.createElement(S.default,{text:t,href:n,onClick:this.props.onClick}),_.default.createElement("div",{className:"header-cake__title",onClick:this.props.onTitleClick},this.props.children),s||_.default.createElement(S.default,{text:i||t,href:l||n,onClick:r,icon:a,spacer:!r}))}}]),t}(h.Component);t.default=P,P.displayName="HeaderCake",P.propTypes={onClick:m.default.func,onTitleClick:m.default.func,backText:m.default.string,backHref:m.default.string,actionButton:m.default.element,actionText:m.default.string,actionHref:m.default.string,actionIcon:m.default.string,actionOnClick:m.default.func},P.defaultProps={isCompact:!1},e.exports=t.default},"./client/components/info-popover/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/gridicons/build/index.js"),v=s(b),E=n("./node_modules/classnames/index.js"),y=s(E),j=n("./client/components/popover/index.jsx"),S=s(j),P=n("./client/lib/analytics/index.js"),x=s(P),k=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={showPopover:!1},s.handleClick=function(e){e.preventDefault(),s.setState({showPopover:!s.state.showPopover},s.recordStats)},s.handleClose=function(){return s.setState({showPopover:!1},s.recordStats)},s.recordStats=function(){var e=s.props,t=e.gaEventCategory,n=e.popoverName;if(t&&n){var i=s.state.showPopover?" Opened":" Closed";x.default.ga.recordEvent(t,"InfoPopover: "+n+i)}},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return m.default.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:(0,y.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},m.default.createElement(v.default,{icon:this.props.icon,size:this.props.iconSize}),m.default.createElement(S.default,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,y.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}]),t}(g.Component);k.propTypes={autoRtl:_.default.bool,className:_.default.string,gaEventCategory:_.default.string,icon:_.default.string,iconSize:_.default.number,id:_.default.string,ignoreContext:_.default.shape({getDOMNode:_.default.func}),popoverName:_.default.string,position:_.default.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:_.default.string},k.defaultProps={autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom"},t.default=k,e.exports=t.default},"./client/components/progress-bar/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./client/components/screen-reader-text/index.js"),y=s(E),j=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={allTimeMax:s.props.value},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getCompletionPercentage",value:function(){var e=Math.ceil(this.state.allTimeMax/this.props.total*100);return Math.min(e,100)}},{key:"renderBar",value:function(){var e=this.props.title?_.default.createElement(y.default,null,this.props.title):null,t={width:this.getCompletionPercentage()+"%"};return this.props.color&&(t.backgroundColor=this.props.color),_.default.createElement("div",{className:"progress-bar__progress",style:t},e)}},{key:"componentWillReceiveProps",value:function(e){this.setState({allTimeMax:Math.max(this.state.allTimeMax,e.value)})}},{key:"render",value:function(){var e=(0,v.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return _.default.createElement("div",{className:e},this.renderBar())}}]),t}(h.PureComponent);j.defaultProps={total:100,compact:!1,isPulsing:!1},j.propTypes={value:m.default.number.isRequired,total:m.default.number,color:m.default.string,title:m.default.string,compact:m.default.bool,className:m.default.string,isPulsing:m.default.bool},t.default=j,e.exports=t.default},"./client/components/rating/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/prop-types/index.js"),v=s(b),E=n("./node_modules/gridicons/build/index.js"),y=s(E),j=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"overlayStars",value:function(){for(var e=this.props.size,t={width:e+"px",height:e+"px"},n=[],s=0;s<5;s++)n.push(_.default.createElement(y.default,{key:"star-"+s,icon:"star",style:t}));return n}},{key:"outlineStars",value:function(){for(var e=this.props,t=e.rating,n=e.size,s=100-10*Math.round(t/10),i=Math.floor(s/20),l={width:n+"px",height:n+"px",fill:"#00aadc"},r=[],o=0;o<5;o++){var u=l;o>=5-i&&(u=(0,a.default)({},l,{fill:"#c8d7e1"})),r.push(_.default.createElement(y.default,{key:"star-outline-"+o,icon:"star-outline",style:u}))}return r}},{key:"render",value:function(){var e=this.props,t=e.rating,n=e.size,s=5*n,i=10*Math.round(t/10),a=i/100*s,l=s-a+"px",r=n+"px",o={WebkitClipPath:"inset(0 "+l+" 0 0 )",clipPath:"inset(0 "+l+" 0 0 )",clip:"rect(0, "+(a+"px")+", "+r+", 0)",width:s+"px"};return _.default.createElement("div",{className:"rating",style:{width:s+"px",height:n+"px"}},_.default.createElement("div",{className:"rating__overlay",style:o},this.overlayStars()),_.default.createElement("div",{className:"rating__star-outline"},this.outlineStars()))}}]),t}(_.default.PureComponent);j.defaultProps={rating:0,size:24},j.propTypes={rating:v.default.number,size:v.default.number},t.default=j,e.exports=t.default},"./client/components/screen-reader-text/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children;return l.default.createElement("span",{className:"screen-reader-text"},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n("./node_modules/react/react.js"),l=s(a);e.exports=t.default},"./client/components/section-header/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/classnames/index.js"),_=s(h),b=n("./client/components/card/compact.jsx"),v=s(b),E=n("./client/components/count/index.jsx"),y=s(E),j=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),n=(0,_.default)(this.props.className,"section-header",{"is-empty":t});return m.default.createElement(v.default,{className:n,href:this.props.href},m.default.createElement("div",{className:"section-header__label"},m.default.createElement("span",{className:"section-header__label-text"},this.props.label),e&&m.default.createElement(y.default,{count:this.props.count})),m.default.createElement("div",{className:"section-header__actions"},this.props.children))}}]),t}(g.PureComponent);j.defaultProps={label:"",href:null},t.default=j,e.exports=t.default},"./client/components/section-nav/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./node_modules/lodash/lodash.js"),y=n("./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx"),j=s(y),S=n("./client/components/section-nav/tabs.jsx"),P=s(S),x=n("./client/components/section-nav/item.jsx"),k=s(x),I=n("./client/components/search/index.jsx"),w=s(I),T=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),N.call(s),i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.checkForSiblingControls(this.props.children)}},{key:"componentWillReceiveProps",value:function(e){(0,E.isEqual)(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())}},{key:"render",value:function(){var e=this.getChildren(),t=void 0;return e?(t=(0,v.default)({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems},this.props.className),m.default.createElement("div",{className:t},this.renderDropdown(),m.default.createElement("div",{className:"section-nav__panel"},e))):(t=(0,v.default)({"section-nav":!0,"is-empty":!0},this.props.className),m.default.createElement("div",{className:t},m.default.createElement("div",{className:"section-nav__panel"},m.default.createElement(k.default,null))))}}]),t}(g.Component);T.propTypes={selectedText:_.default.node,selectedCount:_.default.number,hasPinnedItems:_.default.bool,onMobileNavPanelOpen:_.default.func,className:_.default.string,allowDropdown:_.default.bool},T.defaultProps={onMobileNavPanelOpen:function(){},allowDropdown:!0};var N=function(){var e=this;this.state={mobileOpen:!1},this.renderDropdown=function(){return e.props.allowDropdown?m.default.createElement("div",{className:"section-nav__mobile-header",onClick:e.toggleMobileOpenState},m.default.createElement("span",{className:"section-nav__mobile-header-text"},e.props.selectedText)):m.default.createElement("div",null)},this.getChildren=function(){return m.default.Children.map(e.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==P.default||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===P.default&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===w.default&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),m.default.cloneElement(e,t)):null}.bind(e))},this.closeMobilePanel=function(){window.innerWidth<480&&e.state.mobileOpen&&e.setState({mobileOpen:!1})},this.toggleMobileOpenState=function(){var t=!e.state.mobileOpen;e.setState({mobileOpen:t}),t&&e.props.onMobileNavPanelOpen()},this.generateOnSearch=function(t){return function(){t.apply(void 0,arguments),e.closeMobilePanel()}},this.checkForSiblingControls=function(t){e.hasSiblingControls=!1;var n=[w.default,j.default];m.default.Children.forEach(t,function(e,t){t&&e&&!(0,E.includes)(n,e.type)&&(this.hasSiblingControls=!0)}.bind(e))}};t.default=T,e.exports=t.default},"./client/components/section-nav/item.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./client/components/count/index.jsx"),y=s(E),j=n("./client/sections-preload.js"),S=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s._preloaded=!1,s.preload=function(){!s._preloaded&&s.props.preloadSectionName&&(s._preloaded=!0,(0,j.preload)(s.props.preloadSectionName))},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.itemType?this.props.itemType:"tab",t={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};t["section-nav-"+e]=!0;var n=(0,v.default)(this.props.className,t),s=void 0,i=void 0;return this.props.isExternalLink&&(s="_blank"),this.props.disabled||(i=this.props.onClick),m.default.createElement("li",{className:n},m.default.createElement("a",{href:this.props.path,target:s,className:"section-nav-"+e+"__link",onClick:i,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},m.default.createElement("span",{className:"section-nav-"+e+"__text"},this.props.children,"number"==typeof this.props.count&&m.default.createElement(y.default,{count:this.props.count}))))}}]),t}(g.PureComponent);S.propTypes={itemType:_.default.string,path:_.default.string,selected:_.default.bool,tabIndex:_.default.number,onClick:_.default.func,isExternalLink:_.default.bool,disabled:_.default.bool,count:_.default.oneOfType([_.default.number,_.default.bool]),className:_.default.string,preloadSectionName:_.default.string},t.default=S,e.exports=t.default},"./client/components/section-nav/tabs.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/react-dom/index.js"),v=s(b),E=n("./node_modules/prop-types/index.js"),y=s(E),j=n("./node_modules/classnames/index.js"),S=s(j),P=n("./node_modules/lodash/lodash.js"),x=n("./client/components/select-dropdown/item.jsx"),k=s(x),I=n("./client/components/select-dropdown/index.jsx"),w=s(I),T=n("./client/lib/viewport/index.js"),N=s(T),C=480,A=function(e){function t(){var e,n,s,i;(0,u.default)(this,t);for(var l=arguments.length,o=Array(l),d=0;d<l;d++)o[d]=arguments[d];return n=s=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),s.state={isDropdown:!1},s.getTabWidths=function(){var e=0;_.default.Children.forEach(s.props.children,function(t,n){if(t){var s=v.default.findDOMNode(this.refs["tab-"+n]).offsetWidth;e+=s}}.bind(s)),s.tabsWidth=Math.max(e,s.tabsWidth||0)},s.getDropdown=function(){var e=_.default.Children.map(s.props.children,function(e,t){return e?_.default.createElement(k.default,(0,a.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return _.default.createElement(w.default,{className:"section-nav-tabs__dropdown",selectedText:s.props.selectedText,selectedCount:s.props.selectedCount},e)},s.setDropdown=function(){var e=void 0;if(window.innerWidth>C){if(!s.refs.navGroup)return;e=s.refs.navGroup.offsetWidth,s.getTabWidths(),e<=s.tabsWidth&&!s.state.isDropdown?s.setState({isDropdown:!0}):e>s.tabsWidth&&s.state.isDropdown&&s.setState({isDropdown:!1})}else window.innerWidth<=C&&s.state.isDropdown&&s.setState({isDropdown:!1})},s.keyHandler=function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}},i=n,(0,f.default)(s,i)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setDropdown(),this.debouncedAfterResize=(0,P.debounce)(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)}},{key:"componentDidUpdate",value:function(){this.setDropdown()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedAfterResize)}},{key:"render",value:function(){var e=_.default.Children.map(this.props.children,function(e,t){return e&&_.default.cloneElement(e,{ref:"tab-"+t})}),t=(0,S.default)({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),n=N.default.getWindowInnerWidth();return _.default.createElement("div",{className:"section-nav-group",ref:"navGroup"},_.default.createElement("div",{className:t},this.props.label&&_.default.createElement("h6",{className:"section-nav-group__label"},this.props.label),_.default.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&n>C&&this.getDropdown()))}}]),t}(h.Component);A.propTypes={selectedText:y.default.string,selectedCount:y.default.number,label:y.default.string,hasSiblingControls:y.default.bool},A.defaultProps={hasSiblingControls:!1},t.default=A,e.exports=t.default},"./client/components/sidebar-navigation/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/gridicons/build/index.js"),E=s(v),y=n("./client/state/document-head/selectors.js"),j=n("./client/state/ui/layout-focus/actions.js"),S=function(e){function t(e){(0,r.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.toggleSidebar=n.toggleSidebar.bind(n),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return _.default.createElement("header",{className:"current-section"},_.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},_.default.createElement(E.default,{icon:"chevron-left"}),this.props.children,_.default.createElement("div",null,_.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),_.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(_.default.Component);S.propTypes={title:m.default.string,linkClassName:m.default.string,sectionTitle:m.default.string,sectionName:m.default.string.isRequired,setLayoutFocus:m.default.func.isRequired},t.default=(0,b.connect)(function(e){return{title:(0,y.getDocumentHeadTitle)(e)}},{setLayoutFocus:j.setLayoutFocus})(S),e.exports=t.default},"./client/components/version/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/gridicons/build/index.js"),E=s(v),y=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.renderIcon=function(){return s.props.icon?m.default.createElement(E.default,{icon:s.props.icon,size:18}):null},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.version?m.default.createElement("div",{className:"version"},this.renderIcon(),this.props.translate("Version %s",{
args:this.props.version})):null}}]),t}(g.Component);y.displayName="Version",y.propTypes={version:_.default.oneOfType([_.default.string,_.default.number]).isRequired,icon:_.default.string},t.default=(0,b.localize)(y),e.exports=t.default},"./client/components/wpadmin-auto-login/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var s=new Image;n<9&&(s.onerror=function(){setTimeout(i.bind(null,e,t,n+1),t*n)}),s.src=e}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=s(a),r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=s(r),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=s(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=s(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),g=s(f),m=n("./node_modules/prop-types/index.js"),h=s(m),_=n("./node_modules/react/react.js"),b=n("./node_modules/lodash/lodash.js"),v=function(e){function t(){return(0,o.default)(this,t),(0,p.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=(0,b.get)(this.props.site,"URL"),t=this.getPixelUrl(e);setTimeout(i.bind(null,t,this.props.delay,0),this.props.delay)}},{key:"getPixelUrl",value:function(e){var t=encodeURI(e+"/wp-includes/images/blank.gif");return e+"/wp-login.php?redirect_to="+t}},{key:"render",value:function(){return null}}]),t}(_.Component);v.propTypes={site:h.default.object,delay:h.default.number},v.defaultProps={delay:3e3},t.default=v,e.exports=t.default},"./client/lib/automated-transfer/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MAX_UPLOAD_ZIP_SIZE=5e7},"./client/lib/build-url/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=l.default.parse(e,!0);return t?n.query.s=t:delete n.query.s,n=(0,i.pick)(n,"pathname","hash","query"),l.default.format(n).replace(/\%20/g,"+")};var i=n("./node_modules/lodash/lodash.js"),a=n("./node_modules/url/url.js"),l=s(a);e.exports=t.default},"./client/lib/mixins/infinite-scroll/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{componentDidMount:function(){this.checkScrollPositionHandler=(0,s.throttle)(this.checkScrollPosition.bind(this,{triggeredByScroll:!0}),i),window.addEventListener("scroll",this.checkScrollPositionHandler),this.checkScrollPosition({triggeredByScroll:!1})},componentDidUpdate:function(){this.checkScrollPosition({triggeredByScroll:!1})},componentWillUnmount:function(){window.removeEventListener("scroll",this.checkScrollPositionHandler)},checkScrollPosition:function(t){var n=this,s=window.pageYOffset,i=document.body.scrollHeight,a=window.innerHeight,l=2*a,r=t.triggeredByScroll;s>=i-a-l&&(s>a&&(r=!0),window.requestAnimationFrame(function(){n[e]({triggeredByScroll:r})}))}}};var s=n("./node_modules/lodash/lodash.js"),i=400;e.exports=t.default},"./client/lib/mixins/url-search/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/debug/browser.js"),a=s(i),l=n("./node_modules/page/index.js"),r=s(l),o=n("./client/lib/build-url/index.js"),u=s(o),d=(0,a.default)("calypso:url-search");t.default={getInitialState:function(){return{searchOpen:!1}},componentWillReceiveProps:function(e){e.search||this.setState({searchOpen:!1})},doSearch:function(e){var t;return this.setState({searchOpen:!1!==e}),this.onSearch?void this.onSearch(e):(t=(0,u.default)(window.location.href,e),d("search posts for:",e),void(this.props.search&&e?(d("replacing URL: "+t),r.default.replace(t)):(d("setting URL: "+t),(0,r.default)(t))))},getSearchOpen:function(){return this.state.searchOpen!==!1||this.props.search}},e.exports=t.default},"./client/lib/plugins/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/promise.js"),a=s(i),l=n("./node_modules/debug/browser.js"),r=s(l),o=n("./node_modules/lodash/lodash.js"),u=n("./client/lib/analytics/index.js"),d=s(u),c=n("./client/dispatcher/index.js"),p=s(c),f=n("./client/lib/site/utils.js"),g=s(f),m=n("./client/lib/wp/browser.js"),h=s(m),_=(0,r.default)("calypso:my-sites:plugins:actions"),b={},v=function(e,t,n,s){var i=function e(n,s,i){var a=void 0;n&&n(s,i),a=b[t].shift(),a?a.action(e.bind(void 0,a.callback)):delete b[t]};b[t]?b[t].push({action:e,siteId:t,pluginId:n,callback:s}):(b[t]=[],e(i.bind(void 0,s)))},E=function(e,t,n,s){return new a.default(function(i,a){v(e,t,n,function(e,t){s&&s(e,t),e&&a(e),i(t)})})},y=function(e){return new a.default(function(t){return t(e)})},j=function(e){return new a.default(function(t,n){return n(e)})},S=function(e,t){return e.jetpack?t.id:t.slug},P=function(e,t){var n=h.default.site(e.ID),s=e.jetpack?n.plugin(t):n.wpcomPlugin(t);return s},x=function(e,t,n){var s=P(e,t);return s[n].bind(s)},k=function(e,t,n,s){return s?(d.default.tracks.recordEvent(e+"_error",{site:n.ID,plugin:t.slug,error:s.error}),void d.default.mc.bumpStat(e,"failed")):(d.default.tracks.recordEvent(e+"_success",{site:n.ID,plugin:t.slug}),void d.default.mc.bumpStat(e,"succeeded"))},I={removePluginsNotices:function(e){p.default.handleViewAction({type:"REMOVE_PLUGINS_NOTICES",logs:e})},fetchSitePlugins:function(e){if(!g.default.userCan("manage_options",e)||!e.jetpack)return void(0,o.defer)(function(){p.default.handleViewAction({type:"NOT_ALLOWED_TO_RECEIVE_PLUGINS",action:"RECEIVE_PLUGINS",site:e})});var t=function(t,n){p.default.handleServerAction({type:"RECEIVE_PLUGINS",action:"RECEIVE_PLUGINS",site:e,data:n,error:t})};e.jetpack?h.default.site(e.ID).pluginsList(t):h.default.site(e.ID).wpcomPluginsList(t)},updatePlugin:function(e,t){if(_("updatePlugin",e,t),t.update&&e.canUpdateFiles){p.default.handleViewAction({type:"UPDATE_PLUGIN",action:"UPDATE_PLUGIN",site:e,plugin:t});var n=x(e,t.id,"updateVersion");v(n,e.ID,t.id,function(n,s){p.default.handleServerAction({type:"RECEIVE_UPDATED_PLUGIN",action:"UPDATE_PLUGIN",site:e,plugin:t,data:s,error:n}),k("calypso_plugin_updated",t,e,n)})}},installPlugin:function(e,t){if(!e.canUpdateFiles)return j("Error: Can't update files on the site");if(!g.default.userCan("manage_options",e))return j("Error: User can't manage the site");var n=function(){var n=x(e,t.slug,"install");return E(n,e.ID,t.slug)},s=function(t){var n=t.id,s=x(e,n,"updateVersion");return E(s,e.ID,n)},i=function(t){var n=t.id,s=x(e,n,"activate");return E(s,e.ID,n)},a=function(t){var n=t.id,s=x(e,n,"enableAutoupdate");return E(s,e.ID,t.id)},l=function(n,s,i){var a={type:n,action:"INSTALL_PLUGIN",site:e,plugin:t,data:s,error:i};return"INSTALL_PLUGIN"===n?void p.default.handleViewAction(a):(p.default.handleServerAction(a),void k("calypso_plugin_installed",t,e,i))},r=function(e){return l("RECEIVE_INSTALLED_PLUGIN",e),e},o=function n(o){return"PluginAlreadyInstalledError"===o.name?("function"==typeof e.isMainNetworkSite?e.isMainNetworkSite():e.isMainNetworkSite)?s(t).then(a).then(r).catch(n):s(t).then(i).then(a).then(r).catch(n):"ActivationErrorError"===o.name?s(t).then(a).then(r).catch(n):(l("RECEIVE_INSTALLED_PLUGIN",null,o),o)};return l("INSTALL_PLUGIN"),("function"==typeof e.isMainNetworkSite?e.isMainNetworkSite():e.isMainNetworkSite)?n().then(a).then(r).catch(o):n().then(i).then(a).then(r).catch(o)},removePlugin:function(e,t){if(e.canUpdateFiles&&g.default.userCan("manage_options",e)){p.default.handleViewAction({type:"REMOVE_PLUGIN",action:"REMOVE_PLUGIN",site:e,plugin:t});var n=function(n,s,i){var a={type:n,action:"REMOVE_PLUGIN",site:e,plugin:t,data:s,error:i};p.default.handleServerAction(a),k("calypso_plugin_removed",t,e,i)},s=function(t){var n=t.id,s=x(e,n,"delete");return E(s,e.ID,n)},i=function(t){if(t.active){var n=t.id,s=x(e,n,"deactivate");return E(s,e.ID,n)}return y(t)},a=function(t){if(t.autoupdate){var n=t.id,s=x(e,n,"disableAutoupdate");return E(s,e.ID,n)}return y(t)};return i(t).then(a).then(s).then(function(e){return n("RECEIVE_REMOVE_PLUGIN",e)}).catch(function(e){return n("RECEIVE_REMOVE_PLUGIN",null,e)})}},activatePlugin:function(e,t){p.default.handleViewAction({type:"ACTIVATE_PLUGIN",action:"ACTIVATE_PLUGIN",site:e,plugin:t});var n=S(e,t),s=P(e,n),i=s.activate.bind(s);v(i,e.ID,n,function(n,s){return p.default.handleServerAction({type:"RECEIVE_ACTIVATED_PLUGIN",action:"ACTIVATE_PLUGIN",site:e,plugin:t,data:s,error:n}),n&&"activation_error"!==n.error||(!s||!s.active)&&!n?(d.default.mc.bumpStat("calypso_plugin_activated","failed"),void d.default.tracks.recordEvent("calypso_plugin_activated_error",{error:n&&n.error?n.error:"Undefined activation error",site:e.ID,plugin:t.slug})):(d.default.mc.bumpStat("calypso_plugin_activated","succeeded"),void d.default.tracks.recordEvent("calypso_plugin_activated_success",{site:e.ID,plugin:t.slug}))})},deactivatePlugin:function(e,t){p.default.handleViewAction({type:"DEACTIVATE_PLUGIN",action:"DEACTIVATE_PLUGIN",site:e,plugin:t});var n=S(e,t),s=P(e,n),i=s.deactivate.bind(s);v(i,e.ID,n,function(n,s){return p.default.handleServerAction({type:"RECEIVE_DEACTIVATED_PLUGIN",action:"DEACTIVATE_PLUGIN",site:e,plugin:t,data:s,error:n}),n&&"deactivation_error"!==n.error?(d.default.mc.bumpStat("calypso_plugin_deactivated","failed"),void d.default.tracks.recordEvent("calypso_plugin_deactivated_error",{error:n.error?n.error:"Undefined deactivation error",site:e.ID,plugin:t.slug})):(d.default.mc.bumpStat("calypso_plugin_deactivated","succeeded"),void d.default.tracks.recordEvent("calypso_plugin_deactivated_success",{site:e.ID,plugin:t.slug}))})},togglePluginActivation:function(e,t){g.default.userCan("manage_options",e)&&(_("togglePluginActivation",e,t),t.active?I.deactivatePlugin(e,t):I.activatePlugin(e,t))},enableAutoUpdatesPlugin:function(e,t){if(g.default.userCan("manage_options",e)&&e.canAutoupdateFiles){p.default.handleViewAction({type:"ENABLE_AUTOUPDATE_PLUGIN",action:"ENABLE_AUTOUPDATE_PLUGIN",site:e,plugin:t});var n=x(e,t.id,"enableAutoupdate");v(n,e.ID,t.id,function(n,s){p.default.handleServerAction({type:"RECEIVE_ENABLED_AUTOUPDATE_PLUGIN",action:"ENABLE_AUTOUPDATE_PLUGIN",site:e,plugin:t,data:s,error:n}),k("calypso_plugin_autoupdate_enabled",t,e,n),t.update&&!n&&I.updatePlugin(e,t)})}},disableAutoUpdatesPlugin:function(e,t){if(g.default.userCan("manage_options",e)&&e.canAutoupdateFiles){p.default.handleViewAction({type:"DISABLE_AUTOUPDATE_PLUGIN",action:"DISABLE_AUTOUPDATE_PLUGIN",site:e,plugin:t});var n=x(e,t.id,"disableAutoupdate");v(n,e.ID,t.id,function(n,s){p.default.handleServerAction({type:"RECEIVE_DISABLED_AUTOUPDATE_PLUGIN",action:"DISABLE_AUTOUPDATE_PLUGIN",site:e,plugin:t,data:s,error:n}),k("calypso_plugin_autoupdate_disabled",t,e,n)})}},togglePluginAutoUpdate:function(e,t){g.default.userCan("manage_options",e)&&e.canAutoupdateFiles&&(t.autoupdate?I.disableAutoUpdatesPlugin(e,t):I.enableAutoUpdatesPlugin(e,t))},removePluginUpdateInfo:function(e,t){p.default.handleViewAction({type:"REMOVE_PLUGINS_UPDATE_INFO",site:e,plugin:t})},resetQueue:function(){b={}}};t.default=I,e.exports=t.default},"./client/lib/plugins/log-store.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,s,i){var a={status:e,action:t,site:n,plugin:s};switch(m("add in "+e+" data:",a),e){case"error":a.error=i,h.push(a);break;case"inProgress":_.push(a),m("current in progress:",_);break;case"completed":b.push(a),m("current completed:",b)}}function a(e){switch(m("removing log:",e),e.status){case"error":h=(0,o.reject)(h,e),m("current errors:",h);break;case"inProgress":_=(0,o.reject)(_,e),m("current in progress:",_);break;case"completed":b=(0,o.reject)(b,e),m("current completed:",b)}}function l(e){var t;switch(m("removing log:",e),e.status){case"error":t=(0,o.findIndex)(h,e),(0,o.pullAt)(h,t),m("current errors:",h);break;case"inProgress":t=(0,o.findIndex)(_,e),(0,o.pullAt)(_,t),m("current in progress:",_);break;case"completed":t=(0,o.findIndex)(b,e),(0,o.pullAt)(b,t),m("current completed:",b)}}Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/debug/browser.js"),d=s(u),c=n("./client/dispatcher/index.js"),p=s(c),f=n("./client/lib/mixins/emitter/index.js"),g=s(f),m=(0,d.default)("calypso:my-sites:plugins:log-store"),h=[],_=[],b=[];r={getErrors:function(){return(0,o.clone)(h)},getInProgress:function(){return(0,o.clone)(_)},getCompleted:function(){return(0,o.clone)(b)},isInProgressAction:function(e,t,n){var s=arguments.length;return _.some(function(i){var a=0;return n&&(0,o.isArray)(n)?(0,o.indexOf)(n,i.action)!==-1&&a++:n&&n===i.action&&a++,e&&e===i.site.ID&&a++,t&&t===i.plugin.slug&&a++,a===s})},emitChange:function(){this.emit("change")}},r.dispatchToken=p.default.register(function(e){var t=e.action;switch(m("register event Type",t.type,e),t.type){case"REMOVE_PLUGINS_NOTICES":t.logs.forEach(a),r.emitChange();break;case"UPDATE_PLUGIN":case"ACTIVATE_PLUGIN":case"DEACTIVATE_PLUGIN":case"ENABLE_AUTOUPDATE_PLUGIN":case"DISABLE_AUTOUPDATE_PLUGIN":case"INSTALL_PLUGIN":case"REMOVE_PLUGIN":i("inProgress",t.action,t.site,t.plugin),r.emitChange();break;case"RECEIVE_UPDATED_PLUGIN":case"RECEIVE_ACTIVATED_PLUGIN":case"RECEIVE_DEACTIVATED_PLUGIN":case"RECEIVE_ENABLED_AUTOUPDATE_PLUGIN":case"RECEIVE_DISABLED_AUTOUPDATE_PLUGIN":case"RECEIVE_INSTALLED_PLUGIN":case"RECEIVE_REMOVE_PLUGIN":l({status:"inProgress",action:t.action,site:t.site,plugin:t.plugin}),"RECEIVE_ACTIVATED_PLUGIN"===t.type&&(t.data&&t.data.active||t.error||(t.error={error:"broken-plugin"})),t.error&&["activation_error","deactivation_error"].indexOf(t.error.error)===-1?i("error",t.action,t.site,t.plugin,t.error):i("completed",t.action,t.site,t.plugin),r.emitChange()}}),(0,g.default)(r),t.default=r,e.exports=t.default},"./client/lib/plugins/notices.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return(e.numberOfSites>1?"n sites":"1 site")+" "+(e.numberOfPlugins>1?"n plugins":"1 plugin")}function a(e,t,n){var s=e.filter(function(e){return e.status===n?n:t.type}),i=(0,o.groupBy)(s,function(e){return e.site.ID}),a=(0,o.groupBy)(s,function(e){return e.plugin.slug});return{plugin:t.plugin.name,wp_admin_settings_page_url:t.plugin.wp_admin_settings_page_url,numberOfPlugins:(0,r.default)(a).length,site:t.site.title,isMultiSite:t.site.is_multi_site,numberOfSites:(0,r.default)(i).length}}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/babel-runtime/core-js/object/keys.js"),r=s(l),o=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/i18n-calypso/index.js"),d=s(u),c=n("./client/notices/index.js"),p=s(c),f=n("./client/lib/plugins/log-store.js"),g=s(f),m=n("./client/lib/plugins/actions.js"),h=s(m),_=n("./client/lib/plugins/utils.js"),b=s(_),v=n("./client/lib/version-compare/index.js"),E=s(v);t.default={shouldComponentUpdateNotices:function(e,t){return!(!e.errors||e.errors.length===t.errors.length)||(!(!e.inProgress||e.inProgress.length===t.inProgress.length)||!(!e.completed||e.completed.length===t.completed.length))},getInitialState:function(){return{notices:this.refreshPluginNotices()}},componentDidMount:function(){g.default.on("change",this.showNotification)},componentWillUnmount:function(){g.default.removeListener("change",this.showNotification)},refreshPluginNotices:function(){var e=this.props.selectedSite;return{errors:b.default.filterNotices(g.default.getErrors(),e,this.props.pluginSlug),inProgress:b.default.filterNotices(g.default.getInProgress(),e,this.props.pluginSlug),completed:b.default.filterNotices(g.default.getCompleted(),e,this.props.pluginSlug)}},showNotification:function(){var e=this.refreshPluginNotices();if(this.setState({notices:e}),e.inProgress.length>0)return void p.default.info(this.getMessage(e.inProgress,this.inProgressMessage,"inProgress"));if(e.completed.length>0&&e.errors.length>0)p.default.warning(this.erroredAndCompletedMessage(e),{onRemoveCallback:h.default.removePluginsNotices.bind(this,e.completed.concat(e.errors))});else if(e.errors.length>0)p.default.error(this.getMessage(e.errors,this.errorMessage,"errors"),{button:this.getErrorButton(e.errors),href:this.getErrorHref(e.errors),onRemoveCallback:h.default.removePluginsNotices.bind(this,e.errors)});else if(e.completed.length>0){var t="inProgress"===e.completed[0].status?e.completed[0]:e.completed[e.completed.length-1],n=!(t.plugin.wp_admin_settings_page_url&&"ACTIVATE_PLUGIN"===t.action);p.default.success(this.getMessage(e.completed,this.successMessage,"completed"),{button:this.getSuccessButton(e.completed),href:this.getSuccessHref(e.completed),onRemoveCallback:h.default.removePluginsNotices.bind(this,e.completed),showDismiss:n})}},getMessage:function(e,t,n){var s="inProgress"===e[0].status?e[0]:e[e.length-1],l=a(e,s,n),r=i(l);return t(s.action,r,l,s)},successMessage:function(e,t,n){switch(e){case"INSTALL_PLUGIN":if(n.isMultiSite)switch(t){case"1 site 1 plugin":return d.default.translate("Successfully installed %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully installed %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully installed %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully installed %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}switch(t){case"1 site 1 plugin":return d.default.translate("Successfully installed and activated %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully installed and activated %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully installed and activated %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully installed and activated %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"REMOVE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Successfully removed %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully removed %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully removed %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully removed %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"UPDATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Successfully updated %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully updated %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully updated %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully updated %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"ACTIVATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Successfully activated %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully activated %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully activated %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully activated %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"DEACTIVATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Successfully deactivated %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully deactivated %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully deactivated %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully deactivated %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"ENABLE_AUTOUPDATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Successfully enabled autoupdates for %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully enabled autoupdates for %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully enabled autoupdates for %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully enabled autoupdates for %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"DISABLE_AUTOUPDATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Successfully disabled autoupdates for %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Successfully disabled autoupdates for %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Successfully disabled autoupdates for %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Successfully disabled autoupdates for %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"PLUGIN_UPLOAD":return d.default.translate("You've successfully uploaded the %(plugin)s plugin.",{args:n})}},inProgressMessage:function(e,t,n){switch(e){case"INSTALL_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Installing %(plugin)s on %(site)s.",{context:"In progress message",args:n});case"1 site n plugins":return d.default.translate("Installing %(numberOfPlugins)d plugins on %(site)s.",{context:"In progress message",args:n});case"n sites 1 plugin":return d.default.translate("Installing %(plugin)s on %(numberOfSites)d sites.",{context:"In progress message",args:n});case"n sites n plugins":return d.default.translate("Installing %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{context:"In progress message",args:n})}break;case"REMOVE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Removing %(plugin)s on %(site)s.",{args:n});case"1 site n plugins":return d.default.translate("Removing %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("Removing %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("Removing %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"UPDATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Updating %(plugin)s on %(site)s.",{context:"In progress message",args:n});case"1 site n plugins":return d.default.translate("Updating %(numberOfPlugins)d plugins on %(site)s.",{context:"In progress message",args:n});case"n sites 1 plugin":return d.default.translate("Updating %(plugin)s on %(numberOfSites)d sites.",{context:"In progress message",args:n});case"n sites n plugins":return d.default.translate("Updating %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{context:"In progress message",args:n})}break;case"ACTIVATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Activating %(plugin)s on %(site)s.",{context:"In progress message",args:n});case"1 site n plugins":return d.default.translate("Activating %(numberOfPlugins)d plugins on %(site)s.",{context:"In progress message",args:n});case"n sites 1 plugin":return d.default.translate("Activating %(plugin)s on %(numberOfSites)d sites.",{context:"In progress message",args:n});case"n sites n plugins":return d.default.translate("Activating %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{context:"In progress message",args:n})}break;case"DEACTIVATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Deactivating %(plugin)s on %(site)s",{context:"In progress message",args:n});case"1 site n plugins":return d.default.translate("Deactivating %(numberOfPlugins)d plugins on %(site)s.",{context:"In progress message",args:n});case"n sites 1 plugin":return d.default.translate("Deactivating %(plugin)s on %(numberOfSites)d sites.",{context:"In progress message",args:n});case"n sites n plugins":return d.default.translate("Deactivating %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{context:"In progress message",args:n})}break;case"ENABLE_AUTOUPDATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Enabling autoupdates for %(plugin)s on %(site)s.",{context:"In progress message",args:n});case"1 site n plugins":return d.default.translate("Enabling autoupdates for %(numberOfPlugins)d plugins on %(site)s.",{context:"In progress message",args:n});case"n sites 1 plugin":return d.default.translate("Enabling autoupdates for %(plugin)s on %(numberOfSites)d sites.",{context:"In progress message",args:n});case"n sites n plugins":return d.default.translate("Enabling autoupdates for %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{context:"In progress message",args:n})}break;case"DISABLE_AUTOUPDATE_PLUGIN":switch(t){case"1 site 1 plugin":return d.default.translate("Disabling autoupdates for %(plugin)s on %(site)s.",{context:"In progress message",args:n});case"1 site n plugins":return d.default.translate("Disabling autoupdates for %(numberOfPlugins)d plugins on %(site)s.",{context:"In progress message",args:n});case"n sites 1 plugin":return d.default.translate("Disabling autoupdates for %(plugin)s on %(numberOfSites)d sites.",{context:"In progress message",args:n});case"n sites n plugins":return d.default.translate("Disabling autoupdates for %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{context:"In progress message",args:n})}}},erroredAndCompletedMessage:function(e){var t=this.getMessage(e.completed,this.successMessage,"completed"),n=this.getMessage(e.errors,this.errorMessage,"errors");return" "+t+" "+n},errorMessage:function(e,t,n,s){if("1 site 1 plugin"===t)return this.singleErrorMessage(e,n,s);switch(e){case"INSTALL_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors installing %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors installing %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors installing %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"REMOVE_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors removing %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors removing %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors removing %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"UPDATE_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors updating %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors updating %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors updating %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"ACTIVATE_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors activating %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors activating %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors activating %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"DEACTIVATE_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors deactivating %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors deactivating %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors deactivating %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"ENABLE_AUTOUPDATE_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors enabling autoupdates %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors enabling autoupdates %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors enabling autoupdates %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}break;case"DISABLE_AUTOUPDATE_PLUGIN":switch(t){case"1 site n plugins":return d.default.translate("There were errors disabling autoupdates %(numberOfPlugins)d plugins on %(site)s.",{args:n});case"n sites 1 plugin":return d.default.translate("There were errors disabling autoupdates %(plugin)s on %(numberOfSites)d sites.",{args:n});case"n sites n plugins":return d.default.translate("There were errors disabling autoupdates %(numberOfPlugins)d plugins on %(numberOfSites)d sites.",{args:n})}}},additionalExplanation:function(e){switch(e){case"no_package":return d.default.translate("Plugin doesn't exist in the plugin repo.");case"resource_not_found":return d.default.translate("The site could not be reached.");case"download_failed":return d.default.translate("Download failed.");case"plugin_already_installed":return d.default.translate("Plugin is already installed.");case"incompatible_archive":return d.default.translate("Incompatible Archive. The package could not be installed.");case"empty_archive_pclzip":return d.default.translate("Empty archive.");case"disk_full_unzip_file":return d.default.translate("Could not copy files. You may have run out of disk space.");case"mkdir_failed_ziparchive":case"mkdir_failed_pclzip":return d.default.translate("Could not create directory.");case"copy_failed_pclzip":return d.default.translate("Could not copy file.");case"md5_mismatch":return d.default.translate("The checksum of the files don't match.");case"bad_request":return d.default.translate("Invalid Data provided.");case"fs_unavailable":return d.default.translate("Could not access filesystem.");case"fs_error":return d.default.translate("Filesystem error.");case"fs_no_root_dir":return d.default.translate("Unable to locate WordPress Root directory.");case"fs_no_content_dir":return d.default.translate("Unable to locate WordPress Content directory (wp-content).");case"fs_no_plugins_dir":return d.default.translate("Unable to locate WordPress Plugin directory.");case"fs_no_folder":return d.default.translate("Unable to locate needed folder.");case"no_files":return d.default.translate("The package contains no files.");case"folder_exists":return d.default.translate("Destination folder already exists.");case"mkdir_failed":return d.default.translate("Could not create directory.");case"files_not_writable":return d.default.translate("The update cannot be installed because we will be unable to copy some files. This is usually due to inconsistent file permissions.")}return null},singleErrorMessage:function(e,t,n){var s=this.additionalExplanation(n.error.error);switch(e){case"INSTALL_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error installing %(plugin)s on %(site)s, remote management is off.",{args:t});default:return s?(t.additionalExplanation=s,d.default.translate("Error installing %(plugin)s on %(site)s. %(additionalExplanation)s",{args:t})):d.default.translate("An error occurred while installing %(plugin)s on %(site)s.",{
args:t})}case"REMOVE_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error removing %(plugin)s on %(site)s, remote management is off.",{args:t});default:return d.default.translate("An error occurred while removing %(plugin)s on %(site)s.",{args:t})}case"UPDATE_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error updating %(plugin)s on %(site)s, remote management is off.",{args:t});default:return s?(t.additionalExplanation=s,d.default.translate("Error updating %(plugin)s on %(site)s. %(additionalExplanation)s",{args:t})):d.default.translate("An error occurred while updating %(plugin)s on %(site)s.",{args:t})}case"ACTIVATE_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error activating %(plugin)s on %(site)s, remote management is off.",{args:t});default:return d.default.translate("An error occurred while activating %(plugin)s on %(site)s.",{args:t})}case"DEACTIVATE_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error deactivating %(plugin)s on %(site)s, remote management is off.",{args:t});default:return d.default.translate("An error occurred while deactivating %(plugin)s on %(site)s.",{args:t})}case"ENABLE_AUTOUPDATE_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error enabling autoupdates for %(plugin)s on %(site)s, remote management is off.",{args:t});default:return d.default.translate("An error occurred while enabling autoupdates for %(plugin)s on %(site)s.",{args:t})}case"DISABLE_AUTOUPDATE_PLUGIN":switch(n.error.error){case"unauthorized_full_access":return d.default.translate("Error disabling autoupdates for %(plugin)s on %(site)s, remote management is off.",{args:t});default:return d.default.translate("An error occurred while disabling autoupdates for %(plugin)s on %(site)s.",{args:t})}}},getErrorButton:function(e){return e.length>1?null:(e=e.length?e[0]:e,"unauthorized_full_access"===e.error.error?d.default.translate("Turn On."):null)},getErrorHref:function(e){if(e.length>1)return null;if(e=e.length?e[0]:e,"unauthorized_full_access"!==e.error.error)return null;var t=e.site.options.admin_url+"admin.php?page=jetpack&configure=json-api";return(0,E.default)(e.site.options.jetpack_version,3.4)>=0&&(t=e.site.options.admin_url+"admin.php?page=jetpack&configure=manage"),t},getSuccessButton:function(e){return e.length>1?null:(e=e.length?e[0]:e,"ACTIVATE_PLUGIN"===e.action&&e.plugin.wp_admin_settings_page_url?d.default.translate("Setup"):null)},getSuccessHref:function(e){return e.length>1?null:(e=e.length?e[0]:e,"ACTIVATE_PLUGIN"===e.action||e.plugin.wp_admin_settings_page_url?e.plugin.wp_admin_settings_page_url:null)}},e.exports=t.default},"./client/lib/plugins/sanitize-section-content.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeSectionContent=void 0;var i=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),a=s(i),l=n("./node_modules/lodash/lodash.js"),r=n("./node_modules/valid-url/index.js"),o=s(r),u=function(e){switch(e){case"#text":case"a":case"b":case"blockquote":case"code":case"div":case"em":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"i":case"img":case"li":case"ol":case"p":case"span":case"strong":case"ul":return!0;default:return!1}},d=function(e,t){switch(e){case"a":return"href"===t;case"iframe":switch(t){case"class":case"type":case"height":case"width":case"src":return!0;default:return!1}case"img":switch(t){case"alt":case"src":return!0;default:return!1}default:return!1}},c=function(e){if("iframe"!==e.nodeName.toLowerCase())return!1;if("youtube-player"!==e.getAttribute("class"))return!1;if("text/html"!==e.getAttribute("type"))return!1;var t=document.createElement("a");return t.href=e.getAttribute("src"),o.default.isWebUri(e.getAttribute("src"))&&("youtube.com"===t.hostname||"www.youtube.com"===t.hostname)},p=function(e){var t=e.nodeName.toLocaleLowerCase();switch(t){case"h1":case"h2":return"h3";default:return null}};t.sanitizeSectionContent=function(e){for(var t=new DOMParser,n=t.parseFromString(e,"text/html"),s=n.createTreeWalker(n.body),i=[],r=[],f=function(){var e=s.currentNode,t=e.nodeName.toLowerCase(),n=c(e);if(!u(t)&&!n)return i.push(e),"continue";var a=p(e);a&&r.push([e,document.createElement(a)]),(0,l.filter)(e.attributes,function(e){var n=e.name,s=e.value;return!d(t,n)||("href"===n||"src"===n)&&!o.default.isWebUri(s)}).forEach(function(t){var n=t.name;return e.removeAttribute(n)}),"a"===t&&e.getAttribute("href")&&(e.setAttribute("target","_blank"),e.setAttribute("rel","external noopener noreferrer")),n&&e.setAttribute("src",e.getAttribute("src").replace("http://","https://"))};s.nextNode();){f()}return r.forEach(function(e){for(var t=(0,a.default)(e,2),n=t[0],s=t[1],i=void 0;i=n.firstChild;)s.appendChild(i);n.parentNode.replaceChild(s,n)}),i.forEach(function(e){var t=e.parentNode,n=void 0;try{for(;n=e.firstChild;)t.insertBefore(n,e);t.removeChild(e)}catch(e){}}),n.body.innerHTML}},"./client/lib/plugins/store.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=C.getNetworkSites(e);t&&t.forEach(y.default.fetchSitePlugins)}function a(e,t,n){r(e,t,n),i(e)}function l(e,t){i(e),D[e.ID]||(D[e.ID]={}),delete D[e.ID][t],N("removed plugin "+t)}function r(e,t,n){n.network&&(e.options.is_multi_site||(0,S.default)(e.options.jetpack_version,"3.7.0-dev","<"))||(D[e.ID]||(D[e.ID]={}),D[e.ID][t]||(D[e.ID][t]={slug:t}),n=x.default.normalizePluginData(n),D[e.ID][t]=(0,f.assign)({},D[e.ID][t],n),N("update to ",D[e.ID][t]))}function o(e,t){U[e.ID]=!1,D[e.ID]={},t.forEach(function(t){r(e,t.slug||t.id,t)})}Object.defineProperty(t,"__esModule",{value:!0});var u=n("./node_modules/babel-runtime/core-js/object/assign.js"),d=s(u),c=n("./node_modules/debug/browser.js"),p=s(c),f=n("./node_modules/lodash/lodash.js"),g=n("./client/dispatcher/index.js"),m=s(g),h=n("./client/lib/mixins/emitter/index.js"),_=s(h),b=n("./client/lib/sites-list/index.js"),v=s(b),E=n("./client/lib/plugins/actions.js"),y=s(E),j=n("./client/lib/version-compare/index.js"),S=s(j),P=n("./client/lib/plugins/utils.js"),x=s(P),k=n("./client/lib/site/jetpack.js"),I=s(k),w=n("./client/lib/site/index.js"),T=s(w),N=(0,p.default)("calypso:sites-plugins:sites-plugins-store"),C=(0,v.default)(),A=1e4,U={},D={},M={none:function(){return!1},all:function(){return!0},active:function(e){return e.sites.some(function(e){return e.plugin&&e.plugin.active})},inactive:function(e){return e.sites.some(function(e){return e.plugin&&!e.plugin.active})},updates:function(e){return e.sites.some(function(e){return e.plugin&&e.plugin.update&&e.canUpdateFiles})},isEqual:function(e,t){return t.slug===e}},L={getPlugin:function(e,t){var n={},s=!1;if(n.sites=[],e=(0,f.isArray)(e)?e:[e],e.forEach(function(e){var i=L.getSitePlugins(e);"undefined"!=typeof i&&(s=!0),i&&i.forEach(function(s){s.slug===t&&(n=(0,f.assign)(n,s),n.sites.push((0,f.assign)({},e,{plugin:s})))},this)}),s)return n},getPlugins:function(e,t){var n=!1,s={};return e=(0,f.isArray)(e)?e:[e],0===e.length?[]:(e.forEach(function(e){var t=L.getSitePlugins(e);void 0!==t&&(n=!0),t&&t.forEach(function(t){s[t.slug]||(s[t.slug]=(0,f.assign)({},t,{sites:[]})),s[t.slug].sites.push((0,f.assign)({},e,{plugin:t}))},this)}),n?(s=(0,f.sortBy)(s,function(e){return e.name}))?(s.filter&&t&&M[t]&&(s=s.filter(M[t])),s):[]:void 0)},getSitePlugins:function(e){return e?(D[e.ID]||U[e.ID]||(y.default.fetchSitePlugins(e),U[e.ID]=!0),D[e.ID]?(0,f.values)(D[e.ID]):D[e.ID]):[]},getSitePlugin:function(e,t){var n=this.getSitePlugins(e);return n?(0,f.find)(n,M.isEqual.bind(this,t)):n},getSites:function(e,t){var n,s,i=this.getPlugins(e);if(i)return(n=(0,f.find)(i,M.isEqual.bind(this,t)))?(s=(0,f.uniq)((0,f.compact)(n.sites.map(function(e){var t=e.jetpack?new I.default(C.getSite(e.ID)):new T.default(C.getSite(e.ID));if(t.plugin=e.plugin,e.visible)return t}))),s.sort(function(e,t){return e.title.toLowerCase()>t.title.toLowerCase()?1:-1})):null},isFetchingSite:function(e){return U[e.ID]},getNotInstalledSites:function(e,t){var n=this.getSites(e,t)||[];return e.filter(function(e){return!!e.visible&&(!(e.jetpack&&("function"==typeof e.isSecondaryNetworkSite?e.isSecondaryNetworkSite():e.isSecondaryNetworkSite))&&n.every(function(t){return t.slug!==e.slug}))})},emitChange:function(){this.emit("change")}};L.dispatchToken=m.default.register(function(e){var t=e.action;switch(N("register event Type",t.type,t),t.type){case"RECEIVE_PLUGINS":if(U[t.site.ID]=!1,t.error)return o(t.site,[]),void L.emitChange();o(t.site,t.data.plugins),L.emitChange();break;case"NOT_ALLOWED_TO_RECEIVE_PLUGINS":U[t.site.ID]=!1,D[t.site.ID]={},L.emitChange();break;case"AUTOUPDATE_PLUGIN":case"UPDATE_PLUGIN":L.emitChange();break;case"REMOVE_PLUGINS_UPDATE_INFO":r(t.site,t.plugin.slug,{update:null}),L.emitChange();break;case"RECEIVE_AUTOUPDATE_PLUGIN":case"RECEIVE_UPDATED_PLUGIN":t.error?(N("plugin updating error",t.error),r(t.site,t.plugin.slug,{update:t.plugin.update})):(r(t.site,t.plugin.slug,(0,d.default)({update:{recentlyUpdated:!0}},t.data)),C.onUpdatedPlugin(t.site),setTimeout(y.default.removePluginUpdateInfo.bind(y.default,t.site,t.plugin),A)),L.emitChange();break;case"RECEIVE_INSTALLED_PLUGIN":t.error?N("plugin installing error",t.error):a(t.site,t.plugin.slug,t.data),L.emitChange();break;case"RECEIVE_REMOVE_PLUGIN":t.error?(N("plugin removing error",t.error),r(t.site,t.plugin.slug,t.plugin)):l(t.site,t.plugin.slug),L.emitChange();break;case"ACTIVATE_PLUGIN":r(t.site,t.plugin.slug,{active:!0}),L.emitChange();break;case"DEACTIVATE_PLUGIN":r(t.site,t.plugin.slug,{active:!1}),L.emitChange();break;case"RECEIVE_ACTIVATED_PLUGIN":t.error&&"activation_error"!==t.error.error||(!t.data||!t.data.active)&&!t.error?(N("plugin activation error",t.error),r(t.site,t.plugin.slug,{active:!1})):r(t.site,t.plugin.slug,{active:!0}),L.emitChange();break;case"RECEIVE_DEACTIVATED_PLUGIN":t.error&&"deactivation_error"!==t.error.error?(N("plugin deactivation error",t.error),r(t.site,t.plugin.slug,{active:!0})):r(t.site,t.plugin.slug,{active:!1}),L.emitChange();break;case"ENABLE_AUTOUPDATE_PLUGIN":r(t.site,t.plugin.slug,{autoupdate:!0}),L.emitChange();break;case"DISABLE_AUTOUPDATE_PLUGIN":r(t.site,t.plugin.slug,{autoupdate:!1}),L.emitChange();break;case"RECEIVE_ENABLED_AUTOUPDATE_PLUGIN":t.error?(N("plugin activation error",t.error),r(t.site,t.plugin.slug,{autoupdate:!1})):r(t.site,t.plugin.slug,{autoupdate:!0}),L.emitChange();break;case"RECEIVE_DISABLED_AUTOUPDATE_PLUGIN":t.error?(N("plugin deactivation error",t.error),r(t.site,t.plugin.slug,{autoupdate:!0})):r(t.site,t.plugin.slug,{autoupdate:!1}),L.emitChange()}}),(0,_.default)(L),t.default=L,e.exports=t.default},"./client/lib/plugins/utils.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e&&t.site&&t.site.ID===e.ID}function a(e,t){return e&&t.plugin&&t.plugin.slug===e}function l(e,t,n){return!e&&!t||(!(!i(e,n)||!a(t,n))||(!(t||!i(e,n))||!(e||!a(t,n))))}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/get-iterator.js"),o=s(r),u=n("./node_modules/babel-runtime/core-js/object/keys.js"),d=s(u),c=n("./node_modules/babel-runtime/core-js/number/parse-int.js"),p=s(c),f=n("./node_modules/lodash/lodash.js"),g=n("./client/lib/formatting/index.js"),m=n("./client/lib/plugins/sanitize-section-content.js"),h={whiteListPluginData:function(e){return(0,f.pick)(e,"action_links","active","author","author_url","autoupdate","banners","compatibility","description","short_description","detailsFetched","downloaded","homepage","icons","id","last_updated","name","network","num_ratings","plugin_url","rating","ratings","sections","slug","support_URL","update","updating","version","wp_admin_settings_page_url")},extractAuthorName:function(e){return e?(0,g.decodeEntities)(e.replace(/(<([^>]+)>)/gi,"")):""},extractAuthorUrl:function(e){var t=/<a\s+(?:[^>]*?\s+)?href="([^"]*)"/.exec(e);return t&&t[1]?t[1]:""},extractScreenshots:function(e){var t=(0,g.parseHtml)(e),n=t&&t.querySelectorAll("li");if(!n)return null;var s=(0,f.map)(n,function(e){var t=e.querySelectorAll("img"),n=e.querySelectorAll("p");if(t[0]&&t[0].src)return{url:t[0].src,caption:n[0]?n[0].textContent:null}});return s=s.filter(function(e){return e}),s.length?s:null},normalizeCompatibilityList:function(e){function t(e){for(var t=e.split(".").map(function(e){return(0,p.default)(e,10)});t.length<3;)t.push(0);return t}var n=(0,f.sortBy)((0,d.default)(e).map(t),[0,1,2]);return n.map(function(e){return e.length&&0===e[e.length-1]&&e.pop(),e.join(".")})},sanitizeSectionContent:m.sanitizeSectionContent,normalizePluginData:function(e,t){return e=this.whiteListPluginData((0,f.assign)(e,t)),(0,f.transform)(e,function(t,n,s){switch(s){case"short_description":case"description":case"name":case"slug":t[s]=(0,g.decodeEntities)(n);break;case"author":t.author=n,t.author_name=h.extractAuthorName(n),t.author_url=e.author_url||h.extractAuthorUrl(n);break;case"sections":var i={},a=!0,l=!1,r=void 0;try{for(var u,c=(0,o.default)((0,d.default)(n));!(a=(u=c.next()).done);a=!0){var p=u.value;i[p]=h.sanitizeSectionContent(n[p])}}catch(e){l=!0,r=e}finally{try{!a&&c.return&&c.return()}finally{if(l)throw r}}t.sections=i,t.screenshots=i.screenshots?h.extractScreenshots(i.screenshots):null;break;case"num_ratings":case"rating":t[s]=parseInt(n,10);break;case"ratings":for(var f in n)n[f]=parseInt(n[f],10);t[s]=n;break;case"icons":n&&(t.icon=n["2x"]||n["1x"]||n.svg||n.default);break;case"homepage":case"plugin_url":t.plugin_url=n;break;case"compatibility":t[s]=h.normalizeCompatibilityList(n);break;default:t[s]=n}})},normalizePluginsList:function(e){return e?(0,f.map)(e,function(e){return h.normalizePluginData(e)}):[]},filterNotices:function(e,t,n){return(0,f.filter)(e,l.bind(this,t,n))}};t.default=h,e.exports=t.default},"./client/lib/plugins/wporg-data/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/debug/browser.js"),a=s(i),l=n("./client/dispatcher/index.js"),r=s(l),o=n("./client/lib/wporg/index.js"),u=s(o),d=n("./client/lib/plugins/utils.js"),c=s(d),p=n("./client/lib/plugins/wporg-data/curated.json"),f=s(p),g=n("./client/lib/impure-lodash/index.js"),m=(0,a.default)("calypso:wporg-data:actions"),h=24,_=0,b={},v=null,E={},y={},j={fetchPluginsList:(0,g.debounce)(function(e,t,n){if(E[e]=E[e]||_,t=t||_,"search"===e&&t===_&&(E[e]=_-1),this.canFetchList(e,t,n))return b[e]=!0,n&&(n=n.trim(),v=n),r.default.handleViewAction({type:"FETCH_WPORG_PLUGINS_LIST",action:"FETCH_WPORG_PLUGINS_LIST",page:t,category:e,searchTerm:n}),"featured"===e?void this.fetchCuratedList():void u.default.fetchPluginsList({pageSize:h,page:t,category:e,search:n},function(s,i){n&&n!==v||(m("plugin list fetched from .org",e,s,i),b[e]=null,E[e]=t,y[e]=i.info.pages,r.default.handleServerAction({type:"RECEIVE_WPORG_PLUGINS_LIST",action:"FETCH_WPORG_PLUGINS_LIST",page:t,category:e,data:i?c.default.normalizePluginsList(i.plugins):null,error:s}))})},25),fetchCuratedList:function(){m("curated plugin list",f.default),b.featured=null,E.featured=1,y.featured=1,r.default.handleServerAction({type:"RECEIVE_WPORG_PLUGINS_LIST",action:"FETCH_WPORG_PLUGINS_LIST",page:1,category:"featured",data:c.default.normalizePluginsList(f.default),error:null})},fetchNextCategoryPage:function(e,t){var n=_-1;if("undefined"!=typeof E[e]&&(n=E[e]),!y[e]||y[e]>=n+1)return this.fetchPluginsList(e,n+1,t)},canFetchList:function(e,t,n){return(!n||!b.search)&&!(b[e]||t<=E[e])},reset:function(){b={},E={},y={}}};t.default=j,e.exports=t.default},"./client/lib/plugins/wporg-data/curated.json":function(e,t){e.exports=[{name:"WooCommerce",author:'<a href="https://woocommerce.com">Automattic</a>',rating:92,icons:{"1x":"https://ps.w.org/woocommerce/assets/icon-128x128.png?rev=144083","2x":"https://ps.w.org/woocommerce/assets/icon-256x256.png?rev=144083"},slug:"woocommerce"},{name:"Yoast SEO",author:'<a href="https://yoast.com/">Team Yoast</a>',rating:96,icons:{"1x":"https://ps.w.org/wordpress-seo/assets/icon-128x128.png?rev=1550389","2x":"https://ps.w.org/wordpress-seo/assets/icon-256x256.png?rev=1550389"},slug:"wordpress-seo"},{name:"BuddyPress",author:'<a href="https://buddypress.org/">The BuddyPress Community</a>',rating:88,icons:{"1x":"https://ps.w.org/buddypress/assets/icon-128x128.png?rev=1309232","2x":"https://ps.w.org/buddypress/assets/icon-256x256.png?rev=1309232"},slug:"buddypress"},{name:"TinyMCE Advanced",author:'<a href="http://www.laptoptips.ca/">Andrew Ozz</a>',rating:92,icons:{"1x":"https://ps.w.org/tinymce-advanced/assets/icon-128x128.png?rev=971511","2x":"https://ps.w.org/tinymce-advanced/assets/icon-256x256.png?rev=971511"},slug:"tinymce-advanced"},{name:"Google Analytics for WordPress by MonsterInsights",author:'<a href="https://www.monsterinsights.com/">MonsterInsights</a>',rating:78,icons:{"1x":"https://ps.w.org/google-analytics-for-wordpress/assets/icon-128x128.png?rev=1598927","2x":"https://ps.w.org/google-analytics-for-wordpress/assets/icon-256x256.png?rev=1598927"},slug:"google-analytics-for-wordpress"},{name:"Page Builder by SiteOrigin",author:'<a href="https://siteorigin.com">SiteOrigin</a>',rating:98,icons:{"1x":"https://ps.w.org/siteorigin-panels/assets/icon-128x128.png?rev=1044755","2x":"https://ps.w.org/siteorigin-panels/assets/icon-256x256.png?rev=1044755"},slug:"siteorigin-panels"}]},"./client/lib/plugins/wporg-data/list-store.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){g[e]=g[e]||[],g[e]=g[e].concat((0,l.clone)(n))}function a(e,t,n){t&&t!==_?i(e,t,n):(f[e]=(0,l.clone)(n.slice(0,6)),g[e]=(0,l.clone)(n))}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/lodash/lodash.js"),r=n("./client/dispatcher/index.js"),o=s(r),u=n("./client/lib/mixins/emitter/index.js"),d=s(u),c=n("./client/lib/plugins/wporg-data/actions.js"),p=s(c),f={},g={},m={},h=null,_=1,b={getShortList:function(e){return f[e]||m[e]||p.default.fetchPluginsList(e,_),{fetching:!!m[e],list:f[e]||[]}},getFullList:function(e){return g[e]||p.default.fetchPluginsList(e,_),{fetching:m[e]!==!1,list:g[e]||[]}},getSearchList:function(e){var t=m.search!==!1;if(e)return e=e.trim(),h!==e&&(g.search=null,h=e,p.default.fetchPluginsList("search",0,e),t=!0),{fetching:t,list:g.search||[]}},emitChange:function(){this.emit("change")}};b.dispatchToken=o.default.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_WPORG_PLUGINS_LIST":t.data&&(a(t.category,t.page,t.data),m[t.category]=!1,b.emitChange());break;case"FETCH_WPORG_PLUGINS_LIST":t.category&&(m[t.category]=!0,"search"===t.category&&(h=t.searchTerm,0===t.page&&a("search",0,[])),b.emitChange());break;case"RESET_WPORG_PLUGINS_LIST":f={},g={},m={},h=null}}),(0,d.default)(b),t.default=b,e.exports=t.default},"./client/lib/safe-protocol-url/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=["host","hash","search","path"];return null===e||""===e||"undefined"==typeof e?null:(t=l.default.parse(e),/^\/[^\/]/.test(e)?e:"http:"===t.protocol||"https:"===t.protocol?e:l.default.format((0,i.assign)((0,i.pick)(t,n),{protocol:"http"})))};var i=n("./node_modules/lodash/lodash.js"),a=n("./node_modules/url/url.js"),l=s(a);e.exports=t.default},"./client/lib/url/support.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="https://support.wordpress.com";t.default={ACCOUNT_RECOVERY:s+"/account-recovery",ADDING_GOOGLE_APPS_TO_YOUR_SITE:s+"/adding-g-suite-to-your-site",ADDING_USERS:s+"/adding-users",ALL_ABOUT_DOMAINS:s+"/all-about-domains",AUTO_RENEWAL:s+"/auto-renewal",BANDPAGE_WIDGET:s+"/widgets/bandpage-widget",CATEGORIES_VS_TAGS:s+"/posts/categories-vs-tags",CHANGE_NAME_SERVERS:s+"/domains/change-name-servers",CHANGE_NAME_SERVERS_FINDING_OUT_NEW_NS:s+"/domains/change-name-servers/#finding-out-your-new-name-server",COMMENTS:s+"/category/comments",COMMUNITY_TRANSLATOR:s+"/community-translator",COMPLETING_GOOGLE_APPS_SIGNUP:s+"/adding-g-suite-to-your-site/#completing-sign-up",CONNECT:s+"/connect",CONTACT:s+"/contact",CALYPSO_CONTACT:"/help/contact",CALYPSO_COURSES:"/help/courses",CREATE:s+"/create",CUSTOM_DNS:s+"/domains/custom-dns",DESIGNATED_AGENT:s+"/designated-agent/",DOMAIN_HELPER_PREFIX:s+"/domain-helper/?host=",DOMAIN_REGISTRATION_AGREEMENTS:s+"/domain-registration-agreements/",DOMAINS:s+"/domains",EMAIL_FORWARDING:s+"/email-forwarding",EMAIL_VALIDATION_AND_VERIFICATION:s+"/domains/register-domain/#email-validation-and-verification",EMPTY_SITE:s+"/empty-site/",ENABLE_DISABLE_COMMENTS:s+"/enable-disable-comments",EVENTBRITE:s+"/eventbrite",EVENTBRITE_EVENT_CALENDARLISTING_WIDGET:s+"/widgets/eventbrite-event-calendarlisting-widget",EXPORT:s+"/export",FACEBOOK_EMBEDS:s+"/facebook-integration/facebook-embeds",FACEBOOK_LIKE_BOX:s+"/facebook-integration/#facebook-like-box",FOLLOWERS:s+"/followers",GETTING_MORE_VIEWS_AND_TRAFFIC:s+"/getting-more-views-and-traffic",GOOGLE_ANALYTICS:s+"/google-analytics",GOOGLE_APPS_LEARNING_CENTER:"https://gsuite.google.com/learning-center/",GOOGLE_PLUS_EMBEDS:s+"/google-plus-embeds",GRAVATAR_HOVERCARDS:s+"/gravatar-hovercards",GUIDED_TRANSFER:s+"/guided-transfer",IMPORT:s+"/import",INSTAGRAM_WIDGET:s+"/instagram/instagram-widget",JETPACK_SUPPORT:"https://jetpack.com/support/",JETPACK_CONTACT_SUPPORT:"https://jetpack.com/contact-support/?rel=support",JETPACK_SERVICE_VAULTPRESS:"https://help.vaultpress.com/",JETPACK_SERVICE_AKISMET:"https://akismet.com/support/",JETPACK_SERVICE_POLLDADDY:"https://support.polldaddy.com/",LIVE_CHAT:s+"/live-chat",MANAGE_PURCHASES:s+"/manage-purchases",MAP_EXISTING_DOMAIN:s+"/domains/map-existing-domain",MAP_EXISTING_DOMAIN_UPDATE_DNS:s+"/domains/map-existing-domain#2-ask-your-domain-provider-to-update-your-dns-settings",MAP_SUBDOMAIN:s+"/domains/map-subdomain",MEDIA:s+"/media",PUBLICIZE:s+"/publicize",PUBLIC_VS_PRIVATE:s+"/domains/register-domain/#public-versus-private",REFUNDS:s+"/refunds",REGISTER_DOMAIN:s+"/domains/register-domain/",SEO_TAGS:s+"/getting-more-views-and-traffic/#use-appropriate-tags",SETTING_PRIMARY_DOMAIN:s+"/domains/#setting-the-primary-domain",SETTING_UP_PREMIUM_SERVICES:s+"/setting-up-premium-services",STRONG_PASSWORD:s+"/selecting-a-strong-password/",SHARING:s+"/sharing",START:s+"/start",STATS_CLICKS:s+"/stats/#clicks",STATS_REFERRERS:s+"/stats/#referrers",STATS_SEO_TERMS:s+"/stats/#search-engine-terms",STATS_SPAM_REFERRER:s+"/stats/#marking-spam-referrers",STATS_TOP_POSTS_PAGES:s+"/stats/#top-posts-pages",STATS_VIEWS_BY_COUNTRY:s+"/stats/#views-by-country",SUPPORT_ROOT:s+"/",TRANSFER_DOMAIN_REGISTRATION:s+"/transfer-domain-registration",TWITTER_TIMELINE_WIDGET:s+"/widgets/twitter-timeline-widget",UPDATE_CONTACT_INFORMATION:s+"/update-contact-information/",UPDATE_NAMESERVERS:s+"/domains/domain-management/#update-nameservers",USERS:s+"/category/users",USER_ROLES:s+"/user-roles",VIDEOS:s+"/videos",WPCC:s+"/wpcc-faq"},e.exports=t.default},"./client/lib/wporg/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(){var e,t;return e=o.default.getLocaleSlug(),t=(0,c.find)((0,m.default)("languages"),{langSlug:e}).wpLocale,""===t&&(t=e),t}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/debug/browser.js"),l=s(a),r=n("./node_modules/i18n-calypso/index.js"),o=s(r),u=n("./node_modules/superagent/lib/client.js"),d=s(u),c=n("./node_modules/lodash/lodash.js"),p=n("./client/lib/wporg/jsonp.js"),f=s(p),g=n("./client/config/index.js"),m=s(g),h=(0,l.default)("wporg"),_="https://api.wordpress.org/plugins/info/1.1/?action=query_plugins",b=24,v="all",E=1,y="https://api.wordpress.org/themes/info/1.1/";t.default={fetchPluginInformation:function(e,t){var n,s={fields:"icons,banners,compatibility,ratings,-contributors",locale:i()};e=e.replace(new RegExp(".php$"),""),n="https://api.wordpress.org/plugins/info/1.0/"+e+".jsonp",(0,f.default)(n,s,function(e,n){return e?(h("error downloading plugin details from .org: %s",e),void t(e,null)):n&&n.slug?void t(null,n):(h("unrecognized format fetching plugin details from .org: %s",n),void t(new Error("Unrecognized response format"),null))})},fetchPluginsList:function(e,t){var n;e.page=e.page||E,e.pageSize=e.pageSize||b,e.category=e.category||v,e.search=e.search,n="request[page]="+e.page+"&request[per_page]="+e.pageSize+"&request[fields][icons]=1&request[fields][banners]=1&request[fields][compatibility]=1&request[fields][tested]=0&request[fields][requires]=0&request[fields][sections]=0",n+=e.search?"&request[search]="+e.search:"&request[browse]="+e.category,d.default.post(_).set("Accept","application/json").send(encodeURI(n)).end(function(e,n){t(e,n.body)})},fetchThemeInformation:function(e){var t={action:"theme_information","request[fields][extended_author]":!0,"request[slug]":e};return d.default.get(y).set("Accept","application/json").query(t).then(function(e){var t=e.body;return t})},fetchThemesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,n=e.page,s=e.number,i={action:"query_themes","request[fields][extended_author]":!0,"request[search]":t,"request[page]":n,"request[per_page]:":s};return d.default.get(y).set("Accept","application/json").query(i).then(function(e){var t=e.body;return t})}},e.exports=t.default},"./client/lib/wporg/jsonp.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(){}function a(e,t,n){function s(){l.parentNode&&l.parentNode.removeChild(l),window[o]=i,r&&clearTimeout(r)}function a(){window[o]&&s()}var l,r,o,p="__jp",f=6e4,g=encodeURIComponent,m=document.getElementsByTagName("script")[0]||document.head;return o=p+c++,f&&(r=setTimeout(function(){s(),n&&n(new Error("Timeout"))},f)),window[o]=function(e){d("jsonp got",e),s(),n&&n(null,e)},e+="="+g(o)+"?"+u.default.stringify(t),d('jsonp req "%s"',e),l=document.createElement("script"),l.src=e,m.parentNode.insertBefore(l,m),a}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/debug/browser.js"),r=s(l),o=n("./node_modules/qs/lib/index.js"),u=s(o),d=(0,r.default)("jsonp");t.default=a;var c=0;e.exports=t.default},"./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentNavigationTab=void 0;var i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/classnames/index.js"),r=s(l),o=t.CommentNavigationTab=function(e){var t=e.children,n=e.className,s=e.onClick;return a.default.createElement("div",{className:(0,r.default)("comment-navigation__tab",n),onClick:s},t)};t.default=o},"./client/my-sites/no-results/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"no-results"},this.props.image?m.default.createElement("img",{className:"no-results__img",src:this.props.image}):null,m.default.createElement("span",null,this.props.text))}}]),t}(m.default.Component);h.defaultProps={text:"No results",image:!1},t.default=h,e.exports=t.default},"./client/my-sites/plugins/controller.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=decodeURIComponent(e.params.plugin),s=(0,F.getSelectedSite)(e.store.getState()),i="Plugins",a="plugins/:plugin";s&&(a+="/:site"),x.default.pageView.record(a,i+" > Plugin Details"),window.scrollTo(0,0);var l=void 0;H?l=H:e.prevPath&&(l=y.default.sectionify(e.prevPath)),(0,R.renderWithReduxStore)(h.default.createElement(U.default,{path:e.path,prevQuerystring:J,prevPath:l,pluginSlug:n,siteUrl:t}),document.getElementById("primary"),e.store)}function a(e,t){var n=e.pathname;return t&&t.slug&&(n=n.replace("/"+t.slug,"")),n}function l(e,t){var n=e.query.s,s=(0,F.getSelectedSite)(e.store.getState());H=a(e,s),J=e.querystring,(0,R.renderWithReduxStore)(h.default.createElement(C.default,{path:t,context:e,filter:e.params.pluginFilter,search:n}),"primary",e.store),n&&x.default.ga.recordEvent("Plugins","Search","Search term",n);var i="Plugins"+(e.params.pluginFilter?" "+(0,v.capitalize)(e.params.pluginFilter):""),l="plugins/manage";s&&(l+="/:site"),x.default.pageView.record(l,i)}function r(e){return e.params.plugin&&(0,v.includes)(q,e.params.plugin)?e.params.plugin:e.params.category}function o(e){var t=e.query.s,n=(0,F.getSelectedSite)(e.store.getState()),s=r(e);H=a(e,n),J=e.querystring;var i="Plugin Browser"+(s?": "+s:""),l="plugins"+(s?"/"+s:"");n&&(l+="/:site"),x.default.pageView.record(l,i),(0,R.renderWithReduxStore)(h.default.createElement(M.default,{path:e.path,category:s,search:t}),document.getElementById("primary"),e.store)}function u(e){var t=e.store.getState(),n=(0,F.getSelectedSite)(t),s=decodeURIComponent(e.params.plugin);(0,R.renderWithReduxStore)(h.default.createElement(T.default,{siteSlug:n.slug,pluginSlug:s}),document.getElementById("primary"),e.store)}function d(e){var t=e.store.getState(),n=(0,F.getSection)(t),s=(0,F.getSelectedSite)(t);e.store.dispatch((0,V.setSection)((0,p.default)({},n,{secondary:!1}))),g.default.unmountComponentAtNode(document.getElementById("secondary"));var i="plugins/setup";s&&(i+="/:site"),x.default.pageView.record(i,"Jetpack Plugins Setup"),(0,R.renderWithReduxStore)(h.default.createElement(I.default,{whitelist:e.query.only||!1}),document.getElementById("primary"),e.store)}Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/babel-runtime/core-js/object/assign.js"),p=s(c),f=n("./node_modules/react-dom/index.js"),g=s(f),m=n("./node_modules/react/react.js"),h=s(m),_=n("./node_modules/page/index.js"),b=s(_),v=n("./node_modules/lodash/lodash.js"),E=n("./client/lib/route/index.js"),y=s(E),j=n("./client/notices/index.js"),S=s(j),P=n("./client/lib/analytics/index.js"),x=s(P),k=n("./client/my-sites/plugins/jetpack-plugins-setup/index.jsx"),I=s(k),w=n("./client/my-sites/plugins/plugin-eligibility/index.jsx"),T=s(w),N=n("./client/my-sites/plugins/main.jsx"),C=s(N),A=n("./client/my-sites/plugins/plugin.jsx"),U=s(A),D=n("./client/my-sites/plugins/plugins-browser/index.jsx"),M=s(D),L=n("./client/my-sites/plugins/plugin-upload/index.jsx"),O=s(L),R=n("./client/lib/react-helpers/index.js"),V=n("./client/state/ui/actions.js"),F=n("./client/state/ui/selectors.js"),G=n("./client/state/selectors/has-jetpack-sites.js"),B=s(G),W=n("./client/state/selectors/get-selected-or-all-sites-with-plugins.js"),z=s(W),q=["new","popular","featured"],H=void 0,J=void 0,Y={plugins:function(e,t,n){var s=y.default.getSiteFragment(t.path),i=y.default.sectionify(t.path).replace("/"+e,"");return s||(0,B.default)(t.store.getState())?(t.params.pluginFilter=e,S.default.clearNotices("notices"),void l(t,i)):n()},plugin:function(e){var t=y.default.getSiteFragment(e.path);S.default.clearNotices("notices"),i(e,t)},maybeBrowsePlugins:function(e,t){var n=y.default.getSiteFragment(e.path),s=e.params.plugin;return s&&(n&&s===n.toString()||(0,v.includes)(q,s))?void Y.browsePlugins(e):void t()},browsePlugins:function(e){
o(e)},upload:function(e){(0,R.renderWithReduxStore)(h.default.createElement(O.default,null),document.getElementById("primary"),e.store)},jetpackCanUpdate:function(e,t,n){var s=(0,z.default)(t.store.getState()),i=!1;return"updates"===e&&s.length&&(i=!(0,v.some)(s,function(e){return e&&e.jetpack&&e.canUpdateFiles}))?t.params&&t.params.site_id?void b.default.redirect("/plugins/manage/"+t.params.site_id):void b.default.redirect("/plugins/manage"):void n()},setupPlugins:function(e){d(e)},eligibility:function(e){u(e)},resetHistory:function(){H=null,J=null}};t.default=Y,e.exports=t.default},"./client/my-sites/plugins/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){o.default.isEnabled("manage/plugins/setup")&&((0,a.default)("/plugins/setup",l.siteSelection,d.default.setupPlugins),(0,a.default)("/plugins/setup/:site",l.siteSelection,d.default.setupPlugins)),o.default.isEnabled("manage/plugins")&&((0,a.default)("/plugins/wpcom-masterbar-redirect/:site",function(e){e.store.dispatch((0,c.recordTracksEvent)("calypso_wpcom_masterbar_plugins_view_click")),a.default.redirect("/plugins/"+e.params.site)}),(0,a.default)("/plugins/browse/wpcom-masterbar-redirect/:site",function(e){e.store.dispatch((0,c.recordTracksEvent)("calypso_wpcom_masterbar_plugins_add_click")),a.default.redirect("/plugins/browse/"+e.params.site)}),(0,a.default)("/plugins/manage/wpcom-masterbar-redirect/:site",function(e){e.store.dispatch((0,c.recordTracksEvent)("calypso_wpcom_masterbar_plugins_manage_click")),a.default.redirect("/plugins/manage/"+e.params.site)}),(0,a.default)("/plugins/browse/:category/:site",function(e){var t=e.params,n=t.category,s=t.site;a.default.redirect("/plugins/"+n+"/"+s)}),(0,a.default)("/plugins/browse/:siteOrCategory?",function(e){var t=e.params.siteOrCategory;a.default.redirect("/plugins"+(t?"/"+t:""))}),o.default.isEnabled("manage/plugins/upload")&&((0,a.default)("/plugins/upload",l.sites),(0,a.default)("/plugins/upload/:site_id",l.siteSelection,l.navigation,d.default.upload)),(0,a.default)("/plugins",l.siteSelection,l.navigation,d.default.browsePlugins),(0,a.default)("/plugins/manage/:site?",l.siteSelection,l.navigation,f("/plugins"),d.default.plugins.bind(null,"all"),l.sites),["active","inactive","updates"].forEach(function(e){return(0,a.default)("/plugins/"+e+"/:site_id?",l.siteSelection,l.navigation,d.default.jetpackCanUpdate.bind(null,e),d.default.plugins.bind(null,e),l.sites)}),(0,a.default)("/plugins/:plugin/:site_id?",l.siteSelection,l.navigation,d.default.maybeBrowsePlugins,d.default.plugin),(0,a.default)("/plugins/:plugin/eligibility/:site_id",l.siteSelection,l.navigation,d.default.eligibility),a.default.exit("/plugins/*",function(e,t){0!==a.default.current.indexOf("/plugins/")&&d.default.resetHistory(),t()}))};var i=n("./node_modules/page/index.js"),a=s(i),l=n("./client/my-sites/controller.js"),r=n("./client/config/index.js"),o=s(r),u=n("./client/my-sites/plugins/controller.js"),d=s(u),c=n("./client/state/analytics/actions.js"),p=n("./client/state/ui/selectors.js"),f=function(e){return function(t,n){var s=(0,p.getSelectedSite)(t.store.getState());s&&!s.jetpack&&a.default.redirect(e+"/"+s.slug),n()}};e.exports=t.default},"./client/my-sites/plugins/jetpack-plugins-setup/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/assign.js"),r=s(l),o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(g),h=n("./node_modules/babel-runtime/helpers/inherits.js"),_=s(h),b=n("./node_modules/react/react.js"),v=s(b),E=n("./node_modules/page/index.js"),y=s(E),j=n("./node_modules/redux/lib/index.js"),S=n("./node_modules/react-redux/es/index.js"),P=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/i18n-calypso/index.js"),k=n("./client/components/card/index.jsx"),I=s(k),w=n("./client/components/card/compact.jsx"),T=s(w),N=n("./client/components/feature-example/index.jsx"),C=s(N),A=n("./client/components/button/index.jsx"),U=s(A),D=n("./client/components/notice/index.jsx"),M=s(D),L=n("./client/components/notice/notice-action.jsx"),O=s(L),R=n("./client/components/spinner/index.jsx"),V=s(R),F=n("./client/components/data/query-plugin-keys/index.jsx"),G=s(F),B=n("./client/my-sites/plugins/plugin-icon/plugin-icon.jsx"),W=s(B),z=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),q=s(z),H=n("./client/my-sites/plugins/plugin-item/plugin-item.jsx"),J=s(H),Y=n("./client/lib/analytics/index.js"),Q=s(Y),Z=n("./client/lib/url/support.js"),K=s(Z),X=n("./client/lib/site/utils.js"),$=s(X),ee=n("./client/state/ui/selectors.js"),te=n("./client/state/sites/selectors.js"),ne=n("./client/state/selectors/has-initialized-sites.js"),se=s(ne),ie=n("./client/state/plugins/wporg/selectors.js"),ae=n("./client/state/plugins/wporg/actions.js"),le=n("./client/state/sites/actions.js"),re=n("./client/state/plugins/premium/actions.js"),oe=n("./client/state/plugins/premium/selectors.js"),ue=n("./client/lib/plugins/store.js"),de=s(ue),ce={vaultpress:K.default.JETPACK_SERVICE_VAULTPRESS,akismet:K.default.JETPACK_SERVICE_AKISMET},pe=function(e){function t(){var e,n,s,i;(0,c.default)(this,t);for(var l=arguments.length,o=Array(l),d=0;d<l;d++)o[d]=arguments[d];return n=s=(0,m.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(o))),s.sentTracks=!1,s.trackConfigFinished=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.sentTracks||Q.default.tracks.recordEvent(e,t),s.sentTracks=!0},s.trackManualInstall=function(){Q.default.tracks.recordEvent("calypso_plans_autoconfig_click_manual_error")},s.trackManagePlans=function(){Q.default.tracks.recordEvent("calypso_plans_autoconfig_click_manage_plans")},s.trackContactSupport=function(){Q.default.tracks.recordEvent("calypso_plans_autoconfig_click_contact_support")},s.addWporgDataToPlugins=function(e){return e.map(function(e){var t=(0,ie.getPlugin)(s.props.wporg,e.slug);return t||s.props.fetchPluginData(e.slug),(0,r.default)({},e,t)})},s.allPluginsHaveWporgData=function(){var e=s.addWporgDataToPlugins(s.props.plugins);return e.length===(0,P.filter)(e,{wporg:!0}).length},s.warnIfNotFinished=function(e){var t=s.props.selectedSite;if(t&&t.jetpack&&t.canUpdateFiles&&t.canManage&&!s.props.isFinished){Q.default.tracks.recordEvent("calypso_plans_autoconfig_user_interrupt");var n=s.props.translate("We haven't finished installing your plugins.");return(e||window.event).returnValue=n,n}},s.startNextPlugin=function(e){if(!s.props.isInstalling){var t=s.props.installPlugin,n=s.props.selectedSite;e=(0,r.default)({},e,(0,ie.getPlugin)(s.props.wporg,e.slug));var i=function s(){var i=de.default.getSitePlugin(n,e.slug);return!i&&de.default.isFetchingSite(n)?setTimeout(s,500):(e=(0,r.default)({id:e.slug},e,i),void t(e,n))};i()}},s.renderNoJetpackSiteSelected=function(){return s.trackConfigFinished("calypso_plans_autoconfig_error_wordpresscom",{referrer:document.referrer}),v.default.createElement(q.default,{siteId:s.props.siteId,title:s.props.translate("Oh no! You need to select a jetpack site to be able to setup your plan"),illustration:"/calypso/images/jetpack/jetpack-manage.svg"})},s.renderCantInstallPlugins=function(){var e=s.props.translate,t=s.props.selectedSite,n=$.default.getSiteFileModDisableReason(t,"modifyFiles"),i=void 0;return n&&n.length>0?(i=n[0],s.trackConfigFinished("calypso_plans_autoconfig_error_filemod",{error:i})):t.hasMinimumJetpackVersion?t.isMainNetworkSite?t.options.is_multi_network&&(i=e("We can't install plugins on multi-network sites."),s.trackConfigFinished("calypso_plans_autoconfig_error_multinetwork")):(i=e("We can't install plugins on multisite sites."),s.trackConfigFinished("calypso_plans_autoconfig_error_multisite")):(i=e("You need to update your version of Jetpack."),s.trackConfigFinished("calypso_plans_autoconfig_error_jpversion",{jetpack_version:t.options.jetpack_version})),v.default.createElement(q.default,{siteId:s.props.siteId,action:e("Contact Support"),actionURL:K.default.JETPACK_CONTACT_SUPPORT,title:e("Oh no! We can't install plugins on this site."),line:i,illustration:"/calypso/images/jetpack/jetpack-manage.svg"})},s.renderNoJetpackPlan=function(){return v.default.createElement("div",null,v.default.createElement("h1",{className:"jetpack-plugins-setup__header"},s.props.translate("Nothing to do hereâ¦")))},s.renderPluginsPlaceholders=function(){var e=s.props.whitelist?1:2;return(0,P.range)(e).map(function(e){return v.default.createElement(J.default,{key:"placeholder-"+e})})},s.renderPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=s.props.selectedSite;if(s.props.isRequesting||de.default.isFetchingSite(t))return s.renderPluginsPlaceholders();var n=s.addWporgDataToPlugins(s.props.plugins);return n.map(function(t,n){var i=(0,r.default)({},t,(0,ie.getPlugin)(s.props.wporg,t.slug));return v.default.createElement(T.default,{className:"plugin-item",key:n},v.default.createElement("span",{className:"plugin-item__link"},v.default.createElement(W.default,{image:i.icon}),v.default.createElement("div",{className:"plugin-item__info"},v.default.createElement("div",{className:"plugin-item__title"},i.name),e?v.default.createElement(M.default,{key:0,isCompact:!0,showDismiss:!1,icon:"plugins",text:s.props.translate("Waiting to install")}):s.renderStatus(i))),s.renderActions(i))})},s.renderStatus=function(e){if(e.error)return s.renderStatusError(e);if("done"===e.status)return v.default.createElement("div",{className:"plugin-item__finished"},s.getStatusText(e));var t={isCompact:!0,status:"is-info",showDismiss:!1,icon:"plugins"};return v.default.createElement(M.default,(0,a.default)({},t,{text:s.getStatusText(e)}))},s.getStatusText=function(e){var t=s.props.translate;switch(e.status){case"done":return t("Successfully installed & configured.");case"activate":case"configure":return t("Almost done");case"install":return t("Workingâ¦");case"wait":default:return t("Waiting to install")}},s.renderStatusError=function(e){var t=s.props.translate;if("already_registered"===e.error.code)return v.default.createElement(M.default,{showDismiss:!1,isCompact:!0,status:"is-info",text:t("This plugin is already registered with another plan.")},v.default.createElement(O.default,{key:"notice_action",href:"/me/purchases",onClick:s.trackManagePlans},t("Manage Plans")));var n={isCompact:!0,status:"is-error",showDismiss:!1};switch(n.children=v.default.createElement(O.default,{key:"notice_action",href:ce[e.slug],onClick:s.trackManualInstall},t("Manual Installation")),e.status){case"install":return v.default.createElement(M.default,(0,a.default)({},n,{text:t("An error occurred when installing %(plugin)s.",{args:{plugin:e.name}})}));case"activate":return v.default.createElement(M.default,(0,a.default)({},n,{text:t("An error occurred when activating %(plugin)s.",{args:{plugin:e.name}})}));case"configure":return v.default.createElement(M.default,(0,a.default)({},n,{text:t("An error occurred when configuring %(plugin)s.",{args:{plugin:e.name}})}));default:var i=(0,P.get)(e,"error.message","").replace(/<.[^<>]*?>/g,"");return v.default.createElement(M.default,(0,a.default)({},n,{text:i||t("An error occured.")}))}},s.renderActions=function(e){return"wait"===e.status?null:null!==e.error?null:"done"!==e.status?v.default.createElement("div",{className:"plugin-item__actions"},v.default.createElement(V.default,null)):null},s.renderErrorMessage=function(e){var t=void 0,n=s.props.translate,i=s.addWporgDataToPlugins(e),a={};return i.map(function(e){a[e.slug]=e.error.name+": "+e.error.message}),s.trackConfigFinished("calypso_plans_autoconfig_error_plugin",a),t=1===i.length?n("There was an issue installing %(plugin)s. It may be possible to fix this by {{a}}manually installing{{/a}} the plugin.",{args:{plugin:i[0].name},components:{a:v.default.createElement("a",{href:K.default.JETPACK_SUPPORT,onClick:s.trackManualInstall})}}):n("There were some issues installing your plugins. It may be possible to fix this by {{a}}manually installing{{/a}} the plugins.",{components:{a:v.default.createElement("a",{href:K.default.JETPACK_SUPPORT,onClick:s.trackManualInstall})}}),v.default.createElement(M.default,{status:"is-error",text:t,showDismiss:!1},v.default.createElement(O.default,{href:K.default.JETPACK_CONTACT_SUPPORT,onClick:s.trackContactSupport},n("Contact Support")))},s.renderSuccess=function(){var e=s.props.translate,t=s.props.selectedSite;if(!s.props.hasRequested||!s.props.isFinished)return null;var n=(0,P.filter)(s.props.plugins,function(e){var t=(0,P.get)(e,"error.code",null);return t&&"already_registered"!==t});if(n.length)return s.renderErrorMessage(n);s.trackConfigFinished("calypso_plans_autoconfig_success");var i=e("We've set up your plugin, your site is powered up!","We've set up your plugins, your site is powered up!",{count:s.props.plugins.length});return v.default.createElement(M.default,{status:"is-success",text:i,showDismiss:!1},v.default.createElement(O.default,{href:"/plans/my-plan/"+t.slug},e("Continue")))},s.renderPlaceholder=function(){var e=s.props.translate;return v.default.createElement("div",{className:"jetpack-plugins-setup"},v.default.createElement("h1",{className:"jetpack-plugins-setup__header is-placeholder"},e("Setting up your plan")),v.default.createElement("p",{className:"jetpack-plugins-setup__description is-placeholder"},e("We need to install a few plugins for you. It won't take long!")),s.renderPluginsPlaceholders())},i=n,(0,m.default)(s,i)}return(0,_.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",this.warnIfNotFinished),this.props.requestSites(),y.default.exit("/plugins/setup/*",function(t,n){var s=e.warnIfNotFinished({});if(!s)return n();if(window.confirm(s))n();else{var i=t.canonicalPath;setTimeout(function(){y.default.replace(i,null,!1,!1)},0)}})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.warnIfNotFinished)}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedSite;e&&e.jetpack&&e.canUpdateFiles&&e.canManage&&this.allPluginsHaveWporgData()&&!this.props.isInstalling&&this.props.nextPlugin&&this.startNextPlugin(this.props.nextPlugin)}},{key:"render",value:function(){var e=this.props,t=e.sitesInitialized,n=e.translate,s=this.props.selectedSite;if(!s&&(this.props.isRequestingSites||!t))return this.renderPlaceholder();if(!s||!s.jetpack)return this.renderNoJetpackSiteSelected();if(!s.canUpdateFiles)return this.renderCantInstallPlugins();if(s&&!this.props.isRequestingSites&&!this.props.isRequesting&&!de.default.isFetchingSite(s)&&!this.props.plugins.length)return this.renderNoJetpackPlan();var i=void 0;if(s&&!s.canManage){var a=this.props.remoteManagementUrl+"&section=plugins-setup";i=v.default.createElement(I.default,{className:"jetpack-plugins-setup__need-manage"},v.default.createElement("p",null,n("{{strong}}Jetpack Manage must be enabled for us to auto-configure your %(plan)s plan.{{/strong}} This will allow WordPress.com to communicate with your site and auto-configure the features unlocked with your new plan. Or you can opt out.",{args:{plan:s.plan.product_name_short},components:{strong:v.default.createElement("strong",null)}})),v.default.createElement(U.default,{primary:!0,href:a},n("Enable Manage")),v.default.createElement(U.default,{href:K.default.JETPACK_SUPPORT},n("Manual Installation")))}return v.default.createElement("div",{className:"jetpack-plugins-setup"},v.default.createElement(G.default,{siteId:s.ID}),v.default.createElement("h1",{className:"jetpack-plugins-setup__header"},n("Setting up your %(plan)s Plan",{args:{plan:s.plan.product_name_short}})),v.default.createElement("p",{className:"jetpack-plugins-setup__description"},n("We need to install a few plugins for you. It won't take long!")),i,!i&&this.renderSuccess(),i?v.default.createElement(C.default,null,this.renderPlugins(!0)):this.renderPlugins(!1))}}]),t}(v.default.Component);pe.displayName="PlanSetup",t.default=(0,S.connect)(function(e,t){var n=(0,ee.getSelectedSiteId)(e),s=(0,ee.getSelectedSite)(e),i=t.whitelist||!1;return{wporg:e.plugins.wporg.items,isRequesting:(0,oe.isRequesting)(e,n),hasRequested:(0,oe.hasRequested)(e,n),isInstalling:(0,oe.isInstalling)(e,n,i),isFinished:(0,oe.isFinished)(e,n,i),plugins:(0,oe.getPluginsForSite)(e,n,i),activePlugin:(0,oe.getActivePlugin)(e,n,i),nextPlugin:(0,oe.getNextPlugin)(e,n,i),selectedSite:s,isRequestingSites:(0,te.isRequestingSites)(e),remoteManagementUrl:(0,te.getJetpackSiteRemoteManagementUrl)(e,n),sitesInitialized:(0,se.default)(e),siteId:n}},function(e){return(0,j.bindActionCreators)({requestSites:le.requestSites,fetchPluginData:ae.fetchPluginData,installPlugin:re.installPlugin},e)})((0,x.localize)(pe)),e.exports=t.default},"./client/my-sites/plugins/main.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=s(i),l=n("./node_modules/react/react.js"),r=s(l),o=n("./node_modules/create-react-class/index.js"),u=s(o),d=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/lodash/lodash.js"),p=n("./node_modules/i18n-calypso/index.js"),f=n("./client/components/main/index.jsx"),g=s(f),m=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),h=s(m),_=n("./client/my-sites/plugins/plugin-item/plugin-item.jsx"),b=s(_),v=n("./client/components/data/document-head/index.jsx"),E=s(v),y=n("./client/components/section-nav/index.jsx"),j=s(y),S=n("./client/components/section-nav/tabs.jsx"),P=s(S),x=n("./client/components/section-nav/item.jsx"),k=s(x),I=n("./client/components/search/index.jsx"),w=s(I),T=n("./client/lib/mixins/url-search/index.js"),N=s(T),C=n("./client/components/empty-content/index.jsx"),A=s(C),U=n("./client/lib/plugins/store.js"),D=s(U),M=n("./client/state/plugins/wporg/actions.js"),L=n("./client/state/plugins/wporg/selectors.js"),O=s(L),R=n("./client/my-sites/plugins/plugins-list/index.jsx"),V=s(R),F=n("./client/state/analytics/actions.js"),G=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),B=s(G),W=n("./client/my-sites/plugins/plugins-browser/index.jsx"),z=s(W),q=n("./client/my-sites/plugins/not-supported-jetpack-version.jsx"),H=s(q),J=n("./client/my-sites/plugins/no-permissions-error.jsx"),Y=s(J),Q=n("./client/state/selectors/can-current-user.js"),Z=s(Q),K=n("./client/state/selectors/can-current-user-manage-plugins.js"),X=s(K),$=n("./client/state/sites/selectors.js"),ee=n("./client/state/ui/selectors.js"),te=n("./client/state/selectors/get-selected-or-all-sites-with-plugins.js"),ne=s(te),se=n("./client/components/header-button/index.jsx"),ie=s(se),ae=n("./client/config/index.js"),le=(0,u.default)({displayName:"PluginsMain",mixins:[N.default],getInitialState:function(){return this.getPluginsState(this.props)},componentDidMount:function(){D.default.on("change",this.refreshPlugins)},componentWillUnmount:function(){D.default.removeListener("change",this.refreshPlugins)},componentWillReceiveProps:function(e){this.refreshPlugins(e)},getPluginsFromStore:function(e,t){var n=e||this.props,s=null;return(s=n.selectedSiteSlug?D.default.getPlugins(t,n.filter):D.default.getPlugins(t.filter(function(e){return e.visible}),n.filter))?(n&&n.search&&(s=s.filter(this.matchSearchTerms.bind(this,n.search))),this.addWporgDataToPlugins(s)):s},addWporgDataToPlugins:function(e){var t=this;return e.map(function(e){var n=O.default.getPlugin(t.props.wporgPlugins,e.slug);return n||t.props.wporgFetchPluginData(e.slug),(0,a.default)({},e,n)})},getPluginsState:function(e){var t=this.props.sites,n=D.default.getPlugins(t,"updates");return{plugins:this.getPluginsFromStore(e,t),pluginUpdateCount:n&&n.length,selectedAction:"Actions"}},refreshPlugins:function(e){this.setState(this.getPluginsState(e))},matchSearchTerms:function(e,t){return e=e.toLowerCase(),["name","description","author"].some(function(n){return t[n]&&t[n].toLowerCase().indexOf(e)!==-1})},getFilters:function(){var e=this.props.translate,t=this.props.selectedSiteSlug?"/"+this.props.selectedSiteSlug:"";return[{title:e("All",{context:"Filter label for plugins list"}),path:"/plugins/manage"+t,id:"all"},{title:e("Active",{context:"Filter label for plugins list"}),path:"/plugins/active"+t,id:"active"},{title:e("Inactive",{context:"Filter label for plugins list"}),path:"/plugins/inactive"+t,id:"inactive"},{title:e("Updates",{context:"Filter label for plugins list"}),path:"/plugins/updates"+t,id:"updates"}]},isFetchingPlugins:function(){return this.props.sites.some(D.default.isFetchingSite)},getSelectedText:function(){var e=this,t=(0,c.find)(this.getFilters(),function(t){return e.props.filter===t.id});return"undefined"!=typeof t?t.title:""},getSearchPlaceholder:function(){var e=this.props.translate;switch(this.props.filter){case"active":return e("Search Allâ¦",{textOnly:!0});case"inactive":return e("Search Inactiveâ¦",{textOnly:!0});case"updates":return e("Search Updatesâ¦",{textOnly:!0});case"all":return e("Search Allâ¦",{textOnly:!0})}},getEmptyContentUpdateData:function(){var e=this.props.translate,t={illustration:"/calypso/images/illustrations/illustration-ok.svg"},n=this.props.selectedSite;return n?t.title=e("All plugins on %(siteName)s are {{span}}up to date.{{/span}}",{textOnly:!0,args:{siteName:n.title},components:{span:r.default.createElement("span",{className:"plugins__plugin-list-state"})},comment:"The span tags prevents single words from showing on a single line."}):t.title=e("All plugins are up to date.",{textOnly:!0}),this.getUpdatesTabVisibility()?t:(t.action=e("All Plugins",{textOnly:!0}),n?(t.actionURL="/plugins/"+n.slug,this.props.selectedSiteIsJetpack?(t.illustration="/calypso/images/illustrations/illustration-jetpack.svg",t.title=e("Plugins can't be updated on %(siteName)s.",{textOnly:!0,args:{siteName:n.title}})):t.title=e("Plugins are updated automatically on %(siteName)s.",{textOnly:!0,args:{siteName:n.title}})):(t.title=e("No updates are available.",{textOnly:!0}),t.illustration="/calypso/images/illustrations/illustration-empty-results.svg",t.actionURL="/plugins"),t)},getEmptyContentData:function(){var e=this.props.translate,t={illustration:"/calypso/images/illustrations/illustration-empty-results.svg"};switch(this.props.filter){case"active":t.title=e("No plugins are active.",{textOnly:!0});break;case"inactive":t.title=e("No plugins are inactive.",{textOnly:!0});break;case"updates":t=this.getEmptyContentUpdateData();break;default:return null}return t},getUpdatesTabVisibility:function(){var e=this,t=this.props.selectedSite;return t?this.props.selectedSiteIsJetpack&&this.props.canSelectedJetpackSiteUpdateFiles:(0,c.some)(this.props.sites,function(t){return t&&e.props.isJetpackSite(t.ID)&&e.props.canJetpackSiteUpdateFiles(t.ID)})},shouldShowPluginListPlaceholders:function(){var e=this.state.plugins;return(0,c.isEmpty)(e)&&this.isFetchingPlugins()},renderDocumentHead:function(){return r.default.createElement(E.default,{title:this.props.translate("Plugins",{textOnly:!0})})},renderPluginsContent:function(){var e=this.state.plugins,t=void 0===e?[]:e,n=this.props,s=n.filter,i=n.search,a=!(0,c.isEmpty)(t)||this.isFetchingPlugins(),l="all"===s||!a&&i;if(!a&&!i){var o=this.getEmptyContentData();if(o)return r.default.createElement(A.default,{title:o.title,illustration:o.illustration,actionURL:o.actionURL,action:o.action})}var u=a&&r.default.createElement(V.default,{header:this.props.translate("Installed Plugins"),plugins:t,pluginUpdateCount:this.state.pluginUpdateCount,isPlaceholder:this.shouldShowPluginListPlaceholders()}),d=a&&l&&r.default.createElement("h3",{className:"plugins__more-header"},"More Plugins"),p=void 0;i&&(p=this.props.translate("Suggested plugins for: %(searchQuery)s",{textOnly:!0,args:{searchQuery:i}}));var f=l&&r.default.createElement(z.default,{hideSearchForm:!0,path:this.props.context.path,search:i,searchTitle:p});return r.default.createElement("div",null,u,d,f)},getMockPluginItems:function(){var e=[{slug:"akismet",name:"Akismet",icon:"//ps.w.org/akismet/assets/icon-256x256.png",wporg:!0},{slug:"wp-super-cache",name:"WP Super Cache",icon:"//ps.w.org/wp-super-cache/assets/icon-256x256.png",wporg:!0},{slug:"jetpack",name:"Jetpack by WordPress.com",icon:"//ps.w.org/jetpack/assets/icon-256x256.png",wporg:!0}],t={slug:"no-slug",canUpdateFiles:!0,name:"Not a real site"};return e.map(function(e){return r.default.createElement(b.default,{key:"plugin-item-mock-"+e.slug,plugin:e,sites:[],selectedSite:t,progress:[],isMock:!0})})},handleAddPluginButtonClick:function(){this.props.recordGoogleEvent("Plugins","Clicked Add New Plugins")},renderAddPluginButton:function(){var e=this.props,t=e.selectedSiteSlug,n=e.translate,s="/plugins"+(t?"/"+t:"");return r.default.createElement(ie.default,{icon:"plus",label:n("Add Plugin"),"aria-label":n("Browse all plugins",{context:"button label"}),href:s,onClick:this.handleAddPluginButtonClick})},handleUploadPluginButtonClick:function(){this.props.recordGoogleEvent("Plugins","Clicked Plugin Upload Link")},renderUploadPluginButton:function(){if(!(0,ae.isEnabled)("manage/plugins/upload"))return null;var e=this.props,t=e.selectedSiteSlug,n=e.translate,s="/plugins/upload"+(t?"/"+t:"");return r.default.createElement(ie.default,{icon:"cloud-upload",label:n("Upload Plugin"),"aria-label":n("Upload Plugin"),href:s,onClick:this.handleUploadPluginButtonClick})},render:function(){var e=this,t=this.props.selectedSiteId;if(!this.props.isRequestingSites&&!this.props.userCanManagePlugins)return r.default.createElement(Y.default,{title:this.props.translate("Plugins",{textOnly:!0})});if(this.props.selectedSiteIsJetpack&&!this.props.canSelectedJetpackSiteManage)return r.default.createElement(g.default,null,this.renderDocumentHead(),r.default.createElement(h.default,null),r.default.createElement(B.default,{template:"optInManage",siteId:t,title:this.props.translate("Looking to manage this site's plugins?"),section:"plugins",featureExample:this.getMockPluginItems()}));var n=this.getFilters().map(function(t){if("updates"===t.id&&!e.getUpdatesTabVisibility())return null;var n={key:t.id,path:t.path,selected:t.id===e.props.filter};return"updates"===t.id&&(n.count=e.state.pluginUpdateCount),r.default.createElement(k.default,n,t.title)});return r.default.createElement(g.default,{wideLayout:!0},r.default.createElement(H.default,null),this.renderDocumentHead(),r.default.createElement(h.default,null),r.default.createElement("div",{className:"plugins__header"},r.default.createElement(j.default,{selectedText:this.getSelectedText()},r.default.createElement(P.default,null,n),r.default.createElement(w.default,{pinned:!0,fitsContainer:!0,onSearch:this.doSearch,initialValue:this.props.search,ref:"url-search",analyticsGroup:"Plugins",placeholder:this.getSearchPlaceholder()})),r.default.createElement("div",{className:"plugins__header-buttons"},this.renderAddPluginButton(),this.renderUploadPluginButton())),this.renderPluginsContent())}});t.default=(0,d.connect)(function(e){var t=(0,ee.getSelectedSite)(e),n=(0,ee.getSelectedSiteId)(e);return{sites:(0,ne.default)(e),selectedSite:t,selectedSiteId:n,selectedSiteSlug:(0,ee.getSelectedSiteSlug)(e),selectedSiteIsJetpack:t&&(0,$.isJetpackSite)(e,n),canSelectedJetpackSiteManage:t&&(0,$.canJetpackSiteManage)(e,n),canSelectedJetpackSiteUpdateFiles:t&&(0,$.canJetpackSiteUpdateFiles)(e,n),canJetpackSiteUpdateFiles:function(t){return(0,$.canJetpackSiteUpdateFiles)(e,t)},isJetpackSite:function(t){return(0,$.isJetpackSite)(e,t)},wporgPlugins:e.plugins.wporg.items,isRequestingSites:(0,$.isRequestingSites)(e),userCanManagePlugins:n?(0,Z.default)(e,n,"manage_options"):(0,X.default)(e)}},{wporgFetchPluginData:M.fetchPluginData,recordGoogleEvent:F.recordGoogleEvent})((0,p.localize)(le)),e.exports=t.default},"./client/my-sites/plugins/no-permissions-error.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/i18n-calypso/index.js"),a=n("./node_modules/prop-types/index.js"),l=s(a),r=n("./node_modules/react/react.js"),o=s(r),u=n("./client/components/data/document-head/index.jsx"),d=s(u),c=n("./client/components/empty-content/index.jsx"),p=s(c),f=n("./client/components/main/index.jsx"),g=s(f),m=n("./client/lib/formatting/index.js"),h=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),_=s(h),b=function(e){var t=e.title,n=e.translate;return o.default.createElement(g.default,null,t&&o.default.createElement(d.default,{title:t}),o.default.createElement(_.default,null),o.default.createElement(p.default,{title:(0,m.preventWidows)(n("Oops! You don't have permission to manage plugins.")),line:(0,m.preventWidows)(n("If you think you should, contact this site's administrator.")),illustration:"/calypso/images/illustrations/illustration-500.svg"}))};b.propTypes={title:l.default.string,translate:l.default.func.isRequired},t.default=(0,i.localize)(b),e.exports=t.default},"./client/my-sites/plugins/not-supported-jetpack-version.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),v=n("./client/config/index.js"),E=s(v),y=n("./client/state/ui/selectors.js"),j=n("./client/state/notices/actions.js"),S=n("./client/state/sites/selectors.js"),P=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"showWarning",value:function(e){var t=e.adminUrl,n=e.domain,s=e.minimumJetpackVersionFailed,i=e.siteId,a=e.translate,l=e.triggerNotice;if(s){var r=(0,E.default)("jetpack_min_version");l(a("Jetpack %(version)s is required to take full advantage of plugin management in %(site)s.",{args:{version:r,site:n}}),{button:a("Update now"),href:t,id:"allSitesNotOnMinJetpackVersion-"+r+"-"+i})}}},{key:"componentWillMount",value:function(){this.showWarning(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.showWarning(e)}},{key:"render",value:function(){return null}}]),t}(h.Component);P.propTypes={translate:m.default.func.isRequired,minimumJetpackVersionFailed:m.default.bool.isRequired,adminUrl:m.default.string,domain:m.default.string},t.default=(0,_.connect)(function(e){var t=(0,y.getSelectedSiteId)(e);return{siteId:t,adminUrl:(0,S.getSiteAdminUrl)(e,t,"plugins.php?plugin_status=upgrade"),domain:(0,S.getSiteDomain)(e,t),minimumJetpackVersionFailed:!!(0,S.isJetpackSite)(e,t)&&!(0,S.siteHasMinimumJetpackVersion)(e,t)}},{triggerNotice:j.warningNotice})((0,b.localize)(P)),e.exports=t.default},"./client/my-sites/plugins/plugin-action/plugin-action.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/classnames/index.js"),_=s(h),b=n("./client/components/forms/form-toggle/compact.jsx"),v=s(b),E=n("./client/components/info-popover/index.jsx"),y=s(E),j=function(e){
function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.handleAction=function(e){s.props.disabledInfo?s.refs.infoPopover._onClick(e):s.props.action()},s.renderLabel=function(){return s.props.label?m.default.createElement("label",{className:"plugin-action__label",ref:"disabledInfoLabel",onClick:s.handleAction,htmlFor:s.props.htmlFor,key:"renderDisabledInfoLabel"},s.props.label):null},s.renderDisabledInfo=function(){return[m.default.createElement(y.default,{key:"renderDisabledInfoPopOver",className:"plugin-action__disabled-info",position:"bottom left",popoverName:"Plugin Action Disabled"+s.props.label,gaEventCategory:"Plugins",ref:"infoPopover",ignoreContext:s.refs&&s.refs.disabledInfoLabel},s.props.disabledInfo),s.renderLabel()]},s.renderToggle=function(){return m.default.createElement(v.default,{onChange:s.props.action,checked:s.props.status,toggling:s.props.inProgress,disabled:s.props.disabled,id:s.props.htmlFor},s.renderLabel())},s.renderChildren=function(){return m.default.createElement("div",null,m.default.createElement("span",{className:"plugin-action__children"},s.props.children),s.renderLabel())},s.renderInner=function(){return s.props.disabledInfo?s.renderDisabledInfo():0<m.default.Children.count(s.props.children)?s.renderChildren():s.renderToggle()},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e={"is-disabled":this.props.disabled,"has-disabled-info":!!this.props.disabledInfo};return m.default.createElement("div",{className:(0,_.default)("plugin-action",e,this.props.className)},this.renderInner())}}]),t}(m.default.Component);t.default=j,e.exports=t.default},"./client/my-sites/plugins/plugin-activate-toggle/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginActivateToggle=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),E=n("./node_modules/gridicons/build/index.js"),y=s(E),j=n("./client/lib/plugins/actions.js"),S=s(j),P=n("./client/lib/plugins/log-store.js"),x=s(P),k=n("./client/my-sites/plugins/plugin-action/plugin-action.jsx"),I=s(k),w=n("./client/state/analytics/actions.js"),T=t.PluginActivateToggle=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.toggleActivation=function(){var e=s.props,t=e.isMock,n=e.disabled,i=e.site,a=e.plugin,l=e.notices,r=e.recordGoogleEvent,o=e.recordTracksEvent;t||n||(S.default.togglePluginActivation(i,a),S.default.removePluginsNotices(l.completed.concat(l.errors)),a.active?(r("Plugins","Clicked Toggle Deactivate Plugin","Plugin Name",a.slug),o("calypso_plugin_deactivate_click",{site:i.ID,plugin:a.slug})):(r("Plugins","Clicked Toggle Activate Plugin","Plugin Name",a.slug),o("calypso_plugin_activate_click",{site:i.ID,plugin:a.slug})))},s.trackManageConnectionLink=function(){var e=s.props.recordGoogleEvent;e("Plugins","Clicked Manage Jetpack Connection Link","Plugin Name","jetpack")},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"manageConnectionLink",value:function(){var e=this.props,t=e.disabled,n=e.translate,s=e.site;return t?_.default.createElement("span",{className:"plugin-activate-toggle__disabled"},n("Manage Connection",{comment:"manage Jetpack connnection settings link"}),_.default.createElement("span",{className:"plugin-activate-toggle__icon"},_.default.createElement(y.default,{icon:"cog",size:18}))):_.default.createElement("span",{className:"plugin-activate-toggle__link"},_.default.createElement("a",{onClick:this.trackManageConnectionLink,href:"/settings/manage-connection/"+s.slug},n("Manage Connection",{comment:"manage Jetpack connnection settings link"})),_.default.createElement("a",{className:"plugin-activate-toggle__icon",onClick:this.trackManageConnectionLink,href:"/settings/manage-connection/"+s.slug},_.default.createElement(y.default,{icon:"cog",size:18})))}},{key:"render",value:function(){var e=this.props,t=e.site,n=e.plugin,s=e.disabled,i=e.translate;if(!t)return null;var a=x.default.isInProgressAction(t.ID,n.slug,["ACTIVATE_PLUGIN","DEACTIVATE_PLUGIN"]);return n&&"jetpack"===n.slug?_.default.createElement(I.default,{className:"plugin-activate-toggle",htmlFor:"disconnect-jetpack-"+t.ID},this.manageConnectionLink()):_.default.createElement(I.default,{disabled:s,className:"plugin-activate-toggle",label:i("Active",{context:"plugin status"}),inProgress:a,status:n&&n.active,action:this.toggleActivation,htmlFor:"activate-"+n.slug+"-"+t.ID})}}]),t}(h.Component);T.propTypes={site:m.default.object.isRequired,plugin:m.default.object.isRequired,notices:m.default.object,isMock:m.default.bool,disabled:m.default.bool},T.defaultProps={isMock:!1,disabled:!1},t.default=(0,b.connect)(null,{recordGoogleEvent:w.recordGoogleEvent,recordTracksEvent:w.recordTracksEvent})((0,v.localize)(T))},"./client/my-sites/plugins/plugin-automated-transfer/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),E=n("./node_modules/react-click-outside/dist/index.js"),y=s(E),j=n("./client/state/automated-transfer/constants.js"),S=n("./client/state/ui/selectors.js"),P=n("./client/state/sites/selectors.js"),x=n("./client/state/automated-transfer/selectors.js"),k=n("./client/state/selectors/is-automated-transfer-active.js"),I=s(k),w=n("./client/state/selectors/is-automated-transfer-failed.js"),T=s(w),N=n("./client/components/notice/index.jsx"),C=s(N),A=n("./client/components/notice/notice-action.jsx"),U=s(A),D=n("./client/components/wpadmin-auto-login/index.jsx"),M=s(D),L=n("./client/state/sites/actions.js"),O=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={clickOutside:!1,shouldDisplay:!1,transferComplete:!1},s.getNoticeText=function(){var e=j.transferStates.START,t=j.transferStates.CONFLICTS,n=j.transferStates.FAILURE,i=s.props,a=i.plugin,l=i.transferState,r=i.translate,o=s.state,u=o.clickOutside,d=o.transferComplete;if(u)return r("Don't leave quite yet! Just a bit longer.");if(d)return r("Activating %(plugin)sâ¦",{args:{plugin:a.name}});switch(l){case e:return r("Installing %(plugin)sâ¦",{args:{plugin:a.name}});case t:return r("Sorry, we found some conflicts to fix before proceeding.");case n:return r("There was a problem installing the plugin. Please try again in a few minutes.")}},s.getStatus=function(){var e=s.props.isFailedTransfer,t=s.state.clickOutside;return t?"is-info":e?"is-error":"is-info"},s.getIcon=function(){var e=s.props.isFailedTransfer,t=s.state.clickOutside;return t?"sync":e?"notice":"sync"},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=j.transferStates.COMPLETE,t=this.props,n=t.isTransferring,s=t.isFailedTransfer,i=t.transferState;e===i?this.setState({transferComplete:!0}):(n||s)&&this.setState({shouldDisplay:!0})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.siteId,s=j.transferStates.COMPLETE,i=this.state.transferComplete,a={};this.props.transferState!==e.transferState&&(a.clickOutside=!1),s===e.transferState?(this.interval=this.interval||setInterval(function(){return t.props.requestSite(n)},1e3),a.transferComplete=!0,i||(a.shouldDisplay=!0)):i||(a.shouldDisplay=e.isTransferring||e.isFailedTransfer),this.setState(a)}},{key:"handleClickOutside",value:function(e){this.props.isTransferring&&!this.state.transferComplete&&(e.preventDefault(),e.stopImmediatePropagation(),this.setState({clickOutside:!0}))}},{key:"render",value:function(){var e=j.transferStates.CONFLICTS,t=this.props,n=t.transferState,s=t.translate,i=this.state,a=i.shouldDisplay,l=i.transferComplete;return a?_.default.createElement("div",null,_.default.createElement(C.default,{icon:this.getIcon(),className:"plugin-automated-transfer__notice",showDismiss:!1,status:this.getStatus(),text:this.getNoticeText()},!l&&e===n&&_.default.createElement(U.default,{href:"#"},s("View Conflicts",{comment:"Conflicts arose during an Automated Transfer started by a plugin install."}))),this.state.transferComplete&&_.default.createElement(M.default,{site:this.props.site})):null}}]),t}(h.Component);O.propTypes={isTransferring:m.default.bool,plugin:m.default.object,transferState:m.default.string,translate:m.default.func},O.defaultProps={plugin:{name:"Plugin"}};var R=function(e){var t=(0,S.getSelectedSiteId)(e);return{siteId:t,transferState:(0,x.getAutomatedTransferStatus)(e,t),isTransferring:(0,I.default)(e,t),isFailedTransfer:(0,T.default)(e,t),site:(0,P.getSite)(e,t)}};t.default=(0,b.connect)(R,{requestSite:L.requestSite})((0,v.localize)((0,y.default)(O))),e.exports=t.default},"./client/my-sites/plugins/plugin-autoupdate-toggle/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginAutoUpdateToggle=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),E=n("./client/lib/plugins/actions.js"),y=s(E),j=n("./client/lib/plugins/log-store.js"),S=s(j),P=n("./client/my-sites/plugins/plugin-action/plugin-action.jsx"),x=s(P),k=n("./client/components/external-link/index.jsx"),I=s(k),w=n("./client/state/analytics/actions.js"),T=n("./client/lib/site/utils.js"),N=s(T),C=t.PluginAutoUpdateToggle=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.toggleAutoUpdates=function(){var e=s.props,t=e.isMock,n=e.disabled,i=e.site,a=e.plugin,l=e.notices,r=e.recordGoogleEvent,o=e.recordTracksEvent;t||n||(y.default.togglePluginAutoUpdate(i,a),y.default.removePluginsNotices(l.completed.concat(l.errors)),a.autoupdate?(r("Plugins","Clicked Toggle Disable Autoupdates Plugin","Plugin Name",a.slug),o("calypso_plugin_autoupdate_disable_click",{site:i.ID,plugin:a.slug})):(r("Plugins","Clicked Toggle Enable Autoupdates Plugin","Plugin Name",a.slug),o("calypso_plugin_autoupdate_enable_click",{site:i.ID,plugin:a.slug})))},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getDisabledInfo",value:function(){var e=this.props,t=e.site,n=e.wporg,s=e.translate;if(!t)return null;if(!n)return s("This plugin is not in the WordPress.org plugin repository, so we can't autoupdate it.");if(!t.hasMinimumJetpackVersion)return s("%(site)s is not running an up to date version of Jetpack",{args:{site:t.title}});if(t.options.is_multi_network)return s("%(site)s is part of a multi-network installation, which is not currently supported.",{args:{site:t.title}});if(!N.default.isMainNetworkSite(t))return s("Only the main site on a multi-site installation can enable autoupdates for plugins.",{args:{site:t.title}});if(!t.canAutoupdateFiles&&t.options.file_mod_disabled){var i=N.default.getSiteFileModDisableReason(t,"autoupdateFiles"),a=[];if(i.length>1){a.push(_.default.createElement("p",{key:"reason-shell"},s("Autoupdates are not available for %(site)s:",{args:{site:t.title}})));var l=i.map(function(e,n){return _.default.createElement("li",{key:"reason-i"+n+"-"+t.ID},e)});a.push(_.default.createElement("ul",{className:"plugin-action__disabled-info-list",key:"reason-shell-list"},l))}else a.push(_.default.createElement("p",{key:"reason-shell"},s("Autoupdates are not available for %(site)s. %(reason)s",{args:{site:t.title,reason:i[0]}})));return a.push(_.default.createElement(I.default,{key:"external-link",onClick:this.recordEvent,href:"https://jetpack.me/support/site-management/#file-update-disabled"},s("How do I fix this?"))),a}return null}},{key:"render",value:function(){var e=this.props,t=e.site,n=e.plugin,s=e.translate,i=e.disabled;if(!t.jetpack)return null;var a=S.default.isInProgressAction(t.ID,n.slug,["ENABLE_AUTOUPDATE_PLUGIN","DISABLE_AUTOUPDATE_PLUGIN"]),l=this.getDisabledInfo(),r=l?s("Autoupdates disabled",{context:'this goes next to an icon that displays if the plugin has "autoupdates disabled" active'}):s("Autoupdates",{context:'this goes next to an icon that displays if the plugin has "autoupdates" active'});return _.default.createElement(x.default,{disabled:i,label:r,status:n.autoupdate,action:this.toggleAutoUpdates,inProgress:a,disabledInfo:l,htmlFor:"autoupdates-"+n.slug+"-"+t.ID})}}]),t}(h.Component);C.propTypes={isMock:m.default.bool,site:m.default.object.isRequired,plugin:m.default.object.isRequired,wporg:m.default.bool,disabled:m.default.bool},C.defaultProps={isMock:!1,disabled:!1},t.default=(0,b.connect)(null,{recordGoogleEvent:w.recordGoogleEvent,recordTracksEvent:w.recordTracksEvent})((0,v.localize)(C))},"./client/my-sites/plugins/plugin-eligibility/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/react/react.js"),v=s(b),E=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/page/index.js"),S=s(j),P=n("./client/components/main/index.jsx"),x=s(P),k=n("./client/components/header-cake/index.jsx"),I=s(k),w=n("./client/blocks/eligibility-warnings/index.jsx"),T=s(w),N=n("./client/state/themes/actions.js"),C=n("./client/state/ui/selectors.js"),A=function(e){function t(){var e,n,s,i;(0,u.default)(this,t);for(var a=arguments.length,l=Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=s=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.getBackUrl=function(){var e=s.props,t=e.pluginSlug,n=e.siteSlug;return"/plugins/"+t+"/"+n},s.goBack=function(){return s.props.navigateTo(s.getBackUrl())},s.pluginTransferInitiate=function(){s.props.initiateTransfer(s.props.siteId,null,s.props.pluginSlug),s.goBack()},i=n,(0,f.default)(s,i)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props.translate;return v.default.createElement(x.default,null,v.default.createElement(I.default,{isCompact:!0,onClick:this.goBack},e("Install plugin")),v.default.createElement(T.default,{onProceed:this.pluginTransferInitiate,backUrl:this.getBackUrl()}))}}]),t}(b.Component);A.propTypes={pluginSlug:_.default.string,siteId:_.default.number,siteSlug:_.default.string,translate:_.default.func,navigateTo:_.default.func,initiateTransfer:_.default.func};var U=function(e){return function(t){return v.default.createElement(e,(0,a.default)({},t,{navigateTo:S.default}))}},D=function(e){var t=(0,C.getSelectedSiteId)(e);return{siteId:t}},M={initiateTransfer:N.initiateThemeTransfer};t.default=(0,E.connect)(D,M)(U((0,y.localize)(A))),e.exports=t.default},"./client/my-sites/plugins/plugin-icon/plugin-icon.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/prop-types/index.js"),a=s(i),l=n("./node_modules/react/react.js"),r=s(l),o=n("./node_modules/classnames/index.js"),u=s(o),d=n("./node_modules/gridicons/build/index.js"),c=s(d),p=function(e){var t=e.className,n=e.image,s=e.isPlaceholder,i=(0,u.default)({"plugin-icon":!0,"is-placeholder":s,"is-fallback":!n},t);return r.default.createElement("div",{className:i},s||!n?r.default.createElement(c.default,{icon:"plugins"}):r.default.createElement("img",{className:"plugin-icon__img",src:n}))};p.propTypes={image:a.default.string,isPlaceholder:a.default.bool},t.default=p,e.exports=t.default},"./client/my-sites/plugins/plugin-information/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/defineProperty.js"),r=s(l),o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/createClass.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(g),h=n("./node_modules/babel-runtime/helpers/inherits.js"),_=s(h),b=n("./node_modules/prop-types/index.js"),v=s(b),E=n("./node_modules/react/react.js"),y=s(E),j=n("./node_modules/i18n-calypso/index.js"),S=s(j),P=n("./node_modules/classnames/index.js"),x=s(P),k=n("./node_modules/gridicons/build/index.js"),I=s(k),w=n("./node_modules/lodash/lodash.js"),T=n("./client/components/button/index.jsx"),N=s(T),C=n("./client/components/card/index.jsx"),A=s(C),U=n("./client/components/external-link/index.jsx"),D=s(U),M=n("./client/components/version/index.jsx"),L=s(M),O=n("./client/my-sites/plugins/plugin-ratings/index.jsx"),R=s(O),V=n("./client/my-sites/plugins/utils.js"),F=n("./client/lib/version-compare/index.js"),G=s(F),B=n("./client/lib/analytics/index.js"),W=s(B),z=function(e){function t(){var e,n,s,i;(0,c.default)(this,t);for(var a=arguments.length,l=Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=s=(0,m.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(l))),s._WPORG_PLUGINS_URL="wordpress.org/plugins/",s.renderHomepageLink=function(){if(s.props.plugin&&s.props.plugin.plugin_url&&s.props.plugin.plugin_url.search(s._WPORG_PLUGINS_URL+s.props.plugin.slug)===-1){var e=W.default.ga.recordEvent.bind(W.default,"Plugins","Clicked Plugin Homepage Link","Plugin Name",s.props.plugin.slug);return y.default.createElement(D.default,{icon:!0,href:s.props.plugin.plugin_url,onClick:e,target:"_blank",className:"plugin-information__external-link"},s.props.translate("Plugin homepage"))}},s.renderWporgLink=function(){if(s.props.plugin.slug){var e=W.default.ga.recordEvent.bind(W.default,"Plugins","Clicked wp.org Plugin Link","Plugin Name",s.props.plugin.slug);return y.default.createElement(D.default,{icon:!0,href:"https://"+s._WPORG_PLUGINS_URL+s.props.plugin.slug+"/",onClick:e,target:"_blank",className:"plugin-information__external-link"},s.props.translate("WordPress.org Plugin page"))}},s.renderLastUpdated=function(){if(s.props.plugin&&s.props.plugin.last_updated){var e=S.default.moment.utc(s.props.plugin.last_updated,"YYYY-MM-DD hh:mma").fromNow(),t=s.props.hasUpdate?y.default.createElement(I.default,{icon:"sync",size:18}):null;return y.default.createElement("div",{className:"plugin-information__last-updated"},t,s.props.translate("Released %(dateFromNow)s",{args:{dateFromNow:e}}))}},s.renderSiteVersion=function(){return s.props.siteVersion?y.default.createElement(L.default,{version:s.props.siteVersion,icon:"my-sites",className:"plugin-information__version"}):null},s.renderLimits=function(){var e=s.getCompatibilityLimits(),t=null,n=null;return s.props.siteVersion&&e.maxVersion&&(n=(0,G.default)(s.props.siteVersion,e.maxVersion,"<=")?y.default.createElement(I.default,{icon:"checkmark",size:18}):y.default.createElement(I.default,{icon:"cross-small",size:18})),e.minVersion&&e.maxVersion&&e.minVersion!==e.maxVersion&&(t=y.default.createElement("div",{className:"plugin-information__version-limit"},s.props.translate("{{wpIcon/}}  Compatible with %(minVersion)s to {{span}} %(maxVersion)s {{versionCheck/}}{{/span}}",{args:{minVersion:e.minVersion,maxVersion:e.maxVersion},components:{wpIcon:s.props.siteVersion?null:y.default.createElement(I.default,{icon:"my-sites",size:18}),span:y.default.createElement("span",{className:"plugin-information__version-limit-state"}),versionCheck:n}}))),e.minVersion&&e.maxVersion&&e.minVersion===e.maxVersion&&(t=y.default.createElement("div",{className:"plugin-information__version-limit"},s.props.translate("{{wpIcon/}} Compatible with %(maxVersion)s",{args:{maxVersion:e.maxVersion},components:{wpIcon:s.props.siteVersion?null:y.default.createElement(I.default,{icon:"my-sites",size:18})}}))),y.default.createElement("div",{className:"plugin-information__versions"},t)},s.getCompatibilityLimits=function(){return s.props.plugin.compatibility&&s.props.plugin.compatibility.length?{maxVersion:s.props.plugin.compatibility[s.props.plugin.compatibility.length-1],minVersion:s.props.plugin.compatibility[0]}:{}},s.getActionLinks=function(e){if(!(0,w.get)(e,"active"))return null;if((0,V.getExtensionSettingsPath)(e))return null;var t=(0,w.get)(e,"action_links");if(!(0,w.isEmpty)(t))return t;var n=(0,w.get)(s.props,"site.options.admin_url"),i=(0,w.get)(e,"slug");return"vaultpress"===i&&(n+="admin.php?page=vaultpress"),n?(0,r.default)({},S.default.translate("WP Admin"),n):null},s.renderPlaceholder=function(){var e=(0,x.default)({"plugin-information":!0,"is-placeholder":!0});return y.default.createElement("div",{className:e},y.default.createElement("div",{className:"plugin-information__wrapper"},y.default.createElement("div",{className:"plugin-information__version-info"},y.default.createElement("div",{className:"plugin-information__version-shell"},s.props.pluginVersion?y.default.createElement(L.default,{version:s.props.pluginVersion,icon:"plugins",className:"plugin-information__version"}):null),y.default.createElement("div",{className:"plugin-information__version-shell"},s.renderSiteVersion(),s.renderLimits())),y.default.createElement("div",{className:"plugin-information__links"},s.renderWporgLink(),s.renderHomepageLink())),y.default.createElement(R.default,{rating:s.props.plugin.rating,ratings:s.props.plugin.ratings,downloaded:s.props.plugin.downloaded,numRatings:s.props.plugin.num_ratings,slug:s.props.plugin.slug,placeholder:!0}))},i=n,(0,m.default)(s,i)}return(0,_.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){if(this.props.isPlaceholder)return this.renderPlaceholder();if(!this.props.plugin.wporg)return null;var e=(0,x.default)({"plugin-information__version-info":!0,"is-singlesite":!!this.props.siteVersion}),t=this.props.plugin,n=this.getActionLinks(t);return y.default.createElement(A.default,{className:"plugin-information"},y.default.createElement("div",{className:"plugin-information__wrapper"},y.default.createElement("div",{className:e},y.default.createElement("div",{className:"plugin-information__version-shell"},this.props.pluginVersion&&y.default.createElement(L.default,{version:this.props.pluginVersion,icon:"plugins",className:"plugin-information__version"}),this.renderLastUpdated()),y.default.createElement("div",{className:"plugin-information__version-shell"},this.renderSiteVersion(),this.renderLimits())),!(0,w.isEmpty)(n)&&y.default.createElement("div",{className:"plugin-information__action-links"},(0,a.default)(n).map(function(e,t){return y.default.createElement(N.default,{compact:!0,icon:!0,href:n[e],target:"_blank",key:"action-link-"+t,rel:"noopener noreferrer"},e," ",y.default.createElement(I.default,{icon:"external"}))})),y.default.createElement("div",{className:"plugin-information__links"},this.renderWporgLink(),this.renderHomepageLink())),y.default.createElement(R.default,{rating:this.props.plugin.rating,ratings:this.props.plugin.ratings,downloaded:this.props.plugin.downloaded,numRatings:this.props.plugin.num_ratings,slug:this.props.plugin.slug}))}}]),t}(y.default.Component);z.displayName="PluginInformation",z.propTypes={plugin:v.default.object.isRequired,isPlaceholder:v.default.bool,hasUpdate:v.default.bool,pluginVersion:v.default.string,siteVersion:v.default.oneOfType([v.default.string,v.default.bool])},z.defaultProps={plugin:{rating:0}},t.default=(0,j.localize)(z),e.exports=t.default},"./client/my-sites/plugins/plugin-install-button-wpcom/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WpcomPluginInstallButton=void 0;var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/react/react.js"),r=s(l),o=n("./node_modules/i18n-calypso/index.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/page/index.js"),p=s(c),f=n("./client/components/button/index.jsx"),g=s(f),m=n("./client/state/automated-transfer/selectors.js"),h=n("./client/state/ui/selectors.js"),_=n("./client/state/themes/actions.js"),b=n("./client/state/analytics/actions.js"),v=n("./client/state/automated-transfer/constants.js"),E=t.WpcomPluginInstallButton=function(e){function t(e){e.preventDefault(),f(i.slug);var t=(0,d.get)(o,"eligibilityHolds",[]),n=(0,d.get)(o,"eligibilityWarnings",[]),s=!!t.length,r=!!n.length;s||r?u("/plugins/"+i.slug+"/eligibility/"+a):c(l,null,i.slug)}var n=e.translate,s=e.disabled,i=e.plugin,a=e.siteSlug,l=e.siteId,o=e.eligibilityData,u=e.navigateTo,c=e.initiateTransfer,p=e.transferState,f=e.trackButtonAction;return v.transferStates.COMPLETE===p?null:r.default.createElement(g.default,{onClick:t,primary:!0,disabled:s},n("Install"))},y=function(e){var t=(0,h.getSelectedSite)(e);return{siteId:t.ID,siteSlug:t.slug,eligibilityData:(0,m.getEligibility)(e,t.ID),transferState:(0,m.getAutomatedTransferStatus)(e,t.ID)}},j={initiateTransfer:_.initiateThemeTransfer,trackButtonAction:function(e){return(0,b.recordTracksEvent)("calypso_automated_transfer_click_plugin_install",{plugin:e})}},S=function(e){return function(t){return r.default.createElement(e,(0,a.default)({},t,{navigateTo:p.default}))}};t.default=(0,u.connect)(y,j)(S((0,o.localize)(E)))},"./client/my-sites/plugins/plugin-install-button/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginInstallButton=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/classnames/index.js"),v=s(b),E=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/gridicons/build/index.js"),S=s(j),P=n("./client/lib/plugins/actions.js"),x=s(P),k=n("./client/components/button/index.jsx"),I=s(k),w=n("./client/components/info-popover/index.jsx"),T=s(w),N=n("./client/components/external-link/index.jsx"),C=s(N),A=n("./client/lib/site/utils.js"),U=s(A),D=n("./client/state/analytics/actions.js"),M=n("./client/components/data/query-site-connection-status/index.jsx"),L=s(M),O=n("./client/state/selectors/get-site-connection-status.js"),R=s(O),V=t.PluginInstallButton=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.installAction=function(){var e=s.props,t=e.isEmbed,n=e.selectedSite,i=e.siteId,a=e.isInstalling,l=e.plugin,r=e.notices,o=e.recordGoogleEvent,u=e.recordTracksEvent;a||(x.default.removePluginsNotices(r.completed.concat(r.errors)),x.default.installPlugin(n,l),t?(o("Plugins","Install with no selected site","Plugin Name",l.slug),u("calypso_plugin_install_click_from_sites_list",{site:i,plugin:l.slug})):(o("Plugins","Install on selected Site","Plugin Name",l.slug),u("calypso_plugin_install_click_from_plugin_info",{site:i,plugin:l.slug})))},s.updateJetpackAction=function(){var e=s.props,t=e.plugin,n=e.siteId,i=e.recordGoogleEvent,a=e.recordTracksEvent;i("Plugins","Update jetpack","Plugin Name",t.slug),a("calypso_plugin_update_jetpack",{site:n,plugin:t.slug})},s.clickSupportLink=function(){s.props.recordGoogleEvent("Plugins","Clicked How do I fix disabled plugin installs unresponsive site.")},s.clickSiteManagmentLink=function(){s.props.recordGoogleEvent("Plugins","Clicked How do I fix disabled plugin installs")},s.togglePopover=function(e){s.refs.infoPopover._onClick(e)},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getDisabledInfo",value:function(){var e=this.props,t=e.translate,n=e.selectedSite,s=e.siteId;if(!n)return null;if(n.options.is_multi_network)return t("%(site)s is part of a multi-network installation, which is not currently supported.",{args:{site:n.title}});if(!U.default.isMainNetworkSite(n))return t("Only the main site on a multi-site installation can install plugins.",{args:{site:n.title}});if(!n.canUpdateFiles&&n.options.file_mod_disabled){var i=U.default.getSiteFileModDisableReason(n,"modifyFiles"),a=[];if(i.length>1){a.push(_.default.createElement("p",{key:"reason-shell"},t("Plugin install is not available for %(site)s:",{args:{site:n.title}})));var l=i.map(function(e,t){return _.default.createElement("li",{key:"reason-i"+t+"-"+s},e)});a.push(_.default.createElement("ul",{className:"plugin-action__disabled-info-list",key:"reason-shell-list"},l))}else a.push(_.default.createElement("p",{key:"reason-shell"},t("Plugin install is not available for %(site)s. %(reason)s",{args:{site:n.title,reason:i[0]}})));return a.push(_.default.createElement(C.default,{key:"external-link",onClick:this.clickSiteManagmentLink,href:"https://jetpack.me/support/site-management/#file-update-disabled"},t("How do I fix this?"))),a}return null}},{key:"renderUnreachableNotice",value:function(){var e=this.props,t=e.translate,n=e.selectedSite,s=e.isEmbed;return _.default.createElement("div",{className:(0,v.default)({"plugin-install-button__install":!0,embed:s})},_.default.createElement("span",{onClick:this.togglePopover,ref:"disabledInfoLabel",className:"plugin-install-button__warning"},t("Site unreachable")),_.default.createElement(T.default,{position:"bottom left",popoverName:"Plugin Action Disabled Install",gaEventCategory:"Plugins",
ref:"infoPopover",ignoreContext:this.refs&&this.refs.disabledInfoLabel},_.default.createElement("div",null,_.default.createElement("p",null,t("%(site)s is unresponsive.",{args:{site:n.title}})),_.default.createElement(C.default,{key:"external-link",onClick:this.clickSupportLink,href:"http://jetpack.me/support/debug/?url="+n.URL},t("Debug site!")))))}},{key:"renderDisabledNotice",value:function(){var e=this.props,t=e.translate,n=e.selectedSite,s=e.isEmbed;if(!n.canUpdateFiles)return n.hasMinimumJetpackVersion?this.getDisabledInfo()?_.default.createElement("div",{className:(0,v.default)({"plugin-install-button__install":!0,embed:s})},_.default.createElement("span",{onClick:this.togglePopover,ref:"disabledInfoLabel",className:"plugin-install-button__warning"},t("Install Disabled")),_.default.createElement(T.default,{position:"bottom left",popoverName:"Plugin Action Disabled Install",gaEventCategory:"Plugins",ref:"infoPopover",ignoreContext:this.refs&&this.refs.disabledInfoLabel},this.getDisabledInfo())):null:_.default.createElement("div",{className:(0,v.default)({"plugin-install-button__install":!0,embed:s})},_.default.createElement("span",{className:"plugin-install-button__warning"},t("Jetpack 3.7 is required")),_.default.createElement(I.default,{compact:!0,onClick:this.updateJetpackAction,href:n.options.admin_url+"plugins.php?plugin_status=upgrade"},t("update",{context:"verb, update plugin button label"})))}},{key:"renderButton",value:function(){var e=this.props,t=e.translate,n=e.isInstalling,s=e.isEmbed,i=e.disabled,a=t(n?"Installingâ¦":"Install");return s?_.default.createElement("span",{className:"plugin-install-button__install embed"},n?_.default.createElement("span",{className:"plugin-install-button__installing"},a):_.default.createElement(I.default,{compact:!0,onClick:this.installAction,disabled:i},_.default.createElement(S.default,{key:"plus-icon",icon:"plus-small",size:18}),_.default.createElement(S.default,{icon:"plugins",size:18}),t("Install"))):_.default.createElement("span",{className:"plugin-install-button__install"},_.default.createElement(I.default,{onClick:this.installAction,primary:!0,disabled:n||i},a))}},{key:"renderNoticeOrButton",value:function(){var e=this.props,t=e.selectedSite,n=e.siteIsConnected;return n===!1?this.renderUnreachableNotice():t.canUpdateFiles?this.renderButton():this.renderDisabledNotice()}},{key:"render",value:function(){var e=this.props.siteId;return _.default.createElement("div",null,_.default.createElement(L.default,{siteId:e}),this.renderNoticeOrButton())}}]),t}(h.Component);V.propTypes={selectedSite:m.default.object.isRequired,plugin:m.default.object.isRequired,isEmbed:m.default.bool,isInstalling:m.default.bool,notices:m.default.object,isMock:m.default.bool,disabled:m.default.bool},t.default=(0,E.connect)(function(e,t){var n=t.selectedSite,s=n&&n.ID;return{siteId:s,siteIsConnected:(0,R.default)(e,s)}},{recordGoogleEvent:D.recordGoogleEvent,recordTracksEvent:D.recordTracksEvent})((0,y.localize)(V))},"./client/my-sites/plugins/plugin-item/plugin-item.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=void 0;for(n=0;n<t.length;n++){var s=t[n];if(!(0,j.isEqual)(e[s],this.props[s]))return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=s(a),r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=s(r),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=s(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=s(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),g=s(f),m=n("./node_modules/prop-types/index.js"),h=s(m),_=n("./node_modules/react/react.js"),b=s(_),v=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/classnames/index.js"),y=s(E),j=n("./node_modules/lodash/lodash.js"),S=n("./node_modules/i18n-calypso/index.js"),P=n("./client/components/card/compact.jsx"),x=s(P),k=n("./client/my-sites/plugins/plugin-icon/plugin-icon.jsx"),I=s(k),w=n("./client/my-sites/plugins/plugin-activate-toggle/index.jsx"),T=s(w),N=n("./client/my-sites/plugins/plugin-autoupdate-toggle/index.jsx"),C=s(N),A=n("./client/components/count/index.jsx"),U=s(A),D=n("./client/components/notice/index.jsx"),M=s(D),L=n("./client/lib/plugins/notices.jsx"),O=s(L),R=n("./client/state/notices/actions.js"),V=function(e){function t(){var e,n,s,i;(0,o.default)(this,t);for(var a=arguments.length,r=Array(a),u=0;u<a;u++)r[u]=arguments[u];return n=s=(0,p.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(r))),s.onItemClick=function(e){s.props.hasAllNoManageSites?(e.preventDefault(),s.showNoManageNotice()):s.props.isSelectable&&(e.preventDefault(),s.props.onClick(s))},i=n,(0,p.default)(s,i)}return(0,g.default)(t,e),(0,d.default)(t,[{key:"shouldComponentUpdate",value:function(e){var t=["plugin","sites","selectedSite","isMock","isSelectable","isSelected"];return!!i.call(this,e,t)||(this.props.hasAllNoManageSites!==e.hasAllNoManageSites||!(!this.props.notices||!O.default.shouldComponentUpdateNotices(this.props.notices,e.notices)))}},{key:"ago",value:function(e){return S.moment.utc(e,"YYYY-MM-DD hh:mma").fromNow()}},{key:"doing",value:function(){var e=this.props,t=e.translate,n=e.progress,s=n[0],i=(0,j.uniqBy)(n,function(e){return e.site.ID}),a={args:{count:i.length},count:i.length},l=void 0;switch(s&&s.action){case"UPDATE_PLUGIN":l=this.props.selectedSite?t("Updating",{context:"plugin"}):t("Updating on %(count)s site","Updating on %(count)s sites",a);break;case"ACTIVATE_PLUGIN":l=this.props.selectedSite?t("Activating",{context:"plugin"}):t("Activating on %(count)s site","Activating on %(count)s sites",a);break;case"DEACTIVATE_PLUGIN":l=this.props.selectedSite?t("Deactivating",{context:"plugin"}):t("Deactivating on %(count)s site","Deactivating on %(count)s sites",a);break;case"ENABLE_AUTOUPDATE_PLUGIN":l=this.props.selectedSite?t("Enabling autoupdates"):t("Enabling autoupdates on %(count)s site","Enabling autoupdates on %(count)s sites",a);break;case"DISABLE_AUTOUPDATE_PLUGIN":l=this.props.selectedSite?t("Disabling autoupdates"):t("Disabling autoupdates on %(count)s site","Disabling autoupdates on %(count)s sites",a);break;case"REMOVE_PLUGIN":l=this.props.selectedSite?t("Removing"):t("Removing from %(count)s site","Removing from %(count)s sites",a)}return l}},{key:"renderUpdateFlag",value:function(){var e=this.props,t=e.sites,n=e.translate,s=t.some(function(e){return e.plugin&&e.plugin.update&&e.plugin.update.recentlyUpdated});if(s)return b.default.createElement(M.default,{isCompact:!0,icon:"checkmark",status:"is-success",inline:!0,text:n("Updated")});var i=this.props.plugin.sites.map(function(e){return!(!e.plugin.update||!e.plugin.update.new_version)&&e.plugin.update.new_version}).filter(function(e){return e});return b.default.createElement(M.default,{isCompact:!0,icon:"sync",status:"is-warning",inline:!0,text:n("Version %(newPluginVersion)s is available",{args:{newPluginVersion:i[0]}})})}},{key:"pluginMeta",value:function(e){var t=this.props,n=t.progress,s=t.translate;if(n.length){var i=this.doing();if(i)return b.default.createElement(M.default,{isCompact:!0,status:"is-info",text:i,inline:!0})}return this.props.isAutoManaged?b.default.createElement("div",{className:"plugin-item__last-updated"},s("Auto-managed on this site")):this.props.hasUpdate(e)?this.renderUpdateFlag():e.last_updated?b.default.createElement("div",{className:"plugin-item__last-updated"},s("Last updated %(ago)s",{args:{ago:this.ago(e.last_updated)}})):null}},{key:"showNoManageNotice",value:function(){this.props.errorNotice(this.props.translate("Jetpack Manage is disabled for all the sites where this plugin is installed"),{id:"plugin-no-manage-error"})}},{key:"renderActions",value:function(){var e=this.props.allowedActions,t=e.activation,n=e.autoupdate;return b.default.createElement("div",{className:"plugin-item__actions"},t&&b.default.createElement(T.default,{isMock:this.props.isMock,plugin:this.props.plugin,disabled:this.props.isSelectable,site:this.props.selectedSite,notices:this.props.notices}),n&&b.default.createElement(C.default,{isMock:this.props.isMock,plugin:this.props.plugin,disabled:this.props.isSelectable,site:this.props.selectedSite,notices:this.props.notices,wporg:!!this.props.plugin.wporg}))}},{key:"renderSiteCount",value:function(){var e=this.props,t=e.sites,n=e.translate;return b.default.createElement("div",{className:"plugin-item__count"},n("Sites {{count/}}",{components:{count:b.default.createElement(U.default,{count:t.length})}}))}},{key:"renderPlaceholder",value:function(){return b.default.createElement(x.default,{className:"plugin-item is-placeholder"},b.default.createElement("div",{className:"plugin-item__link"},b.default.createElement(I.default,{isPlaceholder:!0}),b.default.createElement("div",{className:"plugin-item__info"},b.default.createElement("div",{className:"plugin-item__title is-placeholder"}))))}},{key:"render",value:function(){var e=this.props.plugin;if(!e)return this.renderPlaceholder();var t=this.props.hasAllNoManageSites,n=b.default.createElement("div",{className:"plugin-item__title"},e.name),s=null;this.props.selectedSite?t||(s=this.renderActions()):s=this.renderSiteCount();var i=(0,y.default)("plugin-item",{disabled:t});return b.default.createElement(x.default,{className:i},t||!this.props.isSelectable?null:b.default.createElement("input",{className:"plugin-item__checkbox",id:e.slug,type:"checkbox",onClick:this.props.onClick,checked:this.props.isSelected,readOnly:!0}),b.default.createElement("a",{className:"plugin-item__link",href:this.props.pluginLink,onClick:this.onItemClick},b.default.createElement(I.default,{image:e.icon}),b.default.createElement("div",{className:"plugin-item__info"},n,this.pluginMeta(e))),s)}}]),t}(_.Component);V.propTypes={plugin:h.default.object,sites:h.default.array,isSelected:h.default.bool,isSelectable:h.default.bool,onClick:h.default.func,pluginLink:h.default.string,allowedActions:h.default.shape({activation:h.default.bool,autoupdate:h.default.bool}),isAutoManaged:h.default.bool,progress:h.default.array,notices:h.default.shape({completed:h.default.array,errors:h.default.array,inProgress:h.default.array}),hasAllNoManageSites:h.default.bool,hasUpdate:h.default.func},V.defaultProps={allowedActions:{activation:!0,autoupdate:!0},progress:[],isAutoManaged:!1,hasUpdate:function(){return!1}},t.default=(0,j.flowRight)((0,v.connect)(null,{errorNotice:R.errorNotice}),S.localize)(V),e.exports=t.default},"./client/my-sites/plugins/plugin-list-header/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginsListHeader=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/lodash/lodash.js"),E=n("./node_modules/react-dom/index.js"),y=n("./node_modules/classnames/index.js"),j=s(y),S=n("./node_modules/gridicons/build/index.js"),P=s(S),x=n("./client/components/section-header/index.jsx"),k=s(x),I=n("./client/components/button-group/index.jsx"),w=s(I),T=n("./client/components/button/index.jsx"),N=s(T),C=n("./client/components/select-dropdown/index.jsx"),A=s(C),U=n("./client/components/select-dropdown/item.jsx"),D=s(U),M=n("./client/components/select-dropdown/separator.jsx"),L=s(M),O=n("./client/components/bulk-select/index.jsx"),R=s(O),V=n("./client/lib/analytics/index.js"),F=s(V),G=57,B=600,W=t.PluginsListHeader=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={actionBarVisible:!0},s.toggleBulkManagement=function(){s.props.toggleBulkManagement(),s.maybeMakeActionBarVisible()},s.afterResize=function(){s.props.isBulkManagementActive&&s.maybeMakeActionBarVisible()},s.unselectOrSelectAll=function(){var e=s.props,t=e.plugins,n=e.selected,i=n.length>0;s.props.setSelectionState(t,!i),F.default.ga.recordEvent("Plugins",i?"Clicked to Uncheck All Plugins":"Clicked to Check All Plugins")},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.debouncedAfterResize=(0,v.debounce)(this.afterResize,100),window.addEventListener("resize",this.debouncedAfterResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedAfterResize)}},{key:"maybeMakeActionBarVisible",value:function(){var e=this,t=(0,E.findDOMNode)(this);t.offsetWidth<B||setTimeout(function(){var n=t.offsetHeight<=G;e.setState({actionBarVisible:n})},1)}},{key:"isJetpackSelected",value:function(){return this.props.selected.some(function(e){return"jetpack"===e.slug})}},{key:"canUpdatePlugins",value:function(){return this.props.selected.some(function(e){return e.sites.some(function(e){return e.canUpdateFiles})})}},{key:"needsRemoveButton",value:function(){return this.props.selected.length&&this.canUpdatePlugins()&&!this.isJetpackSelected()}},{key:"renderCurrentActionButtons",value:function(){var e=this.props.translate,t=this.isJetpackSelected(),n=this.needsRemoveButton(),s=[],i=[],a=[],l=[],r=[];if(this.props.isBulkManagementActive){var o=_.default.createElement(N.default,{key:"plugin-list-header__buttons-update",disabled:!this.props.haveUpdatesSelected,compact:!0,primary:!0,onClick:this.props.updateSelected},e("Update"));a.push(_.default.createElement(w.default,{key:"plugin-list-header__buttons-update-button"},o)),r.push(_.default.createElement(N.default,{key:"plugin-list-header__buttons-activate",disabled:!this.props.haveInactiveSelected,onClick:this.props.activateSelected,compact:!0},e("Activate"))),r.push(_.default.createElement(N.default,{compact:!0,key:"plugin-list-header__buttons-deactivate",disabled:!this.props.haveActiveSelected,onClick:t?this.props.deactiveAndDisconnectSelected:this.props.deactivateSelected},e("Deactivate"))),t&&1===this.props.selected.length||a.push(_.default.createElement(w.default,{key:"plugin-list-header__buttons-activate-buttons"},r)),l.push(_.default.createElement(N.default,{key:"plugin-list-header__buttons-autoupdate-on",disabled:!this.canUpdatePlugins(),compact:!0,onClick:this.props.setAutoupdateSelected},e("Autoupdate"))),l.push(_.default.createElement(N.default,{key:"plugin-list-header__buttons-autoupdate-off",disabled:!this.canUpdatePlugins(),compact:!0,onClick:this.props.unsetAutoupdateSelected},e("Disable Autoupdates"))),a.push(_.default.createElement(w.default,{key:"plugin-list-header__buttons-update-buttons"},l)),a.push(_.default.createElement(w.default,{key:"plugin-list-header__buttons-remove-button"},_.default.createElement(N.default,{compact:!0,scary:!0,disabled:!n,onClick:this.props.removePluginNotice},e("Remove")))),i.push(_.default.createElement("button",{key:"plugin-list-header__buttons-close-button",className:"plugin-list-header__section-actions-close",onClick:this.props.toggleBulkManagement},_.default.createElement("span",{className:"plugin-list-header__screen-reader-text"},e("Close")),_.default.createElement(P.default,{icon:"cross"})))}else 0<this.props.pluginUpdateCount&&i.push(_.default.createElement(w.default,{key:"plugin-list-header__buttons-update-all"},_.default.createElement(N.default,{compact:!0,primary:!0,onClick:this.props.updateAllPlugins},e("Update %(numUpdates)d Plugin","Update %(numUpdates)d Plugins",{context:"button label",count:this.props.pluginUpdateCount,args:{numUpdates:this.props.pluginUpdateCount}})))),i.push(_.default.createElement(w.default,{key:"plugin-list-header__buttons-bulk-management"},_.default.createElement(N.default,{compact:!0,onClick:this.toggleBulkManagement},e("Edit All",{context:"button label"}))));return s.push(_.default.createElement("span",{key:"plugin-list-header__buttons-action-buttons",className:"plugin-list-header__action-buttons"},a)),s.push(_.default.createElement("span",{key:"plugin-list-header__buttons-global-buttons",className:"plugin-list-header__mode-buttons"},i)),s}},{key:"renderCurrentActionDropdown",value:function(){var e=this.props,t=e.translate,n=e.selected,s=e.isBulkManagementActive;if(!s)return null;var i=this.isJetpackSelected(),a=this.needsRemoveButton(),l=!(i&&1===n.length);return _.default.createElement(A.default,{compact:!0,className:"plugin-list-header__actions-dropdown",key:"plugin-list-header__actions_dropdown",selectedText:t("Actions")},_.default.createElement(D.default,{key:"plugin__actions_title",selected:!0,value:"Actions"},t("Actions")),_.default.createElement(L.default,{key:"plugin__actions_separator_1"}),_.default.createElement(D.default,{key:"plugin__actions_activate",disabled:!this.props.haveUpdatesSelected,onClick:this.props.updateSelected},t("Update")),_.default.createElement(L.default,{key:"plugin__actions_separator_1"}),l&&_.default.createElement(D.default,{key:"plugin__actions_activate",disabled:!this.props.haveInactiveSelected,onClick:this.props.activateSelected},t("Activate")),l&&_.default.createElement(D.default,{key:"plugin__actions_disconnect",disabled:!this.props.haveActiveSelected,onClick:i?this.props.deactiveAndDisconnectSelected:this.props.deactivateSelected},t("Deactivate")),_.default.createElement(L.default,{key:"plugin__actions_separator_2"}),_.default.createElement(D.default,{key:"plugin__actions_autoupdate",disabled:!this.canUpdatePlugins(),onClick:this.props.setAutoupdateSelected},t("Autoupdate")),_.default.createElement(D.default,{key:"plugin__actions_disable_autoupdate",disabled:!this.canUpdatePlugins(),onClick:this.props.unsetAutoupdateSelected},t("Disable Autoupdates")),_.default.createElement(L.default,{key:"plugin__actions_separator_3"}),_.default.createElement(D.default,{key:"plugin__actions_remove",className:"plugin-list-header__actions-remove-item",disabled:!a,onClick:this.props.removePluginNotice},t("Remove")))}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.selected,s=e.plugins,i=e.isBulkManagementActive,a=(0,j.default)({"plugin-list-header":!0,"is-bulk-editing":i,"is-action-bar-visible":this.state.actionBarVisible});return _.default.createElement(k.default,{label:t,className:a},i&&_.default.createElement(R.default,{key:"plugin-list-header__bulk-select",totalElements:s.length,selectedElements:n.length,onToggle:this.unselectOrSelectAll}),this.renderCurrentActionDropdown(),this.renderCurrentActionButtons())}}]),t}(h.PureComponent);W.defaultProps={isMock:!1,disabled:!1},W.propTypes={label:m.default.string,isBulkManagementActive:m.default.bool,toggleBulkManagement:m.default.func.isRequired,updateAllPlugins:m.default.func.isRequired,updateSelected:m.default.func.isRequired,haveUpdatesSelected:m.default.bool,pluginUpdateCount:m.default.number.isRequired,activateSelected:m.default.func.isRequired,deactiveAndDisconnectSelected:m.default.func.isRequired,deactivateSelected:m.default.func.isRequired,setAutoupdateSelected:m.default.func.isRequired,setSelectionState:m.default.func.isRequired,unsetAutoupdateSelected:m.default.func.isRequired,removePluginNotice:m.default.func.isRequired,haveActiveSelected:m.default.bool,haveInactiveSelected:m.default.bool,bulkManagement:m.default.bool,selectedSiteSlug:m.default.string,plugins:m.default.array.isRequired,selected:m.default.array.isRequired},t.default=(0,b.localize)(W)},"./client/my-sites/plugins/plugin-meta/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),g=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(g),h=n("./node_modules/prop-types/index.js"),_=s(h),b=n("./node_modules/react/react.js"),v=s(b),E=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/classnames/index.js"),j=s(y),S=n("./node_modules/i18n-calypso/index.js"),P=s(S),x=n("./node_modules/lodash/lodash.js"),k=n("./node_modules/gridicons/build/index.js"),I=s(k),w=n("./client/lib/analytics/index.js"),T=s(w),N=n("./client/components/button/index.jsx"),C=s(N),A=n("./client/components/card/index.jsx"),U=s(A),D=n("./client/components/card/compact.jsx"),M=s(D),L=n("./client/components/count/index.jsx"),O=s(L),R=n("./client/components/notice/notice-action.jsx"),V=s(R),F=n("./client/components/external-link/index.jsx"),G=s(F),B=n("./client/components/notice/index.jsx"),W=s(B),z=n("./client/my-sites/plugins/plugin-icon/plugin-icon.jsx"),q=s(z),H=n("./client/lib/plugins/actions.js"),J=s(H),Y=n("./client/my-sites/plugins/plugin-activate-toggle/index.jsx"),Q=s(Y),Z=n("./client/my-sites/plugins/plugin-autoupdate-toggle/index.jsx"),K=s(Z),X=n("./client/lib/safe-protocol-url/index.js"),$=s(X),ee=n("./client/config/index.js"),te=s(ee),ne=n("./client/my-sites/plugins/plugin-install-button/index.jsx"),se=s(ne),ie=n("./client/my-sites/plugins/plugin-remove-button/index.jsx"),ae=s(ie),le=n("./client/my-sites/plugins/plugin-information/index.jsx"),re=s(le),oe=n("./client/my-sites/plugins/plugin-install-button-wpcom/index.jsx"),ue=s(oe),de=n("./client/my-sites/plugins/plugin-automated-transfer/index.jsx"),ce=s(de),pe=n("./client/my-sites/plugins/utils.js"),fe=n("./client/lib/site/utils.js"),ge=n("./client/components/banner/index.jsx"),me=s(ge),he=n("./client/lib/plans/constants.js"),_e=n("./client/lib/products-values/index.js"),be=n("./client/lib/route/path.js"),ve=n("./client/state/ui/selectors.js"),Ee=n("./client/state/sites/selectors.js"),ye=n("./client/state/selectors/is-automated-transfer-active.js"),je=s(ye),Se=n("./client/state/selectors/is-site-automated-transfer.js"),Pe=s(Se),xe=n("./client/components/data/query-atat-eligibility/index.jsx"),ke=s(xe),Ie=n("./client/lib/automated-transfer/index.js"),we=function(e){function t(){var e,n,s,i;(0,u.default)(this,t);for(var a=arguments.length,l=Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=s=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.isWpcomPreinstalled=function(){var e=["Jetpack by WordPress.com","Akismet","VaultPress"];return!!s.props.selectedSite&&(!s.props.selectedSite.jetpack&&(0,x.includes)(e,s.props.plugin.name))},s.handlePluginUpdatesSingleSite=function(e){e.preventDefault(),J.default.updatePlugin(s.props.sites[0],s.props.sites[0].plugin),T.default.ga.recordEvent("Plugins","Clicked Update Selected Site Plugin","Plugin Name",s.props.pluginSlug),T.default.tracks.recordEvent("calypso_plugins_actions_update_plugin",{site:s.props.sites[0].ID,plugin:s.props.sites[0].plugin.slug,selected_site:s.props.sites[0].ID})},s.handlePluginUpdatesMultiSite=function(e){e.preventDefault(),s.props.sites.forEach(function(e){var t=e.plugin;e.canUpdateFiles&&t.update&&"error"!==t.update&&t.update.new_version&&(J.default.updatePlugin(e,t),J.default.removePluginsNotices(s.props.notices.completed.concat(s.props.notices.errors)),T.default.tracks.recordEvent("calypso_plugins_actions_update_plugin_all_sites",{site:e,plugin:t.slug}))}),T.default.ga.recordEvent("Plugins","Clicked Update All Sites Plugin","Plugin Name",s.props.pluginSlug)},i=n,(0,f.default)(s,i)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"displayBanner",value:function(){if(this.props.plugin&&this.props.plugin.banners&&(this.props.plugin.banners.high||this.props.plugin.banners.low))return v.default.createElement("div",{className:"plugin-meta__banner"},v.default.createElement("img",{className:"plugin-meta__banner-image",src:this.props.plugin.banners.high||this.props.plugin.banners.low}))}},{key:"hasBusinessPlan",value:function(){return!!this.props.selectedSite&&((0,_e.isBusiness)(this.props.selectedSite.plan)||(0,_e.isEnterprise)(this.props.selectedSite.plan))}},{key:"renderActions",value:function(){if(!this.props.selectedSite)return v.default.createElement("div",{className:"plugin-meta__actions"},v.default.createElement("div",{className:"plugin-item__count"},this.props.translate("Sites {{count/}}",{components:{count:v.default.createElement(O.default,{count:this.props.sites.length})}})));if(!(this.props.isPlaceholder||null===this.props.isInstalledOnSite&&this.props.selectedSite.jetpack)){if(this.isWpcomPreinstalled())return v.default.createElement("div",{className:"plugin-meta__actions"},v.default.createElement(C.default,{className:"plugin-meta__active",compact:!0,borderless:!0},v.default.createElement(I.default,{icon:"checkmark"}),this.props.translate("Active")));if(this.props.isInstalledOnSite===!1||!this.props.selectedSite.jetpack)return v.default.createElement("div",{className:"plugin-meta__actions"}," ",this.getInstallButton()," ");var e=this.props.allowedActions,t=e.autoupdate,n=e.activation,s=e.remove;return v.default.createElement("div",{className:"plugin-meta__actions"},n&&v.default.createElement(Q.default,{plugin:this.props.plugin,site:this.props.selectedSite,notices:this.props.notices,isMock:this.props.isMock}),t&&v.default.createElement(K.default,{plugin:this.props.plugin,site:this.props.selectedSite,notices:this.props.notices,wporg:this.props.plugin.wporg,isMock:this.props.isMock}),s&&v.default.createElement(ae.default,{plugin:this.props.plugin,site:this.props.selectedSite,notices:this.props.notices,isMock:this.props.isMock}))}}},{key:"renderName",value:function(){if(this.props.plugin&&this.props.plugin.name)return v.default.createElement("div",{className:"plugin-meta__name"},this.props.plugin.name)}},{key:"renderAuthorUrl",value:function(){if(this.props.plugin&&this.props.plugin.author_url&&this.props.plugin.author_name){var e=v.default.createElement(G.default,{className:"plugin-meta__author",href:(0,$.default)(this.props.plugin.author_url),target:"_blank"},this.props.plugin.author_name);return this.props.translate("By {{linkToAuthor/}}",{components:{linkToAuthor:e}})}}},{key:"isUnsupportedPluginForAT",value:function(){var e=this.props.plugin,t=["nginx-helper","w3-total-cache","wp-rocket","wp-super-cache","bwp-minify","wordpress-database-reset","wordpress-reset","wp-reset","advanced-reset-wp","advanced-wp-reset"];return(0,x.includes)(t,e.slug)}},{key:"isWpcomInstallDisabled",value:function(){var e=this.props.isTransfering;return!this.hasBusinessPlan()||this.isUnsupportedPluginForAT()||e}},{key:"isJetpackInstallDisabled",value:function(){var e=this.props.automatedTransferSite;return e&&this.isUnsupportedPluginForAT()}},{key:"getInstallButton",value:function(){var e=this.props.selectedSite;return e&&e.jetpack&&this.hasOrgInstallButton()?v.default.createElement(se.default,(0,a.default)({disabled:this.isJetpackInstallDisabled()},this.props)):e&&!e.jetpack?v.default.createElement(ue.default,{disabled:this.isWpcomInstallDisabled(),plugin:this.props.plugin}):void 0}},{key:"maybeDisplayUnsupportedNotice",value:function(){var e=this.props,t=e.selectedSite,n=e.automatedTransferSite;if(t&&this.isUnsupportedPluginForAT()&&(!t.jetpack||n))return v.default.createElement(W.default,{text:this.props.translate("Incompatible plugin: This plugin is not supported on WordPress.com."),status:"is-warning",showDismiss:!1},v.default.createElement(V.default,{href:"https://support.wordpress.com/incompatible-plugins/"},this.props.translate("More info")))}},{key:"isOutOfDate",value:function(){if(this.props.plugin&&this.props.plugin.last_updated){var e=(0,S.moment)(this.props.plugin.last_updated,"YYYY-MM-DD");return(0,S.moment)().diff(e,"years")>=this.OUT_OF_DATE_YEARS}return!1}},{key:"getVersionWarning",value:function(){var e=this.getAvailableNewVersions();return this.isOutOfDate()&&0===e.length?v.default.createElement(W.default,{className:"plugin-meta__version-notice",text:this.props.translate("This plugin hasn't been updated in over 2 years. It may no longer be maintained or supported and may have compatibility issues when used with more recent versions of WordPress"),status:"is-warning",showDismiss:!1}):te.default.isEnabled("manage/plugins/compatibility-warning")&&!this.isVersionCompatible()?v.default.createElement(W.default,{className:"plugin-meta__version-notice",text:P.default.translate("The new version of this plugin may not be compatible with your version of WordPress"),status:"is-warning",showDismiss:!1}):void 0}},{key:"getUpdateWarning",value:function(){var e=this.getAvailableNewVersions();if(e.length>0){if(this.props.selectedSite)return v.default.createElement(W.default,{status:"is-warning",className:"plugin-meta__version-notice",showDismiss:!1,icon:"sync",text:P.default.translate("Version %(newPluginVersion)s is available",{args:{newPluginVersion:e[0].newVersion}})},v.default.createElement(V.default,{onClick:this.handlePluginUpdatesSingleSite},P.default.translate("Update")));var t=e.length>1?P.default.translate("Version %(newPluginVersion)s is available for %(numberOfSites)s sites",{args:{numberOfSites:e.length,newPluginVersion:this.props.plugin.version}}):P.default.translate("Version %(newPluginVersion)s is available for %(siteName)s",{args:{siteName:e[0].title,newPluginVersion:this.props.plugin.version}}),n=e.length>1?P.default.translate("Update all"):P.default.translate("Update");return v.default.createElement(W.default,{status:"is-warning",className:"plugin-meta__version-notice",showDismiss:!1,icon:"sync",text:t},v.default.createElement(V.default,{onClick:this.handlePluginUpdatesMultiSite},n))}}},{key:"isVersionCompatible",value:function(){if(!this.props.selectedSite)return!0;if(!this.props.plugin.compatibility)return!0;if(!this.props.plugin.compatibility||0===this.props.plugin.compatibility.length)return!1;var e=this.props.selectedSite.options.software_version.split("-")[0];return(0,x.some)(this.props.plugin.compatibility,function(t){return 0===t.indexOf(e)})}},{key:"hasOrgInstallButton",value:function(){if(this.props.selectedSite)return!this.props.isInstalledOnSite&&(0,fe.userCan)("manage_options",this.props.selectedSite)&&this.props.selectedSite.jetpack}},{key:"getAvailableNewVersions",value:function(){return this.props.sites.map(function(e){return e.canUpdateFiles?e.plugin&&e.plugin.update&&"error"!==e.plugin.update&&e.plugin.update.new_version?{title:e.title,newVersion:e.plugin.update.new_version}:void 0:null}).filter(function(e){return e})}},{key:"render",value:function(){var e=(0,j.default)("plugin-meta__information",{"has-button":this.hasOrgInstallButton(),"has-site":!!this.props.selectedSite,"is-placeholder":!!this.props.isPlaceholder}),t=this.props.selectedSite&&this.props.sites[0]&&this.props.sites[0].plugin?this.props.sites[0].plugin:this.props.plugin,n=(!this.props.selectedSite||t.active)&&(0,pe.getExtensionSettingsPath)(t);return v.default.createElement("div",{className:"plugin-meta"},this.props.atEnabled&&this.props.selectedSite&&v.default.createElement(ke.default,{siteId:this.props.selectedSite.ID}),v.default.createElement(U.default,null,this.displayBanner(),v.default.createElement("div",{className:e},v.default.createElement("div",{className:"plugin-meta__detail"},v.default.createElement(q.default,{image:this.props.plugin&&this.props.plugin.icon,isPlaceholder:this.props.isPlaceholder}),this.renderName(),v.default.createElement("div",{className:"plugin-meta__meta"},this.renderAuthorUrl())),this.renderActions())),n&&v.default.createElement(M.default,{className:"plugin-meta__settings-link",href:(0,be.addSiteFragment)(n,this.props.slug)},this.props.translate("Edit plugin settings")),!this.props.isMock&&(0,x.get)(this.props.selectedSite,"jetpack")&&v.default.createElement(re.default,{
plugin:this.props.plugin,isPlaceholder:this.props.isPlaceholder,site:this.props.selectedSite,pluginVersion:t&&t.version,siteVersion:this.props.selectedSite&&this.props.selectedSite.options.software_version,hasUpdate:this.getAvailableNewVersions().length>0}),this.props.atEnabled&&this.maybeDisplayUnsupportedNotice(),this.props.atEnabled&&this.hasBusinessPlan()&&!(0,x.get)(this.props.selectedSite,"jetpack")&&v.default.createElement(ce.default,{plugin:this.props.plugin}),(this.props.selectedSite&&(0,x.get)(this.props.selectedSite,"jetpack")||this.hasBusinessPlan()||this.isWpcomPreinstalled())&&v.default.createElement("div",{style:{marginBottom:16}}),this.props.selectedSite&&!(0,x.get)(this.props.selectedSite,"jetpack")&&!this.hasBusinessPlan()&&!this.isWpcomPreinstalled()&&v.default.createElement("div",{className:"plugin-meta__upgrade_nudge"},v.default.createElement(me.default,{feature:he.FEATURE_UPLOAD_PLUGINS,event:"calypso_plugin_detail_page_upgrade_nudge",plan:he.PLAN_BUSINESS,title:this.props.translate("Upgrade to the Business plan to install plugins.")})),this.getVersionWarning(),this.getUpdateWarning())}}]),t}(b.Component);we.OUT_OF_DATE_YEARS=2,we.propTypes={siteURL:_.default.string,sites:_.default.array,notices:_.default.object,plugin:_.default.object.isRequired,isInstalledOnSite:_.default.bool,isPlaceholder:_.default.bool,isMock:_.default.bool,allowedActions:_.default.shape({activation:_.default.bool,autoupdate:_.default.bool,remove:_.default.bool})},we.defaultProps={allowedActions:{activation:!0,autoupdate:!0,remove:!0}};var Te=function(e){var t=(0,ve.getSelectedSiteId)(e),n=(0,ve.getSelectedSite)(e);return{atEnabled:(0,Ie.isATEnabled)(n),isTransferring:(0,je.default)(e,t),automatedTransferSite:(0,Pe.default)(e,t),slug:(0,Ee.getSiteSlug)(e,t)}};t.default=(0,E.connect)(Te)((0,S.localize)(we)),e.exports=t.default},"./client/my-sites/plugins/plugin-ratings/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/prop-types/index.js"),a=s(i),l=n("./node_modules/i18n-calypso/index.js"),r=n("./node_modules/react/react.js"),o=s(r),u=n("./node_modules/create-react-class/index.js"),d=s(u),c=n("./client/components/progress-bar/index.jsx"),p=s(c),f=n("./client/components/rating/index.jsx"),g=s(f),m=n("./client/lib/analytics/index.js"),h=s(m),_=(0,d.default)({displayName:"PluginRatings",propTypes:{rating:a.default.number,ratings:a.default.oneOfType([a.default.object,a.default.array]),downloaded:a.default.number,slug:a.default.string,numRatings:a.default.number},ratingTiers:[5,4,3,2,1],getDefaultProps:function(){return{barWidth:88}},buildReviewUrl:function(e){var t=this.props.slug;return"https://wordpress.org/support/plugin/"+t+"/reviews/?filter="+e},renderPlaceholder:function(){return o.default.createElement("div",{className:"plugin-ratings is-placeholder"},o.default.createElement("div",{className:"plugin-ratings__rating-stars"},o.default.createElement(g.default,{rating:0})),o.default.createElement("div",{className:"plugin-ratings__rating-text"},this.props.translate("Based on")))},renderRatingTier:function(e){var t=this.props,n=t.ratings,s=t.slug,i=t.numRatings,a=n&&n[e]?n[e]:0,l=function(){h.default.ga.recordEvent("Plugins","Clicked Plugin Ratings Link","Plugin Name",s)};return o.default.createElement("a",{className:"plugin-ratings__rating-container",key:"plugins-ratings__tier-"+e,target:"_blank",rel:"noopener noreferrer",onClick:l,href:this.buildReviewUrl(e)},o.default.createElement("span",{className:"plugin-ratings__rating-tier-text"},this.props.translate("%(ratingTier)s star","%(ratingTier)s stars",{count:e,args:{ratingTier:e}})),o.default.createElement("span",{className:"plugin-ratings__bar"},o.default.createElement(p.default,{value:a,total:i,title:this.props.translate("%(numberOfRatings)s ratings",{args:{numberOfRatings:a}})})))},renderDownloaded:function(){var e=this.props.downloaded;return e=e>1e5?this.props.numberFormat(1e4*Math.floor(e/1e4))+"+":e>1e4?this.props.numberFormat(1e3*Math.floor(e/1e3))+"+":this.props.numberFormat(e),o.default.createElement("div",{className:"plugin-ratings__downloads"},this.props.translate("%(installs)s downloads",{args:{installs:e}}))},render:function(){var e=this,t=this.props,n=t.placeholder,s=t.ratings,i=t.rating,a=t.numRatings;if(n)return this.renderPlaceholder();if(!s)return null;var l=this.ratingTiers.map(function(t){return e.renderRatingTier(t)});return o.default.createElement("div",{className:"plugin-ratings"},o.default.createElement("div",{className:"plugin-ratings__rating-stars"},o.default.createElement(g.default,{rating:i})),o.default.createElement("div",{className:"plugin-ratings__rating-text"},this.props.translate("Based on %(ratingsNumber)s rating","Based on %(ratingsNumber)s ratings",{count:a,args:{ratingsNumber:a}})),o.default.createElement("div",{className:"plugin-ratings__rating-tiers"},l),this.renderDownloaded())}});t.default=(0,l.localize)(_),e.exports=t.default},"./client/my-sites/plugins/plugin-remove-button/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/gridicons/build/index.js"),b=s(_),v=n("./client/lib/analytics/index.js"),E=s(v),y=n("./client/lib/accept/index.js"),j=s(y),S=n("./client/lib/plugins/log-store.js"),P=s(S),x=n("./client/my-sites/plugins/plugin-action/plugin-action.jsx"),k=s(x),I=n("./client/lib/plugins/actions.js"),w=s(I),T=n("./client/components/external-link/index.jsx"),N=s(T),C=n("./client/lib/site/utils.js"),A=s(C),U=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.removeAction=function(){(0,j.default)(s.props.translate("Are you sure you want to remove {{strong}}%(pluginName)s{{/strong}} from %(siteName)s? {{br /}} {{em}}This will deactivate the plugin and delete all associated files and data.{{/em}}",{components:{em:m.default.createElement("em",null),br:m.default.createElement("br",null),strong:m.default.createElement("strong",null)},args:{pluginName:s.props.plugin.name,siteName:s.props.site.title}}),s.processRemovalConfirmation,s.props.translate("Remove"))},s.processRemovalConfirmation=function(e){e&&(w.default.removePluginsNotices(s.props.notices.completed.concat(s.props.notices.errors)),w.default.removePlugin(s.props.site,s.props.plugin),s.props.isEmbed?(E.default.ga.recordEvent("Plugins","Remove plugin with no selected site","Plugin Name",s.props.plugin.slug),E.default.tracks.recordEvent("calypso_plugin_remove_click_from_sites_list",{site:s.props.site.ID,plugin:s.props.plugin.slug})):(E.default.ga.recordEvent("Plugins","Remove plugin on selected Site","Plugin Name",s.props.plugin.slug),E.default.tracks.recordEvent("calypso_plugin_remove_click_from_plugin_info",{site:s.props.site.ID,plugin:s.props.plugin.slug})))},s.getDisabledInfo=function(){if(!s.props.site)return null;if(!s.props.site.hasMinimumJetpackVersion)return s.props.translate("%(site)s is not running an up to date version of Jetpack",{args:{site:s.props.site.title}});if(s.props.site.options.is_multi_network)return s.props.translate("%(site)s is part of a multi-network installation, which is not currently supported.",{args:{site:s.props.site.title}});if(!A.default.isMainNetworkSite(s.props.site))return s.props.translate("%(pluginName)s cannot be removed because %(site)s is not the main site of the multi-site installation.",{args:{site:s.props.site.title,pluginName:s.props.plugin.name}});if(!s.props.site.canUpdateFiles&&s.props.site.options.file_mod_disabled){var e=A.default.getSiteFileModDisableReason(s.props.site,"modifyFiles"),t=[];if(e.length>1){t.push(m.default.createElement("p",{key:"reason-shell"},s.props.translate("%(pluginName)s cannot be removed:",{args:{pluginName:s.props.plugin.name}})));var n=e.map(function(e,t){return m.default.createElement("li",{key:"reason-i"+t+"-"+s.props.site.ID},e)});t.push(m.default.createElement("ul",{className:"plugin-action__disabled-info-list",key:"reason-shell-list"},n))}else t.push(m.default.createElement("p",{key:"reason-shell"},s.props.translate("%(pluginName)s cannot be removed. %(reason)s",{args:{pluginName:s.props.plugin.name,reason:e[0]}})));return t.push(m.default.createElement(N.default,{key:"external-link",onClick:E.default.ga.recordEvent.bind(s,"Plugins","Clicked How do I fix diabled plugin removal."),href:"https://jetpack.me/support/site-management/#file-update-disabled"},s.props.translate("How do I fix this?"))),t}return null},s.renderButton=function(){var e=P.default.isInProgressAction(s.props.site.ID,s.props.plugin.slug,["REMOVE_PLUGIN"]),t=s.getDisabledInfo(),n=t?s.props.translate("Removal Disabled",{context:'this goes next to an icon that displays if site is in a state where it can\'t modify has "Removal Disabled" '}):s.props.translate("Remove",{context:"Verb. Presented to user as a label for a button."});return e?m.default.createElement("span",{className:"plugin-action plugin-remove-button__remove"},s.props.translate("Removingâ¦")):m.default.createElement(k.default,{label:n,htmlFor:"remove-plugin-"+s.props.site.ID,action:s.removeAction,disabledInfo:t,className:"plugin-remove-button__remove-link"},m.default.createElement("a",{onClick:s.removeAction,className:"plugin-remove-button__remove-icon"},m.default.createElement(b.default,{icon:"trash",size:18})))},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.site.jetpack?"jetpack"===this.props.plugin.slug?null:this.renderButton():null}}]),t}(m.default.Component);U.displayName="PluginRemoveButton",t.default=(0,h.localize)(U),e.exports=t.default},"./client/my-sites/plugins/plugin-sections/custom.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/i18n-calypso/index.js"),r=n("./client/components/card/index.jsx"),o=s(r),u=n("./client/components/section-nav/item.jsx"),d=s(u),c=n("./client/components/section-nav/tabs.jsx"),p=s(c),f=n("./client/components/section-nav/index.jsx"),g=s(f),m=n("./client/lib/plugins/utils.js"),h=function(e){var t=e.plugin,n=e.translate,s=(0,m.sanitizeSectionContent)(t.description);return s.length?a.default.createElement("div",{className:"plugin-sections__custom plugin-sections"},a.default.createElement("div",{className:"plugin-sections__header"},a.default.createElement(g.default,{selectedText:n("Description")},a.default.createElement(p.default,null,a.default.createElement(d.default,{selected:!0},n("Description"))))),a.default.createElement(o.default,null,a.default.createElement("div",{className:"plugin-sections__content",dangerouslySetInnerHTML:{__html:s}}))):null};t.default=(0,l.localize)(h),e.exports=t.default},"./client/my-sites/plugins/plugin-sections/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/lodash/lodash.js"),m=n("./node_modules/i18n-calypso/index.js"),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/to-title-case/index.js"),v=s(b),E=n("./node_modules/classnames/index.js"),y=s(E),j=n("./node_modules/gridicons/build/index.js"),S=s(j),P=n("./client/lib/analytics/index.js"),x=s(P),k=n("./client/components/card/index.jsx"),I=s(k),w=n("./client/components/section-nav/index.jsx"),T=s(w),N=n("./client/components/section-nav/tabs.jsx"),C=s(N),A=n("./client/components/section-nav/item.jsx"),U=s(A),D=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={selectedSection:!1,readMore:!1},s._COLLAPSED_DESCRIPTION_HEIGHT=140,s.descriptionHeight=0,s.recordEvent=function(e){x.default.ga.recordEvent("Plugins",e,"Plugin Name",s.props.plugin.slug)},s.getFilteredSections=function(){return s.props.isWpcom?s.getWpcomFilteredSections():[{key:"description",title:s.props.translate("Description",{context:"Navigation item",textOnly:!0})},{key:"installation",title:s.props.translate("Installation",{context:"Navigation item",textOnly:!0})},{key:"changelog",title:s.props.translate("Changelog",{context:"Navigation item",textOnly:!0})},{key:"faq",title:s.props.translate("FAQs",{context:"Navigation item",textOnly:!0})},{key:"other_notes",title:s.props.translate("Other Notes",{context:"Navigation item",textOnly:!0})}]},s.getWpcomFilteredSections=function(){return[{key:"description",title:s.props.translate("Description",{context:"Navigation item",textOnly:!0})}]},s.getSelected=function(){return s.state.selectedSection||s.getDefaultSection()},s.getDefaultSection=function(){var e=s.props.plugin.sections;return(0,g.find)(s.getFilteredSections(),function(t){return e[t.key]}).key},s.getAvailableSections=function(){var e=s.props.plugin.sections;return(0,g.filter)(s.getFilteredSections(),function(t){return e[t.key]})},s.getNavTitle=function(e){var t=(0,g.find)(s.getFilteredSections(),function(t){return t.key===e});return t&&t.title?t.title:(0,v.default)(e)},s.setSelectedSection=function(e,t){s.setState({readMore:!1!==s.state.readMore||s.getSelected()!==e,selectedSection:e}),t&&s.recordEvent("Clicked Section Tab: "+e)},s.toggleReadMore=function(){s.setState({readMore:!s.state.readMore})},s.renderReadMore=function(){if(s.props.isWpcom||s.descriptionHeight<s._COLLAPSED_DESCRIPTION_HEIGHT)return null;var e=_.default.createElement("button",{className:"plugin-sections__read-more-link",onClick:s.toggleReadMore},_.default.createElement("span",{className:"plugin-sections__read-more-text"},s.props.translate("Read More")),_.default.createElement(S.default,{icon:"chevron-down",size:18}));return _.default.createElement("div",{className:"plugin-sections__read-more"},s.state.readMore?null:e)},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidUpdate",value:function(){if(this.refs.content){var e=this.refs.content;e&&e.offsetHeight&&(this.descriptionHeight=e.offsetHeight)}}},{key:"render",value:function(){var e=(0,y.default)("plugin-sections__content",{trimmed:!this.props.isWpcom&&!this.state.readMore});return this.props.plugin&&this.props.plugin.sections&&this.getAvailableSections()?_.default.createElement("div",{className:"plugin-sections"},_.default.createElement("div",{className:"plugin-sections__header"},_.default.createElement(T.default,{selectedText:this.getNavTitle(this.getSelected())},_.default.createElement(C.default,null,this.getAvailableSections().map(function(e){return _.default.createElement(U.default,{key:e.key,onClick:this.setSelectedSection.bind(this,e.key),selected:this.getSelected()===e.key},e.title)},this)))),_.default.createElement(I.default,null,_.default.createElement("div",{ref:"content",className:e,dangerouslySetInnerHTML:{__html:this.props.plugin.sections[this.getSelected()]}}),this.renderReadMore())):null}}]),t}(_.default.Component);D.displayName="PluginSections",t.default=(0,m.localize)(D),e.exports=t.default},"./client/my-sites/plugins/plugin-site-disabled-manage/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/lodash/lodash.js"),l=n("./node_modules/i18n-calypso/index.js"),r=n("./node_modules/react/react.js"),o=s(r),u=n("./client/lib/analytics/index.js"),d=s(u),c=n("./client/components/button/index.jsx"),p=s(c),f=n("./client/my-sites/plugins/disconnect-jetpack/disconnect-jetpack-button.jsx"),g=s(f),m=n("./client/state/sites/selectors.js"),h=function(e){var t=e.isNetwork,n=e.plugin,s=e.remoteManagementUrl,i=e.site,a=e.translate,l=s+"&section=plugins",r=a(t?"Network management disabled":"Management disabled"),u=function(){d.default.ga.recordEvent("Jetpack Manage","Clicked Enable Jetpack Manage Link")};return"jetpack"===n.slug?o.default.createElement("span",{className:"plugin-site-disabled-manage"},o.default.createElement("span",{className:"plugin-site-disabled-manage__label"},r),o.default.createElement(g.default,{disabled:!n,site:i,redirect:"/plugins/jetpack"})):o.default.createElement("span",{className:"plugin-site-disabled-manage"},o.default.createElement("span",{className:"plugin-site-disabled-manage__label"},r),o.default.createElement(p.default,{compact:!0,className:"plugin-site-disabled-manage__link",href:l,onClick:u},a("Enable")))};t.default=(0,i.connect)(function(e,t){return{remoteManagementUrl:(0,m.getJetpackSiteRemoteManagementUrl)(e,(0,a.get)(t,"site.ID"))}})((0,l.localize)(h)),e.exports=t.default},"./client/my-sites/plugins/plugin-site-jetpack/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/react/react.js"),_=s(h),b=n("./node_modules/i18n-calypso/index.js"),v=n("./client/components/foldable-card/index.jsx"),E=s(v),y=n("./client/lib/plugins/log-store.js"),j=s(y),S=n("./client/my-sites/plugins/plugin-activate-toggle/index.jsx"),P=s(S),x=n("./client/my-sites/plugins/plugin-autoupdate-toggle/index.jsx"),k=s(x),I=n("./client/my-sites/plugins/plugin-site-update-indicator/index.jsx"),w=s(I),T=n("./client/my-sites/plugins/plugin-install-button/index.jsx"),N=s(T),C=n("./client/my-sites/plugins/plugin-remove-button/index.jsx"),A=s(C),U=n("./client/my-sites/plugins/plugin-site-disabled-manage/index.jsx"),D=s(U),M=n("./client/blocks/site/index.jsx"),L=s(M),O=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.renderInstallButton=function(){var e=j.default.isInProgressAction(s.props.site.ID,s.props.plugin.slug,"INSTALL_PLUGIN");return _.default.createElement(N.default,{isEmbed:!0,notices:s.props.notices,selectedSite:s.props.site,plugin:s.props.plugin,isInstalling:e})},s.renderInstallPlugin=function(){return _.default.createElement(E.default,{compact:!0,className:"plugin-site-jetpack",header:_.default.createElement(L.default,{site:s.props.site,indicator:!1}),actionButton:s.renderInstallButton()})},s.renderPluginSite=function(){var e=s.props.allowedActions,t=e.activation,n=e.autoupdate,i=e.remove,a=s.props.isAutoManaged;return _.default.createElement(E.default,{compact:!0,clickableHeader:!0,className:"plugin-site-jetpack",header:_.default.createElement(L.default,{site:s.props.site,indicator:!1}),summary:_.default.createElement(w.default,{site:s.props.site,plugin:s.props.plugin,notices:s.props.notices,expanded:!1}),expandedSummary:_.default.createElement(w.default,{site:s.props.site,plugin:s.props.plugin,notices:s.props.notices,expanded:!0})},_.default.createElement("div",null,t&&_.default.createElement(P.default,{site:s.props.site,plugin:s.props.site.plugin,notices:s.props.notices}),n&&_.default.createElement(k.default,{site:s.props.site,plugin:s.props.site.plugin,notices:s.props.notices,wporg:!0}),i&&_.default.createElement(A.default,{plugin:s.props.site.plugin,site:s.props.site,notices:s.props.notices}),a&&_.default.createElement("div",{className:"plugin-site-jetpack__automanage-notice"},s.props.translate("Auto-managed on this site"))))},s.renderManageWarning=function(){return _.default.createElement(E.default,{compact:!0,className:"plugin-site-jetpack has-manage-error",header:_.default.createElement(L.default,{site:s.props.site,indicator:!1}),actionButton:_.default.createElement(D.default,{site:s.props.site,plugin:s.props.plugin})})},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.site&&this.props.plugin?("function"==typeof this.props.site.canManage?this.props.site.canManage():this.props.site.canManage)?this.props.site.plugin?this.renderPluginSite():this.renderInstallPlugin():this.renderManageWarning():null}}]),t}(_.default.Component);O.propTypes={site:m.default.object,plugin:m.default.object,notices:m.default.object,allowedActions:m.default.shape({activation:m.default.bool,autoupdate:m.default.bool,remove:m.default.bool}),isAutoManaged:m.default.bool},O.defaultProps={allowedActions:{activation:!0,autoupdate:!0,remove:!0},isAutoManaged:!1},t.default=(0,b.localize)(O),e.exports=t.default},"./client/my-sites/plugins/plugin-site-list/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return t.filter(function(t){return!(0,P.default)(e,t.ID)}).map(function(t){return{site:t,secondarySites:(0,k.default)(e,t.ID)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginSiteList=void 0;var a=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=s(a),r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=s(r),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=s(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=s(c),f=n("./node_modules/babel-runtime/helpers/inherits.js"),g=s(f),m=n("./node_modules/classnames/index.js"),h=s(m),_=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/react/react.js"),E=s(v),y=n("./node_modules/prop-types/index.js"),j=s(y),S=n("./client/state/selectors/is-connected-secondary-network-site.js"),P=s(S),x=n("./client/state/selectors/get-network-sites.js"),k=s(x),I=n("./client/my-sites/plugins/plugin-site/plugin-site.jsx"),w=s(I),T=n("./client/lib/plugins/store.js"),N=s(T),C=n("./client/components/section-header/index.jsx"),A=s(C),U=t.PluginSiteList=function(e){function t(){return(0,o.default)(this,t),(0,p.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,d.default)(t,[{key:"getSecondaryPluginSites",value:function(e,t){var n=e.plugin?N.default.getSites(t,this.props.plugin.slug):t;return(0,_.compact)(n)}},{key:"renderPluginSite",value:function(e){var t=e.site,n=e.secondarySites;return E.default.createElement(w.default,{key:"pluginSite"+t.ID,site:t,secondarySites:this.getSecondaryPluginSites(t,n),plugin:this.props.plugin,wporg:this.props.wporg,notices:this.props.notices})}},{key:"render",value:function(){if(!this.props.sites||0===this.props.sites.length)return null;var e=(0,h.default)("plugin-site-list",this.props.className),t=this.props.sitesWithSecondarySites.map(this.renderPluginSite,this);return E.default.createElement("div",{className:e},E.default.createElement(A.default,{label:this.props.title}),t)}}]),t}(v.Component);U.propTypes={notices:j.default.object,plugin:j.default.object,sites:j.default.array,sitesWithSecondarySites:j.default.array,title:j.default.string},t.default=(0,b.connect)(function(e,t){return{sitesWithSecondarySites:i(e,t.sites)}})(U)},"./client/my-sites/plugins/plugin-site-network/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/react/react.js"),b=s(_),v=n("./client/components/foldable-card/index.jsx"),E=s(v),y=n("./client/components/card/compact.jsx"),j=s(y),S=n("./client/my-sites/all-sites/index.jsx"),P=s(S),x=n("./client/lib/plugins/log-store.js"),k=s(x),I=n("./client/my-sites/plugins/plugin-activate-toggle/index.jsx"),w=s(I),T=n("./client/my-sites/plugins/plugin-autoupdate-toggle/index.jsx"),N=s(T),C=n("./client/my-sites/plugins/plugin-site-update-indicator/index.jsx"),A=s(C),U=n("./client/my-sites/plugins/plugin-install-button/index.jsx"),D=s(U),M=n("./client/my-sites/plugins/plugin-remove-button/index.jsx"),L=s(M),O=n("./client/my-sites/plugins/plugin-site-disabled-manage/index.jsx"),R=s(O),V=n("./client/blocks/site/index.jsx"),F=s(V),G=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.renderInstallButton=function(){if(!("function"==typeof s.props.site.canManage?s.props.site.canManage():s.props.site.canManage))return s.renderManageWarning();var e=k.default.isInProgressAction(s.props.site.ID,s.props.plugin.slug,"INSTALL_PLUGIN");return b.default.createElement(D.default,{isEmbed:!0,notices:s.props.notices,selectedSite:s.props.site,plugin:s.props.plugin,isInstalling:e})},s.renderMultisiteHeader=function(){return b.default.createElement("div",{className:"plugin-site-network__header"},b.default.createElement(P.default,{sites:s.props.secondarySites,count:s.props.secondarySites.length,domain:s.props.site.domain,title:s.props.translate("%(mainSiteName)s's Network",{args:{mainSiteName:s.props.site.name}})}))},s.renderInstallPlugin=function(){return b.default.createElement(E.default,{compact:!0,className:"plugin-site-network",header:s.renderMultisiteHeader(),actionButton:s.renderInstallButton()})},s.renderPluginActions=function(){return("function"==typeof s.props.site.canManage?s.props.site.canManage():s.props.site.canManage)?b.default.createElement("div",{className:"plugin-site-network__actions"},b.default.createElement(N.default,{site:s.props.site,plugin:s.props.site.plugin,notices:s.props.notices,wporg:!0}),b.default.createElement(L.default,{plugin:s.props.site.plugin,site:s.props.site,notices:s.props.notices})):s.renderManageWarning()},s.renderPluginSite=function(){return b.default.createElement(E.default,{compact:!0,clickableHeader:!0,className:"plugin-site-network",header:s.renderMultisiteHeader(),summary:b.default.createElement(A.default,{site:s.props.site,plugin:s.props.plugin,notices:s.props.notices,expanded:!1}),expandedSummary:b.default.createElement(A.default,{site:s.props.site,plugin:s.props.plugin,notices:s.props.notices,expanded:!0})},b.default.createElement("div",null,s.renderPluginActions(),b.default.createElement("div",{className:"plugin-site__secondary-sites"},s.props.secondarySites.map(s.renderSecondarySite))))},s.renderSecondarySite=function(e){return b.default.createElement(j.default,{className:"plugin-site-network__secondary-site",key:"secondary-site-"+e.ID},b.default.createElement(F.default,{site:e,indicator:!1}),s.renderSecondarySiteActions(e))},s.renderSecondarySiteActions=function(e){return("function"===e.canManage?e.canManage():e.canManage)?b.default.createElement("div",{className:"plugin-site-network__secondary-site-actions"},b.default.createElement(w.default,{site:e,plugin:e.plugin,notices:s.props.notices})):b.default.createElement("div",{className:"plugin-site-network__secondary-site-actions"},b.default.createElement(R.default,{site:e,plugin:e.plugin}))},s.renderManageWarning=function(){return b.default.createElement("div",{className:"plugin-site-network__network_disabled"},b.default.createElement(R.default,{site:s.props.site,plugin:s.props.plugin,isNetwork:!0}))},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.site&&this.props.plugin?this.props.site.plugin?this.renderPluginSite():this.renderInstallPlugin():null}}]),t}(b.default.Component);G.displayName="PluginSiteNetwork",G.propTypes={site:m.default.object,plugin:m.default.object,notices:m.default.object,secondarySites:m.default.array},t.default=(0,h.localize)(G),e.exports=t.default},"./client/my-sites/plugins/plugin-site-update-indicator/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/prop-types/index.js"),m=s(g),h=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/react/react.js"),b=s(_),v=n("./client/lib/analytics/index.js"),E=s(v),y=n("./node_modules/gridicons/build/index.js"),j=s(y),S=n("./client/lib/plugins/actions.js"),P=s(S),x=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.updatePlugin=function(e){e.stopPropagation(),P.default.updatePlugin(s.props.site,s.props.plugin),P.default.removePluginsNotices(s.props.notices.completed.concat(s.props.notices.errors)),E.default.ga.recordEvent("Plugins","Clicked Update Single Site Plugin","Plugin Name",s.props.plugin.slug),E.default.tracks.recordEvent("calypso_plugins_actions_update_plugin",{site:s.props.site.ID,plugin:s.props.plugin.slug})},s.getOngoingUpdates=function(){return s.props.notices.inProgress.filter(function(e){return e.site.ID===s.props.site.ID&&"UPDATE_PLUGIN"===e.action})},s.isUpdating=function(){return s.getOngoingUpdates().length>0},s.renderUpdate=function(){var e=void 0,t=s.getOngoingUpdates(),n=t.length>0;return e=n?s.props.translate("Updating to version %(version)s",{args:{version:t[0].plugin.update.new_version}}):s.props.translate("Update to %(version)s",{args:{version:s.props.site.plugin.update.new_version}}),b.default.createElement("div",{className:"plugin-site-update-indicator__button"},b.default.createElement("button",{className:"button",ref:"updatePlugin",onClick:s.updatePlugin,disabled:n},e))},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){if(this.props.site&&this.props.plugin)return this.props.site.canUpdateFiles&&(this.props.site.plugin.update&&!this.props.site.plugin.update.recentlyUpdated||this.isUpdating())?this.props.expanded?this.renderUpdate():b.default.createElement("span",{className:"plugin-site-update-indicator"},b.default.createElement(j.default,{icon:"sync",size:20})):null}}]),t}(b.default.Component);x.displayName="PluginSiteUpdateIndicator",x.propTypes={site:m.default.shape({canUpdateFiles:m.default.bool.isRequired,ID:m.default.number.isRequired}),plugin:m.default.shape({slug:m.default.string}),notices:m.default.object.isRequired,
expanded:m.default.bool},x.defaultProps={expanded:!1},t.default=(0,h.localize)(x),e.exports=t.default},"./client/my-sites/plugins/plugin-site/plugin-site.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=(0,c.get)(t,"site.ID");return{isAutomatedTransfer:(0,_.default)(e,n)}}function a(e,t,n){var s=(0,c.get)(n,"plugin.slug"),i={};return(0,c.includes)(["jetpack","vaultpress"],s)&&e.isAutomatedTransfer&&(i={allowedActions:{activation:!1,autoupdate:!1,remove:!1},isAutoManaged:!0}),(0,r.default)({},n,e,t,i)}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/babel-runtime/core-js/object/assign.js"),r=s(l),o=n("./node_modules/react/react.js"),u=s(o),d=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/lodash/lodash.js"),p=n("./client/my-sites/plugins/plugin-site-jetpack/index.jsx"),f=s(p),g=n("./client/my-sites/plugins/plugin-site-network/index.jsx"),m=s(g),h=n("./client/state/selectors/is-site-automated-transfer.js"),_=s(h),b=function(e){return e.site?e.site.jetpack&&e.secondarySites&&e.secondarySites.length?u.default.createElement(m.default,e):u.default.createElement(f.default,e):null};t.default=(0,d.connect)(i,null,a)(b),e.exports=t.default},"./client/my-sites/plugins/plugin-upload/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/page/index.js"),b=s(_),v=n("./node_modules/i18n-calypso/index.js"),E=n("./node_modules/lodash/lodash.js"),y=n("./client/components/main/index.jsx"),j=s(y),S=n("./client/components/header-cake/index.jsx"),P=s(S),x=n("./client/components/card/index.jsx"),k=s(x),I=n("./client/components/progress-bar/index.jsx"),w=s(I),T=n("./client/blocks/upload-drop-zone/index.jsx"),N=s(T),C=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),A=s(C),U=n("./client/blocks/eligibility-warnings/index.jsx"),D=s(U),M=n("./client/components/empty-content/index.jsx"),L=s(M),O=n("./client/components/data/query-atat-eligibility/index.jsx"),R=s(O),V=n("./client/state/plugins/upload/actions.js"),F=n("./client/state/automated-transfer/actions.js"),G=n("./client/state/ui/selectors.js"),B=n("./client/state/selectors/get-plugin-upload-error.js"),W=s(B),z=n("./client/state/selectors/get-plugin-upload-progress.js"),q=s(z),H=n("./client/state/selectors/get-uploaded-plugin-id.js"),J=s(H),Y=n("./client/state/selectors/is-plugin-upload-complete.js"),Q=s(Y),Z=n("./client/state/selectors/is-plugin-upload-in-progress.js"),K=s(Z),X=n("./client/state/sites/selectors.js"),$=n("./client/state/automated-transfer/selectors.js"),ee=n("./client/state/notices/actions.js"),te=n("./client/state/automated-transfer/constants.js"),ne=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.state={showEligibility:s.props.showEligibility},s.back=function(){b.default.back()},s.onProceedClick=function(){s.setState({showEligibility:!1})},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.siteId,n=e.inProgress;!n&&this.props.clearPluginUpload(t)}},{key:"componentWillReceiveProps",value:function(e){if(e.siteId!==this.props.siteId){var t=e.siteId,n=e.inProgress;!n&&this.props.clearPluginUpload(t)}e.showEligibility!==this.props.showEligibility&&this.setState({showEligibility:e.showEligibility}),e.complete&&(0,b.default)("/plugins/"+e.pluginId+"/"+e.siteSlug);var s=te.transferStates.COMPLETE;this.props.automatedTransferStatus!==s&&e.automatedTransferStatus===s&&e.successNotice(e.translate("You've successfully uploaded the %(pluginId)s plugin.",{args:{pluginId:e.pluginId}}),{duration:8e3})}},{key:"renderUploadCard",value:function(){var e=this.props,t=e.inProgress,n=e.complete,s=e.isJetpack,i=s?this.props.uploadPlugin:this.props.initiateAutomatedTransferWithPluginZip;return m.default.createElement(k.default,null,!t&&!n&&m.default.createElement(N.default,{doUpload:i}),t&&this.renderProgressBar())}},{key:"renderProgressBar",value:function(){var e=this.props,t=e.translate,n=e.progress,s=e.installing,i=t("Uploading your plugin"),a=t("Installing your plugin");return m.default.createElement("div",null,m.default.createElement("span",{className:"plugin-upload__title"},s?a:i),m.default.createElement(w.default,{value:n,title:t("Uploading progress"),isPulsing:s}))}},{key:"renderNotAvailableForMultisite",value:function(){var e=this.props,t=e.translate,n=e.siteAdminUrl;return m.default.createElement(L.default,{title:t("Visit WP Admin to install your plugin."),action:t("Go to WP Admin"),actionURL:n+"/plugin-install.php",illustration:"/calypso/images/illustrations/illustration-jetpack.svg"})}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.isJetpackMultisite,s=e.upgradeJetpack,i=e.siteId,a=e.siteSlug,l=this.state.showEligibility;return m.default.createElement(j.default,null,m.default.createElement(R.default,{siteId:i}),m.default.createElement(P.default,{onClick:this.back},t("Upload plugin")),s&&m.default.createElement(A.default,{template:"updateJetpack",siteId:i,featureExample:this.renderUploadCard(),version:"5.1"}),n&&this.renderNotAvailableForMultisite(),l&&m.default.createElement(D.default,{backUrl:"/plugins/"+a,onProceed:this.onProceedClick}),!s&&!n&&!l&&this.renderUploadCard())}}]),t}(m.default.Component);t.default=(0,h.connect)(function(e){var t=(0,G.getSelectedSiteId)(e),n=(0,W.default)(e,t),s=(0,q.default)(e,t),i=(0,X.isJetpackSite)(e,t),a=(0,X.isJetpackSiteMultiSite)(e,t),l=(0,$.getEligibility)(e,t),r=l.eligibilityHolds,o=l.eligibilityWarnings,u=(0,$.isEligibleForAutomatedTransfer)(e,t),d=!((0,E.isEmpty)(r)&&(0,E.isEmpty)(o));return{siteId:t,siteSlug:(0,G.getSelectedSiteSlug)(e),isJetpack:i,inProgress:(0,K.default)(e,t),complete:(0,Q.default)(e,t),failed:!!n,pluginId:(0,J.default)(e,t),error:n,progress:s,installing:100===s,upgradeJetpack:i&&!a&&!(0,X.isJetpackMinimumVersion)(e,t,"5.1"),isJetpackMultisite:a,siteAdminUrl:(0,X.getSiteAdminUrl)(e,t),showEligibility:!i&&(d||!u),automatedTransferStatus:(0,$.getAutomatedTransferStatus)(e,t)}},{uploadPlugin:V.uploadPlugin,clearPluginUpload:V.clearPluginUpload,initiateAutomatedTransferWithPluginZip:F.initiateAutomatedTransferWithPluginZip,successNotice:ee.successNotice})((0,v.localize)(ne)),e.exports=t.default},"./client/my-sites/plugins/plugin.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=s(i),l=n("./node_modules/react/react.js"),r=s(l),o=n("./node_modules/create-react-class/index.js"),u=s(o),d=n("./node_modules/i18n-calypso/index.js"),c=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/lodash/lodash.js"),f=n("./client/my-sites/plugins/plugin-site-list/index.jsx"),g=s(f),m=n("./client/components/header-cake/index.jsx"),h=s(m),_=n("./client/my-sites/plugins/plugin-meta/index.jsx"),b=s(_),v=n("./client/lib/plugins/store.js"),E=s(v),y=n("./client/lib/plugins/log-store.js"),j=s(y),S=n("./client/state/plugins/wporg/selectors.js"),P=s(S),x=n("./client/lib/plugins/actions.js"),k=s(x),I=n("./client/state/plugins/wporg/actions.js"),w=n("./client/lib/plugins/notices.jsx"),T=s(w),N=n("./client/components/main/index.jsx"),C=s(N),A=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),U=s(A),D=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),M=s(D),L=n("./client/my-sites/plugins/plugin-sections/index.jsx"),O=s(L),R=n("./client/my-sites/plugins/plugin-sections/custom.jsx"),V=s(R),F=n("./client/components/data/document-head/index.jsx"),G=s(F),B=n("./client/state/ui/selectors.js"),W=n("./client/state/analytics/actions.js"),z=n("./client/state/sites/selectors.js"),q=n("./client/state/selectors/can-current-user.js"),H=s(q),J=n("./client/state/selectors/can-current-user-manage-plugins.js"),Y=s(J),Q=n("./client/state/selectors/get-selected-or-all-sites-with-plugins.js"),Z=s(Q),K=n("./client/state/selectors/is-site-automated-transfer.js"),X=s(K),$=n("./client/my-sites/plugins/not-supported-jetpack-version.jsx"),ee=s($),te=n("./client/my-sites/plugins/no-permissions-error.jsx"),ne=s(te),se=(0,u.default)({displayName:"SinglePlugin",_DEFAULT_PLUGINS_BASE_PATH:"http://wordpress.org/plugins/",mixins:[T.default],componentWillMount:function(){this.isFetched()||this.props.wporgFetchPluginData(this.props.pluginSlug)},componentDidMount:function(){E.default.on("change",this.refreshSitesAndPlugins),j.default.on("change",this.refreshSitesAndPlugins)},getInitialState:function(){return this.getSitesPlugin()},componentWillUnmount:function(){E.default.removeListener("change",this.refreshSitesAndPlugins),j.default.removeListener("change",this.refreshSitesAndPlugins),this.pluginRefreshTimeout&&clearTimeout(this.pluginRefreshTimeout)},componentWillReceiveProps:function(e){this.refreshSitesAndPlugins(e)},getSitesPlugin:function(e){var t=e||this.props,n=(0,p.uniq)(t.sites),s=E.default.getPlugin(n,t.pluginSlug),i=(0,a.default)({name:t.pluginSlug,id:t.pluginSlug,slug:t.pluginSlug},s);return{sites:E.default.getSites(n,t.pluginSlug)||[],notInstalledSites:E.default.getNotInstalledSites(n,t.pluginSlug)||[],plugin:i}},refreshSitesAndPlugins:function(e){this.setState(this.getSitesPlugin(e))},getPageTitle:function(){var e=this.getPlugin();return this.props.translate("%(pluginName)s Plugin",{args:{pluginName:e.name},textOnly:!0,context:"Page title: Plugin detail"})},removeNotice:function(e){k.default.removePluginsNotices(e)},recordEvent:function(e){this.props.recordGoogleEvent("Plugins",e,"Plugin Name",this.props.pluginSlug)},getPreviousListUrl:function(){var e=this.props.prevPath.split("/"+this.props.pluginSlug+"/"),t=this.props.prevPath;return e[1]&&(t=e[0]),t+"/"+(this.props.siteUrl||"")+(this.props.prevQuerystring?"?"+this.props.prevQuerystring:"")},backHref:function(){return this.props.prevPath?this.getPreviousListUrl():"/plugins/manage/"+(this.props.siteUrl||"")},displayHeader:function(){var e=this.recordEvent.bind(this,"Clicked Header Plugin Back Arrow");return r.default.createElement(h.default,{isCompact:!0,backHref:this.backHref(),onBackArrowClick:e})},pluginExists:function(e){if(this.isFetching())return"unknown";if(e&&e.fetched)return!0;var t=this.props.sites;return!(!e.sites||!e.sites[0])||!!t.some(E.default.isFetchingSite)&&"unknown"},isFetching:function(){return this.props.wporgFetching},isFetched:function(){return P.default.isFetched(this.props.wporgPlugins,this.props.pluginSlug)},isFetchingSites:function(){return this.props.sites.every(E.default.isFetchingSite)},getPlugin:function(){var e=(0,a.default)({},this.state.plugin);return e=(0,a.default)(e,P.default.getPlugin(this.props.wporgPlugins,this.props.pluginSlug))},getPluginDoesNotExistView:function(e){var t=this.props.translate,n="/plugins"+(e?"/"+e.slug:""),s=t("Browse all plugins");return r.default.createElement(C.default,null,r.default.createElement(M.default,{title:t("Oops! We can't find this plugin!"),line:t("The plugin you are looking for doesn't exist."),actionURL:n,action:s,illustration:"/calypso/images/illustrations/illustration-404.svg"}))},getAllowedPluginActions:function(e){var t=["jetpack","vaultpress","akismet"],n=this.props.isSiteAutomatedTransfer&&(0,p.includes)(t,e.slug);return{autoupdate:!n,activation:!n,remove:!n}},renderDocumentHead:function(){return r.default.createElement(G.default,{title:this.getPageTitle()})},renderSitesList:function(e){if(!this.props.siteUrl&&!this.isFetching()){var t=this.props.translate;return r.default.createElement("div",null,r.default.createElement(g.default,{className:"plugin__installed-on",title:t("Installed on",{comment:"header for list of sites a plugin is installed on"}),sites:this.state.sites,plugin:e,notices:this.state.notices}),e.wporg&&r.default.createElement(g.default,{className:"plugin__not-installed-on",title:t("Available sites",{comment:"header for list of sites a plugin can be installed on"}),sites:this.state.notInstalledSites,plugin:e,notices:this.state.notices}))}},renderPluginPlaceholder:function(){var e=this.props.selectedSite;return r.default.createElement(C.default,null,r.default.createElement(U.default,null),r.default.createElement("div",{className:"plugin__page"},this.displayHeader(),r.default.createElement(b.default,{isPlaceholder:!0,notices:this.state.notices,isInstalledOnSite:this.isFetchingSites()?null:!!E.default.getSitePlugin(e,this.state.plugin.slug),plugin:this.getPlugin(),siteUrl:this.props.siteUrl,sites:this.state.sites,selectedSite:e})))},getMockPlugin:function(){var e={slug:"no-slug",canUpdateFiles:!0,name:"Not a real site",options:{software_version:"1"},plan:{expired:!1,free_trial:!1,product_id:2002,product_name_short:"Free",product_slug:"jetpack_free",user_is_owner:!1}};return r.default.createElement(C.default,null,r.default.createElement("div",{className:"plugin__page"},this.displayHeader(),r.default.createElement(b.default,{notices:{},isInstalledOnSite:!!E.default.getSitePlugin(e,this.state.plugin.slug),plugin:this.getPlugin(),siteUrl:"no-real-url",sites:[e],selectedSite:e,isMock:!0})))},render:function(){var e=this.props.selectedSite;if(!this.props.isRequestingSites&&!this.props.userCanManagePlugins)return r.default.createElement(ne.default,{title:this.getPageTitle()});var t=this.getPlugin(),n=this.pluginExists(t),s=this.getAllowedPluginActions(t);if("unknown"===n)return this.renderPluginPlaceholder();if(n===!1)return this.getPluginDoesNotExistView(e);if(e&&this.props.isJetpackSite(e.ID)&&!this.props.canJetpackSiteManage(e.ID))return r.default.createElement(C.default,null,this.renderDocumentHead(),r.default.createElement(U.default,null),r.default.createElement(M.default,{template:"optInManage",title:this.props.translate("Looking to manage this site's plugins?"),siteId:e.ID,section:"plugins",featureExample:this.getMockPlugin()}));var i=e&&j.default.isInProgressAction(e.ID,this.state.plugin.slug,"INSTALL_PLUGIN"),a=e&&!this.props.isJetpackSite(e.ID);return r.default.createElement(C.default,null,r.default.createElement(ee.default,null),this.renderDocumentHead(),r.default.createElement(U.default,null),r.default.createElement("div",{className:"plugin__page"},this.displayHeader(),r.default.createElement(b.default,{notices:this.state.notices,plugin:t,siteUrl:this.props.siteUrl,sites:this.state.sites,selectedSite:e,isInstalledOnSite:this.isFetchingSites()?null:!!E.default.getSitePlugin(e,this.state.plugin.slug),isInstalling:i,allowedActions:s}),t.wporg?r.default.createElement(O.default,{plugin:t,isWpcom:a}):r.default.createElement(V.default,{plugin:t}),this.renderSitesList(t)))}});t.default=(0,c.connect)(function(e,t){var n=(0,B.getSelectedSiteId)(e);return{wporgPlugins:e.plugins.wporg.items,wporgFetching:P.default.isFetching(e.plugins.wporg.fetchingItems,t.pluginSlug),selectedSite:(0,B.getSelectedSite)(e),isJetpackSite:function(t){return(0,z.isJetpackSite)(e,t)},canJetpackSiteManage:function(t){return(0,z.canJetpackSiteManage)(e,t)},isSiteAutomatedTransfer:(0,X.default)(e,n),isRequestingSites:(0,z.isRequestingSites)(e),userCanManagePlugins:n?(0,H.default)(e,n,"manage_options"):(0,Y.default)(e),sites:(0,Z.default)(e)}},{recordGoogleEvent:W.recordGoogleEvent,wporgFetchPluginData:I.fetchPluginData})((0,d.localize)(se)),e.exports=t.default},"./client/my-sites/plugins/plugins-browser-item/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/gridicons/build/index.js"),v=s(b),E=n("./node_modules/lodash/lodash.js"),y=n("./client/my-sites/plugins/plugin-icon/plugin-icon.jsx"),j=s(y),S=n("./client/lib/plugins/store.js"),P=s(S),x=n("./client/components/button/index.jsx"),k=s(x),I=n("./client/components/rating/index.jsx"),w=s(I),T=n("./client/lib/analytics/index.js"),N=s(T),C=n("./client/state/ui/selectors.js"),A=n("./client/state/sites/selectors.js"),U=["Jetpack by WordPress.com","Akismet","VaultPress"],D=function(e){function t(){var e,n,s,i;(0,r.default)(this,t);for(var l=arguments.length,o=Array(l),u=0;u<l;u++)o[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(o))),s.trackPluginLinkClick=function(){N.default.tracks.recordEvent("calypso_plugin_browser_item_click",{site:s.props.site,plugin:s.props.plugin.slug})},i=n,(0,c.default)(s,i)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getPluginLink",value:function(){if(this.props.plugin.link)return this.props.plugin.link;var e="/plugins/"+this.props.plugin.slug;return this.props.site&&(e+="/"+this.props.site),e}},{key:"getSites",value:function(){return this.props.site&&this.props.currentSites?P.default.getSites(this.props.currentSites,this.props.plugin.slug):[]}},{key:"isWpcomPreinstalled",value:function(){return!!this.props.plugin.isPreinstalled||!!this.props.site&&(!this.props.isJetpackSite&&(0,E.includes)(U,this.props.plugin.name))}},{key:"renderInstalledIn",value:function(){var e=this.getSites();return e&&e.length>0||this.isWpcomPreinstalled()?m.default.createElement("div",{className:"plugins-browser-item__installed"},m.default.createElement(v.default,{icon:"checkmark",size:18}),this.props.translate("Installed")):null}},{key:"renderUpgradeButton",value:function(){var e=this.props.plugin,t=e.isPreinstalled,n=e.upgradeLink;return t||!n?null:m.default.createElement(k.default,{className:"plugins-browser-item__upgrade-button",compact:!0,primary:!0,href:n},this.props.translate("Upgrade"))}},{key:"renderPlaceholder",value:function(){return m.default.createElement("li",{className:"plugins-browser-item is-placeholder"},m.default.createElement("span",{className:"plugins-browser-item__link"},m.default.createElement("div",{className:"plugins-browser-item__info"},m.default.createElement(j.default,{size:this.props.iconSize,isPlaceholder:!0}),m.default.createElement("div",{className:"plugins-browser-item__title"},"â¦"),m.default.createElement("div",{className:"plugins-browser-item__author"},"â¦")),m.default.createElement(w.default,{rating:0,size:12})))}},{key:"render",value:function(){return this.props.isPlaceholder?this.renderPlaceholder():m.default.createElement("li",{className:"plugins-browser-item"},m.default.createElement("a",{href:this.getPluginLink(),className:"plugins-browser-item__link",onClick:this.trackPluginLinkClick},m.default.createElement("div",{className:"plugins-browser-item__info"},m.default.createElement(j.default,{size:this.props.iconSize,image:this.props.plugin.icon,isPlaceholder:this.props.isPlaceholder}),m.default.createElement("div",{className:"plugins-browser-item__title"},this.props.plugin.name),m.default.createElement("div",{className:"plugins-browser-item__author"},this.props.plugin.author_name),this.renderInstalledIn()),m.default.createElement(w.default,{rating:this.props.plugin.rating,size:12})),this.renderUpgradeButton())}}]),t}(g.Component);D.defaultProps={iconSize:40},t.default=(0,E.flowRight)((0,h.connect)(function(e){var t=(0,C.getSelectedSiteId)(e);return{isJetpackSite:(0,A.isJetpackSite)(e,t)}}),_.localize)(D),e.exports=t.default},"./client/my-sites/plugins/plugins-browser-list/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(l),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),g=n("./node_modules/react/react.js"),m=s(g),h=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),b=n("./client/my-sites/plugins/plugins-browser-item/index.jsx"),v=s(b),E=n("./client/components/card/index.jsx"),y=s(E),j=n("./node_modules/gridicons/build/index.js"),S=s(j),P=n("./client/components/section-header/index.jsx"),x=s(P),k=6,I=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderPluginsViewList",value:function(){var e=this,t=0,n=this.props.plugins.map(function(t,n){return m.default.createElement(v.default,{site:e.props.site,key:t.slug+n,plugin:t,currentSites:e.props.currentSites})});for(this.props.showPlaceholders&&(n=n.concat(this.renderPlaceholdersViews()));n.length%3!==0||n.length%2!==0;)n.push(m.default.createElement("div",{className:"plugins-browser-item is-empty",key:"empty-item-"+t++}));return this.props.size?n.slice(0,this.props.size):n}},{key:"renderPlaceholdersViews",value:function(){return(0,_.times)(this.props.size||k,function(e){return m.default.createElement(v.default,{isPlaceholder:!0,key:"placeholder-plugin-"+e})})}},{key:"renderViews",value:function(){return this.props.plugins.length?this.renderPluginsViewList():this.props.showPlaceholders?this.renderPlaceholdersViews():void 0}},{key:"renderLink",value:function(){if(this.props.expandedListLink)return m.default.createElement("a",{className:"button is-link plugins-browser-list__select-all",href:this.props.expandedListLink+(this.props.site||"")},this.props.translate("See All"),m.default.createElement(S.default,{icon:"chevron-right",size:18}))}},{key:"render",value:function(){return m.default.createElement("div",{className:"plugins-browser-list"},m.default.createElement(x.default,{label:this.props.title},this.renderLink()),m.default.createElement(y.default,{className:"plugins-browser-list__elements"},this.renderViews()))}}]),t}(g.Component);I.displayName="PluginsBrowserList",t.default=(0,h.localize)(I),e.exports=t.default},"./client/my-sites/plugins/plugins-browser/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/create-react-class/index.js"),r=s(l),o=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/i18n-calypso/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),p=s(c),f=n("./client/components/data/document-head/index.jsx"),g=s(f),m=n("./client/components/search/index.jsx"),h=s(m),_=n("./client/components/section-nav/index.jsx"),b=s(_),v=n("./client/components/main/index.jsx"),E=s(v),y=n("./client/components/section-nav/tabs.jsx"),j=s(y),S=n("./client/components/section-nav/item.jsx"),P=s(S),x=n("./client/my-sites/no-results/index.jsx"),k=s(x),I=n("./client/my-sites/plugins/plugins-browser-list/index.jsx"),w=s(I),T=n("./client/lib/plugins/wporg-data/list-store.js"),N=s(T),C=n("./client/lib/plugins/wporg-data/actions.js"),A=s(C),U=n("./client/lib/mixins/url-search/index.js"),D=s(U),M=n("./client/lib/mixins/infinite-scroll/index.js"),L=s(M),O=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),R=s(O),V=n("./client/state/analytics/actions.js"),F=n("./client/state/selectors/can-current-user.js"),G=s(F),B=n("./client/state/selectors/get-selected-or-all-sites-jetpack-can-manage.js"),W=s(B),z=n("./client/state/selectors/has-jetpack-sites.js"),q=s(z),H=n("./client/state/ui/selectors.js"),J=n("./client/state/sites/selectors.js"),Y=n("./client/my-sites/plugins/not-supported-jetpack-version.jsx"),Q=s(Y),Z=n("./client/my-sites/plugins/no-permissions-error.jsx"),K=s(Z),X=n("./client/components/header-button/index.jsx"),$=s(X),ee=n("./client/lib/products-values/index.js"),te=n("./client/lib/plans/constants.js"),ne=n("./client/components/banner/index.jsx"),se=s(ne),ie=n("./client/config/index.js"),ae=n("./client/my-sites/plugins/plugins-browser/wpcom-features-as-plugins.js"),le=s(ae),re=(0,r.default)({displayName:"PluginsBrowser",_SHORT_LIST_LENGTH:6,visibleCategories:["new","popular","featured"],mixins:[(0,L.default)("fetchNextPagePlugins"),D.default],reinitializeSearch:function(){this.WrappedSearch=function(e){return a.default.createElement(h.default,e)}},componentWillMount:function(){this.reinitializeSearch()},componentDidMount:function(){N.default.on("change",this.refreshLists),this.props.search&&this.props.searchTitle&&this.props.recordTracksEvent("calypso_plugins_search_noresults_recommendations_show",{search_query:this.props.search})},getInitialState:function(){return this.getPluginsLists(this.props.search)},componentWillUnmount:function(){N.default.removeListener("change",this.refreshLists)},componentWillReceiveProps:function(e){this.refreshLists(e.search)},refreshLists:function(e){this.setState(this.getPluginsLists(e||this.props.search))},fetchNextPagePlugins:function(){var e=this.props.search?"search":this.props.category;if(e){var t=(0,d.get)(this.state.fullLists,e);(0,d.get)(t,"fetching")||"search"===e&&(0,d.get)(t,"list.length",1/0)<24||A.default.fetchNextCategoryPage(e,this.props.search)}},getPluginsLists:function(e){var t={},n={};return this.visibleCategories.forEach(function(e){t[e]=N.default.getShortList(e),n[e]=N.default.getFullList(e)}),n.search=N.default.getSearchList(e),{shortLists:t,fullLists:n}},getPluginsShortList:function(e){return(0,d.get)(this.state.shortLists,[e,"list"],[])},getPluginsFullList:function(e){return(0,d.get)(this.state.fullLists,[e,"list"],[])},getPluginBrowserContent:function(){return this.props.search?this.getSearchListView(this.props.search):this.props.category?this.getFullListView(this.props.category):this.getShortListsView()},translateCategory:function(e){switch(e){case"new":return this.props.translate("New",{context:"Category description for the plugin browser."});case"popular":return this.props.translate("Popular",{context:"Category description for the plugin browser."});case"featured":return this.props.translate("Featured",{context:"Category description for the plugin browser."})}},getFullListView:function(e){var t=(0,d.get)(this.state.fullLists,[e,"fetching"],!0),n=this.getPluginsFullList(e);if(n.length>0||t)return a.default.createElement(w.default,{plugins:n,listName:e,title:this.translateCategory(e),site:this.props.siteSlug,showPlaceholders:t,currentSites:this.props.sites})},getSearchListView:function(e){var t=(0,d.get)(this.state.fullLists,"search.fetching",!0),n=(0,d.concat)(this.getWpcomFeaturesAsJetpackPluginsList(e),this.getPluginsFullList("search"));if(n.length>0||t){var s=this.props.searchTitle||this.props.translate("Results for: %(searchTerm)s",{textOnly:!0,args:{searchTerm:e}});return a.default.createElement(w.default,{plugins:n,listName:e,title:s,site:this.props.siteSlug,showPlaceholders:t,currentSites:this.props.sites})}return a.default.createElement(k.default,{text:this.props.translate("No plugins match your search for {{searchTerm/}}.",{textOnly:!0,components:{searchTerm:a.default.createElement("em",null,e)}})})},getPluginSingleListView:function(e){var t="/plugins/"+e+"/";return a.default.createElement(w.default,{plugins:this.getPluginsShortList(e),listName:e,title:this.translateCategory(e),site:this.props.siteSlug,expandedListLink:this.getPluginsFullList(e).length>this._SHORT_LIST_LENGTH&&t,size:this._SHORT_LIST_LENGTH,showPlaceholders:(0,d.get)(this.state.fullLists,[e,"fetching"])!==!1,currentSites:this.props.sites})},isWpcomPluginActive:function(e){return"standard"===e.plan||"premium"===e.plan&&this.props.hasPremiumPlan||"business"===e.plan&&this.props.hasBusinessPlan},getWpcomFeaturesAsJetpackPluginsList:function(e){var t=this;if(!this.props.selectedSiteId||this.props.isJetpackSite)return[];if(!e)return[];var n=this.props,s=n.siteSlug,i=n.translate;e=e.toLocaleLowerCase();var a=void 0,l=(0,le.default)(i),r=(0,d.find)(l,function(t){return t.category===e});if(r)a=r.plugins;else{var o=(0,d.flatMap)(l,function(e){return e.plugins}),u=function(t){return(0,d.includes)(t.toLocaleLowerCase(),e)};a=o.filter(function(e){return u(e.name)||u(e.description)})}return a.map(function(e){return{name:i("%(feature)s by Jetpack",{args:{feature:e.name},context:"Presenting WordPress.com feature as a Jetpack pseudo-plugin"}),author_name:"Automattic",icon:"//ps.w.org/jetpack/assets/icon-256x256.png",rating:82,slug:"jetpack",isPreinstalled:t.isWpcomPluginActive(e),upgradeLink:"/plans/"+s+(e.feature?"?feature="+e.feature:"")}})},getShortListsView:function(){return a.default.createElement("span",null,this.getPluginSingleListView("featured"),this.getPluginSingleListView("popular"),this.getPluginSingleListView("new"))},getSearchBox:function(){var e=this.WrappedSearch;return a.default.createElement(e,{pinned:!0,fitsContainer:!0,onSearch:this.doSearch,initialValue:this.props.search,placeholder:this.props.translate("Search Plugins"),delaySearch:!0,analyticsGroup:"PluginsBrowser"})},getNavigationBar:function(){var e=this.props.siteSlug?"/"+this.props.siteSlug:"";return a.default.createElement(b.default,{selectedText:this.props.translate("Category",{context:"Category of plugins to be filtered by"})},a.default.createElement(j.default,{label:"Category"},a.default.createElement(P.default,{path:"/plugins"+e,selected:!1},this.props.translate("All",{context:"Filter all plugins"})),a.default.createElement(P.default,{path:"/plugins/featured"+e,selected:this.props.path==="/plugins/featured"+e},this.props.translate("Featured",{context:"Filter featured plugins"})),a.default.createElement(P.default,{path:"/plugins/popular"+e,selected:this.props.path==="/plugins/popular"+e},this.props.translate("Popular",{context:"Filter popular plugins"})),a.default.createElement(P.default,{path:"/plugins/new"+e,selected:this.props.path==="/plugins/new"+e},this.props.translate("New",{context:"Filter new plugins"}))),this.getSearchBox())},handleSuggestedSearch:function(e){var t=this;return function(){t.reinitializeSearch(),t.doSearch(e)}},getSearchBar:function(){var e=this,t=[this.props.translate("Engagement",{context:"Plugins suggested search term"}),this.props.translate("Security",{context:"Plugins suggested search term"}),this.props.translate("Appearance",{context:"Plugins suggested search term"}),this.props.translate("Writing",{context:"Plugins suggested search term"})];return a.default.createElement(b.default,{selectedText:this.props.translate("Suggested Searches",{context:"Suggested searches for plugins"})},a.default.createElement(j.default,{label:"Suggested Searches"},t.map(function(t){return a.default.createElement(P.default,{key:t,onClick:e.handleSuggestedSearch(t)},t)})),this.getSearchBox())},shouldShowManageButton:function(){return!!this.props.isJetpackSite||!this.props.selectedSiteId&&this.props.hasJetpackSites},renderManageButton:function(){if(!this.shouldShowManageButton())return null;var e=this.props.siteSlug?"/"+this.props.siteSlug:"";return a.default.createElement($.default,{icon:"cog",label:this.props.translate("Manage Plugins"),href:"/plugins/manage"+e})},handleUploadPluginButtonClick:function(){this.props.recordGoogleEvent("Plugins","Clicked Plugin Upload Link");
},renderUploadPluginButton:function(){if(!(0,ie.isEnabled)("manage/plugins/upload"))return null;var e=this.props,t=e.siteSlug,n=e.translate,s="/plugins/upload"+(t?"/"+t:"");return a.default.createElement($.default,{icon:"cloud-upload",label:n("Upload Plugin"),"aria-label":n("Upload Plugin"),href:s,onClick:this.handleUploadPluginButtonClick})},getPageHeaderView:function(){if(this.props.hideSearchForm)return null;var e=this.props.category?this.getNavigationBar():this.getSearchBar();return a.default.createElement("div",{className:"plugins-browser__main-header"},e,a.default.createElement("div",{className:"plugins__header-buttons"},this.renderManageButton(),this.renderUploadPluginButton()))},getMockPluginItems:function(){return a.default.createElement(w.default,{plugins:this.getPluginsShortList("popular"),listName:"Plugins",title:this.props.translate("Popular Plugins"),size:12})},renderDocumentHead:function(){return a.default.createElement(g.default,{title:this.props.translate("Plugin Browser",{textOnly:!0})})},renderJetpackManageError:function(){var e=this.props.selectedSiteId;return a.default.createElement(E.default,null,this.renderDocumentHead(),a.default.createElement(p.default,null),a.default.createElement(R.default,{template:"optInManage",title:this.props.translate("Looking to manage this site's plugins?"),siteId:e,section:"plugins",illustration:"/calypso/images/jetpack/jetpack-manage.svg",featureExample:this.getMockPluginItems()}))},renderUpgradeNudge:function(){return!this.props.selectedSiteId||this.props.isJetpackSite||this.props.hasBusinessPlan?null:a.default.createElement(se.default,{feature:te.FEATURE_UPLOAD_PLUGINS,event:"calypso_plugins_browser_upgrade_nudge",plan:te.PLAN_BUSINESS,title:this.props.translate("Upgrade to the Business plan to install plugins.")})},render:function(){return!this.props.isRequestingSites&&this.props.noPermissionsError?a.default.createElement(K.default,{title:this.props.translate("Plugin Browser",{textOnly:!0})}):this.props.jetpackManageError?this.renderJetpackManageError():a.default.createElement(E.default,{wideLayout:!0},a.default.createElement(Q.default,null),this.renderDocumentHead(),a.default.createElement(p.default,null),this.renderUpgradeNudge(),this.getPageHeaderView(),this.getPluginBrowserContent())}});t.default=(0,o.connect)(function(e){var t=(0,H.getSelectedSiteId)(e),n=(0,J.getSitePlan)(e,t),s=n&&((0,ee.isBusiness)(n)||(0,ee.isEnterprise)(n)),i=n&&(s||(0,ee.isPremium)(n));return{selectedSiteId:t,sitePlan:n,hasPremiumPlan:i,hasBusinessPlan:s,isJetpackSite:(0,J.isJetpackSite)(e,t),hasJetpackSites:(0,q.default)(e),jetpackManageError:!!(0,J.isJetpackSite)(e,t)&&!(0,J.canJetpackSiteManage)(e,t),isRequestingSites:(0,J.isRequestingSites)(e),noPermissionsError:!!t&&!(0,G.default)(e,t,"manage_options"),selectedSite:(0,H.getSelectedSite)(e),siteSlug:(0,H.getSelectedSiteSlug)(e),sites:(0,W.default)(e)}},{recordTracksEvent:V.recordTracksEvent,recordGoogleEvent:V.recordGoogleEvent})((0,u.localize)(re)),e.exports=t.default},"./client/my-sites/plugins/plugins-browser/wpcom-features-as-plugins.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/lodash.js"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.identity;return[{category:"engagement",name:e("Engagement"),icon:"stats-alt",plugins:[{name:e("Stats"),link:"https://support.wordpress.com/stats/",description:e("View your site's visits, referrers, andÂ more."),plan:"standard"},{name:e("SEO Tools"),link:"https://support.wordpress.com/seo-tools/",description:e("Custom meta descriptions, social media previews, and more."),plan:"business",feature:"advanced-seo"},{name:e("Google Analytics"),link:"https://support.wordpress.com/google-analytics/",description:e("Advanced features to complement WordPress.com stats. Funnel reports, goal conversion, andÂ more."),plan:"business",feature:"google-analytics"},{name:e("Social Media"),link:"https://support.wordpress.com/sharing/",description:e("Add social media buttons to your posts andÂ pages."),plan:"standard"},{name:e("Publicize"),link:"https://support.wordpress.com/publicize/",description:e("Automatically share your posts on Facebook, Twitter, Tumblr, andÂ more."),plan:"standard"},{name:e("Email Subscriptions"),link:"https://support.wordpress.com/follow-blog-widget/",description:e("Enables your readers to sign up to receive your posts viaÂ email."),plan:"standard"},{name:e("Related Posts"),link:"https://support.wordpress.com/related-posts/",description:e("Pulls relevant content from your blog to display at the bottom of yourÂ posts."),plan:"standard"},{name:e("Likes"),link:"https://support.wordpress.com/likes/",description:e("Engage readers with a Like button on yourÂ posts."),plan:"standard"},{name:e("Advanced Comments"),link:"https://support.wordpress.com/comments/",description:e("Comment likes, user mentions, notifications, andÂ more."),plan:"standard"}]},{category:"security",name:e("Security"),icon:"spam",plugins:[{name:e("Security Scanning"),link:"https://support.wordpress.com/security/",description:e("Constant monitoring of your site forÂ threats."),plan:"standard"},{name:e("Backup & Export"),link:"https://support.wordpress.com/export/#backups",description:e("24/7 backup of your entire site. ExportÂ everything."),plan:"standard"},{name:e("Akismet"),link:"http://akismet.com/",description:e("Advanced anti-spamÂ security."),plan:"standard"}]},{category:"appearance",name:e("Appearance"),icon:"customize",plugins:[{name:e("Advanced Galleries"),link:"https://support.wordpress.com/images/gallery/",description:e("Tiled, mosaic, slideshows, andÂ more."),plan:"standard"},{name:e("Extended Customizer"),link:"https://support.wordpress.com/customizer/",description:e("Edit colors andÂ backgrounds."),plan:"standard"},{name:e("Custom Design"),link:"https://support.wordpress.com/custom-design/",description:e("Customize your blog's look with custom fonts, a CSS editor, andÂ more."),plan:"premium",feature:"advanced-design"},{name:e("Extended Widgets"),link:"https://support.wordpress.com/category/widgets-sidebars/",description:e("Eventbrite, Flickr, Google Calendar, andÂ more."),plan:"standard"},{name:e("Infinite Scroll"),link:"https://support.wordpress.com/infinite-scroll/",description:e("Load more posts when you reach the bottom of a page on yourÂ site."),plan:"standard"},{name:e("Photon CDN"),link:"https://jetpack.com/support/photon/",description:e("Faster image loading andÂ editing."),plan:"standard"}]},{category:"writing",name:e("Writing"),icon:"pencil",plugins:[{name:e("Form Builder"),link:"https://support.wordpress.com/contact-form/",description:e("Build contact forms so visitors can get inÂ touch."),plan:"standard"},{name:e("Extended Shortcodes"),link:"https://support.wordpress.com/shortcodes/",description:e("YouTube, Twitter, Instagram, Spotify, andÂ more."),plan:"standard"},{name:e("Video Uploads"),link:"https://support.wordpress.com/videopress/",description:e("Upload and host your video files on your site withÂ VideoPress."),plan:"premium",feature:"video-upload"},{name:e("Importer"),link:"https://support.wordpress.com/import/",description:e("Import your blog content from a variety of other bloggingÂ platforms."),plan:"standard"},{name:e("Polls & Surveys"),link:"https://support.wordpress.com/polls/",description:e("Add polls and surveys to yourÂ site."),plan:"standard"},{name:e("Markdown"),link:"https://support.wordpress.com/markdown/",description:e("Text formatting using a lightweight markupÂ language."),plan:"standard"}]}]};t.default=i,e.exports=t.default},"./client/my-sites/plugins/plugins-list/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=void 0,s=void 0;for(n=0;n<t.length;n++)if(s=t[n],!(0,x.isEqual)(e[s],this.props[s]))return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginsList=void 0;var a=n("./node_modules/babel-runtime/core-js/object/keys.js"),l=s(a),r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),o=s(r),u=n("./node_modules/babel-runtime/helpers/defineProperty.js"),d=s(u),c=n("./node_modules/babel-runtime/core-js/object/assign.js"),p=s(c),f=n("./node_modules/prop-types/index.js"),g=s(f),m=n("./node_modules/react/react.js"),h=s(m),_=n("./node_modules/create-react-class/index.js"),b=s(_),v=n("./node_modules/page/index.js"),E=s(v),y=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/i18n-calypso/index.js"),S=n("./node_modules/classnames/index.js"),P=s(S),x=n("./node_modules/lodash/lodash.js"),k=n("./client/lib/accept/index.js"),I=s(k),w=n("./client/state/notices/actions.js"),T=n("./client/my-sites/plugins/plugin-item/plugin-item.jsx"),N=s(T),C=n("./client/lib/plugins/actions.js"),A=s(C),U=n("./client/my-sites/plugins/plugin-list-header/index.jsx"),D=s(U),M=n("./client/lib/plugins/log-store.js"),L=s(M),O=n("./client/lib/plugins/notices.jsx"),R=s(O),V=n("./client/components/card/index.jsx"),F=s(V),G=n("./client/components/section-header/index.jsx"),B=s(G),W=n("./client/state/ui/selectors.js"),z=n("./client/state/selectors/is-site-automated-transfer.js"),q=s(z),H=n("./client/state/analytics/actions.js"),J=t.PluginsList=(0,b.default)({displayName:"PluginsList",mixins:[R.default],propTypes:{plugins:g.default.arrayOf(g.default.shape({sites:g.default.array,slug:g.default.string,name:g.default.string})).isRequired,header:g.default.string.isRequired,selectedSite:g.default.object,selectedSiteSlug:g.default.string,pluginUpdateCount:g.default.number,isPlaceholder:g.default.bool.isRequired},getDefaultProps:function(){return{recordGoogleEvent:function(){}}},shouldComponentUpdate:function(e,t){var n=["plugins","sites","selectedSite","pluginUpdateCount"];return!!i.call(this,e,n)||(this.props.isPlaceholder!==e.isPlaceholder||(this.state.bulkManagementActive!==t.bulkManagementActive||(this.state.disconnectJetpackDialog!==t.disconnectJetpackDialog||(!(0,x.isEqual)(this.state.selectedPlugins,t.selectedPlugins)||!!this.shouldComponentUpdateNotices(this.state.notices,t.notices)))))},getInitialState:function(){return{disconnectJetpackDialog:!1,bulkManagementActive:!1,selectedPlugins:{}}},componentDidMount:function(){L.default.on("change",this.showDisconnectDialog)},componentWillUnmount:function(){L.default.removeListener("change",this.showDisconnectDialog)},isSelected:function(e){var t=e.slug;return!!this.state.selectedPlugins[t]},togglePlugin:function(e){var t=e.slug,n=this.state.selectedPlugins,s=n[t],i="Deselect";this.setState({selectedPlugins:(0,p.default)({},n,(0,d.default)({},t,!s))}),this.props.recordGoogleEvent("Plugins",i,"Plugin Name",t)},canBulkSelect:function(e){var t=this.getAllowedPluginActions(e),n=t.autoupdate,s=t.activation;return!this.hasNoSitesThatCanManage(e)&&(n||s)},setBulkSelectionState:function(e,t){var n=this,s=(0,x.reduce)(e,function(e,s){return e[s.slug]=n.canBulkSelect(s)&&t,e},{});this.setState({selectedPlugins:(0,p.default)({},this.state.selectedPlugins,s)})},getPluginBySlug:function(e){var t=this.props.plugins;return(0,x.find)(t,function(t){return t.slug===e})},filterSelection:{active:function(e){return!(!this.isSelected(e)||"jetpack"===e.slug)&&e.sites.some(function(e){return e.plugin&&e.plugin.active})},inactive:function(e){return!(!this.isSelected(e)||"jetpack"===e.slug)&&e.sites.some(function(e){return e.plugin&&!e.plugin.active})},updates:function(e){return!!this.isSelected(e)&&e.sites.some(function(e){return e.plugin&&e.plugin.update&&e.plugin.update.new_version&&e.canUpdateFiles})},selected:function(e){return this.isSelected(e)}},hasNoSitesThatCanManage:function(e){return!e.sites.some(function(e){return e.canManage})},getSelected:function(){return this.props.plugins.filter(this.filterSelection.selected.bind(this))},siteSuffix:function(){return this.props.selectedSiteSlug?"/"+this.props.selectedSiteSlug:""},recordEvent:function(e,t){if(e+=this.props.selectedSite?"":" on Multisite",t){var n=this.getSelected().map(function(e){return e.slug});this.props.recordGoogleEvent("Plugins",e,"Plugins",n)}else this.props.recordGoogleEvent("Plugins",e)},toggleBulkManagement:function(){var e=!this.state.bulkManagementActive;e?(this.setBulkSelectionState(this.props.plugins,!0),this.setState({bulkManagementActive:!0}),this.recordEvent("Clicked Manage")):(this.setState({bulkManagementActive:!1}),this.removePluginsNotices(),this.recordEvent("Clicked Manage Done"))},removePluginsNotices:function(){var e=this.state.notices;e=void 0===e?{}:e;var t=e.completed,n=e.errors;(t||n)&&A.default.removePluginsNotices([].concat((0,o.default)(t),(0,o.default)(n)))},doActionOverSelected:function(e,t){var n=function(t){var n=t.slug;return("deactivating"===e||"activating"===e)&&"jetpack"===n},s=function(e,t){return[].concat((0,o.default)(e),(0,o.default)(t))};this.removePluginsNotices(),this.props.plugins.filter(this.isSelected).filter((0,x.negate)(n)).map(function(e){return e.sites}).reduce(s,[]).forEach(function(e){return t(e,e.plugin)})},pluginHasUpdate:function(e){return e.sites.some(function(e){return e.plugin&&e.plugin.update&&e.canUpdateFiles})},updateAllPlugins:function(){this.removePluginsNotices(),this.props.plugins.forEach(function(e){e.sites.forEach(function(e){return A.default.updatePlugin(e,e.plugin)})}),this.recordEvent("Clicked Update all Plugins",!0)},updateSelected:function(){this.doActionOverSelected("updating",A.default.updatePlugin),this.recordEvent("Clicked Update Plugin(s)",!0)},activateSelected:function(){this.doActionOverSelected("activating",A.default.activatePlugin),this.recordEvent("Clicked Activate Plugin(s)",!0)},deactivateSelected:function(){this.doActionOverSelected("deactivating",A.default.deactivatePlugin),this.recordEvent("Clicked Deactivate Plugin(s)",!0)},deactiveAndDisconnectSelected:function(){var e=!1;this.doActionOverSelected("deactivating",function(t,n){e=!0,A.default.deactivatePlugin(t,n)}),e&&this.props.selectedSite&&this.setState({disconnectJetpackDialog:!0}),this.recordEvent("Clicked Deactivate Plugin(s) and Disconnect Jetpack",!0)},setAutoupdateSelected:function(){this.doActionOverSelected("enablingAutoupdates",A.default.enableAutoUpdatesPlugin),this.recordEvent("Clicked Enable Autoupdate Plugin(s)",!0)},unsetAutoupdateSelected:function(){this.doActionOverSelected("disablingAutoupdates",A.default.disableAutoUpdatesPlugin),this.recordEvent("Clicked Disable Autoupdate Plugin(s)",!0)},getConfirmationText:function(){var e={},t={},n=void 0,s=void 0,i=this.props,a=i.plugins,r=i.translate;a.filter(this.isSelected).forEach(function(i){e[i.slug]=!0,n=i.name||i.slug,i.sites.forEach(function(e){e.canUpdateFiles&&(t[e.ID]=!0,s=e.title)})});var o=(0,l.default)(e).length,u=(0,l.default)(t).length,d=(u>1?"n sites":"1 site")+" "+(o>1?"n plugins":"1 plugin");switch(d){case"1 site 1 plugin":return r("You are about to remove {{em}}%(plugin)s from %(site)s{{/em}}.{{p}}This will deactivate the plugin and delete all associated files and data.{{/p}}",{components:{em:h.default.createElement("em",null),p:h.default.createElement("p",null)},args:{plugin:n,site:s}});case"1 site n plugins":return r("You are about to remove {{em}}%(numberOfPlugins)d plugins from %(site)s{{/em}}.{{p}}This will deactivate the plugins and delete all associated files and data.{{/p}}",{components:{em:h.default.createElement("em",null),p:h.default.createElement("p",null)},args:{numberOfPlugins:o,site:s}});case"n sites 1 plugin":return r("You are about to remove {{em}}%(plugin)s from %(numberOfSites)d sites{{/em}}.{{p}}This will deactivate the plugin and delete all associated files and data.{{/p}}",{components:{em:h.default.createElement("em",null),p:h.default.createElement("p",null)},args:{plugin:n,numberOfSites:u}});case"n sites n plugins":return r("You are about to remove {{em}}%(numberOfPlugins)d plugins from %(numberOfSites)d sites{{/em}}.{{p}}This will deactivate the plugins and delete all associated files and data.{{/p}}",{components:{em:h.default.createElement("em",null),p:h.default.createElement("p",null)},args:{numberOfPlugins:o,numberOfSites:u}})}},removePluginDialog:function(){var e=this.props.translate,t=h.default.createElement("div",null,h.default.createElement("span",null,this.getConfirmationText()),h.default.createElement("span",null,e("Do you want to continue?")));(0,I.default)(t,this.removeSelected,e("Remove",{context:"Verb. Presented to user as a label for a button."}))},removeSelected:function(e){e&&(this.doActionOverSelected("removing",A.default.removePlugin),this.recordEvent("Clicked Remove Plugin(s)",!0))},showDisconnectDialog:function(){var e=this.props.translate;this.state.disconnectJetpackDialog&&!this.state.notices.inProgress.length&&(this.setState({disconnectJetpackDialog:!1}),this.props.warningNotice(e("Jetpack cannot be deactivated from WordPress.com. {{link}}Manage connection{{/link}}",{components:{link:h.default.createElement("a",{href:"/settings/general/"+this.props.selectedSiteSlug})}})))},closeDialog:function(e){return"continue"===e?void E.default.redirect("/settings/general/"+this.props.selectedSiteSlug):(this.setState({showJetpackDisconnectDialog:!1}),void this.forceUpdate())},render:function(){var e=(0,P.default)("plugins-list__elements",{"is-bulk-editing":this.state.bulkManagementActive}),t=this.props.selectedSiteSlug?this.props.selectedSiteSlug:"";return this.props.isPlaceholder?h.default.createElement("div",{className:"plugins-list"},h.default.createElement(B.default,{key:"plugins-list__section-placeholder",label:this.props.header,className:"plugins-list__section-actions is-placeholder"}),h.default.createElement(F.default,{className:e},this.renderPlaceholders())):(0,x.isEmpty)(this.props.plugins)?null:h.default.createElement("div",{className:"plugins-list"},h.default.createElement(D.default,{label:this.props.header,isBulkManagementActive:this.state.bulkManagementActive,selectedSiteSlug:t,plugins:this.props.plugins,selected:this.getSelected(),toggleBulkManagement:this.toggleBulkManagement,updateAllPlugins:this.updateAllPlugins,updateSelected:this.updateSelected,pluginUpdateCount:this.props.pluginUpdateCount,activateSelected:this.activateSelected,deactiveAndDisconnectSelected:this.deactiveAndDisconnectSelected,deactivateSelected:this.deactivateSelected,setAutoupdateSelected:this.setAutoupdateSelected,unsetAutoupdateSelected:this.unsetAutoupdateSelected,removePluginNotice:this.removePluginDialog,setSelectionState:this.setBulkSelectionState,haveActiveSelected:this.props.plugins.some(this.filterSelection.active.bind(this)),haveInactiveSelected:this.props.plugins.some(this.filterSelection.inactive.bind(this)),haveUpdatesSelected:this.props.plugins.some(this.filterSelection.updates.bind(this))}),h.default.createElement(F.default,{className:e},this.orderPluginsByUpdates(this.props.plugins).map(this.renderPlugin)))},getAllowedPluginActions:function(e){var t=["jetpack","vaultpress","akismet"],n=this.props.isSiteAutomatedTransfer&&(0,x.includes)(t,e.slug);return{autoupdate:!n,activation:!n}},orderPluginsByUpdates:function(e){var t=this;return(0,x.sortBy)(e,function(e){return t.pluginHasUpdate(e)?0:1})},renderPlugin:function(e){var t=this.togglePlugin.bind(this,e),n=this.getAllowedPluginActions(e),s=this.state.bulkManagementActive&&(n.autoupdate||n.activation);return h.default.createElement(N.default,{key:e.slug,hasAllNoManageSites:this.hasNoSitesThatCanManage(e),plugin:e,sites:e.sites,progress:this.state.notices.inProgress.filter(function(t){return t.plugin.slug===e.slug}),notices:this.state.notices,isSelected:this.isSelected(e),isSelectable:s,onClick:t,hasUpdate:this.pluginHasUpdate,selectedSite:this.props.selectedSite,pluginLink:"/plugins/"+encodeURIComponent(e.slug)+this.siteSuffix(),allowedActions:n,isAutoManaged:!n.autoupdate})},renderPlaceholders:function(){var e=18;return(0,x.range)(e).map(function(e){return h.default.createElement(N.default,{key:"placeholder-"+e})})}});t.default=(0,y.connect)(function(e){var t=(0,W.getSelectedSite)(e);return{selectedSite:t,selectedSiteSlug:(0,W.getSelectedSiteSlug)(e),isSiteAutomatedTransfer:(0,q.default)(e,(0,x.get)(t,"ID"))}},{recordGoogleEvent:H.recordGoogleEvent,warningNotice:w.warningNotice})((0,j.localize)(J))},"./client/my-sites/plugins/utils.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,a.get)(e,"slug",""),n=u.default.get(),s=(0,a.find)(n,function(e){return e.name===t}),i=(0,a.get)(s,"envId",[]);if((0,a.includes)(i,(0,r.default)("env_id")))return(0,a.get)(s,"settings_path")}Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionSettingsPath=i;var a=n("./node_modules/lodash/lodash.js"),l=n("./client/config/index.js"),r=s(l),o=n("./client/sections.js"),u=s(o)},"./client/my-sites/sidebar-navigation/sidebar-navigation.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/react-redux/es/index.js"),r=n("./node_modules/i18n-calypso/index.js"),o=n("./client/components/sidebar-navigation/index.jsx"),u=s(o),d=n("./client/blocks/site-icon/index.jsx"),c=s(d),p=n("./client/state/ui/selectors.js"),f=function(e){var t=e.site,n=e.translate,s=n("All Sites"),i="all-sites";return t&&(s=t.title,i=null),a.default.createElement(u.default,{linkClassName:i,sectionName:"site",sectionTitle:s},t&&a.default.createElement(c.default,{site:t}))};t.default=(0,l.connect)(function(e){return{site:(0,p.getSelectedSite)(e)}})((0,r.localize)(f)),e.exports=t.default},"./client/state/plugins/premium/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return m.default.handleViewAction({type:"INSTALL_PLUGIN",action:"INSTALL_PLUGIN",site:e,plugin:t,data:null,error:null}),t.active?(n({type:b.PLUGIN_SETUP_CONFIGURE,siteId:e.ID,slug:t.slug}),void o(e,t,n)):void y(e,t.slug).install().then(function(s){n({type:b.PLUGIN_SETUP_ACTIVATE,siteId:e.ID,slug:t.slug}),s.key=t.key,l(e,s,n)}).catch(function(s){"PluginAlreadyInstalledError"===s.name?a(e,t,n):(n({type:b.PLUGIN_SETUP_ERROR,siteId:e.ID,slug:t.slug,error:s}),m.default.handleServerAction({type:"RECEIVE_INSTALLED_PLUGIN",action:"INSTALL_PLUGIN",site:e,plugin:t,data:null,error:s}))})}function a(e,t,n){y(e,t.id).updateVersion().then(function(s){n({type:b.PLUGIN_SETUP_ACTIVATE,siteId:e.ID,slug:t.slug}),s.key=t.key,l(e,s,n)}).catch(function(s){n({type:b.PLUGIN_SETUP_ERROR,siteId:e.ID,slug:t.slug,error:s}),m.default.handleServerAction({type:"RECEIVE_INSTALLED_PLUGIN",action:"INSTALL_PLUGIN",site:e,plugin:t,data:null,error:s})})}function l(e,t,n){var s=function(s){n({type:b.PLUGIN_SETUP_CONFIGURE,siteId:e.ID,slug:s.slug}),m.default.handleServerAction({type:"RECEIVE_INSTALLED_PLUGIN",action:"INSTALL_PLUGIN",site:e,plugin:s,data:s,error:null}),r(e,s),o(e,t,n)};y(e,t.id).activate().then(s).catch(function(i){return"ActivationErrorError"===i.name||"ActivationError"===i.name?void s(t):(n({type:b.PLUGIN_SETUP_ERROR,siteId:e.ID,slug:t.slug,error:i}),void m.default.handleServerAction({type:"RECEIVE_INSTALLED_PLUGIN",action:"INSTALL_PLUGIN",site:e,plugin:t,data:null,error:i}))})}function r(e,t){y(e,t.id).enableAutoupdate()}function o(e,t,n){var s=!1;switch(t.slug){case"vaultpress":s="vaultpress_auto_register";break;case"akismet":s="wordpress_api_key"}if(!s||!t.key){var i=new Error("We can't configure this plugin.");return i.name="ConfigError",void n({type:b.PLUGIN_SETUP_ERROR,siteId:e.ID,slug:t.slug,error:i})}var a=t.key;"vaultpress"===t.slug&&(0,_.default)(t.version,"1.8.3",">")&&(a=(0,d.default)({key:t.key,action:"register"}));var l=function(){var i={option_name:s,option_value:a,site_option:!1,is_array:!1};return p.default.undocumented().site(e.ID).setOption(i,function(s,i){if(!s&&"vaultpress"===t.slug&&(0,_.default)(t.version,"1.8.3",">")){var a=JSON.parse(i.option_value);"response"===a.action&&"broken"===a.status&&(s=new Error(a.error),s.name="RegisterError")}s&&n({type:b.PLUGIN_SETUP_ERROR,siteId:e.ID,slug:t.slug,error:s}),n({type:b.PLUGIN_SETUP_FINISH,siteId:e.ID,slug:t.slug})})};return"vaultpress"===t.slug?l():p.default.undocumented().site(e.ID).getOption({option_name:s},function(s,i){if((0,f.get)(i,"option_value")===a)return void n({type:b.PLUGIN_SETUP_FINISH,siteId:e.ID,slug:t.slug});if(i.option_value){var r=new Error;return r.code="already_registered",void n({type:b.PLUGIN_SETUP_ERROR,siteId:e.ID,slug:t.slug,error:r})}return l()})}Object.defineProperty(t,"__esModule",{value:!0});var u=n("./node_modules/babel-runtime/core-js/json/stringify.js"),d=s(u),c=n("./client/lib/wp/browser.js"),p=s(c),f=n("./node_modules/lodash/lodash.js"),g=n("./client/dispatcher/index.js"),m=s(g),h=n("./client/lib/version-compare/index.js"),_=s(h),b=n("./client/state/action-types.js"),v={},E=function(e){var t=e.keys;return(0,f.keys)(t).map(function(e){var n=t[e];return{slug:e,name:e,key:n,status:"wait",error:null}})},y=function(e,t){var n=p.default.site(e.ID),s=n.plugin(t);return s};t.default={fetchInstallInstructions:function(e){return function(t){v[e]||(v[e]=!0,setTimeout(function(){t({type:b.PLUGIN_SETUP_INSTRUCTIONS_FETCH,siteId:e})},1),p.default.undocumented().fetchJetpackKeys(e,function(n,s){return n?void t({type:b.PLUGIN_SETUP_INSTRUCTIONS_RECEIVE,siteId:e,data:[]}):(s=E(s),void t({type:b.PLUGIN_SETUP_INSTRUCTIONS_RECEIVE,siteId:e,data:s}))}))}},installPlugin:function(e,t){return function(n){n({type:b.PLUGIN_SETUP_INSTALL,siteId:t.ID,slug:e.slug}),i(t,e,n)}}},e.exports=t.default},"./client/state/plugins/wporg/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/debug/browser.js"),a=s(i),l=n("./client/lib/wporg/index.js"),r=s(l),o=n("./client/lib/plugins/utils.js"),u=s(o),d=n("./client/state/action-types.js"),c=(0,a.default)("calypso:wporg-data:actions"),p={};t.default={fetchPluginData:function(e){return function(t){p[e]||(p[e]=!0,setTimeout(function(){t({type:d.FETCH_WPORG_PLUGIN_DATA,pluginSlug:e})},1),r.default.fetchPluginInformation(e,function(n,s){p[e]=null,c("plugin details fetched from .org",e,n,s),t({type:d.WPORG_PLUGIN_DATA_RECEIVE,pluginSlug:e,data:s?u.default.normalizePluginData({detailsFetched:Date.now()},s):null,error:n})}))}}},e.exports=t.default},"./client/state/plugins/wporg/selectors.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=s(i),l=function(e,t){return e&&e[t]?(0,a.default)({},e[t]):null},r=function(e,t){return"undefined"==typeof e[t]||e[t]},o=function(e,t){var n=l(e,t);return!!n&&!!n.fetched};t.default={getPlugin:l,isFetching:r,isFetched:o},e.exports=t.default},"./client/state/themes/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return{type:Y.THEME_BACK_PATH_SET,path:e}}function a(e,t){return l([e],t)}function l(e,t,n,s){return function(i,a){var l=e,r=s;if((0,X.isJetpackSite)(a(),t)){var o=(0,Z.shouldFilterWpcomThemes)(a(),t);l=(0,R.filter)(e,function(e){return(0,K.isThemeMatchingQuery)(n,e)&&!(o&&(0,K.isThemeFromWpcom)(e))}),r=l.length}i({type:Y.THEMES_REQUEST_SUCCESS,themes:l,siteId:t,query:n,found:r})}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,s){var i=(new Date).getTime();n({type:Y.THEMES_REQUEST,siteId:e,query:t});var a=void 0;return a="wporg"===e?function(){return J.default.fetchThemesList(t)}:"wpcom"===e?function(){return q.default.undocumented().themes(null,(0,O.default)({},t,{apiVersion:"1.2"}))}:function(){return q.default.undocumented().themes(e,(0,O.default)({},t,{apiVersion:"1"}))},a().then(function(a){var r=a.themes,o=a.info;o=void 0===o?{}:o;var u=o.results,d=a.found,c=void 0===d?u:d,p=void 0;if(p="wporg"===e?(0,R.map)(r,K.normalizeWporgTheme):"wpcom"===e?(0,R.map)(r,K.normalizeWpcomTheme):(0,R.map)(r,K.normalizeJetpackTheme),(t.search||t.filter)&&1===t.page){var f=(new Date).getTime()-i,g=(0,ne.default)(s(),t.filter),m=g+(t.search||""),h=(0,Q.recordTracksEvent)("calypso_themeshowcase_search",{search_term:m||null,search_taxonomies:g,tier:t.tier,response_time_in_ms:f,result_count:c,results_first_page:p.map((0,R.property)("id")).join()});n(h)}n(l(p,e,t,c))}).catch(function(s){n({type:Y.THEMES_REQUEST_FAILURE,siteId:e,query:t,error:s})})}}function o(e,t,n){return{type:Y.THEME_REQUEST_FAILURE,siteId:e,themeId:t,error:n}}function u(e,t){return function(n){return n({type:Y.THEME_REQUEST,siteId:t,themeId:e}),"wporg"===t?J.default.fetchThemeInformation(e).then(function(s){if(!s)throw"Theme not found";n(a((0,K.normalizeWporgTheme)(s),t)),n({type:Y.THEME_REQUEST_SUCCESS,siteId:t,themeId:e})}).catch(function(s){n({type:Y.THEME_REQUEST_FAILURE,siteId:t,themeId:e,error:s})}):"wpcom"===t?q.default.undocumented().themeDetails(e).then(function(s){n(a((0,K.normalizeWpcomTheme)(s),t)),n({type:Y.THEME_REQUEST_SUCCESS,siteId:t,themeId:e})}).catch(function(s){n({type:Y.THEME_REQUEST_FAILURE,siteId:t,themeId:e,error:s})}):q.default.undocumented().jetpackThemeDetails(e,t).then(function(s){var i=s.themes;n(l((0,R.map)(i,K.normalizeJetpackTheme),t)),n({type:Y.THEME_REQUEST_SUCCESS,siteId:t,themeId:e})}).catch(function(s){n(o(t,e,s))})}}function d(e){return function(t,n){return t({type:Y.ACTIVE_THEME_REQUEST,siteId:e}),q.default.undocumented().activeTheme(e).then(function(s){re("Received current theme",s);var i=(0,X.isJetpackSite)(n(),e)?e:"wpcom";t(a(s,i)),t({type:Y.ACTIVE_THEME_REQUEST_SUCCESS,siteId:e,theme:s})}).catch(function(n){t({type:Y.ACTIVE_THEME_REQUEST_FAILURE,siteId:e,error:n})})}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,a){if((0,X.isJetpackSite)(a(),t)&&!(0,Z.getTheme)(a(),t,e)){var l=U(a(),t,e);return i(v(l,t,n,s))}return i(p(e,t,n,s))}}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i){return i({type:Y.THEME_ACTIVATE,themeId:e,siteId:t}),q.default.undocumented().activateTheme(e,t).then(function(a){var l=a.stylesheet||e;i(f(l,t,n,s))}).catch(function(n){i({type:Y.THEME_ACTIVATE_FAILURE,themeId:e,siteId:t,error:n})})}}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=function(i,a){var l={type:Y.THEME_ACTIVATE_SUCCESS,themeStylesheet:e,siteId:t},r=(0,Z.getActiveTheme)(a(),t),o=(0,Z.getLastThemeQuery)(a(),t),u=(0,ne.default)(a(),o.filter),d=u+(o.search||""),c=(0,Q.recordTracksEvent)("calypso_themeshowcase_theme_activate",{theme:(0,K.getThemeIdFromStylesheet)(e),previous_theme:r,source:n,purchased:s,search_term:d||null,search_taxonomies:u});i((0,Q.withAnalytics)(c,l))};return i}function g(e,t){return function(n,s){return n({type:Y.THEME_INSTALL,siteId:t,themeId:e}),q.default.undocumented().installThemeOnJetpack(t,e).then(function(i){if(n(a(i,t)),n({type:Y.THEME_INSTALL_SUCCESS,siteId:t,themeId:e}),(0,R.endsWith)(e,"-wpcom")){var l=(0,Z.getWpcomParentThemeId)(s(),e.replace("-wpcom",""));if(l)return n(g(l+"-wpcom",t))}}).catch(function(s){n({type:Y.THEME_INSTALL_FAILURE,siteId:t,themeId:e,error:s})})}}function m(e){return{type:Y.THEME_CLEAR_ACTIVATED,siteId:e}}function h(e,t){return function(n,s){if((0,X.isJetpackSite)(s(),t)&&!(0,Z.getTheme)(s(),t,e)){var i=U(s(),t,e);return n(_(i,t))}return n(b(e,t))}}function _(e,t){return function(n){return n(g(e,t)).then(function(){n(b(e,t))})}}function b(e,t){return function(n,s){var i=(0,Z.getThemeCustomizeUrl)(s(),e,t);return(0,W.isExternal)(i)?void(window.location.href=i):void(0,B.default)((0,Z.getThemeCustomizeUrl)(s(),e,t))}}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i){return i(g(e,t)).then(function(){i(p(e,t,n,s));
})}}function E(e,t){return function(n){return n({type:Y.THEME_UPLOAD_START,siteId:e}),q.default.undocumented().uploadTheme(e,t,function(t){n({type:Y.THEME_UPLOAD_PROGRESS,siteId:e,loaded:t.loaded,total:t.total})}).then(function(t){n(a(t,e)),n({type:Y.THEME_UPLOAD_SUCCESS,siteId:e,themeId:t.id})}).catch(function(t){n({type:Y.THEME_UPLOAD_FAILURE,siteId:e,error:t})})}}function y(e){return{type:Y.THEME_UPLOAD_CLEAR,siteId:e}}function j(e,t,n){var s=n?"plugins":"themes";return function(i){var a={type:Y.THEME_TRANSFER_INITIATE_REQUEST,siteId:e};return i((0,Q.withAnalytics)((0,Q.recordTracksEvent)("calypso_automated_transfer_initiate_transfer",{plugin:n,context:s}),a)),q.default.undocumented().initiateTransfer(e,n,t,function(t){i({type:Y.THEME_TRANSFER_INITIATE_PROGRESS,siteId:e,loaded:t.loaded,total:t.total})}).then(function(t){var a=t.transfer_id;if(!a)return i(x(e,{error:"initiate_failure"},n));var l={type:Y.THEME_TRANSFER_INITIATE_SUCCESS,siteId:e,transferId:a};i((0,Q.withAnalytics)((0,Q.recordTracksEvent)("calypso_automated_transfer_initiate_success",{plugin:n,context:s}),l)),i(k(e,a))}).catch(function(t){i(x(e,t,n))})}}function S(e,t,n,s,i){return{type:Y.THEME_TRANSFER_STATUS_RECEIVE,siteId:e,transferId:t,status:n,message:s,themeId:i}}function P(e,t,n){return{type:Y.THEME_TRANSFER_STATUS_FAILURE,siteId:e,transferId:t,error:n}}function x(e,t,n){var s=n?"plugin":"theme";return function(i){var a={type:Y.THEME_TRANSFER_INITIATE_FAILURE,siteId:e,error:t};i((0,Q.withAnalytics)((0,Q.recordTracksEvent)("calypso_automated_transfer_initiate_failure",{plugin:n,context:s}),a))}}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18e4,i=Date.now()+s;return function(s){var a=function a(l,r){return Date.now()>i?(s(P(e,t,"client timeout")),l()):q.default.undocumented().transferStatus(e,t).then(function(i){var o=i.status,u=i.message,d=i.uploaded_theme_slug;if(s(S(e,t,o,u,d)),"complete"===o){var c=d?"themes":"plugins";return s((0,Q.recordTracksEvent)("calypso_automated_transfer_complete",{transfer_id:t,context:c})),l()}return(0,R.delay)(a,n,l,r)}).catch(function(n){return s(P(e,t,n)),l()})};return new M.default(a)}}function I(e,t){return function(n){return n({type:Y.THEME_DELETE,themeId:e,siteId:t}),q.default.undocumented().deleteThemeFromJetpack(t,e).then(function(s){n({type:Y.THEME_DELETE_SUCCESS,themeId:e,siteId:t,themeName:s.name})}).catch(function(s){n({type:Y.THEME_DELETE_FAILURE,themeId:e,siteId:t,error:s})})}}function w(e,t){return function(n,s){var i=(0,Z.getTheme)(s(),t,e),a=i.name,l=(0,X.getSiteTitle)(s(),t);(0,le.default)(ie.default.translate("Are you sure you want to delete %(themeName)s from %(siteTitle)s?",{args:{themeName:a,siteTitle:l},comment:"Themes: theme delete confirmation dialog"}),function(s){s&&n(I(e,t))},ie.default.translate("Delete %(themeName)s",{args:{themeName:a},comment:"Themes: theme delete dialog confirm button"}),ie.default.translate("Back",{context:"go back (like the back button in a browser)"}))}}function T(e,t){return{type:Y.THEME_PREVIEW_OPTIONS,primary:e,secondary:t}}function N(e){return{type:Y.THEME_PREVIEW_STATE,themeId:e}}function C(){return{type:Y.THEME_PREVIEW_STATE,themeId:null}}function A(){return{type:Y.THEME_FILTERS_REQUEST}}function U(e,t,n){return(0,ee.default)(e,t)?n:(0,Z.isDownloadableFromWpcom)(e,n)?n+"-wpcom":n}Object.defineProperty(t,"__esModule",{value:!0});var D=n("./node_modules/babel-runtime/core-js/promise.js"),M=s(D),L=n("./node_modules/babel-runtime/helpers/extends.js"),O=s(L);t.setBackPath=i,t.receiveTheme=a,t.receiveThemes=l,t.requestThemes=r,t.themeRequestFailure=o,t.requestTheme=u,t.requestActiveTheme=d,t.activate=c,t.activateTheme=p,t.themeActivated=f,t.installTheme=g,t.clearActivated=m,t.tryAndCustomize=h,t.installAndTryAndCustomizeTheme=_,t.tryAndCustomizeTheme=b,t.installAndActivateTheme=v,t.uploadTheme=E,t.clearThemeUpload=y,t.initiateThemeTransfer=j,t.pollThemeTransferStatus=k,t.deleteTheme=I,t.confirmDelete=w,t.setThemePreviewOptions=T,t.showThemePreview=N,t.hideThemePreview=C,t.requestThemeFilters=A;var R=n("./node_modules/lodash/lodash.js"),V=n("./node_modules/debug/browser.js"),F=s(V),G=n("./node_modules/page/index.js"),B=s(G),W=n("./client/lib/url/index.js"),z=n("./client/lib/wp/browser.js"),q=s(z),H=n("./client/lib/wporg/index.js"),J=s(H),Y=n("./client/state/action-types.js"),Q=n("./client/state/analytics/actions.js"),Z=n("./client/state/themes/selectors.js"),K=n("./client/state/themes/utils.js"),X=n("./client/state/sites/selectors.js"),$=n("./client/state/selectors/is-site-automated-transfer.js"),ee=s($),te=n("./client/state/selectors/prepend-theme-filter-keys.js"),ne=s(te),se=n("./node_modules/i18n-calypso/index.js"),ie=s(se),ae=n("./client/lib/accept/index.js"),le=s(ae),re=(0,F.default)("calypso:themes:actions")},"./client/state/themes/selectors.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var s=(0,V.find)(["wpcom","wporg",t],function(t){return X(e,t,n)});return X(e,s,n)}function a(e,t,n){return(0,V.get)(e.themes.themeRequestErrors,[n,t],null)}function l(e,t){return(0,V.get)(e.themes.lastQuery,t,{})}function r(e,t,n){var s=(0,Q.getSerializedThemesQuery)(n,t);return!!e.themes.queryRequests[s]}function o(e,t,n){return e.themes.queries[t]?e.themes.queries[t].getFound(n):null}function u(e,t,n){if(!e.themes.queries[t])return null;var s=e.themes.queries[t].getNumberOfPages(n);return null===s?null:(0,H.isJetpackSite)(e,t)?1:Math.max(s,1)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=u(e,t,n);return null===s?s:s===(n.page||Z.DEFAULT_THEME_QUERY.page)}function c(e,t,n){return!!e.themes.themeRequests[t]&&!!e.themes.themeRequests[t][n]}function p(e,t){return(0,V.get)(e.themes.activeThemeRequests,t,!1)}function f(e,t){return!!X(e,"wpcom",t)}function g(e,t){return!!X(e,"wporg",t)}function m(e,t,n){if(!t)return null;if((0,H.isJetpackSite)(e,n)&&!(q.default.isEnabled("manage/themes/details/jetpack")&&(0,H.canJetpackSiteManage)(e,n)&&(0,H.hasJetpackSiteJetpackThemesExtendedFeatures)(e,n)))return(0,H.getSiteOption)(e,n,"admin_url")+"themes.php?theme="+t;var s=Q.oldShowcaseUrl+t;return q.default.isEnabled("manage/themes/details")&&(s="/theme/"+t),s+(n?"/"+(0,H.getSiteSlug)(e,n):"")}function h(e,t,n){if(!t||!w(e,t))return null;var s=n?"/"+(0,H.getSiteSlug)(e,n):"";return q.default.isEnabled("manage/themes/details")?"/theme/"+t+"/setup"+s:""+Q.oldShowcaseUrl+s+t+"/support"}function _(e,t,n){if(!t)return null;var s=Q.oldShowcaseUrl+t;return q.default.isEnabled("manage/themes/details")&&(s="/theme/"+t+"/support"),s+(n?"/"+(0,H.getSiteSlug)(e,n):"")}function b(e,t,n){return(0,H.isJetpackSite)(e,n)||!w(e,t)?null:"/checkout/"+(0,H.getSiteSlug)(e,n)+"/theme:"+t}function v(e,t,n){var s=(0,H.getCustomizerUrl)(e,n);if(!n||!t||P(e,t,n))return s;var i=(0,V.includes)(s,"?")?"&":"?",a=void 0;if((0,H.isJetpackSite)(e,n))a=t;else{var l=X(e,"wpcom",t);if(!l)return s;a=l.stylesheet}return s+i+"theme="+a}function E(e,t){if(!t)return null;var n="/start/with-theme?ref=calypshowcase&theme="+t;return w(e,t)&&(n+="&premium=true"),n}function y(e,t,n){var s=i(e,n,t);return(0,V.get)(s,"demo_uri")}function j(e,t){return w(e,t)?"//premium-themes.forums.wordpress.com/forum/"+t:f(e,t)?"//en.forums.wordpress.com/forum/themes":g(e,t)?"//wordpress.org/support/theme/"+t:null}function S(e,t){var n=(0,V.get)(e.themes.activeThemes,t,null);return n&&n.replace("-wpcom","")}function P(e,t,n){return S(e,n)===t}function x(e,t){return(0,V.get)(e.themes.activationRequests,t,!1)}function k(e,t){return(0,V.get)(e.themes.completedActivationRequests,t,!1)}function I(e,t,n){var s=$(e,t,n);return(0,V.get)(e.themes.themeInstalls,[n,s],!1)}function w(e,t){var n=X(e,"wpcom",t);return(0,Q.isPremium)(n)}function T(e,t,n){return C(e,t,n)||(0,Y.hasFeature)(e,n,K.FEATURE_UNLIMITED_PREMIUM_THEMES)}function N(e,t,n){return!!X(e,n,t)||f(e,t)&&q.default.isEnabled("manage/themes/upload")&&(0,H.hasJetpackSiteJetpackThemesExtendedFeatures)(e,n)}function C(e,t,n){var s=(0,J.getSitePurchases)(e,n);return(0,V.some)(s,{productSlug:"premium_theme",meta:t})}function A(e){return(0,V.get)(e.themes,"themePreviewOptions",{})}function U(e){return(0,V.get)(e.themes,"themePreviewVisibility",null)}function D(e,t){return(0,V.get)(X(e,"wpcom",t),"template",null)}function M(e,t){var n=(0,V.get)(X(e,"wpcom",t),"download","");return!!(0,V.includes)(n,"wordpress.com")}function L(e,t){return(0,H.isJetpackSite)(e,t)&&q.default.isEnabled("manage/themes/upload")&&(0,H.hasJetpackSiteJetpackThemesExtendedFeatures)(e,t)&&!(0,H.isJetpackSiteMultiSite)(e,t)}function O(e,t,n){return(0,H.isJetpackSite)(e,n)&&w(e,t)&&!(0,Y.hasFeature)(e,n,K.FEATURE_UNLIMITED_PREMIUM_THEMES)?"/checkout/"+(0,H.getSiteSlug)(e,n)+"/professional":null}function R(e,t,n){if(!w(e,t)||T(e,t,n))return"";if((0,H.isJetpackSite)(e,n))return G.default.translate("Upgrade",{comment:"Used to indicate a premium theme is available to the user once they upgrade their plan"});var s=X(e,"wpcom",t);return(0,V.get)(s,"price")}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingThemesForQueryIgnoringPage=t.getThemesForQueryIgnoringPage=t.getThemesForQuery=t.getTheme=void 0,t.getCanonicalTheme=i,t.getThemeRequestErrors=a,t.getLastThemeQuery=l,t.isRequestingThemesForQuery=r,t.getThemesFoundForQuery=o,t.getThemesLastPageForQuery=u,t.isThemesLastPageForQuery=d,t.isRequestingTheme=c,t.isRequestingActiveTheme=p,t.isWpcomTheme=f,t.isWporgTheme=g,t.getThemeDetailsUrl=m,t.getThemeSupportUrl=h,t.getThemeHelpUrl=_,t.getThemePurchaseUrl=b,t.getThemeCustomizeUrl=v,t.getThemeSignupUrl=E,t.getThemeDemoUrl=y,t.getThemeForumUrl=j,t.getActiveTheme=S,t.isThemeActive=P,t.isActivatingTheme=x,t.hasActivatedTheme=k,t.isInstallingTheme=I,t.isThemePremium=w,t.isPremiumThemeAvailable=T,t.isThemeAvailableOnJetpackSite=N,t.isThemePurchased=C,t.getThemePreviewThemeOptions=A,t.themePreviewVisibility=U,t.getWpcomParentThemeId=D,t.isDownloadableFromWpcom=M,t.shouldFilterWpcomThemes=L,t.getJetpackUpgradeUrlIfPremiumTheme=O,t.getPremiumThemePrice=R;var V=n("./node_modules/lodash/lodash.js"),F=n("./node_modules/i18n-calypso/index.js"),G=s(F),B=n("./client/lib/create-selector/index.js"),W=s(B),z=n("./client/config/index.js"),q=s(z),H=n("./client/state/sites/selectors.js"),J=n("./client/state/purchases/selectors.js"),Y=n("./client/state/sites/plans/selectors.js"),Q=n("./client/state/themes/utils.js"),Z=n("./client/state/themes/constants.js"),K=n("./client/lib/plans/constants.js"),X=t.getTheme=(0,W.default)(function(e,t,n){var s=e.themes.queries[t];return s?s.getItem(n):null},function(e){return e.themes.queries}),$=function(e,t,n){var s=n&&(0,H.isJetpackSite)(e,n);return s&&!X(e,n,t)?t+"-wpcom":t};t.getThemesForQuery=(0,W.default)(function(e,t,n){var s=e.themes.queries[t];if(!s)return null;var i=s.getItems(n);return i?(0,V.includes)(i,void 0)?null:(0,V.uniq)(i):null},function(e){return e.themes.queries},function(e,t,n){return(0,Q.getSerializedThemesQuery)(n,t)}),t.getThemesForQueryIgnoringPage=(0,W.default)(function(e,t,n){var s=e.themes.queries[t];if(!s)return null;var i=s.getItemsIgnoringPage(n);return i?(0,V.uniq)(i):null},function(e){return e.themes.queries},function(e,t,n){return(0,Q.getSerializedThemesQueryWithoutPage)(n,t)}),t.isRequestingThemesForQueryIgnoringPage=(0,W.default)(function(e,t,n){var s=(0,V.omit)((0,Q.getNormalizedThemesQuery)(n),"page");return(0,V.some)(e.themes.queryRequests,function(e,n){if(!e)return!1;var i=(0,Q.getDeserializedThemesQueryDetails)(n);return i.siteId===t&&(0,V.isEqual)(s,(0,V.omit)(i.query,"page"))})},function(e){return e.themes.queryRequests},function(e,t,n){return(0,Q.getSerializedThemesQuery)(n,t)})},"./client/state/ui/drop-zone/actions.js":function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:a.DROPZONE_SHOW,dropZoneName:e}}function i(e){return{type:a.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=s,t.hideDropZone=i;var a=n("./client/state/action-types.js")},"./node_modules/babel-runtime/core-js/number/parse-int.js":function(e,t,n){e.exports={default:n("./node_modules/core-js/library/fn/number/parse-int.js"),__esModule:!0}},"./node_modules/component-file-picker/index.js":function(e,t,n){function s(e,t){function n(e){t(l.files,e,l),i.unbind(l,"change",n),r=!1}"function"==typeof e&&(t=e,e={}),e=e||{},l.multiple=!!e.multiple,l.webkitdirectory=l.mozdirectory=l.directory=!!e.directory,null==e.accept?delete l.accept:e.accept.join?l.accept=e.accept.join(","):e.accept&&(l.accept=e.accept),r&&i.unbind(l,"change",r),i.bind(l,"change",n),r=n,a.reset(),l.click()}var i=n("./node_modules/component-event/index.js");e.exports=s;var a=document.createElement("form");a.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(a);var l=a.childNodes[0],r=!1},"./node_modules/core-js/library/fn/number/parse-int.js":function(e,t,n){n("./node_modules/core-js/library/modules/es6.number.parse-int.js"),e.exports=parseInt},"./node_modules/core-js/library/modules/_parse-int.js":function(e,t,n){var s=n("./node_modules/core-js/library/modules/_global.js").parseInt,i=n("./node_modules/core-js/library/modules/_string-trim.js").trim,a=n("./node_modules/core-js/library/modules/_string-ws.js"),l=/^[-+]?0[xX]/;e.exports=8!==s(a+"08")||22!==s(a+"0x16")?function(e,t){var n=i(String(e),3);return s(n,t>>>0||(l.test(n)?16:10))}:s},"./node_modules/core-js/library/modules/es6.number.parse-int.js":function(e,t,n){var s=n("./node_modules/core-js/library/modules/_export.js"),i=n("./node_modules/core-js/library/modules/_parse-int.js");s(s.S+s.F*(Number.parseInt!=i),"Number",{parseInt:i})},"./node_modules/escape-regexp-component/index.js":function(e,t){e.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},"./node_modules/escape-regexp/index.js":function(e,t){e.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},"./node_modules/title-case-minors/index.js":function(e,t){e.exports=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"]},"./node_modules/to-capital-case/index.js":function(e,t,n){function s(e){return i(e).replace(/(^|\s)(\w)/g,function(e,t,n){return t+n.toUpperCase()})}var i=n("./node_modules/to-capital-case/node_modules/to-no-case/index.js");e.exports=s},"./node_modules/to-capital-case/node_modules/to-no-case/index.js":function(e,t){function n(e){return a.test(e)?e.toLowerCase():(r.test(e)&&(e=s(e)),l.test(e)&&(e=i(e)),e.toLowerCase())}function s(e){return e.replace(o,function(e,t){return t?" "+t:""})}function i(e){return e.replace(u,function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")})}e.exports=n;var a=/\s/,l=/[a-z][A-Z]/,r=/[\W_]/,o=/[\W_]+(.|$)/g,u=/(.)([A-Z]+)/g},"./node_modules/to-title-case/index.js":function(e,t,n){function s(e){return a(e).replace(o,function(e){return e.toLowerCase()}).replace(u,function(e){return e.toUpperCase()})}try{var i=n("./node_modules/escape-regexp/index.js")}catch(e){var i=n("./node_modules/escape-regexp-component/index.js")}var a=n("./node_modules/to-capital-case/index.js"),l=n("./node_modules/title-case-minors/index.js");e.exports=s;var r=l.map(i),o=new RegExp("[^^]\\b("+r.join("|")+")\\b","ig"),u=/:\s*(\w)/g}});