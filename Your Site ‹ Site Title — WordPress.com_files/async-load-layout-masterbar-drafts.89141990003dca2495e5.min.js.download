webpackJsonp(["async-load-layout-masterbar-drafts"],{"./client/components/card/compact.jsx":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return l.default.createElement(p.default,(0,r.default)({},e,{className:(0,d.default)(e.className,"is-compact")}),e.children)}Object.defineProperty(t,"__esModule",{value:!0});var o=s("./node_modules/babel-runtime/helpers/extends.js"),r=a(o);t.default=n;var i=s("./node_modules/react/react.js"),l=a(i),u=s("./node_modules/classnames/index.js"),d=a(u),c=s("./client/components/card/index.jsx"),p=a(c);e.exports=t.default},"./client/components/data/query-post-counts/index.jsx":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=a(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=a(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=a(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=a(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=a(p),h=s("./node_modules/prop-types/index.js"),m=a(h),g=s("./node_modules/react/react.js"),_=s("./node_modules/react-redux/es/index.js"),v=s("./client/state/posts/counts/actions.js"),b=s("./client/state/posts/counts/selectors.js"),y=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.type===e.type||this.request(e)}},{key:"request",value:function(e){e.requesting||e.requestPostCounts(e.siteId,e.type)}},{key:"render",value:function(){return null}}]),t}(g.Component);y.propTypes={siteId:m.default.number.isRequired,type:m.default.string.isRequired,requesting:m.default.bool,requestPostCounts:m.default.func},t.default=(0,_.connect)(function(e,t){var s=t.siteId,a=t.type;return{requesting:(0,b.isRequestingPostCounts)(e,s,a)}},{requestPostCounts:v.requestPostCounts})(y),e.exports=t.default},"./client/components/update-post-status/index.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/helpers/extends.js"),o=a(n),r=s("./node_modules/babel-runtime/helpers/slicedToArray.js"),i=a(r),l=s("./node_modules/babel-runtime/helpers/typeof.js"),u=a(l),d=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=a(d),p=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),f=a(p),h=s("./node_modules/babel-runtime/helpers/createClass.js"),m=a(h),g=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),_=a(g),v=s("./node_modules/babel-runtime/helpers/inherits.js"),b=a(v),y=s("./node_modules/react/react.js"),E=a(y),P=s("./node_modules/prop-types/index.js"),S=a(P),j=s("./node_modules/react-redux/es/index.js"),T=s("./node_modules/i18n-calypso/index.js"),C=s("./node_modules/lodash/lodash.js"),I=s("./client/components/update-post-status/update-template.js"),x=a(I),w=s("./client/lib/posts/actions.js"),k=a(w),D=s("./client/state/analytics/actions.js"),A=1200,O=(0,C.once)(function(e){return{page:{deleteWarning:e("Delete this page permanently?"),deleted:e("Page Deleted"),deleting:e("Deleting Page"),error:e("Error"),restored:e("Page Restored"),restoring:e("Restoring Page"),trashed:e("Moved to Trash"),trashing:e("Trashing Page"),undo:e("undo?"),updated:e("Updated"),updating:e("Updating Page")},post:{deleteWarning:e("Delete this post permanently?"),deleted:e("Post Deleted"),deleting:e("Deleting Post"),error:e("Error"),restored:e("Restored"),restoring:e("Restoring"),trashed:e("Moved to Trash"),trashing:e("Trashing Post"),undo:e("undo?"),updated:e("Updated"),updating:e("Updating Post")}}}),N=(0,C.flow)(T.localize,(0,j.connect)(null,{recordGoogleEvent:D.recordGoogleEvent})),M=function(e){var t,s;return N((s=t=function(t){function s(){var e,t,a,n;(0,f.default)(this,s);for(var o=arguments.length,r=Array(o),l=0;l<o;l++)r[l]=arguments[l];return t=a=(0,_.default)(this,(e=s.__proto__||(0,c.default)(s)).call.apply(e,[this].concat(r))),a.state={updated:!1,updatedStatus:null,previousStatus:null,showMoreOptions:!1,showPageActions:!1},a.buildUpdateTemplate=function(){if(a.state.updated){var e=O(a.props.translate);return E.default.createElement(x.default,{post:a.props.post||a.props.page,previousStatus:a.state.previousStatus,resetToPreviousState:a.resetToPreviousState,status:a.state.updatedStatus,strings:e[a.getType()]})}},a.updatePostStatus=function(e){var t=a.props.post||a.props.page,s=null,n=function(e,t){return e?(a.setErrorState(),!1):(a.setState({previousStatus:s,updatedStatus:t.status,showMoreOptions:!1}),!0)};switch(e){case"delete":a.setState({showPageActions:!1,updatedStatus:"deleting",updated:!0});var o=O(a.props.translate),r=a.props.post?"post":"page";return void("object"===("undefined"==typeof window?"undefined":(0,u.default)(window))&&window.confirm(o[r].deleteWarning)?k.default.trash(t,n):a.resetState());case"trash":return a.setState({showPageActions:!1,updatedStatus:"trashing",updated:!0}),s=t.status,void k.default.trash(t,n);case"restore":return a.setState({showPageActions:!1,updatedStatus:"restoring",updated:!0}),s="trash",void k.default.restore(t,n);default:a.setState({showPageActions:!1,updatedStatus:"updating",updated:!0}),k.default.update(t,{status:e},function(e,t){n(e,t)&&setTimeout(a.resetState,A)})}},a.resetState=function(){a.setState({updatedStatus:null,updated:!1,showMoreOptions:!1,showPageActions:!1})},a.resetToPreviousState=function(){var e="page"===a.getType()?["Pages","Clicked Undo Trashed Page"]:["Posts","Clicked Undo Trashed Post"],t=(0,i.default)(e,2),s=t[0],n=t[1];a.props.recordGoogleEvent(s,n),a.state.previousStatus&&a.updatePostStatus(a.state.previousStatus)},a.togglePageActions=function(){a.setState({showPageActions:!a.state.showPageActions})},a.showMoreControls=function(){a.setState({showMoreOptions:!0})},a.hideMoreControls=function(){a.setState({showMoreOptions:!1})},n=t,(0,_.default)(a,n)}return(0,b.default)(s,t),(0,m.default)(s,[{key:"getType",value:function(){return this.props.page?"page":"post"}},{key:"setErrorState",value:function(){this.setState({updated:!0,updatedStatus:"error"}),setTimeout(this.resetState,A)}},{key:"render",value:function(){return E.default.createElement(e,(0,o.default)({},this.props,{buildUpdateTemplate:this.buildUpdateTemplate,togglePageActions:this.togglePageActions,showMoreControls:this.showMoreControls,hideMoreControls:this.hideMoreControls,updatePostStatus:this.updatePostStatus},this.state))}}]),s}(y.Component),t.displayName="UpdatePostStatus("+(e.displayName||e.name||"")+")",t.propTypes={translate:S.default.func.isRequired,recordGoogleEvent:S.default.func.isRequired,post:S.default.object,page:S.default.object},s))};t.default=M,e.exports=t.default},"./client/components/update-post-status/update-template.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.post,s=e.previousStatus,a=e.resetToPreviousState,n=e.status,o=e.strings,l="conf-alert",u=void 0,d=void 0,c=void 0,p=void 0;switch(n){case"trashing":case"deleting":p="deleting"===n?o.deleting:o.trashing,u=r.default.createElement("span",null,p," ",r.default.createElement(i,null)),l+=" conf-alert--trashing";break;case"trash":c=a,d=r.default.createElement("a",{className:"undo",onClick:c},r.default.createElement("span",null,o.undo)),u=o.trashed,l+=" conf-alert--trashed";break;case"deleted":u=o.deleted,l+=" conf-alert--deleted";break;case"updating":u=r.default.createElement("span",null,o.updating," ",r.default.createElement(i,null)),l+=" conf-alert--updating";break;case"error":u=o.error,l+=" conf-alert--error";break;case"restoring":u=r.default.createElement("span",null,o.restoring," ",r.default.createElement(i,null)),l+=" conf-alert--updating";break;default:u="trash"===s?o.restored:o.updated}return r.default.createElement("div",{key:t.global_ID+"-update",className:"updated-confirmation"},r.default.createElement("div",{className:l},r.default.createElement("div",{className:"conf-alert_con"},r.default.createElement("span",{className:"conf-alert_title"},u),d)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=s("./node_modules/react/react.js"),r=a(o),i=function(){return r.default.createElement("span",null,r.default.createElement("span",{className:"loading-dot"},"."),r.default.createElement("span",{className:"loading-dot"},"."),r.default.createElement("span",{className:"loading-dot"},"."))};e.exports=t.default},"./client/layout/masterbar/drafts.jsx":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=a(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=a(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=a(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=a(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=a(p),h=s("./node_modules/prop-types/index.js"),m=a(h),g=s("./node_modules/react/react.js"),_=a(g),v=s("./node_modules/react-redux/es/index.js"),b=s("./node_modules/i18n-calypso/index.js"),y=s("./client/state/ui/selectors.js"),E=s("./client/components/popover/index.jsx"),P=a(E),S=s("./client/components/count/index.jsx"),j=a(S),T=s("./client/state/posts/counts/selectors.js"),C=s("./client/state/posts/selectors.js"),I=s("./client/my-sites/draft/index.jsx"),x=a(I),w=s("./client/components/data/query-posts/index.jsx"),k=a(w),D=s("./client/components/data/query-post-counts/index.jsx"),A=a(D),O=s("./client/components/button/index.jsx"),N=a(O),M=s("./client/blocks/site/index.jsx"),R=a(M),U=s("./client/state/current-user/selectors.js"),V=function(e){function t(){var e,s,a,n;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return s=a=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),a.state={showDrafts:!1},a.toggleDrafts=function(){var e=a.state.showDrafts;a.setState({showDrafts:!e})},a.closeDrafts=function(){a.setState({showDrafts:!1})},n=s,(0,c.default)(a,n)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedSite,s=e.draftCount,a=e.loadingDrafts,n=e.translate,o=0!==s&&a;return t?_.default.createElement("div",null,_.default.createElement(A.default,{siteId:t.ID,type:"post"}),this.props.draftCount>0&&_.default.createElement(N.default,{compact:!0,borderless:!0,className:"masterbar__toggle-drafts",onClick:this.toggleDrafts,ref:"drafts",title:n("Latest Drafts")},_.default.createElement(j.default,{count:this.props.draftCount})),_.default.createElement(P.default,{isVisible:this.state.showDrafts,onClose:this.closeDrafts,position:"bottom left",context:this.refs&&this.refs.drafts,className:"masterbar__recent-drafts"},_.default.createElement(k.default,{siteId:t.ID,query:this.props.draftsQuery}),_.default.createElement(R.default,{compact:!0,site:t}),this.props.drafts&&this.props.drafts.map(this.renderDraft,this),o&&_.default.createElement(x.default,{isPlaceholder:!0}),this.props.draftCount>6&&_.default.createElement(N.default,{compact:!0,borderless:!0,className:"masterbar__see-all-drafts",href:"/posts/drafts/"+t.slug,onClick:this.closeDrafts},n("See all drafts"),this.props.draftCount?_.default.createElement(j.default,{count:this.props.draftCount}):null))):null}},{key:"renderDraft",value:function(e){if(!e)return null;var t=this.props.selectedSite;return _.default.createElement(x.default,{key:e.global_ID,post:e,siteId:t&&t.ID,showAuthor:t&&!t.single_user_site&&!this.props.userId,onTitleClick:this.closeDrafts})}}]),t}(g.Component);V.propTypes={user:m.default.object,isActive:m.default.bool,className:m.default.string,tooltip:m.default.string,selectedSite:m.default.object},t.default=(0,v.connect)(function(e){var t=(0,y.getSelectedSiteId)(e),s=(0,U.getCurrentUserId)(e),a=(0,y.getSelectedSite)(e),n={type:"post",status:"draft",number:10,order_by:"modified",author:!a||a.jetpack||a.single_user_site?null:s},o=(0,T.getMyPostCounts)(e,t,"post");return{drafts:(0,C.getSitePostsForQueryIgnoringPage)(e,t,n),loadingDrafts:(0,C.isRequestingSitePostsForQuery)(e,t,n),draftsQuery:n,draftCount:o&&o.draft,selectedSite:a}})((0,b.localize)(V)),e.exports=t.default},"./client/lib/posts/actions.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){var a,n=b.default.get();("string"==typeof e||Array.isArray(e))&&(e=(0,c.fromPairs)([].concat(e).map(function(e){return[e,t]}))),a=(n.metadata||[]).filter(function(t){return!e.hasOwnProperty(t.key)}),(0,l.default)(e).forEach(function(t){var n={key:t,operation:s};"delete"!==s&&(n.value=e[t]),a.push(n)}),D.default.handleViewAction({type:"EDIT_POST",post:{metadata:a}})}function o(e){return e=(0,c.clone)(e),e=(0,O.normalizeTermsForApi)(e),e.author&&(e.author=e.author.ID),e}Object.defineProperty(t,"__esModule",{value:!0});var r,i=s("./node_modules/babel-runtime/core-js/object/keys.js"),l=a(i),u=s("./node_modules/store/store.js"),d=a(u),c=s("./node_modules/lodash/lodash.js"),p=s("./node_modules/debug/browser.js"),f=a(p),h=s("./client/lib/wp/browser.js"),m=a(h),g=s("./client/lib/posts/posts-store.js"),_=a(g),v=s("./client/lib/posts/post-edit-store.js"),b=a(v),y=s("./client/lib/posts/post-list-store-factory.js"),E=a(y),P=s("./client/lib/preferences/store.js"),S=a(P),j=s("./client/lib/sites-list/index.js"),T=a(j),C=s("./client/lib/posts/utils.js"),I=a(C),x=s("./client/lib/version-compare/index.js"),w=a(x),k=s("./client/dispatcher/index.js"),D=a(k),A=s("./client/lib/posts/stats.js"),O=s("./client/state/posts/utils.js"),N=(0,T.default)(),M=(0,f.default)("calypso:posts");r={startEditingNew:function(e,t){var s;t=t||{},s={type:"DRAFT_NEW_POST",siteId:e,postType:t.type||"post",title:t.title,content:t.content},D.default.handleViewAction(s)},startEditingExisting:function(e,t){var s,a=b.default.get();e&&(a&&a.site_ID===e&&a.ID===t||(D.default.handleViewAction({type:"START_EDITING_POST",siteId:e,postId:t}),s=m.default.site(e).post(t),s.get({context:"edit",meta:"autosave"},function(e,t){D.default.handleServerAction({type:"RECEIVE_POST_TO_EDIT",error:e,post:t})})))},stopEditing:function(){D.default.handleViewAction({type:"STOP_EDITING_POST"})},autosave:function(e){var t,s=b.default.get(),a=b.default.getSavedPost(),n=m.default.undocumented().site(s.site_ID);if(e=e||function(){},!b.default.isDirty())return e(new Error("NOT_DIRTY"));if(d.default.set("wpcom-autosave:"+s.site_ID+":"+s.ID,s),I.default.isPublished(a)||I.default.isPublished(s)){if(t=N.getSite(s.site_ID),!s.ID||!t||t.jetpack&&(0,w.default)(t.options.jetpack_version,"3.7.0-dev","<"))return e(new Error("NO_AUTOSAVE"));D.default.handleViewAction({type:"POST_AUTOSAVE",post:s}),n.postAutosave(s.ID,{content:s.content,title:s.title,excerpt:s.excerpt},function(t,s){D.default.handleServerAction({type:"RECEIVE_POST_AUTOSAVE",error:t,autosave:s}),e(t,s)})}else r.saveEdited(null,null,e,{recordSaveEvent:!1,autosave:!0})},blockSave:function(e){D.default.handleViewAction({type:"BLOCK_EDIT_POST_SAVE",key:e})},unblockSave:function(e){D.default.handleViewAction({type:"UNBLOCK_EDIT_POST_SAVE",key:e})},edit:function(e){D.default.handleViewAction({type:"EDIT_POST",post:e})},editRawContent:function(e){D.default.handleViewAction({type:"EDIT_POST_RAW_CONTENT",content:e})},resetRawContent:function(){D.default.handleViewAction({type:"RESET_POST_RAW_CONTENT"})},updateMetadata:function(e,t){n(e,t,"update")},deleteMetadata:function(e){n(e,null,"delete")},saveEdited:function(e,t,s,a){var n,r,i,u,d,p,f;return D.default.handleViewAction({type:"EDIT_POST",post:e}),n=b.default.get(),b.default.hasContent()?b.default.isSaveBlocked()?void(0,c.defer)(s,new Error("SAVE_BLOCKED"),n):(u=b.default.getChangedAttributes(),(0,l.default)(u).length?(u=o(u),d=b.default.getRawContent(),p=S.default.get("editor-mode"),f=!n.ID,D.default.handleViewAction({type:"EDIT_POST_SAVE"}),r=m.default.site(n.site_ID).post(n.ID),i={context:"edit",apiVersion:"1.2"},a&&a.autosave&&(i.autosave=a.autosave),a&&a.recordSaveEvent===!1||(0,A.recordSaveEvent)(t),(u&&"future"===u.status&&I.default.isFutureDated(n)||u&&"publish"===u.status&&I.default.isBackDated(n))&&(u=(0,c.assign)({},u,{status:"publish",date:n.date})),void r[f?"add":"update"](i,u,function(e,t){var a,n;n=S.default.get("editor-mode"),e||(a=_.default.get(t.global_ID)),D.default.handleServerAction({type:"RECEIVE_POST_BEING_EDITED",error:e,rawContent:p===n?d:null,isNew:f,original:a,post:t}),s(e,t)})):void(0,c.defer)(s,new Error("NO_CHANGE"),n)):void(0,c.defer)(s,new Error("NO_CONTENT"),n)},update:function(e,t,s){var a=m.default.site(e.site_ID).post(e.ID);a.update(t,r.receiveUpdate.bind(null,s))},trash:function(e,t){var s=m.default.site(e.site_ID).post(e.ID);s.delete(r.receiveUpdate.bind(null,t))},restore:function(e,t){var s=m.default.site(e.site_ID).post(e.ID);s.restore(r.receiveUpdate.bind(null,t))},queryPosts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";D.default.handleViewAction({type:"QUERY_POSTS",options:e,postListStoreId:t})},fetchNextPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=(0,E.default)(e);if(!t.isLastPage()&&!t.isFetchingNextPage()){D.default.handleViewAction({type:"FETCH_NEXT_POSTS_PAGE",postListStoreId:e});var s=t.getID(),a=t.getNextPageParams(),n=t.getSiteId();n?m.default.site(n).postsList(a,r.receivePage.bind(null,s,e)):m.default.me().postsList(a,r.receivePage.bind(null,s,e))}},receivePage:function(e,t,s,a){D.default.handleServerAction({type:"RECEIVE_POSTS_PAGE",id:e,postListStoreId:t,error:s,data:a})},fetchUpdated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=(0,E.default)(e);if(!t.isFetchingNextPage()){D.default.handleViewAction({type:"FETCH_UPDATED_POSTS",postListStoreId:e});var s=t.getID(),a=t.getUpdatesParams(),n=t.getSiteId();n?(M("Fetching posts that have been updated for %s since %s %o",n,a.modified_after,a),m.default.site(n).postsList(a,r.receiveUpdated.bind(null,s,e))):(M("Fetching posts that have been updated since %s %o",a.modified_after,a),m.default.me().postsList(a,r.receiveUpdated.bind(null,s,e)))}},receiveUpdated:function(e,t,s,a){D.default.handleServerAction({type:"RECEIVE_UPDATED_POSTS",id:e,postListStoreId:t,error:s,data:a})},receiveUpdate:function(e,t,s){var a;t||(a=_.default.get(s.global_ID)),D.default.handleServerAction({type:"RECEIVE_UPDATED_POST",error:t,original:a,post:s}),e(t,s)},fetchCounts:function(e,t){D.default.handleViewAction({type:"FETCH_POST_COUNTS",siteId:e}),m.default.undocumented().site(e).postCounts(t,function(t,s){D.default.handleServerAction({type:"RECEIVE_POST_COUNTS",error:t,data:s,siteId:e})})}},t.default=r,e.exports=t.default},"./client/lib/posts/post-list-cache-store.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=(new Date).getTime(),s=e.timeSaved;return t-s>w}function o(e){return l(e)?I[e].list:void(I[e]&&I[e].dirty&&(A("delete cached list %o",e),delete I[e],delete x[e]))}function r(e){var t=u(e.query);I[t]&&I[t].dirty||(I[t]={timeStored:(new Date).getTime(),dirty:!1,list:e,listKey:t})}function i(e,t){var s=k.getSite(e.site_ID),a=[s.slug,s.ID,!1],n=[e.status,t],o=void 0,r=void 0,i=void 0,l=void 0;for(r in I)I.hasOwnProperty(r)&&(i=I[r],l=i.list,l.query.type===e.type&&-1!==a.indexOf(l.query.siteId)&&(o=l.query.status.split(","),0!==(0,b.intersection)(o,n).length&&(i.dirty=!0)));C.cacheIndex.clearRecordsByParamFilter(function(e){var t=a.slice(0,-1),s=["/me/posts"].concat((0,v.default)(t.map(function(e){return"/sites/"+e+"/posts"}))),o=e.query&&e.query.status?e.query.status.split(","):[],r=(0,b.intersection)(o,n);return s.indexOf(e.path)!==-1&&!!r.length})}function l(e){return I[e]&&!n(I[e])&&!I[e].dirty}function u(e){var t=[],s=(0,g.default)(e).sort();return s.forEach(function(s){t.push(s+"-"+e[s])}),t.join(":")}function d(e,t,s){A("setCanonicalList %o %o (%o)",e,t,s),x[e]=x[e]||{},x[e][t]=s}function c(e,t){A("getCanonicalList %o %o",e,t);var s=x[e];if(!s||"object"!==("undefined"==typeof s?"undefined":(0,h.default)(s)))return!1;var a=(0,g.default)(s);return a[0]!==t?(delete I[e],delete x[e],!1):s[t]}function p(e,t){A("deleteCanonicalList %o %o",e,t);var s=x[e];s&&s[t]&&delete s[t]}Object.defineProperty(t,"__esModule",{value:!0});var f=s("./node_modules/babel-runtime/helpers/typeof.js"),h=a(f),m=s("./node_modules/babel-runtime/core-js/object/keys.js"),g=a(m),_=s("./node_modules/babel-runtime/helpers/toConsumableArray.js"),v=a(_);t.getCacheKey=u,t.setCanonicalList=d,t.getCanonicalList=c,t.deleteCanonicalList=p;var b=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/debug/browser.js"),E=a(y),P=s("./client/lib/sites-list/index.js"),S=a(P),j=s("./client/dispatcher/index.js"),T=a(j),C=s("./client/lib/wp/sync-handler/cache-index.js"),I={},x={},w=3e5,k=(0,S.default)(),D={get:o,_reset:function(){I={}}},A=(0,E.default)("calypso:posts-list:cache");D.dispatchToken=T.default.register(function(e){var t=e.action,a=s("./client/lib/posts/post-list-store-factory.js")();switch(T.default.waitFor([a.dispatchToken]),t.type){case"FETCH_NEXT_POSTS_PAGE":r(a.get());break;case"RECEIVE_POSTS_PAGE":r(a.get());break;case"RECEIVE_UPDATED_POSTS":r(a.get());break;case"RECEIVE_UPDATED_POST":case"RECEIVE_POST_BEING_EDITED":t.post&&(i(t.post,t.original?t.original.status:null),r(a.get()))}}),t.default=D},"./client/lib/posts/post-list-store-factory.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e||"default";return i[t]||(i[t]=new r.default(t)),i[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=s("./client/lib/posts/post-list-store.js"),r=a(o),i={};n._reset=function(){i={}},e.exports=t.default},"./client/lib/posts/post-list-store.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(e.length<3||t.length<2)return[];var s=e.indexOf(t[0]);if(s===-1)return n(e,t.slice(1));var a=e.indexOf(t.slice(-1)[0]);if(a===-1)return n(e,t.slice(0,-1));var o=e.slice(s,a+1);return(0,b.difference)(o,t)}Object.defineProperty(t,"__esModule",{value:!0});var o=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=a(o),i=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=a(i),u=s("./node_modules/babel-runtime/helpers/createClass.js"),d=a(u),c=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=a(c),f=s("./node_modules/babel-runtime/helpers/inherits.js"),h=a(f),m=s("./node_modules/babel-runtime/helpers/typeof.js"),g=a(m);t.getRemovedPosts=n,t.default=function(e){function t(e){var t=(0,b.assign)({},w,e);"draft,pending"===t.status&&(t.orderBy="modified");var s=(0,I.getCacheKey)(t),a=x.default.get(s);a?u=a:(u={id:D,postIds:[],errors:[],page:0,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1,query:t,listKey:s},D++)}function s(e){return(0,b.transform)(e,function(e,t,s){null!=t&&(e[s]=t)},{})}function a(){var e=u.query.orderBy;u.postIds.sort(function(t,s){var a=C.default.get(t),n=C.default.get(s),o=a[e],r=n[e];return o===r?a.title===n.title?0:a.title>n.title?1:-1:o>r?-1:1})}function o(e,t,s){if(t||!s||"object"!==("undefined"==typeof s?"undefined":(0,g.default)(s)))return t=t||{message:"Error fetching PostsList: empty data response"},k("Error fetching PostsList from api:",t),t.timestamp=Date.now(),void u.errors.push(t);var o=s.found,r=s.meta,i=s.posts,l=s.__sync,d=l||{},c=d.responseSource,p=d.requestKey;if(e===u.id){u.isFetchingNextPage=!1,u.nextPageHandle=r&&r.next_page,u.nextPageHandle&&o||(u.isLastPage=!0);var f=i.map(function(e){return e.global_ID}),h=u.postIds.slice(0);if("local"===c&&p)(0,I.setCanonicalList)(u.listKey,p,h);else{var m=(0,I.getCanonicalList)(u.listKey,p);m&&(k("canonicalList found (%o)",m),h=m,(0,I.deleteCanonicalList)(u.listKey,p))}var _=n(h,f);_.length&&(k("removePosts (%o)",_),h=(0,b.difference)(h,_));var v=(0,b.difference)(f,h);v.length&&(k("newPosts (%o)",v),h=h.concat(v),u.page++),u.postIds=h,a()}}function i(e,t,s){var n=void 0,o=void 0,r=void 0;return t?void k("An error occurred while fetching updated posts %o",t):void(e===u.id&&s.posts.length&&(n=s.posts,k("Fetched updated posts:",n),o=n.map(function(e){return e.global_ID}),r=(0,b.difference)(o,u.postIds),r.length&&(u.postIds=u.postIds.concat(r),a())))}if(!e)throw new Error("must supply a post-list-store id");var u={postIds:[],errors:[],query:(0,b.clone)(w),page:0,nextPageHandle:!1,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1};return new(function(a){function n(){(0,l.default)(this,n);var t=(0,p.default)(this,(n.__proto__||(0,r.default)(n)).call(this));return t.id=e,t.dispatchToken=P.default.register(t.handlePayload.bind(t)),t}return(0,h.default)(n,a),(0,d.default)(n,[{key:"get",value:function(){return u}},{key:"getID",value:function(){return u.id}},{key:"getSiteId",value:function(){return u.query.siteId}},{key:"getAll",value:function(){return u.postIds.map(function(e){return C.default.get(e)})}},{key:"getTree",value:function(){var e=[];return u.postIds.forEach(function(t){var s=(0,b.clone)(C.default.get(t));s.parent=s.parent?s.parent.ID:0,e.push(s)}),(0,j.default)("ID").treeify(e)}},{key:"getPost",value:function(e){if(u.postIds.indexOf(e)>-1)return C.default.get(e)}},{key:"getPage",value:function(){return u.page}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"isLastPage",value:function(){return u.isLastPage}},{key:"isFetchingNextPage",value:function(){return u.isFetchingNextPage}},{key:"hasRecentError",value:function(){var e=30,t=Date.now();return(0,b.some)(u.errors,function(s){return t-s.timestamp<1e3*e})}},{key:"getNextPageParams",value:function(){var e={},t=u.query;return e.status=t.status,e.order_by=t.orderBy,e.order=t.order,e.author=t.author,e.number=t.perPage,e.type=t.type,e.page_handle=u.nextPageHandle,e.exclude_tree=t.exclude_tree,e.number=t.number,e.before=t.before,e.after=t.after,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),s(e)}},{key:"getUpdatesParams",value:function(){var e={},t=u.query;return e.status=t.status,e.author=t.author,e.type=t.type,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),u.postIds.length&&(e.modified_after=(0,b.maxBy)(this.getAll(),function(e){return new Date(e.modified).getTime()}).modified,"modified"===t.orderBy||u.isLastPage||(e.after=this.getPost((0,b.last)(u.postIds)).date)),s(e)}},{key:"handlePayload",value:function(e){var s=e.action;if(!s.postListStoreId||s.postListStoreId===this.id||"RECEIVE_UPDATED_POST"===s.type)switch(P.default.waitFor([C.default.dispatchToken]),s.type){case"QUERY_POSTS":k("QUERY_POSTS",s),t(s.options),this.emit("change");break;case"FETCH_NEXT_POSTS_PAGE":k("FETCH_NEXT_POSTS_PAGE",s),u.isFetchingNextPage=!0,this.emit("change");break;case"RECEIVE_POSTS_PAGE":k("receivePage",s),o(s.id,s.error,s.data),this.emit("change");break;case"RECEIVE_UPDATED_POSTS":i(s.id,s.error,s.data),this.emit("change");break;case"RECEIVE_UPDATED_POST":s.post&&u.postIds.indexOf(s.post.global_ID)>-1&&this.emit("change")}}}]),n}(y.EventEmitter))};var _=s("./node_modules/debug/browser.js"),v=a(_),b=s("./node_modules/lodash/lodash.js"),y=s("./node_modules/events/events.js"),E=s("./client/dispatcher/index.js"),P=a(E),S=s("./client/lib/tree-convert/index.js"),j=a(S),T=s("./client/lib/posts/posts-store.js"),C=a(T),I=s("./client/lib/posts/post-list-cache-store.js"),x=a(I),w={siteId:!1,type:"post",status:"publish",orderBy:"date",order:"DESC",author:!1,search:!1,category:!1,tag:!1,perPage:20},k=(0,v.default)("calypso:posts-list"),D=0},"./client/lib/posts/posts-store.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=i.get(e.global_ID);t&&(0,l.isEqual)(e,t)||(g[e.global_ID]=e)}function o(e,t){var s=t||{},a=s.global_ID;if(!a)return void m("global_ID is required for a post",t);var o=i.get(a);return o&&"local"===e?void m("existing record (%o), do not overwrite with local response",o):void p.default.normalizeSync(t,function(e,t){n(t)})}function r(e,t){var s=o.bind(null,t);e.forEach(s)}Object.defineProperty(t,"__esModule",{value:!0});var i,l=s("./node_modules/lodash/lodash.js"),u=s("./node_modules/debug/browser.js"),d=a(u),c=s("./client/lib/posts/utils.js"),p=a(c),f=s("./client/dispatcher/index.js"),h=a(f),m=(0,d.default)("calypso:posts"),g={};i={get:function(e){return g[e]}},i.dispatchToken=h.default.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":if(!t.error&&t.data.posts){var s=t.data.__sync&&t.data.__sync.responseSource;r(t.data.posts,s)}break;case"RECEIVE_UPDATED_POST":t.error||o("server",t.post)}}),t.default=i,e.exports=t.default},"./client/lib/posts/stats.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var s=void 0,a=j.getSelectedSite();g.default.mc.bumpStat("editor_usage",e),a&&(s=a.jetpack?"jetpack":"wpcom",g.default.mc.bumpStat("editor_usage_"+s,e),t&&g.default.mc.bumpStat("editor_cpt_usage_"+s,t+"_"+e))}function o(e){g.default.mc.bumpStat("editor_actions",e)}function r(e,t,s){g.default.ga.recordEvent("Editor",e,t,s)}function i(e){var t=v.default.get(),s=v.default.getSavedPost();if(t&&s){var a=s.status,i=t.status,l="calypso_editor_"+t.type+"_",u=!1,d=!1,c=!1,p=null;t.ID||y.default.isPublished(t)?"draft"===i?l+="savedraft":a===i?(c="edit",l+="update"):"publish"===i||"private"===i?(l+="publish",c="new",e&&e.isConfirmationSidebarEnabled&&(p="confirmation_sidebar")):"pending"===i?l+="pending":"future"===i&&(l+="schedule",u="status-schedule",d="Scheduled Post",e&&e.isConfirmationSidebarEnabled&&(p="confirmation_sidebar")):l+="savedraft",c&&n(c,t.type),u&&o(u),d&&r(d),S("recordSaveEvent %s currentStatus=%s nextStatus=%s",l,a,i),g.default.tracks.recordEvent(l,{post_id:t.ID,post_type:t.type,visibility:y.default.getVisibility(t),current_status:a,next_status:i,context:p})}}function l(e){C("editor-button","calypso_"+e),g.default.ga.recordEvent("Editor","Clicked TinyMCE Button",e),S("TinyMCE button click",e,"mc=",T)}function u(e){C("html-editor-button","calypso_"+e),g.default.ga.recordEvent("Editor","Clicked TinyMCE HTML Button",e),S("TinyMCE HTML button click",e,"mc=",T)}Object.defineProperty(t,"__esModule",{value:!0}),t.recordStat=o,t.recordEvent=r,t.recordSaveEvent=i,t.recordTinyMCEButtonClick=l,t.recordTinyMCEHTMLButtonClick=u;var d=s("./node_modules/debug/browser.js"),c=a(d),p=s("./node_modules/lodash/lodash.js"),f=s("./client/config/index.js"),h=a(f),m=s("./client/lib/analytics/index.js"),g=a(m),_=s("./client/lib/posts/post-edit-store.js"),v=a(_),b=s("./client/lib/posts/utils.js"),y=a(b),E=s("./client/lib/sites-list/index.js"),P=a(E),S=(0,c.default)("calypso:posts:stats"),j=new P.default,T=Math.random()<=.01||"development"===(0,h.default)("env"),C=T?g.default.mc.bumpStat:p.noop},"./client/lib/tree-convert/index.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return this instanceof n?void(this.key=e||"id"):new n(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=s("./client/lib/tree-convert/tree-traverser.js"),r=a(o);n.prototype.treeify=function(e){var t=[],s={};return e.forEach(function(t,a){s[e[a][this.key]]=t},this),e.forEach(function(e){var a;e.parent>0&&s[e.parent]?(a=s[e.parent],a.items=a.items||[],a.items.push(e)):(e.parent=0,t.push(e))}),this.sortItems(t),this.removeOrderProperty(t),t},n.prototype.untreeify=function(e,t){return t=t||[],e.forEach(function(e,s){e.items&&n.prototype.untreeify(e.items,t),
e.order=s+1,t.push(e)}),t},n.prototype.sortItems=function(e){var t={};t.items=e,r.default.traverse(t,[function(e){return e.items&&e.items.sort(function(e,t){return e.order-t.order}),e}])},n.prototype.removeOrderProperty=function(e){var t={};t.items=e,r.default.traverse(t,[function(e){return e.items&&e.items.forEach(function(e){delete e.order}),e}])},t.default=n,e.exports=t.default},"./client/lib/tree-convert/tree-traverser.js":function(e,t,s){"use strict";function a(e,t){return o(t,function(t){return(0,d.some)(t.items,{id:e.id})})||t}function n(e,t,s){return t.forEach(function(t){e=t(e,s)},this),e.items&&(e.items=e.items.map(function(e){return n(e,t,s)})),e}function o(e,t){return t(e)?e:e.items?i(e.items,function(e){return o(e,t)}):void 0}function r(e,t,s){var a;if(e.items)for(a=0;a<e.items.length;a++){if(s(e.items[a]))return void(e.items[a]=t);r(e.items[a],t,s)}}function i(e,t){var s,a,n=e.length;for(s=0;s<n;s++)if(a=t(e[s]))return a}function l(e,t){return function(s){return s.id===t&&(s.items=s.items||[],s.items.push(e)),s}}function u(e,t,s){return function(a){var n,o="before"===s?0:1;return~(n=(0,d.findIndex)(a.items,{id:t}))&&a.items.splice(n+o,0,e),a}}Object.defineProperty(t,"__esModule",{value:!0});var d=s("./node_modules/lodash/lodash.js");t.default={traverse:function(e,t){return n(e,t,e)},parent:a,find:o,replaceItem:r,remover:function(e){return function(t){var s;return~(s=(0,d.findIndex)(t.items,{id:e}))&&t.items.splice(s,1),t}},inserter:function(e,t,s){var a="child"===s?l:u;return a(e,t,s)}},e.exports=t.default},"./client/my-sites/draft/index.jsx":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=a(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=a(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=a(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=a(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=a(p),h=s("./node_modules/prop-types/index.js"),m=a(h),g=s("./node_modules/react/react.js"),_=a(g),v=s("./node_modules/classnames/index.js"),b=a(v),y=s("./node_modules/url/url.js"),E=a(y),P=s("./node_modules/react-redux/es/index.js"),S=s("./node_modules/i18n-calypso/index.js"),j=s("./node_modules/lodash/lodash.js"),T=s("./client/components/card/compact.jsx"),C=a(T),I=s("./client/components/gravatar/index.jsx"),x=a(I),w=s("./node_modules/gridicons/build/index.js"),k=a(w),D=s("./client/components/notice/index.jsx"),A=a(D),O=s("./client/components/notice/notice-action.jsx"),N=a(O),M=s("./client/components/popover/menu.jsx"),R=a(M),U=s("./client/components/popover/menu-item.jsx"),V=a(U),q=s("./client/my-sites/post-relative-time-status/index.jsx"),L=a(q),F=s("./client/blocks/site-icon/index.jsx"),B=a(F),z=s("./client/lib/posts/actions.js"),G=a(z),H=s("./node_modules/photon/index.js"),K=a(H),Q=s("./client/lib/touch-detect/index.js"),W=a(Q),X=s("./client/components/update-post-status/index.js"),Y=a(X),J=s("./client/lib/posts/utils.js"),Z=a(J),$=s("./client/state/ui/selectors.js"),ee=s("./client/state/sites/selectors.js"),te=function(e){function t(){var e,s,a,n;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return s=a=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),a.state={fullImage:!1,showPopoverMenu:!1,isRestoring:!1,hasError:!1},a.toggleImageState=function(){a.setState({fullImage:!a.state.fullImage})},a.trashPost=function(){a.setState({showPopoverMenu:!1,isTrashing:!0});var e=function(e){if(this.isMounted())return e?this.setState({isTrashing:!1,hasError:!0}):this.setState({isTrashing:!1})}.bind(a);Z.default.userCan("delete_post",a.props.post)&&G.default.trash(a.props.post,e)},a.restorePost=function(){a.setState({showPopoverMenu:!1,isRestoring:!0});var e=function(e){if(this.isMounted())return e?this.setState({isRestoring:!1,hasError:!0}):this.setState({isRestoring:!1})}.bind(a);Z.default.userCan("delete_post",a.props.post)&&G.default.restore(a.props.post,e)},a.previewPost=function(){window.open(Z.default.getPreviewURL(a.props.post))},a.publishPost=function(){a.setState({showPopoverMenu:!1}),Z.default.userCan("publish_post",a.props.post)&&a.props.updatePostStatus("publish")},a.togglePopoverMenu=function(){a.setState({showPopoverMenu:!a.state.showPopoverMenu})},n=s,(0,c.default)(a,n)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.post,t=null,s=void 0,a=void 0;if(this.props.isPlaceholder)return this.postPlaceholder();var n=this.props.site;Z.default.userCan("edit_post",e)&&(a=Z.default.getEditURL(e,n)),this.props.postImages&&this.props.postImages.canonical_image&&(t=E.default.parse(this.props.postImages.canonical_image.uri,!0),s="//"+t.hostname+t.pathname+"?w=680px"),e&&e.canonical_image&&(t=E.default.parse(e.canonical_image.uri,!0),s=t.hostname.indexOf("files.wordpress.com")>0?"//"+t.hostname+t.pathname+"?w=680px":(0,K.default)(e.canonical_image.uri,{width:680}));var o=(0,b.default)("draft","is-"+e.format,{"has-all-actions":this.props.showAllActions,"has-image":!!t,"is-image-expanded":this.state.fullImage,"is-trashed":"trash"===this.props.post.status||this.state.isTrashing,"is-placeholder":this.props.isPlaceholder,"is-restoring":this.state.isRestoring,"is-touch":W.default.hasTouch(),"is-selected":this.props.selected}),r=e.title||_.default.createElement("span",{className:"draft__untitled"},this.props.translate("Untitled"));return _.default.createElement(C.default,{className:o,key:"draft-"+e.ID},this.showStatusChange(),_.default.createElement("h3",{className:"draft__title"},"pending"===e.status&&_.default.createElement("span",{className:"draft__pending-label"},this.props.translate("Pending")),this.props.showAuthor&&_.default.createElement(x.default,{user:e.author,size:22}),_.default.createElement("a",{href:a,onClick:this.props.onTitleClick},r)),e.excerpt&&_.default.createElement("span",{className:"draft__excerpt"},_.default.createElement("a",{href:a,onClick:this.props.onTitleClick},e.excerpt)),this.props.selectedSiteId?this.draftActions():_.default.createElement(B.default,{site:n,size:32}),t?this.renderImage(s):null,"trash"===this.props.post.status?this.restoreButton():null)}},{key:"renderImage",value:function(e){var t=void 0;return this.state.fullImage||(t={backgroundImage:"url("+e+")"}),_.default.createElement("div",{className:"draft__featured-image",style:t,onClick:this.toggleImageState},this.state.fullImage&&_.default.createElement("img",{className:"draft__image",src:e}))}},{key:"restoreButton",value:function(){return this.state.isRestoring?null:_.default.createElement("button",{className:"draft__restore",onClick:this.restorePost},_.default.createElement(k.default,{icon:"undo",size:18}),this.props.translate("Restore"))}},{key:"showStatusChange",value:function(){return"publish"===this.props.post.status?_.default.createElement(A.default,{isCompact:!0,status:"is-success",text:"Post successfully published.",button:"View",showDismiss:!1},_.default.createElement(N.default,{href:this.props.post.URL},"View")):this.state.hasError?_.default.createElement(A.default,{isCompact:!0,status:"is-error",text:"There was a problem.",showDismiss:!1}):void 0}},{key:"postPlaceholder",value:function(){return _.default.createElement(C.default,{className:"draft is-placeholder"},_.default.createElement("h3",{className:"draft__title"}),_.default.createElement("div",{className:"draft__actions"},_.default.createElement("p",{className:"post-relative-time-status"},_.default.createElement("span",{className:"time"},_.default.createElement("span",{className:"noticon noticon-time"}),_.default.createElement("span",{className:"time-text"})))))}},{key:"renderTrashAction",value:function(){return Z.default.userCan("delete_post",this.props.post)?"trash"===this.props.post.status||this.state.isRestoring?null:_.default.createElement("div",{className:"draft__actions"},_.default.createElement(k.default,{icon:"trash",onClick:this.trashPost,size:18})):null}},{key:"renderAllActions",value:function(){return _.default.createElement("div",{className:"draft__all-actions"},_.default.createElement(L.default,{post:this.props.post,includeEditLink:!0}),_.default.createElement("span",{className:"draft__actions-toggle noticon noticon-ellipsis",onClick:this.togglePopoverMenu,ref:"popoverMenuButton"}),_.default.createElement(R.default,{isVisible:this.state.showPopoverMenu,onClose:this.togglePopoverMenu,position:"bottom left",context:this.refs&&this.refs.popoverMenuButton},_.default.createElement(V.default,{onClick:this.previewPost},this.props.translate("Preview")),_.default.createElement(V.default,{onClick:this.publishPost},this.props.translate("Publish")),_.default.createElement(V.default,{className:"draft__trash-item",onClick:this.trashPost},this.props.translate("Send to Trash"))))}},{key:"draftActions",value:function(){return this.props.showAllActions?this.renderAllActions():this.renderTrashAction()}}]),t}(g.Component);te.propTypes={showAllActions:m.default.bool,post:m.default.object,isPlaceholder:m.default.bool,onTitleClick:m.default.func,postImages:m.default.object,selected:m.default.bool,showAuthor:m.default.bool,translate:m.default.func.isRequired,updatePostStatus:m.default.func.isRequired},te.defaultProps={showAllActions:!1,onTitleClick:j.noop,selected:!1,showAuthor:!1};var se=function(e,t){var s=t.siteId;return{site:(0,ee.getSite)(e,s),selectedSiteId:(0,$.getSelectedSiteId)(e)}};t.default=(0,j.flow)(S.localize,Y.default,(0,P.connect)(se))(te),e.exports=t.default},"./client/my-sites/post-relative-time-status/index.jsx":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=a(n),r=s("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=a(r),l=s("./node_modules/babel-runtime/helpers/createClass.js"),u=a(l),d=s("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=a(d),p=s("./node_modules/babel-runtime/helpers/inherits.js"),f=a(p),h=s("./node_modules/prop-types/index.js"),m=a(h),g=s("./node_modules/i18n-calypso/index.js"),_=s("./node_modules/react/react.js"),v=a(_),b=s("./node_modules/gridicons/build/index.js"),y=a(b),E=function(e){function t(){var e,s,a,n;(0,i.default)(this,t);for(var r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return s=a=(0,c.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),a.getTimestamp=function(){var e=a.props.post.status,t=void 0;return"draft"===e||"pending"===e?t=a.props.post.modified:"new"!==e&&(t=a.props.post.date),t},a.getRelativeTimeText=function(){var e=a.getTimestamp();if(e)return v.default.createElement("span",{className:"post-relative-time-status__time"},v.default.createElement(y.default,{icon:"time",size:a.props.gridiconSize||18}),v.default.createElement("time",{className:"post-relative-time-status__time-text",dateTime:e},a.props.moment(e).fromNow()))},a.getStatusText=function(){var e,t=a.props.post.status,s="post-relative-time-status__status",n="aside";if(a.props.post.sticky?(e=a.props.translate("sticky"),s+=" is-sticky",n="bookmark-outline"):"pending"===t?(e=a.props.translate("pending review"),s+=" is-pending"):"future"===t?(e=a.props.translate("scheduled"),s+=" is-scheduled",n="calendar"):"trash"===t?(e=a.props.translate("trashed"),s+=" is-trash",n="trash"):a.props.includeBasicStatus&&("draft"===t?e=a.props.translate("draft"):"publish"===t?e=a.props.translate("published"):"new"===t&&(e=a.props.translate("Publish immediately"))),e)return v.default.createElement("span",{className:s},v.default.createElement(y.default,{icon:n,size:a.props.gridiconSize||18}),v.default.createElement("span",{className:"post-relative-time-status__status-text"},e))},n=s,(0,c.default)(a,n)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.getRelativeTimeText(),t=this.getStatusText(),s=e?"post-relative-time-status":null,a=v.default.createElement("span",null,e,t),n=this.getTimestamp();if(this.props.link){var o="_blank"===this.props.target?"noopener noreferrer":null;a=v.default.createElement("a",{href:this.props.link,target:this.props.target,rel:o,onClick:this.props.onClick},a)}return v.default.createElement("p",{className:s,title:n},a)}}]),t}(v.default.PureComponent);E.displayName="PostRelativeTime",E.propTypes={post:m.default.object.isRequired,includeNonDraftStatuses:m.default.bool,link:m.default.string,target:m.default.string,gridiconSize:m.default.number},E.defaultProps={includeNonDraftStatuses:!1,link:null,target:null},t.default=(0,g.localize)(E),e.exports=t.default},"./client/state/posts/counts/actions.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){return{type:l.POST_COUNTS_RECEIVE,siteId:e,postType:t,counts:s}}function o(e,t){return function(s){return s({type:l.POST_COUNTS_REQUEST,postType:t,siteId:e}),i.default.undocumented().site(e).postCounts({type:t}).then(function(a){s(n(e,t,a.counts)),s({type:l.POST_COUNTS_REQUEST_SUCCESS,siteId:e,postType:t})}).catch(function(a){s({type:l.POST_COUNTS_REQUEST_FAILURE,siteId:e,postType:t,error:a})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostCounts=n,t.requestPostCounts=o;var r=s("./client/lib/wp/browser.js"),i=a(r),l=s("./client/state/action-types.js")},"./client/state/posts/counts/selectors.js":function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){return(0,m.get)(e.posts.counts.requesting,[t,s],!1)}function o(e,t,s){return(0,m.get)(e.posts.counts.counts,[t,s,"all"],null)}function r(e,t,s,a){var n=o(e,t,s);return n?n[a]||0:null}function i(e,t,s){return(0,m.get)(e.posts.counts.counts,[t,s,"mine"],null)}function l(e,t,s,a){var n=i(e,t,s);return n?n[a]||0:null}function u(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,n=a(e,t,s);return g.reduce(function(e,t){var s=(0,m.get)(n,t,0),a=void 0;switch(t){case"publish":case"private":a="publish";break;case"draft":case"pending":a="draft";break;default:a=t}return(0,h.default)({},e,(0,p.default)({},a,(e[a]||0)+s))},{})}function d(e,t,s){return u(e,t,s,i)}Object.defineProperty(t,"__esModule",{value:!0});var c=s("./node_modules/babel-runtime/helpers/defineProperty.js"),p=a(c),f=s("./node_modules/babel-runtime/helpers/extends.js"),h=a(f);t.isRequestingPostCounts=n,t.getAllPostCounts=o,t.getAllPostCount=r,t.getMyPostCounts=i,t.getMyPostCount=l,t.getNormalizedPostCounts=u,t.getNormalizedMyPostCounts=d;var m=s("./node_modules/lodash/lodash.js"),g=["publish","draft","pending","private","future","trash"]}});