webpackJsonp(["themes","async-load-lib-olark"],{"./client/blocks/eligibility-warnings/hold-list.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return{TRANSFER_ALREADY_EXISTS:{title:t("Installation in progress"),description:t("Please wait for the other installation to complete, then try again."),supportUrl:"https://wordpress.com/help"},NO_JETPACK_SITES:{title:t("Jetpack site not supported"),description:t("Try using a different site.")},NO_VIP_SITES:{title:t("VIP site not supported"),description:t("Try using a different site.")},SITE_PRIVATE:{title:t("Private site not supported"),description:t("Make your site public or hidden to resolve."),supportUrl:"/settings/general/"+e},SITE_GRAYLISTED:{title:t("Flagged site not supported"),description:t("Contact us to review your site's standing to resolve."),supportUrl:"https://support.wordpress.com/suspended-blogs/"},NON_ADMIN_USER:{title:t("Site owner access required"),description:t("Only site owners are allowed to use this feature."),supportUrl:"https://support.wordpress.com/user-roles/"},NOT_DOMAIN_OWNER:{title:t("Not a custom domain owner"),description:t("You must be the owner of the primary domain subscription to use this feature."),supportUrl:"https://support.wordpress.com/domains/"},NO_WPCOM_NAMESERVERS:{title:t("Domain not using WordPress.com name servers"),description:t("Your domain must use WordPress.com name servers to support custom code. Ask your domain provider to update your DNS settings."),supportUrl:"https://en.support.wordpress.com/domains/map-existing-domain/#2-ask-your-domain-provider-to-update-your-dns-settings"},NOT_RESOLVING_TO_WPCOM:{title:t("Domain not pointing to WordPress.com servers"),description:t("We cannot manage your site because your domain does not point to WordPress.com servers. Follow the instructions to reset your domain's A records to resolve this."),supportUrl:"https://support.wordpress.com/move-domain/setting-custom-a-records/"},NO_SSL_CERTIFICATE:{title:t("Security certificate required"),description:t("We are setting up a security certificate for your domain now. Please try again in a few minutes.")},EMAIL_UNVERIFIED:{title:t("Unconfirmed email"),description:t("You must have verified your email address with WordPress.com to install custom code. Please check your email to confirm your address.")},EXCESSIVE_DISK_SPACE:{title:t("We can't proceed with this upload"),description:t("This site is not currently eligible for installing themes and plugins. Please contact support to straighten things out."),supportUrl:"https://support.wordpress.com/help-support-options/"}}}Object.defineProperty(t,"__esModule",{value:!0}),t.HoldList=void 0;var r=n("./node_modules/react/react.js"),i=s(r),a=n("./node_modules/i18n-calypso/index.js"),l=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/gridicons/build/index.js"),d=s(u),c=n("./client/components/button/index.jsx"),p=s(c),m=n("./client/components/card/index.jsx"),f=s(m),h=n("./client/components/section-header/index.jsx"),g=s(h),_=t.HoldList=function(e){var t=e.holds,n=e.isPlaceholder,s=e.siteSlug,r=e.translate,a=o(s,r);return i.default.createElement("div",null,i.default.createElement(g.default,{label:r("Please resolve this issue:","Please resolve these issues:",{count:t.length})}),i.default.createElement(f.default,{className:"eligibility-warnings__hold-list"},n&&i.default.createElement("div",null,i.default.createElement("div",{className:"eligibility-warnings__hold"},i.default.createElement(d.default,{icon:"notice-outline",size:24}),i.default.createElement("div",{className:"eligibility-warnings__message"})),i.default.createElement("div",{className:"eligibility-warnings__hold"},i.default.createElement(d.default,{icon:"notice-outline",size:24}),i.default.createElement("div",{className:"eligibility-warnings__message"}))),!n&&(0,l.map)(t,function(e){return i.default.createElement("div",{className:"eligibility-warnings__hold",key:e},i.default.createElement(d.default,{icon:"notice-outline",size:24}),i.default.createElement("div",{className:"eligibility-warnings__message"},i.default.createElement("span",{className:"eligibility-warnings__message-title"},a[e].title),": ",i.default.createElement("span",{className:"eligibility-warnings__message-description"},a[e].description)),a[e].supportUrl&&i.default.createElement("div",{className:"eligibility-warnings__action"},i.default.createElement(p.default,{compact:!0,href:a[e].supportUrl,rel:"noopener noreferrer"},r("Resolve"))))})))};t.default=(0,a.localize)(_)},"./client/blocks/eligibility-warnings/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EligibilityWarnings=void 0;var o=n("./node_modules/babel-runtime/core-js/object/assign.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),a=s(i),l=n("./node_modules/prop-types/index.js"),u=s(l),d=n("./node_modules/react/react.js"),c=s(d),p=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/i18n-calypso/index.js"),f=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/classnames/index.js"),g=s(h),_=n("./node_modules/gridicons/build/index.js"),b=s(_),v=n("./client/lib/analytics/track-component-view/index.jsx"),y=s(v),j=n("./client/lib/plans/constants.js"),E=n("./client/state/analytics/actions.js"),x=n("./client/state/automated-transfer/selectors.js"),k=n("./client/state/sites/selectors.js"),T=n("./client/state/ui/selectors.js"),S=n("./client/components/banner/index.jsx"),C=s(S),w=n("./client/components/button/index.jsx"),P=s(w),I=n("./client/components/card/index.jsx"),A=s(I),O=n("./client/components/data/query-atat-eligibility/index.jsx"),M=s(O),R=n("./client/blocks/eligibility-warnings/hold-list.jsx"),U=s(R),N=n("./client/blocks/eligibility-warnings/warning-list.jsx"),L=s(N),q=t.EligibilityWarnings=function(e){var t=e.backUrl,n=e.context,s=e.eligibilityData,o=e.hasBusinessPlan,r=e.isEligible,i=e.isJetpack,l=e.isPlaceholder,u=e.onProceed,d=e.onCancel,p=e.siteId,m=e.siteSlug,h=e.translate,_=(0,f.get)(s,"eligibilityWarnings",[]),v=(0,f.partition)((0,f.get)(s,"eligibilityHolds",[]),function(e){return(0,f.includes)(["NO_BUSINESS_PLAN","NOT_USING_CUSTOM_DOMAIN"],e)}),E=(0,a.default)(v,2),x=E[0],k=E[1],T=(0,g.default)("eligibility-warnings",{"eligibility-warnings__placeholder":l});return c.default.createElement("div",{className:T},c.default.createElement(M.default,{siteId:p}),c.default.createElement(y.default,{eventName:"calypso_automated_transfer_eligibility_show_warnings",eventProperties:{context:n}}),!o&&!i&&c.default.createElement(C.default,{description:h("Also get unlimited themes, advanced customization, no ads, live chat support, and more."),feature:"plugins"===n?j.FEATURE_UPLOAD_PLUGINS:j.FEATURE_UPLOAD_THEMES,event:"plugins"===n?"calypso-plugin-eligibility-upgrade-nudge":"calypso-theme-eligibility-upgrade-nudge",plan:j.PLAN_BUSINESS,title:h("Business plan required")}),o&&!i&&(0,f.includes)(x,"NOT_USING_CUSTOM_DOMAIN")&&c.default.createElement(C.default,{className:"eligibility-warnings__banner",description:h("plugins"===n?"To install this plugin, add a free custom domain.":"To upload themes, add a free custom domain."),href:"/domains/manage/"+m,icon:"domains",title:h("Custom domain required")}),(l||k.length>0)&&c.default.createElement(U.default,{holds:k,isPlaceholder:l,siteSlug:m}),_.length>0&&c.default.createElement(L.default,{warnings:_}),r&&0===k.length&&0===_.length&&c.default.createElement(A.default,{className:"eligibility-warnings__no-conflicts"},c.default.createElement(b.default,{icon:"thumbs-up",size:24}),c.default.createElement("span",null,h("This site is eligible to install plugins and upload themes."))),c.default.createElement(A.default,{className:"eligibility-warnings__confirm-box"},c.default.createElement("div",{className:"eligibility-warnings__confirm-text"},!r&&h("The errors above must be resolved before proceeding. "),r&&_.length>0&&h("If you proceed you will no longer be able to use these features. "),h("Have questions? Please {{a}}contact support{{/a}}.",{components:{a:c.default.createElement("a",{href:"https://wordpress.com/help/contact",target:"_blank",rel:"noopener noreferrer"})}})),c.default.createElement("div",{className:"eligibility-warnings__confirm-buttons"},c.default.createElement(P.default,{href:t,onClick:d},h("Cancel")),c.default.createElement(P.default,{primary:!0,disabled:!r,onClick:u},h("Proceed")))))};q.propTypes={onProceed:u.default.func,backUrl:u.default.string,translate:u.default.func},q.defaultProps={onProceed:f.noop};var D=function(e){var t=(0,T.getSelectedSiteId)(e),n=(0,T.getSelectedSiteSlug)(e),s=(0,x.getEligibility)(e,t),o=(0,x.isEligibleForAutomatedTransfer)(e,t),r=(0,f.get)(s,"eligibilityHolds",[]),i=!(0,f.includes)(r,"NO_BUSINESS_PLAN"),a=(0,k.isJetpackSite)(e,t),l=!!s.lastUpdate;return{eligibilityData:s,hasBusinessPlan:i,isEligible:o,isJetpack:a,isPlaceholder:!l,siteId:t,siteSlug:n}},F={trackCancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,E.recordTracksEvent)("calypso_automated_transfer_eligibility_click_cancel",e)},trackProceed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,E.recordTracksEvent)("calypso_automated_transfer_eligibilty_click_proceed",e)}},z=function(e,t,n){var s=(0,f.includes)(n.backUrl,"plugins")?"plugins":"themes",o=function(){return t.trackCancel({context:s})},i=function(){n.onProceed(),t.trackProceed({context:s})};return(0,r.default)({},n,e,t,{onCancel:o,onProceed:i,context:s})};t.default=(0,p.connect)(D,F,z)((0,m.localize)(q))},"./client/blocks/eligibility-warnings/warning-list.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WarningList=void 0;var o=n("./node_modules/react/react.js"),r=s(o),i=n("./node_modules/i18n-calypso/index.js"),a=n("./node_modules/lodash/lodash.js"),l=n("./node_modules/gridicons/build/index.js"),u=s(l),d=n("./client/components/card/index.jsx"),c=s(d),p=n("./client/components/external-link/index.jsx"),m=s(p),f=n("./client/components/section-header/index.jsx"),h=s(f),g=t.WarningList=function(e){var t=e.translate,n=e.warnings;return r.default.createElement("div",null,r.default.createElement(h.default,{label:t("By proceeding you'll lose %d feature:","By proceeding you'll lose these %d features:",{count:n.length,args:n.length})}),r.default.createElement(c.default,{className:"eligibility-warnings__warning-list"},(0,a.map)(n,function(e,t){var n=e.name,s=e.description,o=e.supportUrl;return r.default.createElement("div",{className:"eligibility-warnings__warning",key:t},r.default.createElement(u.default,{icon:"cross-small",size:24}),r.default.createElement("div",{className:"eligibility-warnings__message"},r.default.createElement("span",{className:"eligibility-warnings__message-title"},n),": ",r.default.createElement("span",{className:"eligibility-warnings__message-description"},s)),r.default.createElement("div",{className:"eligibility-warnings__action"},r.default.createElement(m.default,{href:o,target:"_blank",rel:"noopener noreferrer"},r.default.createElement(u.default,{icon:"help-outline",size:24}))))})))};t.default=(0,i.localize)(g)},"./client/blocks/upload-drop-zone/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),y=n("./node_modules/gridicons/build/index.js"),j=s(y),E=n("./node_modules/classnames/index.js"),x=s(E),k=n("./client/components/file-picker/index.jsx"),T=s(k),S=n("./client/components/drop-zone/index.jsx"),C=s(S),w=n("./client/state/ui/selectors.js"),P=n("./client/notices/index.js"),I=s(P),A=n("./node_modules/debug/browser.js"),O=s(A),M=n("./client/lib/automated-transfer/constants.js"),R=(0,O.default)("calypso:upload-drop-zone"),U=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.onFileSelect=function(e){var t=s.props,n=t.translate,o=t.siteId,r=t.doUpload;if(1!==e.length)return void I.default.error(n("Please drop a single zip file"));var i=e[0]||e.item(0);return R("zip file:",i),i.size>M.MAX_UPLOAD_ZIP_SIZE?void I.default.error(n("Zip file is too large. Please upload a file under 50 MB.")):void r(o,i)},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.translate,n=e.disabled,s=t("Drop files or click here to upload"),o=t("Only single .zip files are accepted."),r=(0,x.default)("upload-drop-zone",{"is-disabled":n});return _.default.createElement("div",{className:r},_.default.createElement("div",{className:"upload-drop-zone__dropzone"},_.default.createElement(C.default,{onFilesDrop:this.onFileSelect}),_.default.createElement(T.default,{accept:"application/zip",onPick:this.onFileSelect},_.default.createElement(j.default,{className:"upload-drop-zone__icon",icon:"cloud-upload",size:48}),s,_.default.createElement("span",{className:"upload-drop-zone__instructions"},o))))}}]),t}(g.Component);U.propTypes={doUpload:h.default.func.isRequired,disabled:h.default.bool,siteId:h.default.number},t.default=(0,b.connect)(function(e){return{siteId:(0,w.getSelectedSiteId)(e)}})((0,v.localize)(U)),e.exports=t.default},"./client/components/card/compact.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return l.default.createElement(p.default,(0,i.default)({},e,{className:(0,d.default)(e.className,"is-compact")}),e.children)}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=s(r);t.default=o;var a=n("./node_modules/react/react.js"),l=s(a),u=n("./node_modules/classnames/index.js"),d=s(u),c=n("./client/components/card/index.jsx"),p=s(c);e.exports=t.default},"./client/components/data/query-active-theme/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/themes/actions.js"),v=n("./client/state/themes/selectors.js"),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){e.siteId&&!e.isRequesting&&e.requestActiveTheme(e.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);y.propTypes={siteId:h.default.number,isRequesting:h.default.bool.isRequired,requestActiveTheme:h.default.func.isRequired},t.default=(0,_.connect)(function(e,t){var n=t.siteId;return{isRequesting:(0,v.isRequestingActiveTheme)(e,n)}},{requestActiveTheme:b.requestActiveTheme})(y),e.exports=t.default},"./client/components/data/query-atat-eligibility/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapDispatchToProps=t.QueryAutomatedTransferEligibility=void 0;var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/automated-transfer/actions.js"),v=t.QueryAutomatedTransferEligibility=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){var t=e.requestEligibility,n=e.siteId;n&&t(n)}},{key:"render",value:function(){return null}}]),t}(g.Component);v.propTypes={requestEligibility:h.default.func.isRequired,siteId:h.default.number};var y=t.mapDispatchToProps={requestEligibility:b.requestEligibility};t.default=(0,_.connect)(null,y)(v)},"./client/components/data/query-canonical-theme/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prop-types/index.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/react-redux/es/index.js"),u=n("./client/components/data/query-theme/index.jsx"),d=s(u),c=n("./client/state/themes/selectors.js"),p=function(e){var t=e.siteId,n=e.themeId,s=e.isWpcom,o=e.isWporg;return a.default.createElement("div",null,a.default.createElement(d.default,{themeId:n,siteId:"wpcom"}),!s&&a.default.createElement(d.default,{themeId:n,siteId:"wporg"}),!s&&!o&&t&&a.default.createElement(d.default,{themeId:n,siteId:t}))};p.propTypes={siteId:r.default.number,themeId:r.default.string.isRequired,isWpcom:r.default.bool.isRequired,isWporg:r.default.bool.isRequired},t.default=(0,l.connect)(function(e,t){var n=t.themeId;return{isWpcom:(0,c.isWpcomTheme)(e,n),isWporg:(0,c.isWporgTheme)(e,n)}})(p),e.exports=t.default},"./client/components/data/query-site-purchases/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/purchases/selectors.js"),v=n("./client/state/purchases/actions.js"),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"requestSitePurchases",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;e.siteId&&this.props.fetchSitePurchases(e.siteId)}},{key:"componentWillMount",value:function(){this.requestSitePurchases()}},{key:"componentWillReceiveProps",value:function(e){!e.requesting&&e.siteId&&this.props.siteId!==e.siteId&&this.requestSitePurchases(e)}},{key:"render",value:function(){return null}}]),t}(g.Component);y.propTypes={siteId:h.default.number,requesting:h.default.bool,fetchSitePurchases:h.default.func.isRequired},t.default=(0,_.connect)(function(e){return{requesting:(0,b.isFetchingSitePurchases)(e)}},{fetchSitePurchases:v.fetchSitePurchases})(y),e.exports=t.default},"./client/components/data/query-theme-filters/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QueryThemeFilters=void 0;var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/themes/actions.js"),v=t.QueryThemeFilters=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.props.requestThemeFilters()}},{key:"render",value:function(){return null}}]),t}(g.Component);v.propTypes={requestThemeFilters:h.default.func.isRequired},t.default=(0,_.connect)(null,{requestThemeFilters:b.requestThemeFilters})(v)},"./client/components/data/query-theme/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./client/state/themes/actions.js"),v=n("./client/state/themes/selectors.js"),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.themeId===e.themeId||this.request(e)}},{key:"request",value:function(e){e.isRequesting||e.requestTheme(e.themeId,e.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);y.propTypes={siteId:h.default.oneOfType([h.default.number,h.default.oneOf(["wpcom","wporg"])]).isRequired,themeId:h.default.string.isRequired,isRequesting:h.default.bool.isRequired,requestTheme:h.default.func.isRequired},t.default=(0,_.connect)(function(e,t){var n=t.siteId,s=t.themeId;return{isRequesting:(0,v.isRequestingTheme)(e,n,s)}},{requestTheme:b.requestTheme})(y),e.exports=t.default},"./client/components/data/query-themes/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),v=n("./client/state/themes/actions.js"),y=n("./client/state/themes/selectors.js"),j=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.request()}},{key:"shouldComponentUpdate",value:function(e){return this.props.siteId!==e.siteId||!(0,b.isEqual)(this.props.query,e.query)}},{key:"componentDidUpdate",value:function(){this.request()}},{key:"request",value:function(){this.props.isRequesting||this.props.hasThemes||this.props.requestThemes(this.props.siteId,this.props.query)}},{key:"render",value:function(){return null}}]),t}(g.Component);j.propTypes={siteId:h.default.oneOfType([h.default.number,h.default.oneOf(["wpcom","wporg"])]).isRequired,query:h.default.shape({search:h.default.string,tier:h.default.oneOf(["","free","premium"]),filter:h.default.string,page:h.default.number,number:h.default.number}),hasThemes:h.default.bool.isRequired,isRequesting:h.default.bool.isRequired,requestThemes:h.default.func.isRequired},t.default=(0,_.connect)(function(e,t){var n=t.query,s=t.siteId;return{hasThemes:!(0,b.isEmpty)((0,y.getThemesForQuery)(e,s,n)),isRequesting:(0,y.isRequestingThemesForQuery)(e,s,n)}},{requestThemes:v.requestThemes})(j),e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var o=n("./node_modules/babel-runtime/core-js/array/from.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=n("./node_modules/react-dom/index.js"),_=s(g),b=n("./node_modules/react/react.js"),v=s(b),y=n("./node_modules/prop-types/index.js"),j=s(y),E=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/classnames/index.js"),k=s(x),T=n("./node_modules/gridicons/build/index.js"),S=s(T),C=n("./node_modules/i18n-calypso/index.js"),w=n("./node_modules/lodash/lodash.js"),P=n("./client/components/root-child/index.jsx"),I=s(P),A=n("./client/state/ui/drop-zone/actions.js"),O=t.DropZone=function(e){function t(){var e,n,s,o;(0,u.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=s=(0,m.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),s.state={isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1},s.resetDragState=function(){(s.state.isDraggingOverDocument||s.state.isDraggingOverElement)&&(s.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),s.toggleDropZoneReduxState(!1))},s.toggleMutationObserver=function(){s.disconnectMutationObserver(),s.state.isDraggingOverDocument&&(s.observer=new window.MutationObserver(s.detectNodeRemoval),s.observer.observe(document.body,{childList:!0,subtree:!0}))},s.disconnectMutationObserver=function(){s.observer&&(s.observer.disconnect(),delete s.observer)},s.detectNodeRemoval=function(e){e.forEach(function(e){e.removedNodes.length&&(s.dragEnterNodes=(0,w.without)(s.dragEnterNodes,(0,r.default)(e.removedNodes)))})},s.toggleDraggingOverDocument=function(e){"dragenter"!==e.type||(0,w.includes)(s.dragEnterNodes,e.target)?"dragleave"===e.type&&(s.dragEnterNodes=(0,w.without)(s.dragEnterNodes,e.target)):s.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,n=s.props.onVerifyValidTransfer(t.dataTransfer),o=n&&s.dragEnterNodes.length;s.setState({isDraggingOverDocument:o,isDraggingOverElement:o&&(s.props.fullScreen||s.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(s.dragEnterNodes=(0,w.without)(s.dragEnterNodes,window)),s.toggleDropZoneReduxState(!(!s.state.isDraggingOverDocument&&!s.state.isDraggingOverElement))},s.toggleDropZoneReduxState=function(e){s.state.lastVisibleState!==e&&(e?s.props.showDropZone(s.props.dropZoneName):s.props.hideDropZone(s.props.dropZoneName),s.setState({lastVisibleState:e}))},s.preventDefault=function(e){e.preventDefault()},s.isWithinZoneBounds=function(e,t){if(!s.refs.zone)return!1;var n=s.refs.zone.getBoundingClientRect();return n.bottom!==n.top&&n.left!==n.right&&(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)},s.onDrop=function(e){e.dataTransfer&&e.dataTransfer.files.length,s.resetDragState(),e.preventDefault(),(s.props.fullScreen||_.default.findDOMNode(s.refs.zone).contains(e.target))&&(s.props.onDrop(e),s.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&s.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation()))},s.renderContent=function(){var e=s.props.textLabel?s.props.textLabel:s.props.translate("Drop files to upload");return v.default.createElement("div",{className:"drop-zone__content"},s.props.children?s.props.children:v.default.createElement("div",null,v.default.createElement("span",{className:"drop-zone__content-icon"},s.props.icon),v.default.createElement("span",{className:"drop-zone__content-text"},e)))},o=n,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)}},{key:"componentDidUpdate",value:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()}},{key:"render",value:function(){var e=(0,k.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=v.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?v.default.createElement(I.default,null,t):t}}]),t}(v.default.Component);O.propTypes={className:j.default.string,fullScreen:j.default.bool,icon:j.default.node,onDrop:j.default.func,onVerifyValidTransfer:j.default.func,onFilesDrop:j.default.func,textLabel:j.default.string,translate:j.default.func,showDropZone:j.default.func.isRequired,hideDropZone:j.default.func.isRequired,dropZoneName:j.default.string},O.defaultProps={className:null,onDrop:w.noop,onVerifyValidTransfer:function(){return!0},onFilesDrop:w.noop,fullScreen:!1,icon:v.default.createElement(S.default,{icon:"cloud-upload",size:48}),translate:w.identity,dropZoneName:null};var M={showDropZone:A.showDropZone,hideDropZone:A.hideDropZone};t.default=(0,E.connect)(null,M)((0,C.localize)(O))},"./client/components/file-picker/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/component-file-picker/index.js"),y=s(v),j=function(e){
function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.showPicker=n.showPicker.bind(n),n}return(0,m.default)(t,e),(0,u.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,y.default)((0,b.assign)({},this.props),this.props.onPick)}},{key:"render",value:function(){return _.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(_.default.Component);t.default=j,j.displayName="FilePicker",j.propTypes={multiple:h.default.bool,directory:h.default.bool,accept:h.default.string,onClick:h.default.func,onPick:h.default.func},j.defaultProps={multiple:!1,directory:!1,accept:null,onClick:b.noop,onPick:b.noop},e.exports=t.default},"./client/components/header-cake/back.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/react/react.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/classnames/index.js"),v=s(b),y=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/gridicons/build/index.js"),E=s(j),x=n("./node_modules/lodash/lodash.js"),k=n("./client/components/button/index.jsx"),T=s(k),S=n("./client/lib/viewport/index.js"),C=s(S),w={windowWidth:480,characterLength:8},P=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={windowWidth:C.default.getWindowInnerWidth()},s.handleWindowResize=function(){s.setState({windowWidth:C.default.getWindowInnerWidth()})},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.resizeThrottled=(0,x.throttle)(this.handleWindowResize,100),window.addEventListener("resize",this.resizeThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeThrottled)}},{key:"hideText",value:function(e){return this.state.windowWidth<=w.windowWidth&&e.length>=w.characterLength||this.state.windowWidth<=300}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.icon,s=e.onClick,o=e.spacer,r=e.text,i=e.translate,a=void 0===r?i("Back"):r,l=(0,v.default)({"header-cake__back":!0,"is-spacer":o,"is-action":!!n});return h.default.createElement(T.default,{compact:!0,borderless:!0,className:l,href:t,onClick:s,disabled:o},h.default.createElement(E.default,{icon:n||"arrow-left",size:18}),!this.hideText(a)&&a)}}]),t}(f.Component);P.propTypes={onClick:_.default.func,href:_.default.string,text:_.default.string,spacer:_.default.bool},P.defaultProps={spacer:!1,disabled:!1},t.default=(0,y.localize)(P),e.exports=t.default},"./client/components/header-cake/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/classnames/index.js"),v=s(b),y=n("./client/components/card/index.jsx"),j=s(y),E=n("./client/components/header-cake/back.jsx"),x=s(E),k=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.backText,n=e.backHref,s=e.actionButton,o=e.actionText,r=e.actionIcon,i=e.actionHref,a=e.actionOnClick,l=(0,v.default)("header-cake",this.props.className,{"is-compact":this.props.isCompact});return _.default.createElement(j.default,{className:l},_.default.createElement(x.default,{text:t,href:n,onClick:this.props.onClick}),_.default.createElement("div",{className:"header-cake__title",onClick:this.props.onTitleClick},this.props.children),s||_.default.createElement(x.default,{text:o||t,href:i||n,onClick:a,icon:r,spacer:!a}))}}]),t}(g.Component);t.default=k,k.displayName="HeaderCake",k.propTypes={onClick:h.default.func,onTitleClick:h.default.func,backText:h.default.string,backHref:h.default.string,actionButton:h.default.element,actionText:h.default.string,actionHref:h.default.string,actionIcon:h.default.string,actionOnClick:h.default.func},k.defaultProps={isCompact:!1},e.exports=t.default},"./client/components/info-popover/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/react/react.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/gridicons/build/index.js"),v=s(b),y=n("./node_modules/classnames/index.js"),j=s(y),E=n("./client/components/popover/index.jsx"),x=s(E),k=n("./client/lib/analytics/index.js"),T=s(k),S=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={showPopover:!1},s.handleClick=function(e){e.preventDefault(),s.setState({showPopover:!s.state.showPopover},s.recordStats)},s.handleClose=function(){return s.setState({showPopover:!1},s.recordStats)},s.recordStats=function(){var e=s.props,t=e.gaEventCategory,n=e.popoverName;if(t&&n){var o=s.state.showPopover?" Opened":" Closed";T.default.ga.recordEvent(t,"InfoPopover: "+n+o)}},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:(0,j.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},h.default.createElement(v.default,{icon:this.props.icon,size:this.props.iconSize}),h.default.createElement(x.default,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,j.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}]),t}(f.Component);S.propTypes={autoRtl:_.default.bool,className:_.default.string,gaEventCategory:_.default.string,icon:_.default.string,iconSize:_.default.number,id:_.default.string,ignoreContext:_.default.shape({getDOMNode:_.default.func}),popoverName:_.default.string,position:_.default.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:_.default.string},S.defaultProps={autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom"},t.default=S,e.exports=t.default},"./client/components/keyed-suggestions/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(){return e.onClick(e.category)}return E.default.createElement("span",{className:"keyed-suggestions__category-show-all",onClick:t},e.label)}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=s(r),a=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),l=s(a),u=n("./node_modules/babel-runtime/core-js/object/keys.js"),d=s(u),c=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),p=s(c),m=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),f=s(m),h=n("./node_modules/babel-runtime/helpers/createClass.js"),g=s(h),_=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),b=s(_),v=n("./node_modules/babel-runtime/helpers/inherits.js"),y=s(v),j=n("./node_modules/react/react.js"),E=s(j),x=n("./node_modules/prop-types/index.js"),k=s(x),T=n("./node_modules/lodash/lodash.js"),S=n("./node_modules/classnames/index.js"),C=s(S),w=n("./node_modules/i18n-calypso/index.js"),P=s(w),I=function(e){function t(){var e,n,s,r;(0,f.default)(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=s=(0,b.default)(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(u))),s.state={suggestionPosition:0,currentSuggestion:null,suggestions:{},filterTerm:"",showAll:""},s.setInitialState=function(e){var t=s.narrowDownAndSort(e,s.state.showAll),n=s.createTaxonomySuggestionsArray(t);s.setState({suggestions:t,taxonomySuggestionsArray:n,suggestionPosition:0,currentSuggestion:n[0]})},s.countSuggestions=function(){return s.state.taxonomySuggestionsArray.length},s.getSuggestionForPosition=function(e){return s.state.taxonomySuggestionsArray[e]},s.getPositionForSuggestion=function(e){return s.state.taxonomySuggestionsArray.indexOf(e)},s.incPosition=function(){var e=(s.state.suggestionPosition+1)%s.countSuggestions();s.setState({suggestionPosition:e,currentSuggestion:s.getSuggestionForPosition(e)})},s.decPosition=function(){var e=s.state.suggestionPosition-1;s.setState({suggestionPosition:e<0?s.countSuggestions()-1:e,currentSuggestion:s.getSuggestionForPosition(e)})},s.handleKeyEvent=function(e){switch(e.key){case"ArrowDown":s.incPosition(),e.preventDefault();break;case"ArrowUp":s.decPosition(),e.preventDefault();break;case"Enter":if(s.state.currentSuggestion)return s.props.suggest(s.state.currentSuggestion),!0}return!1},s.onMouseDown=function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.textContent.split(" ")[0];s.props.suggest(t)},s.onMouseOver=function(e){var t=e.currentTarget.textContent.split(" ")[0];s.setState({suggestionPosition:s.getPositionForSuggestion(t),currentSuggestion:t})},s.removeEmptySuggestions=function(e){return(0,T.pickBy)(e,(0,T.negate)(T.isEmpty))},s.narrowDownAndSort=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,T.mapValues)(s.props.terms,d.default),o=e.toLowerCase().split(":"),r=(0,l.default)(o,2),a=r[0],u=r[1];if(""===a)return{};var c=3,p=void 0,m=void 0;if(void 0!==u){if(!(0,T.has)(n,a))return{};p=(0,T.pick)(n,a),c=5,m=u}else m=a,p=n;var f={};if(void 0!==u&&(0,T.includes)(p[a],u)){var h=(0,T.without)(p[a],u);return h.unshift(u),f[a]=t===a?h:(0,T.take)(h,c),f}s.setState({filterTerm:m});for(var g in p)if((0,T.has)(s.props.terms,g))if(t===g){var _=(0,T.partition)(p[g],function(e){return e.indexOf(m)!==-1}),b=(0,T.sortBy)(_[0],function(e){return e.indexOf(m)});f[g]=[].concat((0,i.default)(b),(0,i.default)(_[1]))}else f[g]=(0,T.take)(p[g].filter(function(e){return e.indexOf(m)!==-1}),c);return s.removeEmptySuggestions(f)},s.createTaxonomySuggestionsArray=function(e){var t=[],n=function(n){return(0,T.has)(e,n)?void t.push.apply(t,(0,i.default)(e[n].map(function(e){return n+":"+e}))):"continue"};for(var s in e){n(s)}return t},s.createTextWithHighlight=function(e,t){var n=new RegExp("("+t+")","gi"),s=e.split(n),o=s.map(function(n,s){var o=e+s,r=n.toLowerCase();return r===t?E.default.createElement("span",{key:o,className:"keyed-suggestions__value-emphasis"},n):E.default.createElement("span",{key:o,className:"keyed-suggestions__value-normal"},n)});return o},s.onShowAllClick=function(e){var t=s.narrowDownAndSort(s.props.input,e);s.setState({showAll:e,suggestions:t,taxonomySuggestionsArray:s.createTaxonomySuggestionsArray(t)})},s.createSuggestions=function(e){var t=0,n=[],r=function(r){if(!(0,T.has)(e,r))return"continue";var i=e[r].length.toString(),a=(0,d.default)(s.props.terms[r]).length.toString();n.push(E.default.createElement("div",{className:"keyed-suggestions__category",key:r},E.default.createElement("span",{className:"keyed-suggestions__category-name"},r),E.default.createElement("span",{className:"keyed-suggestions__category-counter"},P.default.translate("%(filtered)s of %(total)s",{args:{filtered:i,total:a}})),(0,d.default)(s.props.terms[r]).length>e[r].length&&E.default.createElement(o,{onClick:s.onShowAllClick,category:r,label:P.default.translate("Show all")}),r===s.state.showAll&&E.default.createElement(o,{onClick:s.onShowAllClick,category:"",label:P.default.translate("Show less")})));var l=s.props.terms;n.push(e[r].map(function(e,n){var o=l[r][e].name,i=t+n===s.state.suggestionPosition,a=(0,C.default)("keyed-suggestions__value",{"has-highlight":i});return E.default.createElement("span",{className:a,onMouseDown:s.onMouseDown,onMouseOver:s.onMouseOver,key:r+"_"+n},E.default.createElement("span",{className:"keyed-suggestions__value-category"},r+":"+e+" "),E.default.createElement("span",{className:"keyed-suggestions__value-label-wigh-highlight"},s.createTextWithHighlight(o,s.state.filterTerm)),""!==l[r][e].description&&E.default.createElement("span",{className:"keyed-suggestions__value-description"},l[r][e].description))})),t+=e[r].length};for(var i in e){r(i)}return E.default.createElement("div",{className:"keyed-suggestions__suggestions"},n)},r=n,(0,b.default)(s,r)}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){this.setInitialState(this.props.input)}},{key:"componentWillReceiveProps",value:function(e){e.input!==this.props.input&&this.setInitialState(e.input)}},{key:"render",value:function(){return E.default.createElement("div",{className:"keyed-suggestions"},this.createSuggestions(this.state.suggestions))}}]),t}(E.default.Component);I.propTypes={suggest:k.default.func,terms:k.default.object,input:k.default.string},I.defaultProps={suggest:T.noop,terms:{},input:""},t.default=I,e.exports=t.default},"./client/components/progress-bar/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/classnames/index.js"),v=s(b),y=n("./client/components/screen-reader-text/index.js"),j=s(y),E=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={allTimeMax:s.props.value},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"getCompletionPercentage",value:function(){var e=Math.ceil(this.state.allTimeMax/this.props.total*100);return Math.min(e,100)}},{key:"renderBar",value:function(){var e=this.props.title?_.default.createElement(j.default,null,this.props.title):null,t={width:this.getCompletionPercentage()+"%"};return this.props.color&&(t.backgroundColor=this.props.color),_.default.createElement("div",{className:"progress-bar__progress",style:t},e)}},{key:"componentWillReceiveProps",value:function(e){this.setState({allTimeMax:Math.max(this.state.allTimeMax,e.value)})}},{key:"render",value:function(){var e=(0,v.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return _.default.createElement("div",{className:e},this.renderBar())}}]),t}(g.PureComponent);E.defaultProps={total:100,compact:!1,isPulsing:!1},E.propTypes={value:h.default.number.isRequired,total:h.default.number,color:h.default.string,title:h.default.string,compact:h.default.bool,className:h.default.string,isPulsing:h.default.bool},t.default=E,e.exports=t.default},"./client/components/ribbon/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/react.js"),r=s(o),i=n("./node_modules/classnames/index.js"),a=s(i);t.default=function(e){return r.default.createElement("div",{className:(0,a.default)({ribbon:!0,"is-green":"green"===e.color})},r.default.createElement("span",{className:"ribbon__title"},e.children))},e.exports=t.default},"./client/components/screen-reader-text/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.children;return i.default.createElement("span",{className:"screen-reader-text"},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n("./node_modules/react/react.js"),i=s(r);e.exports=t.default},"./client/components/section-header/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/react/react.js"),h=s(f),g=n("./node_modules/classnames/index.js"),_=s(g),b=n("./client/components/card/compact.jsx"),v=s(b),y=n("./client/components/count/index.jsx"),j=s(y),E=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),n=(0,_.default)(this.props.className,"section-header",{"is-empty":t});return h.default.createElement(v.default,{className:n,href:this.props.href},h.default.createElement("div",{className:"section-header__label"},h.default.createElement("span",{className:"section-header__label-text"},this.props.label),e&&h.default.createElement(j.default,{count:this.props.count})),h.default.createElement("div",{className:"section-header__actions"},this.props.children))}}]),t}(f.PureComponent);E.defaultProps={label:"",href:null},t.default=E,e.exports=t.default},"./client/components/segmented-control/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/prop-types/index.js"),g=s(h),_=n("./node_modules/react-dom/index.js"),b=s(_),v=n("./node_modules/react/react.js"),y=s(v),j=n("./node_modules/classnames/index.js"),E=s(j),x=n("./client/components/segmented-control/item.jsx"),k=s(x),T=1,S=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));n.getSegmentedItems=function(){var e=0;return n.props.children?y.default.Children.map(n.props.children,function(t,n){var s=y.default.cloneElement(t,{ref:t.type===k.default?"item-"+e:null,key:"item-"+n,onClick:function(e){this.setKeyboardNavigation(!1),"function"==typeof t.props.onClick&&t.props.onClick(e)}.bind(this)});return t.type===k.default&&e++,s},n):n.props.options.map(function(e,t){return y.default.createElement(k.default,{key:"segmented-control-"+this.id+"-"+e.value,ref:"item-"+t,selected:this.state.selected===e.value,onClick:this.selectItem.bind(this,e),path:e.path,index:t,value:e.value},e.label)},n)},n.selectItem=function(e){e&&(n.props.onSelect&&n.props.onSelect(e),n.setState({selected:e.value,keyboardNavigation:!1}))},n.setKeyboardNavigation=function(e){n.setState({keyboardNavigation:e})},n.navigateItem=function(e){switch(e.keyCode){case 9:n.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),document.activeElement.click();break;case 37:e.preventDefault(),n.focusSibling("previous");break;case 39:e.preventDefault(),n.focusSibling("next")}},n.navigateItemByTabKey=function(e){var t=e.shiftKey?"previous":"next",s=n.focusSibling(t);s!==!1&&e.preventDefault()},n.focusSibling=function(e){var t,s,o;return s=n.props.options?(0,f.filter)((0,f.map)(n.props.options,"value"),Boolean):(0,f.filter)(n.props.children,function(e){return e.type===k.default}),"number"!=typeof n.focused&&(n.focused=n.getCurrentFocusedIndex()),t="previous"===e?-1:1,o=n.focused+t,!(o>=s.length||o<0)&&(b.default.findDOMNode(n.refs["item-"+o].refs.itemLink).focus(),n.focused=o,o)},n.getCurrentFocusedIndex=function(){var e=document.activeElement.parentNode,t=Array.prototype.slice(e.parentNode.children),n=t.indexOf(e);return n>-1?n:0};var s;return e.options&&(s=e.initialSelected||e.options[0].value),n.state={selected:s,keyboardNavigation:!1},n}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.id=T,T++}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.navigateItem)}},{key:"render",value:function(){var e={"segmented-control":!0,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};return this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0}),y.default.createElement("ul",{className:(0,E.default)(e),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,!0)},this.getSegmentedItems())}}]),t}(y.default.Component);S.propTypes={initialSelected:g.default.string,compact:g.default.bool,className:g.default.string,style:g.default.object,onSelect:g.default.func,options:g.default.arrayOf(g.default.shape({value:g.default.string.isRequired,label:g.default.string.isRequired,path:g.default.string}))},S.defaultProps={compact:!1},t.default=S,e.exports=t.default},"./client/components/segmented-control/item.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/defineProperty.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/react/react.js"),v=s(b),y=n("./node_modules/classnames/index.js"),j=s(y),E=function(e){function t(){return(0,u.default)(this,t),(0,m.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,j.default)({"segmented-control__item":!0,"is-selected":this.props.selected}),t=(0,j.default)("segmented-control__link",(0,r.default)({},"item-index-"+this.props.index,null!=this.props.index));return v.default.createElement("li",{className:e},v.default.createElement("a",{href:this.props.path,className:t,ref:"itemLink",onClick:this.props.onClick,title:this.props.title,"data-e2e-value":this.props.value,role:"radio",tabIndex:0,"aria-selected":this.props.selected},v.default.createElement("span",{className:"segmented-control__text"},this.props.children)))}}]),t}(v.default.Component);E.propTypes={children:_.default.node.isRequired,path:_.default.string,selected:_.default.bool,title:_.default.string,value:_.default.string,onClick:_.default.func},E.defaultProps={selected:!1},t.default=E,e.exports=t.default},"./client/components/sidebar-navigation/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/gridicons/build/index.js"),y=s(v),j=n("./client/state/document-head/selectors.js"),E=n("./client/state/ui/layout-focus/actions.js"),x=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.toggleSidebar=n.toggleSidebar.bind(n),n}return(0,m.default)(t,e),(0,u.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return _.default.createElement("header",{className:"current-section"},_.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},_.default.createElement(y.default,{icon:"chevron-left"}),this.props.children,_.default.createElement("div",null,_.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),_.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(_.default.Component);x.propTypes={title:h.default.string,linkClassName:h.default.string,sectionTitle:h.default.string,sectionName:h.default.string.isRequired,setLayoutFocus:h.default.func.isRequired},t.default=(0,b.connect)(function(e){return{title:(0,j.getDocumentHeadTitle)(e)}},{setLayoutFocus:E.setLayoutFocus})(x),e.exports=t.default},"./client/components/site-selector-modal/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/classnames/index.js"),y=s(v),j=n("./node_modules/lodash/lodash.js"),E=n("./node_modules/i18n-calypso/index.js"),x=n("./client/components/dialog/index.jsx"),k=s(x),T=n("./client/components/button/index.jsx"),S=s(T),C=n("./client/components/sites-dropdown/index.jsx"),w=s(C),P=n("./client/state/selectors/get-primary-site-id.js"),I=s(P),A=n("./client/state/selectors/get-visible-sites.js"),O=s(A),M=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={siteId:s.props.initialSiteId},s.setSite=function(e){s.setState({siteId:e})},s.onClose=function(e){"mainAction"===e&&s.props.mainAction(s.state.siteId),s.props.hide()},s.onButtonClick=function(){s.props.mainAction(s.state.siteId)},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"getMainLink",value:function(){var e=this.props.getMainUrl&&this.props.getMainUrl(this.state.siteId);return e?_.default.createElement(S.default,{primary:!0,href:e,onClick:this.onButtonClick},this.props.mainActionLabel):{action:"mainAction",label:this.props.mainActionLabel,isPrimary:!0}}},{key:"render",value:function(){var e=this.getMainLink(),t=[{action:"back",label:this.props.translate("Back")},e],n=(0,y.default)("site-selector-modal",this.props.className);return _.default.createElement(k.default,{className:n,isVisible:this.props.isVisible,buttons:t,onClose:this.onClose},_.default.createElement("div",{className:"site-selector-modal__content"},this.props.children),_.default.createElement(w.default,{onSiteSelect:this.setSite,selectedSiteId:this.state.siteId,filter:this.props.filter}))}}]),t}(g.Component);M.propTypes={children:h.default.node,filter:h.default.func,hide:h.default.func.isRequired,isVisible:h.default.bool.isRequired,mainAction:h.default.func.isRequired,getMainUrl:h.default.func,mainActionLabel:h.default.string.isRequired,className:h.default.string,translate:h.default.func.isRequired,initialSiteId:h.default.number},t.default=(0,b.connect)(function(e,t){var n=t.filter,s=(0,I.default)(e),o=(0,O.default)(e),r=o.map(function(e){return e.ID});return n&&(r=r.filter(n)),{initialSiteId:(0,j.includes)(r,s)?s:r[0]}})((0,E.localize)(M)),e.exports=t.default},"./client/components/sites-dropdown/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SitesDropdown=void 0;var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/classnames/index.js"),y=s(v),j=n("./node_modules/lodash/lodash.js"),E=n("./node_modules/gridicons/build/index.js"),x=s(E),k=n("./client/blocks/site/index.jsx"),T=s(k),S=n("./client/blocks/site/placeholder.jsx"),C=s(S),w=n("./client/components/site-selector/index.jsx"),P=s(w),I=n("./client/state/selectors/get-primary-site-id.js"),A=s(I),O=t.SitesDropdown=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.selectSite=n.selectSite.bind(n),n.siteFilter=n.siteFilter.bind(n),n.toggleOpen=n.toggleOpen.bind(n),n.onClose=n.onClose.bind(n),n.state={selectedSiteId:n.props.selectedSiteId||n.props.primarySiteId},n}return(0,m.default)(t,e),(0,u.default)(t,[{key:"selectSite",value:function(e){this.props.onSiteSelect(e),this.setState({selectedSiteId:e,open:!1})}},{key:"siteFilter",value:function(e){return this.props.filter(e.ID)}},{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"onClose",value:function(e){this.setState({open:!1}),this.props.onClose&&this.props.onClose(e)}},{key:"render",value:function(){return _.default.createElement("div",{className:(0,y.default)("sites-dropdown",{"is-open":this.state.open})},_.default.createElement("div",{className:"sites-dropdown__wrapper"},_.default.createElement("div",{className:"sites-dropdown__selected",onClick:this.toggleOpen},this.props.isPlaceholder?_.default.createElement(C.default,null):_.default.createElement(T.default,{siteId:this.state.selectedSiteId,indicator:!1}),_.default.createElement(x.default,{icon:"chevron-down"})),this.state.open&&_.default.createElement(P.default,{autoFocus:!0,onClose:this.onClose,onSiteSelect:this.selectSite,selected:this.state.selectedSiteId,
hideSelected:!0,filter:this.props.filter&&this.siteFilter})))}}]),t}(g.PureComponent);O.propTypes={selectedSiteId:h.default.number,showAllSites:h.default.bool,onClose:h.default.func,onSiteSelect:h.default.func,filter:h.default.func,isPlaceholder:h.default.bool,selectedSite:h.default.object},O.defaultProps={showAllSites:!1,onClose:j.noop,onSiteSelect:j.noop,isPlaceholder:!1},t.default=(0,b.connect)(function(e){return{primarySiteId:(0,A.default)(e)}})(O)},"./client/components/sticky-panel/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/prop-types/index.js"),g=s(h),_=n("./node_modules/react-dom/index.js"),b=s(_),v=n("./node_modules/react/react.js"),y=s(v),j=n("./node_modules/classnames/index.js"),E=s(j),x=n("./client/lib/viewport/index.js"),k=s(x),T=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={isSticky:!1,spacerHeight:0,blockWidth:0},s.onWindowScroll=function(){s.rafHandle=window.requestAnimationFrame(s.updateIsSticky)},s.onWindowResize=function(){s.setState({spacerHeight:s.state.isSticky?b.default.findDOMNode(s).clientHeight:0,blockWidth:s.state.isSticky?b.default.findDOMNode(s).clientWidth:0})},s.updateIsSticky=function(){var e=window.pageYOffset>s.threshold;return s.props.minLimit!==!1&&s.props.minLimit>=window.innerWidth||k.default.isMobile()?s.setState({isSticky:!1}):void(e!==s.state.isSticky&&s.setState({isSticky:e,spacerHeight:e?b.default.findDOMNode(s).clientHeight:0,blockWidth:e?b.default.findDOMNode(s).clientWidth:0}))},s.getBlockStyle=function(){var e;if(s.state.isSticky)return e=document.getElementById("header").getBoundingClientRect().height,{top:e,width:s.state.blockWidth}},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.threshold=b.default.findDOMNode(this).offsetTop,this.throttleOnResize=(0,f.throttle)(this.onWindowResize,200),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.throttleOnResize),this.updateIsSticky()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.throttleOnResize),window.cancelAnimationFrame(this.rafHandle)}},{key:"render",value:function(){var e=(0,E.default)("sticky-panel",this.props.className,{"is-sticky":this.state.isSticky});return y.default.createElement("div",{className:e},y.default.createElement("div",{className:"sticky-panel__content",style:this.getBlockStyle()},this.props.children),y.default.createElement("div",{className:"sticky-panel__spacer",style:{height:this.state.spacerHeight}}))}}]),t}(y.default.Component);T.displayName="StickyPanel",T.propTypes={minLimit:g.default.oneOfType([g.default.bool,g.default.number])},T.defaultProps={minLimit:!1},t.default=T,e.exports=t.default},"./client/components/sub-masterbar-nav/dropdown.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/classnames/index.js"),v=s(b),y=n("./node_modules/gridicons/build/index.js"),j=s(y),E=n("./client/components/sub-masterbar-nav/item.jsx"),x=s(E),k=h.default.shape({label:h.default.string.isRequired,uri:h.default.string.isRequired,icon:h.default.string}),T=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={collapsed:!0},s.renderItem=function(e,t){return _.default.createElement(x.default,{key:t,onClick:s.collapse,label:e.label,icon:e.icon,href:e.uri})},s.toggle=function(){s.setState(function(e){return{collapsed:!e.collapsed}})},s.collapse=function(){s.setState(function(){return{collapsed:!0}})},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.collapse)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.collapse)}},{key:"render",value:function(){var e=(0,v.default)("sub-masterbar-nav__dropdown",{"is-collapsed":this.state.collapsed});return _.default.createElement("div",{className:e},_.default.createElement("div",{className:"sub-masterbar-nav__select",onClick:this.toggle},_.default.createElement(x.default,{isSelected:!0,label:this.props.selected.label,icon:this.props.selected.icon}),_.default.createElement(j.default,{icon:"chevron-down",className:"sub-masterbar-nav__select-icon"})),_.default.createElement("div",{className:"sub-masterbar-nav__wrapper"},_.default.createElement("div",{className:"sub-masterbar-nav__items"},this.props.options.map(this.renderItem))))}}]),t}(g.Component);T.propTypes={selected:k,options:h.default.arrayOf(k)},t.default=T,e.exports=t.default},"./client/components/sub-masterbar-nav/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/lodash/lodash.js"),v=n("./client/components/sub-masterbar-nav/navbar.jsx"),y=s(v),j=n("./client/components/sub-masterbar-nav/dropdown.jsx"),E=s(j),x=h.default.shape({label:h.default.string.isRequired,uri:h.default.string.isRequired,icon:h.default.string}),k=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return _.default.createElement("div",{className:"sub-masterbar-nav"},_.default.createElement(E.default,{selected:this.getSelected()||this.props.fallback,options:this.props.options}),_.default.createElement(y.default,{selected:this.getSelected(),options:this.props.options}))}},{key:"getSelected",value:function(){var e=this;return(0,b.find)(this.props.options,function(t){return t.uri===e.props.uri})}}]),t}(g.Component);k.propTypes={fallback:x,options:h.default.arrayOf(x),uri:h.default.string.isRequired},k.defaultProps={options:[]},t.default=k,e.exports=t.default},"./client/components/sub-masterbar-nav/item.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var o=n("./node_modules/prop-types/index.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/classnames/index.js"),u=s(l),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/gridicons/build/index.js"),p=s(c),m=t.Item=function(e){var t=e.isSelected,n=e.onClick,s=e.label,o=e.icon,r=e.href,i=(0,u.default)("sub-masterbar-nav__item",{"is-selected":t});return a.default.createElement("a",{href:r,className:i,onClick:n,"aria-selected":t,role:"menuitem"},a.default.createElement(p.default,{className:"sub-masterbar-nav__icon",icon:o,size:24}),a.default.createElement("div",{className:"sub-masterbar-nav__label"},s))};m.propTypes={isSelected:r.default.bool,onClick:r.default.func,label:r.default.string.isRequired,icon:r.default.string,href:r.default.string},m.defaultProps={isSelected:!1,onClick:d.noop,icon:"star"},t.default=m},"./client/components/sub-masterbar-nav/navbar.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-dom/index.js"),v=n("./node_modules/classnames/index.js"),y=s(v),j=n("./node_modules/gridicons/build/index.js"),E=s(j),x=n("./client/components/sub-masterbar-nav/item.jsx"),k=s(x),T=50,S=110,C=h.default.shape({label:h.default.string.isRequired,uri:h.default.string.isRequired,icon:h.default.string}),w=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={collapsed:!0,foldable:!1},s.renderItem=function(e,t){return _.default.createElement(k.default,{key:t,isSelected:e===s.props.selected,label:e.label,icon:e.icon,href:e.uri})},s.toggleList=function(){s.setState(function(e){return{collapsed:!e.collapsed}})},s.onResize=function(){var e=(0,b.findDOMNode)(s).offsetWidth;s.setState(function(t,n){return{foldable:e<n.options.length*S+T}})},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.onResize(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=(0,y.default)("sub-masterbar-nav__navbar",{"is-collapsed":this.state.collapsed}),t=(0,y.default)("sub-masterbar-nav__ellipsis",{"is-open":!this.state.collapsed});return _.default.createElement("div",{className:e},_.default.createElement("div",{className:"sub-masterbar-nav__wrapper"},_.default.createElement("div",{className:"sub-masterbar-nav__items"},this.props.options.map(this.renderItem))),this.state.foldable&&_.default.createElement("div",{className:"sub-masterbar-nav__switch"},_.default.createElement(E.default,{icon:"ellipsis",className:t,onClick:this.toggleList})))}}]),t}(g.Component);w.propTypes={selected:C,options:h.default.arrayOf(C)},t.default=w,e.exports=t.default},"./client/components/theme/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=void 0;var o=n("./node_modules/babel-runtime/core-js/object/keys.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/prop-types/index.js"),y=s(v),j=n("./node_modules/classnames/index.js"),E=s(j),x=n("./node_modules/lodash/lodash.js"),k=n("./node_modules/gridicons/build/index.js"),T=s(k),S=n("./node_modules/i18n-calypso/index.js"),C=n("./client/components/card/index.jsx"),w=s(C),P=n("./client/components/theme/more-button.jsx"),I=s(P),A=n("./client/components/pulsing-dot/index.jsx"),O=s(A),M=n("./client/components/ribbon/index.jsx"),R=s(M),U=n("./client/components/info-popover/index.jsx"),N=s(U),L=n("./client/components/button/index.jsx"),q=s(L),D=n("./client/lib/analytics/track-component-view/index.jsx"),F=s(D),z=n("./client/state/analytics/actions.js"),W=t.Theme=function(e){function t(){var e,n,s,o;(0,u.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=s=(0,m.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(i))),s.onScreenshotClick=function(){s.props.onScreenshotClick(s.props.theme.id,s.props.index)},s.isBeginnerTheme=function(){var e=s.props.theme,t=(0,x.get)(e,["taxonomies","theme_skill-level"]);return(0,x.some)(t,{slug:"beginner"})},s.renderPlaceholder=function(){return _.default.createElement(w.default,{className:"theme is-placeholder"},_.default.createElement("div",{className:"theme__content"}))},s.renderHover=function(){if(s.props.screenshotClickUrl||s.props.onScreenshotClick)return _.default.createElement("a",{className:"theme__active-focus",href:s.props.screenshotClickUrl,onClick:s.onScreenshotClick},_.default.createElement("span",null,s.props.actionLabel))},s.renderInstalling=function(){if(s.props.installing)return _.default.createElement("div",{className:"theme__installing"},_.default.createElement(O.default,{active:!0}))},s.onUpsellClick=function(){s.props.recordTracksEvent("calypso_upgrade_nudge_cta_click",{cta_name:"theme-upsell-popup",theme:s.props.theme.id})},o=n,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"shouldComponentUpdate",value:function(e){return e.theme.id!==this.props.theme.id||e.active!==this.props.active||e.price!==this.props.price||e.installing!==this.props.installing||!(0,x.isEqual)((0,r.default)(e.buttonContents),(0,r.default)(this.props.buttonContents))||e.screenshotClickUrl!==this.props.screenshotClickUrl||e.onScreenshotClick!==this.props.onScreenshotClick||e.onMoreButtonClick!==this.props.onMoreButtonClick}},{key:"render",value:function(){var e=this.props,t=e.active,n=e.price,s=e.theme,o=e.translate,r=e.upsellUrl,i=s.name,a=s.screenshot,l=(0,E.default)("theme",{"is-active":t,"is-actionable":!(!this.props.screenshotClickUrl&&!this.props.onScreenshotClick)}),u=/\d/g.test(n),d=u&&r,c=(0,E.default)("theme__badge-price",{"theme__badge-price-upgrade":!u,"theme__badge-price-test":d}),p=0===this.props.index?"theme__firstscreenshot":null;if(this.props.isPlaceholder)return this.renderPlaceholder();var m="calypso_upgrade_nudge_impression",f={cta_name:"theme-upsell",theme:s.id},h={cta_name:"theme-upsell-popup",theme:s.id},g=d&&_.default.createElement("span",{className:"theme__upsell"},_.default.createElement(F.default,{eventName:m,eventProperties:f}),_.default.createElement(N.default,{icon:"star",className:"theme__upsell-icon",position:"top left"},_.default.createElement(F.default,{eventName:m,eventProperties:h}),_.default.createElement("div",{className:"theme__upsell-popover"},_.default.createElement("h2",{className:"theme__upsell-heading"},o("Use this theme at no extra cost on our Premium or Business Plan")),_.default.createElement(q.default,{onClick:this.onUpsellClick,className:"theme__upsell-cta",primary:!0,href:r},o("Upgrade Now")))));return _.default.createElement(w.default,{className:l},this.isBeginnerTheme()&&_.default.createElement(R.default,{className:"theme__ribbon",color:"green"},o("Beginner")),_.default.createElement("div",{className:"theme__content"},this.renderHover(),_.default.createElement("a",{href:this.props.screenshotClickUrl},this.renderInstalling(),a?_.default.createElement("img",{className:"theme__img",src:a+"?w=340",srcSet:a+"?w=340 1x, "+a+"?w=680 2x",onClick:this.onScreenshotClick,id:p}):_.default.createElement("div",{className:"theme__no-screenshot"},_.default.createElement(T.default,{icon:"themes",size:48}))),_.default.createElement("div",{className:"theme__info"},_.default.createElement("h2",{className:"theme__info-title"},i),t&&_.default.createElement("span",{className:"theme__badge-active"},o("Active",{context:"singular noun, the currently active theme"})),_.default.createElement("span",{className:c},n),g,(0,x.isEmpty)(this.props.buttonContents)?null:_.default.createElement(I.default,{index:this.props.index,themeId:this.props.theme.id,active:this.props.active,onMoreButtonClick:this.props.onMoreButtonClick,options:this.props.buttonContents}))))}}]),t}(g.Component);W.propTypes={theme:y.default.shape({id:y.default.string.isRequired,name:y.default.string.isRequired,screenshot:y.default.string,author:y.default.string,author_uri:y.default.string,demo_uri:y.default.string,stylesheet:y.default.string,taxonomies:y.default.object}),active:y.default.bool,price:y.default.string,installing:y.default.bool,isPlaceholder:y.default.bool,screenshotClickUrl:y.default.string,onScreenshotClick:y.default.func,onMoreButtonClick:y.default.func,buttonContents:y.default.objectOf(y.default.shape({label:y.default.string,header:y.default.string,action:y.default.func,getUrl:y.default.func})),index:y.default.number,actionLabel:y.default.string,translate:y.default.func},W.defaultProps={isPlaceholder:!1,buttonContents:{},onMoreButtonClick:x.noop,actionLabel:"",active:!1};var B=null,H={recordTracksEvent:z.recordTracksEvent};t.default=(0,b.connect)(B,H)((0,S.localize)(W))},"./client/components/theme/more-button.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/react/react.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/classnames/index.js"),v=s(b),y=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/gridicons/build/index.js"),E=s(j),x=n("./client/components/popover/menu.jsx"),k=s(x),T=n("./client/components/popover/menu-item.jsx"),S=s(T),C=n("./client/lib/url/index.js"),w=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={showPopover:!1},n.togglePopover=n.togglePopover.bind(n),n.closePopover=n.closePopover.bind(n),n.onClick=n.onClick.bind(n),n.onPopoverActionClick=n.onPopoverActionClick.bind(n),n}return(0,m.default)(t,e),(0,u.default)(t,[{key:"togglePopover",value:function(){this.setState({showPopover:!this.state.showPopover}),!this.state.showPopover&&this.props.onMoreButtonClick(this.props.themeId,this.props.index,"popup_open")}},{key:"closePopover",value:function(e){this.setState({showPopover:!1}),(0,y.isFunction)(e)&&e()}},{key:"popoverAction",value:function(e,t){e(this.props.themeId),this.props.onMoreButtonClick(this.props.themeId,this.props.index,"popup_"+t)}},{key:"onPopoverActionClick",value:function(e,t){var n=this;return function(){return n.popoverAction(e,t)}}},{key:"focus",value:function(e){e.target.focus()}},{key:"onClick",value:function(e,t){return this.closePopover.bind(this,this.onPopoverActionClick(e,t))}},{key:"render",value:function(){var e=(0,v.default)("theme__more-button",{"is-active":this.props.active},{"is-open":this.state.showPopover});return h.default.createElement("span",{className:e},h.default.createElement("button",{ref:"more",onClick:this.togglePopover},h.default.createElement(E.default,{icon:"ellipsis",size:24})),h.default.createElement(k.default,{context:this.refs&&this.refs.more,isVisible:this.state.showPopover,onClose:this.closePopover,position:"top left"},(0,y.map)(this.props.options,function(e,t){if(e.separator)return h.default.createElement("hr",{key:t,className:"popover__hr"});if(e.getUrl){var n=e.getUrl(this.props.themeId);return h.default.createElement("a",{className:"theme__more-button-menu-item popover__menu-item",onMouseOver:this.focus,onClick:this.onClick(e.action,e.label),key:e.label,href:n,target:(0,C.isOutsideCalypso)(n)?"_blank":null},e.label)}return e.action?h.default.createElement(S.default,{key:e.label,action:this.onPopoverActionClick(e.action,e.label)},e.label):null}.bind(this))))}}]),t}(f.Component);w.propTypes={themeId:_.default.string,index:_.default.number,onMoreButtonClick:_.default.func,options:_.default.objectOf(_.default.shape({label:_.default.string,header:_.default.string,action:_.default.func,getUrl:_.default.func})).isRequired,active:_.default.bool},t.default=w,e.exports=t.default},"./client/components/themes-list/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ThemesList=void 0;var o=n("./node_modules/prop-types/index.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/create-react-class/index.js"),u=s(l),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/i18n-calypso/index.js"),p=n("./client/components/theme/index.jsx"),m=s(p),f=n("./client/components/empty-content/index.jsx"),h=s(f),g=n("./client/lib/mixins/infinite-scroll/index.js"),_=s(g),b=n("./client/state/themes/constants.js"),v=t.ThemesList=(0,u.default)({displayName:"ThemesList",mixins:[(0,_.default)("fetchNextPage")],propTypes:{themes:r.default.array.isRequired,emptyContent:r.default.element,loading:r.default.bool.isRequired,fetchNextPage:r.default.func.isRequired,getButtonOptions:r.default.func,onScreenshotClick:r.default.func.isRequired,onMoreButtonClick:r.default.func,getActionLabel:r.default.func,isActive:r.default.func,getPrice:r.default.func,isInstalling:r.default.func,translate:r.default.func,placeholderCount:r.default.number},fetchNextPage:function(e){this.props.fetchNextPage(e)},getDefaultProps:function(){return{loading:!1,themes:[],fetchNextPage:d.noop,placeholderCount:b.DEFAULT_THEME_QUERY.number,optionsGenerator:function(){return[]},getActionLabel:function(){return""},isActive:function(){return!1},getPrice:function(){return""},isInstalling:function(){return!1}}},shouldComponentUpdate:function(e){return e.loading!==this.props.loading||!(0,d.isEqual)(e.themes,this.props.themes)||e.getButtonOptions!==this.props.getButtonOptions||e.getScreenshotUrl!==this.props.getScreenshotUrl||e.onScreenshotClick!==this.props.onScreenshotClick||e.onMoreButtonClick!==this.props.onMoreButtonClick},renderTheme:function(e,t){return a.default.createElement(m.default,{key:"theme-"+e.id,buttonContents:this.props.getButtonOptions(e.id),screenshotClickUrl:this.props.getScreenshotUrl&&this.props.getScreenshotUrl(e.id),onScreenshotClick:this.props.onScreenshotClick,onMoreButtonClick:this.props.onMoreButtonClick,actionLabel:this.props.getActionLabel(e.id),index:t,theme:e,active:this.props.isActive(e.id),price:this.props.getPrice(e.id),installing:this.props.isInstalling(e.id),upsellUrl:this.props.upsellUrl})},renderLoadingPlaceholders:function(){return(0,d.times)(this.props.placeholderCount,function(e){return a.default.createElement(m.default,{key:"placeholder-"+e,theme:{id:"placeholder-"+e,name:"Loading…"},isPlaceholder:!0})})},renderTrailingItems:function(){var e=11;return(0,d.times)(e,function(e){return a.default.createElement("div",{className:"themes-list__spacer",key:"themes-list__spacer-"+e})})},renderEmpty:function(){return this.props.emptyContent||a.default.createElement(h.default,{illustration:"/calypso/images/illustrations/no-themes-drake.svg",title:this.props.translate("Sorry, no themes found."),line:this.props.translate("Try a different search or more filters?")})},render:function(){return this.props.loading||0!==this.props.themes.length?a.default.createElement("div",{className:"themes-list"},this.props.themes.map(this.renderTheme),this.props.loading&&this.renderLoadingPlaceholders(),this.renderTrailingItems()):this.renderEmpty()}});t.default=(0,c.localize)(v)},"./client/components/wpadmin-auto-login/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var s=new Image;n<9&&(s.onerror=function(){setTimeout(o.bind(null,e,t,n+1),t*n)}),s.src=e}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=s(r),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=s(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=s(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=s(c),m=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(m),h=n("./node_modules/prop-types/index.js"),g=s(h),_=n("./node_modules/react/react.js"),b=n("./node_modules/lodash/lodash.js"),v=function(e){function t(){return(0,l.default)(this,t),(0,p.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=(0,b.get)(this.props.site,"URL"),t=this.getPixelUrl(e);setTimeout(o.bind(null,t,this.props.delay,0),this.props.delay)}},{key:"getPixelUrl",value:function(e){var t=encodeURI(e+"/wp-includes/images/blank.gif");return e+"/wp-login.php?redirect_to="+t}},{key:"render",value:function(){return null}}]),t}(_.Component);v.propTypes={site:g.default.object,delay:g.default.number},v.defaultProps={delay:3e3},t.default=v,e.exports=t.default},"./client/lib/analytics/page-view-tracker/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PageViewTracker=void 0;var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/debug/browser.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/react/react.js"),v=s(b),y=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/react-redux/es/index.js"),E=n("./client/state/analytics/actions.js"),x=(0,h.default)("calypso:analytics:PageViewTracker"),k=t.PageViewTracker=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={timer:null},s.queuePageView=function(){var e=s.props,t=e.delay,n=void 0===t?0:t,o=e.path,r=e.recorder,i=void 0===r?y.noop:r,a=e.title;if(x('Queuing Page View: "'+a+'" at "'+o+'" with '+n+"ms delay"),!s.state.timer)return n?void s.setState({timer:setTimeout(function(){return i(o,a)},n)}):i(o,a)},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){x("Component has mounted."),this.queuePageView()}},{key:"componentWillUnmount",value:function(){x("Component has unmounted."),clearTimeout(this.state.timer)}},{key:"render",value:function(){return null}}]),t}(v.default.Component);k.displayName="PageViewTracker",k.propTypes={delay:_.default.number,path:_.default.string.isRequired,recorder:_.default.func,title:_.default.string.isRequired};var T=function(e){return{recorder:(0,y.flowRight)(e,E.recordPageView)}};t.default=(0,j.connect)(null,T)(k)},"./client/lib/automated-transfer/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MAX_UPLOAD_ZIP_SIZE=5e7},"./client/lib/build-url/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=i.default.parse(e,!0);return t?n.query.s=t:delete n.query.s,n=(0,o.pick)(n,"pathname","hash","query"),i.default.format(n).replace(/\%20/g,"+")};var o=n("./node_modules/lodash/lodash.js"),r=n("./node_modules/url/url.js"),i=s(r);e.exports=t.default},"./client/lib/mixins/infinite-scroll/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{componentDidMount:function(){this.checkScrollPositionHandler=(0,s.throttle)(this.checkScrollPosition.bind(this,{triggeredByScroll:!0}),o),window.addEventListener("scroll",this.checkScrollPositionHandler),this.checkScrollPosition({triggeredByScroll:!1})},componentDidUpdate:function(){this.checkScrollPosition({triggeredByScroll:!1})},componentWillUnmount:function(){window.removeEventListener("scroll",this.checkScrollPositionHandler)},checkScrollPosition:function(t){var n=this,s=window.pageYOffset,o=document.body.scrollHeight,r=window.innerHeight,i=2*r,a=t.triggeredByScroll;s>=o-r-i&&(s>r&&(a=!0),window.requestAnimationFrame(function(){n[e]({triggeredByScroll:a})}))}}};var s=n("./node_modules/lodash/lodash.js"),o=400;e.exports=t.default},"./client/lib/olark-events/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/debug/browser.js"),r=s(o),i=n("./client/lib/mixins/emitter/index.js"),a=s(i),l=["api.box.onShow","api.box.onHide","api.box.onExpand","api.box.onShrink","api.chat.onReady","api.chat.onOperatorsAvailable","api.chat.onOperatorsAway","api.chat.onBeginConversation","api.chat.onMessageToOperator","api.chat.onMessageToVisitor","api.chat.onCommandFromOperator","api.chat.onOfflineMessageToOperator"],u=(0,r.default)("calypso:olark:events"),d={},c=!1,p=!1,m={initialize:function(){var e=this;return c?void u("Already initalized"):(c=!0,l.forEach(function(t){return e.addOlarkEventListener(t)}),void u("Initalized"))},addOlarkEventListener:function(e){u("Adding olark event listener: %s",e),d[e]||(d[e]=!0)},olarkEventListener:function(e){u("Olark event: %s",e);for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.emit.apply(this,[e].concat(n))}};(0,a.default)(m),m.once("api.chat.onReady",function(){p=!0}),m.on("newListener",function(e,t){p&&"api.chat.onReady"===e&&t()}),t.default=m,e.exports=t.default},"./client/lib/olark-store/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./client/dispatcher/index.js"),r=s(o),i=n("./client/lib/olark-store/constants.js"),a={setUserEligibility:function(e){r.default.handleServerAction({isUserEligible:e,type:i.action.OLARK_USER_ELIGIBILITY})},setLocale:function(e){r.default.handleServerAction({locale:e,type:i.action.OLARK_LOCALE})},setReady:function(){r.default.handleServerAction({type:i.action.OLARK_READY})},setOperatorsAvailable:function(){r.default.handleServerAction({type:i.action.OLARK_OPERATORS_AVAILABLE})},setOperatorsAway:function(){r.default.handleServerAction({type:i.action.OLARK_OPERATORS_AWAY})},setClosed:function(e){r.default.handleServerAction({isSupportClosed:e,type:i.action.OLARK_SET_CLOSED})},setExpanded:function(e){r.default.handleServerAction({isOlarkExpanded:e,type:i.action.OLARK_SET_EXPANDED})},updateDetails:function(){},sendNotificationToVisitor:function(){},sendNotificationToOperator:function(){},expandBox:function(){},shrinkBox:function(){},hideBox:function(){},focusBox:function(){}};t.default=a,e.exports=t.default},"./client/lib/olark-store/constants.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.action=void 0;var o=n("./node_modules/key-mirror/index.js"),r=s(o);t.action=(0,r.default)({OLARK_READY:null,OLARK_OPERATORS_AWAY:null,OLARK_OPERATORS_AVAILABLE:null,OLARK_DETAILS:null,OLARK_LOCALE:null,OLARK_USER_ELIGIBILITY:null,OLARK_SET_CLOSED:null,
OLARK_SET_EXPANDED:null})},"./client/lib/olark-store/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/assign.js"),r=s(o),i=n("./client/lib/store/index.js"),a=n("./client/lib/olark-store/constants.js"),l={isOperatorAvailable:!1,isOlarkReady:!1,isUserEligible:!1,isOlarkExpanded:!1,isSupportClosed:!1,locale:"en",details:{}},u=(0,i.createReducerStore)(function(e,t){var n=void 0,s=t.action;switch(s.type){case a.action.OLARK_USER_ELIGIBILITY:n={isUserEligible:s.isUserEligible};break;case a.action.OLARK_LOCALE:n={locale:s.locale};break;case a.action.OLARK_READY:n={isOlarkReady:!0};break;case a.action.OLARK_OPERATORS_AWAY:n={isOperatorAvailable:!1};break;case a.action.OLARK_OPERATORS_AVAILABLE:n={isOperatorAvailable:!0};break;case a.action.OLARK_SET_EXPANDED:n={isOlarkExpanded:s.isOlarkExpanded};break;case a.action.OLARK_DETAILS:n={details:s.details};break;case a.action.OLARK_SET_CLOSED:n={isSupportClosed:s.isSupportClosed}}return n?(0,r.default)({},e,n):e},l);t.default=u,e.exports=t.default},"./client/lib/olark/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/promise.js"),r=s(o),i=n("./node_modules/debug/browser.js"),a=s(i),l=n("./client/config/index.js"),u=s(l),d=n("./node_modules/i18n-calypso/index.js"),c=s(d),p=n("./client/lib/wp/browser.js"),m=s(p),f=n("./client/lib/mixins/emitter/index.js"),h=s(f),g=n("./client/lib/user/index.js"),_=s(g),b=n("./client/notices/index.js"),v=s(b),y=n("./client/lib/olark-events/index.js"),j=s(y),E=n("./client/lib/olark-store/index.js"),x=s(E),k=n("./client/lib/olark-store/actions.js"),T=s(k),S=n("./client/state/ui/olark/actions.js"),C=(0,a.default)("calypso:olark"),w=(0,_.default)(),P=m.default.undocumented(),I={apiId:1,eligibilityKey:"SupportChat",operatorsAvailableKey:"OlarkOperatorsAvailable",conversationStarted:!1,operatorAvailable:!1,userType:"Unknown",initialize:function(e){var t=this;C("Initializing Olark Live Chat"),this.getOlarkConfiguration().then(function(n){return t.configureOlark(n,e)}).catch(function(e){return t.handleError(e)})},handleError:function(e){e&&e.message&&"authorization_required"!==e.error&&v.default.error(e.message)},getOlarkConfiguration:function(){return new r.default(function(e,t){C("Using rest api to get olark configuration");var n=(0,u.default)("client_slug");P.getOlarkConfiguration(n,function(n,s){return n?void t(n):void e(s)})})},configureOlark:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],s=w.get(),o=["api.chat.onReady","api.chat.onOperatorsAway","api.chat.onOperatorsAvailable","api.chat.onBeginConversation","api.chat.onMessageToVisitor","api.chat.onMessageToOperator","api.chat.onCommandFromOperator"],r=["api.box.onShow","api.box.onExpand","api.box.onHide","api.box.onShrink","api.chat.onMessageToVisitor"],i=["api.chat.onReady","api.chat.onBeginConversation","api.chat.onMessageToVisitor","api.chat.onMessageToOperator","api.chat.onCommandFromOperator","api.chat.onOfflineMessageToOperator"];j.default.initialize(),j.default.once("api.chat.onReady",T.default.setReady),j.default.once("api.chat.onReady",function(){return n((0,S.olarkReady)())}),j.default.on("api.chat.onOperatorsAway",T.default.setOperatorsAway),j.default.on("api.chat.onOperatorsAway",function(){return n((0,S.operatorsAway)())}),j.default.on("api.chat.onOperatorsAvailable",T.default.setOperatorsAvailable),j.default.on("api.chat.onOperatorsAvailable",function(){return n((0,S.operatorsAvailable)())}),r.forEach(this.hookExpansionEventToStoreSync.bind(this)),o.forEach(function(e){return j.default.on(e,T.default.updateDetails)}),i.forEach(function(t){return j.default.on(t,function(){setTimeout(function(){return e.updateOlarkFormatting(s.display_name,s.avatar_URL)},0)})}),C("Olark code loaded, beginning configuration"),j.default.on("api.chat.onCommandFromOperator",function(e){"end"===e.command.name&&T.default.sendNotificationToVisitor(c.default.translate("Your live chat has ended. We'll send a transcript to %(email)s.",{args:{email:s.email}}))}),this.setOlarkOptions(s,t),n((0,S.setChatAvailability)(t.availability))},updateOlarkGroupAndEligibility:function(){var e=this;this.getOlarkConfiguration().then(function(e){var t="undefined"==typeof e.isUserEligible||e.isUserEligible;T.default.setUserEligibility(t)}).catch(function(t){return e.handleError(t)})},syncStoreWithExpandedState:function(){var e=!!document.querySelector(".olrk-state-expanded");e!==x.default.get().isOlarkExpanded&&T.default.setExpanded(e)},hookExpansionEventToStoreSync:function(e){j.default.on(e,this.syncStoreWithExpandedState)},setOlarkOptions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.group||(0,u.default)("olark").business_group_id,s="undefined"==typeof t.isUserEligible||t.isUserEligible,o=t.nickname||e.username+" | "+this.userType;C("Nickname: "+o),C("Group: "+n),T.default.setUserEligibility(s),T.default.setClosed(t.isClosed),t.locale&&T.default.setLocale(t.locale)},updateOlarkFormatting:function(e,t){var n,s,o,r,i,a,l,u,d,p,m,f=document.querySelectorAll(".hbl_pal_local_fg, .hbl_pal_remote_fg:not(.habla_conversation_notification_nickname)"),h=document.querySelectorAll(".olrk_avatar"),g={},_="//gravatar.com/avatar?s=32&d=identicon&r=PG",b=c.default.translate("staff");for(i=0;i<h.length;i++)a=h.item(i),l=a.parentElement.querySelector(".hbl_pal_remote_fg"),l&&(g[l.originalTextContent||l.textContent]=a.getAttribute("src"));for(d=0;d<f.length;d++)p=f.item(d),n=p.className.replace(/.*(habla_conversation_person\d+).*/,"$1"),m=!!p.className.match(/hbl_pal_local_fg/),u=p.textContent,s!==n?(m?p.textContent=e:p.querySelector(".staff-label")||(p.originalTextContent=p.textContent,p.textContent=p.textContent.replace(":",""),r=document.createElement("span"),r.setAttribute("class","staff-label"),r.appendChild(document.createTextNode(b)),p.appendChild(r)),p.querySelector(".gravatar")||(o=document.createElement("img"),o.setAttribute("class","gravatar"),m?o.setAttribute("src",t):o.setAttribute("src",g[u]||_),p.insertBefore(o,p.firstChild)),s=n):p.parentElement.removeChild(p)}};(0,h.default)(I),t.default=I,e.exports=t.default},"./client/lib/track-scroll-page/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s){r.default.ga.recordEvent(n,"Loaded Next Page","page",s),r.default.pageView.record(e,t),r.default.mc.bumpStat("newdash_pageviews","scroll")};var o=n("./client/lib/analytics/index.js"),r=s(o);e.exports=t.default},"./client/lib/wporg/index.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(){var e,t;return e=l.default.getLocaleSlug(),t=(0,c.find)((0,h.default)("languages"),{langSlug:e}).wpLocale,""===t&&(t=e),t}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/debug/browser.js"),i=s(r),a=n("./node_modules/i18n-calypso/index.js"),l=s(a),u=n("./node_modules/superagent/lib/client.js"),d=s(u),c=n("./node_modules/lodash/lodash.js"),p=n("./client/lib/wporg/jsonp.js"),m=s(p),f=n("./client/config/index.js"),h=s(f),g=(0,i.default)("wporg"),_="https://api.wordpress.org/plugins/info/1.1/?action=query_plugins",b=24,v="all",y=1,j="https://api.wordpress.org/themes/info/1.1/";t.default={fetchPluginInformation:function(e,t){var n,s={fields:"icons,banners,compatibility,ratings,-contributors",locale:o()};e=e.replace(new RegExp(".php$"),""),n="https://api.wordpress.org/plugins/info/1.0/"+e+".jsonp",(0,m.default)(n,s,function(e,n){return e?(g("error downloading plugin details from .org: %s",e),void t(e,null)):n&&n.slug?void t(null,n):(g("unrecognized format fetching plugin details from .org: %s",n),void t(new Error("Unrecognized response format"),null))})},fetchPluginsList:function(e,t){var n;e.page=e.page||y,e.pageSize=e.pageSize||b,e.category=e.category||v,e.search=e.search,n="request[page]="+e.page+"&request[per_page]="+e.pageSize+"&request[fields][icons]=1&request[fields][banners]=1&request[fields][compatibility]=1&request[fields][tested]=0&request[fields][requires]=0&request[fields][sections]=0",n+=e.search?"&request[search]="+e.search:"&request[browse]="+e.category,d.default.post(_).set("Accept","application/json").send(encodeURI(n)).end(function(e,n){t(e,n.body)})},fetchThemeInformation:function(e){var t={action:"theme_information","request[fields][extended_author]":!0,"request[slug]":e};return d.default.get(j).set("Accept","application/json").query(t).then(function(e){var t=e.body;return t})},fetchThemesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,n=e.page,s=e.number,o={action:"query_themes","request[fields][extended_author]":!0,"request[search]":t,"request[page]":n,"request[per_page]:":s};return d.default.get(j).set("Accept","application/json").query(o).then(function(e){var t=e.body;return t})}},e.exports=t.default},"./client/lib/wporg/jsonp.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(){}function r(e,t,n){function s(){i.parentNode&&i.parentNode.removeChild(i),window[l]=o,a&&clearTimeout(a)}function r(){window[l]&&s()}var i,a,l,p="__jp",m=6e4,f=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head;return l=p+c++,m&&(a=setTimeout(function(){s(),n&&n(new Error("Timeout"))},m)),window[l]=function(e){d("jsonp got",e),s(),n&&n(null,e)},e+="="+f(l)+"?"+u.default.stringify(t),d('jsonp req "%s"',e),i=document.createElement("script"),i.src=e,h.parentNode.insertBefore(i,h),r}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/debug/browser.js"),a=s(i),l=n("./node_modules/qs/lib/index.js"),u=s(l),d=(0,a.default)("jsonp");t.default=r;var c=0;e.exports=t.default},"./client/my-sites/sidebar-navigation/sidebar-navigation.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/react.js"),r=s(o),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/i18n-calypso/index.js"),l=n("./client/components/sidebar-navigation/index.jsx"),u=s(l),d=n("./client/blocks/site-icon/index.jsx"),c=s(d),p=n("./client/state/ui/selectors.js"),m=function(e){var t=e.site,n=e.translate,s=n("All Sites"),o="all-sites";return t&&(s=t.title,o=null),r.default.createElement(u.default,{linkClassName:o,sectionName:"site",sectionTitle:s},t&&r.default.createElement(c.default,{site:t}))};t.default=(0,i.connect)(function(e){return{site:(0,p.getSelectedSite)(e)}})((0,a.localize)(m)),e.exports=t.default},"./client/my-sites/themes/controller.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.params,n=t.tier,s=t.filter,o=t.vertical,r=t.site_id,i=(0,A.getAnalyticsData)(e.path,n,r),a=i.basePath,l=i.analyticsPageTitle,u=function(){(0,C.default)(a,l,"Themes")};return{tier:n,filter:s,vertical:o,analyticsPageTitle:l,analyticsPath:a,search:e.query.s,pathName:e.pathname,trackScrollPage:u}}function r(e,t){(0,m.startsWith)(e.prevPath,"/themes")&&!(0,m.startsWith)(e.prevPath,"/themes/upload")&&e.store.dispatch((0,P.setBackPath)(e.prevPath)),e.primary=_.default.createElement(T.default,null),t()}function i(e,t){"undefined"!=typeof window&&window.scrollTo(0,0);var n=e.params.site_id?v.default:j.default;e.primary=_.default.createElement(n,o(e)),t()}function a(e,t){if(e.isServerSide&&!(0,m.isEmpty)(e.query))return t();var n=o(e);e.primary=_.default.createElement(x.default,n),t()}function l(e,t){if(!e.isServerSide)return t();var n="wpcom",s={search:e.query.s,tier:e.params.tier,filter:(0,m.compact)([e.params.filter,e.params.vertical]).join(","),page:1,number:w.DEFAULT_THEME_QUERY.number},o=(0,I.getThemesForQuery)(e.store.getState(),n,s);return o?(R("found theme data in cache"),t()):void e.store.dispatch((0,P.requestThemes)(n,s)).then(t).catch(t)}function u(e,t){var n=e.store;if(!(0,m.isEmpty)((0,M.default)(n.getState())))return R("found theme filters in cache"),t();var s=n.subscribe(function(){if(!(0,m.isEmpty)((0,M.default)(n.getState())))return s(),t()});n.dispatch((0,P.requestThemeFilters)())}function d(e){var t=e.res,n=e.params,s=n.site,o=n.search,r=n.tier,i="/themes/"+(0,m.compact)([r,s]).join("/");o?t.redirect(i+"?s="+o):t.redirect(i)}function c(e){var t=e.res,n=e.params,s=n.site,o=n.filter,r=n.tier,i=void 0;i=o?[r,"filter",o,s]:[r,s],t.redirect("/themes/"+(0,m.compact)(i).join("/"))}function p(e,t){var n=e.res,s=e.params,o=s.site,r=s.theme,i=s.section;if((0,m.includes)(r,".")||isFinite(r))return t();var a=void 0;"support"===i&&(a="setup"),n.redirect("/theme/"+(0,m.compact)([r,a,o]).join("/"))}Object.defineProperty(t,"__esModule",{value:!0}),t.upload=r,t.loggedIn=i,t.loggedOut=a,t.fetchThemeData=l,t.fetchThemeFilters=u,t.redirectSearchAndType=d,t.redirectFilterAndType=c,t.redirectToThemeDetails=p;var m=n("./node_modules/lodash/lodash.js"),f=n("./node_modules/debug/browser.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./client/my-sites/themes/single-site.jsx"),v=s(b),y=n("./client/my-sites/themes/multi-site.jsx"),j=s(y),E=n("./client/my-sites/themes/logged-out.jsx"),x=s(E),k=n("./client/my-sites/themes/theme-upload/index.jsx"),T=s(k),S=n("./client/lib/track-scroll-page/index.js"),C=s(S),w=n("./client/state/themes/constants.js"),P=n("./client/state/themes/actions.js"),I=n("./client/state/themes/selectors.js"),A=n("./client/my-sites/themes/helpers.js"),O=n("./client/state/selectors/get-theme-filters.js"),M=s(O),R=(0,h.default)("calypso:themes")},"./client/my-sites/themes/current-theme/button.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/classnames/index.js"),v=s(b),y=n("./node_modules/gridicons/build/index.js"),j=s(y),E=n("./client/lib/url/index.js"),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return _.default.createElement("a",{role:"button",className:(0,v.default)("current-theme__button","current-theme__"+this.props.name,{disabled:!this.props.href}),onClick:this.props.onClick.bind(null,this.props.name),href:this.props.href,target:(0,E.isOutsideCalypso)(this.props.href)?"_blank":null},_.default.createElement(j.default,{icon:this.props.icon,size:18}),_.default.createElement("span",{className:"current-theme__button-label"},this.props.label))}}]),t}(_.default.Component);x.displayName="CurrentThemeButton",x.propTypes={name:h.default.string.isRequired,label:h.default.string.isRequired,icon:h.default.string.isRequired,href:h.default.string,onClick:h.default.func},t.default=x,e.exports=t.default},"./client/my-sites/themes/current-theme/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/keys.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/react/react.js"),v=s(b),y=n("./node_modules/classnames/index.js"),j=s(y),E=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),k=n("./node_modules/i18n-calypso/index.js"),T=n("./client/components/card/index.jsx"),S=s(T),C=n("./client/my-sites/themes/current-theme/button.jsx"),w=s(C),P=n("./client/my-sites/themes/theme-options.js"),I=n("./client/my-sites/themes/helpers.js"),A=n("./client/state/themes/selectors.js"),O=n("./client/components/data/query-active-theme/index.jsx"),M=s(O),R=n("./client/components/data/query-canonical-theme/index.jsx"),U=s(R),N=function(e){function t(){var e,n,s,o;(0,u.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=s=(0,m.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(i))),s.trackClick=function(e){return(0,I.trackClick)("current theme",e)},o=n,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentTheme,s=t.currentThemeId,o=t.siteId,i=t.translate,a=v.default.createElement("span",{className:"current-theme__placeholder"},"loading..."),l=n&&n.name?n.name:a,u=(0,x.pickBy)(this.props.options,function(e){return e.icon&&!(e.hideForTheme&&e.hideForTheme(s,o))}),d=n&&n.screenshot,c=!n;return v.default.createElement(S.default,{className:"current-theme"},v.default.createElement(M.default,{siteId:o}),s&&v.default.createElement(U.default,{themeId:s,siteId:o}),v.default.createElement("div",{className:"current-theme__current"},c&&v.default.createElement("div",{className:"current-theme__img-placeholder"}),d&&v.default.createElement("img",{src:n.screenshot+"?w=150",className:"current-theme__img"}),v.default.createElement("span",{className:"current-theme__label"},i("Current Theme")),v.default.createElement("span",{className:"current-theme__name"},l)),v.default.createElement("div",{className:(0,j.default)("current-theme__actions",{"two-buttons":2===(0,r.default)(u).length})},(0,x.map)(u,function(t,n){return v.default.createElement(w.default,{name:n,key:n,label:t.label,icon:t.icon,href:s&&t.getUrl(s),onClick:e.trackClick})})))}}]),t}(b.Component);N.propTypes={options:_.default.objectOf(_.default.shape({label:_.default.string,icon:_.default.string,getUrl:_.default.func})),siteId:_.default.number.isRequired,currentTheme:_.default.object};var L=(0,P.connectOptions)((0,k.localize)(N)),q=function(e){var t=e.siteId,n=e.currentTheme,s=e.currentThemeId;return v.default.createElement(L,{currentTheme:n,currentThemeId:s,siteId:t,source:"current theme"})};t.default=(0,E.connect)(function(e,t){var n=t.siteId,s=(0,A.getActiveTheme)(e,n);return{currentThemeId:s,currentTheme:(0,A.getCanonicalTheme)(e,n,s)}})(q),e.exports=t.default},"./client/my-sites/themes/helpers.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click",s=e+" "+t+" "+n;c.default.ga.recordEvent("Themes",(0,m.default)(s))}function r(e){return(0,f.mapValues)(e,i)}function i(e,t){var n=e.action;return(0,u.default)({},e,{action:function(e){n&&n(e),o("more button",t)}})}function a(e,t,n){var s=(0,h.sectionify)(e),o="Themes";return t&&(s+="/type/:tier"),n&&(s+="/:site_id",o+=" > Single Site"),t&&(o+=" > Type > "+(0,m.default)(t)),{basePath:s,analyticsPageTitle:o}}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/babel-runtime/core-js/object/assign.js"),u=s(l);t.trackClick=o,t.addTracking=r,t.getAnalyticsData=a;var d=n("./client/lib/analytics/index.js"),c=s(d),p=n("./node_modules/to-title-case/index.js"),m=s(p),f=n("./node_modules/lodash/lodash.js"),h=n("./client/lib/route/path.js")},"./client/my-sites/themes/index.web.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)(),n=!!t.get(),s="\\d+|[^\\\\/.]+\\.[^\\\\/]+";if(r.default.isEnabled("manage/themes"))if(n){r.default.isEnabled("manage/themes/upload")&&(e("/themes/upload",u.makeSites,l.makeLayout),e("/themes/upload/:site_id?",u.siteSelection,d.upload,u.makeNavigation,l.makeLayout));var o=["/themes/:tier(free|premium)?/:site_id("+s+")?","/themes/:tier(free|premium)?/filter/:filter/:site_id("+s+")?","/themes/:vertical?/:tier(free|premium)?/:site_id("+s+")?","/themes/:vertical?/:tier(free|premium)?/filter/:filter/:site_id("+s+")?"];e(o,d.fetchThemeFilters,c.validateVertical,c.validateFilters,u.siteSelection,d.loggedIn,u.makeNavigation,l.makeLayout)}else{e("/themes/upload","/themes"),e("/themes/upload/*","/themes");var i=["/themes/:tier(free|premium)?","/themes/:tier(free|premium)?/filter/:filter","/themes/:vertical?/:tier(free|premium)?","/themes/:vertical?/:tier(free|premium)?/filter/:filter"];e(i,d.fetchThemeFilters,c.validateVertical,c.validateFilters,d.loggedOut,l.makeLayout)}};var o=n("./client/config/index.js"),r=s(o),i=n("./client/lib/user/index.js"),a=s(i),l=n("./client/controller/index.web.js"),u=n("./client/my-sites/controller.js"),d=n("./client/my-sites/themes/controller.jsx"),c=n("./client/my-sites/themes/validate-filters.js");e.exports=t.default},"./client/my-sites/themes/jetpack-manage-disabled-message.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/react/react.js"),h=s(f),g=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/i18n-calypso/index.js"),v=n("./client/lib/analytics/index.js"),y=s(v),j=n("./client/components/main/index.jsx"),E=s(j),x=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),k=s(x),T=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),S=s(T),C=n("./client/components/themes-list/index.jsx"),w=s(C),P=n("./client/state/sites/selectors.js"),I=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.clickOnActivate=function(){y.default.ga.recordEvent("Jetpack","Activate manage","Site",s.props.siteId)},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"renderMockThemes",value:function(){var e=[{name:"Dyad",slug:"dyad"},{name:"Independent Publisher",slug:"independent-publisher"},{name:"Sela",slug:"sela"},{name:"Hemingway Rewritten",slug:"hemingway-rewritten"},{name:"Twenty Sixteen",slug:"twentysixteen"},{name:"Penscratch",slug:"penscratch"},{name:"Edin",slug:"edin"},{name:"Publication",slug:"publication"},{name:"Harmonic",slug:"harmonic"}],t=e.map(function(e){var t=e.name,n=e.slug;return{id:n,name:t,screenshot:"https://i1.wp.com/s0.wp.com/wp-content/themes/pub/"+n+"/screenshot.png?w=660"}});return h.default.createElement(w.default,{themes:t,getButtonOptions:_.noop,onScreenshotClick:_.noop,onMoreButtonClick:_.noop})}},{key:"render",value:function(){return h.default.createElement(E.default,{className:"themes"},h.default.createElement(k.default,null),h.default.createElement(S.default,{template:"optInManage",title:this.props.translate("Looking to manage this site's themes?"),siteId:this.props.siteId,section:"themes",secondaryAction:this.props.translate("Open Site Theme Browser"),secondaryActionURL:this.props.adminUrl,secondaryActionTarget:"_blank",actionCallback:this.clickOnActivate,featureExample:this.renderMockThemes()}))}}]),t}(f.Component);t.default=(0,g.connect)(function(e,t){var n=t.siteId;return{adminUrl:(0,P.getSiteAdminUrl)(e,n,"themes.php")}})((0,b.localize)(I)),e.exports=t.default},"./client/my-sites/themes/jetpack-referrer-message.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/react.js"),r=s(o),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/i18n-calypso/index.js"),l=n("./client/components/main/index.jsx"),u=s(l),d=n("./client/my-sites/themes/current-theme/index.jsx"),c=s(d),p=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),m=s(p),f=n("./client/components/empty-content/index.jsx"),h=s(f),g=n("./client/lib/analytics/page-view-tracker/index.jsx"),_=s(g),b=n("./client/state/sites/selectors.js"),v=function(e){var t=e.siteId,n=e.translate,s=e.adminUrl,o=e.analyticsPath,i=e.analyticsPageTitle;return r.default.createElement(u.default,{className:"themes"},r.default.createElement(_.default,{path:o,title:i}),r.default.createElement(m.default,null),r.default.createElement(c.default,{siteId:t}),r.default.createElement(h.default,{title:n("Changing Themes?"),line:n("Use your site theme browser to manage themes."),action:n("Open Site Theme Browser"),actionURL:s,actionTarget:"_blank",illustration:"/calypso/images/illustrations/illustration-jetpack.svg"}))};t.default=(0,i.connect)(function(e,t){var n=t.siteId;return{adminUrl:(0,b.getSiteAdminUrl)(e,n,"themes.php")}})((0,a.localize)(v)),e.exports=t.default},"./client/my-sites/themes/jetpack-upgrade-message.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/react.js"),r=s(o),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/i18n-calypso/index.js"),l=n("./client/components/main/index.jsx"),u=s(l),d=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),c=s(d),p=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),m=s(p),f=n("./client/state/sites/selectors.js"),h=function(e){var t=e.siteId,n=e.translate,s=e.adminUrl;return r.default.createElement(u.default,{className:"themes"},r.default.createElement(c.default,null),r.default.createElement(m.default,{template:"updateJetpack",siteId:t,version:"3.7",secondaryAction:n("Open Site Theme Browser"),secondaryActionURL:s,secondaryActionTarget:"_blank"}))};t.default=(0,i.connect)(function(e,t){var n=t.siteId;return{adminUrl:(0,f.getSiteAdminUrl)(e,n,"themes.php")}})((0,a.localize)(h)),e.exports=t.default},"./client/my-sites/themes/logged-out.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./client/my-sites/themes/theme-showcase.jsx"),u=s(l),d=n("./client/my-sites/themes/theme-options.js"),c=(0,d.connectOptions)(u.default);t.default=function(e){return a.default.createElement(c,(0,r.default)({},e,{origin:"wpcom",defaultOption:"signup",getScreenshotOption:function(){return"info"},source:"showcase",showUploadButton:!1}))},e.exports=t.default},"./client/my-sites/themes/multi-site.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),u=s(l),d=n("./client/my-sites/themes/themes-site-selector-modal.jsx"),c=s(d),p=n("./client/my-sites/themes/theme-options.js"),m=n("./client/my-sites/themes/theme-showcase.jsx"),f=s(m),h=(0,p.connectOptions)(function(e){return a.default.createElement("div",null,a.default.createElement(u.default,null),a.default.createElement(c.default,e,a.default.createElement(f.default,{source:"showcase",showUploadButton:!1})))});t.default=function(e){return a.default.createElement(h,(0,r.default)({},e,{origin:"wpcom",defaultOption:"activate",secondaryOption:"tryandcustomize",getScreenshotOption:function(){return"info"}}))},e.exports=t.default},"./client/my-sites/themes/single-site-jetpack.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./client/my-sites/themes/current-theme/index.jsx"),c=s(d),p=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),m=s(p),f=n("./client/my-sites/themes/thanks-modal.jsx"),h=s(f),g=n("./client/config/index.js"),_=s(g),b=n("./client/my-sites/themes/jetpack-referrer-message.jsx"),v=s(b),y=n("./client/my-sites/themes/jetpack-upgrade-message.jsx"),j=s(y),E=n("./client/my-sites/themes/jetpack-manage-disabled-message.jsx"),x=s(E),k=n("./client/my-sites/themes/theme-options.js"),T=n("./client/components/banner/index.jsx"),S=s(T),C=n("./client/lib/plans/constants.js"),w=n("./client/components/data/query-site-plans/index.jsx"),P=s(w),I=n("./client/components/data/query-site-purchases/index.jsx"),A=s(I),O=n("./client/my-sites/themes/theme-showcase.jsx"),M=s(O),R=n("./client/my-sites/themes/themes-selection.jsx"),U=s(R),N=n("./client/my-sites/themes/helpers.js"),L=n("./client/state/sites/plans/selectors.js"),q=n("./client/state/themes/selectors.js"),D=n("./client/state/sites/selectors.js"),F=(0,k.connectOptions)(function(e){return a.default.createElement(U.default,(0,r.default)({},e,{getOptions:function(t){return(0,l.pickBy)((0,N.addTracking)(e.options),function(n){return!(n.hideForTheme&&n.hideForTheme(t,e.siteId))})}}))}),z=(0,k.connectOptions)(function(e){var t=e.analyticsPath,n=e.analyticsPageTitle,s=e.canManage,o=e.emptyContent,i=e.filter,l=e.getScreenshotOption,u=e.hasJetpackThemes,d=e.showWpcomThemesList,p=e.search,f=e.siteId,g=e.vertical,b=e.tier,y=e.translate,E=e.hasUnlimitedPremiumThemes,k=e.requestingSitePlans,T=_.default.isEnabled("manage/themes-jetpack");return T?u?s?a.default.createElement("div",null,a.default.createElement(m.default,null),a.default.createElement(c.default,{siteId:f}),!k&&!E&&a.default.createElement(S.default,{plan:C.PLAN_JETPACK_PREMIUM,title:y("Access all our premium themes with our Professional plan!"),description:y("Get advanced customization, more storage space, and video support along with all your new themes."),event:"themes_plans_free_personal_premium"}),a.default.createElement(M.default,(0,r.default)({},e,{siteId:f,emptyContent:d?a.default.createElement("div",null):null}),f&&a.default.createElement(P.default,{siteId:f}),f&&a.default.createElement(A.default,{siteId:f}),a.default.createElement(h.default,{source:"list"}),d&&a.default.createElement("div",null,a.default.createElement(F,{origin:"wpcom",defaultOption:"activate",secondaryOption:"tryandcustomize",search:p,tier:b,filter:i,vertical:g,siteId:f,getScreenshotUrl:function(e){return l(e).getUrl?l(e).getUrl(e):null},onScreenshotClick:function(e){l(e).action&&l(e).action(e)},getActionLabel:function(e){return l(e).label},trackScrollPage:e.trackScrollPage,source:"wpcom",emptyContent:o})))):a.default.createElement(x.default,{siteId:f}):a.default.createElement(j.default,{siteId:f}):a.default.createElement(v.default,{siteId:f,analyticsPath:t,analyticsPageTitle:n})});t.default=(0,u.connect)(function(e,t){var n=t.siteId,s=t.tier,o=(0,D.isJetpackSiteMultiSite)(e,n),r=_.default.isEnabled("manage/themes/upload")&&(0,D.hasJetpackSiteJetpackThemesExtendedFeatures)(e,n)&&!o,i=null;if(r){var l=(0,q.getLastThemeQuery)(e,n),u=(0,q.getLastThemeQuery)(e,"wpcom"),d=(0,q.getThemesFoundForQuery)(e,n,l),c=(0,q.getThemesFoundForQuery)(e,"wpcom",u);i=d||c?a.default.createElement("div",null):null}return{canManage:(0,D.canJetpackSiteManage)(e,n),hasJetpackThemes:(0,D.hasJetpackSiteJetpackThemes)(e,n),tier:s,showWpcomThemesList:r,
emptyContent:i,isMultisite:o,hasUnlimitedPremiumThemes:(0,L.hasFeature)(e,n,C.FEATURE_UNLIMITED_PREMIUM_THEMES),requestingSitePlans:(0,L.isRequestingSitePlans)(e,n)}})(z),e.exports=t.default},"./client/my-sites/themes/single-site-wpcom.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/lodash/lodash.js"),d=n("./client/lib/abtest/index.js"),c=n("./client/my-sites/themes/current-theme/index.jsx"),p=s(c),m=n("./client/my-sites/sidebar-navigation/sidebar-navigation.jsx"),f=s(m),h=n("./client/my-sites/themes/thanks-modal.jsx"),g=s(h),_=n("./client/my-sites/themes/theme-options.js"),b=n("./client/components/banner/index.jsx"),v=s(b),y=n("./client/lib/plans/constants.js"),j=n("./client/state/sites/plans/selectors.js"),E=n("./client/components/data/query-site-plans/index.jsx"),x=s(E),k=n("./client/components/data/query-site-purchases/index.jsx"),T=s(k),S=n("./client/my-sites/themes/theme-showcase.jsx"),C=s(S),w=n("./client/state/sites/selectors.js"),P=(0,_.connectOptions)(function(e){var t=e.siteId,n=e.siteSlug,s=e.currentPlanSlug,o=e.translate,i="show"===(0,d.abtest)("unlimitedThemeNudge")&&"/plans/"+n;return a.default.createElement("div",null,a.default.createElement(f.default,null),a.default.createElement(p.default,{siteId:t}),(s===y.PLAN_FREE||s===y.PLAN_PERSONAL)&&a.default.createElement(v.default,{plan:y.PLAN_PREMIUM,title:o("Access all our premium themes with our Premium and Business plans!"),description:o("Get advanced customization, more storage space, and video support along with all your new themes."),event:"themes_plans_free_personal"}),a.default.createElement(C.default,(0,r.default)({},e,{upsellUrl:i,siteId:t}),t&&a.default.createElement(x.default,{siteId:t}),t&&a.default.createElement(T.default,{siteId:t}),a.default.createElement(g.default,{source:"list"})))});t.default=(0,l.connect)(function(e,t){var n=t.siteId,s=(0,j.getCurrentPlan)(e,n);return{siteSlug:(0,w.getSiteSlug)(e,n),currentPlanSlug:(0,u.get)(s,"productSlug",null)}})(P),e.exports=t.default},"./client/my-sites/themes/single-site.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/i18n-calypso/index.js"),d=n("./client/components/main/index.jsx"),c=s(d),p=n("./client/my-sites/themes/single-site-wpcom.jsx"),m=s(p),f=n("./client/my-sites/themes/single-site-jetpack.jsx"),h=s(f),g=n("./client/state/ui/selectors.js"),_=n("./client/state/sites/selectors.js"),b=n("./client/state/themes/selectors.js"),v=function(e){var t=e.isJetpack,n=e.siteId,s=e.translate;return n?t?a.default.createElement(h.default,(0,r.default)({},e,{siteId:n,defaultOption:"activate",secondaryOption:"tryandcustomize",source:"showcase",listLabel:s("Uploaded themes"),placeholderCount:5})):a.default.createElement(m.default,(0,r.default)({},e,{origin:"wpcom",siteId:n,defaultOption:"activate",secondaryOption:"tryandcustomize",source:"showcase"})):a.default.createElement(c.default,{className:"themes"})};t.default=(0,l.connect)(function(e){var t=(0,g.getSelectedSiteId)(e);return{siteId:t,isJetpack:(0,_.isJetpackSite)(e,t),getScreenshotOption:function(n){return(0,b.isThemeActive)(e,n,t)?"customize":"info"}}})((0,u.localize)(v)),e.exports=t.default},"./client/my-sites/themes/thanks-modal.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prop-types/index.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/create-react-class/index.js"),u=s(l),d=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/page/index.js"),p=s(c),m=n("./node_modules/i18n-calypso/index.js"),f=n("./node_modules/lodash/lodash.js"),h=n("./client/components/dialog/index.jsx"),g=s(h),_=n("./client/components/pulsing-dot/index.jsx"),b=s(_),v=n("./client/my-sites/themes/helpers.js"),y=n("./client/state/themes/selectors.js"),j=n("./client/state/themes/actions.js"),E=n("./client/state/sites/selectors.js"),x=n("./client/state/ui/selectors.js"),k=(0,u.default)({displayName:"ThanksModal",trackClick:v.trackClick.bind(null,"current theme"),propTypes:{source:r.default.oneOf(["details","list","upload"]).isRequired,clearActivated:r.default.func.isRequired,currentTheme:r.default.shape({author:r.default.string,author_uri:r.default.string,id:r.default.string,name:r.default.string}),customizeUrl:r.default.string,detailsUrl:r.default.string,forumUrl:r.default.string,hasActivated:r.default.bool.isRequired,isActivating:r.default.bool.isRequired,isThemeWpcom:r.default.bool.isRequired,siteId:r.default.number,visitSiteUrl:r.default.string},onCloseModal:function(){this.props.clearActivated(this.props.siteId),this.setState({show:!1})},visitSite:function(){this.trackClick("visit site"),(0,p.default)(this.props.visitSiteUrl)},goBack:function(){this.trackClick("go back"),this.onCloseModal()},onLinkClick:function(e){var t=this;return function(){t.onCloseModal(),t.trackClick(e,"click")}},renderBody:function(){return a.default.createElement("ul",null,a.default.createElement("li",null,"list"===this.props.source?this.renderThemeInfo():this.renderCustomizeInfo()),a.default.createElement("li",null,this.renderSupportInfo()))},renderThemeInfo:function(){return(0,m.translate)("{{a}}Learn more about{{/a}} this theme.",{components:{a:a.default.createElement("a",{href:this.props.detailsUrl,onClick:this.onLinkClick("theme info")})}})},renderCustomizeInfo:function(){return(0,m.translate)("{{a}}Customize{{/a}} this design.",{components:{a:a.default.createElement("a",{href:this.props.customizeUrl,onClick:this.onLinkClick("customize")})}})},renderSupportInfo:function(){var e=this.props.currentTheme.author_uri;return this.props.forumUrl?(0,m.translate)("Have questions? Stop by our {{a}}support forums{{/a}}.",{components:{a:a.default.createElement("a",{href:this.props.forumUrl,onClick:this.onLinkClick("support")})}}):e?(0,m.translate)("Have questions? {{a}}Contact the theme author.{{/a}}",{components:{a:a.default.createElement("a",{href:e,onClick:this.onLinkClick("org author")})}}):null},renderContent:function(){var e=this.props.currentTheme,t=e.name,n=e.author;return a.default.createElement("div",null,a.default.createElement("h1",null,(0,m.translate)("Thanks for choosing {{br/}} %(themeName)s {{br/}} by %(themeAuthor)s",{args:{themeName:t,themeAuthor:n},components:{br:a.default.createElement("br",null)}})),this.renderBody())},renderLoading:function(){return a.default.createElement("div",{className:"themes__thanks-modal-loading"},a.default.createElement(b.default,{active:!0}))},render:function(){var e=this.props,t=e.currentTheme,n=e.hasActivated,s=e.isActivating,o=n?(0,m.translate)("Visit site"):(0,m.translate)("Activating theme…"),r=[{action:"back",label:(0,m.translate)("Back to themes"),onClick:this.goBack},{action:"visitSite",label:o,isPrimary:!0,disabled:!n,onClick:this.visitSite}];return a.default.createElement(g.default,{className:"themes__thanks-modal",isVisible:s||n,buttons:r,onClose:this.onCloseModal},n&&t?this.renderContent():this.renderLoading())}});t.default=(0,d.connect)(function(e){var t=(0,x.getSelectedSiteId)(e),n=(0,f.get)((0,E.getSite)(e,t),"URL"),s=(0,y.getActiveTheme)(e,t),o=s&&(0,y.getCanonicalTheme)(e,t,s);return{siteId:t,currentTheme:o,detailsUrl:(0,y.getThemeDetailsUrl)(e,s,t),customizeUrl:(0,y.getThemeCustomizeUrl)(e,s,t),forumUrl:(0,y.getThemeForumUrl)(e,s,t),visitSiteUrl:n+((0,E.isJetpackSite)(e,t)?"":"?next=customize"),isActivating:!!(0,y.isActivatingTheme)(e,t),hasActivated:!!(0,y.hasActivatedTheme)(e,t),isThemeWpcom:(0,y.isWpcomTheme)(e,s)}},{clearActivated:j.clearActivated})(k),e.exports=t.default},"./client/my-sites/themes/theme-options.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectOptions=void 0;var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=s(i),l=n("./node_modules/redux/lib/index.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/i18n-calypso/index.js"),c=s(d),p=n("./node_modules/lodash/lodash.js"),m=n("./client/config/index.js"),f=s(m),h=n("./client/state/themes/actions.js"),g=n("./client/state/themes/selectors.js"),_=n("./client/state/sites/selectors.js"),b=n("./client/state/selectors/can-current-user.js"),v=s(b),y=n("./client/state/current-user/selectors.js"),j=f.default.isEnabled("upgrades/checkout")?{label:c.default.translate("Purchase",{context:"verb"}),extendedLabel:c.default.translate("Purchase this design"),header:c.default.translate("Purchase on:",{context:"verb",comment:"label for selecting a site for which to purchase a theme"}),getUrl:g.getThemePurchaseUrl,hideForTheme:function(e,t,n){return(0,_.isJetpackSite)(e,n)||!(0,y.getCurrentUser)(e)||!(0,g.isThemePremium)(e,t)||(0,g.isPremiumThemeAvailable)(e,t,n)||(0,g.isThemeActive)(e,t,n)}}:{},E=f.default.isEnabled("upgrades/checkout")?{label:c.default.translate("Upgrade to activate",{comment:"label prompting user to upgrade the Jetpack plan to activate a certain theme"}),extendedLabel:c.default.translate("Upgrade to activate",{comment:"label prompting user to upgrade the Jetpack plan to activate a certain theme"}),header:c.default.translate("Upgrade on:",{context:"verb",comment:"label for selecting a site for which to upgrade a plan"}),getUrl:function(e,t,n){return(0,g.getJetpackUpgradeUrlIfPremiumTheme)(e,t,n)},hideForTheme:function(e,t,n){return!(0,_.isJetpackSite)(e,n)||!(0,y.getCurrentUser)(e)||!(0,g.isThemePremium)(e,t)||(0,g.isThemeActive)(e,t,n)||(0,g.isPremiumThemeAvailable)(e,t,n)}}:{},x={label:c.default.translate("Activate"),extendedLabel:c.default.translate("Activate this design"),header:c.default.translate("Activate on:",{comment:"label for selecting a site on which to activate a theme"}),action:h.activate,hideForTheme:function(e,t,n){return!(0,y.getCurrentUser)(e)||(0,_.isJetpackSiteMultiSite)(e,n)||(0,g.isThemeActive)(e,t,n)||(0,g.isThemePremium)(e,t)&&!(0,g.isPremiumThemeAvailable)(e,t,n)||(0,_.isJetpackSite)(e,n)&&!(0,g.isThemeAvailableOnJetpackSite)(e,t,n)}},k={label:c.default.translate("Delete"),action:h.confirmDelete,hideForTheme:function(e,t,n,s){return!(0,_.isJetpackSite)(e,n)||!f.default.isEnabled("manage/themes/upload")||"wpcom"===s||(0,g.isThemeActive)(e,t,n)}},T={label:c.default.translate("Customize"),extendedLabel:c.default.translate("Customize this design"),header:c.default.translate("Customize on:",{comment:"label in the dialog for selecting a site for which to customize a theme"}),icon:"customize",getUrl:g.getThemeCustomizeUrl,hideForTheme:function(e,t,n){return!(0,v.default)(e,n,"edit_theme_options")||!(0,g.isThemeActive)(e,t,n)}},S={label:c.default.translate("Try & Customize"),extendedLabel:c.default.translate("Try & Customize"),header:c.default.translate("Try & Customize on:",{comment:"label in the dialog for opening the Customizer with the theme in preview"}),action:h.tryAndCustomize,hideForTheme:function(e,t,n){return!(0,y.getCurrentUser)(e)||n&&(!(0,v.default)(e,n,"edit_theme_options")||(0,_.isJetpackSite)(e,n)&&(0,_.isJetpackSiteMultiSite)(e,n))||(0,g.isThemeActive)(e,t,n)||(0,g.isThemePremium)(e,t)&&(0,_.isJetpackSite)(e,n)&&!(0,g.isPremiumThemeAvailable)(e,t,n)||(0,_.isJetpackSite)(e,n)&&!(0,g.isThemeAvailableOnJetpackSite)(e,t,n)}},C={label:c.default.translate("Live demo",{comment:"label for previewing the theme demo website"}),action:h.showThemePreview},w=c.default.translate("Pick this design",{comment:"when signing up for a WordPress.com account with a selected theme"}),P={label:w,extendedLabel:w,getUrl:g.getThemeSignupUrl,hideForTheme:function(e){return(0,y.getCurrentUser)(e)}},I={separator:!0},A={label:c.default.translate("Info",{comment:"label for displaying the theme info sheet"}),icon:"info",getUrl:g.getThemeDetailsUrl},O={label:c.default.translate("Setup"),icon:"help",getUrl:g.getThemeSupportUrl,hideForTheme:function(e,t){return!(0,g.isThemePremium)(e,t)}},M={label:c.default.translate("Support"),getUrl:g.getThemeHelpUrl},R={customize:T,preview:C,purchase:j,upgradePlan:E,activate:x,tryandcustomize:S,deleteTheme:k,signup:P,separator:I,info:A,support:O,help:M};t.connectOptions=(0,u.connect)(function(e,t){var n=t.siteId,s=t.origin,o=void 0===s?n:s,r=p.identity,i=p.identity;return n?(r=function(t){return function(s){return t(e,s,n)}},i=function(t){return function(s){return t(e,s,n,o)}}):(r=function(t){return function(n,s){return t(e,n,s)}},i=function(t){return function(n,s){return t(e,n,s,o)}}),(0,p.mapValues)(R,function(e){return(0,a.default)({},e,e.getUrl?{getUrl:r(e.getUrl)}:{},e.hideForTheme?{hideForTheme:i(e.hideForTheme)}:{})})},function(e,t){var n=t.siteId,s=t.source,o=void 0===s?"unknown":s,r=(0,p.pickBy)(R,"action"),i=void 0;return i=n?function(e){return function(t){return e(t,n,o)}}:function(e){return function(t,n){return e(t,n,o)}},(0,l.bindActionCreators)((0,p.mapValues)(r,function(e){var t=e.action;return i(t)}),e)},function(e,t,n){var s=n.defaultOption,o=n.secondaryOption,i=n.getScreenshotOption;return e=(0,p.mapValues)(e,function(e,n){return(0,p.has)(e,"action")?(0,r.default)({},e,{action:t[n]}):e}),(0,r.default)({},n,{options:e,defaultOption:e[s],secondaryOption:o?e[o]:null,getScreenshotOption:function(t){return e[i(t)]}})})},"./client/my-sites/themes/theme-preview.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),y=n("./client/components/button/index.jsx"),j=s(y),E=n("./client/components/pulsing-dot/index.jsx"),x=s(E),k=n("./client/components/data/query-theme/index.jsx"),T=s(k),S=n("./client/my-sites/themes/theme-options.js"),C=n("./client/state/themes/selectors.js"),w=n("./client/state/ui/selectors.js"),P=n("./client/state/sites/selectors.js"),I=n("./client/state/themes/actions.js"),A=n("./client/components/web-preview/index.jsx"),O=s(A),M=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return n=s=(0,c.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),s.state={showActionIndicator:!1},s.onPrimaryButtonClick=function(){var e=s.getPrimaryOption();e.action&&e.action(s.props.themeId),!s.props.isJetpack&&s.props.hideThemePreview()},s.onSecondaryButtonClick=function(){var e=s.getSecondaryOption();e.action&&e.action(s.props.themeId),!s.props.isJetpack&&s.props.hideThemePreview()},s.getPrimaryOption=function(){return s.props.themeOptions.primary},s.getSecondaryOption=function(){var e=s.props.isActive;return e?null:s.props.themeOptions.secondary},s.renderPrimaryButton=function(){var e=s.getPrimaryOption(),t=e.getUrl?e.getUrl(s.props.themeId):null;return _.default.createElement(j.default,{primary:!0,onClick:s.onPrimaryButtonClick,href:t},e.extendedLabel)},s.renderSecondaryButton=function(){var e=s.getSecondaryOption();if(e){var t=e.getUrl?e.getUrl(s.props.themeId):null;return _.default.createElement(j.default,{onClick:s.onSecondaryButtonClick,href:t},e.extendedLabel)}},o=n,(0,c.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.isActivating&&!e.isActivating&&(this.setState({showActionIndicator:!1}),this.props.hideThemePreview()),!this.props.isInstalling&&e.isInstalling&&this.setState({showActionIndicator:!0})}},{key:"render",value:function(){var e=this.props.themeId,t=this.state.showActionIndicator;return e?_.default.createElement("div",null,this.props.isJetpack&&_.default.createElement(T.default,{themeId:e,siteId:"wporg"}),this.props.demoUrl&&_.default.createElement(O.default,{showPreview:!0,showExternal:!0,showSEO:!1,onClose:this.props.hideThemePreview,previewUrl:this.props.demoUrl+"?demo=true&iframe=true&theme_preview=true",externalUrl:this.props.demoUrl},t&&_.default.createElement(x.default,{active:!0}),!t&&this.renderSecondaryButton(),!t&&this.renderPrimaryButton())):null}}]),t}(_.default.Component);M.displayName="ThemePreview",M.propTypes={demoUrl:h.default.string,isActivating:h.default.bool,isActive:h.default.bool,isInstalling:h.default.bool,isJetpack:h.default.bool,themeId:h.default.string,themeOptions:h.default.object};var R=(0,S.connectOptions)(M);t.default=(0,b.connect)(function(e){var t=(0,C.themePreviewVisibility)(e);if(!t)return{themeId:t};var n=(0,w.getSelectedSiteId)(e),s=(0,P.isJetpackSite)(e,n),o=(0,C.getThemePreviewThemeOptions)(e);return{themeId:t,isJetpack:s,themeOptions:o,isInstalling:(0,C.isInstallingTheme)(e,t,n),isActive:(0,C.isThemeActive)(e,t,n),isActivating:(0,C.isActivatingTheme)(e,n),demoUrl:(0,C.getThemeDemoUrl)(e,t,n),options:["activate","preview","purchase","upgradePlan","tryandcustomize","customize","separator","info","signup","support","help"]}},{hideThemePreview:I.hideThemePreview})((0,v.localize)(R)),e.exports=t.default},"./client/my-sites/themes/theme-showcase.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/keys.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/extends.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/createClass.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=s(f),g=n("./node_modules/babel-runtime/helpers/inherits.js"),_=s(g),b=n("./node_modules/prop-types/index.js"),v=s(b),y=n("./node_modules/react/react.js"),j=s(y),E=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),k=n("./node_modules/page/index.js"),T=s(k),S=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/gridicons/build/index.js"),w=s(C),P=n("./client/components/main/index.jsx"),I=s(P),A=n("./client/components/button/index.jsx"),O=s(A),M=n("./client/my-sites/themes/themes-selection.jsx"),R=s(M),U=n("./client/components/sub-masterbar-nav/index.jsx"),N=s(U),L=n("./client/lib/analytics/page-view-tracker/index.jsx"),q=s(L),D=n("./client/my-sites/themes/helpers.js"),F=n("./client/components/data/document-head/index.jsx"),z=s(F),W=n("./client/lib/build-url/index.js"),B=s(W),H=n("./client/state/sites/selectors.js"),J=n("./client/state/current-user/selectors.js"),V=n("./client/my-sites/themes/theme-preview.jsx"),Q=s(V),K=n("./client/config/index.js"),Z=s(K),Y=n("./client/state/selectors/get-theme-filter-terms.js"),G=s(Y),X=n("./client/state/selectors/get-theme-filter-to-term-table.js"),$=s(X),ee=n("./client/state/selectors/get-theme-showcase-description.js"),te=s(ee),ne=n("./client/state/selectors/get-theme-showcase-title.js"),se=s(ne),oe=n("./client/state/selectors/prepend-theme-filter-keys.js"),re=s(oe),ie=n("./client/state/analytics/actions.js"),ae=n("./client/my-sites/themes/themes-magic-search-card/index.jsx"),le=s(ae),ue=n("./client/components/data/query-theme-filters/index.jsx"),de=s(ue),ce={photo:{icon:"camera",order:1},portfolio:{icon:"custom-post-type",order:2},magazine:{icon:"reader",order:3},blog:{icon:"posts",order:4},business:{icon:"cart",order:5},wedding:{icon:"heart",order:6},minimal:{icon:"minus-small",order:7},travel:{icon:"globe",order:8},food:{icon:"flip-horizontal",order:9},music:{icon:"audio",order:10}},pe=v.default.shape({label:v.default.string,header:v.default.string,getUrl:v.default.func,action:v.default.func}),me=function(e){function t(){var e,n,s,o;(0,c.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=s=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(i))),s.state={page:1,showPreview:!1},s.doSearch=function(e){var t=/([\w-]*)\:([\w-]*)/g,n=s.props.filterToTermTable,o=e.match(t)||[],r=o.map(function(e){return n[e]}),i=s.constructUrl({filter:(0,S.compact)(r).join("+"),searchString:e.replace(t,"").replace(/\s+/g," ").trim()});(0,T.default)(i)},s.constructUrl=function(e){var t=(0,a.default)({},s.props,e),n=t.vertical,o=t.tier,r=t.filter,i=t.siteSlug,l=t.searchString,u=i?"/"+i:"",d=n?"/"+n:"",c=o&&"all"!==o?"/"+o:"",p=r?"/filter/"+r:"";p=p.replace(/\s/g,"+");var m="/themes"+d+c+p+u;return(0,B.default)(m,l)},s.onTierSelect=function(e){var t=e.value;(0,D.trackClick)("search bar filter",t);var n=s.constructUrl({tier:t});(0,T.default)(n)},s.onUploadClick=function(){(0,D.trackClick)("upload theme"),s.props.atEnabled&&s.props.trackATUploadClick()},s.showUploadButton=function(){var e=s.props,t=e.isMultisite,n=e.isLoggedIn;return Z.default.isEnabled("manage/themes/upload")&&n&&!t},o=n,(0,h.default)(s,o)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.siteId,s=t.options,o=t.getScreenshotOption,i=t.search,a=t.filter,l=t.translate,u=t.siteSlug,d=t.isLoggedIn,c=t.pathName,p=t.title,m=t.filterString,f=t.isMultisite,h=Z.default.isEnabled("upgrades/premium-themes")?this.props.tier:"free",g="https://wordpress.com"+c,_=[{name:"description",property:"og:description",content:this.props.description},{property:"og:title",content:p},{property:"og:url",content:g},{property:"og:type",content:"website"},{property:"og:site_name",content:"WordPress.com"}],b=[{rel:"canonical",href:g}],v=[{label:"new",uri:this.constructUrl({vertical:""}),icon:"star"}].concat((0,r.default)(this.props.subjects).map(function(t){return ce[t]&&{label:t,uri:e.constructUrl({vertical:t}),icon:ce[t].icon,order:ce[t].order}}).filter(function(e){return!!e}).sort(function(e,t){return e.order-t.order}));return j.default.createElement(I.default,{className:"themes"},j.default.createElement(z.default,{title:p,meta:_,link:b}),j.default.createElement(q.default,{path:this.props.analyticsPath,title:this.props.analyticsPageTitle}),!d&&j.default.createElement(N.default,{options:v,fallback:v[0],uri:this.constructUrl()}),j.default.createElement("div",{className:"themes__content"},j.default.createElement(de.default,null),j.default.createElement(le.default,{onSearch:this.doSearch,search:m+i,tier:h,showTierThemesControl:!f,select:this.onTierSelect}),this.showUploadButton()&&j.default.createElement(O.default,{className:"themes__upload-button",compact:!0,icon:!0,onClick:this.onUploadClick,href:u?"/themes/upload/"+u:"/themes/upload"},j.default.createElement(w.default,{icon:"cloud-upload"}),l("Upload Theme")),j.default.createElement(R.default,{upsellUrl:this.props.upsellUrl,search:i,tier:this.props.tier,filter:a,vertical:this.props.vertical,siteId:this.props.siteId,listLabel:this.props.listLabel,defaultOption:this.props.defaultOption,secondaryOption:this.props.secondaryOption,placeholderCount:this.props.placeholderCount,getScreenshotUrl:function(e){return o(e).getUrl?o(e).getUrl(e):null},onScreenshotClick:function(e){o(e).action&&o(e).action(e)},getActionLabel:function(e){return o(e).label},getOptions:function(e){return(0,S.pickBy)((0,D.addTracking)(s),function(t){return!(t.hideForTheme&&t.hideForTheme(e,n))})},trackScrollPage:this.props.trackScrollPage,emptyContent:this.props.emptyContent}),j.default.createElement(Q.default,null),this.props.children))}}]),t}(j.default.Component);me.propTypes={emptyContent:v.default.element,tier:v.default.oneOf(["","free","premium"]),search:v.default.string,pathName:v.default.string,options:v.default.objectOf(pe),defaultOption:pe,secondaryOption:pe,getScreenshotOption:v.default.func,siteSlug:v.default.string,trackATUploadClick:v.default.func},me.defaultProps={tier:"",search:"",emptyContent:null,showUploadButton:!0};var fe=function(e,t){var n=t.siteId,s=t.filter,o=t.tier,r=t.vertical;return{isLoggedIn:!!(0,J.getCurrentUserId)(e),siteSlug:(0,H.getSiteSlug)(e,n),description:(0,te.default)(e,{filter:s,tier:o,vertical:r}),title:(0,se.default)(e,{filter:s,tier:o,vertical:r}),subjects:(0,G.default)(e,"subject")||{},filterString:(0,re.default)(e,s),filterToTermTable:(0,$.default)(e)}},he={trackATUploadClick:function(){return(0,ie.recordTracksEvent)("calypso_automated_transfer_click_theme_upload")}};t.default=(0,E.connect)(fe,he)((0,x.localize)(me)),e.exports=t.default},"./client/my-sites/themes/theme-upload/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/json/stringify.js"),a=s(i),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/createClass.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=s(f),g=n("./node_modules/babel-runtime/helpers/inherits.js"),_=s(g),b=n("./node_modules/prop-types/index.js"),v=s(b),y=n("./node_modules/react/react.js"),j=s(y),E=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),k=n("./client/components/main/index.jsx"),T=s(k),S=n("./client/components/header-cake/index.jsx"),C=s(S),w=n("./client/components/card/index.jsx"),P=s(w),I=n("./client/blocks/upload-drop-zone/index.jsx"),A=s(I),O=n("./client/components/empty-content/index.jsx"),M=s(O),R=n("./client/components/progress-bar/index.jsx"),U=s(R),N=n("./client/components/button/index.jsx"),L=s(N),q=n("./client/my-sites/themes/thanks-modal.jsx"),D=s(q),F=n("./client/components/data/query-canonical-theme/index.jsx"),z=s(F),W=n("./client/components/data/query-active-theme/index.jsx"),B=s(W),H=n("./node_modules/i18n-calypso/index.js"),J=n("./client/notices/index.js"),V=s(J),Q=n("./node_modules/debug/browser.js"),K=s(Q),Z=n("./client/state/themes/actions.js"),Y=n("./client/state/ui/selectors.js"),G=n("./client/state/sites/selectors.js"),X=n("./client/state/themes/upload-theme/selectors.js"),$=n("./client/state/themes/selectors.js"),ee=n("./client/my-sites/themes/theme-options.js"),te=n("./client/blocks/eligibility-warnings/index.jsx"),ne=s(te),se=n("./client/my-sites/jetpack-manage-error-page/index.jsx"),oe=s(se),re=n("./client/state/themes/themes-ui/selectors.js"),ie=n("./client/state/sites/plans/selectors.js"),ae=n("./client/lib/plans/constants.js"),le=n("./client/components/data/query-atat-eligibility/index.jsx"),ue=s(le),de=n("./client/state/automated-transfer/selectors.js"),ce=n("./client/state/selectors/is-site-automated-transfer.js"),pe=s(ce),me=n("./client/components/wpadmin-auto-login/index.jsx"),fe=s(me),he=(0,K.default)("calypso:themes:theme-upload"),ge=function(e){function t(){var e,n,s,o;(0,c.default)(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=s=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(i))),s.state={showEligibility:s.props.showEligibility},s.onProceedClick=function(){s.setState({showEligibility:!1})},s.onActivateClick=function(){var e=s.props.options.activate;e.action(s.props.themeId)},s.onTryAndCustomizeClick=function(){var e=s.props.options.tryandcustomize;e.action(s.props.themeId)},o=n,(0,h.default)(s,o)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.siteId,n=e.inProgress;!n&&this.props.clearThemeUpload(t)}},{key:"componentWillReceiveProps",value:function(e){if(e.siteId!==this.props.siteId){var t=e.siteId,n=e.inProgress;!n&&this.props.clearThemeUpload(t)}e.showEligibility!==this.props.showEligibility&&this.setState({showEligibility:e.showEligibility})}},{key:"componentDidUpdate",value:function(e){this.props.complete&&!e.complete?this.successMessage():this.props.failed&&!e.failed&&this.failureMessage()}},{key:"successMessage",value:function(){var e=this.props,t=e.translate,n=e.uploadedTheme,s=e.themeId;V.default.success(t("Successfully uploaded theme %(name)s",{args:{name:n?n.name:s}}),{duration:5e3})}},{key:"failureMessage",value:function(){var e=this.props,t=e.translate,n=e.error;he("Error",{error:n});var s={exists:t("Upload problem: Theme already installed on site."),already_installed:t("Upload problem: Theme already installed on site."),"too large":t("Upload problem: Theme zip must be under 10MB."),incompatible:t("Upload problem: Incompatible theme."),unsupported_mime_type:t("Upload problem: Not a valid zip file"),initiate_failure:t("Upload problem: Theme may not be valid. Check that your zip file contains only the theme you are trying to upload.")},o=(0,a.default)(n).toLowerCase(),r=(0,x.find)(s,function(e,t){return(0,x.includes)(o,t)}),i=n.error?": "+n.error:"";V.default.error(r||t("Problem uploading theme")+i)}},{key:"renderProgressBar",value:function(){var e=this.props,t=e.translate,n=e.progressTotal,s=e.progressLoaded,o=e.installing,r=t("Uploading your theme…"),i=t(this.props.isJetpack?"Installing your theme…":"Configuring your site…");return j.default.createElement("div",null,j.default.createElement("span",{className:"theme-upload__title"},o?i:r),j.default.createElement(U.default,{value:s||0,total:n||100,title:t("Uploading progress"),isPulsing:o}))}},{key:"renderTheme",value:function(){var e=this.props,t=e.uploadedTheme,n=e.translate,s=e.options,o=s.tryandcustomize,r=s.activate;return j.default.createElement("div",{className:"theme-upload__theme-sheet"},j.default.createElement("img",{className:"theme-upload__screenshot",src:t.screenshot}),j.default.createElement("h2",{className:"theme-upload__theme-name"},t.name),j.default.createElement("div",{className:"theme-upload__author"},n("by "),j.default.createElement("a",{href:t.author_uri},t.author)),j.default.createElement("div",{className:"theme-upload__description"},t.description),j.default.createElement("div",{className:"theme-upload__action-buttons"},j.default.createElement(L.default,{onClick:this.onTryAndCustomizeClick},o.label),j.default.createElement(L.default,{primary:!0,onClick:this.onActivateClick},r.label)))}},{key:"renderUploadCard",value:function(){var e=this.props,t=e.inProgress,n=e.failed,s=e.uploadedTheme,o=e.complete,r=e.isJetpack,i=e.isBusiness,a=r?this.props.uploadTheme:this.props.initiateThemeTransfer,l=!i&&!r;return j.default.createElement(P.default,null,!t&&!o&&j.default.createElement(A.default,{doUpload:a,disabled:l}),t&&this.renderProgressBar(),o&&!n&&s&&this.renderTheme(),o&&this.props.isSiteAutomatedTransfer&&j.default.createElement(fe.default,{site:this.props.selectedSite}))}},{key:"renderNotAvailableForMultisite",value:function(){return j.default.createElement(M.default,{title:this.props.translate("Not available for multi site"),line:this.props.translate("Use the WP Admin interface instead"),action:this.props.translate("Open WP Admin"),actionURL:this.props.siteAdminUrl,illustration:"/calypso/images/illustrations/illustration-jetpack.svg"})}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.complete,s=e.siteId,o=e.themeId,r=e.upgradeJetpack,i=e.backPath,a=e.isMultisite,l=this.state.showEligibility;return a?this.renderNotAvailableForMultisite():j.default.createElement(T.default,null,j.default.createElement(ue.default,{siteId:s}),j.default.createElement(B.default,{siteId:s}),o&&n&&j.default.createElement(z.default,{
siteId:s,themeId:o}),j.default.createElement(D.default,{source:"upload"}),j.default.createElement(C.default,{backHref:i},t("Upload theme")),r&&j.default.createElement(oe.default,{template:"updateJetpack",siteId:s,featureExample:this.renderUploadCard(),version:"4.7"}),l&&j.default.createElement(ne.default,{backUrl:i,onProceed:this.onProceedClick}),!r&&!l&&this.renderUploadCard())}}]),t}(j.default.Component);ge.propTypes={siteId:v.default.number,selectedSite:v.default.object,inProgress:v.default.bool,complete:v.default.bool,failed:v.default.bool,uploadedTheme:v.default.object,error:v.default.object,progressTotal:v.default.number,progressLoaded:v.default.number,installing:v.default.bool,isJetpack:v.default.bool,upgradeJetpack:v.default.bool,backPath:v.default.string,showEligibility:v.default.bool};var _e=(0,ee.connectOptions)(ge),be=function(e){var t=e.siteId,n=e.uploadedTheme;return j.default.createElement(_e,(0,r.default)({},e,{siteId:t,theme:n}))};t.default=(0,E.connect)(function(e){var t=(0,Y.getSelectedSiteId)(e),n=(0,Y.getSelectedSite)(e),s=(0,X.getUploadedThemeId)(e,t),o=(0,G.isJetpackSite)(e,t),r=(0,de.getEligibility)(e,t),i=r.eligibilityHolds,a=r.eligibilityWarnings,l=(0,de.isEligibleForAutomatedTransfer)(e,t),u=!((0,x.isEmpty)(i)&&(0,x.isEmpty)(a));return{siteId:t,isBusiness:(0,ie.hasFeature)(e,t,ae.FEATURE_UNLIMITED_PREMIUM_THEMES),selectedSite:n,isJetpack:o,inProgress:(0,X.isUploadInProgress)(e,t),complete:(0,X.isUploadComplete)(e,t),failed:(0,X.hasUploadFailed)(e,t),themeId:s,isMultisite:(0,G.isJetpackSiteMultiSite)(e,t),uploadedTheme:(0,$.getCanonicalTheme)(e,t,s),error:(0,X.getUploadError)(e,t),progressTotal:(0,X.getUploadProgressTotal)(e,t),progressLoaded:(0,X.getUploadProgressLoaded)(e,t),installing:(0,X.isInstallInProgress)(e,t),upgradeJetpack:o&&!(0,G.hasJetpackSiteJetpackThemesExtendedFeatures)(e,t),backPath:(0,re.getBackPath)(e),showEligibility:!o&&(u||!l),isSiteAutomatedTransfer:(0,pe.default)(e,t),siteAdminUrl:(0,G.getSiteAdminUrl)(e,t)}},{uploadTheme:Z.uploadTheme,clearThemeUpload:Z.clearThemeUpload,initiateThemeTransfer:Z.initiateThemeTransfer})((0,H.localize)(be)),e.exports=t.default},"./client/my-sites/themes/themes-magic-search-card/index.jsx":function(e,t,n){"use strict";(function(s){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),a=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),l=o(a),u=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),d=o(u),c=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),p=o(c),m=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),f=o(m),h=n("./node_modules/babel-runtime/helpers/createClass.js"),g=o(h),_=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),b=o(_),v=n("./node_modules/babel-runtime/helpers/inherits.js"),y=o(v),j=n("./node_modules/react/react.js"),E=o(j),x=n("./node_modules/prop-types/index.js"),k=o(x),T=n("./node_modules/react-click-outside/dist/index.js"),S=o(T),C=n("./node_modules/react-redux/es/index.js"),w=n("./node_modules/lodash/lodash.js"),P=n("./node_modules/classnames/index.js"),I=o(P),A=n("./node_modules/gridicons/build/index.js"),O=o(A),M=n("./client/components/search/index.jsx"),R=o(M),U=n("./client/components/segmented-control/index.jsx"),N=o(U),L=n("./client/components/keyed-suggestions/index.jsx"),q=o(L),D=n("./client/components/sticky-panel/index.jsx"),F=o(D),z=n("./client/config/index.js"),W=o(z),B=n("./client/lib/viewport/index.js"),H=n("./node_modules/i18n-calypso/index.js"),J=n("./client/my-sites/themes/themes-magic-search-card/welcome.jsx"),V=o(J),Q=n("./client/state/selectors/get-theme-filters.js"),K=o(Q),Z=n("./client/state/selectors/get-theme-filter-to-term-table.js"),Y=o(Z),G=["feature","layout","column","subject","style"],X=function(e){function t(e){(0,f.default)(this,t);var n=(0,b.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return n.onSearchOpen=function(){n.setState({searchIsOpen:!0})},n.onSearchClose=function(){n.setState({searchIsOpen:!1})},n.onKeyDown=function(e){var t=e.target.value;n.findTextForSuggestions(t);var s=!1,o=""!==n.state.editedSearchElement?"suggestions":"welcome";n.refs[o]&&(s=n.refs[o].handleKeyEvent(e)),"Enter"===e.key&&!s&&n.isPreviousCharWhitespace()&&(n.refs["url-search"].blur(),n.setState({searchIsOpen:!1}))},n.onClick=function(e){n.findTextForSuggestions(e.target.value)},n.isPreviousCharWhitespace=function(){var e=n.refs["url-search"].refs.searchInput,t=e.value,s=e.selectionStart,o=t.slice(0,s).length;return" "===t[o-1]},n.findEditedTokenIndex=function(e,t){for(var n=0,s=0;s<e.length;s++){n+=e[s].length;var o=t<n;if(o)return s;var r=t===n;if(r){var i=""===e[s].trim(),a=s<e.length-1;return i&&a?s+1:s}}return""},n.findTextForSuggestions=function(e){var t=e;window.requestAnimationFrame(function(){n.setState({cursorPosition:t.slice(0,n.refs["url-search"].refs.searchInput.selectionStart).length});var s=e.split(/(\s+)/);if(""===s[s.length-1]&&s.splice(s.length-1,1),0===s.length)return void n.setState({editedSearchElement:""});var o=n.findEditedTokenIndex(s,n.state.cursorPosition),r=s[o].trim();n.setState({editedSearchElement:r})})},n.insertSuggestion=function(e){var t=n.state.searchInput.split(/(\s+)/);""===t[t.length-1]&&t.splice(t.length-1,1);var s=n.findEditedTokenIndex(t,n.state.cursorPosition),o=t[s+1]&&" "===t[s+1][0];return t[s]=o?e:e+" ",t.join("")},n.insertTextAtCursor=function(e){var t=n.state.searchInput,s=n.state.cursorPosition;return t.slice(0,s)+e+t.slice(s)},n.onSearchChange=function(e){n.findTextForSuggestions(e),n.setState({searchInput:e})},n.searchTokens=function(e){if(s.window&&/(Edge)/.test(s.window.navigator.userAgent))return E.default.createElement("div",null);var t=e.split(/(\s+)/);return t.map(function(e,t){if(""===e.trim())return E.default.createElement("span",{className:"themes-magic-search-card__search-white-space",key:t},e);if((0,w.includes)(n.props.allValidFilters,e)){var s=":",o=e.split(s),r=(0,d.default)(o,2),i=r[0],a=r[1],l=(0,I.default)("themes-magic-search-card__token","themes-magic-search-card__token-type-"+i);return E.default.createElement("span",{className:l,key:t},E.default.createElement("span",{className:"themes-magic-search-card__token-taxonomy"},i),E.default.createElement("span",{className:"themes-magic-search-card__token-separator"},s),E.default.createElement("span",{className:"themes-magic-search-card__token-filter"},a))}return E.default.createElement("span",{className:"themes-magic-search-card__search-text",key:t},e)})},n.updateInput=function(e){n.setState({searchInput:e}),n.refs["url-search"].clear()},n.suggest=function(e){var t=n.insertSuggestion(e);n.updateInput(t)},n.insertTextInInput=function(e){var t=n.insertTextAtCursor(e);n.updateInput(t)},n.focusOnInput=function(){n.refs["url-search"].focus()},n.clearSearch=function(){n.updateInput(""),n.focusOnInput()},n.handleClickInside=function(){n.focusOnInput()},n.state={isMobile:(0,B.isMobile)(),searchIsOpen:!1,editedSearchElement:"",cursorPosition:0,searchInput:n.props.search},n}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){var e=this;this.onResize=(0,w.debounce)(function(){e.setState({isMobile:(0,B.isMobile)()})},250)}},{key:"componentDidMount",value:function(){this.findTextForSuggestions(this.props.search),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"handleClickOutside",value:function(){this.setState({searchIsOpen:!1})}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.filters,s=e.showTierThemesControl,o=W.default.isEnabled("upgrades/premium-themes"),r=[{value:"all",label:t("All")},{value:"free",label:t("Free")},{value:"premium",label:t("Premium")}],a=[].concat((0,l.default)((0,w.intersection)(G,(0,i.default)(n))),(0,l.default)((0,w.difference)((0,i.default)(n),G))),u=E.default.createElement(R.default,{onSearch:this.props.onSearch,initialValue:this.state.searchInput,value:this.state.searchInput,ref:"url-search",placeholder:t("What kind of theme are you looking for?"),analyticsGroup:"Themes",delaySearch:!0,onSearchOpen:this.onSearchOpen,onSearchClose:this.onSearchClose,onSearchChange:this.onSearchChange,onKeyDown:this.onKeyDown,onClick:this.onClick,overlayStyling:this.searchTokens,fitsContainer:this.state.isMobile&&this.state.searchIsOpen,hideClose:!0}),d=(0,I.default)("themes-magic-search",{"has-keyed-suggestions":this.state.searchIsOpen}),c=(0,I.default)("themes-magic-search-card",{"has-highlight":this.state.searchIsOpen}),p=""!==this.state.editedSearchElement;return E.default.createElement("div",{className:d},E.default.createElement(F.default,null,E.default.createElement("div",{className:c,"data-tip-target":"themes-search-card",onClick:this.handleClickInside},u,!(0,B.isMobile)()&&""!==this.state.searchInput&&E.default.createElement("div",{className:"themes-magic-search-card__icon"},E.default.createElement(O.default,{icon:"cross",className:"themes-magic-search-card__icon-close",tabIndex:"0",onClick:this.clearSearch,"aria-controls":"search-component-magic-search","aria-label":t("Clear Search")})),o&&s&&E.default.createElement(N.default,{initialSelected:this.props.tier,options:r,onSelect:this.props.select}))),E.default.createElement("div",{onClick:this.handleClickInside},p&&E.default.createElement(q.default,{ref:"suggestions",terms:this.props.filters,input:this.state.editedSearchElement,suggest:this.suggest}),!p&&E.default.createElement(V.default,{ref:"welcome",taxonomies:a,topSearches:[],suggestionsCallback:this.insertTextInInput})))}}]),t}(E.default.Component);X.propTypes={showTierThemesControl:k.default.bool},X.defaultProps={showTierThemesControl:!0},X.propTypes={tier:k.default.string,select:k.default.func.isRequired,siteId:k.default.number,onSearch:k.default.func.isRequired,search:k.default.string,translate:k.default.func.isRequired},X.defaultProps={tier:"all"},t.default=(0,C.connect)(function(e){return{filters:(0,K.default)(e),allValidFilters:(0,i.default)((0,Y.default)(e))}})((0,H.localize)((0,S.default)(X))),e.exports=t.default}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./client/my-sites/themes/themes-magic-search-card/taxonomies-config.js":function(e,t,n){"use strict";function s(e){return(0,o.get)(r,e,"tag")}Object.defineProperty(t,"__esModule",{value:!0}),t.taxonomiesWelcomeWhitelist=void 0,t.taxonomyToGridicon=s;var o=n("./node_modules/lodash/lodash.js"),r=(t.taxonomiesWelcomeWhitelist=["column","feature","layout","subject","style"],{color:"ink",column:"align-justify",feature:"customize",layout:"layout",subject:"info-outline",style:"themes"})},"./client/my-sites/themes/themes-magic-search-card/welcome.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=s(o),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(p),f=n("./node_modules/prop-types/index.js"),h=s(f),g=n("./node_modules/react/react.js"),_=s(g),b=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/classnames/index.js"),y=s(v),j=n("./node_modules/gridicons/build/index.js"),E=s(j),x=n("./node_modules/i18n-calypso/index.js"),k=s(x),T=n("./client/my-sites/themes/themes-magic-search-card/taxonomies-config.js"),S=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={suggestionPosition:-1},n.onMouseDown=function(e){n.props.suggestionsCallback(e.target.textContent+":"),e.stopPropagation(),e.preventDefault()},n.movePositionBy=function(e){var t=n.state.suggestionPosition+e;t<0?t=n.visibleTaxonomies.length-1:t>n.visibleTaxonomies.length-1&&(t=0),n.setState({suggestionPosition:t})},n.handleKeyEvent=function(e){switch(e.key){case"ArrowDown":n.movePositionBy(1),e.preventDefault();break;case"ArrowUp":n.movePositionBy(-1),e.preventDefault();break;case"Enter":var t=n.state.suggestionPosition;if(t!==-1)return n.props.suggestionsCallback(n.visibleTaxonomies[t]+":"),e.stopPropagation(),e.preventDefault(),!0}return!1},n.renderToken=function(e){var t=(0,y.default)("themes-magic-search-card__welcome-taxonomy","themes-magic-search-card__welcome-taxonomy-type-"+e,{"themes-magic-search-card__welcome-taxonomy-highlight":n.visibleTaxonomies[n.state.suggestionPosition]===e});return _.default.createElement("div",{className:t,onMouseDownCapture:n.onMouseDown,key:e},_.default.createElement(E.default,{icon:(0,T.taxonomyToGridicon)(e),className:"themes-magic-search-card__welcome-taxonomy-icon",size:18}),e)},n.renderTaxonomies=function(){var e=n.props.taxonomies;return n.visibleTaxonomies=(0,b.intersection)(e,T.taxonomiesWelcomeWhitelist),n.visibleTaxonomies.map(function(e){return n.renderToken(e)})},n.visibleTaxonomies=[],n}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return _.default.createElement("div",{className:"themes-magic-search-card__welcome"},_.default.createElement("div",{className:"themes-magic-search-card__welcome-header"},k.default.translate("Search by")),_.default.createElement("div",{className:"themes-magic-search-card__welcome-taxonomies"},this.renderTaxonomies()))}}]),t}(_.default.Component);S.propTypes={taxonomies:h.default.array,topSearches:h.default.array,suggestionsCallback:h.default.func},S.defaultProps={taxonomies:[],topSearches:[],suggestionsCallback:b.noop},t.default=S,e.exports=t.default},"./client/my-sites/themes/themes-selection-header/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prop-types/index.js"),r=s(o),i=n("./node_modules/react/react.js"),a=s(i),l=n("./node_modules/classnames/index.js"),u=s(l),d=n("./client/components/section-header/index.jsx"),c=s(d),p=n("./node_modules/i18n-calypso/index.js"),m=function(e){var t=e.label,n=e.count,s=e.translate,o=(0,u.default)("themes-selection-header",{"is-placeholder":null===n});return a.default.createElement("div",{className:o},a.default.createElement(c.default,{label:t||s("WordPress.com themes"),count:n}))};m.propTypes={label:r.default.string,count:r.default.number},t.default=(0,p.localize)(m),e.exports=t.default},"./client/my-sites/themes/themes-selection.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/extends.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/react/react.js"),v=s(b),y=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/lodash/lodash.js"),E=n("./client/my-sites/themes/helpers.js"),x=n("./client/components/data/query-themes/index.jsx"),k=s(x),T=n("./client/components/themes-list/index.jsx"),S=s(T),C=n("./client/my-sites/themes/themes-selection-header/index.jsx"),w=s(C),P=n("./client/state/analytics/actions.js"),I=n("./client/state/sites/selectors.js"),A=n("./client/state/current-user/selectors.js"),O=n("./client/state/themes/selectors.js"),M=n("./client/state/themes/actions.js"),R=n("./client/config/index.js"),U=s(R),N=n("./client/state/selectors/prepend-theme-filter-keys.js"),L=s(N),q=function(e){function t(){var e,n,s,o;(0,u.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=s=(0,m.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(i))),s.recordSearchResultsClick=function(e,t,n){var o=s.props,r=o.query,i=o.themes,a=o.filterString,l=a,u=l+(r.search||"");s.props.recordTracksEvent("calypso_themeshowcase_theme_click",{search_term:u||null,search_taxonomies:l,theme:e,results_rank:t+1,results:i.map((0,j.property)("id")).join(),page_number:r.page,theme_on_page:parseInt((t+1)/r.number),action:(0,j.snakeCase)(n)})},s.onScreenshotClick=function(e,t){(0,E.trackClick)("theme","screenshot"),s.props.isThemeActive(e)||s.recordSearchResultsClick(e,t,"screenshot_info"),s.props.onScreenshotClick&&s.props.onScreenshotClick(e)},s.fetchNextPage=function(e){s.props.isRequesting||s.props.isLastPage||(e.triggeredByScroll&&s.trackScrollPage(),s.props.incrementPage())},s.getOptions=function(e){var t=s.props.getOptions(e),n=function(n){var o=void 0,r=s.props.secondaryOption;return function(i){return s.props.isLoggedIn?s.props.isThemeActive(e)?o=t.customize:t.purchase?o=t.purchase:t.upgradePlan?(o=t.upgradePlan,r=null):o=t.activate:(o=t.signup,r=null),s.props.setThemePreviewOptions(o,r),n(i)}};return t&&t.preview&&(t.preview.action=n(t.preview.action)),t},o=n,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"trackScrollPage",value:function(){this.props.recordTracksEvent("calypso_themeshowcase_scroll"),this.props.trackScrollPage()}},{key:"trackLastPage",value:function(){this.props.recordGoogleEvent("Themes","Reached Last Page"),this.props.recordTracksEvent("calypso_themeshowcase_last_page_scroll")}},{key:"render",value:function(){var e=this.props,t=e.source,n=e.query,s=e.listLabel,o=e.themesCount,r=e.upsellUrl;return v.default.createElement("div",{className:"themes__selection"},v.default.createElement(k.default,{query:n,siteId:t}),v.default.createElement(w.default,{label:s,count:o}),v.default.createElement(S.default,{upsellUrl:r,themes:this.props.themes,fetchNextPage:this.fetchNextPage,onMoreButtonClick:this.recordSearchResultsClick,getButtonOptions:this.getOptions,onScreenshotClick:this.onScreenshotClick,getScreenshotUrl:this.props.getScreenshotUrl,getActionLabel:this.props.getActionLabel,isActive:this.props.isThemeActive,getPrice:this.props.getPremiumThemePrice,isInstalling:this.props.isInstallingTheme,loading:this.props.isRequesting,emptyContent:this.props.emptyContent,placeholderCount:this.props.placeholderCount}))}}]),t}(b.Component);q.propTypes={emptyContent:_.default.element,query:_.default.object.isRequired,siteId:_.default.number,onScreenshotClick:_.default.func,getOptions:_.default.func,getActionLabel:_.default.func,incrementPage:_.default.func,source:_.default.oneOfType([_.default.number,_.default.oneOf(["wpcom","wporg"])]),themes:_.default.array,themesCount:_.default.number,isRequesting:_.default.bool,isLastPage:_.default.bool,isThemeActive:_.default.func,getPremiumThemePrice:_.default.func,isInstallingTheme:_.default.func,placeholderCount:_.default.number},q.defaultProps={emptyContent:null,showUploadButton:!0};var D=(0,y.connect)(function(e,t){var n=t.filter,s=t.page,o=t.search,r=t.tier,i=t.vertical,a=t.siteId,l=t.source,u=(0,I.isJetpackSite)(e,a),d=void 0;d="wpcom"===l||"wporg"===l?l:a&&u?a:"wpcom";var c=(0,j.includes)(["wpcom","wporg"],d)?20:2e3,p={search:o,page:s,tier:U.default.isEnabled("upgrades/premium-themes")?r:"free",filter:(0,j.compact)([n,i]).join(","),number:c};return{query:p,source:d,siteSlug:(0,I.getSiteSlug)(e,a),themes:(0,O.getThemesForQueryIgnoringPage)(e,d,p)||[],themesCount:(0,O.getThemesFoundForQuery)(e,d,p),isRequesting:(0,O.isRequestingThemesForQuery)(e,d,p),isLastPage:(0,O.isThemesLastPageForQuery)(e,d,p),isLoggedIn:!!(0,A.getCurrentUserId)(e),isThemeActive:function(t){return(0,O.isThemeActive)(e,t,a)},isInstallingTheme:function(t){return(0,O.isInstallingTheme)(e,t,a)},getPremiumThemePrice:function(t){return(0,O.getPremiumThemePrice)(e,t,a)},filterString:(0,L.default)(e,p.filter)}},{setThemePreviewOptions:M.setThemePreviewOptions,recordGoogleEvent:P.recordGoogleEvent,recordTracksEvent:P.recordTracksEvent})(q),F=function(e){function t(){var e,n,s,o;(0,u.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=s=(0,m.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(i))),s.state={page:1},s.incrementPage=function(){s.setState({page:s.state.page+1})},s.resetPage=function(){s.setState({page:1})},o=n,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.search===this.props.search&&e.tier===this.props.tier&&(0,j.isEqual)(e.filter,this.props.filter)&&(0,j.isEqual)(e.vertical,this.props.vertical)||this.resetPage()}},{key:"render",value:function(){return v.default.createElement(D,(0,r.default)({},this.props,{page:this.state.page,incrementPage:this.incrementPage}))}}]),t}(v.default.Component);t.default=F,e.exports=t.default},"./client/my-sites/themes/themes-site-selector-modal.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/assign.js"),r=s(o),i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(i),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=n("./node_modules/prop-types/index.js"),_=s(g),b=n("./node_modules/react/react.js"),v=s(b),y=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/page/index.js"),E=s(j),x=n("./node_modules/lodash/lodash.js"),k=n("./client/components/theme/index.jsx"),T=s(k),S=n("./client/components/site-selector-modal/index.jsx"),C=s(S),w=n("./client/my-sites/themes/helpers.js"),P=n("./client/state/sites/selectors.js"),I=n("./client/state/themes/selectors.js"),A=_.default.shape({label:_.default.string,header:_.default.string,getUrl:_.default.func,action:_.default.func}),O=function(e){function t(){var e,n,s,o;(0,u.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=s=(0,m.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),s.state={selectedThemeId:null,selectedOption:null},s.trackAndCallAction=function(e){var t=s.state.selectedOption.action,n=s.state.selectedThemeId,o=s.props.search,r=s.props.getSiteSlug(e),i=s.props.pathName+"/"+r;o&&(i+="?s="+o),(0,w.trackClick)("site selector",s.props.name),(0,E.default)(i),t&&(0,x.defer)(function(){t(n,e)})},s.showSiteSelectorModal=function(e,t){s.setState({selectedThemeId:t,selectedOption:e})},s.hideSiteSelectorModal=function(){s.showSiteSelectorModal(null,null)},s.wrapOption=function(e){return(0,r.default)({},e,e.header?{action:function(t){return s.showSiteSelectorModal(e,t)}}:{},e.getUrl&&e.header?{getUrl:null}:{})},o=n,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=v.default.cloneElement(this.props.children,(0,r.default)({},(0,x.omit)(this.props,["children","options","defaultOption"]),{options:(0,x.mapValues)(this.props.options,this.wrapOption),defaultOption:this.wrapOption(this.props.defaultOption),secondaryOption:this.props.secondaryOption?this.wrapOption(this.props.secondaryOption):null})),t=this.state,n=t.selectedOption,s=t.selectedThemeId,o=this.props.getWpcomTheme(s);return v.default.createElement("div",null,e,n&&v.default.createElement(C.default,{className:"themes__site-selector-modal",isVisible:!0,filter:function(e){return!(n.hideForTheme&&n.hideForTheme(s,e))},hide:this.hideSiteSelectorModal,mainAction:this.trackAndCallAction,mainActionLabel:n.label,getMainUrl:n.getUrl?function(e){return n.getUrl(s,e)}:null},v.default.createElement(T.default,{isActionable:!1,theme:o}),v.default.createElement("h1",null,n.header)))}}]),t}(v.default.Component);O.propTypes={children:_.default.element,options:_.default.objectOf(A),defaultOption:A,secondaryOption:A,pathName:_.default.string.isRequired,getSiteSlug:_.default.func,getWpcomTheme:_.default.func},t.default=(0,y.connect)(function(e){return{getSiteSlug:function(t){return(0,P.getSiteSlug)(e,t)},getWpcomTheme:function(t){return(0,I.getTheme)(e,"wpcom",t)}}})(O),e.exports=t.default},"./client/my-sites/themes/validate-filters.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e.params.filter)return t();var n=e.params.filter.replace(/\s/g,"+"),s=n.split(/[,+]/).filter(function(t){return(0,p.default)(e.store.getState(),t)}),o=i(e,s).join("+");if(o!==n){var r=e.path,a=r.replace("/filter/"+n,o?"/filter/"+o:"");return e.isServerSide?e.res.redirect(a):l.default.redirect(a)}t()}function r(e,t){var n=e.params.vertical,s=e.store;if(!n)return t();if((0,d.default)(s.getState(),"subject",n))t();else if(e.isServerSide)return t("route")}function i(e,t){return t.map(function(t){return(0,f.default)(e.store.getState(),t)}).sort().map(function(t){return(0,g.default)(e.store.getState(),t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateFilters=o,t.validateVertical=r,t.sortFilterTerms=i;var a=n("./node_modules/page/index.js"),l=s(a),u=n("./client/state/selectors/get-theme-filter-term.js"),d=s(u),c=n("./client/state/selectors/is-valid-theme-filter-term.js"),p=s(c),m=n("./client/state/selectors/get-theme-filter-string-from-term.js"),f=s(m),h=n("./client/state/selectors/get-theme-filter-term-from-string.js"),g=s(h)},"./client/state/purchases/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.removePurchase=t.fetchUserPurchases=t.fetchSitePurchases=t.clearPurchases=t.cancelPrivacyProtection=void 0;var o=n("./node_modules/babel-runtime/core-js/promise.js"),r=s(o),i=n("./node_modules/i18n-calypso/index.js"),a=s(i),l=n("./client/lib/olark/index.js"),u=s(l),d=n("./client/state/action-types.js"),c=n("./client/lib/wp/browser.js"),p=s(c),m=p.default.undocumented(),f=a.default.translate("There was an error retrieving purchases."),h=a.default.translate("There was an error removing the purchase.");t.cancelPrivacyProtection=function(e){return function(t){return t({type:d.PRIVACY_PROTECTION_CANCEL,purchaseId:e}),new r.default(function(t,n){m.cancelPrivacyProtection(e,function(e,s){e?n(e):t(s)})}).then(function(e){t({type:d.PRIVACY_PROTECTION_CANCEL_COMPLETED,purchase:e.upgrade})}).catch(function(n){t({type:d.PRIVACY_PROTECTION_CANCEL_FAILED,purchaseId:e,error:n.message||a.default.translate("There was a problem canceling this privacy protection. Please try again later or contact support.")})})}},t.clearPurchases=function(){return u.default.updateOlarkGroupAndEligibility(),{type:d.PURCHASES_REMOVE}},t.fetchSitePurchases=function(e){return function(t){return t({type:d.PURCHASES_SITE_FETCH,siteId:e}),new r.default(function(t,n){m.sitePurchases(e,function(e,s){e?n(e):t(s)})}).then(function(n){t({type:d.PURCHASES_SITE_FETCH_COMPLETED,siteId:e,purchases:n})}).catch(function(){t({type:d.PURCHASES_SITE_FETCH_FAILED,error:f})})}},t.fetchUserPurchases=function(e){return function(t){return t({type:d.PURCHASES_USER_FETCH}),new r.default(function(e,t){m.me().purchases(function(n,s){n?t(n):e(s)})}).then(function(n){t({type:d.PURCHASES_USER_FETCH_COMPLETED,purchases:n,userId:e})}).catch(function(){t({type:d.PURCHASES_USER_FETCH_FAILED,error:f})})}},t.removePurchase=function(e,t){return function(n){return new r.default(function(t,n){m.me().deletePurchase(e,function(e,s){e?n(e):t(s)})}).then(function(e){n({type:d.PURCHASE_REMOVE_COMPLETED,purchases:e.purchases,userId:t}),u.default.updateOlarkGroupAndEligibility()}).catch(function(e){n({type:d.PURCHASE_REMOVE_FAILED,error:e.message||h})})}}},"./client/state/themes/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return{type:K.THEME_BACK_PATH_SET,path:e}}function r(e,t){return i([e],t)}function i(e,t,n,s){return function(o,r){var i=e,a=s;if((0,X.isJetpackSite)(r(),t)){var l=(0,Y.shouldFilterWpcomThemes)(r(),t);i=(0,q.filter)(e,function(e){return(0,G.isThemeMatchingQuery)(n,e)&&!(l&&(0,G.isThemeFromWpcom)(e))}),a=i.length}o({type:K.THEMES_REQUEST_SUCCESS,themes:i,siteId:t,query:n,found:a})}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,s){var o=(new Date).getTime();n({type:K.THEMES_REQUEST,siteId:e,query:t});var r=void 0;return r="wporg"===e?function(){return Q.default.fetchThemesList(t)}:"wpcom"===e?function(){return J.default.undocumented().themes(null,(0,L.default)({},t,{apiVersion:"1.2"}))}:function(){return J.default.undocumented().themes(e,(0,L.default)({},t,{apiVersion:"1"}))},r().then(function(r){var a=r.themes,l=r.info;l=void 0===l?{}:l;var u=l.results,d=r.found,c=void 0===d?u:d,p=void 0;if(p="wporg"===e?(0,q.map)(a,G.normalizeWporgTheme):"wpcom"===e?(0,q.map)(a,G.normalizeWpcomTheme):(0,q.map)(a,G.normalizeJetpackTheme),(t.search||t.filter)&&1===t.page){var m=(new Date).getTime()-o,f=(0,ne.default)(s(),t.filter),h=f+(t.search||""),g=(0,Z.recordTracksEvent)("calypso_themeshowcase_search",{search_term:h||null,search_taxonomies:f,tier:t.tier,response_time_in_ms:m,result_count:c,results_first_page:p.map((0,q.property)("id")).join()});n(g)}n(i(p,e,t,c))}).catch(function(s){n({type:K.THEMES_REQUEST_FAILURE,siteId:e,query:t,error:s})})}}function l(e,t,n){return{type:K.THEME_REQUEST_FAILURE,siteId:e,themeId:t,error:n}}function u(e,t){return function(n){return n({type:K.THEME_REQUEST,siteId:t,themeId:e}),"wporg"===t?Q.default.fetchThemeInformation(e).then(function(s){if(!s)throw"Theme not found";n(r((0,G.normalizeWporgTheme)(s),t)),n({type:K.THEME_REQUEST_SUCCESS,siteId:t,themeId:e})}).catch(function(s){n({type:K.THEME_REQUEST_FAILURE,siteId:t,themeId:e,error:s})}):"wpcom"===t?J.default.undocumented().themeDetails(e).then(function(s){n(r((0,G.normalizeWpcomTheme)(s),t)),n({type:K.THEME_REQUEST_SUCCESS,siteId:t,themeId:e})}).catch(function(s){n({type:K.THEME_REQUEST_FAILURE,siteId:t,themeId:e,error:s})}):J.default.undocumented().jetpackThemeDetails(e,t).then(function(s){var o=s.themes;n(i((0,q.map)(o,G.normalizeJetpackTheme),t)),n({type:K.THEME_REQUEST_SUCCESS,siteId:t,themeId:e})}).catch(function(s){n(l(t,e,s))})}}function d(e){return function(t,n){return t({type:K.ACTIVE_THEME_REQUEST,siteId:e}),J.default.undocumented().activeTheme(e).then(function(s){ae("Received current theme",s);var o=(0,X.isJetpackSite)(n(),e)?e:"wpcom";t(r(s,o)),t({type:K.ACTIVE_THEME_REQUEST_SUCCESS,siteId:e,theme:s})}).catch(function(n){t({type:K.ACTIVE_THEME_REQUEST_FAILURE,siteId:e,error:n})})}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(o,r){if((0,X.isJetpackSite)(r(),t)&&!(0,Y.getTheme)(r(),t,e)){var i=M(r(),t,e);return o(v(i,t,n,s))}return o(p(e,t,n,s))}}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(o){return o({type:K.THEME_ACTIVATE,themeId:e,siteId:t}),J.default.undocumented().activateTheme(e,t).then(function(r){var i=r.stylesheet||e;o(m(i,t,n,s))}).catch(function(n){o({type:K.THEME_ACTIVATE_FAILURE,themeId:e,siteId:t,error:n})})}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function(o,r){var i={type:K.THEME_ACTIVATE_SUCCESS,themeStylesheet:e,siteId:t},a=(0,Y.getActiveTheme)(r(),t),l=(0,Y.getLastThemeQuery)(r(),t),u=(0,ne.default)(r(),l.filter),d=u+(l.search||""),c=(0,Z.recordTracksEvent)("calypso_themeshowcase_theme_activate",{theme:(0,G.getThemeIdFromStylesheet)(e),previous_theme:a,source:n,purchased:s,search_term:d||null,search_taxonomies:u});o((0,Z.withAnalytics)(c,i));
};return o}function f(e,t){return function(n,s){return n({type:K.THEME_INSTALL,siteId:t,themeId:e}),J.default.undocumented().installThemeOnJetpack(t,e).then(function(o){if(n(r(o,t)),n({type:K.THEME_INSTALL_SUCCESS,siteId:t,themeId:e}),(0,q.endsWith)(e,"-wpcom")){var i=(0,Y.getWpcomParentThemeId)(s(),e.replace("-wpcom",""));if(i)return n(f(i+"-wpcom",t))}}).catch(function(s){n({type:K.THEME_INSTALL_FAILURE,siteId:t,themeId:e,error:s})})}}function h(e){return{type:K.THEME_CLEAR_ACTIVATED,siteId:e}}function g(e,t){return function(n,s){if((0,X.isJetpackSite)(s(),t)&&!(0,Y.getTheme)(s(),t,e)){var o=M(s(),t,e);return n(_(o,t))}return n(b(e,t))}}function _(e,t){return function(n){return n(f(e,t)).then(function(){n(b(e,t))})}}function b(e,t){return function(n,s){var o=(0,Y.getThemeCustomizeUrl)(s(),e,t);return(0,B.isExternal)(o)?void(window.location.href=o):void(0,W.default)((0,Y.getThemeCustomizeUrl)(s(),e,t))}}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(o){return o(f(e,t)).then(function(){o(p(e,t,n,s))})}}function y(e,t){return function(n){return n({type:K.THEME_UPLOAD_START,siteId:e}),J.default.undocumented().uploadTheme(e,t,function(t){n({type:K.THEME_UPLOAD_PROGRESS,siteId:e,loaded:t.loaded,total:t.total})}).then(function(t){n(r(t,e)),n({type:K.THEME_UPLOAD_SUCCESS,siteId:e,themeId:t.id})}).catch(function(t){n({type:K.THEME_UPLOAD_FAILURE,siteId:e,error:t})})}}function j(e){return{type:K.THEME_UPLOAD_CLEAR,siteId:e}}function E(e,t,n){var s=n?"plugins":"themes";return function(o){var r={type:K.THEME_TRANSFER_INITIATE_REQUEST,siteId:e};return o((0,Z.withAnalytics)((0,Z.recordTracksEvent)("calypso_automated_transfer_initiate_transfer",{plugin:n,context:s}),r)),J.default.undocumented().initiateTransfer(e,n,t,function(t){o({type:K.THEME_TRANSFER_INITIATE_PROGRESS,siteId:e,loaded:t.loaded,total:t.total})}).then(function(t){var r=t.transfer_id;if(!r)return o(T(e,{error:"initiate_failure"},n));var i={type:K.THEME_TRANSFER_INITIATE_SUCCESS,siteId:e,transferId:r};o((0,Z.withAnalytics)((0,Z.recordTracksEvent)("calypso_automated_transfer_initiate_success",{plugin:n,context:s}),i)),o(S(e,r))}).catch(function(t){o(T(e,t,n))})}}function x(e,t,n,s,o){return{type:K.THEME_TRANSFER_STATUS_RECEIVE,siteId:e,transferId:t,status:n,message:s,themeId:o}}function k(e,t,n){return{type:K.THEME_TRANSFER_STATUS_FAILURE,siteId:e,transferId:t,error:n}}function T(e,t,n){var s=n?"plugin":"theme";return function(o){var r={type:K.THEME_TRANSFER_INITIATE_FAILURE,siteId:e,error:t};o((0,Z.withAnalytics)((0,Z.recordTracksEvent)("calypso_automated_transfer_initiate_failure",{plugin:n,context:s}),r))}}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18e4,o=Date.now()+s;return function(s){var r=function r(i,a){return Date.now()>o?(s(k(e,t,"client timeout")),i()):J.default.undocumented().transferStatus(e,t).then(function(o){var l=o.status,u=o.message,d=o.uploaded_theme_slug;if(s(x(e,t,l,u,d)),"complete"===l){var c=d?"themes":"plugins";return s((0,Z.recordTracksEvent)("calypso_automated_transfer_complete",{transfer_id:t,context:c})),i()}return(0,q.delay)(r,n,i,a)}).catch(function(n){return s(k(e,t,n)),i()})};return new U.default(r)}}function C(e,t){return function(n){return n({type:K.THEME_DELETE,themeId:e,siteId:t}),J.default.undocumented().deleteThemeFromJetpack(t,e).then(function(s){n({type:K.THEME_DELETE_SUCCESS,themeId:e,siteId:t,themeName:s.name})}).catch(function(s){n({type:K.THEME_DELETE_FAILURE,themeId:e,siteId:t,error:s})})}}function w(e,t){return function(n,s){var o=(0,Y.getTheme)(s(),t,e),r=o.name,i=(0,X.getSiteTitle)(s(),t);(0,ie.default)(oe.default.translate("Are you sure you want to delete %(themeName)s from %(siteTitle)s?",{args:{themeName:r,siteTitle:i},comment:"Themes: theme delete confirmation dialog"}),function(s){s&&n(C(e,t))},oe.default.translate("Delete %(themeName)s",{args:{themeName:r},comment:"Themes: theme delete dialog confirm button"}),oe.default.translate("Back",{context:"go back (like the back button in a browser)"}))}}function P(e,t){return{type:K.THEME_PREVIEW_OPTIONS,primary:e,secondary:t}}function I(e){return{type:K.THEME_PREVIEW_STATE,themeId:e}}function A(){return{type:K.THEME_PREVIEW_STATE,themeId:null}}function O(){return{type:K.THEME_FILTERS_REQUEST}}function M(e,t,n){return(0,ee.default)(e,t)?n:(0,Y.isDownloadableFromWpcom)(e,n)?n+"-wpcom":n}Object.defineProperty(t,"__esModule",{value:!0});var R=n("./node_modules/babel-runtime/core-js/promise.js"),U=s(R),N=n("./node_modules/babel-runtime/helpers/extends.js"),L=s(N);t.setBackPath=o,t.receiveTheme=r,t.receiveThemes=i,t.requestThemes=a,t.themeRequestFailure=l,t.requestTheme=u,t.requestActiveTheme=d,t.activate=c,t.activateTheme=p,t.themeActivated=m,t.installTheme=f,t.clearActivated=h,t.tryAndCustomize=g,t.installAndTryAndCustomizeTheme=_,t.tryAndCustomizeTheme=b,t.installAndActivateTheme=v,t.uploadTheme=y,t.clearThemeUpload=j,t.initiateThemeTransfer=E,t.pollThemeTransferStatus=S,t.deleteTheme=C,t.confirmDelete=w,t.setThemePreviewOptions=P,t.showThemePreview=I,t.hideThemePreview=A,t.requestThemeFilters=O;var q=n("./node_modules/lodash/lodash.js"),D=n("./node_modules/debug/browser.js"),F=s(D),z=n("./node_modules/page/index.js"),W=s(z),B=n("./client/lib/url/index.js"),H=n("./client/lib/wp/browser.js"),J=s(H),V=n("./client/lib/wporg/index.js"),Q=s(V),K=n("./client/state/action-types.js"),Z=n("./client/state/analytics/actions.js"),Y=n("./client/state/themes/selectors.js"),G=n("./client/state/themes/utils.js"),X=n("./client/state/sites/selectors.js"),$=n("./client/state/selectors/is-site-automated-transfer.js"),ee=s($),te=n("./client/state/selectors/prepend-theme-filter-keys.js"),ne=s(te),se=n("./node_modules/i18n-calypso/index.js"),oe=s(se),re=n("./client/lib/accept/index.js"),ie=s(re),ae=(0,F.default)("calypso:themes:actions")},"./client/state/themes/selectors.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var s=(0,D.find)(["wpcom","wporg",t],function(t){return X(e,t,n)});return X(e,s,n)}function r(e,t,n){return(0,D.get)(e.themes.themeRequestErrors,[n,t],null)}function i(e,t){return(0,D.get)(e.themes.lastQuery,t,{})}function a(e,t,n){var s=(0,Z.getSerializedThemesQuery)(n,t);return!!e.themes.queryRequests[s]}function l(e,t,n){return e.themes.queries[t]?e.themes.queries[t].getFound(n):null}function u(e,t,n){if(!e.themes.queries[t])return null;var s=e.themes.queries[t].getNumberOfPages(n);return null===s?null:(0,V.isJetpackSite)(e,t)?1:Math.max(s,1)}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=u(e,t,n);return null===s?s:s===(n.page||Y.DEFAULT_THEME_QUERY.page)}function c(e,t,n){return!!e.themes.themeRequests[t]&&!!e.themes.themeRequests[t][n]}function p(e,t){return(0,D.get)(e.themes.activeThemeRequests,t,!1)}function m(e,t){return!!X(e,"wpcom",t)}function f(e,t){return!!X(e,"wporg",t)}function h(e,t,n){if(!t)return null;if((0,V.isJetpackSite)(e,n)&&!(J.default.isEnabled("manage/themes/details/jetpack")&&(0,V.canJetpackSiteManage)(e,n)&&(0,V.hasJetpackSiteJetpackThemesExtendedFeatures)(e,n)))return(0,V.getSiteOption)(e,n,"admin_url")+"themes.php?theme="+t;var s=Z.oldShowcaseUrl+t;return J.default.isEnabled("manage/themes/details")&&(s="/theme/"+t),s+(n?"/"+(0,V.getSiteSlug)(e,n):"")}function g(e,t,n){if(!t||!w(e,t))return null;var s=n?"/"+(0,V.getSiteSlug)(e,n):"";return J.default.isEnabled("manage/themes/details")?"/theme/"+t+"/setup"+s:""+Z.oldShowcaseUrl+s+t+"/support"}function _(e,t,n){if(!t)return null;var s=Z.oldShowcaseUrl+t;return J.default.isEnabled("manage/themes/details")&&(s="/theme/"+t+"/support"),s+(n?"/"+(0,V.getSiteSlug)(e,n):"")}function b(e,t,n){return(0,V.isJetpackSite)(e,n)||!w(e,t)?null:"/checkout/"+(0,V.getSiteSlug)(e,n)+"/theme:"+t}function v(e,t,n){var s=(0,V.getCustomizerUrl)(e,n);if(!n||!t||k(e,t,n))return s;var o=(0,D.includes)(s,"?")?"&":"?",r=void 0;if((0,V.isJetpackSite)(e,n))r=t;else{var i=X(e,"wpcom",t);if(!i)return s;r=i.stylesheet}return s+o+"theme="+r}function y(e,t){if(!t)return null;var n="/start/with-theme?ref=calypshowcase&theme="+t;return w(e,t)&&(n+="&premium=true"),n}function j(e,t,n){var s=o(e,n,t);return(0,D.get)(s,"demo_uri")}function E(e,t){return w(e,t)?"//premium-themes.forums.wordpress.com/forum/"+t:m(e,t)?"//en.forums.wordpress.com/forum/themes":f(e,t)?"//wordpress.org/support/theme/"+t:null}function x(e,t){var n=(0,D.get)(e.themes.activeThemes,t,null);return n&&n.replace("-wpcom","")}function k(e,t,n){return x(e,n)===t}function T(e,t){return(0,D.get)(e.themes.activationRequests,t,!1)}function S(e,t){return(0,D.get)(e.themes.completedActivationRequests,t,!1)}function C(e,t,n){var s=$(e,t,n);return(0,D.get)(e.themes.themeInstalls,[n,s],!1)}function w(e,t){var n=X(e,"wpcom",t);return(0,Z.isPremium)(n)}function P(e,t,n){return A(e,t,n)||(0,K.hasFeature)(e,n,G.FEATURE_UNLIMITED_PREMIUM_THEMES)}function I(e,t,n){return!!X(e,n,t)||m(e,t)&&J.default.isEnabled("manage/themes/upload")&&(0,V.hasJetpackSiteJetpackThemesExtendedFeatures)(e,n)}function A(e,t,n){var s=(0,Q.getSitePurchases)(e,n);return(0,D.some)(s,{productSlug:"premium_theme",meta:t})}function O(e){return(0,D.get)(e.themes,"themePreviewOptions",{})}function M(e){return(0,D.get)(e.themes,"themePreviewVisibility",null)}function R(e,t){return(0,D.get)(X(e,"wpcom",t),"template",null)}function U(e,t){var n=(0,D.get)(X(e,"wpcom",t),"download","");return!!(0,D.includes)(n,"wordpress.com")}function N(e,t){return(0,V.isJetpackSite)(e,t)&&J.default.isEnabled("manage/themes/upload")&&(0,V.hasJetpackSiteJetpackThemesExtendedFeatures)(e,t)&&!(0,V.isJetpackSiteMultiSite)(e,t)}function L(e,t,n){return(0,V.isJetpackSite)(e,n)&&w(e,t)&&!(0,K.hasFeature)(e,n,G.FEATURE_UNLIMITED_PREMIUM_THEMES)?"/checkout/"+(0,V.getSiteSlug)(e,n)+"/professional":null}function q(e,t,n){if(!w(e,t)||P(e,t,n))return"";if((0,V.isJetpackSite)(e,n))return z.default.translate("Upgrade",{comment:"Used to indicate a premium theme is available to the user once they upgrade their plan"});var s=X(e,"wpcom",t);return(0,D.get)(s,"price")}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingThemesForQueryIgnoringPage=t.getThemesForQueryIgnoringPage=t.getThemesForQuery=t.getTheme=void 0,t.getCanonicalTheme=o,t.getThemeRequestErrors=r,t.getLastThemeQuery=i,t.isRequestingThemesForQuery=a,t.getThemesFoundForQuery=l,t.getThemesLastPageForQuery=u,t.isThemesLastPageForQuery=d,t.isRequestingTheme=c,t.isRequestingActiveTheme=p,t.isWpcomTheme=m,t.isWporgTheme=f,t.getThemeDetailsUrl=h,t.getThemeSupportUrl=g,t.getThemeHelpUrl=_,t.getThemePurchaseUrl=b,t.getThemeCustomizeUrl=v,t.getThemeSignupUrl=y,t.getThemeDemoUrl=j,t.getThemeForumUrl=E,t.getActiveTheme=x,t.isThemeActive=k,t.isActivatingTheme=T,t.hasActivatedTheme=S,t.isInstallingTheme=C,t.isThemePremium=w,t.isPremiumThemeAvailable=P,t.isThemeAvailableOnJetpackSite=I,t.isThemePurchased=A,t.getThemePreviewThemeOptions=O,t.themePreviewVisibility=M,t.getWpcomParentThemeId=R,t.isDownloadableFromWpcom=U,t.shouldFilterWpcomThemes=N,t.getJetpackUpgradeUrlIfPremiumTheme=L,t.getPremiumThemePrice=q;var D=n("./node_modules/lodash/lodash.js"),F=n("./node_modules/i18n-calypso/index.js"),z=s(F),W=n("./client/lib/create-selector/index.js"),B=s(W),H=n("./client/config/index.js"),J=s(H),V=n("./client/state/sites/selectors.js"),Q=n("./client/state/purchases/selectors.js"),K=n("./client/state/sites/plans/selectors.js"),Z=n("./client/state/themes/utils.js"),Y=n("./client/state/themes/constants.js"),G=n("./client/lib/plans/constants.js"),X=t.getTheme=(0,B.default)(function(e,t,n){var s=e.themes.queries[t];return s?s.getItem(n):null},function(e){return e.themes.queries}),$=function(e,t,n){var s=n&&(0,V.isJetpackSite)(e,n);return s&&!X(e,n,t)?t+"-wpcom":t};t.getThemesForQuery=(0,B.default)(function(e,t,n){var s=e.themes.queries[t];if(!s)return null;var o=s.getItems(n);return o?(0,D.includes)(o,void 0)?null:(0,D.uniq)(o):null},function(e){return e.themes.queries},function(e,t,n){return(0,Z.getSerializedThemesQuery)(n,t)}),t.getThemesForQueryIgnoringPage=(0,B.default)(function(e,t,n){var s=e.themes.queries[t];if(!s)return null;var o=s.getItemsIgnoringPage(n);return o?(0,D.uniq)(o):null},function(e){return e.themes.queries},function(e,t,n){return(0,Z.getSerializedThemesQueryWithoutPage)(n,t)}),t.isRequestingThemesForQueryIgnoringPage=(0,B.default)(function(e,t,n){var s=(0,D.omit)((0,Z.getNormalizedThemesQuery)(n),"page");return(0,D.some)(e.themes.queryRequests,function(e,n){if(!e)return!1;var o=(0,Z.getDeserializedThemesQueryDetails)(n);return o.siteId===t&&(0,D.isEqual)(s,(0,D.omit)(o.query,"page"))})},function(e){return e.themes.queryRequests},function(e,t,n){return(0,Z.getSerializedThemesQuery)(n,t)})},"./client/state/themes/themes-ui/selectors.js":function(e,t,n){"use strict";function s(e){var t=e.themes.themesUI.backPath,n=(0,r.getSelectedSiteSlug)(e);return!n||(0,o.includes)(t,n)?t:"/themes/"+n}Object.defineProperty(t,"__esModule",{value:!0}),t.getBackPath=s;var o=n("./node_modules/lodash/lodash.js"),r=n("./client/state/ui/selectors.js")},"./client/state/themes/upload-theme/selectors.js":function(e,t,n){"use strict";function s(e,t){return(0,c.get)(e.themes.uploadTheme.inProgress,t,!1)}function o(e,t){return!(s(e,t)||!i(e,t))}function r(e,t){return!!(0,c.get)(e.themes.uploadTheme.uploadError,t,!1)}function i(e,t){var n=(0,c.get)(e.themes.uploadTheme.uploadedThemeId,t);return n?n.replace(/-wpcom$/,""):null}function a(e,t){return(0,c.get)(e.themes.uploadTheme.uploadError,t)}function l(e,t){return(0,c.get)(e.themes.uploadTheme.progressTotal,t)}function u(e,t){return(0,c.get)(e.themes.uploadTheme.progressLoaded,t)}function d(e,t){return l(e,t)===u(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isUploadInProgress=s,t.isUploadComplete=o,t.hasUploadFailed=r,t.getUploadedThemeId=i,t.getUploadError=a,t.getUploadProgressTotal=l,t.getUploadProgressLoaded=u,t.isInstallInProgress=d;var c=n("./node_modules/lodash/lodash.js")},"./client/state/ui/drop-zone/actions.js":function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:r.DROPZONE_SHOW,dropZoneName:e}}function o(e){return{type:r.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=s,t.hideDropZone=o;var r=n("./client/state/action-types.js")},"./client/state/ui/olark/actions.js":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(){return{type:p.OLARK_TIMEOUT}}function r(){return{type:p.OLARK_READY}}function i(){return{type:p.OLARK_OPERATORS_AVAILABLE}}function a(){return{type:p.OLARK_OPERATORS_AWAY}}function l(e){return{type:p.OLARK_SET_AVAILABILITY,availability:e}}function u(){return function(e){return e({type:p.OLARK_REQUEST}),new c.default(function(t){e(o()),t()})}}Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/babel-runtime/core-js/promise.js"),c=s(d);t.olarkTimeout=o,t.olarkReady=r,t.operatorsAvailable=i,t.operatorsAway=a,t.setChatAvailability=l,t.requestOlark=u;var p=n("./client/state/action-types.js")},"./node_modules/component-file-picker/index.js":function(e,t,n){function s(e,t){function n(e){t(i.files,e,i),o.unbind(i,"change",n),a=!1}"function"==typeof e&&(t=e,e={}),e=e||{},i.multiple=!!e.multiple,i.webkitdirectory=i.mozdirectory=i.directory=!!e.directory,null==e.accept?delete i.accept:e.accept.join?i.accept=e.accept.join(","):e.accept&&(i.accept=e.accept),a&&o.unbind(i,"change",a),o.bind(i,"change",n),a=n,r.reset(),i.click()}var o=n("./node_modules/component-event/index.js");e.exports=s;var r=document.createElement("form");r.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(r);var i=r.childNodes[0],a=!1},"./node_modules/escape-regexp-component/index.js":function(e,t){e.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},"./node_modules/escape-regexp/index.js":function(e,t){e.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},"./node_modules/title-case-minors/index.js":function(e,t){e.exports=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"]},"./node_modules/to-capital-case/index.js":function(e,t,n){function s(e){return o(e).replace(/(^|\s)(\w)/g,function(e,t,n){return t+n.toUpperCase()})}var o=n("./node_modules/to-capital-case/node_modules/to-no-case/index.js");e.exports=s},"./node_modules/to-capital-case/node_modules/to-no-case/index.js":function(e,t){function n(e){return r.test(e)?e.toLowerCase():(a.test(e)&&(e=s(e)),i.test(e)&&(e=o(e)),e.toLowerCase())}function s(e){return e.replace(l,function(e,t){return t?" "+t:""})}function o(e){return e.replace(u,function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")})}e.exports=n;var r=/\s/,i=/[a-z][A-Z]/,a=/[\W_]/,l=/[\W_]+(.|$)/g,u=/(.)([A-Z]+)/g},"./node_modules/to-title-case/index.js":function(e,t,n){function s(e){return r(e).replace(l,function(e){return e.toLowerCase()}).replace(u,function(e){return e.toUpperCase()})}try{var o=n("./node_modules/escape-regexp/index.js")}catch(e){var o=n("./node_modules/escape-regexp-component/index.js")}var r=n("./node_modules/to-capital-case/index.js"),i=n("./node_modules/title-case-minors/index.js");e.exports=s;var a=i.map(o),l=new RegExp("[^^]\\b("+a.join("|")+")\\b","ig"),u=/:\s*(\w)/g}});