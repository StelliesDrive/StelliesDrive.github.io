webpackJsonp(["async-load-post-editor-editor-sharing-accordion"],{"./client/components/forms/counted-textarea/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CountedTextarea=void 0;var o=n("./node_modules/babel-runtime/helpers/extends.js"),i=s(o),r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(r),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=s(l),c=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(c),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),h=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(h),b=n("./node_modules/react/react.js"),_=s(b),g=n("./node_modules/prop-types/index.js"),j=s(g),v=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/classnames/index.js"),x=s(C),k=n("./node_modules/lodash/lodash.js"),y=n("./client/components/forms/form-textarea/index.jsx"),E=s(y),P=t.CountedTextarea=function(e){function t(){var e,n,s,o;(0,d.default)(this,t);for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];return n=s=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(r))),s.renderCountPanel=function(){var e=s.props.value.length;!e&&s.props.countPlaceholderLength&&(e=s.props.placeholder.length);var t=void 0;return t=s.props.showRemainingCharacters&&s.props.acceptableLength?s.props.translate("%d character remaining","%d characters remaining",{context:"Input length",args:[s.props.acceptableLength-e],count:s.props.acceptableLength-e}):s.props.translate("%d character","%d characters",{context:"Input length",args:[e],count:e}),_.default.createElement("div",{className:"counted-textarea__count-panel"},t,s.props.children)},o=n,(0,f.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,x.default)("counted-textarea",this.props.className,{"is-exceeding-acceptable-length":this.props.acceptableLength&&this.props.value.length>this.props.acceptableLength});return _.default.createElement("div",{className:e},_.default.createElement(E.default,(0,i.default)({},(0,k.omit)(this.props,"className","acceptableLength","showRemainingCharacters","children","countPlaceholderLength","moment","numberFormat","translate"),{className:"counted-textarea__input"})),this.renderCountPanel())}}]),t}(_.default.Component);P.propTypes={value:j.default.string,placeholder:j.default.string,countPlaceholderLength:j.default.bool,onChange:j.default.func,acceptableLength:j.default.number,showRemainingCharacters:j.default.bool,translate:j.default.func},P.defaultProps={value:"",placeholder:"",countPlaceholderLength:!1,onChange:k.noop,showRemainingCharacters:!1,translate:v.translate},t.default=(0,v.localize)(P)},"./client/post-editor/editor-fieldset/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=s(o),r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(r),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=s(l),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=s(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),h=n("./node_modules/prop-types/index.js"),m=s(h),b=n("./node_modules/react/react.js"),_=s(b),g=n("./node_modules/classnames/index.js"),j=s(g),v=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var r=arguments.length,l=Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=s=(0,u.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),s.renderChildren=function(){return _.default.Children.map(s.props.children,function(e){return _.default.createElement("div",{className:"editor-fieldset__option"},e)})},o=n,(0,u.default)(s,o)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return _.default.createElement("fieldset",{className:(0,j.default)("editor-fieldset",this.props.className)},_.default.createElement("legend",{className:"editor-fieldset__legend"},this.props.legend),this.renderChildren())}}]),t}(_.default.Component);v.displayName="EditorFieldset",v.propTypes={legend:m.default.oneOfType([m.default.string,m.default.element]).isRequired},t.default=v,e.exports=t.default},"./client/post-editor/editor-sharing/accordion.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=s(o),r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=s(r),l=n("./node_modules/babel-runtime/helpers/createClass.js"),d=s(l),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=s(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),f=s(p),h=n("./node_modules/prop-types/index.js"),m=s(h),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/react/react.js"),g=s(_),j=n("./node_modules/classnames/index.js"),v=s(j),C=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),k=n("./client/components/accordion/index.jsx"),y=s(k),E=n("./client/components/forms/form-text-input/index.jsx"),P=s(E),S=n("./client/lib/post-metadata/index.js"),z=s(S),M=n("./client/post-editor/editor-sharing/index.jsx"),w=s(M),N=n("./client/components/accordion/section.jsx"),L=s(N),I=n("./client/lib/posts/utils.js"),B=s(I),R=n("./client/lib/viewport/index.js"),A=n("./client/components/data/query-publicize-connections/index.jsx"),O=s(A),D=n("./client/state/current-user/selectors.js"),T=n("./client/state/ui/selectors.js"),q=n("./client/state/ui/editor/selectors.js"),U=n("./client/state/posts/selectors.js"),F=n("./client/state/sites/selectors.js"),J=n("./client/state/sharing/publicize/selectors.js"),V=n("./client/state/selectors/has-broken-site-user-connection.js"),W=s(V),G=n("./client/state/selectors/is-publicize-enabled.js"),H=s(G),K=n("./client/state/analytics/actions.js"),Q=function(e){function t(){var e,n,s,o;(0,a.default)(this,t);for(var r=arguments.length,l=Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=s=(0,u.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),s.getSubtitle=function(){var e=s.props,t=e.isPublicizeEnabled,n=e.post,o=e.connections;if(t&&n&&o){var i=z.default.publicizeSkipped(n);return(0,x.reduce)(o,function(e,t){var n=t.keyring_connection_ID,s=t.label;return(0,x.includes)(i,n)||(0,x.includes)(e,s)||e.push(s),e},[]).join(", ")}},s.renderShortUrl=function(){var e=(0,v.default)("editor-sharing__shortlink",{"is-standalone":s.hideSharing()});return B.default.isPublished(s.props.post)?g.default.createElement("div",{className:e},g.default.createElement("label",{className:"editor-sharing__shortlink-label",htmlFor:"shortlink-field"},s.props.translate("Shortlink")),g.default.createElement(P.default,{className:"editor-sharing__shortlink-field",id:"shortlink-field",value:s.props.post.short_URL,size:s.props.post.short_URL&&s.props.post.short_URL.length,readOnly:!0,selectOnFocus:!0})):null},s.hideSharing=function(){var e=s.props,t=e.isSharingActive,n=e.isLikesActive,o=e.isPublicizeEnabled;return!t&&!n&&!o},o=n,(0,u.default)(s,o)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.hideSharing(),t=(0,v.default)("editor-sharing__accordion",this.props.className,{"is-loading":!this.props.post||!this.props.connections});if(e&&!B.default.isPublished(this.props.post))return null;var n=void 0;return this.props.hasBrokenConnection&&(n={type:"warning",text:this.props.translate("A broken connection requires repair",{comment:"Publicize connection deauthorized, needs user action to fix"}),url:"/sharing/"+this.props.site.slug,position:(0,R.isMobile)()?"top left":"top",onClick:this.props.onStatusClick}),g.default.createElement(y.default,{title:this.props.translate("Sharing"),subtitle:this.getSubtitle(),status:n,className:t,e2eTitle:"sharing"},this.props.site&&g.default.createElement(O.default,{siteId:this.props.site.ID}),g.default.createElement(L.default,null,!e&&g.default.createElement(w.default,{site:this.props.site,post:this.props.post}),this.renderShortUrl()))}}]),t}(g.default.Component);Q.propTypes={site:m.default.object,post:m.default.object,isNew:m.default.bool,connections:m.default.array,hasBrokenConnection:m.default.bool,isPublicizeEnabled:m.default.bool,isSharingActive:m.default.bool,isLikesActive:m.default.bool},t.default=(0,C.connect)(function(e){var t=(0,T.getSelectedSiteId)(e),n=(0,D.getCurrentUserId)(e),s=(0,q.getEditorPostId)(e),o=(0,U.getEditedPostValue)(e,t,s,"type"),i=!1!==(0,F.isJetpackModuleActive)(e,t,"sharedaddy"),r=!1!==(0,F.isJetpackModuleActive)(e,t,"likes");return{connections:(0,J.getSiteUserConnections)(e,t,n),hasBrokenConnection:(0,W.default)(e,t,n),isSharingActive:i,isLikesActive:r,isPublicizeEnabled:(0,H.default)(e,t,o)}},{onStatusClick:function(){return(0,K.recordGoogleEvent)("Editor","Clicked Accordion Broken Status")}})((0,b.localize)(Q)),e.exports=t.default},"./client/post-editor/editor-sharing/index.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.post,n=e.site;return l.default.createElement("div",{className:"editor-sharing"},l.default.createElement(c.default,{post:t,site:n}),l.default.createElement(p.default,{post:t,site:n}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n("./node_modules/prop-types/index.js"),r=s(i),a=n("./node_modules/react/react.js"),l=s(a),d=n("./client/post-editor/editor-sharing/publicize-options.jsx"),c=s(d),u=n("./client/post-editor/editor-sharing/sharing-like-options.jsx"),p=s(u);o.propTypes={site:r.default.object,post:r.default.object},e.exports=t.default},"./client/post-editor/editor-sharing/publicize-connection.jsx":function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorSharingPublicizeConnection=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(u),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),m=n("./node_modules/prop-types/index.js"),b=o(m),_=n("./node_modules/i18n-calypso/index.js"),g=n("./node_modules/react/react.js"),j=o(g),v=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/gridicons/build/index.js"),x=o(C),k=n("./client/components/forms/form-checkbox/index.jsx"),y=o(k),E=n("./client/lib/post-metadata/index.js"),P=o(E),S=n("./client/lib/posts/actions.js"),z=o(S),M=n("./client/lib/posts/stats.js"),w=s(M),N=n("./client/components/notice/index.jsx"),L=o(N),I=n("./client/components/notice/notice-action.jsx"),B=o(I),R=t.EditorSharingPublicizeConnection=function(e){function t(){var e,n,s,o;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=s=(0,p.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),s.isConnectionSkipped=function(){var e=s.props,t=e.post,n=e.connection;return t&&n&&(0,v.includes)(P.default.publicizeSkipped(t),n.keyring_connection_ID)},s.isConnectionDone=function(){var e=s.props,t=e.post,n=e.connection;return t&&n&&(0,v.includes)(P.default.publicizeDone(t),n.keyring_connection_ID)},s.isDisabled=function(){var e=s.props.connection;return!e||e.read_only},s.onChange=function(e){var t=s.props.connection;t&&(e.target.checked?(z.default.deleteMetadata("_wpas_skip_"+t.keyring_connection_ID),w.recordStat("sharing_enabled_"+t.service),w.recordEvent("Publicize Service",t.service,"enabled")):(z.default.updateMetadata("_wpas_skip_"+t.keyring_connection_ID,1),w.recordStat("sharing_disabled_"+t.service),w.recordEvent("Publicize Service",t.service,"disabled")))},s.renderBrokenConnection=function(){var e=s.props.connection;if(e&&"broken"===e.status)return j.default.createElement(L.default,{isCompact:!0,className:"editor-sharing__broken-publicize-connection",status:"is-warning",showDismiss:!1},s.props.translate("There is an issue connecting to %s.",{args:e.label}),j.default.createElement(B.default,{onClick:s.props.onRefresh},"Reconnect ",j.default.createElement(x.default,{icon:"external",size:18})))},o=n,(0,p.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.connection,n=e.label;return j.default.createElement("div",{className:"editor-sharing__publicize-connection"},j.default.createElement("label",null,j.default.createElement(y.default,{checked:!this.isConnectionSkipped(),disabled:this.isDisabled(),onChange:this.onChange}),j.default.createElement("span",{"data-e2e-service":n},t&&t.external_display)),this.renderBrokenConnection())}}]),t}(j.default.Component);R.propTypes={post:b.default.object,connection:b.default.object,onRefresh:b.default.func,label:b.default.string},R.defaultProps={onRefresh:function(){}},t.default=(0,_.localize)(R)},"./client/post-editor/editor-sharing/publicize-message.jsx":function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(u),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),m=n("./node_modules/react/react.js"),b=o(m),_=n("./node_modules/i18n-calypso/index.js"),g=n("./node_modules/prop-types/index.js"),j=o(g),v=n("./client/components/forms/counted-textarea/index.jsx"),C=o(v),x=n("./client/components/forms/form-textarea/index.jsx"),k=o(x),y=n("./client/components/info-popover/index.jsx"),E=o(y),P=n("./client/components/track-input-changes/index.jsx"),S=o(P),z=n("./client/lib/posts/actions.js"),M=o(z),w=n("./client/lib/posts/stats.js"),N=s(w),L=function(e){function t(){var e,n,s,o;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=s=(0,p.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),s.onChange=function(e){s.props.onChange?s.props.onChange(e.target.value):M.default.updateMetadata("_wpas_mess",e.target.value)},s.recordStats=function(){N.recordStat("sharing_message_changed"),N.recordEvent("Publicize Sharing Message Changed")},o=n,(0,p.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"renderInfoPopover",value:function(){return b.default.createElement(E.default,{className:"publicize-message-counter-info",position:"bottom left",gaEventCategory:"Editor",popoverName:"SharingMessage"},this.props.translate("The length includes space for the link to your post and an attached image.",{context:"Post editor sharing message counter explanation"}))}},{key:"renderTextarea",value:function(){var e=this.props.preview||this.props.translate("Write a message for your audience here.");return this.props.requireCount?b.default.createElement(C.default,{disabled:this.props.disabled,value:this.props.message,placeholder:e,countPlaceholderLength:!0,onChange:this.onChange,showRemainingCharacters:!0,acceptableLength:this.props.acceptableLength,className:"editor-sharing__message-input"},this.renderInfoPopover()):b.default.createElement(k.default,{disabled:this.props.disabled,value:this.props.message,placeholder:e,onChange:this.onChange,className:"editor-sharing__message-input"})}},{key:"render",value:function(){return b.default.createElement("div",{className:"editor-sharing__publicize-message"},b.default.createElement("h5",{className:"editor-sharing__message-heading"},this.props.translate("Customize the message",{context:"Post editor sharing message heading"})),b.default.createElement(S.default,{onNewValue:this.recordStats},this.renderTextarea()))}}]),t}(m.Component);L.propTypes={disabled:j.default.bool,message:j.default.string,preview:j.default.string,acceptableLength:j.default.number,requireCount:j.default.bool,onChange:j.default.func},L.defaultProps={disabled:!1,message:"",acceptableLength:140,requireCount:!1},t.default=(0,_.localize)(L),e.exports=t.default},"./client/post-editor/editor-sharing/publicize-options.jsx":function(e,t,n){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),u=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(u),f=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(f),m=n("./node_modules/prop-types/index.js"),b=o(m),_=n("./node_modules/i18n-calypso/index.js"),g=n("./node_modules/react/react.js"),j=o(g),v=n("./node_modules/react-redux/es/index.js"),C=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/classnames/index.js"),k=o(x),y=n("./node_modules/gridicons/build/index.js"),E=o(y),P=n("./client/components/data/query-post-types/index.jsx"),S=o(P),z=n("./client/post-editor/editor-sharing/publicize-message.jsx"),M=o(z),w=n("./client/post-editor/editor-sharing/publicize-services.jsx"),N=o(w),L=n("./client/lib/paths/index.js"),I=s(L),B=n("./client/lib/post-metadata/index.js"),R=o(B),A=n("./client/lib/popup-monitor/index.js"),O=o(A),D=n("./client/components/button/index.jsx"),T=o(D),q=n("./client/lib/site/utils.js"),U=o(q),F=n("./client/lib/posts/stats.js"),J=n("./client/state/ui/selectors.js"),V=n("./client/state/ui/editor/selectors.js"),W=n("./client/state/sites/selectors.js"),G=n("./client/state/posts/selectors.js"),H=n("./client/state/post-types/selectors.js"),K=n("./client/state/current-user/selectors.js"),Q=n("./client/state/sharing/publicize/selectors.js"),X=n("./client/state/sharing/publicize/actions.js"),Y=function(e){function t(){var e,n,s,o;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return n=s=(0,p.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(a))),s.connectionPopupMonitor=!1,s.jetpackModulePopupMonitor=!1,s.hasConnections=function(){return s.props.connections&&s.props.connections.length},s.newConnectionPopup=function(){var e=void 0;s.props.site&&(e=I.publicizeConnections(s.props.site),s.connectionPopupMonitor||(s.connectionPopupMonitor=new O.default),s.connectionPopupMonitor.open(e),s.connectionPopupMonitor.once("close",s.onNewConnectionPopupClosed))},s.onNewConnectionPopupClosed=function(){s.props.requestConnections(s.props.site.ID)},s.newConnection=function(){s.newConnectionPopup(),(0,F.recordStat)("sharing_create_service"),(0,F.recordEvent)("Opened Create New Sharing Service Dialog")},s.jetpackModulePopup=function(){var e=void 0;s.props.site&&s.props.site.jetpack&&(e=I.jetpackModules(s.props.site,"publicize"),s.jetpackModulePopupMonitor||(s.jetpackModulePopupMonitor=new O.default),s.jetpackModulePopupMonitor.open(e),s.jetpackModulePopupMonitor.once("close",s.onModuleConnectionPopupClosed))},s.onModuleConnectionPopupClosed=function(){s.props.site&&s.props.site.jetpack&&s.props.site.once("change",function(){s.props.isPublicizeEnabled&&s.props.requestConnections(s.props.site.ID)})},s.renderServices=function(){if(s.props.site&&s.hasConnections())return j.default.createElement(N.default,{post:s.props.post,newConnectionPopup:s.newConnectionPopup})},s.renderMessage=function(){var e=s.hasConnections()?R.default.publicizeSkipped(s.props.post):[],t=s.hasConnections()?s.props.connections.filter(function(t){return e&&-1===e.indexOf(t.keyring_connection_ID)}):[],n=(0,C.includes)((0,C.map)(t,"service"),"twitter"),o=n?94:null;if(s.hasConnections())return j.default.createElement(M.default,{message:R.default.publicizeMessage(s.props.post)||"",requireCount:n,acceptableLength:o})},s.renderAddNewButton=function(){if(U.default.userCan("publish_posts",s.props.site))return j.default.createElement(T.default,{borderless:!0,compact:!0,onClick:s.newConnection},j.default.createElement(E.default,{icon:"add"})," ",s.props.translate("Connect new service"),j.default.createElement("span",{className:"editor-sharing__external-link-indicator"},j.default.createElement(E.default,{icon:"external",size:18})))},s.renderInfoNotice=function(){if(s.hasConnections()||U.default.userCan("publish_posts",s.props.site))return j.default.createElement("p",{className:"editor-drawer__description"},s.props.translate("Connect and select social media services to automatically share this post."))},s.dismissRepublicizeMessage=function(){s.props.dismissShareConfirmation(s.props.siteId,s.props.post.ID)},o=n,(0,p.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillUnmount",value:function(){this.connectionPopupMonitor&&this.connectionPopupMonitor.off("close",this.onNewConnectionPopupClosed),this.jetpackModulePopupMonitor&&this.jetpackModulePopupMonitor.off("close",this.onModuleConnectionPopupClosed)}},{key:"render",value:function(){if(!this.props.isPublicizeEnabled)return null;if(this.props.site&&this.props.site.options.publicize_permanently_disabled)return j.default.createElement("div",{className:"editor-sharing__publicize-disabled"},j.default.createElement("p",null,j.default.createElement("span",null,this.props.translate("Publicize is disabled on this site."))));if(this.props.site&&this.props.site.jetpack&&!this.props.isPublicizeEnabled)return j.default.createElement("div",{className:"editor-sharing__publicize-disabled"},j.default.createElement("p",null,j.default.createElement("span",null,this.props.translate("Enable the Publicize module to automatically share new posts to social networks."))),j.default.createElement("button",{className:"editor-sharing__jetpack-modules-button button is-secondary",onClick:this.jetpackModulePopup},this.props.translate("View Module Settings")));var e=(0,k.default)("editor-sharing__publicize-options",{"has-connections":this.hasConnections(),"has-add-option":U.default.userCan("publish_posts",this.props.site)});return j.default.createElement("div",{className:e},this.props.siteId&&j.default.createElement(S.default,{siteId:this.props.siteId}),this.renderInfoNotice(),this.renderServices(),this.renderAddNewButton(),this.renderMessage())}}]),t}(j.default.Component);Y.propTypes={site:b.default.object,post:b.default.object,siteId:b.default.number,isPublicizeEnabled:b.default.bool,connections:b.default.array,requestConnections:b.default.func},t.default=(0,v.connect)(function(e){var t=(0,J.getSelectedSiteId)(e),n=(0,K.getCurrentUserId)(e),s=(0,V.getEditorPostId)(e),o=(0,G.getEditedPostValue)(e,t,s,"type"),i=!1!==(0,W.isJetpackModuleActive)(e,t,"publicize")&&(0,H.postTypeSupports)(e,t,o,"publicize");return{siteId:t,isPublicizeEnabled:i,connections:(0,Q.getSiteUserConnections)(e,t,n)}},{requestConnections:X.fetchConnections})((0,_.localize)(Y)),e.exports=t.default},"./client/post-editor/editor-sharing/publicize-services.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorSharingPublicizeServices=void 0;var o=n("./node_modules/prop-types/index.js"),i=s(o),r=n("./node_modules/react/react.js"),a=s(r),l=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./client/post-editor/editor-sharing/publicize-connection.jsx"),u=s(c),p=n("./client/state/current-user/selectors.js"),f=n("./client/state/ui/selectors.js"),h=n("./client/state/sharing/publicize/selectors.js"),m=t.EditorSharingPublicizeServices=function(e){var t=e.connections,n=e.post,s=e.newConnectionPopup;return a.default.createElement("ul",{className:"editor-sharing__publicize-services"},(0,d.map)((0,d.groupBy)(t,"label"),function(e,t){return a.default.createElement("li",{key:t,className:"editor-sharing__publicize-service"},a.default.createElement("h5",{className:"editor-sharing__publicize-service-heading"},t),e.map(function(e){return a.default.createElement(u.default,{key:e.ID,post:n,connection:e,onRefresh:s,label:t})}))}))};m.propTypes={connections:i.default.array.isRequired,post:i.default.object,newConnectionPopup:i.default.func.isRequired},t.default=(0,l.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n=(0,p.getCurrentUserId)(e);return{connections:(0,h.getSiteUserConnections)(e,t,n)}})(m)},"./client/post-editor/editor-sharing/sharing-like-options.jsx":function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=s(o),r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=s(r),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=s(l),c=n("./node_modules/babel-runtime/helpers/createClass.js"),u=s(c),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=s(p),h=n("./node_modules/babel-runtime/helpers/inherits.js"),m=s(h),b=n("./node_modules/prop-types/index.js"),_=s(b),g=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/react/react.js"),v=s(j),C=n("./node_modules/react-redux/es/index.js"),x=n("./client/post-editor/editor-fieldset/index.jsx"),k=s(x),y=n("./client/components/forms/form-checkbox/index.jsx"),E=s(y),P=n("./client/lib/posts/actions.js"),S=s(P),z=n("./client/lib/posts/stats.js"),M=n("./client/state/ui/editor/selectors.js"),w=n("./client/state/ui/selectors.js"),N=n("./client/state/sites/selectors.js"),L=function(e){function t(){var e,n,s,o;(0,d.default)(this,t);for(var r=arguments.length,l=Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=s=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),s.isShowingSharingButtons=function(){return s.props.post&&"sharing_enabled"in s.props.post?s.props.post.sharing_enabled:!s.props.site||!s.props.isNew||s.props.site.options.default_sharing_status},s.isShowingLikeButton=function(){return s.props.post&&"likes_enabled"in s.props.post?s.props.post.likes_enabled:!s.props.site||!s.props.isNew||s.props.site.options.default_likes_enabled},s.renderSharingButtonField=function(){if(s.props.isSharingButtonsEnabled)return v.default.createElement("label",null,v.default.createElement(E.default,{name:"sharing_enabled",checked:s.isShowingSharingButtons(),onChange:s.onChange}),v.default.createElement("span",null,s.props.translate("Show Sharing Buttons",{context:"Post Editor"})))},s.renderLikesButtonField=function(){if(s.props.isLikesEnabled)return v.default.createElement("label",null,v.default.createElement(E.default,{name:"likes_enabled",checked:s.isShowingLikeButton(),onChange:s.onChange}),v.default.createElement("span",null,s.props.translate("Show Like Button",{context:"Post Editor"})))},s.onChange=function(e){S.default.edit((0,i.default)({},e.target.name,e.target.checked)),s.recordStats(e)},s.recordStats=function(e){var t=e.target.name,n="sharing_enabled"===e.target.name?"Sharing Buttons":"Like Button";t+=e.target.checked?"_enabled":"_disabled",n+=e.target.checked?" Enabled":" Disabled",(0,z.recordStat)(t),(0,z.recordEvent)(n)},o=n,(0,f.default)(s,o)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.isSharingButtonsEnabled||this.props.isLikesEnabled?v.default.createElement(k.default,{className:"editor-sharing__sharing-like-options",legend:this.props.translate("Sharing Buttons & Likes")},this.renderSharingButtonField(),this.renderLikesButtonField()):null}}]),t}(v.default.Component);L.propTypes={site:_.default.object,post:_.default.object,isSharingButtonsEnabled:_.default.bool,isLikesEnabled:_.default.bool,isNew:_.default.bool},t.default=(0,C.connect)(function(e){var t=(0,w.getSelectedSiteId)(e);return{isSharingButtonsEnabled:!1!==(0,N.isJetpackModuleActive)(e,t,"sharedaddy"),isLikesEnabled:!1!==(0,N.isJetpackModuleActive)(e,t,"likes"),isNew:(0,M.isEditorNewPost)(e)}})((0,g.localize)(L)),e.exports=t.default}});