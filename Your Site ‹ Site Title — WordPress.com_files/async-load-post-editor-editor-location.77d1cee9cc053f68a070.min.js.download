webpackJsonp(["async-load-post-editor-editor-location"],{"./client/components/search-card/index.jsx":function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=o("./node_modules/babel-runtime/helpers/extends.js"),n=r(l),a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r(a),d=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=r(d),u=o("./node_modules/babel-runtime/helpers/createClass.js"),c=r(u),f=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=r(f),m=o("./node_modules/babel-runtime/helpers/inherits.js"),h=r(m),_=o("./node_modules/react/react.js"),b=r(_),j=o("./node_modules/prop-types/index.js"),g=r(j),y=o("./node_modules/classnames/index.js"),v=r(y),x=o("./client/components/card/index.jsx"),C=r(x),S=o("./client/components/search/index.jsx"),E=r(S),k=function(e){function t(){var e,o,r,l;(0,i.default)(this,t);for(var n=arguments.length,a=Array(n),d=0;d<n;d++)a[d]=arguments[d];return o=r=(0,p.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),r.focus=function(){r.refs.search.focus()},r.clear=function(){r.refs.search.clear()},l=o,(0,p.default)(r,l)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,v.default)("search-card",this.props.className);return b.default.createElement(C.default,{className:e},b.default.createElement(E.default,(0,n.default)({ref:"search"},this.props)))}}]),t}(b.default.Component);k.propTypes={additionalClasses:g.default.string,initialValue:g.default.string,placeholder:g.default.string,delaySearch:g.default.bool,onSearch:g.default.func.isRequired,onSearchChange:g.default.func,analyticsGroup:g.default.string,autoFocus:g.default.bool,disabled:g.default.bool,dir:g.default.string,maxLength:g.default.number,hideOpenIcon:g.default.bool,disableAutocorrect:g.default.bool},t.default=k,e.exports=t.default},"./client/lib/geocoding/index.js":function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e){return new a.default(function(t,o){d.default.get(i).query({address:e}).end(function(e,r){return e||!r.ok||"OK"!==r.body.status?o(e):void t(r.body.results)})})}Object.defineProperty(t,"__esModule",{value:!0});var n=o("./node_modules/babel-runtime/core-js/promise.js"),a=r(n);t.geocode=l;var s=o("./node_modules/superagent/lib/client.js"),d=r(s),i="https://maps.googleapis.com/maps/api/geocode/json"},"./client/post-editor/editor-drawer-well/index.jsx":function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=r(l),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=r(a),d=o("./node_modules/babel-runtime/helpers/createClass.js"),i=r(d),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=r(u),f=o("./node_modules/babel-runtime/helpers/inherits.js"),p=r(f),m=o("./node_modules/react/react.js"),h=r(m),_=o("./node_modules/prop-types/index.js"),b=r(_),j=o("./node_modules/classnames/index.js"),g=r(j),y=o("./node_modules/lodash/lodash.js"),v=o("./node_modules/gridicons/build/index.js"),x=r(v),C=o("./node_modules/i18n-calypso/index.js"),S=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.empty,o=e.onClick,r=e.disabled,l=e.icon,n=e.label,a=e.children,s=e.isHidden,d=(0,g.default)("editor-drawer-well",{"is-empty":t,"is-hidden":s});return h.default.createElement("div",{className:d},h.default.createElement("div",{className:"editor-drawer-well__content"},a),t&&h.default.createElement("button",{type:"button",onClick:o,disabled:r,className:"editor-drawer-well__placeholder"},l&&h.default.createElement(x.default,{icon:l,className:"editor-drawer-well__icon"}),h.default.createElement("span",{className:"editor-drawer-well__button button is-secondary is-compact"},n)),this.props.customDropZone)}}]),t}(m.Component);S.propTypes={disabled:b.default.bool,empty:b.default.bool,icon:b.default.string,isHidden:b.default.bool,label:b.default.node,onClick:b.default.func,customDropZone:b.default.node,translate:b.default.func},S.defaultProps={disabled:!1,isHidden:!1,onClick:y.noop,translate:y.identity},t.default=(0,C.localize)(S),e.exports=t.default},"./client/post-editor/editor-location/index.jsx":function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=r(l),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=r(a),d=o("./node_modules/babel-runtime/helpers/createClass.js"),i=r(d),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=r(u),f=o("./node_modules/babel-runtime/helpers/inherits.js"),p=r(f),m=o("./node_modules/prop-types/index.js"),h=r(m),_=o("./node_modules/i18n-calypso/index.js"),b=o("./node_modules/react/react.js"),j=r(b),g=o("./node_modules/querystring-es3/index.js"),y=r(g),v=o("./client/lib/posts/actions.js"),x=r(v),C=o("./client/post-editor/editor-drawer-well/index.jsx"),S=r(C),E=o("./client/lib/posts/stats.js"),k=o("./client/post-editor/editor-location/search.jsx"),w=r(k),M=o("./client/components/notice/index.jsx"),N=r(M),P="https://maps.google.com/maps/api/staticmap?",O=function(e){function t(){var e,o,r,l;(0,s.default)(this,t);for(var a=arguments.length,d=Array(a),i=0;i<a;i++)d[i]=arguments[i];return o=r=(0,c.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),r.state={error:null},r.onGeolocateSuccess=function(e){r.setState({locating:!1}),x.default.updateMetadata({geo_latitude:e.coords.latitude,geo_longitude:e.coords.longitude}),(0,E.recordStat)("location_geolocate_success")},r.onGeolocateFailure=function(e){r.setState({error:e,locating:!1}),(0,E.recordStat)("location_geolocate_failed")},r.resetError=function(){r.setState({error:null})},r.geolocate=function(){r.resetError(),r.setState({locating:!0}),navigator.geolocation.getCurrentPosition(r.onGeolocateSuccess,r.onGeolocateFailure,{enableHighAccuracy:!0}),(0,E.recordStat)("location_geolocate"),(0,E.recordEvent)("Location Geolocated")},r.clear=function(){x.default.deleteMetadata(["geo_latitude","geo_longitude"])},r.onSearchSelect=function(e){x.default.updateMetadata({geo_latitude:e.geometry.location.lat,geo_longitude:e.geometry.location.lng})},r.renderCurrentLocation=function(){if(r.props.coordinates){var e=P+y.default.stringify({markers:r.props.coordinates.join(","),zoom:8,size:"400x300"});return j.default.createElement("img",{src:e,className:"editor-location__map"})}},l=o,(0,c.default)(r,l)}return(0,p.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e,t;return this.state.error&&(e=j.default.createElement(N.default,{status:"is-error",onDismissClick:this.resetError,isCompact:!0},this.props.translate("We couldn't find your current location.",{context:"Post editor geolocation"}))),t=this.state.locating?this.props.translate("Locatingâ€¦",{context:"Post editor geolocation"}):this.props.translate("Get current location",{context:"Post editor geolocation"}),j.default.createElement("div",{className:"editor-location"},e,j.default.createElement(S.default,{icon:"location",label:t,empty:!this.props.coordinates,onClick:this.geolocate,onRemove:this.clear,disabled:this.state.locating},this.renderCurrentLocation()),j.default.createElement(w.default,{onError:this.onGeolocateFailure,onSelect:this.onSearchSelect}))}}]),t}(j.default.Component);O.displayName="EditorLocation",O.propTypes={label:h.default.string,coordinates:function(e,t){var o=e[t];if(o&&(!Array.isArray(o)||2!==o.length||2!==o.filter(Number).length))return new Error("Expected array pair of coordinates for prop `"+t+"`.")}},t.default=(0,_.localize)(O),e.exports=t.default},"./client/post-editor/editor-location/search-result.jsx":function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=r(l),a=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=r(a),d=o("./node_modules/babel-runtime/helpers/createClass.js"),i=r(d),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=r(u),f=o("./node_modules/babel-runtime/helpers/inherits.js"),p=r(f),m=o("./node_modules/prop-types/index.js"),h=r(m),_=o("./node_modules/react/react.js"),b=r(_),j=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.result,o=e.onClick;return b.default.createElement("div",{onClick:o,className:"editor-location__search-result"},t.formatted_address)}}]),t}(b.default.Component);j.displayName="EditorLocationSearchResult",j.propTypes={result:h.default.object.isRequired,onClick:h.default.func},j.defaultProps={onClick:function(){}},t.default=j,e.exports=t.default},"./client/post-editor/editor-location/search.jsx":function(e,t,o){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=l(n),s=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=l(s),i=o("./node_modules/babel-runtime/helpers/createClass.js"),u=l(i),c=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=l(c),p=o("./node_modules/babel-runtime/helpers/inherits.js"),m=l(p),h=o("./node_modules/prop-types/index.js"),_=l(h),b=o("./node_modules/react/react.js"),j=l(b),g=o("./client/lib/geocoding/index.js"),y=o("./client/lib/posts/stats.js"),v=r(y),x=o("./client/components/search-card/index.jsx"),C=l(x),S=o("./client/post-editor/editor-location/search-result.jsx"),E=l(S),k=function(e){function t(){var e,o,r,l;(0,d.default)(this,t);for(var n=arguments.length,s=Array(n),i=0;i<n;i++)s[i]=arguments[i];return o=r=(0,f.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),r.state={results:[],isSearching:!1},r.geocode=function(e){var t=r.props.onError;return r.hasTrackedStats||(v.recordStat("location_search"),v.recordEvent("Location Searched"),r.hasTrackedStats=!0),e?((0,g.geocode)(e).then(function(e){r.mounted&&r.setState({results:e})}).catch(t).then(function(){r.mounted&&r.setState({isSearching:!1})}),void r.setState({isSearching:!0})):void r.setState({results:[]})},r.onSelect=function(e){r.refs.search.clear(),r.props.onSelect(e)},l=o,(0,f.default)(r,l)}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.hasTrackedStats=!1}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,o=t.results,r=t.isSearching;return j.default.createElement("div",{className:"editor-location__search"},j.default.createElement(C.default,{ref:"search",onSearch:this.geocode,searching:r,delaySearch:!0,compact:!0}),j.default.createElement("ul",{className:"editor-location__search-results"},o.map(function(t){return j.default.createElement("li",{key:t.formatted_address},j.default.createElement(E.default,{result:t,onClick:e.onSelect.bind(null,t)}))})))}}]),t}(j.default.Component);k.displayName="EditorLocationSearch",k.propTypes={onError:_.default.func,onSelect:_.default.func},k.defaultProps={onError:function(){},onSelect:function(){}},t.default=k,e.exports=t.default}});