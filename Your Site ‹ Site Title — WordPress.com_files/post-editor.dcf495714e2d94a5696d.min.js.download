webpackJsonp(["post-editor","async-load-post-editor-media-modal"],{"./client/blocks/image-editor/image-editor-buttons.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/components/button/index.jsx"),C=o(x),j=n("./client/state/ui/editor/image-editor/selectors.js"),E=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,n=e.onCancel,o=e.src,r=e.onDone,i=e.onReset,s=e.translate,a=e.doneButtonText;return v.default.createElement("div",{className:"image-editor__buttons"},n&&v.default.createElement(C.default,{className:"image-editor__buttons-button",onClick:n,"data-e2e-button":"cancel"},s("Cancel")),v.default.createElement(C.default,{className:"image-editor__buttons-button",disabled:!t,onClick:i,"data-e2e-button":"reset"},s("Reset")),v.default.createElement(C.default,{className:"image-editor__buttons-button",disabled:!o,primary:!0,onClick:r,"data-e2e-button":"done"},a||s(" Done ")))}}]),t}(g.Component);E.propTypes={src:h.default.string,hasChanges:h.default.bool,resetImageEditorState:h.default.func,onDone:h.default.func,onCancel:h.default.func,onReset:h.default.func,doneButtonText:h.default.string},E.defaultProps={src:"",hasChanges:!1,resetImageEditorState:b.noop,onDone:b.noop,onCancel:b.noop,onReset:b.noop,doneButtonText:""},t.default=(0,y.connect)(function(e){var t=(0,j.getImageEditorFileInfo)(e),n=t.src,o=(0,j.imageEditorHasChanges)(e);return{src:n,hasChanges:o}})((0,_.localize)(E)),e.exports=t.default},"./client/blocks/image-editor/image-editor-canvas.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorCanvas=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-dom/index.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./client/blocks/image-editor/image-editor-crop.jsx"),w=o(E),S=n("./client/lib/media/utils.js"),k=o(S),T=n("./client/state/ui/editor/image-editor/selectors.js"),P=n("./client/state/ui/editor/image-editor/actions.js"),I=n("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),R=o(I),N=t.ImageEditorCanvas=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.frameRateInterval=1e3/30,n.requestAnimationFrameId=null,n.lastTimestamp=null,n.onWindowResize=function(){n.requestAnimationFrameId=window.requestAnimationFrame(n.updateCanvasPosition)},n.onLoadComplete=n.onLoadComplete.bind(n),n.updateCanvasPosition=n.updateCanvasPosition.bind(n),n.isVisible=!1,n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,x.startsWith)(e,"blob")}},{key:"getImage",value:function(e){var t=this,n=this.props,o=n.onLoadError,r=n.mimeType,i=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([i.response],{type:r}));t.initImage(e)}},i.onerror=function(e){return o(e)},i.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),"undefined"!=typeof window&&(this.lastTimestamp=window.performance.now(),window.addEventListener("resize",this.onWindowResize)),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.requestAnimationFrameId)),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,n=t.leftRatio,o=t.topRatio,r=t.widthRatio,i=t.heightRatio,s=this.props,a=s.mimeType,l=s.transform,u=b.default.findDOMNode(this.refs.canvas),d=u.getContext("2d"),c=l.degrees%180!==0,f=c?this.image.height:this.image.width,p=c?this.image.width:this.image.height,m=n*f,h=o*p,g=r*f,v=i*p,y=d.getImageData(m,h,g,v),_=document.createElement("canvas");_.width=g,_.height=v;var x=_.getContext("2d");x.putImageData(y,0,0),k.default.canvasToBlob(_,e,a,1)}},{key:"drawImage",value:function(){if(this.image){var e=b.default.findDOMNode(this.refs.canvas),t=this.image.width,n=this.image.height,o=this.props.transform,r=o.degrees%180!==0;e.width=r?n:t,e.height=r?t:n;var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),i.save(),i.setTransform(1,0,0,1,e.width/2,e.height/2),i.scale(o.scaleX,o.scaleY),i.rotate(o.degrees*Math.PI/180),i.drawImage(this.image,-t/2,-n/2),i.restore()}}},{key:"updateCanvasPosition",value:function(e){var t=e,n=t-this.lastTimestamp;if(!(n<this.frameRateInterval)){this.lastTimestamp=t-n%this.frameRateInterval;var o=this.props.crop,r=o.leftRatio,i=o.topRatio,s=o.widthRatio,a=o.heightRatio,l=b.default.findDOMNode(this.refs.canvas),u=-50*s-100*r,d=-50*a-100*i,c=l.offsetTop,f=l.offsetLeft,p=l.offsetWidth,m=l.offsetHeight;this.props.setImageEditorCropBounds(c-m*-d/100,f-p*-u/100,c+m*(1+d/100),f+p*(1+u/100))}}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,n=e.topRatio,o=e.widthRatio,r=e.heightRatio,i=this.props,s=i.isImageLoaded,a=i.showCrop,l=-50*o-100*t,u=-50*r-100*n,d={transform:"translate("+l+"%, "+u+"%)",maxWidth:85/o+"%",maxHeight:85/r+"%"},c=(0,j.default)("image-editor__canvas",{"is-placeholder":!s});return v.default.createElement("div",{className:"image-editor__canvas-container"},v.default.createElement("canvas",{ref:"canvas",style:d,onMouseDown:this.preventDrag,className:c}),a&&v.default.createElement(w.default,null))}}]),t}(g.Component);N.propTypes={src:h.default.string,mimeType:h.default.string,transform:h.default.shape({degrees:h.default.number,scaleX:h.default.number,scaleY:h.default.number}),crop:h.default.shape({topRatio:h.default.number,leftRatio:h.default.number,widthRatio:h.default.number,heightRatio:h.default.number}),setImageEditorCropBounds:h.default.func,setImageEditorImageHasLoaded:h.default.func,onLoadError:h.default.func,isImageLoaded:h.default.bool,showCrop:h.default.bool},N.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:x.noop,setImageEditorImageHasLoaded:x.noop,onLoadError:x.noop,isImageLoaded:!1,showCrop:!0},t.default=(0,_.connect)(function(e){var t=(0,T.getImageEditorTransform)(e),n=(0,T.getImageEditorFileInfo)(e),o=n.src,r=n.mimeType,i=(0,T.getImageEditorCrop)(e),s=(0,T.isImageEditorImageLoaded)(e),a=(0,R.default)(e);return{src:o,mimeType:r,transform:t,crop:i,isImageLoaded:s,showCrop:!(!s||!a)}},{setImageEditorCropBounds:P.setImageEditorCropBounds,setImageEditorImageHasLoaded:P.setImageEditorImageHasLoaded},null,{withRef:!0})(N)},"./client/blocks/image-editor/image-editor-crop.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/lodash/lodash.js"),E=n("./node_modules/classnames/index.js"),w=o(E),S=n("./client/components/draggable/index.jsx"),k=o(S),T=n("./client/state/ui/editor/image-editor/selectors.js"),P=n("./client/state/ui/editor/image-editor/constants.js"),I=n("./client/state/ui/editor/image-editor/actions.js"),R=n("./client/state/ui/editor/image-editor/reducer.js"),N=n("./client/state/selectors/get-image-editor-original-aspect-ratio.js"),M=o(N),D=function(e){function t(e){(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.state=n.getDefaultState(e),n.onTopLeftDrag=n.onTopLeftDrag.bind(n),n.onTopRightDrag=n.onTopRightDrag.bind(n),n.onBottomLeftDrag=n.onBottomLeftDrag.bind(n),n.onBottomRightDrag=n.onBottomRightDrag.bind(n),n.applyCrop=n.applyCrop.bind(n),n.onBorderDrag=n.onBorderDrag.bind(n),n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.bounds,o=t.aspectRatio,r=t.crop;if(!(0,j.isEqual)(n,e.bounds)){var i=e.bounds.rightBound-e.bounds.leftBound,s=e.bounds.bottomBound-e.bounds.topBound,a=e.bounds.topBound+e.crop.topRatio*s,l=e.bounds.leftBound+e.crop.leftRatio*i,u=a+e.crop.heightRatio*s,d=l+e.crop.widthRatio*i,c={top:a,left:l,bottom:u,right:d};this.setState(c),this.updateCrop(c)}o!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,j.isEqual)(e.crop,R.defaultCrop)||(0,j.isEqual)(r,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,n){t=t||this.props;var o=t.aspectRatio;if(o===P.AspectRatios.FREE)return void this.setState(e,n);var r=t.degrees%180!==0,i=(0,a.default)({},this.state,e),s=i.right-i.left,l=i.bottom-i.top,u=void 0,d=void 0,c=s,f=l;switch(o){case P.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,n);var p=this.props.originalAspectRatio,m=p.width,h=p.height;u=r?h:m,d=r?m:h;break;case P.AspectRatios.ASPECT_1X1:u=1,d=1;break;case P.AspectRatios.ASPECT_16X9:u=r?9:16,d=r?16:9;break;case P.AspectRatios.ASPECT_4X3:u=r?3:4,d=r?4:3;break;case P.AspectRatios.ASPECT_3X2:u=r?2:3,d=r?3:2}var g=Math.min(s/u,l/d);c=u*g,f=d*g,e.hasOwnProperty("top")?e.top=i.bottom-f:e.hasOwnProperty("bottom")&&(e.bottom=i.top+f),e.hasOwnProperty("left")?e.left=i.right-c:e.hasOwnProperty("right")&&(e.right=i.left+c),this.setState(e,n)}},{key:"onTopLeftDrag",value:function(e,t){var n=this.state,o=n.right,r=n.bottom,i=this.props.minCropSize,s=t,a=e;o-a<=i.width&&(a=o-i.width),r-s<=i.height&&(s=r-i.height),this.updateCrop({top:s,left:a})}},{key:"onTopRightDrag",value:function(e,t){var n=this.state,o=n.left,r=n.bottom,i=this.props.minCropSize,s=t,a=e;a-o<=i.width&&(a=o+i.width),r-s<=i.height&&(s=r-i.height),this.updateCrop({top:s,right:a})}},{key:"onBottomRightDrag",value:function(e,t){var n=this.state,o=n.left,r=n.top,i=this.props.minCropSize,s=t,a=e;a-o<=i.width&&(a=o+i.width),s-r<=i.height&&(s=r+i.height),this.updateCrop({bottom:s,right:a})}},{key:"onBottomLeftDrag",value:function(e,t){var n=this.state,o=n.right,r=n.top,i=this.props.minCropSize,s=t,a=e;o-a<=i.width&&(a=o-i.width),s-r<=i.height&&(s=r+i.height),this.updateCrop({bottom:s,left:a})}},{key:"onBorderDrag",value:function(e,t){var n=this.state,o=n.top,r=n.left,i=n.right,s=n.bottom,a=i-r,l=s-o;this.setState({top:t,left:e,bottom:t+l,right:e+a})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,n=e.left,o=e.right,r=e.bottom,i=this.props.bounds,s=i.topBound,a=i.leftBound,l=i.rightBound,u=i.bottomBound,d=t-s,c=n-a,f=o-n,p=r-t,m=l-a,h=u-s,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var v=this.props.originalAspectRatio,y=v.width,b=v.height,_=g?b:y,x=g?y:b,C=x/_;h=m*C}return[d/h,c/m,f/m,p/h]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,i.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,n=e.left,o=e.right,r=e.bottom,i=o-n,s=r-t,a="image-editor__crop-handle",l=this.props.bounds,u=l.topBound,d=l.leftBound,c=l.rightBound,f=l.bottomBound;return x.default.createElement("div",null,x.default.createElement("div",{className:"image-editor__crop-background",style:{top:u+"px",left:n+"px",width:i+"px",height:Math.max(0,t-u)+"px"}}),x.default.createElement("div",{className:"image-editor__crop-background",style:{top:u+"px",left:d+"px",width:Math.max(0,n-d)+"px",height:Math.max(0,f-u)+"px"}}),x.default.createElement("div",{className:"image-editor__crop-background",style:{top:r+"px",left:n+"px",width:i+"px",height:Math.max(0,f-r)+"px"}}),x.default.createElement("div",{className:"image-editor__crop-background",style:{top:u+"px",left:o+"px",width:Math.max(0,c-o)+"px",height:Math.max(0,f-u)+"px"}}),x.default.createElement(k.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:n,y:t,width:i,height:s,bounds:{top:u,left:d,bottom:f,right:c},className:"image-editor__crop"}),x.default.createElement(k.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:n,y:t,controlled:!0,bounds:{bottom:r,right:o,top:u,left:d},ref:"topLeft",className:(0,w.default)(a,a+"-nwse")}),x.default.createElement(k.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:o,controlled:!0,bounds:{bottom:r,left:n,top:u,right:c},ref:"topRight",className:(0,w.default)(a,a+"-nesw")}),x.default.createElement(k.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:r,x:o,controlled:!0,bounds:{top:t,left:n,bottom:f,right:c},ref:"bottomRight",className:(0,w.default)(a,a+"-nwse")}),x.default.createElement(k.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:r,x:n,controlled:!0,bounds:{top:t,right:o,bottom:f,left:d},ref:"bottomLeft",className:(0,w.default)(a,a+"-nesw")}))}}]),t}(_.Component);D.propTypes={degrees:b.default.number,bounds:b.default.shape({topBound:b.default.number,leftBound:b.default.number,bottomBound:b.default.number,rightBound:b.default.number}),crop:b.default.shape({topRatio:b.default.number,leftRatio:b.default.number,widthRatio:b.default.number,heightRatio:b.default.number}),aspectRatio:b.default.string,imageEditorCrop:b.default.func,imageEditorComputedCrop:b.default.func,minCropSize:b.default.shape({width:b.default.number,height:b.default.number}),imageEditorHasChanges:b.default.bool},D.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:j.noop,imageEditorComputedCrop:j.noop,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,C.connect)(function(e){var t=(0,T.getImageEditorCropBounds)(e),n=(0,T.getImageEditorCrop)(e),o=(0,T.getImageEditorAspectRatio)(e),r=(0,T.getImageEditorTransform)(e),i=r.degrees;return{bounds:t,crop:n,aspectRatio:o,degrees:i,originalAspectRatio:(0,M.default)(e),imageEditorHasChanges:(0,T.imageEditorHasChanges)(e)}},{imageEditorCrop:I.imageEditorCrop,imageEditorComputedCrop:I.imageEditorComputedCrop})(D),e.exports=t.default},"./client/blocks/image-editor/image-editor-toolbar.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorToolbar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./client/components/popover/menu.jsx"),S=o(w),k=n("./client/components/popover/menu-item.jsx"),T=o(k),P=n("./client/state/ui/editor/image-editor/constants.js"),I=n("./client/state/ui/editor/image-editor/selectors.js"),R=n("./client/state/ui/editor/image-editor/actions.js"),N=n("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),M=o(N),D=t.ImageEditorToolbar=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={showAspectPopover:!1},n.setAspectMenuContext=n.setAspectMenuContext.bind(n),n.onAspectOpen=n.onAspectOpen.bind(n),n.onAspectClose=n.onAspectClose.bind(n),n.rotate=n.rotate.bind(n),n.flip=n.flip.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault();var t=this.props,n=t.isAspectRatioDisabled,o=t.onShowNotice,r=t.translate;if(n){var i=r("To change the aspect ratio, the height and width must be bigger than {{strong}}%(width)dpx{{/strong}}.",{args:{width:P.MinimumImageDimensions.WIDTH,height:P.MinimumImageDimensions.HEIGHT},components:{strong:v.default.createElement("strong",null)}});return void o(i)}this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,n=e.showAspectPopover,o=this.props,r=o.translate,i=o.aspectRatio,s=o.allowedAspectRatios;if(t&&1!==s.length){var a=[{action:P.AspectRatios.FREE,label:r("Free")},{action:P.AspectRatios.ORIGINAL,label:r("Original")},{action:P.AspectRatios.ASPECT_1X1,label:r("Square")},{action:P.AspectRatios.ASPECT_16X9,label:r("16:9")},{action:P.AspectRatios.ASPECT_4X3,label:r("4:3")},{action:P.AspectRatios.ASPECT_3X2,label:r("3:2")}];return v.default.createElement(S.default,{isVisible:n,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},a.map(function(e){return s.indexOf(e.action)!==-1?v.default.createElement(T.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},i===e.action&&v.default.createElement(C.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,n=e.allowedAspectRatios,o=e.isAspectRatioDisabled,r=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===n.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"crop",text:t("Crop"),onClick:this.onAspectOpen,disabled:o},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return r.map(function(e){var t=(0,E.default)("image-editor__toolbar-button",{"is-disabled":e&&e.disabled});return e?v.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:t,onClick:e.onClick},v.default.createElement(C.default,{icon:e.icon}),v.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return v.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(g.Component);D.propTypes={aspectRatio:h.default.string,imageEditorRotateCounterclockwise:h.default.func,imageEditorFlip:h.default.func,setImageEditorAspectRatio:h.default.func,allowedAspectRatios:h.default.array,onShowNotice:h.default.func,isAspectRatioDisabled:h.default.bool},D.defaultProps={imageEditorRotateCounterclockwise:b.noop,imageEditorFlip:b.noop,setImageEditorAspectRatio:b.noop,allowedAspectRatios:(0,b.values)(P.AspectRatios),onShowNotice:b.noop,isAspectRatioDisabled:!1},t.default=(0,y.connect)(function(e){var t=(0,I.getImageEditorAspectRatio)(e),n=(0,M.default)(e);return{aspectRatio:t,isAspectRatioDisabled:!n}},{imageEditorRotateCounterclockwise:R.imageEditorRotateCounterclockwise,imageEditorFlip:R.imageEditorFlip,setImageEditorAspectRatio:R.setImageEditorAspectRatio})((0,_.localize)(D))},"./client/blocks/image-editor/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/redux/lib/index.js"),C=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/path-browserify/index.js"),E=o(j),w=n("./node_modules/i18n-calypso/index.js"),S=n("./node_modules/classnames/index.js"),k=o(S),T=n("./client/components/close-on-escape/index.jsx"),P=o(T),I=n("./client/components/notice/index.jsx"),R=o(I),N=n("./client/blocks/image-editor/image-editor-canvas.jsx"),M=o(N),D=n("./client/blocks/image-editor/image-editor-toolbar.jsx"),O=o(D),A=n("./client/blocks/image-editor/image-editor-buttons.jsx"),L=o(A),B=n("./client/lib/media/utils.js"),F=o(B),z=n("./client/state/ui/editor/image-editor/actions.js"),U=n("./client/state/ui/editor/image-editor/selectors.js"),H=n("./client/state/ui/selectors.js"),W=n("./client/state/sites/selectors.js"),V=n("./client/components/data/query-sites/index.jsx"),q=o(V),G=n("./client/state/ui/editor/image-editor/constants.js"),K=n("./client/blocks/image-editor/utils.js"),$=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={noticeText:null,noticeStatus:"is-info"},o.setDefaultAspectRatio=function(){var e=o.props,t=e.defaultAspectRatio,n=e.allowedAspectRatios;o.props.setImageEditorDefaultAspectRatio((0,K.getDefaultAspectRatio)(t,n))},o.updateFileInfo=function(e){var t=o.props.site,n=void 0,r="default",i="image/png",s="default";e&&(n=e.src||F.default.url(e,{photon:t&&!t.is_private}),r=e.file||E.default.basename(n),i=F.default.getMimeType(e)||i,s=e.title||s),o.props.resetImageEditorState(),o.props.setImageEditorFileInfo(n,r,i,s)},o.convertBlobToImage=function(e){var t=o.props.onDone,n=document.createElement("img"),r=URL.createObjectURL(e),s=o.getImageEditorProps();n.onload=function(){URL.revokeObjectURL(r),t(null,e,(0,i.default)({},s,{width:n.width,height:n.height}))},n.onerror=function(){t(null,e,s)},n.src=r},o.onDone=function(){var e=o.props,t=e.isImageLoaded,n=e.onDone;if(!t)return void n(new Error("Image not loaded yet."),null,o.getImageEditorProps());var r=o.refs.editCanvas.getWrappedInstance();r.toBlob(o.convertBlobToImage)},o.onCancel=function(){o.props.onCancel(o.getImageEditorProps())},o.onReset=function(){o.props.resetImageEditorState(),o.props.onReset(o.getImageEditorProps())},o.getImageEditorProps=function(){var e=o.props,t=e.src,n=e.fileName,r=e.media,i=e.mimeType,s=e.title,a=e.site,l={src:t,fileName:n,mimeType:i,title:s,site:a,resetAllImageEditorState:o.props.resetAllImageEditorState};return r&&r.ID&&(l.ID=r.ID),l},o.showNotice=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-info";o.setState({noticeText:e,noticeStatus:t})},o.clearNoticeState=function(){o.setState({noticeText:null,noticeStatus:"is-info"})},o.renderNotice=function(){if(!o.state.noticeText)return null;var e="is-info"===o.state.noticeStatus;return b.default.createElement(R.default,{status:o.state.noticeStatus,showDismiss:e,text:o.state.noticeText,isCompact:!1,onDismissClick:o.clearNoticeState,className:"image-editor__notice"})},o.onLoadCanvasError=function(){var e=o.props.translate;o.showNotice(e("Sorry, there was a problem loading the image. Please close this editor and try selecting the image again."),"is-error")},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.media;e.media&&!(0,C.isEqual)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())}},{key:"componentDidMount",value:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.siteId,o=e.allowedAspectRatios,r=this.state.noticeText,i=(0,k.default)("image-editor",t);return b.default.createElement("div",{className:i},r&&this.renderNotice(),b.default.createElement(P.default,{onEscape:this.onCancel}),b.default.createElement(q.default,{siteId:n}),b.default.createElement("figure",null,b.default.createElement("div",{className:"image-editor__content"},b.default.createElement(M.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),b.default.createElement(O.default,{onShowNotice:this.showNotice,allowedAspectRatios:o}),b.default.createElement(L.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset,doneButtonText:this.props.doneButtonText}))))}}]),t}(b.default.Component);$.propTypes={media:v.default.object,siteId:v.default.number,onDone:v.default.func,onCancel:v.default.func,onReset:v.default.func,className:v.default.string,defaultAspectRatio:v.default.oneOf(G.AspectRatiosValues),allowedAspectRatios:v.default.arrayOf(v.default.oneOf(G.AspectRatiosValues)),site:v.default.object,fileName:v.default.string,setImageEditorFileInfo:v.default.func,setImageEditorDefaultAspectRatio:v.default.func,translate:v.default.func,isImageLoaded:v.default.bool},$.defaultProps={media:null,onDone:C.noop,onCancel:null,onReset:C.noop,isImageLoaded:!1,defaultAspectRatio:G.AspectRatios.FREE,allowedAspectRatios:G.AspectRatiosValues,setImageEditorDefaultAspectRatio:C.noop},t.default=(0,_.connect)(function(e,t){var n=t.siteId;return n||(n=(0,H.getSelectedSiteId)(e)),(0,i.default)({},(0,U.getImageEditorFileInfo)(e),{site:(0,W.getSite)(e,n),isImageLoaded:(0,U.isImageEditorImageLoaded)(e)})},function(e,t){var n=(0,K.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),o={aspectRatio:n};return(0,x.bindActionCreators)({setImageEditorFileInfo:z.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:z.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,C.partial)(z.resetImageEditorState,o),resetAllImageEditorState:(0,C.partial)(z.resetAllImageEditorState,o)},e)})((0,w.localize)($)),e.exports=t.default},"./client/blocks/image-editor/utils.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.AspectRatiosValues;return(0,r.includes)(t,e)||(e=(0,r.get)(t,"0",i.AspectRatios.FREE)),(0,r.includes)(i.AspectRatiosValues,e)?e:o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultAspectRatio=o;var r=n("./node_modules/lodash/lodash.js"),i=n("./client/state/ui/editor/image-editor/constants.js")},"./client/blocks/plan-storage/bar.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/filesize/lib/filesize.js"),C=o(x),j=n("./client/components/progress-bar/index.jsx"),E=o(j),w=n("./client/lib/plans/constants.js"),S=80,k=60,T=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.mediaStorage,o=e.sitePlanSlug,r=e.siteSlug,i=e.translate;if(o===w.PLAN_BUSINESS)return null;if(!n||n.max_storage_bytes===-1)return null;var s=Math.min(Math.round(n.storage_used_bytes/n.max_storage_bytes*1e3)/10,100),a=(0,_.default)(t,"plan-storage__bar",{"is-alert":s>S,"is-warn":s>k&&s<=S}),l=(0,C.default)(n.max_storage_bytes);return v.default.createElement("div",{className:a},v.default.createElement(E.default,{value:s,total:100,compact:!0}),v.default.createElement("span",{className:"plan-storage__storage-label"},i("%(percent)f%% of %(max)s used",{args:{percent:s,max:l}})),v.default.createElement("a",{className:"plan-storage__storage-link",href:"/plans/"+r},i("Upgrade")),this.props.children)}}]),t}(g.Component);T.propTypes={className:h.default.string,mediaStorage:h.default.object,siteSlug:h.default.string.isRequired,sitePlanSlug:h.default.string.isRequired},T.defaultProps={siteSlug:""},t.default=(0,y.localize)(T),e.exports=t.default},"./client/blocks/plan-storage/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/classnames/index.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./client/components/data/query-media-storage/index.jsx"),C=o(x),j=n("./client/state/sites/media-storage/selectors.js"),E=n("./client/state/sites/selectors.js"),w=n("./client/lib/plans/constants.js"),S=n("./client/blocks/plan-storage/bar.jsx"),k=o(S),T=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}
return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.jetpackSite,o=e.siteId,r=e.sitePlanSlug,i=e.siteSlug;return n||!r?null:r===w.PLAN_BUSINESS?null:b.default.createElement("div",{className:(0,h.default)(t,"plan-storage")},b.default.createElement(C.default,{siteId:o}),b.default.createElement(k.default,{siteSlug:i,sitePlanSlug:r,mediaStorage:this.props.mediaStorage},this.props.children))}}]),t}(y.Component);T.propTypes={className:v.default.string,mediaStorage:v.default.object,siteId:v.default.number,sitePlanSlug:v.default.string,siteSlug:v.default.string},t.default=(0,_.connect)(function(e,t){var n=t.siteId;return{mediaStorage:(0,j.getMediaStorage)(e,n),jetpackSite:(0,E.isJetpackSite)(e,n),sitePlanSlug:(0,E.getSitePlanSlug)(e,n),siteSlug:(0,E.getSiteSlug)(e,n)}})(T),e.exports=t.default},"./client/blocks/post-status/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.post,o=e.showAll,r=e.showIcon,i=void 0===r||r;if(!n)return null;var s=n.sticky,a=n.status,u=void 0,d=void 0,f=void 0;if(s?(u=t("Sticky"),d="is-sticky",f="bookmark-outline"):"pending"===a?(u=t("Pending Review"),d="is-pending",f="aside"):"future"===a?(u=t("Scheduled"),d="is-scheduled",f="calendar"):"trash"===a?(u=t("Trashed"),d="is-trash",f="trash"):o&&"draft"===a?(u=t("Draft"),d="is-draft",f="aside"):o&&"publish"===a&&(u=t("Published"),d="is-published",f="aside"),!u)return null;var p=(0,c.default)("post-status",d);return l.default.createElement("span",{className:p},i&&l.default.createElement(m.default,{icon:f,size:18,className:"post-status__icon"}),l.default.createElement("span",{className:"post-status__text"},u))}Object.defineProperty(t,"__esModule",{value:!0}),t.PostStatus=r;var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/classnames/index.js"),c=o(d),f=n("./node_modules/i18n-calypso/index.js"),p=n("./node_modules/gridicons/build/index.js"),m=o(p),h=n("./client/state/posts/selectors.js");r.displayName="PostStatus",r.propTypes={globalId:s.default.string,translate:s.default.func,post:s.default.object,showAll:s.default.bool,showIcon:s.default.bool},t.default=(0,u.connect)(function(e,t){var n=t.globalId;return{post:(0,h.getNormalizedPost)(e,n)}})((0,f.localize)(r))},"./client/blocks/term-form-dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/lodash/lodash.js"),j=n("./client/components/dialog/index.jsx"),E=o(j),w=n("./client/blocks/term-tree-selector/terms.jsx"),S=o(w),k=n("./client/components/forms/form-input-validation/index.jsx"),T=o(k),P=n("./client/components/forms/form-textarea/index.jsx"),I=o(P),R=n("./client/components/forms/form-text-input/index.jsx"),N=o(R),M=n("./client/components/forms/form-section-heading/index.jsx"),D=o(M),O=n("./client/components/forms/form-checkbox/index.jsx"),A=o(O),L=n("./client/components/forms/form-label/index.jsx"),B=o(L),F=n("./client/components/forms/form-legend/index.jsx"),z=o(F),U=n("./client/components/forms/form-fieldset/index.jsx"),H=o(U),W=n("./client/lib/viewport/index.js"),V=o(W),q=n("./client/state/ui/selectors.js"),G=n("./client/state/post-types/taxonomies/selectors.js"),K=n("./client/state/terms/selectors.js"),$=n("./client/state/terms/actions.js"),Y=n("./client/state/analytics/actions.js"),J=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onSearch=function(e){n.setState({searchTerm:e})},n.closeDialog=function(){n.state.saving||n.props.onClose()},n.onParentChange=function(e){n.setState({selectedParent:[e.ID],isTopLevel:!1},n.isValid)},n.onTopLevelChange=function(){n.setState({isTopLevel:!n.state.isTopLevel,selectedParent:[]},n.isValid)},n.onNameChange=function(e){n.setState({name:e.target.value})},n.onDescriptionChange=function(e){n.setState({description:e.target.value})},n.validateInput=function(e){13===e.keyCode?n.saveTerm():n.isValid()},n.saveTerm=function(){var e=n.getFormValues();if(n.isValid()&&!n.state.saving){n.setState({saving:!0});var t=n.props,o=t.siteId,r=t.taxonomy,i={mc:"edited_"+r,ga:"Edited "+r},s=!n.props.term,a=s?n.props.addTerm(o,r,e):n.props.updateTerm(o,r,n.props.term.ID,n.props.term.slug,e);s&&(i.mc="created_"+r,i.ga="Created New "+r),n.props.bumpStat("taxonomy_manager",i.mc),n.props.recordGoogleEvent("Taxonomy Manager",i.ga),a.then(function(e){n.setState({saving:!1}),n.props.onSuccess(e),n.closeDialog()})}},n.state=n.constructor.initialState,n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"init",value:function(e){if(!e.term)return e.searchTerm&&e.searchTerm.trim().length?void this.setState((0,C.assign)({},this.constructor.initialState,{name:e.searchTerm}),this.isValid):void this.setState(this.constructor.initialState);var t=e.term,n=t.name,o=t.description,r=t.parent,i=void 0!==r&&r;this.setState((0,C.assign)({},this.constructor.initialState,{name:n,description:o,isTopLevel:!i,selectedParent:i?[i]:[]}))}},{key:"componentWillReceiveProps",value:function(e){(this.props.term!==e.term||this.props.showDialog!==e.showDialog&&e.showDialog)&&this.init(e)}},{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"getFormValues",value:function(){var e=this.state.name.trim(),t={name:e};if(this.props.isHierarchical&&(t.parent=this.state.selectedParent.length?this.state.selectedParent[0]:0),this.props.showDescriptionInput){var n=this.state.description.trim();t.description=n}return t}},{key:"isValid",value:function e(){var t=this,n={},o=this.getFormValues();o.name.length||(n.name=this.props.translate("Name required",{textOnly:!0}));var r=o.name.toLowerCase(),s=(0,C.find)(this.props.terms,function(e){return e.name.toLowerCase()===r&&(!t.props.term||e.ID!==t.props.term.ID)});s&&(n.name=this.props.translate("Name already exists",{context:"Terms: Add term error message - duplicate term name exists",textOnly:!0})),!this.props.isHierarchical||this.state.isTopLevel||o.parent||(n.parent=this.props.translate('Parent item required when "Top level" is unchecked',{context:"Terms: Add term error message",textOnly:!0}));var e=!(0,i.default)(n).length;return this.setState({errors:n,isValid:e}),e}},{key:"renderParentSelector",value:function(){var e=this.props,t=e.labels,n=e.siteId,o=e.taxonomy,r=e.translate,i=e.terms,s=this.state,a=s.searchTerm,l=s.selectedParent,u={};a&&a.length&&(u.search=a);var d=(0,C.get)(this.props.term,"ID"),c=!!this.state.errors.parent;return d&&i&&1===i.length?null:b.default.createElement(H.default,null,b.default.createElement(z.default,null,t.parent_item),b.default.createElement(B.default,null,b.default.createElement(A.default,{ref:"topLevel",checked:this.state.isTopLevel,onChange:this.onTopLevelChange}),b.default.createElement("span",null,r("Top level",{context:"Terms: New term being created is top level"}))),b.default.createElement(S.default,{siteId:n,taxonomy:o,isError:c,onSearch:this.onSearch,onChange:this.onParentChange,query:u,selected:l,hideTermAndChildren:d}),c&&b.default.createElement(T.default,{isError:!0,text:this.state.errors.parent}))}},{key:"render",value:function(){var e=this.props,t=e.isHierarchical,n=e.labels,o=e.term,r=e.translate,i=e.showDescriptionInput,s=e.showDialog,a=this.state,l=a.name,u=a.description,d=!o,c=r(d?"Add":"Update"),f=[{action:"cancel",label:r("Cancel")},{action:d?"add":"update",label:this.state.saving?r("Saving…"):c,isPrimary:!0,disabled:!this.state.isValid||this.state.saving,onClick:this.saveTerm}],p=!!this.state.errors.name;return b.default.createElement(E.default,{autoFocus:!1,isVisible:s,buttons:f,onClose:this.closeDialog,additionalClassNames:"term-form-dialog"},b.default.createElement(D.default,null,d?n.add_new_item:n.edit_item),b.default.createElement(H.default,null,b.default.createElement(N.default,{autoFocus:s&&!V.default.isMobile(),placeholder:n.new_item_name,ref:"termName",isError:p,onKeyUp:this.validateInput,value:l,onChange:this.onNameChange}),p&&b.default.createElement(T.default,{isError:!0,text:this.state.errors.name})),i&&b.default.createElement(H.default,null,b.default.createElement(z.default,null,r("Description",{context:"Terms: Term description label"})),b.default.createElement(I.default,{ref:"termDescription",onKeyUp:this.validateInput,value:u,onChange:this.onDescriptionChange})),t&&this.renderParentSelector())}}]),t}(y.Component);J.initialState={description:"",name:"",selectedParent:[],isTopLevel:!0,isValid:!1,errors:{},saving:!1},J.propTypes={labels:v.default.object,onClose:v.default.func,onSuccess:v.default.func,postType:v.default.string,searchTerm:v.default.string,showDescriptionInput:v.default.bool,showDialog:v.default.bool,siteId:v.default.number,taxonomy:v.default.string,term:v.default.object,terms:v.default.array,translate:v.default.func,recordGoogleEvent:v.default.func,bumpStat:v.default.func},J.defaultProps={onClose:C.noop,onSuccess:C.noop,showDescriptionInput:!1,showDialog:!1},t.default=(0,_.connect)(function(e,t){var n=t.taxonomy,o=t.postType,r=(0,q.getSelectedSiteId)(e),i=(0,G.getPostTypeTaxonomy)(e,r,o,n),s=(0,C.get)(i,"labels",{}),a=(0,C.get)(i,"hierarchical",!1);return{terms:(0,K.getTerms)(e,r,n),isHierarchical:a,labels:s,siteId:r}},{addTerm:$.addTerm,updateTerm:$.updateTerm,recordGoogleEvent:Y.recordGoogleEvent,bumpStat:Y.bumpStat})((0,x.localize)(J)),e.exports=t.default},"./client/blocks/term-tree-selector/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/blocks/term-tree-selector/terms.jsx"),x=o(_),C=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={search:""},o.onSearch=function(e){e!==o.state.search&&o.setState({search:e})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.taxonomy!==this.props.taxonomy&&this.setState({search:""})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.taxonomy,o=e.onChange,r=e.selected,i=e.createLink,s=e.multiple,a=e.height,l=e.compact,u=(0,b.default)(t),d=this.state.search,c={};return d&&d.length&&(c.search=d),v.default.createElement("div",{className:u,ref:"wrapper"},v.default.createElement(x.default,{taxonomy:n,onSearch:this.onSearch,onChange:o,query:c,selected:r,createLink:i,multiple:s,height:a,compact:l}))}}]),t}(v.default.Component);C.displayName="TermTreeSelector",C.propTypes={multiple:h.default.bool,className:h.default.string,onChange:h.default.func.isRequired,selected:h.default.array,createLink:h.default.string,analyticsPrefix:h.default.string,taxonomy:h.default.string,height:h.default.number,compact:h.default.bool},C.defaultProps={analyticsPrefix:"Category Selector",selected:[],taxonomy:"category",onChange:function(){},height:300},t.default=C,e.exports=t.default},"./client/blocks/term-tree-selector/no-results.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.createLink,t=void 0;return e&&(t=this.props.translate("You may want to {{a}}create a new item{{/a}}.",{context:"Term Selector: term search/listing results",comment:"This is used when no terms match the given search, or if there are no terms at all.",components:{a:y.default.createElement("a",{className:"create-link",href:e,target:"_blank",rel:"noopener noreferrer"})}})),y.default.createElement("span",{className:"is-empty-content"},this.props.translate("No results. Please try a different search.")," ",t)}}]),t}(y.default.PureComponent);b.displayName="TermTreeSelectorNoResults",b.propTypes={createLink:h.default.string},t.default=(0,g.localize)(b),e.exports=t.default},"./client/blocks/term-tree-selector/search.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/gridicons/build/index.js"),_=o(b),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement("div",{className:"term-tree-selector__search"},y.default.createElement(_.default,{icon:"search",size:18}),y.default.createElement("input",{type:"search",placeholder:this.props.translate("Search…",{textOnly:!0}),value:this.props.searchTerm,onChange:this.props.onSearch}))}}]),t}(y.default.Component);x.displayName="TermTreeSelectorSearch",x.propTypes={searchTerm:h.default.string,onSearch:h.default.func.isRequired},t.default=(0,g.localize)(x),e.exports=t.default},"./client/blocks/term-tree-selector/terms.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/freeze.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/extends.js"),u=o(l),d=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/createClass.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=o(g),y=n("./node_modules/babel-runtime/helpers/inherits.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/prop-types/index.js"),j=o(C),E=n("./node_modules/react-redux/es/index.js"),w=n("./node_modules/classnames/index.js"),S=o(w),k=n("./node_modules/i18n-calypso/index.js"),T=n("./node_modules/react-virtualized/dist/commonjs/List/index.js"),P=o(T),I=n("./node_modules/lodash/lodash.js"),R=n("./client/lib/analytics/index.js"),N=o(R),M=n("./client/blocks/term-tree-selector/no-results.jsx"),D=o(M),O=n("./client/blocks/term-tree-selector/search.jsx"),A=o(O),L=n("./client/lib/formatting/index.js"),B=n("./client/components/data/query-terms/index.jsx"),F=o(B),z=n("./client/state/ui/selectors.js"),U=n("./client/state/terms/selectors.js"),H=500,W=100,V=10,q=25,G=function(e){function t(){var e,n,o,r;(0,p.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(s))),K.call(o),r=n,(0,v.default)(o,r)}return(0,b.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this;this.itemHeights={},this.hasPerformedSearch=!1,this.list=null,this.termIds=(0,I.map)(this.props.terms,"ID"),this.getTermChildren=(0,I.memoize)(this.getTermChildren),this.queueRecomputeRowHeights=(0,I.debounce)(this.recomputeRowHeights),this.debouncedSearch=(0,I.debounce)(function(){e.props.onSearch(e.state.searchTerm)},H)}},{key:"componentWillReceiveProps",value:function(e){e.taxonomy!==this.props.taxonomy&&this.setState(this.constructor.initialState),this.props.terms!==e.terms&&(this.getTermChildren.cache.clear(),this.termIds=(0,I.map)(e.terms,"ID"))}},{key:"componentDidUpdate",value:function(e){var t=!(0,I.isEqual)(e.selected,this.props.selected)||e.loading&&!this.props.loading||!e.terms&&this.props.terms;t&&this.list.forceUpdateGrid(),this.props.terms!==e.terms&&this.recomputeRowHeights()}},{key:"render",value:function(){var e=this.getRowCount(),t=this.isSmall(),n=this.state.searchTerm.length,o=(n>0||!t)&&(this.props.terms||!this.props.terms&&n>0),r=this.props,i=r.className,s=r.isError,a=r.loading,l=r.siteId,d=r.taxonomy,c=r.query,f=r.height,p=(0,S.default)("term-tree-selector",i,{"is-loading":a,"is-small":t,"is-error":s,"is-compact":this.props.compact});return x.default.createElement("div",{ref:this.setSelectorRef,className:p},this.state.requestedPages.map(function(e){return x.default.createElement(F.default,{key:"query-"+e,siteId:l,taxonomy:d,query:(0,u.default)({},c,{page:e})})}),o&&x.default.createElement(A.default,{searchTerm:this.state.searchTerm,onSearch:this.onSearch}),x.default.createElement(P.default,{ref:this.setListRef,width:this.getResultsWidth(),height:t?this.getCompactContainerHeight():f,onRowsRendered:this.setRequestedPages,rowCount:e,estimatedRowSize:q,rowHeight:this.getRowHeight,rowRenderer:this.cellRendererWrapper,noRowsRenderer:this.renderNoResults,className:"term-tree-selector__results"}))}}]),t}(_.Component);G.propTypes={hideTermAndChildren:j.default.number,terms:j.default.array,taxonomy:j.default.string,multiple:j.default.bool,selected:j.default.array,search:j.default.string,siteId:j.default.number,translate:j.default.func,defaultTermId:j.default.number,lastPage:j.default.number,onSearch:j.default.func,onChange:j.default.func,isError:j.default.bool,height:j.default.number},G.defaultProps={analyticsPrefix:"Category Selector",searchThreshold:8,loading:!0,terms:(0,a.default)([]),onSearch:function(){},onChange:function(){},onNextPage:function(){},height:300},G.initialState={searchTerm:"",requestedPages:(0,a.default)([1])};var K=function(){var e=this;this.state=this.constructor.initialState,this.recomputeRowHeights=function(){e.list&&(e.list.recomputeRowHeights(),e.isSmall()&&e.forceUpdate())},this.setSelectorRef=function(t){t&&e.setState({selectorRef:t})},this.getPageForIndex=function(t){var n=e.props,o=n.query,r=n.lastPage,i=o.number||W,s=Math.ceil(t/i);return Math.max(Math.min(s,r||1/0),1)},this.setRequestedPages=function(t){var n=t.startIndex,o=t.stopIndex,r=e.state.requestedPages,i=(0,I.difference)((0,I.range)(e.getPageForIndex(n-V),e.getPageForIndex(o+V)+1),r);i.length&&e.setState({requestedPages:r.concat(i)})},this.setItemRef=function(t,n){if(n&&t){var o=e.itemHeights[t.ID]||q,r=n.clientHeight;e.itemHeights[t.ID]=r,o!==r&&e.queueRecomputeRowHeights()}},this.hasNoSearchResults=function(){return!e.props.loading&&e.props.terms&&!e.props.terms.length&&!!e.state.searchTerm.length},this.hasNoTerms=function(){return!e.props.loading&&e.props.terms&&!e.props.terms.length},this.getItem=function(t){if(e.props.terms)return e.props.terms[t]},this.isSmall=function(){return!(!e.props.terms||e.state.searchTerm)&&e.props.terms.length<e.props.searchThreshold},this.isRowLoaded=function(t){var n=t.index;return e.props.lastPage||!!e.getItem(n)},this.getTermChildren=function(t){var n=e.props.terms;return(0,I.filter)(n,function(e){var n=e.parent;return n===t})},this.getItemHeight=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?t.parent&&!n&&(0,I.includes)(e.termIds,t.parent)?0:t.ID===e.props.hideTermAndChildren?0:e.itemHeights[t.ID]?e.itemHeights[t.ID]:(0,I.reduce)(e.getTermChildren(t.ID),function(t,n){return t+e.getItemHeight(n,!0)},q):q},this.getRowHeight=function(t){var n=t.index;return e.getItemHeight(e.getItem(n))},this.getCompactContainerHeight=function(){return(0,I.range)(0,e.getRowCount()).reduce(function(t,n){return t+e.getRowHeight({index:n})},0)},this.getResultsWidth=function(){var t=e.state.selectorRef;return t?t.clientWidth:0},this.getRowCount=function(){var t=0;return e.props.terms&&(t+=e.props.terms.length),!e.props.loading&&e.props.terms||(t+=1),t},this.onSearch=function(t){var n=t.target.value;e.state.searchTerm&&!n&&e.props.onSearch(""),n!==e.state.searchTerm&&(e.hasPerformedSearch||(e.hasPerformedSearch=!0,N.default.ga.recordEvent(e.props.analyticsPrefix,"Performed Term Search")),e.setState({searchTerm:n}),e.debouncedSearch())},this.setListRef=function(t){e.list=t},this.renderItem=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((!t.parent||n||!(0,I.includes)(e.termIds,t.parent))&&t.ID!==e.props.hideTermAndChildren){var o=function(){for(var n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=e.props).onChange.apply(n,[t].concat(r))},r=function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.setItemRef.apply(e,[t].concat(o))},i=e.getTermChildren(t.ID),s=e.props,a=s.multiple,l=s.defaultTermId,u=s.translate,d=s.selected,c=t.ID,f=(0,L.decodeEntities)(t.name)||u("Untitled"),p=(0,I.includes)(d,c),m=a?"checkbox":"radio",h=a&&p&&l&&1===d.length&&l===c,g=x.default.createElement("input",{type:m,value:c,onChange:o,disabled:h,checked:p});return x.default.createElement("div",{key:c,ref:r,className:"term-tree-selector__list-item"},x.default.createElement("label",null,g,x.default.createElement("span",{className:"term-tree-selector__label"},f)),i.length>0&&x.default.createElement("div",{className:"term-tree-selector__nested-list"},i.map(function(t){return e.renderItem(t,!0)})))}},this.renderNoResults=function(){if(e.hasNoSearchResults()||e.hasNoTerms())return x.default.createElement("div",{key:"no-results",className:"term-tree-selector__list-item is-empty"},(e.hasNoSearchResults()||!e.props.emptyMessage)&&x.default.createElement(D.default,{createLink:e.props.createLink}),e.hasNoTerms()&&e.props.emptyMessage)},this.renderRow=function(t){var n=t.index,o=e.getItem(n);return o?e.renderItem(o):x.default.createElement("div",{key:"placeholder",className:"term-tree-selector__list-item is-placeholder"},x.default.createElement("label",null,x.default.createElement("input",{type:e.props.multiple?"checkbox":"radio",disabled:!0,className:"term-tree-selector__input"}),x.default.createElement("span",{className:"term-tree-selector__label"},e.props.translate("Loading…"))))},this.cellRendererWrapper=function(t){var n=t.key,o=t.style,r=(0,i.default)(t,["key","style"]);return x.default.createElement("div",{key:n,style:o},e.renderRow(r))}};t.default=(0,E.connect)(function(e,t){var n=(0,z.getSelectedSiteId)(e),o=t.taxonomy,r=t.query;return{loading:(0,U.isRequestingTermsForQueryIgnoringPage)(e,n,o,r),terms:(0,U.getTermsForQueryIgnoringPage)(e,n,o,r),lastPage:(0,U.getTermsLastPageForQuery)(e,n,o,r),siteId:n,query:r}})((0,k.localize)(G)),e.exports=t.default},"./client/blocks/upload-image/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ALLOWED_FILE_EXTENSIONS=["jpg","jpeg","gif","png","bmp","tiff","ico"],t.ERROR_UNSUPPORTED_FILE="ERROR_UNSUPPORTED_FILE",t.ERROR_IMAGE_EDITOR_DONE="ERROR_IMAGE_EDITOR_DONE",t.ERROR_UPLOADING_IMAGE="ERROR_UPLOADING_IMAGE"},"./client/blocks/upload-image/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./node_modules/react-redux/es/index.js"),w=n("./node_modules/i18n-calypso/index.js"),S=n("./node_modules/path-browserify/index.js"),k=o(S),T=n("./node_modules/gridicons/build/index.js"),P=o(T),I=n("./node_modules/lodash/lodash.js"),R=n("./client/blocks/upload-image/constants.js"),N=n("./client/state/ui/editor/image-editor/constants.js"),M=n("./client/state/ui/selectors.js"),D=n("./client/state/selectors/get-media-item.js"),O=o(D),A=n("./client/components/dialog/index.jsx"),L=o(A),B=n("./client/components/file-picker/index.jsx"),F=o(B),z=n("./client/state/ui/editor/image-editor/actions.js"),U=n("./client/components/spinner/index.jsx"),H=o(U),W=n("./client/blocks/image-editor/index.jsx"),V=o(W),q=n("./client/components/drop-zone/index.jsx"),G=o(q),K=n("./client/lib/media/actions.js"),$=o(K),Y=n("./client/lib/media/store.js"),J=o(Y),Z=n("./client/lib/media/utils.js"),X=o(Z),Q=n("./client/lib/media/validation-store.js"),ee=o(Q),te=n("./client/lib/media/constants.js"),ne=n("./client/components/button/index.jsx"),oe=o(ne),re=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.state={isUploading:!1,isEditingImage:!1,selectedImage:null,selectedImageName:"",editedImage:null,uploadedImage:null,errors:[]},o.receiveFiles=function(e){var t=o.props.translate,n=e[0].name,r=k.default.extname(n).toLowerCase().substring(1);if(R.ALLOWED_FILE_EXTENSIONS.indexOf(r)===-1)return void o.handleError(R.ERROR_UNSUPPORTED_FILE,t("File you are trying to upload is not supported. Please select a valid image file."));var i=URL.createObjectURL(e[0]);o.setState({isEditingImage:!0,selectedImage:i,selectedImageName:n})},o.handleError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=o.props,r=n.onError,i=n.translate,s=t;e===R.ERROR_UPLOADING_IMAGE&&t.length&&t[0]===te.ValidationErrors.SERVER_ERROR&&(s=i("File could not be uploaded because an error occurred while uploading.")),r(e,s)},o.onImageEditorDone=function(e,t,n){return e?o.handleError(R.ERROR_IMAGE_EDITOR_DONE,e):(o.setState({editedImage:URL.createObjectURL(t),isUploading:!0}),J.default.off("change",o.handleMediaStoreChange),ee.default.off("change",o.storeValidationErrors),o.props.onImageEditorDone(t,n),o.uploadImage(t,n),void o.hideImageEditor())},o.handleMediaStoreChange=function(){var e=o.props,t=e.siteId,n=e.onImageUploadDone,r=o.state.errors,i=J.default.get(t,o.uploadingImageTransientId),s=i&&X.default.isItemBeingUploaded(i);if(!s){if(o.setState({isUploading:!1}),i&&i.URL)return o.uploadingImageTransientId=null,o.setState({uploadedImage:i}),J.default.off("change",o.handleMediaStoreChange),void n(i);var a=r[o.uploadingImageTransientId]||[];o.handleError(R.ERROR_UPLOADING_IMAGE,a)}},o.storeValidationErrors=function(){o.setState({errors:ee.default.getAllErrors(o.props.siteId)})},o.hideImageEditor=function(){o.props.resetAllImageEditorState(),URL.revokeObjectURL(o.state.selectedImage),o.setState({isEditingImage:!1,selectedImage:null})},o.removeUploadedImage=function(){var e=o.props.onImageRemove,t=o.state.uploadedImage;o.revokeImageObjects(),o.setState({selectedImage:null,selectedImageName:"",editedImage:null,uploadedImage:null}),e(t)},o.revokeImageObjects=function(){var e=o.state,t=e.selectedImage,n=e.editedImage;t&&URL.revokeObjectURL(t),n&&URL.revokeObjectURL(n)},o.editUploadedImage=function(){var e=o.state.editedImage;o.setState({isEditingImage:!0,selectedImage:e})},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"uploadImage",value:function(e,t){var n=this.props.siteId,o=t.fileName,r=t.mimeType,i=(0,I.uniqueId)("upload-image-");this.uploadingImageTransientId=i;var s={ID:i,fileName:o,fileContents:e,mimeType:r};ee.default.on("change",this.storeValidationErrors),J.default.on("change",this.handleMediaStoreChange),$.default.add(n,s),this.setState({isUploading:!0})}},{key:"renderImageEditor",value:function(){var e=this.props.defaultImage,t=this.state,n=t.isEditingImage,o=t.selectedImage,r=t.selectedImageName;if(!n)return null;var i=this.props,s=i.additionalImageEditorClasses,l=i.imageEditorProps,u=i.doneButtonText,d=(0,j.default)("upload-image-modal",s),c=e&&o===e.URL,f=c?e:{src:o,file:r};return x.default.createElement(L.default,{additionalClassNames:d,isVisible:!0},x.default.createElement(V.default,(0,a.default)({},l,{media:f,onDone:this.onImageEditorDone,onCancel:this.hideImageEditor,doneButtonText:u?u:"Done"})))}},{key:"componentWillMount",value:function(){var e=this.props.defaultImage;e&&this.setState({uploadedImage:e,selectedImage:e.URL,selectedImageName:k.default.basename(e.URL),editedImage:e.URL})}},{key:"componentWillUnmount",value:function(){this.revokeImageObjects(),J.default.off("change",this.handleMediaStoreChange),ee.default.off("change",this.storeValidationErrors),this.uploadingImageTransientId=null}},{key:"renderImagePickerContent",value:function(){var e=this.props,t=e.imagePickerContent,n=e.addAnImageText,o=e.translate;return t?t:x.default.createElement(F.default,{accept:"image/*",onPick:this.receiveFiles},x.default.createElement("div",{className:"upload-image__image-picker"},x.default.createElement(P.default,{icon:"add-image",size:36}),x.default.createElement("span",null,n||o("Add an Image"))))}},{key:"renderUploadingContent",value:function(){var e=this.props.uploadingContent,t=this.state.editedImage;return e?e:x.default.createElement("div",{className:"upload-image__uploading-container"},x.default.createElement("img",{src:t,className:"upload-image__uploading-image"}),x.default.createElement(H.default,{className:"upload-image__spinner",size:20}))}},{key:"renderUploadingDoneContent",value:function(){var e=this.props.uploadingDoneContent,t=this.state.uploadedImage;return e?e:t&&t.URL?x.default.createElement("div",{className:"upload-image__uploading-done-container"},x.default.createElement("div",{className:"upload-image__uploaded-image-wrapper"},x.default.createElement("img",{src:t.URL,className:"upload-image__uploaded-image"}),x.default.createElement(oe.default,{onClick:this.editUploadedImage,compact:!0,className:"upload-image__uploaded-image-edit-button"},x.default.createElement(P.default,{icon:"pencil",size:18,className:"upload-image__uploaded-image-edit-icon"}))),x.default.createElement(oe.default,{onClick:this.removeUploadedImage,compact:!0,className:"upload-image__uploaded-image-remove"},x.default.createElement(P.default,{icon:"cross",
size:24,className:"upload-image__uploaded-image-remove-icon"}))):null}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.additionalClasses,o=e.dragUploadText,r=this.state,i=r.isUploading,s=r.uploadedImage;return x.default.createElement("div",{className:(0,j.default)("upload-image",n)},this.renderImageEditor(),x.default.createElement("div",{className:(0,j.default)("upload-image__image-container",{"is-uploading":i,"is-uploaded":!i&&s})},x.default.createElement(G.default,{textLabel:o?o:t("Drop to upload image"),onFilesDrop:this.receiveFiles}),!i&&!s&&this.renderImagePickerContent(),i&&this.renderUploadingContent(),!i&&s&&this.renderUploadingDoneContent()))}}]),t}(_.Component);re.propTypes={siteId:b.default.number,imageEditorProps:b.default.object,additionalImageEditorClasses:b.default.string,additionalClasses:b.default.string,imagePickerContent:b.default.element,uploadingContent:b.default.element,uploadingDoneContent:b.default.element,doneButtonText:b.default.string,addAnImageText:b.default.string,dragUploadText:b.default.string,defaultImage:b.default.any,onError:b.default.func,onImageEditorDone:b.default.func,onImageUploadDone:b.default.func,onImageRemove:b.default.func},re.defaultProps={imageEditorProps:{defaultAspectRatio:N.AspectRatios.ORIGINAL},backgroundContent:null,onImageEditorDone:I.noop,onImageUploadDone:I.noop,onImageRemove:I.noop,onError:I.noop,isUploading:!1},re.uploadingImageTransientId=null,t.default=(0,E.connect)(function(e,t){var n=t.siteId,o=t.defaultImage;return n||(n=(0,M.getSelectedSiteId)(e)),o&&"object"===("undefined"==typeof o?"undefined":(0,i.default)(o))||(o=(0,O.default)(e,n,o)),{siteId:n,defaultImage:o}},{resetAllImageEditorState:z.resetAllImageEditorState})((0,w.localize)(re)),e.exports=t.default},"./client/blocks/video-editor/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./client/components/progress-bar/index.jsx"),E=o(j),w=n("./client/components/notice/index.jsx"),S=o(w),k=n("./client/post-editor/media-modal/detail/detail-preview-video.jsx"),T=o(k),P=n("./client/blocks/video-editor/video-editor-controls.jsx"),I=o(P),R=n("./client/state/ui/editor/video-editor/actions.js"),N=n("./client/state/selectors/get-poster-upload-progress.js"),M=o(N),D=n("./client/state/selectors/get-poster-url.js"),O=o(D),A=n("./client/state/selectors/should-show-video-editor-error.js"),L=o(A),B=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={error:!1,isLoading:!0,isSelectingFrame:!1,pauseVideo:!1},o.selectFrame=function(){var e=o.state.isLoading;return e?void o.setState({error:!0}):void o.setState({error:!1,isSelectingFrame:!0,pauseVideo:!0})},o.updatePoster=function(e){if(o.state.isSelectingFrame){var t=o.props.media,n=(0,b.get)(t,"videopress_guid",null);n&&o.props.updatePoster(n,{atTime:e})}},o.setError=function(){o.setState({error:!0})},o.setIsLoading=function(){o.setState({isLoading:!1})},o.pauseVideo=function(){o.setState({error:!1,isSelectingFrame:!1,pauseVideo:!0})},o.uploadImage=function(e){if(e){var t=o.props.media,n=(0,b.get)(t,"videopress_guid",null);n&&o.props.updatePoster(n,{file:e})}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){return e.shouldShowError&&!this.props.shouldShowError?void this.setState({error:!0,pauseVideo:!1}):void(this.props.posterUrl!==e.posterUrl&&this.props.onUpdatePoster(this.getVideoEditorProps(e.posterUrl)))}},{key:"getVideoEditorProps",value:function(e){var t=this.props.media,n={posterUrl:e};return t&&t.ID&&(n.ID=t.ID),n}},{key:"renderError",value:function(){var e=this.props,t=e.onCancel,n=e.translate;return v.default.createElement(S.default,{status:"is-error",showDismiss:!0,text:n("We are unable to edit this video."),isCompact:!1,onDismissClick:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.media,o=e.onCancel,r=e.uploadProgress,i=e.translate,s=this.state,a=s.error,l=s.isLoading,u=s.isSelectingFrame,d=s.pauseVideo,c=(0,C.default)("video-editor",t);return v.default.createElement("div",{className:c},a&&this.renderError(),v.default.createElement("figure",null,v.default.createElement("div",{className:"video-editor__content"},v.default.createElement("div",{className:"video-editor__preview-wrapper"},v.default.createElement(T.default,{className:"video-editor__preview",isPlaying:!d,item:n,onPause:this.updatePoster,onScriptLoadError:this.setError,onVideoLoaded:this.setIsLoading})),r&&!a&&!u&&v.default.createElement(E.default,{className:"video-editor__progress-bar",isPulsing:!0,total:100,value:r}),v.default.createElement("span",{className:"video-editor__text"},i("Select a frame to use as the thumbnail image or upload your own.")),v.default.createElement(I.default,{isPosterUpdating:r&&!a,isVideoLoading:l,onCancel:o,onSelectFrame:this.selectFrame,onUploadImage:this.uploadImage,onUploadImageClick:this.pauseVideo}))))}}]),t}(g.Component);B.propTypes={className:h.default.string,media:h.default.object.isRequired,onCancel:h.default.func,onUpdatePoster:h.default.func,posterUrl:h.default.string,shouldShowError:h.default.bool,uploadProgress:h.default.number},B.defaultProps={onCancel:b.noop,onUpdatePoster:b.noop},t.default=(0,y.connect)(function(e){return{posterUrl:(0,O.default)(e),shouldShowError:(0,L.default)(e),uploadProgress:(0,M.default)(e)}},{updatePoster:R.updatePoster})((0,_.localize)(B)),e.exports=t.default},"./client/blocks/video-editor/video-editor-controls.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/prop-types/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/i18n-calypso/index.js"),d=n("./client/components/button/index.jsx"),c=o(d),f=n("./client/blocks/video-editor/video-editor-upload-button.js"),p=o(f),m=function(e){var t=e.isPosterUpdating,n=e.isVideoLoading,o=e.onCancel,r=e.onSelectFrame,i=e.onUploadImage,s=e.onUploadImageClick,l=e.translate;return a.default.createElement("div",{className:"video-editor__controls"},o&&a.default.createElement(c.default,{className:"video-editor__controls-button",disabled:t,onClick:o},l("Cancel")),a.default.createElement(p.default,{isPosterUpdating:t,onClick:s,onUploadImage:i},l("Upload Image")),a.default.createElement(c.default,{className:"video-editor__controls-button",disabled:n||t,onClick:r,primary:!0},l("Select Frame")))};m.propTypes={isPosterUpdating:i.default.bool,isVideoLoading:i.default.bool,onCancel:i.default.func,onSelectFrame:i.default.func,onUploadImage:i.default.func,onUploadImageClick:i.default.func},m.defaultProps={isPosterUpdating:!1,isVideoLoading:!0,onSelectFrame:l.noop,onUploadImage:l.noop,onUploadImageClick:l.noop},t.default=(0,u.localize)(m),e.exports=t.default},"./client/blocks/video-editor/video-editor-upload-button.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/components/button/index.jsx"),_=o(b),x=n("./client/components/file-picker/index.jsx"),C=o(x),j=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.uploadImage=function(e){var t=e[0];t&&o.props.onUploadImage(t)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isPosterUpdating,o=e.onClick;return h.default.createElement("form",{className:"video-editor__upload-form"},h.default.createElement(C.default,{accept:"image/*",onPick:this.uploadImage},h.default.createElement(_.default,{className:"video-editor__controls-button",disabled:n,onClick:o},t)))}}]),t}(m.Component);j.propTypes={isPosterUpdating:v.default.bool,onClick:v.default.func,onUploadImage:v.default.func},j.defaultProps={isPosterUpdating:!1,onClick:y.noop,onUploadImage:y.noop},t.default=j,e.exports=t.default},"./client/components/accordion/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./client/components/accordion/status.jsx"),E=o(j),w=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return n.toggleExpanded=function(){n.setExpandedStatus(!n.state.isExpanded)},n.setExpandedStatus=function(e){n.setState({isExpanded:e}),n.props.onToggle(e)},n.state={isExpanded:e.initialExpanded},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.icon,o=e.title,r=e.subtitle,i=e.status,s=e.children,a=e.e2eTitle,l=(0,_.default)("accordion",t,{"is-expanded":this.state.isExpanded||this.props.forceExpand,"has-icon":!!n,"has-subtitle":!!r,"has-status":!!i});return h.default.createElement("div",{className:l,"data-e2e-title":a},h.default.createElement("header",{className:"accordion__header"},h.default.createElement("button",{type:"button",onClick:this.toggleExpanded,className:"accordion__toggle"},n&&h.default.createElement("span",{className:"accordion__icon"},n),h.default.createElement("span",{className:"accordion__title"},o),r&&h.default.createElement("span",{className:"accordion__subtitle"},r),h.default.createElement("span",{className:"accordion__arrow"},h.default.createElement(C.default,{icon:"dropdown"}))),i&&h.default.createElement(E.default,i)),h.default.createElement("div",{className:"accordion__content"},h.default.createElement("div",{className:"accordion__content-wrap"},s)))}}]),t}(m.Component);w.propTypes={initialExpanded:v.default.bool,forceExpand:v.default.bool,onToggle:v.default.func,title:v.default.string.isRequired,subtitle:v.default.string,status:v.default.object,icon:v.default.element,e2eTitle:v.default.string},w.defaultProps={initialExpanded:!1,forceExpand:!1,onToggle:y.noop},t.default=w,e.exports=t.default},"./client/components/accordion/section.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),v=o(g),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement("section",{className:(0,v.default)("accordion__section",this.props.className)},this.props.children)}}]),t}(m.Component);t.default=y,e.exports=t.default},"./client/components/accordion/status.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./client/components/tooltip/index.jsx"),j=o(C),E={info:"info",warning:"notice",error:"notice"},w=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.state={},e.setTooltipContext=function(t){t&&e.setState({tooltipContext:t})},e.showTooltip=e.toggleTooltip.bind(e,!0),e.hideTooltip=e.toggleTooltip.bind(e,!1),e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"toggleTooltip",value:function(e){this.setState({isTooltipVisible:e})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.text,o=e.url,r=e.position;return h.default.createElement("a",{href:o,onClick:this.props.onClick,ref:this.setTooltipContext,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,className:(0,b.default)("accordion__status","is-"+t)},h.default.createElement(x.default,{icon:E[t]}),n&&h.default.createElement(j.default,{position:r,isVisible:this.state.isTooltipVisible,context:this.state.tooltipContext},n))}}]),t}(m.PureComponent);w.propTypes={type:v.default.oneOf(["info","warning","error"]),text:v.default.node,url:v.default.string,position:v.default.string,onClick:v.default.func},w.defaultProps={type:"info",onClick:function(){}},t.default=w,e.exports=t.default},"./client/components/button-group/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),v=o(g),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,v.default)("button-group",this.props.className,{"is-busy":this.props.busy,"is-primary":this.props.primary});return h.default.createElement("span",{className:e},this.props.children)}}]),t}(m.PureComponent);y.propTypes={children:function(e){var t=null;return h.default.Children.forEach(e.children,function(e){!e||e.props&&"button"===e.props.type||(t=new Error("All children elements should be a Button."))}),t}},t.default=y,e.exports=t.default},"./client/components/card/compact.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return l.default.createElement(f.default,(0,s.default)({},e,{className:(0,d.default)(e.className,"is-compact")}),e.children)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=o(i);t.default=r;var a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/classnames/index.js"),d=o(u),c=n("./client/components/card/index.jsx"),f=o(c);e.exports=t.default},"./client/components/data/media-library-selected-data/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return{mediaLibrarySelectedItems:_.default.getAll(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),h=n("./node_modules/react/react.js"),g=o(h),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./client/lib/media/library-selected-store.js"),_=o(b),x=n("./client/lib/react-pass-to-children/index.js"),C=o(x),j=function(e){function t(){var e,n,o,i;(0,l.default)(this,t);for(var a=arguments.length,u=Array(a),d=0;d<a;d++)u[d]=arguments[d];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(u))),o.state=r(o.props.siteId),o.updateState=function(){o.setState(r(o.props.siteId))},i=n,(0,f.default)(o,i)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){_.default.on("change",this.updateState)}},{key:"componentWillUnmount",value:function(){_.default.off("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.setState(r(e.siteId))}},{key:"render",value:function(){return(0,C.default)(this,this.state)}}]),t}(g.default.Component);j.displayName="MediaLibrarySelectedData",j.propTypes={siteId:y.default.number.isRequired},t.default=j,e.exports=t.default},"./client/components/data/media-list-data/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return{media:j.default.getAll(e),mediaHasNextPage:j.default.hasNextPage(e),mediaFetchingNextPage:j.default.isFetchingNextPage(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),h=n("./node_modules/lodash/lodash.js"),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./client/lib/media/actions.js"),x=o(_),C=n("./client/lib/media/list-store.js"),j=o(C),E=n("./client/lib/react-pass-to-children/index.js"),w=o(E),S=n("./client/components/data/media-list-data/utils.js"),k=o(S),T=function(e){function t(){var e,n,o,i;(0,l.default)(this,t);for(var a=arguments.length,u=Array(a),d=0;d<a;d++)u[d]=arguments[d];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(u))),o.state=r(o.props.siteId),o.getQuery=function(e){var t={};return e=e||o.props,e.search&&(t.search=e.search),e.filter&&!e.source&&("this-post"===e.filter?e.postId&&(t.post_ID=e.postId):t.mime_type=k.default.getMimeBaseTypeFromFilter(e.filter)),e.source&&(t.source=e.source,t.path="recent"),t},o.fetchData=function(){x.default.fetchNextPage(o.props.siteId)},o.updateStateData=function(){o.setState(r(o.props.siteId))},i=n,(0,f.default)(o,i)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){x.default.setQuery(this.props.siteId,this.getQuery()),j.default.on("change",this.updateStateData),this.updateStateData()}},{key:"componentWillUnmount",value:function(){j.default.off("change",this.updateStateData)}},{key:"componentWillReceiveProps",value:function(e){var t=this.getQuery(e);this.props.siteId===e.siteId&&(0,h.isEqual)(t,this.getQuery())||(x.default.setQuery(e.siteId,t),this.setState(r(e.siteId)))}},{key:"render",value:function(){return(0,w.default)(this,(0,h.assign)({},this.state,{mediaOnFetchNextPage:this.fetchData}))}}]),t}(b.default.Component);T.displayName="MediaListData",T.propTypes={siteId:v.default.number.isRequired,source:v.default.string,postId:v.default.number,filter:v.default.string,search:v.default.string},t.default=T,e.exports=t.default},"./client/components/data/media-list-data/utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getMimeBaseTypeFromFilter:function(e){var t;switch(e){case"images":t="image/";break;case"audio":t="audio/";break;case"videos":t="video/";break;case"documents":t="application/";break;default:t=""}return t}},e.exports=t.default},"./client/components/data/media-validation-data/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return{mediaValidationErrors:_.default.getAllErrors(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),h=n("./node_modules/prop-types/index.js"),g=o(h),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/lib/media/validation-store.js"),_=o(b),x=n("./client/lib/react-pass-to-children/index.js"),C=o(x),j=function(e){function t(){var e,n,o,i;(0,l.default)(this,t);for(var a=arguments.length,u=Array(a),d=0;d<a;d++)u[d]=arguments[d];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(u))),o.state=r(o.props.siteId),o.updateState=function(){o.setState(r(o.props.siteId))},i=n,(0,f.default)(o,i)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){_.default.on("change",this.updateState)}},{key:"componentWillUnmount",value:function(){_.default.off("change",this.updateState)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.setState(r(e.siteId))}},{key:"render",value:function(){return(0,C.default)(this,this.state)}}]),t}(y.default.Component);j.displayName="MediaValidationData",j.propTypes={siteId:g.default.number.isRequired},t.default=j,e.exports=t.default},"./client/components/data/query-jetpack-modules/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/selectors/is-fetching-jetpack-modules.js"),b=o(y),_=n("./client/state/jetpack/modules/actions.js"),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){e.requestingModules||e.fetchModuleList(e.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);x.propTypes={siteId:h.default.number.isRequired,requestingModules:h.default.bool,fetchModuleList:h.default.func},t.default=(0,v.connect)(function(e,t){return{requestingModules:(0,b.default)(e,t.siteId)}},{fetchModuleList:_.fetchModuleList})(x),e.exports=t.default},"./client/components/data/query-keyring-services/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/sharing/services/selectors.js"),b=n("./client/state/sharing/services/actions.js"),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.props.isRequesting||this.props.requestKeyringServices()}},{key:"render",value:function(){return null}}]),t}(g.Component);_.propTypes={isRequesting:h.default.bool,requestKeyringServices:h.default.func},t.default=(0,v.connect)(function(e){return{isRequesting:(0,y.isKeyringServicesFetching)(e)}},{requestKeyringServices:b.requestKeyringServices})(_),e.exports=t.default},"./client/components/data/query-media-storage/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/redux/lib/index.js"),b=n("./client/state/sites/media-storage/selectors.js"),_=n("./client/state/sites/media-storage/actions.js"),x=n("./client/lib/media/store.js"),C=o(x),j=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.requestStorage=n.requestStorage.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"requestStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!e.requestingMediaStorage&&e.siteId&&e.requestMediaStorage(e.siteId)}},{key:"componentWillMount",value:function(){this.requestStorage(),C.default.on("fetch-media-limits",this.requestStorage)}},{key:"componentWillUnmount",value:function(){C.default.off("fetch-media-limits",this.requestStorage)}},{key:"componentWillReceiveProps",value:function(e){!e.requestingMediaStorage&&e.siteId&&this.props.siteId!==e.siteId&&this.requestStorage(e)}},{key:"render",value:function(){return null}}]),t}(g.Component);j.propTypes={siteId:h.default.number,requestingMediaStorage:h.default.bool,requestMediaStorage:h.default.func},j.defaultProps={requestMediaStorage:function(){}},t.default=(0,v.connect)(function(e,t){return{requestingMediaStorage:(0,b.isRequestingMediaStorage)(e,t.siteId)}},function(e){return(0,y.bindActionCreators)({requestMediaStorage:_.requestMediaStorage},e)})(j),e.exports=t.default},"./client/components/data/query-media/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-pure-render/shallowEqual.js"),y=o(v),b=n("./node_modules/react-redux/es/index.js"),_=n("./client/state/media/actions.js"),x={requestMedia:_.requestMedia,requestMediaItem:_.requestMediaItem},C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){this.props.siteId===e.siteId&&this.props.mediaId===e.mediaId&&(0,y.default)(this.props.query,e.query)||this.request()}},{key:"request",value:function(){var e=this.props,t=e.siteId,n=e.mediaId,o=e.query,r=!!n;r?this.props.requestMediaItem(t,n):this.props.requestMedia(t,o)}},{key:"render",value:function(){return null}}]),t}(g.Component);C.propTypes={siteId:h.default.number.isRequired,query:h.default.object,mediaId:h.default.number,request:h.default.func},C.defaultProps={request:function(){}},t.default=(0,b.connect)(null,x)(C),e.exports=t.default},"./client/components/data/query-page-templates/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/page-templates/selectors.js"),b=n("./client/state/sites/selectors.js"),_=n("./client/state/page-templates/actions.js"),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.siteId,o=t.themeSlug,r=e.siteId,i=e.themeSlug,s=n!==r||o&&i&&o!==i;s&&this.request(e)}},{key:"request",value:function(e){e.isRequesting||e.requestPageTemplates(e.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);x.propTypes={siteId:h.default.number.isRequired,isRequesting:h.default.bool,requestPageTemplates:h.default.func},t.default=(0,v.connect)(function(e,t){var n=t.siteId;return{isRequesting:(0,y.isRequestingPageTemplates)(e,n),themeSlug:(0,b.getSiteOption)(e,n,"theme_slug")}},{requestPageTemplates:_.requestPageTemplates})(x),e.exports=t.default},"./client/components/data/query-post-revisions/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/posts/revisions/actions.js"),b=n("./client/state/posts/selectors.js"),_=function(e){
function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){this.props.siteId===e.siteId&&this.props.postId===e.postId||this.request()}},{key:"request",value:function(){this.props.requestPostRevisions(this.props.siteId,this.props.postId,this.props.postType)}},{key:"render",value:function(){return null}}]),t}(g.Component);_.propTypes={postId:h.default.number,siteId:h.default.number,postType:h.default.string,requestPostRevisions:h.default.func},t.default=(0,v.connect)(function(e,t){var n=t.postId,o=t.siteId;return{postType:(0,b.getEditedPostValue)(e,o,n,"type")}},{requestPostRevisions:y.requestPostRevisions})(_),e.exports=t.default},"./client/components/data/query-publicize-connections/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/sharing/publicize/selectors.js"),b=n("./client/state/sharing/publicize/actions.js"),_=n("./client/state/ui/selectors.js"),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){!this.props.requestingConnections&&this.props.siteId&&this.props.requestConnections(this.props.siteId)}},{key:"componentDidUpdate",value:function(e){var t=e.siteId;this.props.siteId&&t!==this.props.siteId&&!this.props.requestingConnections&&this.props.requestConnections(this.props.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);x.propTypes={requestConnections:h.default.func,requestingConnections:h.default.bool,selectedSite:h.default.bool,siteId:h.default.number},x.defaultProps={requestConnections:function(){},requestingConnections:!1,selectedSite:!1,siteId:0},t.default=(0,v.connect)(function(e,t){var n=t.siteId,o=t.selectedSite;return n=n||o&&(0,_.getSelectedSiteId)(e),{requestingConnections:(0,y.isFetchingConnections)(e,n),siteId:n}},{requestConnections:b.fetchConnections})(x),e.exports=t.default},"./client/components/data/query-simple-payments/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/simple-payments/product-list/actions.js"),b=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.siteId===this.props.siteId&&e.productId===this.props.productId||this.request(e)}},{key:"request",value:function(e){var t=e.siteId,n=e.productId;if(t&&0!==n)return n?void e.requestProduct(t,n):void e.requestProducts(t)}},{key:"render",value:function(){return null}}]),t}(m.Component);b.propTypes={productId:g.default.number,siteId:g.default.number.isRequired,requestProduct:g.default.func,requestProducts:g.default.func},b.defaultProps={productId:null},t.default=(0,v.connect)(null,{requestProduct:y.requestProduct,requestProducts:y.requestProducts})(b),e.exports=t.default},"./client/components/data/query-site-settings/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/site-settings/selectors.js"),b=n("./client/state/site-settings/actions.js"),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.requestSettings(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.siteId;e.siteId&&t!==e.siteId&&this.requestSettings(e)}},{key:"requestSettings",value:function(e){var t=e.requestingSiteSettings,n=e.siteId;!t&&n&&e.requestSiteSettings(n)}},{key:"render",value:function(){return null}}]),t}(m.Component);_.propTypes={siteId:g.default.number,requestingSiteSettings:g.default.bool,requestSiteSettings:g.default.func},t.default=(0,v.connect)(function(e,t){var n=t.siteId;return{requestingSiteSettings:(0,y.isRequestingSiteSettings)(e,n)}},{requestSiteSettings:b.requestSiteSettings})(_),e.exports=t.default},"./client/components/data/query-taxonomies/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/post-types/taxonomies/actions.js"),b=n("./client/state/post-types/taxonomies/selectors.js"),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.postType===e.postType||this.request(e)}},{key:"request",value:function(e){!e.requesting&&e.siteId&&e.requestPostTypeTaxonomies(e.siteId,e.postType)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),t}(g.Component);_.propTypes={siteId:h.default.number,postType:h.default.string.isRequired,requesting:h.default.bool.isRequired,requestPostTypeTaxonomies:h.default.func.isRequired},t.default=(0,v.connect)(function(e,t){return{requesting:(0,b.isRequestingPostTypeTaxonomies)(e,t.siteId,t.postType)}},{requestPostTypeTaxonomies:y.requestPostTypeTaxonomies})(_),e.exports=t.default},"./client/components/data/query-terms/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/react-pure-render/shallowEqual.js"),b=o(y),_=n("./client/state/terms/actions.js"),x=n("./client/state/terms/selectors.js"),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId===e.siteId&&this.props.taxonomy===e.taxonomy&&(0,b.default)(this.props.query,e.query)||this.request(e)}},{key:"request",value:function(e){!e.requesting&&e.siteId&&e.requestSiteTerms(e.siteId,e.taxonomy,e.query)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),t}(g.Component);C.propTypes={siteId:h.default.number,taxonomy:h.default.string.isRequired,query:h.default.object,requesting:h.default.bool.isRequired,requestSiteTerms:h.default.func.isRequired},C.defaultProps={query:{}},t.default=(0,v.connect)(function(e,t){return{requesting:(0,x.isRequestingTermsForQuery)(e,t.siteId,t.taxonomy,t.query)}},{requestSiteTerms:_.requestSiteTerms})(C),e.exports=t.default},"./client/components/data/query-users-suggestions/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./client/state/users/suggestions/selectors.js"),b=n("./client/state/users/suggestions/actions.js"),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.siteId!==e.siteId&&this.request(e)}},{key:"request",value:function(e){!e.isRequesting&&e.siteId&&e.requestUserSuggestions(e.siteId)}},{key:"render",value:function(){return null}}]),t}(g.Component);_.propTypes={siteId:h.default.number,isRequesting:h.default.bool,requestUserSuggestions:h.default.func},_.defaultProps={requestUserSuggestions:function(){},isRequesting:!1},t.default=(0,v.connect)(function(e,t){return{isRequesting:(0,y.isRequestingUserSuggestions)(e,t.siteId)}},{requestUserSuggestions:b.requestUserSuggestions})(_),e.exports=t.default},"./client/components/data/query-users/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),v=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/react-pure-render/shallowEqual.js"),b=o(y),_=n("./client/state/users/actions.js"),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.request()}},{key:"componentDidUpdate",value:function(e){(0,b.default)(this.props.userIds,e.userIds)&&this.props.siteId===e.siteId||this.request()}},{key:"request",value:function(){this.props.requestUsers(this.props.siteId,this.props.userIds)}},{key:"render",value:function(){return null}}]),t}(m.Component);x.propTypes={requestUsers:g.default.func,siteId:g.default.number,userIds:g.default.arrayOf(g.default.number)},t.default=(0,v.connect)(function(){return{}},{requestUsers:_.requestUsers})(x),e.exports=t.default},"./client/components/date-picker/day.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/lodash/lodash.js"),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.noop;return function(o){n(e,t,o)}},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.noop;return function(o){n(e,t,o)}},u=function(e){var t=e.date,n=e.modifiers,o=e.onMouseEnter,r=e.onMouseLeave;return i.default.createElement("div",{className:"date-picker__day",onMouseEnter:a(t,n,o),onMouseLeave:l(t,n,r)},t.getDate())};t.default=u,e.exports=t.default},"./client/components/date-picker/event.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarEvent=void 0;var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=n("./node_modules/social-logos/build/index.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=function(e){return e&&i.default.createElement("span",{className:"date-picker__icon-wrapper date-picker__icon-wrapper-"+e},i.default.createElement(a.default,{icon:e,size:18}))},p=function(e,t){if(!e)return null;var n=(0,c.default)("date-picker__social-icon-wrapper","date-picker__social-icon-wrapper-"+e,{"date-picker__social-icon-wrapper-color":t});return i.default.createElement("span",{className:n},i.default.createElement(u.default,{icon:e,size:18}))};t.CalendarEvent=function(e){var t=e.icon,n=e.socialIcon,o=e.socialIconColor,r=void 0===o||o,s=e.title;return i.default.createElement("div",{className:"date-picker__calendar-event"},f(t),p(n,r),i.default.createElement("span",{className:"date-picker__event-title"},s))}},"./client/components/date-picker/events-tooltip.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/components/tooltip/index.jsx"),x=o(_),C=n("./client/components/date-picker/event.jsx"),j=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.events,o=t.isVisible,r=t.maxEvents,i=this.props.title;i||(i=this.props.translate("%d post","%d posts",{count:n.length,args:n.length}));var s=!!(n&&n.length&&o),a=n.length-r,l=this.props.moreEventsLabel;return l||(l=this.props.translate("… and %(moreEvents)d more post","… and %(moreEvents)d more posts",{count:a,args:{moreEvents:a}})),h.default.createElement(x.default,{className:"date-picker__events-tooltip",context:this.props.context,isVisible:s,onClose:y.noop},h.default.createElement("span",null,i),h.default.createElement("hr",{className:"date-picker__division"}),h.default.createElement("ul",null,(0,y.map)(n,function(t,n){return n<r&&h.default.createElement("li",{key:t.id},h.default.createElement(C.CalendarEvent,{icon:t.icon,socialIcon:t.socialIcon,socialIconColor:t.socialIconColor,title:""===t.title?e.props.translate("{{em}}(No title){{/em}}",{components:{em:h.default.createElement("em",null)}}):t.title}))}),a>0&&h.default.createElement("li",null,l)))}}]),t}(m.Component);j.propTypes={title:v.default.string,events:v.default.array,moment:v.default.func.isRequired,maxEvents:v.default.number,moreEvents:v.default.string},j.defaultProps={events:[],maxEvents:8},t.default=(0,b.localize)(j),e.exports=t.default},"./client/components/date-picker/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react-day-picker/DayPicker.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/i18n-calypso/index.js"),E=n("./client/components/date-picker/day.jsx"),w=o(E),S=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.setCalendarDay=function(e,t){var n=o.props.moment(e);if(t.disabled)return null;var r={year:n.year(),month:n.month(),date:n.date()},i=(o.props.timeReference||n).set(r);o.props.onSelectDay(i,r,t)},o.setCalendarMonth=function(){var e=o.refs.daypicker;e.showMonth(new Date)},o.renderDay=function(e,t){return v.default.createElement(w.default,{date:e,modifiers:t,onMouseEnter:o.handleDayMouseEnter,onMouseLeave:o.handleDayMouseLeave})},o.handleDayMouseEnter=function(e,t,n){var r=o.filterEventsByDay(e);o.props.onDayMouseEnter(e,t,n,r)},o.handleDayMouseLeave=function(e,t,n){var r=o.filterEventsByDay(e);o.props.onDayMouseLeave(e,t,n,r)},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"isSameDay",value:function(e,t){return e=this.props.moment(e),t=this.props.moment(t),e.isSame(t,"day")}},{key:"filterEventsByDay",value:function(e){if(!this.props.events)return[];var t=void 0,n=void 0,o=[];for(t=0;t<this.props.events.length;t++)n=this.props.events[t],this.isSameDay(n.date,e)&&("undefined"==typeof n.id&&(n.id="event-"+t),o.push(n));return o}},{key:"locale",value:function e(){var t=this.props.moment,n=t().localeData(),o=n.firstDayOfWeek(),r=t.weekdaysMin(),e={formatDay:function(e){return t(e).format("llll")},formatMonthTitle:function(e){return t(e).format("MMMM YYYY")},formatWeekdayShort:function(e){return(0,C.get)(r,e," ")[0]},formatWeekdayLong:function(e){return t().weekday(e).format("dddd")},getFirstDayOfWeek:function(){return o}};return(0,C.merge)(e,this.props.locale)}},{key:"getDateInstance",value:function(e){return this.props.moment.isMoment(e)?e.toDate():e instanceof Number||"number"==typeof e?new Date(e):e}},{key:"render",value:function(){var e=this,t=(0,i.default)({},this.props.modifiers,{"past-days":{before:new Date},sunday:{daysOfWeek:[0]}});return this.props.selectedDay&&(t["is-selected"]=this.getDateInstance(this.props.selectedDay)),this.props.events&&this.props.events.length&&(t.events=(0,C.map)((0,C.filter)(this.props.events,function(e){return e.date}),function(t){return e.getDateInstance(t.date)})),v.default.createElement(x.default,{modifiers:t,ref:"daypicker",className:"date-picker",disabledDays:this.props.disabledDays,month:this.props.calendarViewDate,onDayClick:this.setCalendarDay,renderDay:this.renderDay,localeUtils:this.locale(),onMonthChange:this.props.onMonthChange,enableOutsideDays:this.props.enableOutsideDays,onCaptionClick:this.setCalendarMonth})}}]),t}(g.PureComponent);S.propTypes={calendarViewDate:b.default.object,enableOutsideDays:b.default.bool,events:b.default.array,locale:b.default.object,modifiers:b.default.object,moment:b.default.func.isRequired,selectedDay:b.default.object,timeReference:b.default.object,onMonthChange:b.default.func,onSelectDay:b.default.func,onDayMouseEnter:b.default.func,onDayMouseLeave:b.default.func},S.defaultProps={enableOutsideDays:!0,calendarViewDate:new Date,modifiers:{},selectedDay:null,onMonthChange:C.noop,onSelectDay:C.noop,onDayMouseEnter:C.noop,onDayMouseLeave:C.noop},t.default=(0,j.localize)(S),e.exports=t.default},"./client/components/draggable/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j=function(e){function t(e){(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.state={x:n.props.x,y:n.props.y},n.onTouchStartHandler=n.onTouchStartHandler.bind(n),n.onMouseDownHandler=n.onMouseDownHandler.bind(n),n.draggingHandler=n.draggingHandler.bind(n),n.draggingEndedHandler=n.draggingEndedHandler.bind(n),n.update=n.update.bind(n),n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var n=t.pageX-this.relativePos.x,o=t.pageY-this.relativePos.y;this.mousePos={x:n,y:o}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,n=t.x,o=t.y;e&&(n=Math.max(e.left,Math.min(e.right-this.props.width,n)),o=Math.max(e.top,Math.min(e.bottom-this.props.height,o))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),this.props.onDrag(n,o),this.props.controlled||this.setState({x:n,y:o})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,C.omit)(this.props,(0,a.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),x.default.createElement("div",(0,i.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(_.Component);j.propTypes={onDrag:b.default.func,onStop:b.default.func,width:b.default.number,height:b.default.number,x:b.default.number,y:b.default.number,controlled:b.default.bool,bounds:b.default.shape({top:b.default.number,left:b.default.number,bottom:b.default.number,right:b.default.number})},j.defaultProps={onDrag:C.noop,onStop:C.noop,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=j,e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var r=n("./node_modules/babel-runtime/core-js/array/from.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react-dom/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./node_modules/gridicons/build/index.js"),S=o(w),k=n("./node_modules/i18n-calypso/index.js"),T=n("./node_modules/lodash/lodash.js"),P=n("./client/components/root-child/index.jsx"),I=o(P),R=n("./client/state/ui/drop-zone/actions.js"),N=t.DropZone=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1},o.resetDragState=function(){(o.state.isDraggingOverDocument||o.state.isDraggingOverElement)&&(o.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),o.toggleDropZoneReduxState(!1))},o.toggleMutationObserver=function(){o.disconnectMutationObserver(),o.state.isDraggingOverDocument&&(o.observer=new window.MutationObserver(o.detectNodeRemoval),o.observer.observe(document.body,{childList:!0,subtree:!0}))},o.disconnectMutationObserver=function(){o.observer&&(o.observer.disconnect(),delete o.observer)},o.detectNodeRemoval=function(e){e.forEach(function(e){e.removedNodes.length&&(o.dragEnterNodes=(0,T.without)(o.dragEnterNodes,(0,i.default)(e.removedNodes)))})},o.toggleDraggingOverDocument=function(e){"dragenter"!==e.type||(0,T.includes)(o.dragEnterNodes,e.target)?"dragleave"===e.type&&(o.dragEnterNodes=(0,T.without)(o.dragEnterNodes,e.target)):o.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,n=o.props.onVerifyValidTransfer(t.dataTransfer),r=n&&o.dragEnterNodes.length;o.setState({isDraggingOverDocument:r,isDraggingOverElement:r&&(o.props.fullScreen||o.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(o.dragEnterNodes=(0,T.without)(o.dragEnterNodes,window)),o.toggleDropZoneReduxState(!(!o.state.isDraggingOverDocument&&!o.state.isDraggingOverElement))},o.toggleDropZoneReduxState=function(e){o.state.lastVisibleState!==e&&(e?o.props.showDropZone(o.props.dropZoneName):o.props.hideDropZone(o.props.dropZoneName),o.setState({lastVisibleState:e}))},o.preventDefault=function(e){e.preventDefault()},o.isWithinZoneBounds=function(e,t){if(!o.refs.zone)return!1;var n=o.refs.zone.getBoundingClientRect();return n.bottom!==n.top&&n.left!==n.right&&(e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom)},o.onDrop=function(e){e.dataTransfer&&e.dataTransfer.files.length,o.resetDragState(),e.preventDefault(),(o.props.fullScreen||v.default.findDOMNode(o.refs.zone).contains(e.target))&&(o.props.onDrop(e),o.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&o.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation()))},o.renderContent=function(){var e=o.props.textLabel?o.props.textLabel:o.props.translate("Drop files to upload");return b.default.createElement("div",{className:"drop-zone__content"},o.props.children?o.props.children:b.default.createElement("div",null,b.default.createElement("span",{className:"drop-zone__content-icon"},o.props.icon),b.default.createElement("span",{className:"drop-zone__content-text"},e)))},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)}},{key:"componentDidUpdate",value:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()}},{key:"render",value:function(){var e=(0,E.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=b.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?b.default.createElement(I.default,null,t):t}}]),t}(b.default.Component);N.propTypes={className:x.default.string,fullScreen:x.default.bool,icon:x.default.node,onDrop:x.default.func,onVerifyValidTransfer:x.default.func,onFilesDrop:x.default.func,textLabel:x.default.string,translate:x.default.func,showDropZone:x.default.func.isRequired,hideDropZone:x.default.func.isRequired,dropZoneName:x.default.string},N.defaultProps={className:null,onDrop:T.noop,onVerifyValidTransfer:function(){return!0},onFilesDrop:T.noop,fullScreen:!1,icon:b.default.createElement(S.default,{icon:"cloud-upload",size:48}),translate:T.identity,dropZoneName:null};var M={showDropZone:R.showDropZone,hideDropZone:R.hideDropZone};t.default=(0,C.connect)(null,M)((0,k.localize)(N))},"./client/components/email-verification/email-verification-dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/react-redux/es/index.js"),x=n("./client/components/dialog/index.jsx"),C=o(x),j=n("./client/components/button/index.jsx"),E=o(j),w=n("./client/components/spinner/index.jsx"),S=o(w),k=n("./client/state/current-user/selectors.js"),T=n("./client/state/current-user/email-verification/actions.js"),P=function(e){
function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleClose=function(){o.props.resetVerifyEmailState(),o.props.onClose()},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getResendButtonLabel",value:function(){return"sent"===this.props.emailVerificationStatus||"error"===this.props.emailVerificationStatus?this.props.translate("Email Sent"):"requesting"===this.props.emailVerificationStatus?v.default.createElement(S.default,{className:"email-verification-dialog__confirmation-dialog-spinner"}):this.props.translate("Resend Email")}},{key:"getDialogButtons",value:function(){return[v.default.createElement(E.default,{key:"resend",primary:!1,disabled:(0,y.includes)(["requesting","sent","error"],this.props.emailVerificationStatus),onClick:this.props.verifyEmail},this.getResendButtonLabel()),v.default.createElement(E.default,{key:"close",primary:!0,onClick:this.handleClose},this.props.translate("OK"))]}},{key:"render",value:function(){var e={confirmHeading:this.props.translate("Please verify your email address:"),confirmExplanation:this.props.translate("When you first signed up for a WordPress.com account we sent you an email. Please open it and click on the blue button to verify your email address."),confirmReasoning:this.props.translate("Verifying your email allows us to assist you if you ever lose access to your account in the future."),confirmEmail:this.props.translate("{{wrapper}}%(email)s{{/wrapper}} {{emailPreferences}}change{{/emailPreferences}}",{components:{wrapper:v.default.createElement("span",{className:"email-verification-dialog__confirmation-dialog-email-wrapper"}),emailPreferences:v.default.createElement("a",{href:"/me/account"})},args:{email:this.props.email}})};return v.default.createElement(C.default,{isVisible:!0,buttons:this.getDialogButtons(),additionalClassNames:"email-verification-dialog__confirmation-dialog is-narrow"},v.default.createElement("h1",{className:"email-verification-dialog__confirmation-dialog-heading is-variable-height"},e.confirmHeading),v.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-email"},e.confirmEmail),v.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-explanation"},e.confirmExplanation),v.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-reasoning"},e.confirmReasoning))}}]),t}(g.Component);P.propTypes={onClose:h.default.func,translate:h.default.func,email:h.default.string,emailVerificationStatus:h.default.string},P.defaultProps={onClose:y.noop},t.default=(0,_.connect)(function(e){return{email:(0,k.getCurrentUserEmail)(e),emailVerificationStatus:(0,y.get)(e,"currentUser.emailVerification.status")}},{verifyEmail:T.verifyEmail,resetVerifyEmailState:T.resetVerifyEmailState})((0,b.localize)(P)),e.exports=t.default},"./client/components/file-picker/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/component-file-picker/index.js"),_=o(b),x=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.showPicker=n.showPicker.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,_.default)((0,y.assign)({},this.props),this.props.onPick)}},{key:"render",value:function(){return v.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(v.default.Component);t.default=x,x.displayName="FilePicker",x.propTypes={multiple:h.default.bool,directory:h.default.bool,accept:h.default.string,onClick:h.default.func,onPick:h.default.func},x.defaultProps={multiple:!1,directory:!1,accept:null,onClick:y.noop,onPick:y.noop},e.exports=t.default},"./client/components/foldable-card/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./client/components/card/index.jsx"),j=o(C),E=n("./client/components/card/compact.jsx"),w=o(E),S=n("./node_modules/gridicons/build/index.js"),k=o(S),T=n("./client/components/screen-reader-text/index.js"),P=o(T),I=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={expanded:o.props.expanded},o.onClick=function(){o.props.children&&o.setState({expanded:!o.state.expanded}),o.props.onClick&&o.props.onClick(),o.state.expanded?o.props.onClose(o.props.cardKey):o.props.onOpen(o.props.cardKey)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:e.expanded})}},{key:"getClickAction",value:function(){if(!this.props.disabled)return this.onClick}},{key:"getActionButton",value:function(){return this.state.expanded?this.props.actionButtonExpanded||this.props.actionButton:this.props.actionButton}},{key:"renderActionButton",value:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return v.default.createElement("div",{className:"foldable-card__action",onClick:e},this.getActionButton());if(this.props.children){var t=24,n=this.props.screenReaderText||this.props.translate("More");return v.default.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},v.default.createElement(P.default,null,n),v.default.createElement(k.default,{icon:this.props.icon,size:t}))}}},{key:"renderContent",value:function(){return v.default.createElement("div",{className:"foldable-card__content"},this.props.children)}},{key:"renderHeader",value:function(){var e=this.props.summary?v.default.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?v.default.createElement("span",{className:"foldable-card__summary-expanded"},this.props.expandedSummary," "):null,n=this.props.clickableHeader?this.getClickAction():null,o=(0,b.default)("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return v.default.createElement("div",{className:o,onClick:n},v.default.createElement("span",{className:"foldable-card__main"},this.props.header," "),v.default.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))}},{key:"render",value:function(){var e=this.props.compact?w.default:j.default,t=(0,b.default)("foldable-card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary});return v.default.createElement(e,{className:t},this.renderHeader(),this.state.expanded&&this.renderContent())}}]),t}(g.Component);I.propTypes={actionButton:h.default.element,actionButtonExpanded:h.default.element,cardKey:h.default.string,compact:h.default.bool,disabled:h.default.bool,expandedSummary:h.default.oneOfType([h.default.string,h.default.element]),expanded:h.default.bool,icon:h.default.string,onClick:h.default.func,onClose:h.default.func,onOpen:h.default.func,screenReaderText:h.default.oneOfType([h.default.string,h.default.bool]),summary:h.default.oneOfType([h.default.string,h.default.element])},I.defaultProps={onOpen:x.noop,onClose:x.noop,cardKey:"",icon:"chevron-down",expanded:!1,screenReaderText:!1},t.default=(0,_.localize)(I),e.exports=t.default},"./client/components/forms/form-checkbox/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=function(e){var t=e.className,n=(0,a.default)(e,["className"]);return u.default.createElement("input",(0,i.default)({},n,{type:"checkbox",className:(0,c.default)(t,"form-checkbox")}))};t.default=f,e.exports=t.default},"./client/components/forms/form-currency-input/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){if(!e)return null;if(!n)return e;var o=(0,y.get)((0,y.find)(n,function(t){return t.code===e}),"label",e);return c.default.createElement("span",{className:"form-currency-input__affix"},o,c.default.createElement(v.default,{icon:"chevron-down",size:18,className:"form-currency-input__select-icon"}),c.default.createElement("select",{className:"form-currency-input__select",value:e,onChange:t},n.map(function(e){var t=e.code,n=e.label,o=void 0===n?t:n;return c.default.createElement("option",{key:t,value:t},o)})))}function i(e){var t=e.className,n=e.currencySymbolPrefix,o=e.currencySymbolSuffix,i=e.onCurrencyChange,s=e.currencyList,l=e.placeholder,d=void 0===l?"0.00":l,f=(0,u.default)(e,["className","currencySymbolPrefix","currencySymbolSuffix","onCurrencyChange","currencyList","placeholder"]),p=(0,h.default)("form-currency-input",t),m=r(n,i,s),g=r(o,i,s);return c.default.createElement(_.default,(0,a.default)({},f,{type:"number",className:p,prefix:m,suffix:g,placeholder:d}))}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),u=o(l),d=n("./node_modules/react/react.js"),c=o(d),f=n("./node_modules/prop-types/index.js"),p=o(f),m=n("./node_modules/classnames/index.js"),h=o(m),g=n("./node_modules/gridicons/build/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/components/forms/form-text-input-with-affixes/index.jsx"),_=o(b),x=p.default.shape({code:p.default.string.isRequired,label:p.default.string});i.propTypes={currencySymbolPrefix:p.default.string,currencySymbolSuffix:p.default.string,onCurrencyChange:p.default.func,currencyList:p.default.arrayOf(x)},t.default=i,e.exports=t.default},"./client/components/forms/form-legend/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=function(e){var t=e.className,n=e.children,o=(0,a.default)(e,["className","children"]);return u.default.createElement("legend",(0,i.default)({},o,{className:(0,c.default)(t,"form-legend")}),n)};t.default=f,e.exports=t.default},"./client/components/forms/form-radio/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=function(e){var t=e.className,n=(0,a.default)(e,["className"]);return u.default.createElement("input",(0,i.default)({},n,{type:"radio",className:(0,c.default)(t,"form-radio")}))};t.default=f,e.exports=t.default},"./client/components/forms/form-range/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/classnames/index.js"),C=o(x),j=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.shouldNormalizeChange=function(){var e=window.navigator.userAgent;return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")},o.onChange=function(e){o.props.onChange(e)},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.shouldNormalizeChange()&&this.refs.range.addEventListener("change",this.onChange)}},{key:"componentWillUnmount",value:function(){this.refs.range.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=(0,C.default)(this.props.className,"form-range");return v.default.createElement("input",(0,i.default)({ref:"range",type:"range",className:e},(0,_.omit)(this.props,"className")))}}]),t}(v.default.Component);j.displayName="FormRange",j.propTypes={onChange:b.default.func},j.defaultProps={onChange:_.noop},t.default=j,e.exports=t.default},"./client/components/forms/form-section-heading/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=function(e){var t=e.className,n=e.children,o=(0,a.default)(e,["className","children"]);return u.default.createElement("h3",(0,i.default)({},o,{className:(0,c.default)(t,"form-section-heading")}),n)};t.default=f,e.exports=t.default},"./client/components/forms/form-setting-explanation/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,x.default)(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return v.default.createElement("p",(0,i.default)({},(0,C.omit)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}]),t}(v.default.Component);j.displayName="FormSettingExplanation",j.propTypes={noValidate:b.default.bool,isIndented:b.default.bool,className:b.default.string},j.defaultProps={noValidate:!1,isIndented:!1},t.default=j,e.exports=t.default},"./client/components/forms/form-text-input-with-affixes/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./client/components/forms/form-text-input/index.jsx"),j=o(C),E=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.noWrap,n=e.prefix,o=e.suffix,r=(0,i.default)(e,["noWrap","prefix","suffix"]);return v.default.createElement("div",{className:(0,x.default)("form-text-input-with-affixes",{"no-wrap":t})},n&&v.default.createElement("span",{className:"form-text-input-with-affixes__prefix"},n),v.default.createElement(j.default,r),o&&v.default.createElement("span",{className:"form-text-input-with-affixes__suffix"},o))}}]),t}(v.default.Component);E.displayName="FormTextInputWithAffixes",E.propTypes={noWrap:b.default.bool,prefix:b.default.node,suffix:b.default.node},t.default=E,e.exports=t.default},"./client/components/forms/form-textarea/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=function(e){var t=e.className,n=e.isError,o=e.isValid,r=e.children,s=(0,a.default)(e,["className","isError","isValid","children"]);return u.default.createElement("textarea",(0,i.default)({},s,{className:(0,c.default)(t,"form-textarea",{"is-error":n,"is-valid":o})}),r)};t.default=f,e.exports=t.default},"./client/components/forms/form-toggle/compact.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=n("./client/components/forms/form-toggle/index.jsx"),p=o(f),m=function(e){var t=e.className,n=e.children,o=(0,a.default)(e,["className","children"]);return u.default.createElement(p.default,(0,i.default)({},o,{className:(0,c.default)(t,"is-compact")}),n)};t.default=m,e.exports=t.default},"./client/components/forms/form-toggle/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onKeyDown=function(e){o.props.disabled||("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o.props.onChange(!o.props.checked)),o.props.onKeyDown(e))},o.onClick=function(e){e&&e.stopPropagation&&e.stopPropagation(),o.props.disabled||o.props.onChange(!o.props.checked)},o.onLabelClick=function(e){if(!o.props.disabled){var t=e.target.nodeName.toLowerCase();"a"!==t&&"input"!==t&&"select"!==t&&(e.preventDefault(),o.props.onChange(!o.props.checked))}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.id=this.constructor.idNum++}},{key:"render",value:function(){var e=this.props.id||"toggle-"+this.id,t=(0,b.default)("form-toggle__wrapper",{"is-disabled":this.props.disabled}),n=(0,b.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return h.default.createElement("span",{className:t},h.default.createElement("input",{id:e,className:n,type:"checkbox",checked:this.props.checked,readOnly:!0,disabled:this.props.disabled}),h.default.createElement("label",{className:"form-toggle__label",htmlFor:e},h.default.createElement("span",{className:"form-toggle__switch",onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),h.default.createElement("span",{className:"form-toggle__label-content",onClick:this.onLabelClick},this.props.children)))}}]),t}(m.PureComponent);x.propTypes={onChange:v.default.func,onKeyDown:v.default.func,checked:v.default.bool,disabled:v.default.bool,id:v.default.string,className:v.default.string,toggling:v.default.bool,"aria-label":v.default.string},x.defaultProps={checked:!1,disabled:!1,onKeyDown:_.noop,onChange:_.noop},x.idNum=0,t.default=x,e.exports=t.default},"./client/components/forms/range/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./client/components/forms/form-range/index.jsx"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.state={id:(0,_.uniqueId)("range")},o.getMinContentElement=function(){if(o.props.minContent)return v.default.createElement("span",{className:"range__content is-min"},o.props.minContent)},o.getMaxContentElement=function(){if(o.props.maxContent)return v.default.createElement("span",{className:"range__content is-max"},o.props.maxContent)},o.getValueLabelElement=function(){var e,t;if(o.props.showValueLabel)return e=100*(o.props.value-o.props.min)/(o.props.max-o.props.min),t=Math.floor(13*((50-e)/50)),v.default.createElement("span",{className:"range__label",style:{left:(e||0)+"%",marginLeft:t}},v.default.createElement("output",{className:"range__label-inner",htmlFor:o.state.id,value:o.props.value},o.props.value))},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,C.default)(this.props.className,"range",{"has-min-content":!!this.props.minContent,"has-max-content":!!this.props.maxContent});return v.default.createElement("div",{className:e},this.getMinContentElement(),v.default.createElement(E.default,(0,i.default)({id:this.state.id,className:"range__input"},(0,_.omit)(this.props,"minContent","maxContent","showValueLabel","className"))),this.getMaxContentElement(),this.getValueLabelElement())}}]),t}(v.default.Component);w.displayName="Range",w.propTypes={minContent:b.default.oneOfType([b.default.element,b.default.string]),maxContent:b.default.oneOfType([b.default.element,b.default.string]),min:b.default.oneOfType([b.default.string,b.default.number]),max:b.default.oneOfType([b.default.string,b.default.number]),value:b.default.oneOfType([b.default.string,b.default.number]),showValueLabel:b.default.bool},w.defaultProps={min:0,max:10,value:0,showValueLabel:!1},t.default=w,e.exports=t.default},"./client/components/forms/sortable-list/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/lodash/lodash.js"),E=n("./node_modules/classnames/index.js"),w=o(E),S=n("./node_modules/debug/browser.js"),k=o(S),T=n("./node_modules/gridicons/build/index.js"),P=o(T),I=n("./client/lib/touch-detect/index.js"),R=o(I),N=(0,k.default)("calypso:forms:sortable-list"),M=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(l))),o.state={activeIndex:null,activeOrder:null,position:null},o.getPositionForCursorElement=function(e,t){return{top:t.clientY-e.clientHeight/2,left:t.clientX-e.clientWidth/2}},o.compareCursorVerticalToElement=function(e,t){var n=e.getBoundingClientRect();return t.clientY<n.top?-1:t.clientY>n.bottom?1:0},o.isCursorBeyondElementThreshold=function(e,t,n,o){var r=e.getBoundingClientRect();switch(t){case"top":return o.clientY<=r.top+r.height/2;case"right":return o.clientX>=r.left+r.width/2&&("top"===n||o.clientY>=r.top)&&("bottom"===n||o.clientY<=r.bottom);case"bottom":return o.clientY>=r.top+r.height/2;case"left":return o.clientX<=r.left+r.width/2&&("top"===n||o.clientY>=r.top)&&("bottom"===n||o.clientY<=r.bottom);default:return!1}},o.getAdjustedElementIndex=function(e){return o.state.activeOrder?o.state.activeOrder[e]:e},o.getCursorElementIndex=function(e){var t,n=o.compareCursorVerticalToElement(o.refs.list,e),r=o.getAdjustedElementIndex(o.state.activeIndex),i=o.refs["wrap-shadow-"+o.state.activeIndex].getBoundingClientRect();return t=(0,j.findIndex)(o.props.children,function(t,s){var a,l,u;return s!==o.state.activeIndex&&(l=o.getAdjustedElementIndex(s),"horizontal"===o.props.direction&&(1===n&&o.refs["wrap-"+s].getBoundingClientRect().top>=i.top?u="bottom":-1===n&&o.refs["wrap-"+s].getBoundingClientRect().bottom<=i.bottom&&(u="top")),l<r?a=o.isCursorBeyondElementThreshold(o.refs["wrap-"+s],"horizontal"===o.props.direction?"left":"top",u,e):l>r&&(a=a||o.isCursorBeyondElementThreshold(o.refs["wrap-"+s],"horizontal"===o.props.direction?"right":"bottom",u,e)),a)}),o.getAdjustedElementIndex(t)},o.moveItem=function(e){var t="previous"===e?-1:1,n=(0,a.default)(o.props.children).map(Number);n[o.state.activeIndex+t]=o.state.activeIndex,n[o.state.activeIndex]=o.state.activeIndex+t,o.props.onChange(n),o.setState({activeIndex:n[o.state.activeIndex]})},o.onMouseDown=function(e,t){o.setState({activeIndex:e,position:o.getPositionForCursorElement(t.currentTarget.firstChild,t)})},o.onMouseMove=function(e){var t,n;if(null!==o.state.activeIndex&&o.props.allowDrag&&!R.default.hasTouch()){if(t=o.state.activeOrder,n=o.getCursorElementIndex(e),n>=0)if(o.state.activeIndex===n)t=null;else{t=(0,a.default)(o.props.children).map(Number);for(var r=0,i=t.length;r<i;r++)r>=n&&r<o.state.activeIndex?t[r]=r+1:r<=n&&r>o.state.activeIndex&&(t[r]=r-1);t[o.state.activeIndex]=n}o.setState({position:o.getPositionForCursorElement(o.refs["wrap-"+o.state.activeIndex].firstChild,e),activeOrder:t})}},o.onMouseUp=function(){o.state.activeOrder&&o.props.onChange(o.state.activeOrder),o.setState({activeIndex:null,activeOrder:null,position:null})},o.onClick=function(e){o.setState({activeIndex:e})},o.getOrderedListItemElements=function(){return b.default.Children.map(o.props.children,function(e,t){var n,o=this.state.activeIndex===t,r=this.props.allowDrag&&!R.default.hasTouch(),s=r?["onMouseDown","onMouseUp"]:["onClick"],a={order:this.getAdjustedElementIndex(t)},l=(0,w.default)({"sortable-list__item":!0,"is-active":o,"is-draggable":r});return s=(0,j.fromPairs)(s.map(function(e){return[e,this[e].bind(null,t)]},this)),o&&(0,j.assign)(a,this.state.position),n=b.default.createElement("li",(0,i.default)({ref:"wrap-"+t,key:"wrap-"+t},s,{className:l,style:a}),e),o&&r?[b.default.createElement("li",{ref:"wrap-shadow-"+t,key:"wrap-shadow-"+t,className:"sortable-list__item is-shadow",style:a},e),n]:n},o)},o.getNavigationElement=function(){if(!o.props.allowDrag||R.default.hasTouch())return b.default.createElement("div",{className:"sortable-list__navigation"},b.default.createElement("button",{type:"button",onClick:o.moveItem.bind(null,"previous"),className:"sortable-list__navigation-button is-previous",disabled:null===o.state.activeIndex||0===o.state.activeIndex},b.default.createElement("span",{className:"screen-reader-text"},o.props.translate("Move previous")),b.default.createElement(P.default,{icon:"chevron-down",size:24})),b.default.createElement("button",{type:"button",onClick:o.moveItem.bind(null,"next"),className:"sortable-list__navigation-button is-next",disabled:null===o.state.activeIndex||o.state.activeIndex===o.props.children.length-1},b.default.createElement("span",{className:"screen-reader-text"},o.props.translate("Move next")),b.default.createElement(P.default,{icon:"chevron-up",size:24})))},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){N("Mounting "+this.constructor.displayName+" React component.")}},{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(){var e=(0,w.default)({"sortable-list":!0,"is-horizontal":"horizontal"===this.props.direction,"is-vertical":"vertical"===this.props.direction});return b.default.createElement("div",{className:e},b.default.createElement("ol",{ref:"list",className:"sortable-list__list"},this.getOrderedListItemElements()),this.getNavigationElement())}}]),t}(b.default.Component);M.propTypes={direction:x.default.oneOf(["horizontal","vertical"]),allowDrag:x.default.bool,onChange:x.default.func},M.defaultProps={direction:"horizontal",allowDrag:!0,
onChange:j.noop},t.default=(0,C.localize)(M),e.exports=t.default},"./client/components/gallery-shortcode/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./node_modules/debug/browser.js"),w=o(E),S=n("./node_modules/lodash/lodash.js"),k=n("./client/components/shortcode/index.jsx"),T=o(k),P=n("./client/lib/shortcode/index.js"),I=n("./client/lib/media/utils.js"),R=o(I),N=n("./client/lib/media/constants.js"),M=(0,w.default)("calypso:gallery-shortcode"),D=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.filterRenderResult=function(e){if(!e.body&&!e.scripts&&!e.styles)return e;var t=(0,S.assign)({},e,{scripts:{"tiled-gallery":{src:"https://s0.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.js"}},styles:{"tiled-gallery":{src:"https://s0.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.css"},"gallery-styles":{src:"https://widgets.wp.com/gallery-preview/style.css"}}});return"slideshow"===o.getAttributes().type&&(0,S.assign)(t,{scripts:{"jquery-cycle":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/js/jquery.cycle.min.js"},"jetpack-slideshow":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/js/slideshow-shortcode.js",extra:'var jetpackSlideshowSettings = { "spinner": "https://s0.wp.com/wp-content/mu-plugins/shortcodes/img/slideshow-loader.gif" };'}},styles:{"jetpack-slideshow":{src:"https://s0.wp.com/wp-content/mu-plugins/shortcodes/css/slideshow-shortcode.css"}}}),t},o.getAttributes=function(){var e=(0,S.pick)(o.props,"items","type","columns","orderBy","link","size");return o.props.children&&(0,S.assign)(e,(0,P.parse)(o.props.children).attrs.named),e},o.getShortcode=function(){return o.props.children?o.props.children:R.default.generateGalleryShortcode(o.getAttributes())},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.getShortcode();if(!e)return null;var t=(0,j.default)("gallery-shortcode",this.props.className);return M(e),x.default.createElement(T.default,(0,i.default)({},(0,S.omit)(this.props,(0,a.default)(this.constructor.propTypes)),{siteId:this.props.siteId,filterRenderResult:this.filterRenderResult,className:t}),e)}}]),t}(x.default.Component);D.propTypes={siteId:b.default.number.isRequired,children:b.default.string,items:b.default.array,type:b.default.string,columns:b.default.number,orderBy:b.default.string,link:b.default.string,size:b.default.string,className:b.default.string},D.defaultProps=N.GalleryDefaultAttrs,t.default=D,e.exports=t.default},"./client/components/header-cake/back.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./node_modules/lodash/lodash.js"),E=n("./client/components/button/index.jsx"),w=o(E),S=n("./client/lib/viewport/index.js"),k=o(S),T={windowWidth:480,characterLength:8},P=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={windowWidth:k.default.getWindowInnerWidth()},o.handleWindowResize=function(){o.setState({windowWidth:k.default.getWindowInnerWidth()})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.resizeThrottled=(0,j.throttle)(this.handleWindowResize,100),window.addEventListener("resize",this.resizeThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeThrottled)}},{key:"hideText",value:function(e){return this.state.windowWidth<=T.windowWidth&&e.length>=T.characterLength||this.state.windowWidth<=300}},{key:"render",value:function(){var e=this.props,t=e.href,n=e.icon,o=e.onClick,r=e.spacer,i=e.text,s=e.translate,a=void 0===i?s("Back"):i,l=(0,b.default)({"header-cake__back":!0,"is-spacer":r,"is-action":!!n});return h.default.createElement(w.default,{compact:!0,borderless:!0,className:l,href:t,onClick:o,disabled:r},h.default.createElement(C.default,{icon:n||"arrow-left",size:18}),!this.hideText(a)&&a)}}]),t}(m.Component);P.propTypes={onClick:v.default.func,href:v.default.string,text:v.default.string,spacer:v.default.bool},P.defaultProps={spacer:!1,disabled:!1},t.default=(0,_.localize)(P),e.exports=t.default},"./client/components/header-cake/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/components/card/index.jsx"),x=o(_),C=n("./client/components/header-cake/back.jsx"),j=o(C),E=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.backText,n=e.backHref,o=e.actionButton,r=e.actionText,i=e.actionIcon,s=e.actionHref,a=e.actionOnClick,l=(0,b.default)("header-cake",this.props.className,{"is-compact":this.props.isCompact});return v.default.createElement(x.default,{className:l},v.default.createElement(j.default,{text:t,href:n,onClick:this.props.onClick}),v.default.createElement("div",{className:"header-cake__title",onClick:this.props.onTitleClick},this.props.children),o||v.default.createElement(j.default,{text:r||t,href:s||n,onClick:a,icon:i,spacer:!a}))}}]),t}(g.Component);t.default=E,E.displayName="HeaderCake",E.propTypes={onClick:h.default.func,onTitleClick:h.default.func,backText:h.default.string,backHref:h.default.string,actionButton:h.default.element,actionText:h.default.string,actionHref:h.default.string,actionIcon:h.default.string,actionOnClick:h.default.func},E.defaultProps={isCompact:!1},e.exports=t.default},"./client/components/image-preloader/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j={PENDING:"PENDING",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"},E=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.state={status:j.PENDING},o.createLoader=function(e){var t=(e||o.props).src;o.destroyLoader(),o.setState({status:j.LOADING}),t&&(o.image=new Image,o.image.src=t,o.image.onload=o.onLoadComplete,o.image.onerror=o.onLoadComplete)},o.destroyLoader=function(){o.image&&(o.image.onload=C.noop,o.image.onerror=C.noop,delete o.image)},o.onLoadComplete=function(e){return o.destroyLoader(),"load"!==e.type?o.setState({status:j.FAILED},function(){o.props.onError&&o.props.onError(e)}):void o.setState({status:j.LOADED},function(){o.props.onLoad&&o.props.onLoad(e)})},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){this.createLoader()}},{key:"componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.createLoader(e)}},{key:"componentWillUnmount",value:function(){this.destroyLoader()}},{key:"render",value:function(){var e=void 0,t=void 0;switch(this.state.status){case j.LOADING:e=this.props.placeholder;break;case j.LOADED:t=(0,C.omit)(this.props,(0,a.default)(this.constructor.propTypes)),e=x.default.createElement("img",(0,i.default)({src:this.props.src},t));break;case j.FAILED:e=this.props.children}return x.default.createElement("div",{className:"image-preloader"},e)}}]),t}(x.default.Component);E.propTypes={src:b.default.string,placeholder:b.default.element.isRequired,onLoad:b.default.func,onError:b.default.func},t.default=E,e.exports=t.default},"./client/components/infinite-list/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/debug/browser.js"),a=o(s),l=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/page/index.js"),d=o(u),c=n("./node_modules/prop-types/index.js"),f=o(c),p=n("./node_modules/react/react.js"),m=o(p),h=n("./node_modules/create-react-class/index.js"),g=o(h),v=n("./node_modules/react-dom/index.js"),y=o(v),b=n("./client/lib/detect-history-navigation/index.js"),_=o(b),x=n("./client/lib/infinite-list/actions.js"),C=o(x),j=n("./client/lib/infinite-list/positions-store.js"),E=o(j),w=n("./client/lib/infinite-list/scroll-store.js"),S=o(w),k=n("./client/components/infinite-list/scroll-helper.js"),T=o(k),P=n("./client/lib/scroll-to/index.js"),I=o(P),R=n("./client/lib/react-smart-set-state/index.js"),N=o(R),M=(0,a.default)("calypso:infinite-list");t.default=(0,g.default)({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:!1,scrollHelper:null,isScrolling:!1,propTypes:{items:f.default.array.isRequired,fetchingNextPage:f.default.bool.isRequired,lastPage:f.default.bool.isRequired,guessedItemHeight:f.default.number.isRequired,itemsPerRow:f.default.number,fetchNextPage:f.default.func.isRequired,getItemRef:f.default.func.isRequired,renderItem:f.default.func.isRequired,renderLoadingPlaceholders:f.default.func.isRequired,renderTrailingItems:f.default.func,context:f.default.oneOfType([f.default.object,f.default.bool])},getDefaultProps:function(){return{itemsPerRow:1,renderTrailingItems:function(){}}},smartSetState:N.default,componentWillMount:function(){var e=d.default.current,t=void 0,n=void 0;_.default.loadedViaHistory()&&(t=E.default.get(e),n=S.default.get(e)),t&&n&&(M("overriding scrollTop:",n),t.scrollTop=n),this.scrollHelper=new T.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,t?M("infinite-list positions loaded from store"):(M("infinite-list positions reset for new list"),t={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}),M("infinite list mounting",t),this.setState(t)},componentDidMount:function(){this._contextLoaded()&&this._setContainerY(this.state.scrollTop),_.default.loadedViaHistory()&&this._overrideHistoryScroll(),M("setting scrollTop:",this.state.scrollTop),this.updateScroll({triggeredByScroll:!1}),this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function(e){this.scrollHelper.props=e,this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})),e.context!==this.props.context&&this._contextLoaded()&&this._scrollContainer.removeEventListener("scroll",this._resetScroll)},componentDidUpdate:function(e){this._contextLoaded()&&(this.props.context!==e.context&&(this._scrollContainer&&this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer=this.props.context||window,this._scrollContainer.addEventListener("scroll",this.onScroll),_.default.loadedViaHistory()&&this._overrideHistoryScroll()),this.isScrolling||(this.cancelAnimationFrame(),this.updateScroll({triggeredByScroll:!1})))},reset:function(){this.cancelAnimationFrame(),this.scrollHelper=new T.default(this.boundsForRef),this.scrollHelper.props=this.props,this._contextLoaded()&&(this._scrollContainer=this.props.context||window,this.scrollHelper.updateContextHeight(this.getCurrentContextHeight())),this.isScrolling=!1,this.setState({firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0})},componentWillUnmount:function(){this._scrollContainer.removeEventListener("scroll",this.onScroll),this._scrollContainer.removeEventListener("scroll",this._resetScroll),this.cancelAnimationFrame()},cancelAnimationFrame:function(){this.scrollRAFHandle&&(window.cancelAnimationFrame(this.scrollRAFHandle),this.scrollRAFHandle=null),this.lastScrollTop=-1},onScroll:function(){this.isScrolling||this.scrollRAFHandle||this.getCurrentScrollTop()===this.lastScrollTop||(this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},getCurrentContextHeight:function(){var e=this.props.context||window.document.documentElement;return e.clientHeight},getCurrentScrollTop:function(){return this.props.context?(M("getting scrollTop from context"),this.props.context.scrollTop):window.pageYOffset},scrollChecks:function(){return this.isMounted()&&this.getCurrentScrollTop()!==this.lastScrollTop?void this.updateScroll({triggeredByScroll:!0}):void(this.scrollRAFHandle=null)},scrollToTop:function(){var e=this;this.cancelAnimationFrame(),this.isScrolling=!0,this.props.context&&this.props.context!==window?(this.props.context.scrollTop=0,this.updateScroll({triggeredByScroll:!1}),this.isScrolling=!1):(0,I.default)({x:0,y:0,duration:250,onComplete:function(){e.isMounted()&&e.updateScroll({triggeredByScroll:!1}),e.isScrolling=!1}})},updateScroll:function(e){var t=d.default.current,n=void 0;this._contextLoaded()&&(this.lastScrollTop=this.getCurrentScrollTop(),C.default.storeScroll(t,this.lastScrollTop),this.scrollHelper.updateContextHeight(this.getCurrentContextHeight()),this.scrollHelper.scrollPosition=this.lastScrollTop,this.scrollHelper.triggeredByScroll=e.triggeredByScroll,this.scrollHelper.updatePlaceholderDimensions(),this.scrollHelper.scrollChecks(this.state),this.scrollHelper.stateUpdated&&(n={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop},this.lastScrollTop=-1,M("new scroll positions",n,this.state),this.smartSetState(n),C.default.storePositions(t,n)),this.scrollRAFHandle=window.requestAnimationFrame(this.scrollChecks))},boundsForRef:function(e){return e in this.refs?y.default.findDOMNode(this.refs[e]).getBoundingClientRect():null},getVisibleItemIndexes:function(e){var t=y.default.findDOMNode(this),n=[],o=this.state.firstRenderedIndex,r=this.state.lastRenderedIndex,i=e&&e.offsetTop?e.offsetTop:0,s=void 0,a=void 0,l=void 0,u=void 0,d=e&&e.offsetBottom?e.offsetBottom:0;if(d=d||0,r>-1)for(l=t.children,u=1;u<l.length-1;u++)a=t.children[u].getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,(a.top<0&&Math.abs(a.top)<a.height-i||a.top>0&&a.top<s-d)&&n.push({index:o+u-1,bounds:a});return n},render:function(){var e=(0,l.omit)(this.props,(0,i.default)(this.constructor.propTypes)),t="infinite-list__spacer",n=void 0,o=this.state.lastRenderedIndex,r=[];for((o===-1||o>this.props.items.length-1)&&(M("resetting lastRenderedIndex, currently at %s, %d items",o,this.props.items.length),o=Math.min(this.state.firstRenderedIndex+this.scrollHelper.initialLastRenderedIndex(),this.props.items.length-1),M("reset lastRenderedIndex to %s",o)),M("rendering %d to %d",this.state.firstRenderedIndex,o),n=this.state.firstRenderedIndex;n<=o;n++)r.push(this.props.renderItem(this.props.items[n],n));return this.props.fetchingNextPage&&(r=r.concat(this.props.renderLoadingPlaceholders())),m.default.createElement("div",e,m.default.createElement("div",{ref:"topPlaceholder",className:t,style:{height:this.state.topPlaceholderHeight}}),r,this.props.renderTrailingItems(),m.default.createElement("div",{ref:"bottomPlaceholder",className:t,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function(e){return this.props.context&&this.props.context!==window?void(this.props.context.scrollTop=e):void window.scrollTo(0,e)},_overrideHistoryScroll:function(){this._contextLoaded()&&this._scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function(e){var t=this.state.scrollTop;this._contextLoaded()&&(M("history setting scroll position:",e),this._setContainerY(t),this._scrollContainer.removeEventListener("scroll",this._resetScroll),M("override scroll position from HTML5 history popstate:",t))},_contextLoaded:function(){return this.props.context||this.props.context===!1||!("context"in this.props)}}),e.exports=t.default},"./client/components/infinite-list/scroll-helper.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/createClass.js"),a=o(s),l=n("./node_modules/debug/browser.js"),u=o(l),d=(0,u.default)("calypso:infinite-list:helper"),c=function(){function e(t){(0,i.default)(this,e),this.boundsForRef=t,this.itemHeights={},this.contextHeight=null,this.topHideLevelHard=null,this.topHideLevelSoft=null,this.bottomHideLevelHard=null,this.bottomHideLevelSoft=null,this.bottomHideLevelUltraSoft=null,this.props=null,this.scrollPosition=null,this.containerTop=null,this.topPlaceholderHeight=null,this.bottomPlaceholderHeight=null,this.containerBottom=null,this.stateUpdated=null,this.firstRenderedIndex=null,this.lastRenderedIndex=null}return(0,a.default)(e,[{key:"storedItemHeight",value:function(e){var t=this.props.guessedItemHeight;return e in this.itemHeights&&(t=this.itemHeights[e]),t}},{key:"forEachInRow",value:function(e,t,n){if("function"==typeof t){n&&(t=t.bind(n));for(var o=e-e%this.props.itemsPerRow,r=Math.min(o+this.props.itemsPerRow,this.props.items.length)-1,i=o;i<=r;i++)t(this.props.items[i],i)}}},{key:"storeRowItemHeights",value:function(e,t){this.forEachInRow(t,function(t){var n=this.props.getItemRef(t),o=this.boundsForRef(n),r=void 0;r=o?"bottom"===e?this.containerBottom-this.bottomPlaceholderHeight-o.top:o.bottom-(this.containerTop+this.topPlaceholderHeight):this.props.guessedItemHeight,this.itemHeights[n]=r},this)}},{key:"deleteRowItemHeights",value:function(e){var t=this;this.forEachInRow(e,function(e){var n=t.props.getItemRef(e);delete t.itemHeights[n]},this)}},{key:"getRowHeight",value:function(e){var t=this,n=0;return this.forEachInRow(e,function(e){var o=t.props.getItemRef(e),r=t.storedItemHeight(o);n=Math.max(n,r)},this),n}},{key:"updateContextHeight",value:function(e){this.contextHeight!==e&&(this.contextHeight=e,this.topHideLevelHard=Math.min(-1*e,-5*this.props.guessedItemHeight),this.topHideLevelSoft=Math.min(-2*e,-10*this.props.guessedItemHeight),this.bottomHideLevelHard=e+Math.max(e,5*this.props.guessedItemHeight),this.bottomHideLevelSoft=e+Math.max(2*e,10*this.props.guessedItemHeight),this.bottomHideLevelUltraSoft=e+Math.max(3*e,15*this.props.guessedItemHeight))}},{key:"initialLastRenderedIndex",value:function(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)}},{key:"updatePlaceholderDimensions",value:function(){var e=this.boundsForRef("topPlaceholder"),t=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=e.height,this.containerTop=e.top,this.bottomPlaceholderHeight=t.height,this.containerBottom=t.bottom}},{key:"scrollChecks",value:function(e){this.reset(e),this.adjustLastRenderedIndex(),this.shouldHideItemsAbove()?this.hideItemsAbove():this.shouldShowItemsAbove()&&this.showItemsAbove(),this.shouldHideItemsBelow()?this.hideItemsBelow():this.shouldShowItemsBelow()&&this.showItemsBelow(),this.shouldLoadNextPage()&&this.loadNextPage()}},{key:"reset",value:function(e){this.stateUpdated=!1,this.firstRenderedIndex=e.firstRenderedIndex,this.lastRenderedIndex=e.lastRenderedIndex}},{key:"adjustLastRenderedIndex",value:function(){var e=this.initialLastRenderedIndex(),t=this.lastRenderedIndex||0,n=this.firstRenderedIndex||0,o=this.props.items.length,r=t;0===o&&(r=-1),t>=o&&(r=Math.min(n+e,o-1)),r===-1&&o>0&&0===n&&(r=e),r!==this.lastRenderedIndex&&(this.stateUpdated=!0,this.lastRenderedIndex=r)}},{key:"shouldHideItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft}},{key:"hideItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex<this.props.items.length;){if(this.storeRowItemHeights("top",this.firstRenderedIndex),e=this.getRowHeight(this.firstRenderedIndex),t=this.containerTop+this.topPlaceholderHeight+e,t>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=e,this.firstRenderedIndex+=this.props.itemsPerRow,this.stateUpdated=!0,d("hiding top item",e,this.topPlaceholderHeight)}}},{key:"shouldShowItemsAbove",value:function(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard}},{key:"showItemsAbove",value:function(){for(var e=void 0,t=void 0;this.firstRenderedIndex>0&&(e=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow),t=this.containerTop+this.topPlaceholderHeight-e,!(t<this.topHideLevelSoft));)this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow),this.firstRenderedIndex-=this.props.itemsPerRow,this.firstRenderedIndex=Math.max(0,this.firstRenderedIndex),this.firstRenderedIndex<=0?this.topPlaceholderHeight=0:this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-e),this.stateUpdated=!0,d("showing top item",e,this.topPlaceholderHeight)}},{key:"shouldHideItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e>this.bottomHideLevelUltraSoft}},{key:"hideItemsBelow",value:function(){for(var e=void 0,t=void 0;this.lastRenderedIndex>=0;){if(this.storeRowItemHeights("bottom",this.lastRenderedIndex),t=this.getRowHeight(this.lastRenderedIndex),e=this.containerBottom-this.bottomPlaceholderHeight-t,e<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=t,this.lastRenderedIndex-=this.props.itemsPerRow,this.stateUpdated=!0,d("hiding bottom item",t,this.bottomPlaceholderHeight)}}},{key:"shouldShowItemsBelow",value:function(){var e=this.containerBottom-this.bottomPlaceholderHeight;return e<this.bottomHideLevelHard}},{key:"showItemsBelow",value:function(){for(var e=void 0,t=void 0,n=void 0;this.lastRenderedIndex<this.props.items.length-1&&(e=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow),n=this.containerBottom-this.bottomPlaceholderHeight,t=n+e,!(t>this.bottomHideLevelSoft&&n>this.bottomHideLevelHard));)this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow),this.bottomPlaceholderHeight-e<0?(this.containerBottom+=e-this.bottomPlaceholderHeight,this.bottomPlaceholderHeight=0):this.bottomPlaceholderHeight-=e,this.lastRenderedIndex+=this.props.itemsPerRow,this.lastRenderedIndex=Math.min(this.lastRenderedIndex,this.props.items.length-1),this.lastRenderedIndex>=this.props.items.length-1&&(this.bottomPlaceholderHeight=0),this.stateUpdated=!0,d("showing bottom item",e,this.bottomPlaceholderHeight)}},{key:"shouldLoadNextPage",value:function(){return!this.props.fetchingNextPage&&!this.props.lastPage&&(0===this.bottomPlaceholderHeight&&this.containerBottom<this.bottomHideLevelHard)}},{key:"loadNextPage",value:function(){var e=this,t=this.triggeredByScroll;d("fetching next page",this.containerBottom,this.bottomPlaceholderHeight),this.scrollPosition>this.contextHeight&&(t=!0),setTimeout(function(){return!e.props.fetchingNextPage&&!e.props.lastPage&&void e.props.fetchNextPage({triggeredByScroll:t})},0)}}]),e}();t.default=c,e.exports=t.default},"./client/components/info-popover/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/gridicons/build/index.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./client/components/popover/index.jsx"),j=o(C),E=n("./client/lib/analytics/index.js"),w=o(E),S=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={showPopover:!1},o.handleClick=function(e){e.preventDefault(),o.setState({showPopover:!o.state.showPopover},o.recordStats)},o.handleClose=function(){return o.setState({showPopover:!1},o.recordStats)},o.recordStats=function(){var e=o.props,t=e.gaEventCategory,n=e.popoverName;if(t&&n){var r=o.state.showPopover?" Opened":" Closed";w.default.ga.recordEvent(t,"InfoPopover: "+n+r)}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:(0,x.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},h.default.createElement(b.default,{icon:this.props.icon,size:this.props.iconSize}),h.default.createElement(j.default,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,x.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}]),t}(m.Component);S.propTypes={autoRtl:v.default.bool,className:v.default.string,gaEventCategory:v.default.string,icon:v.default.string,iconSize:v.default.number,id:v.default.string,ignoreContext:v.default.shape({getDOMNode:v.default.func}),popoverName:v.default.string,position:v.default.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:v.default.string},S.defaultProps={autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom"},t.default=S,e.exports=t.default},"./client/components/input-chrono/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/chrono-node/src/chrono.js"),_=o(b),x=["en","jp"],C=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={value:o.props.value},o.focused=!1,o.handleChange=function(e){o.setState({value:e.target.value})},o.handleBlur=function(e){o.setDateText(e),o.focused=!1},o.handleFocus=function(){o.focused=!0},o.onKeyDown=function(e){13===e.keyCode&&o.setDateText(e)},o.setDateText=function(e){var t=_.default.parseDate(e.target.value);t&&(o.setState({value:o.props.moment(t).calendar()}),o.props.onSet(o.props.moment(t)))},o.isLangSupported=function(e){return x.indexOf(e)>=0},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.focused||this.props.value===e.value||this.setState({value:e.value})}},{key:"render",value:function(){return y.default.createElement("div",{className:"input-chrono__container"},this.isLangSupported(this.props.lang)?y.default.createElement("input",{className:"input-chrono",value:this.state.value,placeholder:this.props.placeholder,onKeyDown:this.onKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur}):y.default.createElement("div",{className:"text-chrono"},this.state.value))}}]),t}(y.default.Component);C.displayName="InputChrono",C.propTypes={value:h.default.string,lang:h.default.string,onSet:h.default.func,placeholder:h.default.string},C.defaultProps={value:"",lang:"",placeholder:"",onSet:function(){}},t.default=(0,g.localize)(C),e.exports=t.default},"./client/components/post-schedule/clock.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/components/segmented-control/item.jsx"),C=o(x),j=n("./client/components/info-popover/index.jsx"),E=o(j),w=n("./client/state/selectors/get-site-setting.js"),S=o(w),k=n("./client/components/segmented-control/index.jsx"),T=o(k),P=n("./client/lib/viewport/index.js"),I=o(P),R=n("./client/components/post-schedule/utils.js"),N=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,
i.default)(t)).apply(this,arguments));return e.setTime=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getTimeValues(),o=(0,b.moment)(e.props.date).set(n);e.props.onChange(o,n)},e.adjustHour=function(t){return e.handleKeyDown(t,"hour")},e.adjustMinute=function(t){return e.handleKeyDown(t,"minute")},e.setAm=function(t){return e.setAmPm(t,"AM")},e.setPm=function(t){return e.setAmPm(t,"PM")},e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"handleKeyDown",value:function(e,t){var n=e.keyCode-39,o=this.getTimeValues();if(-1!==n&&1!==n)return null;var r=Number(e.target.value);"hour"===t?(this.props.is12hour&&this.refs.amPmReference&&(r=this.convertTo24Hour(r)),r-=n,r=r>23?0:r,r=r<0?23:r):(r-=n,r=r>59?0:r,r=r<0?59:r),o[t]=r,this.setTime(e,o)}},{key:"getTimeValues",value:function(){var e=this.refs,t=e.amPmReference,n=e.hourReference,o=e.minuteRef,r={},i=(0,R.parseAndValidateNumber)(n.value),s=(0,R.parseAndValidateNumber)(o.value);return!1!==i&&i<24&&(r.hour=Number(i)),this.props.is12hour&&t&&("undefined"!=typeof r.hour&&"PM"!==(t.value&&r.hour>12)||(r.hour=Number(n.value.substr(-1))),r.hour=this.convertTo24Hour(r.hour)),!1!==s&&(s>60&&(s=o.value.substr(-1)),r.minute=Number(s)),r}},{key:"setAmPm",value:function(e,t){this.refs.amPmReference.value=t,this.setTime(e)}},{key:"convertTo24Hour",value:function(e){return"PM"===this.refs.amPmReference.value&&e<12?e+=12:"AM"===this.refs.amPmReference.value&&12===e&&(e=0),e}},{key:"renderTimezoneSection",value:function(){var e=this.props,t=e.date,n=e.gmtOffset,o=e.siteId,r=e.siteSlug,i=e.timezone,s=e.translate;if(i||(0,R.isValidGMTOffset)(n)){var a=void 0,l=void 0;if(i){var u=t.clone().tz(i);l=u.format("Z"),a=u.utcOffset()-(0,b.moment)(t).utcOffset()}else if((0,R.isValidGMTOffset)(n)){var d=t.clone().utcOffset(n);a=d.utcOffset()-(0,b.moment)().utcOffset()}if(a){var c=I.default.isMobile()?"top":"right",f=i?i.replace(/\_/gi," ")+" "+l:"UTC"+(0,R.convertHoursToHHMM)(n),p=s("This site timezone (%(timezoneText)s) will be used for publishing. You can change it in {{a}}General Settings{{/a}}.",{args:{timezoneText:f},components:{a:v.default.createElement("a",{href:"/settings/general/"+(r||o)})}});return v.default.createElement("span",null,v.default.createElement("div",{className:"post-schedule__clock-timezone"},s("This site timezone is %(diff)sh from your local timezone.",{args:{diff:(0,R.convertMinutesToHHMM)(a)}}),v.default.createElement(E.default,{className:"post-schedule__timezone-info",position:c},p)))}}}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.is12hour,o=e.translate;return v.default.createElement("div",{className:"post-schedule__clock"},v.default.createElement("input",{className:"post-schedule__clock-time",name:"post-schedule__clock_hour",ref:"hourReference",value:t.format(n?"hh":"HH"),onChange:this.setTime,onKeyDown:this.adjustHour,type:"text"}),v.default.createElement("span",{className:"post-schedule__clock-divisor"},":"),v.default.createElement("input",{className:"post-schedule__clock-time",name:"post-schedule__clock_minute",ref:"minuteRef",value:t.format("mm"),onChange:this.setTime,onKeyDown:this.adjustMinute,type:"text"}),n&&v.default.createElement("span",null,v.default.createElement("input",{type:"hidden",ref:"amPmReference",name:"post-schedule__clock_am-pm",value:t.format("A")}),v.default.createElement(T.default,{compact:!0},v.default.createElement(C.default,{value:"am",onClick:this.setAm,selected:"AM"===t.format("A")},o("AM")),v.default.createElement(C.default,{value:"pm",onClick:this.setPm,selected:"PM"===t.format("A")},o("PM")))),this.renderTimezoneSection())}}]),t}(g.Component);N.propTypes={date:h.default.object.isRequired,timezone:h.default.string,gmtOffset:h.default.number,siteId:h.default.number,siteSlug:h.default.string,onChange:h.default.func},N.defaultProps={onChange:_.noop},t.default=(0,y.connect)(function(e,t){var n=t.siteId;return{is12hour:(0,R.is12hr)((0,S.default)(e,n,"time_format"))}})((0,b.localize)(N)),e.exports=t.default},"./client/components/post-schedule/header-controls.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/gridicons/build/index.js"),b=o(y),_=function(){},x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this;return v.default.createElement("div",{className:"post-schedule__year-controls"},v.default.createElement("button",{className:"post-schedule__year-control-up",onClick:function(){e.props.onYearChange(1)}},v.default.createElement(b.default,{icon:"chevron-up",size:14})),v.default.createElement("button",{className:"post-schedule__year-control-down",onClick:function(){e.props.onYearChange(-1)}},v.default.createElement(b.default,{icon:"chevron-down",size:14})))}}]),t}(v.default.Component);x.displayName="PostScheduleHeaderControls",x.propTypes={onYearChange:h.default.func},x.defaultProps={onYearChange:_},t.default=x,e.exports=t.default},"./client/components/post-schedule/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/components/post-schedule/header-controls.jsx"),_=o(b),x=n("./node_modules/classnames/index.js"),C=o(x),j=function(){},E=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={showYearControls:!1},o.setToCurrentMonth=function(){var e=o.props.moment().month();o.props.onDateChange(o.props.date.month(e))},o.setToCurrentYear=function(){var e=o.props.moment().year();o.props.onDateChange(o.props.date.year(e))},o.setYear=function(e){var t=o.props.moment(o.props.date);return t.year(t.year()+e),0>t.year()||t.year()>9999?null:void o.props.onDateChange(t)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=(0,C.default)("post-schedule__header",{"is-input-chrono-displayed":this.props.inputChronoDisplayed});return y.default.createElement("div",{className:t},y.default.createElement("span",{className:"post-schedule__header-month",onClick:this.setToCurrentMonth},this.props.date.format("MMMM")),y.default.createElement("div",{className:"post-schedule__header-year",onMouseEnter:function(){e.setState({showYearControls:!0})},onMouseLeave:function(){e.setState({showYearControls:!1})}},y.default.createElement("span",{onClick:this.setToCurrentYear},this.props.date.format("YYYY")),this.state.showYearControls&&y.default.createElement(_.default,{onYearChange:this.setYear})))}}]),t}(y.default.Component);E.displayName="PostScheduleHeader",E.propTypes={date:h.default.object,inputChronoDisplayed:h.default.bool,onDateChange:h.default.func},E.defaultProps={inputChronoDisplayed:!0,onDateChange:j},t.default=(0,g.localize)(E),e.exports=t.default},"./client/components/post-schedule/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./client/components/input-chrono/index.jsx"),C=o(x),j=n("./client/components/date-picker/index.jsx"),E=o(j),w=n("./client/components/data/query-site-settings/index.js"),S=o(w),k=n("./client/lib/user/index.js"),T=o(k),P=n("./client/components/date-picker/events-tooltip.jsx"),I=o(P),R=n("./client/components/post-schedule/clock.jsx"),N=o(R),M=n("./client/components/post-schedule/header.jsx"),D=o(M),O=n("./client/components/post-schedule/utils.js"),A=o(O),L=new T.default,B=function(){},F=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={calendarViewDate:(0,y.moment)(o.props.selectedDay?o.props.selectedDay:new Date),tooltipContext:null,showTooltip:!1},o.setCurrentMonth=function(e){e=(0,y.moment)(e),o.props.onMonthChange(e),o.setState({calendarViewDate:e})},o.setViewDate=function(e){o.setState({calendarViewDate:(0,y.moment)(e)})},o.updateDate=function(e){var t=A.default.convertDateToGivenOffset(e,o.props.timezone,o.props.gmtOffset);o.setState({calendarViewDate:e,isFutureDate:t.isAfter()}),o.props.onDateChange(t)},o.handleOnDayMouseEnter=function(e,t,n,r){var i=o.getEventsFromPosts(o.props.posts);return i&&i.length?void o.setState({eventsByDay:r,tooltipContext:n.target,showTooltip:!0}):o.props.onDayMouseEnter(e,t,n,r)},o.handleOnDayMouseLeave=function(e,t,n,r){var i=o.getEventsFromPosts(o.props.posts);return i&&i.length?void o.setState({eventsByDay:[],tooltipContext:null,showTooltip:!1}):o.props.onDayMouseLeave(e,t,n,r)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){if(!this.props.selectedDay)return this.setState({localizedDate:null,isFutureDate:!1});var e=this.getDateToUserLocation(this.props.selectedDay);this.setState({localizedDate:e,isFutureDate:e.isAfter()})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.selectedDay!==e.selectedDay)return e.selectedDay?void this.setState({localizedDate:this.getDateToUserLocation(e.selectedDay)}):this.setState({localizedDate:null})}},{key:"locale",value:function(){return{formatMonthTitle:function(){}}}},{key:"events",value:function(){return this.props.events.concat(this.getEventsFromPosts(this.props.posts))}},{key:"getEventsFromPosts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(function(t){var n=e.getDateToUserLocation(t.date);return{id:t.ID,title:t.title,date:n.toDate()}})}},{key:"getDateToUserLocation",value:function(e){return A.default.convertDateToUserLocation(e||new Date,this.props.timezone,this.props.gmtOffset)}},{key:"getCurrentDate",value:function(){return(0,y.moment)(this.state.localizedDate||this.getDateToUserLocation())}},{key:"renderInputChrono",value:function(){var e=L.getLanguage(),t=this.getCurrentDate(),n=void 0;if(this.state.localizedDate){var o=(0,y.moment)().startOf("day"),r=(0,y.moment)(t).startOf("day"),i=r.diff(o,"days");n=-7<=i&&i<=6?t.calendar():t.format("L LT")}return v.default.createElement("div",{className:"post-schedule__input-chrono"},v.default.createElement(C.default,{value:n,placeholder:t.calendar(),lang:e?e.langSlug:null,onSet:this.updateDate}),v.default.createElement("hr",{className:"post-schedule__hr"}))}},{key:"renderClock",value:function(){var e=this.state.localizedDate;return e||(e=this.getDateToUserLocation(new Date)),v.default.createElement(N.default,{date:e,timezone:this.props.timezone,gmtOffset:this.props.gmtOffset,siteId:this.props.site?this.props.site.ID:null,siteSlug:this.props.site?this.props.site.slug:null,onChange:this.updateDate})}},{key:"render",value:function(){var e=!this.props.events||!this.props.events.length,t=(0,_.default)("post-schedule",{"is-future-date":this.state.isFutureDate});return v.default.createElement("div",{className:t},this.props.site&&v.default.createElement(S.default,{siteId:this.props.site.ID}),v.default.createElement(D.default,{date:this.state.calendarViewDate,onDateChange:this.setViewDate,inputChronoDisplayed:this.props.displayInputChrono}),this.props.displayInputChrono&&this.renderInputChrono(),v.default.createElement(E.default,{events:this.events(),locale:this.locale(),disabledDays:this.props.disabledDays,enableOutsideDays:this.props.enableOutsideDays,modifiers:this.props.modifiers,selectedDay:this.state.localizedDate?this.state.localizedDate.toDate():null,timeReference:this.getCurrentDate(),calendarViewDate:this.state.calendarViewDate.toDate(),onMonthChange:this.setCurrentMonth,onSelectDay:this.updateDate,onDayMouseEnter:this.handleOnDayMouseEnter,onDayMouseLeave:this.handleOnDayMouseLeave}),this.renderClock(),e&&v.default.createElement(I.default,{events:this.state.eventsByDay,context:this.state.tooltipContext,isVisible:this.state.showTooltip}))}}]),t}(g.Component);F.propTypes={events:h.default.array,posts:h.default.array,timezone:h.default.string,gmtOffset:h.default.number,site:h.default.object,displayInputChrono:h.default.bool,onDateChange:h.default.func,onMonthChange:h.default.func,onDayMouseEnter:h.default.func,onDayMouseLeave:h.default.func},F.defaultProps={posts:[],events:[],displayInputChrono:!0,onDateChange:B,onMonthChange:B,onDayMouseEnter:B,onDayMouseLeave:B},t.default=F,e.exports=t.default},"./client/components/post-schedule/utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/math/trunc.js"),i=o(r),s=n("./node_modules/i18n-calypso/index.js"),a=function(e){return e&&/[gh]|[aA]$/.test(e)},l=function(e){return"number"==typeof e},u=function(e,t,n){return e=(0,s.moment)(e),t?e.tz(t):l(n)&&e.utcOffset(n),e},d=function(e){return(0,s.moment)(e.format?e.format():e)},c=function(e,t,n){var o=d(e),r=u(e,t,n);return o.utcOffset()-r.utcOffset()},f=function(e,t,n){return t||l(n)?d(e).subtract(c(e,t,n),"minute"):(0,s.moment)(e)},p=function(e,t,n){return e=u(e,t,n).add(c(e,t,n),"minute"),!t&&l(n)&&e.utcOffset(n),e},m=function(e){var t=(0,i.default)(e/60),n=e>0?"+":"";if(!(e/60%1))return n+String(t);e=Math.abs(e%60);var o=e<10?"0"+e:e;return""+n+t+":"+o},h=function(e){return m(60*e)},g=function(e){return e=String(e),"0"!==e&&"00"!==e&&("0"===e[0]||Number(e)>99)&&(e=Number(e.substr(1))),!(isNaN(Number(e))||Number(e)<0||e.length>2)&&Number(e)};t.default={convertDateToGivenOffset:p,convertDateToUserLocation:f,convertHoursToHHMM:h,convertMinutesToHHMM:m,getDateInLocalUTC:d,getLocalizedDate:u,getTimeOffset:c,is12hr:a,isValidGMTOffset:l,parseAndValidateNumber:g},e.exports=t.default},"./client/components/progress-bar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/components/screen-reader-text/index.js"),x=o(_),C=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={allTimeMax:o.props.value},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getCompletionPercentage",value:function(){var e=Math.ceil(this.state.allTimeMax/this.props.total*100);return Math.min(e,100)}},{key:"renderBar",value:function(){var e=this.props.title?v.default.createElement(x.default,null,this.props.title):null,t={width:this.getCompletionPercentage()+"%"};return this.props.color&&(t.backgroundColor=this.props.color),v.default.createElement("div",{className:"progress-bar__progress",style:t},e)}},{key:"componentWillReceiveProps",value:function(e){this.setState({allTimeMax:Math.max(this.state.allTimeMax,e.value)})}},{key:"render",value:function(){var e=(0,b.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return v.default.createElement("div",{className:e},this.renderBar())}}]),t}(g.PureComponent);C.defaultProps={total:100,compact:!1,isPulsing:!1},C.propTypes={value:h.default.number.isRequired,total:h.default.number,color:h.default.string,title:h.default.string,compact:h.default.bool,className:h.default.string,isPulsing:h.default.bool},t.default=C,e.exports=t.default},"./client/components/redux-forms/redux-form-fieldset/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldsetRenderer=void 0;var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),a=o(s),l=n("./node_modules/prop-types/index.js"),u=o(l),d=n("./node_modules/react/react.js"),c=o(d),f=n("./node_modules/redux-form/es/index.js"),p=n("./client/components/forms/form-fieldset/index.jsx"),m=o(p),h=n("./client/components/forms/form-label/index.jsx"),g=o(h),v=n("./client/components/forms/form-input-validation/index.jsx"),y=o(v),b=n("./client/components/forms/form-setting-explanation/index.jsx"),_=o(b),x=function(e){var t=e.inputComponent,n=e.input,o=e.meta,r=e.label,s=e.explanation,l=(0,a.default)(e,["inputComponent","input","meta","label","explanation"]),u=!(!o.touched||!o.error);return c.default.createElement(m.default,null,r&&c.default.createElement(g.default,{htmlFor:n.name},r),c.default.createElement(t,(0,i.default)({id:n.name,isError:u},n,l)),u&&c.default.createElement(y.default,{isError:!0,text:o.error}),s&&c.default.createElement(_.default,null,s))};t.FieldsetRenderer=x;var C=function(e){var t=e.component,n=(0,a.default)(e,["component"]);return c.default.createElement(f.Field,(0,i.default)({component:x,inputComponent:t},n))};C.propTypes={name:u.default.string.isRequired,component:u.default.func.isRequired,label:u.default.node,explanation:u.default.node},t.default=C},"./client/components/remove-button/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveButton=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/gridicons/build/index.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/components/button/index.jsx"),C=o(x),j=t.RemoveButton=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onRemove,n=e.translate;return b.default.createElement(C.default,{onClick:t,compact:!0,className:"remove-button"},b.default.createElement("span",{className:"remove-button__label screen-reader-text"},n("Remove")),b.default.createElement(h.default,{icon:"cross",size:24,className:"remove-button__icon"}))}}]),t}(b.default.Component);j.propTypes={onRemove:v.default.func.isRequired,translate:v.default.func.isRequired},t.default=(0,_.localize)(j)},"./client/components/resizable-iframe/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react-dom/index.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/debug/browser.js"),j=o(C),E=n("./node_modules/lodash/lodash.js"),w=(0,j.default)("calypso:resizable-iframe"),S=function(){},k=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.state={width:0,height:0},o.getFrameBody=function(){return v.default.findDOMNode(o.refs.iframe).contentDocument.body},o.maybeConnect=function(){if(o.isFrameAccessible()){var e=o.getFrameBody();if(null===e.getAttribute("data-resizable-iframe-connected")){var t=document.createElement("script");t.innerHTML="\n\t\t\t( function() {\n\t\t\t\tvar observer;\n\n\t\t\t\tif ( ! window.MutationObserver || ! document.body || ! window.top ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction sendResize() {\n\t\t\t\t\twindow.top.postMessage( {\n\t\t\t\t\t\taction: 'resize',\n\t\t\t\t\t\twidth: document.body.offsetWidth,\n\t\t\t\t\t\theight: document.body.offsetHeight\n\t\t\t\t\t}, '*' );\n\t\t\t\t}\n\n\t\t\t\tobserver = new MutationObserver( sendResize );\n\t\t\t\tobserver.observe( document.body, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeOldValue: false,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tcharacterDataOldValue: false,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true\n\t\t\t\t} );\n\n\t\t\t\twindow.addEventListener( 'load', sendResize, true );\n\n\t\t\t\t// Hack: Remove viewport unit styles, as these are relative\n\t\t\t\t// the iframe root and interfere with our mechanism for\n\t\t\t\t// determining the unconstrained page bounds.\n\t\t\t\tfunction removeViewportStyles( ruleOrNode ) {\n\t\t\t\t\t[ 'width', 'height', 'minHeight', 'maxHeight' ].forEach( function( style ) {\n\t\t\t\t\t\tif ( /^\\d+(vmin|vmax|vh|vw)$/.test( ruleOrNode.style[ style ] ) ) {\n\t\t\t\t\t\t\truleOrNode.style[ style ] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tArray.prototype.forEach.call( document.querySelectorAll( '[style]' ), removeViewportStyles );\n\t\t\t\tArray.prototype.forEach.call( document.styleSheets, function( stylesheet ) {\n\t\t\t\t\tArray.prototype.forEach.call( stylesheet.cssRules || stylesheet.rules, removeViewportStyles );\n\t\t\t\t} );\n\n\t\t\t\tdocument.body.style.position = 'absolute';\n\t\t\t\tdocument.body.setAttribute( 'data-resizable-iframe-connected', '' );\n\n\t\t\t\tsendResize();\n\t\t\t} )();\n\t\t",e.appendChild(t)}}},o.isFrameAccessible=function(){try{return!!o.getFrameBody()}catch(e){return!1}},o.checkMessageForResize=function(e){var t=v.default.findDOMNode(o.refs.iframe),n=e.data||{};if("string"==typeof n)try{n=JSON.parse(n)}catch(e){}if(t&&t.contentWindow===e.source){w("Received message: %o",n);var r=n,i=r.action,s=r.width,a=r.height,l=o.state,u=l.width,d=l.height;"resize"!==i||u===s&&d===a||(o.setState({width:s,height:a}),o.props.onResize())}},o.onLoad=function(e){o.maybeConnect(),o.props.onLoad(e)},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){w("Mounting "+this.constructor.displayName+" React component.")}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.checkMessageForResize,!1),this.maybeConnect()}},{key:"componentDidUpdate",value:function(){this.maybeConnect()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.checkMessageForResize)}},{key:"render",value:function(){var e=["onResize"];return x.default.createElement("iframe",(0,i.default)({ref:"iframe"},(0,E.omit)(this.props,e),{onLoad:this.onLoad,width:this.props.width||this.state.width,height:this.props.height||this.state.height}))}}]),t}(x.default.Component);k.displayName="ResizableIframe",k.propTypes={src:b.default.string,width:b.default.oneOfType([b.default.string,b.default.number]),height:b.default.oneOfType([b.default.string,b.default.number]),onLoad:b.default.func,onResize:b.default.func},k.defaultProps={onLoad:S,onResize:S},t.default=k,e.exports=t.default},"./client/components/screen-reader-text/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.children;return s.default.createElement("span",{className:"screen-reader-text"},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./node_modules/react/react.js"),s=o(i);e.exports=t.default},"./client/components/section-header/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),v=o(g),y=n("./client/components/card/compact.jsx"),b=o(y),_=n("./client/components/count/index.jsx"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),n=(0,v.default)(this.props.className,"section-header",{"is-empty":t});return h.default.createElement(b.default,{className:n,href:this.props.href},h.default.createElement("div",{className:"section-header__label"},h.default.createElement("span",{className:"section-header__label-text"},this.props.label),e&&h.default.createElement(x.default,{count:this.props.count})),h.default.createElement("div",{className:"section-header__actions"},this.props.children))}}]),t}(m.PureComponent);C.defaultProps={label:"",href:null},t.default=C,e.exports=t.default},"./client/components/section-nav/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=n("./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx"),C=o(x),j=n("./client/components/section-nav/tabs.jsx"),E=o(j),w=n("./client/components/section-nav/item.jsx"),S=o(w),k=n("./client/components/search/index.jsx"),T=o(k),P=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),I.call(o),r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.checkForSiblingControls(this.props.children)}},{key:"componentWillReceiveProps",value:function(e){(0,_.isEqual)(this.props,e)||(this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel())}},{key:"render",value:function(){var e=this.getChildren(),t=void 0;return e?(t=(0,b.default)({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems},this.props.className),h.default.createElement("div",{className:t},this.renderDropdown(),h.default.createElement("div",{className:"section-nav__panel"},e))):(t=(0,b.default)({"section-nav":!0,"is-empty":!0},this.props.className),h.default.createElement("div",{className:t},h.default.createElement("div",{className:"section-nav__panel"},h.default.createElement(S.default,null))))}}]),t}(m.Component);P.propTypes={selectedText:v.default.node,selectedCount:v.default.number,hasPinnedItems:v.default.bool,onMobileNavPanelOpen:v.default.func,className:v.default.string,allowDropdown:v.default.bool},P.defaultProps={onMobileNavPanelOpen:function(){},allowDropdown:!0};var I=function(){var e=this;this.state={mobileOpen:!1},this.renderDropdown=function(){return e.props.allowDropdown?h.default.createElement("div",{className:"section-nav__mobile-header",onClick:e.toggleMobileOpenState},h.default.createElement("span",{className:"section-nav__mobile-header-text"},e.props.selectedText)):h.default.createElement("div",null)},this.getChildren=function(){return h.default.Children.map(e.props.children,function(e){var t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==E.default||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===E.default&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===T.default&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),h.default.cloneElement(e,t)):null}.bind(e))},this.closeMobilePanel=function(){window.innerWidth<480&&e.state.mobileOpen&&e.setState({mobileOpen:!1})},this.toggleMobileOpenState=function(){var t=!e.state.mobileOpen;e.setState({mobileOpen:t}),t&&e.props.onMobileNavPanelOpen()},this.generateOnSearch=function(t){return function(){t.apply(void 0,arguments),e.closeMobilePanel()}},this.checkForSiblingControls=function(t){e.hasSiblingControls=!1;var n=[T.default,C.default];h.default.Children.forEach(t,function(e,t){t&&e&&!(0,_.includes)(n,e.type)&&(this.hasSiblingControls=!0)}.bind(e))}};t.default=P,e.exports=t.default},"./client/components/section-nav/item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/components/count/index.jsx"),x=o(_),C=n("./client/sections-preload.js"),j=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];
return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o._preloaded=!1,o.preload=function(){!o._preloaded&&o.props.preloadSectionName&&(o._preloaded=!0,(0,C.preload)(o.props.preloadSectionName))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.itemType?this.props.itemType:"tab",t={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};t["section-nav-"+e]=!0;var n=(0,b.default)(this.props.className,t),o=void 0,r=void 0;return this.props.isExternalLink&&(o="_blank"),this.props.disabled||(r=this.props.onClick),h.default.createElement("li",{className:n},h.default.createElement("a",{href:this.props.path,target:o,className:"section-nav-"+e+"__link",onClick:r,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},h.default.createElement("span",{className:"section-nav-"+e+"__text"},this.props.children,"number"==typeof this.props.count&&h.default.createElement(x.default,{count:this.props.count}))))}}]),t}(m.PureComponent);j.propTypes={itemType:v.default.string,path:v.default.string,selected:v.default.bool,tabIndex:v.default.number,onClick:v.default.func,isExternalLink:v.default.bool,disabled:v.default.bool,count:v.default.oneOfType([v.default.number,v.default.bool]),className:v.default.string,preloadSectionName:v.default.string},t.default=j,e.exports=t.default},"./client/components/section-nav/tabs.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-dom/index.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./node_modules/lodash/lodash.js"),w=n("./client/components/select-dropdown/item.jsx"),S=o(w),k=n("./client/components/select-dropdown/index.jsx"),T=o(k),P=n("./client/lib/viewport/index.js"),I=o(P),R=480,N=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={isDropdown:!1},o.getTabWidths=function(){var e=0;v.default.Children.forEach(o.props.children,function(t,n){if(t){var o=b.default.findDOMNode(this.refs["tab-"+n]).offsetWidth;e+=o}}.bind(o)),o.tabsWidth=Math.max(e,o.tabsWidth||0)},o.getDropdown=function(){var e=v.default.Children.map(o.props.children,function(e,t){return e?v.default.createElement(S.default,(0,i.default)({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return v.default.createElement(T.default,{className:"section-nav-tabs__dropdown",selectedText:o.props.selectedText,selectedCount:o.props.selectedCount},e)},o.setDropdown=function(){var e=void 0;if(window.innerWidth>R){if(!o.refs.navGroup)return;e=o.refs.navGroup.offsetWidth,o.getTabWidths(),e<=o.tabsWidth&&!o.state.isDropdown?o.setState({isDropdown:!0}):e>o.tabsWidth&&o.state.isDropdown&&o.setState({isDropdown:!1})}else window.innerWidth<=R&&o.state.isDropdown&&o.setState({isDropdown:!1})},o.keyHandler=function(e){switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setDropdown(),this.debouncedAfterResize=(0,E.debounce)(this.setDropdown,300),window.addEventListener("resize",this.debouncedAfterResize)}},{key:"componentDidUpdate",value:function(){this.setDropdown()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedAfterResize)}},{key:"render",value:function(){var e=v.default.Children.map(this.props.children,function(e,t){return e&&v.default.cloneElement(e,{ref:"tab-"+t})}),t=(0,j.default)({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),n=I.default.getWindowInnerWidth();return v.default.createElement("div",{className:"section-nav-group",ref:"navGroup"},v.default.createElement("div",{className:t},this.props.label&&v.default.createElement("h6",{className:"section-nav-group__label"},this.props.label),v.default.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&n>R&&this.getDropdown()))}}]),t}(g.Component);N.propTypes={selectedText:x.default.string,selectedCount:x.default.number,label:x.default.string,hasSiblingControls:x.default.bool},N.defaultProps={hasSiblingControls:!1},t.default=N,e.exports=t.default},"./client/components/segmented-control/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),v=n("./node_modules/react-dom/index.js"),y=o(v),b=n("./node_modules/react/react.js"),_=o(b),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./client/components/segmented-control/item.jsx"),E=o(j),w=1,S=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));n.getSegmentedItems=function(){var e=0;return n.props.children?_.default.Children.map(n.props.children,function(t,n){var o=_.default.cloneElement(t,{ref:t.type===E.default?"item-"+e:null,key:"item-"+n,onClick:function(e){this.setKeyboardNavigation(!1),"function"==typeof t.props.onClick&&t.props.onClick(e)}.bind(this)});return t.type===E.default&&e++,o},n):n.props.options.map(function(e,t){return _.default.createElement(E.default,{key:"segmented-control-"+this.id+"-"+e.value,ref:"item-"+t,selected:this.state.selected===e.value,onClick:this.selectItem.bind(this,e),path:e.path,index:t,value:e.value},e.label)},n)},n.selectItem=function(e){e&&(n.props.onSelect&&n.props.onSelect(e),n.setState({selected:e.value,keyboardNavigation:!1}))},n.setKeyboardNavigation=function(e){n.setState({keyboardNavigation:e})},n.navigateItem=function(e){switch(e.keyCode){case 9:n.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),document.activeElement.click();break;case 37:e.preventDefault(),n.focusSibling("previous");break;case 39:e.preventDefault(),n.focusSibling("next")}},n.navigateItemByTabKey=function(e){var t=e.shiftKey?"previous":"next",o=n.focusSibling(t);o!==!1&&e.preventDefault()},n.focusSibling=function(e){var t,o,r;return o=n.props.options?(0,m.filter)((0,m.map)(n.props.options,"value"),Boolean):(0,m.filter)(n.props.children,function(e){return e.type===E.default}),"number"!=typeof n.focused&&(n.focused=n.getCurrentFocusedIndex()),t="previous"===e?-1:1,r=n.focused+t,!(r>=o.length||r<0)&&(y.default.findDOMNode(n.refs["item-"+r].refs.itemLink).focus(),n.focused=r,r)},n.getCurrentFocusedIndex=function(){var e=document.activeElement.parentNode,t=Array.prototype.slice(e.parentNode.children),n=t.indexOf(e);return n>-1?n:0};var o;return e.options&&(o=e.initialSelected||e.options[0].value),n.state={selected:o,keyboardNavigation:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.id=w,w++}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.navigateItem)}},{key:"render",value:function(){var e={"segmented-control":!0,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};return this.props.className&&this.props.className.split(" ").forEach(function(t){e[t]=!0}),_.default.createElement("ul",{className:(0,C.default)(e),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,!0)},this.getSegmentedItems())}}]),t}(_.default.Component);S.propTypes={initialSelected:g.default.string,compact:g.default.bool,className:g.default.string,style:g.default.object,onSelect:g.default.func,options:g.default.arrayOf(g.default.shape({value:g.default.string.isRequired,label:g.default.string.isRequired,path:g.default.string}))},S.defaultProps={compact:!1},t.default=S,e.exports=t.default},"./client/components/segmented-control/item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=(0,x.default)({"segmented-control__item":!0,"is-selected":this.props.selected}),t=(0,x.default)("segmented-control__link",(0,i.default)({},"item-index-"+this.props.index,null!=this.props.index));return b.default.createElement("li",{className:e},b.default.createElement("a",{href:this.props.path,className:t,ref:"itemLink",onClick:this.props.onClick,title:this.props.title,"data-e2e-value":this.props.value,role:"radio",tabIndex:0,"aria-selected":this.props.selected},b.default.createElement("span",{className:"segmented-control__text"},this.props.children)))}}]),t}(b.default.Component);C.propTypes={children:v.default.node.isRequired,path:v.default.string,selected:v.default.bool,title:v.default.string,value:v.default.string,onClick:v.default.func},C.defaultProps={selected:!1},t.default=C,e.exports=t.default},"./client/components/shortcode/data.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=n("./node_modules/flux/utils.js"),y=n("./node_modules/lodash/lodash.js"),b=n("./client/lib/shortcodes/store.js"),_=o(b),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.filterRenderResult,o=(0,y.pick)(this.state.data,"body","scripts","styles");return(0,g.cloneElement)(t,n(o))}}],[{key:"getStores",value:function(){return[_.default]}},{key:"calculateState",value:function(e,t){var n=t.siteId,o=t.shortcode;return{data:_.default.get(n,o)}}}]),t}(g.Component);x.propTypes={siteId:h.default.number.isRequired,shortcode:h.default.string.isRequired,filterRenderResult:h.default.func},x.defaultProps={filterRenderResult:function(e){return e}},t.default=v.Container.create(x,{withProps:!0}),e.exports=t.default},"./client/components/shortcode/frame.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/json/stringify.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./client/lib/embed-frame-markup/index.jsx"),S=o(w),k=n("./client/components/resizable-iframe/index.jsx"),T=o(k),P=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.state={html:""},o.updateHtmlState=function(e){o.setState({html:(0,S.default)(e)})},o.onFrameLoad=function(e){e.target.contentWindow.postMessage((0,a.default)({content:o.state.html}),"*"),o.props.onLoad(e)},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.updateHtmlState(this.props)}},{key:"componentWillReceiveProps",value:function(e){(0,C.isEqual)(this.props,e)||this.updateHtmlState(e)}},{key:"shouldComponentUpdate",value:function(e,t){return t.html!==this.state.html}},{key:"render",value:function(){var e=(0,E.default)("shortcode-frame",this.props.className);if(!this.state.html)return null;var t=Math.random();return x.default.createElement(T.default,(0,i.default)({key:t},(0,C.omit)(this.props,"body","scripts","styles"),{src:"https://wpcomwidgets.com/render/",onLoad:this.onFrameLoad,frameBorder:"0",sandbox:"allow-scripts",className:e}))}}]),t}(x.default.Component);P.displayName="ShortcodeFrame",P.propTypes={body:b.default.string,scripts:b.default.object,style:b.default.object,onLoad:b.default.func,className:b.default.string},P.defaultProps={onLoad:function(){}},t.default=P,e.exports=t.default},"./client/components/shortcode/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=r(i),a=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=r(a),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=r(u),c=n("./node_modules/babel-runtime/helpers/createClass.js"),f=r(c),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=r(p),h=n("./node_modules/babel-runtime/helpers/inherits.js"),g=r(h),v=n("./node_modules/prop-types/index.js"),y=r(v),b=n("./node_modules/react/react.js"),_=r(b),x=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/classnames/index.js"),j=r(C),E=n("./client/lib/shortcodes/store.js"),w=r(E),S=n("./client/lib/shortcodes/actions.js"),k=o(S),T=n("./client/components/shortcode/data.jsx"),P=r(T),I=n("./client/components/shortcode/frame.jsx"),R=r(I),N=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,m.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(s))),o.fetchRendered=function(){var e=o.props,t=e.siteId,n=e.children;w.default.get(t,n)||(o.clearFetchTimeout(),o.fetchTimeout=setTimeout(function(){o.clearFetchTimeout(),k.fetch(t,n)},0))},o.clearFetchTimeout=function(){clearTimeout(o.fetchTimeout),o.fetchTimeout=null},r=n,(0,m.default)(o,r)}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.fetchRendered(),this.listener=w.default.addListener(this.fetchRendered)}},{key:"componentDidUpdate",value:function(){this.fetchRendered()}},{key:"componentWillUnmount",value:function(){this.clearFetchTimeout(),this.listener&&this.listener.remove()}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.className,o=e.filterRenderResult,r=e.children,i=(0,j.default)("shortcode",n);return _.default.createElement(P.default,{siteId:t,shortcode:r,filterRenderResult:o},_.default.createElement(R.default,(0,s.default)({},(0,x.omit)(this.props,"siteId","filterRenderResult"),{className:i})))}}]),t}(_.default.Component);N.propTypes={siteId:y.default.number.isRequired,children:y.default.string.isRequired,filterRenderResult:y.default.func,className:y.default.string},t.default=N,e.exports=t.default},"./client/components/sorted-grid/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j=n("./client/components/infinite-list/index.jsx"),E=o(j),w=n("./client/components/sorted-grid/label.jsx"),S=o(w),k=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.renderItem=function(e){return e.isGridLabel?o.renderLabels(e):o.props.renderItem(e)},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"getItems",value:function(){for(var e=[],t=0;t<this.props.items.length;t+=this.props.itemsPerRow){var n=(0,C.slice)(this.props.items,t,t+this.props.itemsPerRow),o=(0,C.reduce)((0,C.map)(n,this.props.getItemGroup),function(e,t){return e[t]=(0,C.get)(e,t,0)+1,e},{});e.push.apply(e,[{isGridLabel:!0,id:t,groups:o}].concat((0,a.default)(n)))}return e}},{key:"renderLabels",value:function(e){var t=this;return b.default.createElement("div",{key:"header_"+e.id,className:"sorted-grid__header"},(0,C.map)(e.groups,function(n,o){return b.default.createElement(S.default,{key:"group_"+o,text:t.props.getGroupLabel(o),itemsCount:n,itemsPerRow:t.props.itemsPerRow,lastInRow:(0,C.last)((0,C.keys)(e.groups))===o})}))}},{key:"render",value:function(){var e=(0,C.omit)(this.props,"getGroupLabel","getItemGroup","items","renderItem");return b.default.createElement(E.default,(0,i.default)({items:this.getItems(),renderItem:this.renderItem},e))}}]),t}(y.PureComponent);k.propTypes={getGroupLabel:x.default.func.isRequired,getItemGroup:x.default.func.isRequired,items:x.default.array,itemsPerRow:x.default.number.isRequired},t.default=k,e.exports=t.default},"./client/components/sorted-grid/label.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/react-redux/es/index.js"),u=n("./client/state/preferences/selectors.js"),d=function(e){var t=e.itemsCount,n=e.itemsPerRow,o=e.lastInRow,r=e.scale,s=e.text,a=1%r/(n-1)*100||0,l={marginRight:(o?0:a)+"%",width:r*t*100+a*(t-1)+"%"};return i.default.createElement("div",{className:"sorted-grid__label",style:l},s)};d.propTypes={itemsCount:a.default.number,itemsPerRow:a.default.number,lastInRow:a.default.bool,scale:a.default.number.isRequired,text:a.default.string},d.defaultProps={text:""};var c=(0,l.connect)(function(e){return{scale:(0,u.getPreference)(e,"mediaScale")}},null,null,{pure:!1});t.default=c(d),e.exports=t.default},"./client/components/sticky-panel/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/prop-types/index.js"),g=o(h),v=n("./node_modules/react-dom/index.js"),y=o(v),b=n("./node_modules/react/react.js"),_=o(b),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./client/lib/viewport/index.js"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={isSticky:!1,spacerHeight:0,blockWidth:0},o.onWindowScroll=function(){o.rafHandle=window.requestAnimationFrame(o.updateIsSticky)},o.onWindowResize=function(){o.setState({spacerHeight:o.state.isSticky?y.default.findDOMNode(o).clientHeight:0,blockWidth:o.state.isSticky?y.default.findDOMNode(o).clientWidth:0})},o.updateIsSticky=function(){var e=window.pageYOffset>o.threshold;return o.props.minLimit!==!1&&o.props.minLimit>=window.innerWidth||E.default.isMobile()?o.setState({isSticky:!1}):void(e!==o.state.isSticky&&o.setState({isSticky:e,spacerHeight:e?y.default.findDOMNode(o).clientHeight:0,blockWidth:e?y.default.findDOMNode(o).clientWidth:0}))},o.getBlockStyle=function(){var e;if(o.state.isSticky)return e=document.getElementById("header").getBoundingClientRect().height,{top:e,width:o.state.blockWidth}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.threshold=y.default.findDOMNode(this).offsetTop,this.throttleOnResize=(0,m.throttle)(this.onWindowResize,200),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.throttleOnResize),this.updateIsSticky()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.throttleOnResize),window.cancelAnimationFrame(this.rafHandle)}},{key:"render",value:function(){var e=(0,C.default)("sticky-panel",this.props.className,{"is-sticky":this.state.isSticky});return _.default.createElement("div",{className:e},_.default.createElement("div",{className:"sticky-panel__content",style:this.getBlockStyle()},this.props.children),_.default.createElement("div",{className:"sticky-panel__spacer",style:{height:this.state.spacerHeight}}))}}]),t}(_.default.Component);w.displayName="StickyPanel",w.propTypes={minLimit:g.default.oneOfType([g.default.bool,g.default.number])},w.defaultProps={minLimit:!1},t.default=w,e.exports=t.default},"./client/components/textarea-autosize/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/autosize/dist/autosize.js"),j=o(C),E=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){(0,j.default)(this.refs.textarea)}},{key:"componentWillUnmount",value:function(){j.default.destroy(this.refs.textarea)}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.resize()}},{key:"resize",value:function(){j.default.update(this.refs.textarea)}},{key:"render",value:function(){var e=(0,x.default)("textarea-autosize",this.props.className);return v.default.createElement("textarea",(0,i.default)({ref:"textarea"},this.props,{className:e}))}}]),t}(g.Component);E.propTypes={className:b.default.string},t.default=E,e.exports=t.default},"./client/components/tinymce/i18n.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/i18n-calypso/index.js"),i=o(r);t.default={Formats:i.default.translate("Formats",{context:"TinyMCE"}),Headings:i.default.translate("Headings",{context:"TinyMCE"}),"Heading 1":i.default.translate("Heading 1"),"Heading 2":i.default.translate("Heading 2"),"Heading 3":i.default.translate("Heading 3"),"Heading 4":i.default.translate("Heading 4"),"Heading 5":i.default.translate("Heading 5"),"Heading 6":i.default.translate("Heading 6"),Blocks:i.default.translate("Blocks",{context:"TinyMCE",comment:"block tags"}),Paragraph:i.default.translate("Paragraph"),Blockquote:i.default.translate("Blockquote"),Div:i.default.translate("Div",{context:"HTML tag"}),Pre:i.default.translate("Pre",{context:"HTML tag"}),Preformatted:i.default.translate("Preformatted",{context:"HTML tag"}),Address:i.default.translate("Address",{context:"HTML tag"}),Inline:i.default.translate("Inline",{context:"HTML elements"}),Underline:i.default.translate("Underline"),Strikethrough:i.default.translate("Strikethrough"),Subscript:i.default.translate("Subscript"),Superscript:i.default.translate("Superscript"),"Clear formatting":i.default.translate("Clear formatting"),Bold:i.default.translate("Bold"),Italic:i.default.translate("Italic"),"Source code":i.default.translate("Source code"),"Font Family":i.default.translate("Font Family"),"Font Sizes":i.default.translate("Font Sizes"),"Align center":i.default.translate("Align center"),"Align right":i.default.translate("Align right"),"Align left":i.default.translate("Align left"),Justify:i.default.translate("Justify"),"Increase indent":i.default.translate("Increase indent"),"Decrease indent":i.default.translate("Decrease indent"),Cut:i.default.translate("Cut"),Copy:i.default.translate("Copy"),Paste:i.default.translate("Paste"),"Select all":i.default.translate("Select all"),Undo:i.default.translate("Undo"),Redo:i.default.translate("Redo"),Ok:i.default.translate("OK"),Cancel:i.default.translate("Cancel"),Close:i.default.translate("Close"),"Visual aids":i.default.translate("Visual aids"),"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":i.default.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.")+"\n\n"+i.default.translate("If you’re looking to paste rich content from Microsoft Word, try turning this option off. The editor will clean up text pasted from Word automatically."),"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":i.default.translate("Rich Text Area. Press Alt-Shift-H for help"),"You have unsaved changes are you sure you want to navigate away?":i.default.translate("The changes you made will be lost if you navigate away from this page."),"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":i.default.translate("Your browser does not support direct access to the clipboard. Please use keyboard shortcuts or your browser’s edit menu instead."),"Bullet list":i.default.translate("Bulleted list"),"Numbered list":i.default.translate("Numbered list"),"Toolbar Toggle":i.default.translate("Toolbar Toggle"),"Insert Read More tag":i.default.translate("Insert Read More tag"),"Insert Page Break tag":i.default.translate("Insert Page Break tag"),"No alignment":i.default.translate("No alignment"),Remove:i.default.translate("Remove"),"Edit ":i.default.translate("Edit"),"Horizontal line":i.default.translate("Horizontal line"),"Text color":i.default.translate("Text color"),"Paste as text":i.default.translate("Paste as text")},e.exports=t.default},"./client/components/tinymce/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/react-dom/index.js"),y=o(v),b=n("./node_modules/react/react.js"),_=o(b),x=n("./node_modules/prop-types/index.js"),C=o(x),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./node_modules/autosize/dist/autosize.js"),S=o(w),k=n("./node_modules/tinymce/tinymce.js"),T=o(k);n("./node_modules/tinymce/themes/modern/theme.js"),n("./node_modules/tinymce/plugins/colorpicker/plugin.js"),n("./node_modules/tinymce/plugins/directionality/plugin.js"),n("./node_modules/tinymce/plugins/hr/plugin.js"),n("./node_modules/tinymce/plugins/lists/plugin.js"),n("./node_modules/tinymce/plugins/media/plugin.js"),n("./node_modules/tinymce/plugins/paste/plugin.js"),n("./node_modules/tinymce/plugins/tabfocus/plugin.js"),n("./node_modules/tinymce/plugins/textcolor/plugin.js");var P=n("./client/components/tinymce/plugins/wpcom/plugin.js"),I=o(P),R=n("./client/components/tinymce/plugins/wpcom-autoresize/plugin.js"),N=o(R),M=n("./client/components/tinymce/plugins/wpcom-help/plugin.js"),D=o(M),O=n("./client/components/tinymce/plugins/wpcom-charmap/plugin.js"),A=o(O),L=n("./client/components/tinymce/plugins/wpcom-view/plugin.js"),B=o(L),F=n("./client/components/tinymce/plugins/wpcom-sourcecode/plugin.js"),z=o(F),U=n("./client/components/tinymce/plugins/wpeditimage/plugin.js"),H=o(U),W=n("./client/components/tinymce/plugins/wplink/plugin.js"),V=o(W),q=n("./client/components/tinymce/plugins/media/plugin.jsx"),G=o(q),K=n("./client/components/tinymce/plugins/advanced/plugin.jsx"),$=o(K),Y=n("./client/components/tinymce/plugins/wpcom-tabindex/plugin.js"),J=o(Y),Z=n("./client/components/tinymce/plugins/wpcom-track-paste/plugin.js"),X=o(Z),Q=n("./client/components/tinymce/plugins/touch-scroll-toolbar/plugin.js"),ee=o(Q),te=n("./client/components/tinymce/plugins/editor-button-analytics/plugin.js"),ne=o(te),oe=n("./client/components/tinymce/plugins/calypso-alert/plugin.jsx"),re=o(oe),ie=n("./client/components/tinymce/plugins/contact-form/plugin.jsx"),se=o(ie),ae=n("./client/components/tinymce/plugins/simple-payments/plugin.jsx"),le=o(ae),ue=n("./client/components/tinymce/plugins/after-the-deadline/plugin.js"),de=o(ue),ce=n("./client/components/tinymce/plugins/wptextpattern/plugin.js"),fe=o(ce),pe=n("./client/components/tinymce/plugins/toolbar-pin/plugin.js"),me=o(pe),he=n("./client/components/tinymce/plugins/insert-menu/plugin.jsx"),ge=o(he),ve=n("./client/components/tinymce/plugins/embed/plugin.js"),ye=o(ve),be=n("./client/components/tinymce/plugins/embed-reversal/plugin.js"),_e=o(be),xe=n("./client/post-editor/editor-html-toolbar/index.jsx"),Ce=o(xe),je=n("./client/components/tinymce/plugins/mentions/plugin.jsx"),Ee=o(je),we=n("./client/components/tinymce/plugins/markdown/plugin.js"),Se=o(we),ke=n("./client/components/tinymce/plugins/wpemoji/plugin.js"),Te=o(ke),Pe=n("./client/lib/user/index.js"),Ie=o(Pe),Re=n("./client/components/tinymce/i18n.js"),Ne=o(Re),Me=n("./client/lib/viewport/index.js"),De=o(Me),Oe=n("./client/config/index.js"),Ae=o(Oe),Le=n("./client/lib/formatting/index.js");
[I.default,N.default,D.default,A.default,B.default,z.default,H.default,V.default,ge.default,G.default,$.default,J.default,X.default,ee.default,ne.default,re.default,se.default,de.default,fe.default,me.default,ye.default,_e.default,Se.default,Te.default,le.default].forEach(function(e){return e()});var Be=(0,Ie.default)(),Fe=1,ze="/do-not-load/",Ue={activate:"onActivate",blur:"onBlur",change:"onChange",input:"onInput",keyUp:"onKeyUp",deactivate:"onDeactivate",focus:"onFocus",hide:"onHide",init:"onInit",mouseUp:"onMouseUp",redo:"onRedo",remove:"onRemove",reset:"onReset",show:"onShow",submit:"onSubmit",undo:"onUndo",setContent:"onSetContent"},He=["colorpicker","embed","hr","lists","media","paste","tabfocus","textcolor","wptextpattern","wpcom","wpeditimage","wplink","AtD","directionality","wpemoji","wpcom/autoresize","wpcom/media","wpcom/advanced","wpcom/help","wpcom/charmap","wpcom/tabindex","wpcom/touchscrolltoolbar","wpcom/view","wpcom/editorbuttonanalytics","wpcom/calypsoalert","wpcom/tabindex","wpcom/toolbarpin","wpcom/contactform","wpcom/sourcecode","wpcom/embedreversal","wpcom/trackpaste","wpcom/insertmenu","wpcom/markdown","wpcom/simplepayments"];(0,Ee.default)(),He.push("wpcom/mentions");var We=[window.app.staticUrls["tinymce/skins/wordpress/wp-content.css"],"//s1.wp.com/wp-includes/css/dashicons.css?v=20150727",window.app.staticUrls["editor.css"],"https://fonts.googleapis.com/css?family=Noto+Serif:400,400i,700,700i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese"],Ve=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),qe.call(o),r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this._id="tinymce-"+Fe,Fe++}},{key:"componentDidUpdate",value:function(e){this._editor&&(this.bindEditorEvents(e),this.props.mode!==e.mode&&this.toggleEditor())}},{key:"componentDidMount",value:function(){this.mounted=!0;var e=function(e){var t=this;return this._editor=e,this.mounted?(this.bindEditorEvents(),e.on("SetTextAreaContent",function(e){return t.setTextAreaContent(e.content)}),void e.once("PostRender",this.toggleEditor.bind(this,{autofocus:!this.props.isNew}))):void this.destroyEditor()}.bind(this);this.localize();var t=Be.isRTL()?"ltr,":"";T.default.init({selector:"#"+this._id,skin_url:"//s1.wp.com/wp-includes/js/tinymce/skins/lightgray",skin:"lightgray",content_css:We,language:Be.get()?Be.get().localeSlug:"en",language_url:ze,directionality:Be.isRTL()?"rtl":"ltr",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,branding:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,wpeditimage_html5_captions:!0,redux_store:this.context.store,textarea:this.refs.text,preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",end_container_on_empty_block:!0,plugins:He.join(),statusbar:!1,resize:!1,menubar:!1,indent:!1,atd_rpc_id:"https://wordpress.com",atd_ignore_enable:!0,autoresize_min_height:Math.max(document.documentElement.clientHeight-300,300),autoresize_bottom_margin:De.default.isMobile()?10:50,toolbar1:"wpcom_insert_menu,formatselect,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,spellchecker,wp_more,"+t+"wpcom_advanced",toolbar2:"strikethrough,underline,hr,alignjustify,forecolor,pastetext,removeformat,wp_charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:"content-html,save-post",tabindex:this.props.tabIndex,body_class:"content post-type-post post-status-draft post-format-standard locale-en-us",add_unload_trigger:!1,setup:e}),(0,S.default)(y.default.findDOMNode(this.refs.text))}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this._editor&&this.destroyEditor()}},{key:"render",value:function(){var e=this.props.mode,t=(0,E.default)({tinymce:!0,"is-visible":"html"===e}),n=(0,E.default)("tinymce-container","editor-mode-"+e);return _.default.createElement("div",{className:n},"html"===e&&Ae.default.isEnabled("post-editor/html-toolbar")&&_.default.createElement(Ce.default,{content:this.refs.text,onToolbarChangeContent:this.onToolbarChangeContent}),_.default.createElement("textarea",{ref:"text",className:t,id:this._id,onChange:this.onTextAreaChange,tabIndex:this.props.tabIndex,value:this.state.content}))}}]),t}(_.default.Component);Ve.displayName="TinyMCE",Ve.propTypes={isNew:C.default.bool,mode:C.default.string,tabIndex:C.default.number,onActivate:C.default.func,onBlur:C.default.func,onChange:C.default.func,onDeactivate:C.default.func,onFocus:C.default.func,onHide:C.default.func,onInit:C.default.func,onInput:C.default.func,onKeyUp:C.default.func,onMouseUp:C.default.func,onRedo:C.default.func,onRemove:C.default.func,onReset:C.default.func,onShow:C.default.func,onSubmit:C.default.func,onSetContent:C.default.func,onUndo:C.default.func,onTextEditorChange:C.default.func},Ve.contextTypes={store:C.default.object},Ve.defaultProps={mode:"tinymce",isNew:!1};var qe=function(){var e=this;this.state={content:"",selection:null},this._editor=null,this.destroyEditor=function(){(0,g.forEach)(Ue,function(e,t){this.props[e]&&this._editor.off(t,this.props[e])}.bind(e)),T.default.remove(e._editor),e._editor=null,S.default.destroy(y.default.findDOMNode(e.refs.text))},this.doAutosizeUpdate=function(){S.default.update(y.default.findDOMNode(e.refs.text))},this.bindEditorEvents=function(t){t=t||{},(0,g.forEach)(Ue,function(e,n){t[e]!==this.props[e]&&(this.props[e]?this._editor.on(n,this.props[e]):this._editor.off(n,this.props[e]))}.bind(e))},this.toggleEditor=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autofocus:!0};if(e._editor){if("html"===e.props.mode)return e._editor.hide(),e.doAutosizeUpdate(),void(t.autofocus&&e.focusEditor());e._editor.show(),t.autofocus&&e.focusEditor()}},this.focusEditor=function(){if("html"===e.props.mode){var t=y.default.findDOMNode(e.refs.text);e.state.selection?e.selectTextInTextArea(e.state.selection):t.setSelectionRange(0,0),11!==T.default.Env.ie&&t.focus()}else e._editor&&e._editor.focus()},this.getContent=function(t){if("html"===e.props.mode)return e.state.content;if(!e._editor)return"";var n=e._editor.getContent(t);return t&&"raw"===t.format||(n=n.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),n=(0,Le.removep)(n)),n},this.isDirty=function(){return!!e._editor&&e._editor.isDirty()},this.setTextAreaContent=function(t){e.setState({content:(0,Le.decodeEntities)(t)},e.doAutosizeUpdate)},this.setEditorContent=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e._editor){var o=e.props.mode;e._editor.setContent((0,Le.wpautop)(t),(0,i.default)({},n,{mode:o})),n.initial&&e._editor.undoManager.clear()}e.setTextAreaContent(t)},this.setSelection=function(t){e.setState({selection:t})},this.selectTextInTextArea=function(t){if(t){var n=y.default.findDOMNode(e.refs.text),o=t.start,r=t.end||t.start;n.setSelectionRange(o,r),e.setState({selection:null})}},this.onTextAreaChange=function(t){var n=t.target.value;e.props.onTextEditorChange&&e.props.onTextEditorChange(n),e.setState({content:n},e.doAutosizeUpdate)},this.onToolbarChangeContent=function(t){e.props.onTextEditorChange&&e.props.onTextEditorChange(t),e.setState({content:t},e.doAutosizeUpdate)},this.localize=function(){var e=Be.get(),t=Ne.default;e&&(Be.isRTL()&&(t=(0,g.assign)({_dir:"rtl"},t)),T.default.addI18n(e.localeSlug,t),T.default.ScriptLoader.markDone(ze))}};t.default=Ve,e.exports=t.default},"./client/components/tinymce/plugins/advanced/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){return(0,g.getPreference)(i(),"editorAdvancedVisible")}function n(){var t=e.theme.panel.find(".toolbar:not(.menubar)"),n=(0,m.isWithinBreakpoint)("<960px"),o=0;t.each(function(e,t){var r=n||0===t||u;e.visible(r),r&&(n?o=Math.max(o,e.getEl().clientHeight):o+=e.getEl().clientHeight)}),d.default.DOM.setStyles(e.getContainer(),{"padding-top":o}),f&&f.active(u)}var o=e.getParam("redux_store");if(o){var r=o.dispatch,i=o.getState,a=o.subscribe,u=t(),f=void 0;e.addButton("wpcom_advanced",{text:(0,c.translate)("Toggle Advanced"),tooltip:(0,c.translate)("Toggle Advanced"),classes:"btn wpcom-icon-button advanced",cmd:"WPCOM_ToggleAdvancedVisible",onPostRender:function(){f=this,this.innerHtml(l.default.renderToStaticMarkup(s.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},s.default.createElement(p.default,{icon:"ellipsis",size:28}))))}}),e.addCommand("WPCOM_ToggleAdvancedVisible",function(){r((0,h.savePreference)("editorAdvancedVisible",!u))}),e.on("init",function(){(0,g.isFetchingPreferences)(i())||r((0,h.fetchPreferences)())}),e.on("preInit",function(){e.shortcuts.add("access+z","","WPCOM_ToggleAdvancedVisible")}),e.on("init show",n),window.addEventListener("resize",n),a(function(){var e=t();e!==u&&(u=e,n())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.PluginManager.add("wpcom/advanced",r)};var i=n("./node_modules/react/react.js"),s=o(i),a=n("./node_modules/react-dom/server.js"),l=o(a),u=n("./node_modules/tinymce/tinymce.js"),d=o(u),c=n("./node_modules/i18n-calypso/index.js"),f=n("./node_modules/gridicons/build/index.js"),p=o(f),m=n("./client/lib/viewport/index.js"),h=n("./client/state/preferences/actions.js"),g=n("./client/state/preferences/selectors.js");e.exports=t.default},"./client/components/tinymce/plugins/after-the-deadline/core.js":function(e,t,n){"use strict";function o(){this.ignore_types=["Bias Language","Cliches","Complex Expression","Diacritical Marks","Double Negatives","Hidden Verbs","Jargon Language","Passive voice","Phrases to Avoid","Redundant Expression"],this.ignore_strings={},this.i18n={}}function r(e){this.tokens=e,this.index=0,this.count=0,this.last=0}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/i18n-calypso/index.js");o.prototype.setIgnoreStrings=function(e){var t=this;"string"==typeof e&&(e=e.split(/,\s*/g)),this.map(e,function(e){t.ignore_strings[e]=1})},o.prototype.showTypes=function(e){var t=e.split(/,\s*/g),n={},o=[];n["Double Negatives"]=1,n["Hidden Verbs"]=1,n["Passive voice"]=1,n["Bias Language"]=1,n.Cliches=1,n["Complex Expression"]=1,n["Diacritical Marks"]=1,n["Jargon Language"]=1,n["Phrases to Avoid"]=1,n["Redundant Expression"]=1,this.map(t,function(e){n[e]=void 0}),this.map(this.ignore_types,function(e){void 0!==n[e]&&o.push(e)}),this.ignore_types=o},o.prototype.makeError=function(e,t,n,o){var r={};return r.type=n,r.string=e,r.tokens=t,new RegExp("\\b"+e+"\\b").test(e)?r.regexp=new RegExp("(?!"+e+"<)\\b"+e.replace(/\s+/g,o)+"\\b"):new RegExp(e+"\\b").test(e)?r.regexp=new RegExp("(?!"+e+"<)"+e.replace(/\s+/g,o)+"\\b"):new RegExp("\\b"+e).test(e)?r.regexp=new RegExp("(?!"+e+"<)\\b"+e.replace(/\s+/g,o)):r.regexp=new RegExp("(?!"+e+"<)"+e.replace(/\s+/g,o)),r.used=!1,r},o.prototype.addToErrorStructure=function(e,t,n,o){var r=this;this.map(t,function(t){var i=t.word.split(/\s+/),s=t.pre,a=i[0];void 0===e["__"+a]&&(e["__"+a]={},e["__"+a].pretoks={},e["__"+a].defaults=[]),""===s?e["__"+a].defaults.push(r.makeError(t.word,i,n,o,s)):(void 0===e["__"+a].pretoks["__"+s]&&(e["__"+a].pretoks["__"+s]=[]),e["__"+a].pretoks["__"+s].push(r.makeError(t.word,i,n,o,s)))})},o.prototype.buildErrorStructure=function(e,t,n){var o=this._getSeparators(),r={};return this.addToErrorStructure(r,e,"hiddenSpellError",o),this.addToErrorStructure(r,n,"hiddenGrammarError",o),this.addToErrorStructure(r,t,"hiddenSuggestion",o),r},o.prototype._getSeparators=function(){var e,t="",n='"s!#$%&()*+,./:;<=>?@[\\]^_{|}';for(e=0;e<n.length;e++)t+="\\"+n.charAt(e);return"(?:(?:[ "+t+"])|(?:\\-\\-))+"},o.prototype.processXML=function(e){var t,n,o,r,s,a,l,u,d,c,f,p,m,h,g,v;for(t={},this.map(this.ignore_types,function(e){t[e]=1}),this.suggestions=[],n=e.getElementsByTagName("error"),o=[],r=[],s=[],a=0;a<n.length;a++)if(null!==n[a].getElementsByTagName("string").item(0).firstChild&&(l=n[a].getElementsByTagName("string").item(0).firstChild.data,u=n[a].getElementsByTagName("type").item(0).firstChild.data,d=n[a].getElementsByTagName("description").item(0).firstChild.data,c=null!==n[a].getElementsByTagName("precontext").item(0).firstChild?n[a].getElementsByTagName("precontext").item(0).firstChild.data:"",void 0===this.ignore_strings[l])){if(f={},f.description=d,f.suggestions=[],f.matcher=new RegExp("^"+l.replace(/\s+/,this._getSeparators())+"$"),f.context=c,f.string=l,f.type=u,this.suggestions.push(f),null!==n[a].getElementsByTagName("suggestions").item(0))for(p=n[a].getElementsByTagName("suggestions").item(0).getElementsByTagName("option"),m=0;m<p.length;m++)f.suggestions.push(p[m].firstChild.data);null!==n[a].getElementsByTagName("url").item(0)&&(h=n[a].getElementsByTagName("url").item(0).firstChild.data,f.moreinfo=h+"&theme=tinymce"),void 0===t[d]&&("suggestion"===u&&s.push({word:l,pre:c}),"grammar"===u&&o.push({word:l,pre:c})),"spelling"!==u&&"Homophone"!==d||r.push({word:l,pre:c}),"Cliches"===d&&(f.description="Clichés"),"Spelling"===d&&(f.description=(0,i.translate)("Spelling",{comment:"Proofreading error description"})),"Repeated Word"===d&&(f.description=(0,i.translate)("Repeated Word",{comment:"Proofreading error description"})),"Did you mean..."===d&&(f.description=(0,i.translate)("Did you mean…",{comment:"Proofreading error description"}))}return v=r.length+o.length+s.length,g=v>0?this.buildErrorStructure(r,s,o):void 0,{errors:g,count:v,suggestions:this.suggestions}},o.prototype.findSuggestion=function(e){var t,n,o=e.innerHTML,r=(this.getAttrib(e,"pre")+"").replace(/[\\,!\\?\\."\s]/g,""),i=this.suggestions.length;for(n=0;n<i;n++)if((""===r||r===this.suggestions[n].context)&&this.suggestions[n].matcher.test(o)){t=this.suggestions[n];break}return t},r.prototype.next=function(){var e=this.tokens[this.index];return this.count=this.last,this.last+=e.length+1,this.index++,""!==e&&("'"===e[0]&&(e=e.substring(1,e.length)),"'"===e[e.length-1]&&(e=e.substring(0,e.length-1))),e},r.prototype.hasNext=function(){return this.index<this.tokens.length},r.prototype.hasNextN=function(e){return this.index+e<this.tokens.length},r.prototype.skip=function(e,t){this.index+=e,this.last+=t,this.index<this.tokens.length&&(this.count=this.last-this.tokens[this.index].length)},r.prototype.getCount=function(){return this.count},r.prototype.peek=function(e){var t,n=[],o=this.index+e;for(t=this.index;t<o;t++)n.push(this.tokens[t]);return n},o.prototype.markMyWords=function(e,t){function n(e,t,n){var o,r=e.nodeValue,i=r.search(t),s=r.match(t),a=[];return i<0||!s.length?[e]:(i>0&&a.push(document.createTextNode(r.substr(0,i))),a.push(u.create(s[0].replace(t,n))),o=i+s[0].length,o<r.length&&a.push(document.createTextNode(r.substr(o))),a)}var o,i,s=new RegExp(this._getSeparators()),a=[],l=0,u=this,d=this._isTinyMCE?' data-mce-bogus="1"':"",c='<span class="mceItemHidden"'+d+">&nbsp;</span>";return this._walk(e,function(e){3!==e.nodeType||u.isMarkedNode(e)||a.push(e)}),this.map(a,function(e){var a,f,p,m,h,g,v,y,b,_,x,C,j,E,w,S,k,T,P={};if(3===e.nodeType){for(a=e.nodeValue,f=e.nodeValue.split(s),p="",m=[],i=new r(f);i.hasNext();){if(h=i.next(),g=t["__"+h],void 0!==g&&void 0!==g.pretoks){var I=function(e){void 0!==e&&!e.used&&void 0===P["__"+e.string]&&e.regexp.test(_)&&(P["__"+e.string]=1,m.push([e.regexp,'<span class="'+e.type+'" pre="'+p+'"'+d+">$&</span>"]),e.used=!0,y=!0)};v=g.defaults,g=g.pretoks["__"+p],y=!1,b=a.substr(0,i.getCount()),_=a.substr(b.length,a.length),void 0!==g&&(p+=" ",u.map(g,I)),y||(p="",u.map(v,I))}p=h}if(m.length>0){for(x=e,C=0;C<m.length;C++){var R=function(e){var t,r;if(3===e.nodeType){if(l++,u.isIE()&&e.nodeValue.length>0&&" "===e.nodeValue.substr(0,1))return u.create(c+e.nodeValue.substr(1,e.nodeValue.length-1).replace(j,E),!1);if(o)return u.create(e.nodeValue.replace(j,E),!1);if(t=u.create("<span />"),"undefined"==typeof o&&(o="function"!=typeof t.appendChild))return u.remove(t),u.create(e.nodeValue.replace(j,E),!1);for(r=n(e,j,E),w=0;w<r.length;w++)t.appendChild(r[w]);return e=t}for(S=u.contents(e),k=0;k<S.length;k++)if(3===S[k].nodeType&&j.test(S[k].nodeValue))return T=u.isIE()&&S[k].nodeValue.length>0&&" "===S[k].nodeValue.substr(0,1)?u.create(c+S[k].nodeValue.substr(1,S[k].nodeValue.length-1).replace(j,E),!0):u.create(S[k].nodeValue.replace(j,E),!0),u.replaceWith(S[k],T),u.removeParent(T),l++,e;return e};j=m[C][0],E=m[C][1],x=R(x)}u.replaceWith(e,x)}}}),l},o.prototype._walk=function(e,t){var n;for(n=0;n<e.length;n++)t.call(t,e[n]),this._walk(this.contents(e[n]),t)},o.prototype.removeWords=function(e,t){var n=0,o=this;return this.map(this.findSpans(e).reverse(),function(e){var r;e&&(o.isMarkedNode(e)||o.hasClass(e,"mceItemHidden")||o.isEmptySpan(e))&&("&nbsp;"===e.innerHTML?(r=document.createTextNode(" "),o.replaceWith(e,r)):t&&e.innerHTML!==t||(o.removeParent(e),n++))}),n},o.prototype.isEmptySpan=function(e){return""===this.getAttrib(e,"class")&&""===this.getAttrib(e,"style")&&""===this.getAttrib(e,"id")&&!this.hasClass(e,"Apple-style-span")&&""===this.getAttrib(e,"mce_name")},o.prototype.isMarkedNode=function(e){return this.hasClass(e,"hiddenGrammarError")||this.hasClass(e,"hiddenSpellError")||this.hasClass(e,"hiddenSuggestion")},o.prototype.applySuggestion=function(e,t){var n;"(omit)"===t?this.remove(e):(n=this.create(t),this.replaceWith(e,n),this.removeParent(n))},o.prototype.hasErrorMessage=function(e){return void 0!==e&&null!==e.getElementsByTagName("message").item(0)},o.prototype.getErrorMessage=function(e){return e.getElementsByTagName("message").item(0)},o.prototype.isIE=function(){return"Microsoft Internet Explorer"===navigator.appName},t.default=o,e.exports=t.default},"./client/components/tinymce/plugins/after-the-deadline/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){j=new f.default,j.map=w,j._isTinyMCE=!0,j.getAttrib=function(e,t){return E.getAttrib(e,t)},j.findSpans=function(e){return void 0===e?E.select("span"):E.select("span",e)},j.hasClass=function(e,t){return E.hasClass(e,t)},j.contents=function(e){return e.childNodes},j.replaceWith=function(e,t){return E.replace(t,e)},j.create=function(e){return E.create("span",{class:"mceItemHidden","data-mce-bogus":1},e)},j.removeParent=function(e){return E.remove(e,!0),e},j.remove=function(e){E.remove(e)},j.setIgnoreStrings(e.getParam("atd_ignore_strings",[]).join(",")),j.showTypes(e.getParam("atd_show_types",""))}function n(e){return e.className&&/\bhidden(GrammarError|SpellError|Suggestion)\b/.test(e.className)}function o(t){return j.markMyWords(j.contents(e.getBody()),t)}function r(){e.dom.select("span.hiddenSpellError, span.hiddenGrammarError, span.hiddenSuggestion").length||(x&&x.hide(),a())}function i(t,n,o){o?w(e.dom.select("span.hiddenSpellError, span.hiddenGrammarError, span.hiddenSuggestion"),function(e){var t=e.innerText||e.textContent;t===n&&E.remove(e,!0)}):e.dom.remove(t,!0),r()}function a(){for(var t,n=new RegExp("mceItemHidden|hidden(((Grammar|Spell)Error)|Suggestion)"),o=e.dom.select("span"),r=o.length;r--;)t=o[r],t.className&&n.test(t.className)&&e.dom.remove(t,!0);e.setContent(e.getContent({format:"raw"}),{format:"raw"}),C=!1,e.nodeChanged(),e.fire("SpellcheckEnd")}function c(){var e=(0,d.getLocaleSlug)(),t=(0,u.find)(y,function(t){return e===t||0===e.indexOf(t+"-")});return t?t+"."+v:v}function p(t,n,o){e.setProgressState(!0);var r=new XMLHttpRequest;r.open("POST","https://"+c()+"/"+t),r.addEventListener("readystatechange",function(){4===r.readyState&&(e.setProgressState(),200===r.status&&o(""+r.responseText,r))});var i=e.getParam("atd_rpc_id");r.send(l.default.stringify({data:n,key:i}))}function h(e){var t=g.default.get(b)||[];-1===t.indexOf(e)&&t.push(e),m.default.set(b,t)}function _(t){var n=[],o=t.innerText||t.textContent,s=j.findSuggestion(t);s?(n.push({text:s.description,classes:"atd-menu-title",disabled:!0}),s.suggestions.length&&(n.push({text:"-"}),w(s.suggestions,function(e){n.push({text:e,onclick:function(){j.applySuggestion(t,e),r()}})}))):n.push({text:(0,d.translate)("No suggestions",{comment:"Editor proofreading no suggestions"}),classes:"atd-menu-title",disabled:!0}),s&&s.moreinfo&&(n.push({text:"-"}),n.push({text:(0,d.translate)("Explain…",{comment:"Editor proofreading menu item"}),onclick:function(){e.windowManager.open({title:(0,d.translate)("Explain…",{comment:"Editor proofreading menu item"}),url:s.moreinfo,width:480,height:380,inline:!0})}})),n.push.apply(n,[{text:"-"},{text:(0,d.translate)("Ignore suggestion",{comment:"Editor proofreading menu item"}),onclick:function(){i(t,o)}}]),e.getParam("atd_ignore_enable")?n.push({text:(0,d.translate)("Ignore always",{comment:"Editor proofreading menu item"}),onclick:function(){h(o),i(t,o,!0)}}):n.push({text:(0,d.translate)("Ignore all",{comment:"Editor proofreading menu item"}),onclick:function(){i(t,o,!0)}}),x=new S({items:n,target:t}),x.renderTo(document.body),x.on("hide",function(){x=null})}var x,C,j,E,w=s.default.each,S=s.default.ui.Menu.extend({init:function(e){e.context="contextmenu",e.autofix=!1,this.throttledReposition=(0,u.throttle)(this.reposition.bind(this),200),this.on("autohide",function(e){return e.preventDefault()}),this.boundHideIfNotMarked=this.hideIfNotMarked.bind(this),this._super(e)},hideIfNotMarked:function(e){n(e.target)||this.hide()},hide:function(){this._super(),this.remove(),window.removeEventListener("scroll",this.throttledReposition),e.off("SpellcheckEnd click touchstart focusout",this.boundHideIfNotMarked)},postRender:function(){this._super(),this.reposition(),window.addEventListener("scroll",this.throttledReposition),e.on("SpellcheckEnd click touchstart focusout",this.boundHideIfNotMarked)},reposition:function(){var t=e.dom.getRoot(),n=s.default.DOM.getPos(e.getContentAreaContainer()),o=e.dom.getPos(this.settings.target);"BODY"===t.nodeName?(o.x-=t.ownerDocument.documentElement.scrollLeft||t.scrollLeft,o.y-=t.ownerDocument.documentElement.scrollTop||t.scrollTop):(o.x-=t.scrollLeft,o.y-=t.scrollTop),n.x+=o.x,n.y+=o.y,this.moveTo(n.x,n.y+this.settings.target.offsetHeight)}});e.on("init",function(){E=e.dom,t(),e.addCommand("mceWritingImprovementTool",function(t){var n,r=0;return"function"!=typeof t&&(t=function(){}),"undefined"!=typeof window.AtD_proofread_click_count&&window.AtD_proofread_click_count++,C?void a():void p("checkDocument",e.getContent({format:"raw"}),function(i,s){return e.setProgressState(),200===s.status&&"html"!==s.responseText.substr(1,4)&&s.responseXML?null!==s.responseXML.getElementsByTagName("message").item(0)?void e.windowManager.alert(s.responseXML.getElementsByTagName("message").item(0).firstChild.data,t(0)):(n=j.processXML(s.responseXML),n.count>0&&(r=o(n.errors)),r?(C=!0,e.fire("SpellcheckStart")):e.windowManager.alert((0,d.translate)("No writing errors were found.",{comment:"Editor proofreading success prompt"})),void t(r)):void e.windowManager.alert((0,d.translate)("There was a problem communicating with the Proofreading service. Try again in one minute.",{comment:"Editor proofreading error"}),t(0))})}),e.settings.content_css!==!1&&E.addStyle(".hiddenSpellError{border-bottom:2px solid red;cursor:default;}.hiddenGrammarError{border-bottom:2px solid green;cursor:default;}.hiddenSuggestion{border-bottom:2px solid blue;cursor:default;}"),e.on("click",function(t){n(t.target)&&(t.preventDefault(),e.selection.select(t.target),_(t.target))})}),function(){function t(){var e=g.default.get(b);e&&j.setIgnoreStrings(e)}e.getParam("atd_ignore_enable")&&(void 0===g.default.getAll()&&m.default.fetch(),e.on("init",function(){g.default.on("change",t)}),e.on("remove",function(){g.default.off("change",t)}))}(),e.on("SpellcheckStart SpellcheckEnd",function(t){e.contentDocument.body.spellcheck="spellcheckend"===t.type,e.contentDocument.body.spellcheck||(e.contentDocument.body.focus(),e.contentDocument.body.blur())}),e.addMenuItem("spellchecker",{text:(0,d.translate)("Proofread Writing",{comment:"Editor proofreading toolbar tooltip"}),context:"tools",cmd:"mceWritingImprovementTool",onPostRender:function(){var t=this;e.on("SpellcheckStart SpellcheckEnd",function(){t.active(C)})}}),e.addButton("spellchecker",{tooltip:(0,d.translate)("Proofread Writing",{comment:"Editor proofreading button tooltip"}),cmd:"mceWritingImprovementTool",onPostRender:function(){var t=this;e.on("SpellcheckStart SpellcheckEnd",function(){t.active(C)})}}),e.on("remove",function(){x&&(x.remove(),x=null)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("AtD",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/querystring-es3/index.js"),l=o(a),u=n("./node_modules/lodash/lodash.js"),d=n("./node_modules/i18n-calypso/index.js"),c=n("./client/components/tinymce/plugins/after-the-deadline/core.js"),f=o(c),p=n("./client/lib/preferences/actions.js"),m=o(p),h=n("./client/lib/preferences/store.js"),g=o(h),v="service.afterthedeadline.com",y=["en","pt","de","es","fr"],b="editorProofreadIgnore";e.exports=t.default},"./client/components/tinymce/plugins/calypso-alert/alert.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/components/dialog/index.jsx"),_=o(b),x=n("./client/components/forms/form-button/index.jsx"),C=o(x),j=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.splitMessage=function(){var e=o.props.message.split("\n\n");return e.map(function(e,t){return y.default.createElement("p",{key:"alert-"+t},e)})},o.getButtons=function(){return[y.default.createElement(C.default,{isPrimary:!1,"aria-label":o.props.translate("Dismiss alert message"),onClick:o.props.onClose},o.props.translate("OK"))]},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement(_.default,{isVisible:this.props.isVisible,additionalClassNames:"editor-alert-modal",onClose:this.props.onClose,buttons:this.getButtons()},this.splitMessage())}}]),t}(y.default.Component);j.displayName="Alert",j.propTypes={isVisible:h.default.bool.isRequired,onClose:h.default.func.isRequired,message:h.default.string.isRequired},t.default=(0,g.localize)(j),e.exports=t.default},"./client/components/tinymce/plugins/calypso-alert/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=void 0;e.on("init",function(){t=document.createElement("div"),t.setAttribute("class","alert-container"),e.getContainer().appendChild(t),e.windowManager.alert=function(n,o,r){function i(){s("hide"),"function"==typeof o?o.call(r||e.windowManager):e.focus()}function s(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";l.default.render(d.default.createElement(f.default,{isVisible:"show"===o,onClose:i,message:e.editorManager.i18n.translate(n)}),t)}s("show")},e.notificationManager.open=function(t){e.windowManager.alert(t.text)}}),e.on("remove",function(){l.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/react-dom/index.js"),l=o(a),u=n("./node_modules/react/react.js"),d=o(u),c=n("./client/components/tinymce/plugins/calypso-alert/alert.jsx"),f=o(c);t.default=function(){s.default.PluginManager.add("wpcom/calypsoalert",r)},e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-edit-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/gridicons/build/index.js"),j=o(C),E=n("./client/components/button/index.jsx"),w=o(E),S=n("./client/components/popover/index.jsx"),k=o(S),T=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.state={showTooltip:!1},e.handleMouseEnter=e.handleMouseEnter.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"handleMouseEnter",value:function(){this.setState({showTooltip:!0})}},{key:"handleMouseLeave",value:function(){this.setState({showTooltip:!1})}},{key:"render",value:function(){var e=this.props,t=e.expanded,n=e.translate,o=(0,b.default)("editor-contact-form-modal-field__edit",{"is-expanded":t});return v.default.createElement("div",{className:"editor-contact-form-modal-field__edit-wrapper foldable-card__expand"},v.default.createElement(w.default,{className:"editor-contact-form-modal-field__edit-wrapper-button",ref:"editField",borderless:!0,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},v.default.createElement(j.default,{icon:"pencil",className:o})),v.default.createElement(k.default,{isVisible:this.state.showTooltip,context:this.refs&&this.refs.editField,onClose:x.noop,position:"bottom",className:"popover tooltip is-dialog-visible"},n("Edit Field",{context:"button tooltip"})))}}]),t}(g.PureComponent);T.propTypes={expanded:h.default.bool.isRequired},t.default=(0,_.localize)(T),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/components/tinymce/plugins/contact-form/dialog/locales.js"),_=o(b),x=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),
o.getLegend=function(){if(o.props.options){var e=o.props.options.split(",").length;return o.props.required?o.props.translate('Required field "%(fieldName)s" with %(numOption)d option','Required field "%(fieldName)s" with %(numOption)d options',{count:e,args:{fieldName:(0,_.default)(o.props.type),numOption:e},comment:"Explains to the user the field settings. If required, type, and how many options it has."}):o.props.translate('Optional field "%(fieldName)s" with %(numOption)d option','Optional field "%(fieldName)s" with %(numOption)d options',{count:e,args:{fieldName:(0,_.default)(o.props.type),numOption:e},comment:"Explains to the user the field settings. If required, type, and how many options it has."})}return o.props.required?o.props.translate('Required field "%(fieldName)s"',{args:{fieldName:(0,_.default)(o.props.type)},comment:"Explain to the user the field settings for fields other than dropdown and select list."}):o.props.translate('Optional field "%(fieldName)s"',{args:{fieldName:(0,_.default)(o.props.type)},comment:"Explain to the user the field settings for fields other than dropdown and select list."})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement("div",null,y.default.createElement("div",null,this.props.label),y.default.createElement("div",null,y.default.createElement("small",null,this.getLegend())))}}]),t}(y.default.Component);x.displayName="ContactFormDialogFieldHeader",x.propTypes={label:h.default.string.isRequired,type:h.default.string.isRequired,options:h.default.string,required:h.default.bool},t.default=(0,g.localize)(x),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react/react.js"),_=o(b),x=n("./client/components/empty-content/index.jsx"),C=o(x),j=n("./client/components/tinymce/plugins/contact-form/dialog/field.jsx"),E=o(j),w=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this;return this.props.fields.length>0?_.default.createElement("div",{className:"editor-contact-form-modal-fields"},this.props.fields.map(function(t,n){return _.default.createElement(E.default,(0,i.default)({key:n},t,{onRemove:function(){return e.props.onFieldRemove(n)},onUpdate:function(t){return e.props.onFieldUpdate(n,t)}}))})):_.default.createElement(C.default,{title:null,line:this.props.translate("An empty form is no fun! Go ahead and add some fields!"),action:this.props.translate("Add New Field"),actionCallback:this.props.onFieldAdd,isCompact:!0})}}]),t}(_.default.Component);w.displayName="ContactFormDialogFieldList",w.propTypes={fields:v.default.array.isRequired,onFieldAdd:v.default.func.isRequired,onFieldRemove:v.default.func.isRequired,onFieldUpdate:v.default.func.isRequired},t.default=(0,y.localize)(w),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field-remove-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/gridicons/build/index.js"),_=o(b),x=n("./client/components/button/index.jsx"),C=o(x),j=n("./client/components/popover/index.jsx"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={showTooltip:!1},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this;return y.default.createElement("div",null,y.default.createElement(C.default,{ref:"removeField",borderless:!0,onMouseEnter:function(){return e.setState({showTooltip:!0})},onMouseLeave:function(){return e.setState({showTooltip:!1})},onClick:this.props.onRemove},y.default.createElement(_.default,{icon:"trash",className:"editor-contact-form-modal-field__remove"})),y.default.createElement(E.default,{isVisible:this.state.showTooltip,context:this.refs&&this.refs.removeField,onClose:function(){},position:"bottom",className:"popover tooltip is-dialog-visible"},this.props.translate("Remove Field",{context:"button tooltip"})))}}]),t}(y.default.PureComponent);w.displayName="ContactFormDialogFieldRemoveButton",w.propTypes={onRemove:h.default.func.isRequired},t.default=(0,g.localize)(w),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/field.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/lodash/lodash.js"),_=n("./client/components/tinymce/plugins/contact-form/dialog/field-header.jsx"),x=o(_),C=n("./client/components/foldable-card/index.jsx"),j=o(C),E=n("./client/components/forms/form-fieldset/index.jsx"),w=o(E),S=n("./client/components/forms/form-label/index.jsx"),k=o(S),T=n("./client/components/forms/form-text-input/index.jsx"),P=o(T),I=n("./client/components/forms/form-checkbox/index.jsx"),R=o(I),N=n("./client/components/forms/form-input-validation/index.jsx"),M=o(N),D=n("./client/components/forms/form-setting-explanation/index.jsx"),O=o(D),A=n("./client/components/select-dropdown/index.jsx"),L=o(A),B=n("./client/components/select-dropdown/item.jsx"),F=o(B),z=n("./client/components/token-field/index.jsx"),U=o(z),H=n("./client/components/tinymce/plugins/contact-form/dialog/field-remove-button.jsx"),W=o(H),V=n("./client/components/tinymce/plugins/contact-form/dialog/field-edit-button.jsx"),q=o(V),G=n("./client/components/tinymce/plugins/contact-form/dialog/locales.js"),K=o(G),$=["checkbox","select","email","name","radio","text","textarea","url"],Y=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.renderOptions=function(){if("radio"===o.props.type||"select"===o.props.type){var e=o.props.options;e=e?e.split(","):[];var t=!e||0===e.length;return y.default.createElement(w.default,null,y.default.createElement(k.default,null,o.props.translate("Options")),y.default.createElement(U.default,{value:e,onChange:function(e){return o.props.onUpdate({options:e.join()})}}),t&&y.default.createElement(M.default,{isError:!0,text:o.props.translate("Options can not be empty.")}),y.default.createElement(O.default,null,"Insert an option and press enter."))}},o.onLabelChange=function(e){o.props.onUpdate({label:e.target.value})},o.handleCardOpen=function(){o.props.onUpdate({isExpanded:!0})},o.handleCardClose=function(){o.props.onUpdate({isExpanded:!1})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=!this.props.label,n=y.default.createElement(W.default,{onRemove:this.props.onRemove});return y.default.createElement(j.default,{header:y.default.createElement(x.default,(0,b.omit)(this.props,["onUpdate"])),summary:n,expandedSummary:n,expanded:this.props.isExpanded,onClose:this.handleCardClose,onOpen:this.handleCardOpen,actionButton:y.default.createElement(q.default,{expanded:!1}),actionButtonExpanded:y.default.createElement(q.default,{expanded:!0})},y.default.createElement(w.default,null,y.default.createElement(k.default,null,this.props.translate("Field Label")),y.default.createElement(P.default,{value:this.props.label,onChange:this.onLabelChange,isError:t}),t&&y.default.createElement(M.default,{isError:!0,text:this.props.translate("Field Label can not be empty.")})),y.default.createElement(w.default,null,y.default.createElement(k.default,null,this.props.translate("Field Type")),y.default.createElement(L.default,{selectedText:(0,K.default)(this.props.type)},$.map(function(t){return y.default.createElement(F.default,{key:"field-type-"+t,selected:e.props.type===t,onClick:function(){return e.props.onUpdate({type:t})}},(0,K.default)(t))}))),y.default.createElement(w.default,null,y.default.createElement(k.default,null,y.default.createElement(R.default,{checked:this.props.required,onChange:function(){return e.props.onUpdate({required:!e.props.required})}}),y.default.createElement("span",null,this.props.translate("Required")))),this.renderOptions())}}]),t}(y.default.PureComponent);Y.displayName="ContactFormDialogField",Y.propTypes={label:h.default.string.isRequired,type:h.default.string.isRequired,options:h.default.string,required:h.default.bool,onUpdate:h.default.func.isRequired,onRemove:h.default.func.isRequired,isExpanded:h.default.bool},t.default=(0,g.localize)(Y),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/react-redux/es/index.js"),_=n("./client/components/dialog/index.jsx"),x=o(_),C=n("./client/components/forms/form-button/index.jsx"),j=o(C),E=n("./client/components/tinymce/plugins/contact-form/dialog/settings.jsx"),w=o(E),S=n("./client/components/tinymce/plugins/contact-form/dialog/navigation.jsx"),k=o(S),T=n("./client/components/tinymce/plugins/contact-form/dialog/field-list.jsx"),P=o(T),I=n("./client/state/current-user/selectors.js"),R=n("./client/lib/posts/post-edit-store.js"),N=o(R),M=n("./client/components/tinymce/plugins/contact-form/dialog/validations.js"),D=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getActionButtons=function(){var e=(0,M.validateFormFields)(o.props.contactForm.fields)&&(0,M.validateSettingsToEmail)(o.props.contactForm.to),t=[y.default.createElement(j.default,{key:"save","data-e2e-button":"save",disabled:!e,onClick:o.props.onInsert},o.props.isEdit?o.props.translate("Update"):o.props.translate("Insert")),y.default.createElement(j.default,{key:"cancel",isPrimary:!1,"data-e2e-button":"cancel",onClick:o.props.onClose},o.props.translate("Cancel"))];return"fields"===o.props.activeTab?[y.default.createElement("div",{key:"secondaryActions",className:"editor-contact-form-modal__secondary-actions"},y.default.createElement(j.default,{key:"add",isPrimary:!1,"data-e2e-button":"add",onClick:o.props.onFieldAdd},o.props.translate("Add New Field")))].concat(t):t},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.activeTab,n=e.currentUser.email,o=e.post,r=o.title,i=o.type,s=e.contactForm,a=s.to,l=s.subject,u=s.fields,d=e.showDialog,c=e.onChangeTabs,f=e.onClose,p=e.onFieldAdd,m=e.onFieldUpdate,h=e.onFieldRemove,g=e.onSettingsUpdate,v="fields"===t?y.default.createElement(P.default,{fields:u,onFieldAdd:p,onFieldRemove:h,onFieldUpdate:m}):y.default.createElement(w.default,{to:a,subject:l,email:n,title:r,postType:i,onUpdate:g});return y.default.createElement(x.default,{isVisible:d,onClose:f,buttons:this.getActionButtons(),additionalClassNames:"editor-contact-form-modal"},y.default.createElement(k.default,{activeTab:t,onChangeTabs:c,fieldCount:u.length}),v)}}]),t}(y.default.Component);D.displayName="ContactFormDialog",D.propTypes={activeTab:h.default.oneOf(["fields","settings"]).isRequired,showDialog:h.default.bool.isRequired,isEdit:h.default.bool.isRequired,contactForm:h.default.shape({to:h.default.string,subject:h.default.string,fields:h.default.array.isRequired}).isRequired,onInsert:h.default.func.isRequired,onChangeTabs:h.default.func.isRequired,onClose:h.default.func.isRequired,onFieldAdd:h.default.func.isRequired,onFieldRemove:h.default.func.isRequired,onFieldUpdate:h.default.func.isRequired,onSettingsUpdate:h.default.func.isRequired},t.default=(0,b.connect)(function(e){return{post:N.default.get()||{},currentUser:(0,I.getCurrentUser)(e),contactForm:e.ui.editor.contactForm}})((0,g.localize)(D)),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/locales.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.hasOwnProperty(e)?s[e].call():null};var r=n("./node_modules/i18n-calypso/index.js"),i=o(r),s={name:function(){return i.default.translate("Name")},email:function(){return i.default.translate("Email Address")},checkbox:function(){return i.default.translate("Checkbox")},select:function(){return i.default.translate("Dropdown")},radio:function(){return i.default.translate("Radio Button")},text:function(){return i.default.translate("Text")},textarea:function(){return i.default.translate("Text Area")},url:function(){return i.default.translate("Web Address")}};e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/navigation.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/components/section-nav/index.jsx"),_=o(b),x=n("./client/components/section-nav/tabs.jsx"),C=o(x),j=n("./client/components/section-nav/item.jsx"),E=o(j),w=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=["fields","settings"];return y.default.createElement(_.default,{selectedText:"Form Fields"},y.default.createElement(C.default,null,t.map(function(t){return y.default.createElement(E.default,{key:"contact-form-"+t,selected:e.props.activeTab===t,count:"fields"===t?e.props.fieldCount:null,onClick:function(){return e.props.onChangeTabs(t)}},"fields"===t?e.props.translate("Form Fields"):e.props.translate("Settings"))})))}}]),t}(y.default.Component);w.displayName="ContactFormDialogNavigation",w.propTypes={fieldCount:h.default.number.isRequired,activeTab:h.default.oneOf(["fields","settings"]).isRequired,onChangeTabs:h.default.func.isRequired},t.default=(0,g.localize)(w),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/settings.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/components/section-header/index.jsx"),_=o(b),x=n("./client/components/card/index.jsx"),C=o(x),j=n("./client/components/forms/form-fieldset/index.jsx"),E=o(j),w=n("./client/components/forms/form-label/index.jsx"),S=o(w),k=n("./client/components/forms/form-text-input/index.jsx"),T=o(k),P=n("./client/components/forms/form-input-validation/index.jsx"),I=o(P),R=n("./client/components/forms/form-setting-explanation/index.jsx"),N=o(R),M=n("./client/components/tinymce/plugins/contact-form/dialog/validations.js"),D=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onToChange=function(e){o.props.onUpdate({to:e.target.value})},o.onSubjectChange=function(e){o.props.onUpdate({subject:e.target.value})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=!(0,M.validateSettingsToEmail)(this.props.to);return y.default.createElement("div",{className:"editor-contact-form-modal-settings"},y.default.createElement(_.default,{label:this.props.translate("Contact Form Notification Settings")}),y.default.createElement(C.default,null,y.default.createElement("p",null,"post"===this.props.postType?this.props.translate("If you don’t make any changes here, feedback will be sent to the author of the post and the subject will be the name of this post."):this.props.translate("If you don’t make any changes here, feedback will be sent to the author of the page and the subject will be the name of this page.")),y.default.createElement(E.default,null,y.default.createElement(S.default,null,this.props.translate("Enter your email address")),y.default.createElement(T.default,{value:this.props.to,placeholder:this.props.email,isError:e,onChange:this.onToChange}),e&&y.default.createElement(I.default,{isError:!0,text:this.props.translate("%(email)s is not a valid email address.",{args:{email:this.props.to}})}),y.default.createElement(N.default,null,this.props.translate("You can enter multiple email addresses in the Email address field, and separate them with commas. A notification email will then be sent to each email address."))),y.default.createElement(E.default,null,y.default.createElement(S.default,null,this.props.translate("What should the subject line be?")),y.default.createElement(T.default,{value:this.props.subject,placeholder:this.props.title,onChange:this.onSubjectChange}))))}}]),t}(y.default.Component);D.displayName="ContactFormDialogFormSettings",D.propTypes={to:h.default.string,subject:h.default.string,email:h.default.string,title:h.default.string,onUpdate:h.default.func.isRequired},t.default=(0,g.localize)(D),e.exports=t.default},"./client/components/tinymce/plugins/contact-form/dialog/validations.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return!(!Array.isArray(e)||0===e.length)&&(0,s.every)(e,function(e){return"radio"!==e.type&&"select"!==e.type?!!e.label:!!e.label&&!!e.options})}function i(e){var t=e?e.split(",").map(function(e){return e.trim()}):[];return(0,s.every)(t,l.default.validate)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateFormFields=r,t.validateSettingsToEmail=i;var s=n("./node_modules/lodash/lodash.js"),a=n("./node_modules/email-validator/index.js"),l=o(a)},"./client/components/tinymce/plugins/contact-form/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/tinymce/tinymce.js"),i=o(r),s=n("./node_modules/i18n-calypso/index.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/react-dom/index.js"),c=n("./node_modules/react-dom/server.js"),f=n("./node_modules/gridicons/build/index.js"),p=o(f),m=n("./client/components/tinymce/plugins/contact-form/dialog/index.jsx"),h=o(m),g=n("./client/state/ui/editor/contact-form/actions.js"),v=n("./client/components/tinymce/plugins/contact-form/shortcode-utils.js"),y=n("./client/lib/react-helpers/index.js"),b=function(e){var t=void 0,n=e.getParam("redux_store");e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){(0,d.unmountComponentAtNode)(t),t.parentNode.removeChild(t),t=null}),e.addCommand("wpcomContactForm",function(o){function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fields";(0,y.renderWithReduxStore)((0,l.createElement)(h.default,{showDialog:"show"===o,activeTab:s,isEdit:i,onInsert:function(){var t=n.getState();e.execCommand("mceInsertContent",!1,(0,v.serialize)(t.ui.editor.contactForm)),r("hide")},onChangeTabs:function(e){r("show",e)},onClose:function(){n.dispatch((0,g.formClear)()),e.focus(),r("hide")},onFieldAdd:function(){n.dispatch((0,g.fieldAdd)())},onFieldRemove:function(e){n.dispatch((0,g.fieldRemove)(e))},onFieldUpdate:function(e,t){n.dispatch((0,g.fieldUpdate)(e,t))},onSettingsUpdate:function(e){n.dispatch((0,g.settingsUpdate)(e))}}),t,n)}var i=!1;o?(n.dispatch((0,g.formLoad)((0,v.deserialize)(o))),i=!0):n.dispatch((0,g.formClear)()),r()}),e.addButton("wpcom_add_contact_form",{classes:"btn wpcom-icon-button contact-form",title:a.default.translate("Add Contact Form"),cmd:"wpcomContactForm",onPostRender:function(){this.innerHtml((0,c.renderToStaticMarkup)(u.default.createElement("button",{type:"button",role:"presentation"},u.default.createElement(p.default,{icon:"mention"}))))}})};t.default=function(){i.default.PluginManager.add("wpcom/contactform",b)},e.exports=t.default},"./client/components/tinymce/plugins/contact-form/shortcode-utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.to,n=e.subject,o=e.fields,r=void 0===o?[]:o,i=r.map(function(e){var t=e.label,n=e.type,o=e.options,r=e.required;if(t&&n){var i={tag:"contact-field",type:"self-closing",attrs:(0,s.pickBy)({label:t,type:n,options:o})};return r&&(i.attrs.required=1),l.default.stringify(i)}}).join("");return l.default.stringify({tag:"contact-form",type:"closed",content:i,attrs:(0,s.pickBy)({to:t,subject:n})})}function i(e){if(!e)return null;var t=l.default.parse(e);return t?function(e){var t=e.attrs;t=void 0===t?{}:t;var n=t.named;n=void 0===n?{}:n;for(var o=n.to,r=n.subject,i=e.content,a=[],u=void 0;i&&(u=l.default.next("contact-field",i));){if("attrs"in u.shortcode){var d=u.shortcode.attrs.named,c=d.label,f=d.type,p=d.options,m=d.required,h=(0,s.pickBy)({label:c,type:f,options:p,required:m});"required"in h&&(h.required=!0),a.push(h)}i=i.slice(u.index+u.content.length)}return(0,s.pickBy)({to:o,subject:r,fields:a})}(t):{}}Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=r,t.deserialize=i;var s=n("./node_modules/lodash/lodash.js"),a=n("./client/lib/shortcode/index.js"),l=o(a)},"./client/components/tinymce/plugins/editor-button-analytics/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t,n){return(0,d.default)(t.target,n,!0,e.container)}function n(e){if(t(e,".mce-colorbutton")&&!t(e,".mce-open"))(0,p.recordTinyMCEButtonClick)("forecolor_pick_current");else if(t(e,".mce-listbox"))(0,p.recordTinyMCEButtonClick)("format_dropdown");else if((0,d.default)(e.target,".mce-menu-item",!0)){var n=m.get(),o=n?n.localeSlug:"en";if("en"===o){var r=(0,d.default)(e.target,".mce-menu-item",!0).textContent,i=r.toLowerCase().trim().replace(/[^a-z0-9]+/g,"_");(0,p.recordTinyMCEButtonClick)("format_dropdown_"+i)}else(0,p.recordTinyMCEButtonClick)("format_dropdown_non_english")}}(0,s.default)(e.buttons).forEach(function(n){var o=e.buttons[n],r=o.onPostRender;o.onPostRender=function(){this.on("click",function(e){var o=n.replace(/^(wp|wpcom)_/,"");"forecolor"===n&&(o=t(e,".mce-open")?"forecolor_toggle":t(e,".mce-custom-color-btn")?"forecolor_pick_custom":t(e,".mce-colorbtn-trans")?"forecolor_remove":"forecolor_pick_color"),(0,p.recordTinyMCEButtonClick)(o)}),"function"==typeof r&&r.apply(this,Array.prototype.slice.call(arguments))}}),e.on("init",function(){e.dom.bind(document.body,"click",n)}),e.on("remove",function(){e.dom.unbind(document.body,"click",n)})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i);t.default=function(){l.default.PluginManager.add("wpcom/editorbuttonanalytics",r)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a),u=n("./node_modules/component-closest/index.js"),d=o(u),c=n("./client/lib/user/index.js"),f=o(c),p=n("./client/lib/posts/stats.js"),m=(0,f.default)();e.exports=t.default},"./client/components/tinymce/plugins/embed-reversal/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t,n){if(n&&e){var o=!e.isHidden();if(o){var r=!0,i=!1,a=void 0;try{for(var l,d=(0,s.default)(e.getBody().querySelectorAll("*"));!(r=(l=d.next()).done);r=!0){var f=l.value;if((0,u.includes)(f.textContent,t)){f.textContent=f.textContent.replace(t,n.result),e.undoManager.add();break}}}catch(e){i=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw a}}}else{var p=c.default.getRawContent();if(!(0,u.includes)(p,t))return;p=p.replace(t,n.result),e.fire("SetTextAreaContent",{content:p})}e.fire("change")}}function n(e){var n=void 0;e.clipboardData?n=e.clipboardData.getData("text/plain"):window.clipboardData&&(n=window.clipboardData.getData("Text")),n&&/^<.*>$/.test(n)&&p.default.undocumented().site((0,m.getSelectedSiteId)(o.getState())).embedReversal(n).then((0,u.partial)(t,n)).catch(function(){})}var o=e.getParam("redux_store");if(o){e.on("paste",n);var r=e.getParam("textarea");r&&r.addEventListener("paste",n)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/get-iterator.js"),s=o(i),a=n("./node_modules/tinymce/tinymce.js"),l=o(a),u=n("./node_modules/lodash/lodash.js"),d=n("./client/lib/posts/post-edit-store.js"),c=o(d),f=n("./client/lib/wp/browser.js"),p=o(f),m=n("./client/state/ui/selectors.js");t.default=function(){l.default.PluginManager.add("wpcom/embedreversal",r)},e.exports=t.default},"./client/components/tinymce/plugins/embed/dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedDialog=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./client/components/button/index.jsx"),_=o(b),x=n("./client/components/dialog/index.jsx"),C=o(x),j=n("./client/components/forms/form-text-input/index.jsx"),E=o(j),w=t.EmbedDialog=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={embedUrl:o.props.embedUrl},o.componentWillReceiveProps=function(e){o.setState({embedUrl:e.embedUrl})},o.onChangeEmbedUrl=function(e){o.setState({embedUrl:e.target.value})},o.onUpdate=function(){o.props.onUpdate(o.state.embedUrl)},o.onKeyDownEmbedUrl=function(e){"Enter"===e.key&&(e.preventDefault(),o.onUpdate())},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.translate,t=[v.default.createElement(_.default,{onClick:this.props.onCancel},e("Cancel")),v.default.createElement(_.default,{primary:!0,onClick:this.onUpdate},e("Update"))];return v.default.createElement(C.default,{autoFocus:!1,buttons:t,additionalClassNames:"embed__modal",isVisible:this.props.isVisible,onCancel:this.props.onCancel,onClose:this.props.onCancel},v.default.createElement("h3",{className:"embed__title"},e("Embed URL")),v.default.createElement(E.default,{autoFocus:!0,className:"embed__url",defaultValue:this.state.embedUrl,onChange:this.onChangeEmbedUrl,onKeyDown:this.onKeyDownEmbedUrl}))}}]),t}(v.default.Component);w.propTypes={embedUrl:h.default.string,isVisible:h.default.bool,onCancel:h.default.func.isRequired,onUpdate:h.default.func.isRequired,translate:h.default.func.isRequired},w.defaultProps={embedUrl:"",isVisible:!1},t.default=(0,y.localize)(w)},"./client/components/tinymce/plugins/embed/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-dom/index.js"),a=o(s),l=n("./node_modules/tinymce/tinymce.js"),u=o(l),d=n("./client/components/tinymce/plugins/embed/dialog.jsx"),c=o(d),f=function(e){var t=void 0,n=function n(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=e.selection.getNode(),s={embedUrl:r.innerText||r.textContent,isVisible:o,onCancel:function(){return n(!1)},onUpdate:function(t){e.execCommand("mceInsertContent",!1,t),n(!1)}};a.default.render(i.default.createElement(c.default,s),t),o||e.focus()};e.addCommand("embedDialog",function(){return n()}),e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){a.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null})};t.default=function(){u.default.PluginManager.add("embed",f)},e.exports=t.default},"./client/components/tinymce/plugins/insert-menu/menu-items.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.menuItems=t.GridiconButton=void 0;var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/gridicons/build/index.js"),a=o(s),l=n("./node_modules/i18n-calypso/index.js"),u=o(l),d=n("./client/config/index.js"),c=o(d),f=t.GridiconButton=function(e){var t=e.icon,n=e.label,o=e.e2e;return i.default.createElement("div",{className:"wpcom-insert-menu__menu"},i.default.createElement(a.default,{className:"wpcom-insert-menu__menu-icon",icon:t}),i.default.createElement("span",{className:"wpcom-insert-menu__menu-label","data-e2e-insert-type":o},n))},p=t.menuItems=[{
name:"insert_media_item",item:i.default.createElement(f,{icon:"add-image",label:u.default.translate("Media"),e2e:"media"}),cmd:"wpcomAddMedia"}];c.default.isEnabled("external-media")&&p.push({name:"insert_from_google",item:i.default.createElement(f,{icon:"add-image",label:u.default.translate("Media from Google"),e2e:"google-media"}),cmd:"googleAddMedia"}),p.push({name:"insert_contact_form",item:i.default.createElement(f,{icon:"mention",label:u.default.translate("Contact Form"),e2e:"contact-form"}),cmd:"wpcomContactForm"}),c.default.isEnabled("simple-payments")&&p.push({name:"insert_payment_button",item:i.default.createElement(f,{icon:"money",label:u.default.translate("Payment Button"),e2e:"payment-button"}),cmd:"simplePaymentsButton"})},"./client/components/tinymce/plugins/insert-menu/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/tinymce/tinymce.js"),u=o(l),d=n("./node_modules/react-dom/server.js"),c=n("./node_modules/i18n-calypso/index.js"),f=o(c),p=n("./client/components/tinymce/plugins/insert-menu/menu-items.jsx"),m=function(e){p.menuItems.forEach(function(t){return e.addMenuItem(t.name,{classes:"wpcom-insert-menu__menu-item",cmd:t.cmd,onPostRender:function(){this.innerHtml((0,d.renderToString)(t.item))}})}),e.addButton("wpcom_insert_menu",{type:"menubutton",title:f.default.translate("Add content"),classes:"btn wpcom-insert-menu insert-menu",menu:p.menuItems.map(function(t){var n=t.name;return e.menuItems[n]}),onPostRender:function(){var e=(0,i.default)(this.$el[0].children,1),t=e[0];t.innerHTML=(0,d.renderToString)(a.default.createElement(p.GridiconButton,{icon:"add-outline",label:f.default.translate("Add")}))}})};t.default=function(){u.default.PluginManager.add("wpcom/insertmenu",m)},e.exports=t.default},"./client/components/tinymce/plugins/markdown/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){var t=e.target;(0,s.default)(t.schema.elements).forEach(function(e){t.schema.elements[e].attributes.markdown={},t.schema.elements[e].attributesOrder.push("markdown")})}e.on("preinit",t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i);t.default=function(){l.default.PluginManager.add("wpcom/markdown",r)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a);e.exports=t.default},"./client/components/tinymce/plugins/media/advanced/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=r(i);t.default=function(e){function t(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments[1];return u||(u=e.getContainer().appendChild(document.createElement("div"))),t?void(0,j.renderWithReduxStore)(l.default.createElement(C.default,(0,s.default)({visible:t,item:n},{onClose:o,insertMedia:i})),u,a):r()}function n(e){t(!0,e)}function o(){t(!1)}function r(){u&&d.default.unmountComponentAtNode(u)}function i(t){e.execCommand("mceInsertContent",!1,t),o()}var a=e.getParam("redux_store");if(_.default.isEnabled("post-editor/media-advanced")&&a){var u=void 0;e.addButton("wp_img_advanced",{tooltip:m.default.translate("Edit",{context:"verb"}),classes:"toolbar-segment-start",onPostRender:function(){this.innerHtml(f.default.renderToStaticMarkup(l.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},l.default.createElement(g.default,{icon:"pencil",size:18}))))},onClick:function(){var t=e.selection.getStart(),o=y.deserialize(t);n(o)}}),e.on("remove",r)}};var a=n("./node_modules/react/react.js"),l=r(a),u=n("./node_modules/react-dom/index.js"),d=r(u),c=n("./node_modules/react-dom/server.js"),f=r(c),p=n("./node_modules/i18n-calypso/index.js"),m=r(p),h=n("./node_modules/gridicons/build/index.js"),g=r(h),v=n("./client/lib/media-serialization/index.js"),y=o(v),b=n("./client/config/index.js"),_=r(b),x=n("./client/post-editor/editor-media-advanced/index.jsx"),C=r(x),j=n("./client/lib/react-helpers/index.js");e.exports=t.default},"./client/components/tinymce/plugins/media/drop-zone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/create-react-class/index.js"),c=o(d),f=n("./node_modules/lodash/lodash.js"),p=n("./client/lib/analytics/index.js"),m=o(p),h=n("./client/lib/mixins/data-observe/index.js"),g=o(h),v=n("./client/lib/posts/actions.js"),y=o(v),b=n("./client/my-sites/media-library/drop-zone.jsx"),_=o(b),x=n("./client/lib/media/actions.js"),C=o(x),j=n("./client/lib/media/utils.js"),E=o(j),w=n("./client/lib/media/library-selected-store.js"),S=o(w),k=n("./client/lib/media/validation-store.js"),T=o(k),P=n("./client/post-editor/media-modal/markup.js"),I=o(P);t.default=(0,c.default)({displayName:"TinyMCEDropZone",mixins:[(0,g.default)("sites")],propTypes:{editor:a.default.object,sites:a.default.object,onInsertMedia:a.default.func,onRenderModal:a.default.func},getInitialState:function(){return{isDragging:!1}},getDefaultProps:function(){return{onInsertMedia:f.noop,onRenderModal:f.noop}},componentDidMount:function(){var e=this.props.editor;e.dom.bind(e.getWin(),"dragenter",this.redirectEditorDragEvent),window.addEventListener("dragleave",this.stopDragging),e.dom.bind(e.getWin(),"dragleave",this.stopDragging),e.dom.bind(e.getWin(),"dragover",this.fakeDragEnterIfNecessary)},componentWillUnmount:function(){var e=this.props.editor;e.dom.unbind(e.getWin(),"dragenter",this.redirectEditorDragEvent),window.removeEventListener("dragleave",this.stopDragging),e.dom.unbind(e.getWin(),"dragleave",this.stopDragging),e.dom.unbind(e.getWin(),"dragover",this.fakeDragEnterIfNecessary)},redirectEditorDragEvent:function(e){window.dispatchEvent(new CustomEvent(e.type,{detail:e})),this.setState({isDragging:!0})},fakeDragEnterIfNecessary:function(e){this.state.isDragging||this.redirectEditorDragEvent((0,i.default)({},e,{type:"dragenter"}))},stopDragging:function(){this.setState({isDragging:!1})},insertMedia:function(){var e=this.props,t=e.sites,n=e.onInsertMedia,o=e.onRenderModal,r=t.getSelectedSite();if(r){var i=S.default.getAll(r.ID),s=1===i.length&&"image"===E.default.getMimePrefix(i[0]);s&&!T.default.hasErrors(r.ID)?(i[0].transient&&y.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),n(I.default.get(r,i[0])),C.default.setLibrarySelectedItems(r.ID,[])):o({visible:!0}),m.default.mc.bumpStat("editor_upload_via","editor_drop")}},render:function(){var e=this.props.sites,t=e.getSelectedSite();return t?u.default.createElement(_.default,{site:t,fullScreen:!1,trackStats:!1,onAddMedia:this.insertMedia}):null}}),e.exports=t.default},"./client/components/tinymce/plugins/media/plugin.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){e.execCommand("mceInsertContent",!1,t)}function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=M();if(s){if(r({visible:!n.visible}),k.modal||(k.modal=e.getContainer().appendChild(document.createElement("div"))),n.visible&&!i.preserveFocus&&e.focus(!1),n.visible){var l=i.view,u=void 0===l?ne.ModalViews.LIST:l;w.dispatch((0,te.setEditorMediaModalView)(u))}(0,oe.renderWithReduxStore)(p.default.createElement(W.default,(0,a.default)({},n,{onClose:o.bind(null,{visible:!1}),onInsertMedia:function(e){t(e),o({visible:!1})}})),k.modal,w)}}function r(n){var r=n.visible;return r?(k.dropzone||(k.dropzone=document.createElement("div"),e.getContainer().parentNode.insertBefore(k.dropzone,e.getContainer())),void(0,oe.renderWithReduxStore)(p.default.createElement(K.default,{editor:e,sites:se,onInsertMedia:t,onRenderModal:o}),k.dropzone,w)):void(k.dropzone&&u.default.unmountComponentAtNode(k.dropzone))}function i(){var t=e.selection.getStart();"IMG"!==t.nodeName&&(t=t.querySelector("img")),t&&(e.selection.select(t),e.selection.controlSelection.showResizeRect(t))}function s(e){r({visible:"dragend"===e.type})}function l(){var e=M();e&&D.default.clearValidationErrors(e.ID)}function d(t){var n=e.selection.getStart(),o=(0,L.deserialize)(n),r=M();if(o&&r){var s=e.dom.getParent(n,".mceTemp");s&&(e.selection.select(s),o.media.caption=e.dom.$(".wp-caption-dd",s).text());var a=(0,g.assign)({},U.default.get(r.ID,o.media.ID));delete a.caption,a=(0,g.assign)({},o.media,a);var l=ie.map(function(e){return B(A.default.getThumbnailSizeDimensions(e,r),a)}),u=ie.indexOf(o.appearance.size),d=u!==-1?l[u]:B(o.media,a),c=function(e,n){return!(l[n]>1)&&(t>0?l[n]>d:l[n]<d)},f=t>0?g.find:g.findLast,p=f(ie,c)||ie[ie.length-1],m=F.default.get(r,a,(0,g.assign)(o.appearance,{size:p}));e.selection.setContent(m),i(),e.nodeChanged()}}function f(e,t){var n=M();if(t.element&&"IMG"===t.element.nodeName&&n){var o=(0,L.deserialize)(t.element),r=(0,g.assign)({width:1/0,height:1/0},U.default.get(n.ID,o.media.ID)),i=B(o.media,r),s=!!o.media.transient;if(this.classes.toggle("hidden",s),e){var a=i>=1;this.disabled(a)}else{var l=B(A.default.getThumbnailSizeDimensions(ie[0],n),r),u=i<=l||ie[0]===o.appearance.size;this.disabled(u)}}}function m(e){"IMG"===e.target.nodeName&&P()}function h(e){var t=M();t&&(e.content.match(re)||[]).forEach(function(e){var n=(0,L.deserialize)(e);n.media.ID&&!U.default.get(t.ID,n.media.ID)&&setTimeout(function(){D.default.fetch(t.ID,n.media.ID)},0)})}function v(t){if(t.detail&&!(t.detail<2)){var n=(0,C.default)(t.target,".wp-caption-dd",!0);n&&e.selection.select(n)}}function b(t){if(8===t.keyCode||46===t.keyCode){var n=e.selection.getStart(!0);if(e.dom.hasClass(n,"wp-caption-dd")){var o=e.selection.getRng();(8===t.keyCode&&0===o.startOffset||46===t.keyCode&&n.textContent.length===o.endOffset)&&t.preventDefault()}}}function x(t){t||e.dom.select(".wp-caption-dd").forEach(function(t){if(!t.textContent.trim().length){var n=(0,C.default)(t,".wp-caption"),o=n.querySelector("img");e.dom.replace(o,n.parentNode)}})}function j(){var t=!1;return function(n){switch(n.type){case"touchstart":t=!1;break;case"touchmove":t=!0;break;case"touchend":t||"IMG"!==n.target.nodeName||(e.selection.select(n.target),n.preventDefault())}}}var w=e.getParam("redux_store");if(w){var S=w.getState,k={},P=void 0,R=void 0,M=function(){return(0,ee.getSelectedSite)(S())},O=function(){function e(e){return!!n[e]}function t(e){n[e]=!0,R()}var n={};return{isLoaded:e,onLoad:t}}();R=(0,g.debounce)(function(){var t=e.selection.getNode(),n=!1,o=0,r=void 0,s=void 0,l=M();if(l){var u=!e.isHidden();if(u)s=e.dom.select("img");else{if(r=I.default.getRawContent(),!r)return;s=r.match(re)||[]}s.forEach(function(t){var i=(0,L.deserialize)(t);if(i.media.ID){var s=U.default.get(l.ID,i.media.ID),a=!1,d=null;if(s&&"deleted"===s.status)return d=e.dom.getParent(t,"div.mceTemp"),e.$(d||t).remove(),void e.nodeChanged();if(s&&s.isDirty){if(!ae||ae.ID!==s.ID){ae=s;var c=e.dom.select("img.wp-image-"+s.ID);le=c.length}i.media.transient=!0,d=e.dom.getParent(t,".mceTemp"),d&&(s.caption=e.dom.$(".wp-caption-dd",d).text(),a=!0)}if(i.media.transient?(o++,n=!0,e.dom.$(t).toggleClass("is-transient",!0)):e.dom.$(t).toggleClass("is-transient",!1),!(!i.media.transient||s&&s.transient)||i.media.transient&&s&&s.isDirty&&s.transient){o--;var f=void 0;if(s){if(s.ID===i.media.ID&&s.URL===i.media.URL)return;var p=!1;s.isDirty&&(p=s.width<i.media.width||s.height<i.media.height);var m=(0,g.assign)({},s,i.media,(0,g.pick)(s,"ID","URL",p?"width":"",p?"height":""),{transient:!!s.transient}),h=(0,g.assign)({},i.appearance,{forceResize:!s.transient&&i.media.width&&i.media.width!==s.width});a||delete m.caption,f=F.default.get(l,m,h),a&&(f=e.wpSetImgCaption(f))}else q.default.error("An error occurred while uploading the file"),f="";var v={content:f,mode:u?"tinymce":"html"};e.fire("BeforeSetWpcomMedia",v);var y=v.resizedImageUrl||s.URL;if(!O.isLoaded(y)){var b=new Image;return b.src=y,b.onload=O.onLoad.bind(null,y),b.onerror=b.onload,void o++}var _="";a&&d.outerHTML?(_=d.outerHTML,d.outerHTML=v.content):t.outerHTML?(_=t.outerHTML,t.outerHTML=v.content):_=t,r&&(r=r.replace(_,v.content)),e.undoManager.data=e.undoManager.data.map(function(e){return e.content=e.content.replace(_,v.content),e}),le>0&&(le-=1)}}}),!o&&I.default.isSaveBlocked("MEDIA_MODAL_TRANSIENT_INSERT")&&T.default.unblockSave("MEDIA_MODAL_TRANSIENT_INSERT"),n&&!o&&(u||e.fire("SetTextAreaContent",{content:r}),"IMG"===t.nodeName&&i(),e.fire("change")),ae&&ae.isDirty&&0===le&&(D.default.edit(l.ID,(0,a.default)({},ae,{isDirty:!1})),le=null)}}),e.addCommand("wpcomAddMedia",function(){l(),o({visible:!0})}),e.addCommand("googleAddMedia",function(){l(),o({visible:!0,source:"google_photos"})}),e.addButton("wpcom_add_media",{classes:"btn wpcom-icon-button media",cmd:"wpcomAddMedia",title:y.default.translate("Add Media"),onPostRender:function(){this.innerHtml(c.default.renderToStaticMarkup(p.default.createElement("button",{type:"button",role:"presentation",tabIndex:"-1"},p.default.createElement(E.default,{icon:"image-multiple",size:20}))))}}),e.addButton("wp_img_edit",{tooltip:y.default.translate("Edit",{context:"verb"}),classes:"toolbar-segment-start",icon:"dashicon dashicons-edit",onclick:function(){var t=M();if(t){var n=t.ID,r=e.selection.getNode(),i=r.className.match(/wp-image-(\d+)/),s=i&&parseInt(i[1],10);if(s){var a=U.default.get(n,s);D.default.clearValidationErrors(n),o({visible:!0,labels:{confirm:y.default.translate("Update",{context:"verb"})}},{view:ne.ModalViews.DETAIL}),D.default.setLibrarySelectedItems(n,[a])}}}}),e.addButton("wp_img_caption",{tooltip:y.default.translate("Caption",{context:"verb"}),icon:"dashicon dashicons-admin-comments",classes:"toolbar-segment-start toolbar-segment-end",stateSelector:".wp-caption",onclick:function(){var t=e.selection.getStart(),n=(0,L.deserialize)(t),o=M(),r=void 0;if(n&&o){var i=(0,C.default)(t,".wp-caption");if(i)return e.dom.replace(t,i.parentNode),e.selection.getStart()!==t&&e.selection.select(t),e.selection.controlSelection.showResizeRect(t),void e.nodeChanged();var s=U.default.get(o.ID,n.media.ID);r=s&&s.caption?s.caption:y.default.translate("Enter a caption"),["width","height"].forEach(function(e){null===t.getAttribute(e)&&n.media[e]&&t.setAttribute(e,n.media[e])});var a={width:n.media.width};n.media.ID&&(a.id="attachment_"+n.media.ID),n.appearance.align&&(a.align="align"+n.appearance.align);var l=_.default.stringify({tag:"caption",attrs:a,content:[t.outerHTML,r].join(" ")});e.selection.setContent(l),e.selection.select(e.selection.getStart().querySelector(".wp-caption-dd"),!0),e.selection.controlSelection.hideResizeRect(),this.rootControl.hide()}}});var B=function(e,t){var n=(0,a.default)({},t,e),o=n.width,r=n.height;return Math.min(o/t.width||1/0,r/t.height||1/0)};if(e.addButton("wpcom_img_size_decrease",{tooltip:y.default.translate("Decrease size"),classes:"toolbar-segment-start img-size-decrease",icon:"dashicon dashicons-minus",onPostRender:function(){e.on("wptoolbar",f.bind(this,!1))},onclick:function(){d(-1)}}),e.addButton("wpcom_img_size_increase",{tooltip:y.default.translate("Increase size"),classes:"toolbar-segment-end img-size-increase",icon:"dashicon dashicons-plus",onPostRender:function(){e.on("wptoolbar",f.bind(this,!0))},onclick:function(){d(1)}}),e.addCommand("WP_Medialib",function(){o({visible:!0})}),e.addCommand("wpcomEditGallery",function(e){var t=M();if(t){var n=_.default.parse(e);"gallery"===n.tag&&(n=(0,g.assign)({},N.GalleryDefaultAttrs,n.attrs.named),n.items=n.ids.split(",").map(function(e){e=parseInt(e,10);var n=U.default.get(t.ID,e);return n||D.default.fetch(t.ID,e),(0,g.assign)({ID:e},n)}),delete n.ids,n.columns&&(n.columns=parseInt(n.columns,10)),n.orderby&&(n.orderBy=n.orderby,delete n.orderby),D.default.setLibrarySelectedItems(t.ID,n.items),o({visible:!0,initialGallerySettings:n,labels:{confirm:y.default.translate("Update",{context:"verb"})}},{preserveFocus:!0,view:ne.ModalViews.GALLERY}))}}),P=(0,g.debounce)(function(){e.execCommand("wpcomAutoResize",null,null,{skip_focus:!0})},400,{leading:!0}),e.on("click",v),e.on("keydown",b),Q.default.isEnabled("desktop")){var z=n("electron").ipcRenderer;e.on("contextmenu",function(){z.send("mce-contextmenu",{sender:!0})})}e.on("touchstart touchmove touchend",j()),e.on("init",function(){U.default.on("change",R),e.getDoc().addEventListener("load",m,!0),e.dom.bind(e.getDoc(),"dragstart dragend",s),e.selection.selectorChanged(".wp-caption",x)}),e.on("init show hide",function(){r({visible:!e.isHidden()})}),e.on("SetContent",h),e.on("remove",function(){(0,g.values)(k).forEach(function(e){u.default.unmountComponentAtNode(e),e.parentNode.removeChild(e)}),k={},U.default.off("change",R),e.getDoc().removeEventListener("load",m)}),(0,Y.default)(e),(0,Z.default)(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/babel-runtime/helpers/extends.js"),a=r(s);t.default=function(){h.default.PluginManager.add("wpcom/media",i)};var l=n("./node_modules/react-dom/index.js"),u=r(l),d=n("./node_modules/react-dom/server.js"),c=r(d),f=n("./node_modules/react/react.js"),p=r(f),m=n("./node_modules/tinymce/tinymce.js"),h=r(m),g=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/i18n-calypso/index.js"),y=r(v),b=n("./client/lib/shortcode/index.js"),_=r(b),x=n("./node_modules/component-closest/index.js"),C=r(x),j=n("./node_modules/gridicons/build/index.js"),E=r(j),w=n("./client/lib/sites-list/index.js"),S=r(w),k=n("./client/lib/posts/actions.js"),T=r(k),P=n("./client/lib/posts/post-edit-store.js"),I=r(P),R=n("./client/lib/media/constants.js"),N=o(R),M=n("./client/lib/media/actions.js"),D=r(M),O=n("./client/lib/media/utils.js"),A=r(O),L=n("./client/lib/media-serialization/index.js"),B=n("./client/post-editor/media-modal/markup.js"),F=r(B),z=n("./client/lib/media/store.js"),U=r(z),H=n("./client/post-editor/editor-media-modal/index.jsx"),W=r(H),V=n("./client/notices/index.js"),q=r(V),G=n("./client/components/tinymce/plugins/media/drop-zone.jsx"),K=r(G),$=n("./client/components/tinymce/plugins/media/restrict-size/index.js"),Y=r($),J=n("./client/components/tinymce/plugins/media/advanced/index.jsx"),Z=r(J),X=n("./client/config/index.js"),Q=r(X),ee=n("./client/state/ui/selectors.js"),te=n("./client/state/ui/editor/actions.js"),ne=n("./client/state/ui/media-modal/constants.js"),oe=n("./client/lib/react-helpers/index.js"),re=/<img\s[^>]*\/?>/gi,ie=["thumbnail","medium","large","full"],se=(0,S.default)(),ae=null,le=null;e.exports=t.default},"./client/components/tinymce/plugins/media/restrict-size/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return isFinite(window.devicePixelRatio)?Math.round(g*window.devicePixelRatio):window.matchMedia&&window.matchMedia(h).matches?Math.round(2*g):g}function i(e,t,n,o,r,i,s){return""+t+i+o+s}function s(e){var t=(0,d.deserialize)(e);return t.media.transient||!t.media.ID?null:{originalUrl:t.media.URL,resizedUrl:(0,f.default)(t.media.URL,Math.min(t.media.width||1/0,v))}}function a(e,t,n,o){if(-1!==e.indexOf("data-wpmedia-src"))return e;var r=s(e);return null===r?e:""+t+r.resizedUrl+'" data-wpmedia-src="'+r.originalUrl+o}function l(e){return e.replace(m,i)}function u(e){return e.replace(p,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxWidth=r,t.resetImages=l,t.setImages=u,t.default=function(e){e.on("BeforeSetContent BeforeSetWpcomMedia",function(e){e.content&&"html"!==e.mode&&(e.content=u(e.content))}),e.on("BeforeSetWpcomMedia",function(e){var t=s(e.content);null!==t&&(e.resizedImageUrl=t.resizedUrl)}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=l(e.content))}),e.on("PostProcess",function(e){e.content&&(e.content=l(e.content))}),e.on("BeforeAddUndo",function(e){e.level.content&&(e.level.content=l(e.level.content))})};var d=n("./client/lib/media-serialization/index.js"),c=n("./client/lib/resize-image-url/index.js"),f=o(c),p=/(<img[^>]*?\ssrc=")([^"]*?)("[^>]*?\/?>)/gi,m=/(<img[^>]*?\ssrc=")([^"]*?)("[^>]*?)(\sdata-wpmedia-src="([^"]*?)")([^>]*?\/?>)/gi,h="( -webkit-min-device-pixel-ratio: 1.5 ), ( min--moz-device-pixel-ratio: 1.5 ), ( min-resolution: 1.5dppx )",g=680,v=r()},"./client/components/tinymce/plugins/mentions/editor-mention.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/prop-types/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=function(e){var t=e.username;return a.default.createElement("span",null,"@",t)};l.propTypes={username:i.default.string.isRequired},t.default=l,e.exports=t.default},"./client/components/tinymce/plugins/mentions/mentions.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mentions=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-dom/server.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/tinymce/tinymce.js"),j=o(C),E=n("./client/components/tinymce/plugins/mentions/suggestion-list.jsx"),w=o(E),S=n("./client/components/tinymce/plugins/mentions/editor-mention.jsx"),k=o(S),T=n("./client/components/data/query-users-suggestions/index.jsx"),P=o(T),I=n("./client/state/ui/selectors.js"),R=n("./client/state/users/suggestions/selectors.js"),N=j.default.util.VK,M=t.Mentions=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.matchingSuggestions=[],o.state={popoverContext:null,query:"",showPopover:!1},o.insertSuggestion=function(e){var t=e.user_login;if(t){var n=o.props.editor.selection,r=v.default.createElement(k.default,{username:t}),i=n.getRng(),s=document.createRange();s.setStart(i.startContainer,Math.max(i.startOffset-(o.state.query.length+1),0)),s.setEnd(i.endContainer,i.endOffset),n.setRng(s),n.setContent(n.getContent().replace(/@\S*/,b.default.renderToStaticMarkup(r))),o.props.editor.getBody().focus()}},o.onKeyDown=function(e){var t=e.keyCode,n=e.preventDefault,r=o.getSelectedSuggestionIndex();if((0,x.includes)([N.DOWN,N.UP],t)&&-1!==r){var i=void 0;n(),t===N.DOWN?i=(r+1)%o.matchingSuggestions.length:(i=r-1,i<0&&(i=o.matchingSuggestions.length-1)),o.setState({selectedSuggestionId:o.matchingSuggestions[i].ID})}},o.onKeyUp=function(e){var t=e.keyCode;if(!(0,x.includes)([N.DOWN,N.UP],t)){if((0,x.includes)([N.SPACEBAR,27],t))return o.hidePopover();if(t===N.ENTER){if(!o.state.showPopover||0===o.matchingSuggestions.length)return;var n=o.getSuggestion();return n&&o.insertSuggestion(n),o.hidePopover()}var r=o.getQueryText();o.setState({showPopover:null!==r,selectedSuggestionId:null,query:r})}},o.setPopoverContext=function(e){return e&&o.setState({popoverContext:e})},o.hidePopover=function(){return o.setState({showPopover:!1})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.editor,t=this.getPosition(),n=t.left,o=t.top;e.on("keyup",this.onKeyUp),e.on("click",this.hidePopover),this.left=n,this.top=o}},{key:"componentWillUpdate",value:function(e,t){if(!this.state.showPopover&&t.showPopover)return this.updatePosition(t),void this.props.editor.on("keydown",this.onKeyDown);if(this.state.showPopover&&!t.showPopover)return void this.props.editor.off("keydown",this.onKeyDown);if(t.showPopover){var n=this.getPosition(),o=n.top,r=n.left,i=this.top>o&&this.left<r,s=this.top<o&&this.left>r;(i||s)&&this.updatePosition(t,{top:o,left:r})}}},{key:"componentWillUnmount",value:function(){var e=this.props.editor;e.off("keydown",this.onKeyDown),e.off("keyup",this.onKeyUp),e.off("click",this.hidePopover)}},{key:"getMatchingSuggestions",value:function(e,t){if(t){t=(0,x.escapeRegExp)(t);var n=new RegExp("^"+t+"|\\s"+t,"ig");e=e.filter(function(e){var t=e.user_login,o=e.display_name;return n.test(t+" "+o)})}return e.slice(0,10)}},{key:"getPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.query,n=this.props.editor,o=n.selection.getRng(),r=document.createRange();r.setStart(o.startContainer,o.startOffset-t.length),r.setEnd(o.endContainer,o.endOffset);var i=r.getClientRects(),s=i.length>0?(0,x.last)(i):j.default.$(n.selection.getNode()).offset();return(0,x.pick)(s,["left","top"])}},{key:"updatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getPosition(e),n=t.left,o=t.top,r=this.props,i=r.editor,s=r.node,a=(0,x.get)(j.default.$(".mce-toolbar-grp",i.getContainer())[0],"offsetHeight",0),l=i.selection.getRng(),u=l.getClientRects(),d=void 0;d=u.length>0?u[0].height:i.selection.getNode().offsetHeight,this.left=n,this.top=o,s.style.left=this.left+"px",s.style.top=a+this.top+d-10+"px"}},{key:"getQueryText",value:function(){var e=new RegExp("(?:^|\\s)@([A-Za-z0-9_+-]*)$","gi"),t=this.props.editor.selection.getRng(),n=t.startContainer.textContent.slice(0,t.startOffset),o=e.exec(n);return o&&o.length>1?o[1]:null}},{key:"getSelectedSuggestionIndex",value:function(){var e=this;return this.state.selectedSuggestionId?(0,x.findIndex)(this.matchingSuggestions,function(t){var n=t.ID;return n===e.state.selectedSuggestionId}):0}},{key:"getSuggestion",value:function(){var e=this.getSelectedSuggestionIndex();return e>-1?this.matchingSuggestions[e]:null}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.suggestions,o=this.state,r=o.query,i=o.showPopover,s=o.popoverContext;this.matchingSuggestions=this.getMatchingSuggestions(n,r);var a=this.state.selectedSuggestionId||(0,x.get)((0,x.head)(this.matchingSuggestions),"ID");return v.default.createElement("div",{ref:this.setPopoverContext},v.default.createElement(P.default,{siteId:t}),this.matchingSuggestions.length>0&&i&&v.default.createElement(w.default,{query:r,suggestions:this.matchingSuggestions,selectedSuggestionId:a,popoverContext:s,onClick:this.insertSuggestion,onClose:this.hidePopover}))}}]),t}(g.Component);M.propTypes={editor:h.default.object.isRequired,node:h.default.object.isRequired,siteId:h.default.number.isRequired,suggestions:h.default.array},M.defaultProps={suggestions:[]},t.default=(0,_.connect)(function(e){var t=(0,I.getSelectedSiteId)(e);return{siteId:t,suggestions:(0,R.getUserSuggestions)(e,t)}})(M)},"./client/components/tinymce/plugins/mentions/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=document.createElement("div"),n=!1;e.on("init focus",function(){var o=e.getParam("redux_store"),r=(0,p.getSelectedSite)(o.getState());n||!r||r.single_user_site||(t.setAttribute("class","mentions__container"),e.getContainer().appendChild(t),(0,m.renderWithReduxStore)(d.default.createElement(f.default,{editor:e,node:t}),t,o),n=!0),n&&r&&r.single_user_site&&(l.default.unmountComponentAtNode(t),n=!1)}),e.on("keydown",function(e){document.querySelector(".mentions__suggestions")&&e.keyCode===h&&e.preventDefault()})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/react-dom/index.js"),l=o(a),u=n("./node_modules/react/react.js"),d=o(u),c=n("./client/components/tinymce/plugins/mentions/mentions.jsx"),f=o(c),p=n("./client/state/ui/selectors.js"),m=n("./client/lib/react-helpers/index.js"),h=s.default.util.VK.ENTER;t.default=function(){s.default.PluginManager.add("wpcom/mentions",r)},e.exports=t.default},"./client/components/tinymce/plugins/mentions/suggestion-list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/prop-types/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/lodash/lodash.js"),u=n("./client/components/popover/menu.jsx"),d=o(u),c=n("./client/components/popover/menu-item.jsx"),f=o(c),p=n("./client/components/tinymce/plugins/mentions/suggestion.jsx"),m=o(p),h=function(e){var t=e.onClick,n=e.onClose,o=e.popoverContext,r=e.query,i=e.selectedSuggestionId,s=e.suggestions;return a.default.createElement(d.default,{className:"mentions__suggestions",context:o,isVisible:!0,autoPosition:!1,position:"bottom right",onClose:n},s.map(function(e){return a.default.createElement(f.default,{className:"mentions__suggestion",key:e.ID,isSelected:e.ID===i,onClick:(0,l.bind)(t,null,e)},a.default.createElement(m.default,{avatarUrl:e.image_URL,username:e.user_login,fullName:e.display_name,query:r}))}))};h.propTypes={onClick:i.default.func,onClose:i.default.func,query:i.default.string,popoverContext:i.default.object,selectedSuggestionId:i.default.number,suggestions:i.default.array},h.defaultProps={onClick:function(){},onClose:function(){},query:"",popoverContext:{},selectedSuggestionId:0,suggestions:[]},t.default=h,e.exports=t.default},"./client/components/tinymce/plugins/mentions/suggestion.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/prop-types/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=function(e){var t=e.avatarUrl,n=e.fullName,o=e.query,r=e.username,i=function(e,t){var n={username:"(^"+o+")(\\w*)\\s*",fullName:"(^.*?)(\\b"+o+")(.*)"},r=new RegExp(n[t],"ig").exec(e);return r?r.map(function(e,t){return 0===t?"":o.toLowerCase()===e.toLowerCase()?a.default.createElement("mark",{className:"mentions__highlight",key:t},e):e}):[e]},s=i(r,"username"),l=i(n,"fullName");return s.unshift("@"),a.default.createElement("div",null,a.default.createElement("img",{className:"mentions__avatar",src:t}),a.default.createElement("span",{className:"mentions__username"},s),a.default.createElement("small",{className:"mentions__fullname"},l))};l.propTypes={avatarUrl:i.default.string,fullName:i.default.string,query:i.default.string,username:i.default.string},l.defaultProps={avatarUrl:"",fullName:"",query:"",username:""},t.default=l,e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/form.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}Object.defineProperty(t,"__esModule",{value:!0}),t.isProductFormDirty=t.isProductFormValid=t.getProductFormValues=void 0;var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),h=n("./node_modules/babel-runtime/helpers/extends.js"),g=o(h),v=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),y=o(v),b=n("./node_modules/react/react.js"),_=o(b),x=n("./node_modules/redux-form/es/index.js"),C=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/email-validator/index.js"),E=o(j),w=n("./node_modules/lodash/lodash.js"),S=n("./client/components/external-link/index.jsx"),k=o(S),T=n("./client/components/forms/form-text-input/index.jsx"),P=o(T),I=n("./client/components/forms/form-textarea/index.jsx"),R=o(I),N=n("./client/components/forms/form-currency-input/index.jsx"),M=o(N),D=n("./client/components/forms/form-toggle/compact.jsx"),O=o(D),A=n("./client/components/redux-forms/redux-form-fieldset/index.jsx"),L=o(A),B=n("./client/blocks/upload-image/index.jsx"),F=o(B),z=n("./client/lib/format-currency/index.js"),U="simplePaymentsForm",H=(t.getProductFormValues=function(e){
return(0,x.getFormValues)(U)(e)},t.isProductFormValid=function(e){return(0,x.isValid)(U)(e)},t.isProductFormDirty=function(e){return(0,x.isDirty)(U)(e)},["USD","EUR","AUD","BRL","CAD","CZK","DKK","HKD","HUF","ILS","JPY","MYR","MXN","TWD","NZD","NOK","PHP","PLN","GBP","RUB","SGD","SEK","CHF","THB"]),W=H.map(function(e){var t=(0,z.getCurrencyDefaults)(e),n=t.symbol,o=n===e?e:e+" "+(0,w.trimEnd)(n,".");return{code:e,label:o}}),V=function(e,t){var n=t.translate,o=(0,z.getCurrencyDefaults)(e.currency),i=o.precision,s={};if(e.title||(s.title=n("This can not be empty.")),e.price){if(NaN===parseFloat(e.price))s.price=n("Invalid price");else if(parseFloat(e.price)<0)s.price=n("Price can not be negative.");else if(r(e.price)>i)if(0===i)s.price=n("Price can not have decimal places.");else{var a=n("%(precision)d decimal place","%(precision)d decimal places",{count:i,args:{precision:i}});s.price=n("Price can not have more than %(countDecimal)s.",{args:{countDecimal:a}})}}else s.price=n("Price can not be empty.");return e.email?E.default.validate(e.email)||(s.email=n("%(email)s is not a valid email address.",{args:{email:e.email}})):s.email=n("Email address can not be empty."),e.featuredImageId&&"uploading"===e.featuredImageId&&(s.featuredImageId="uploading"),s},q=function(e){var t=e.price,n=e.currency,o=(0,y.default)(e,["price","currency"]),r=(0,z.getCurrencyDefaults)(n.input.value),i=r.precision,s=i>0?(0,w.padEnd)("0.",i+2,"0"):"0";return _.default.createElement(A.FieldsetRenderer,(0,g.default)({inputComponent:M.default},t,(0,w.omit)(o,["names"]),{currencySymbolPrefix:n.input.value,onCurrencyChange:n.input.onChange,currencyList:W,placeholder:s}))},G=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.handleImageEditorDone=function(){return o.props.input.onChange("uploading")},o.handleImageUploadDone=function(e){return o.props.input.onChange(e.ID)},o.handleImageRemove=function(){return o.props.input.onChange(null)},r=n,(0,f.default)(o,r)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return _.default.createElement(F.default,{defaultImage:this.props.input.value,onImageEditorDone:this.handleImageEditorDone,onImageUploadDone:this.handleImageUploadDone,onImageRemove:this.handleImageRemove,onError:this.props.onError})}}]),t}(b.Component),K=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.handleUploadImageError=function(e,t){return o.props.showError(t)},r=n,(0,f.default)(o,r)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.translate;return _.default.createElement("form",{className:"editor-simple-payments-modal__form"},_.default.createElement(x.Field,{name:"featuredImageId",onError:this.handleUploadImageError,component:G}),_.default.createElement("div",{className:"editor-simple-payments-modal__form-fields"},_.default.createElement(L.default,{name:"title",label:e("What is this payment for?"),component:P.default,explanation:e("For example: event tickets, charitable donations, training courses, coaching fees, etc.")}),_.default.createElement(L.default,{name:"description",label:e("Description"),component:R.default}),_.default.createElement(x.Fields,{names:["price","currency"],label:e("Price"),component:q}),_.default.createElement(L.default,{name:"multiple",type:"checkbox",component:O.default},e("Allow people to buy more than one item at a time.")),_.default.createElement(L.default,{name:"email",label:e("Email"),explanation:e("This is where PayPal will send your money. To claim a payment, you'll need a {{paypalLink}}PayPal account{{/paypalLink}} connected to a bank account.",{components:{paypalLink:_.default.createElement(k.default,{href:"https://paypal.com",target:"_blank"})}}),component:P.default})))}}]),t}(b.Component);t.default=(0,w.flowRight)(C.localize,(0,x.reduxForm)({form:U,enableReinitialize:!0,validate:V}))(K)},"./client/components/tinymce/plugins/simple-payments/dialog/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/promise.js"),u=o(l),d=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/createClass.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=o(g),y=n("./node_modules/babel-runtime/helpers/inherits.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/react/react.js"),j=o(C),E=n("./node_modules/react-redux/es/index.js"),w=n("./node_modules/i18n-calypso/index.js"),S=n("./node_modules/lodash/lodash.js"),k=n("./client/state/ui/selectors.js"),T=n("./client/state/sites/selectors.js"),P=n("./client/state/selectors/get-simple-payments.js"),I=o(P),R=n("./client/components/data/query-simple-payments/index.js"),N=o(R),M=n("./client/components/data/query-site-plans/index.jsx"),D=o(M),O=n("./client/components/dialog/index.jsx"),A=o(O),L=n("./client/components/button/index.jsx"),B=o(L),F=n("./client/components/notice/index.jsx"),z=o(F),U=n("./client/components/tinymce/plugins/simple-payments/dialog/navigation.jsx"),H=o(U),W=n("./client/components/tinymce/plugins/simple-payments/dialog/form.jsx"),V=o(W),q=n("./client/components/tinymce/plugins/simple-payments/dialog/list.jsx"),G=o(q),K=n("./client/state/current-user/selectors.js"),$=n("./client/lib/wp/browser.js"),Y=o($),J=n("./client/lib/accept/index.js"),Z=o(J),X=n("./client/state/data-layer/wpcom/sites/simple-payments/index.js"),Q=n("./client/state/simple-payments/product-list/actions.js"),ee=n("./client/lib/plans/constants.js"),te=n("./client/state/sites/plans/selectors.js"),ne=n("./client/my-sites/upgrade-nudge/index.jsx"),oe=o(ne),re=n("./client/lib/analytics/track-component-view/index.jsx"),ie=o(re),se=n("./client/state/analytics/actions.js"),ae=n("./client/components/empty-content/index.jsx"),le=o(ae),ue=n("./client/components/banner/index.jsx"),de=o(ue),ce=function(e){return Array.isArray(e)&&0===e.length},fe=function(e){return(0,X.productToCustomPost)((0,W.getProductFormValues)(e))},pe=function(e){return function(t,n){var o=fe(n());return Y.default.site(e).addPost(o).then(function(n){var o=(0,X.customPostToProduct)(n);return t((0,Q.receiveUpdateProduct)(e,o)),o})}},me=function(e,t){return function(n,o){var r=fe(o());return Y.default.site(e).post(t).update(r).then(function(t){var o=(0,X.customPostToProduct)(t);return n((0,Q.receiveUpdateProduct)(e,o)),o})}},he=function(e,t){return function(n){var o=Y.default.site(e).post(t);return o.delete().then(function(){return o.delete()}).then(function(){return n((0,Q.receiveDeleteProduct)(e,t))})}},ge=function(e){function t(e){(0,p.default)(this,t);var n=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));n.handleDialogClose=function(){n.checkUnsavedForm().then(function(e){return e&&n.props.onClose()})},n.handleChangeTabs=function(e){"form"===e?n.showButtonForm(null):n.checkUnsavedForm().then(function(e){return e&&n.showButtonList()})},n.showButtonForm=function(e){var t=n.getInitialFormFields(e);n.setState({activeTab:"form",editedPaymentId:e,initialFormValues:t})},n.handleSelectedChange=function(e){return n.setState({selectedPaymentId:e})},n.showError=function(e){return n._isMounted&&n.setState({errorMessage:e})},n.dismissError=function(){return n._isMounted&&n.setState({errorMessage:null})},n.handleInsert=function(){var e=n.props,t=e.siteId,o=e.dispatch,r=e.translate,i=n.state.activeTab;n.setIsSubmitting(!0);var s=void 0;s="list"===i?u.default.resolve(n.state.selectedPaymentId):o(pe(t)).then(function(e){return o((0,se.recordTracksEvent)("calypso_simple_payments_button_create",{price:e.price,currency:e.currency,id:e.ID})),e.ID}),s.then(function(e){n.props.onInsert({id:e}),o((0,se.recordTracksEvent)("calypso_simple_payments_button_insert",{id:e}))}).catch(function(){return n.showError(r("The payment button could not be inserted."))}).then(function(){return n.setIsSubmitting(!1)})},n.handleSave=function(){n.setIsSubmitting(!0);var e=n.props,t=e.siteId,o=e.dispatch,r=e.translate,i=n.state.editedPaymentId;o(me(t,i)).then(n.handleFormClose).catch(function(){return n.showError(r("The payment button could not be updated."))}).then(function(){return n.setIsSubmitting(!1)})},n.handleFormClose=function(){n.isDirectEdit()?n.props.onClose():n.showButtonList()},n.handleTrash=function(e){var t=n.props.translate,o=t("Are you sure you want to delete this item? It will be disabled and removed from all locations where it currently appears.");(0,Z.default)(o,function(o){if(o){n.setIsSubmitting(!0);var r=n.props,i=r.siteId,s=r.dispatch;s((0,se.recordTracksEvent)("calypso_simple_payments_button_delete",{id:e})),s(he(i,e)).catch(function(){return n.showError(t("The payment button could not be deleted."))}).then(function(){return n.setIsSubmitting(!1)})}},t("Delete"),null,{isScary:!0})},n._isMounted=!1;var o=n.props,r=o.editPaymentId,i=o.paymentButtons;return n.state={activeTab:r||ce(i)?"form":"list",editedPaymentId:r,initialFormValues:n.getInitialFormFields(r),selectedPaymentId:null,isSubmitting:!1,errorMessage:null},n}return(0,b.default)(t,e),(0,h.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.showDialog&&!this.props.showDialog&&(e.editPaymentId?this.showButtonForm(e.editPaymentId):ce(e.paymentButtons)?this.showButtonForm(null):this.showButtonList()),null===this.props.paymentButtons&&ce(e.paymentButtons)&&this.showButtonForm(null)}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getInitialFormFields",value:function(e){var t=this.constructor.initialFields,n=this.props,o=n.paymentButtons,r=n.currencyCode,s=n.currentUserEmail;if((0,S.isNumber)(e)){var l=(0,S.find)(o,function(t){return t.ID===e});if(l)return(0,S.pick)(l,(0,a.default)(t))}var u=r||"USD",d=(0,S.get)(o,"0.email",s);return(0,i.default)({},t,{currency:u,email:d})}},{key:"isDirectEdit",value:function(){return(0,S.isNumber)(this.props.editPaymentId)}},{key:"checkUnsavedForm",value:function(){var e=this,t="form"===this.state.activeTab&&this.props.formIsDirty;return t?new u.default(function(t){var n=e.props.translate;(0,Z.default)(n("Wait! You have unsaved changes. Do you really want to discard them?"),t,n("Discard"),null,{isScary:!0})}):u.default.resolve(!0)}},{key:"showButtonList",value:function(){this.setState({activeTab:"list"})}},{key:"setIsSubmitting",value:function(e){this._isMounted&&this.setState({isSubmitting:e})}},{key:"getActionButtons",value:function(){var e=this.props,t=e.formIsValid,n=e.formIsDirty,o=e.translate,r=this.state,i=r.activeTab,s=r.editedPaymentId,a=r.isSubmitting,l=t&&n,u=void 0,d=void 0,c=void 0,f=void 0;return"form"===i&&(0,S.isNumber)(s)?(u=this.handleFormClose,d=this.handleSave,c=!l,f=o("Done")):(u=this.props.onClose,d=this.handleInsert,c="form"===i&&!l||"list"===i&&null===this.state.selectedPaymentId,f=o("Insert")),[j.default.createElement(B.default,{onClick:u,disabled:a},o("Cancel")),j.default.createElement(B.default,{onClick:d,busy:a,disabled:a||c,primary:!0},a?o("Saving…"):f)]}},{key:"renderEmptyDialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,o=n.onClose,r=n.translate,i=n.showDialog;return j.default.createElement(A.default,{isVisible:i,onClose:o,buttons:[j.default.createElement(B.default,{onClick:o},r("Close"))],additionalClassNames:"editor-simple-payments-modal"},j.default.createElement(ie.default,{eventName:"calypso_simple_payments_dialog_view"}),!t&&j.default.createElement(H.default,{activeTab:"list",paymentButtons:[],onChangeTabs:S.noop}),e)}},{key:"returnTrue",value:function(){return!0}},{key:"render",value:function(){var e=this.props,t=e.showDialog,n=e.siteId,o=e.siteSlug,r=e.paymentButtons,i=e.currencyCode,s=e.isJetpackNotSupported,a=e.translate,l=e.planHasSimplePaymentsFeature,u=e.shouldQuerySitePlans,d=this.state,c=d.activeTab,f=d.initialFormValues,p=d.errorMessage,m="list"===c||"form"===c&&!this.isDirectEdit()&&!ce(r);return!u&&s?this.renderEmptyDialog(j.default.createElement(le.default,{className:"upgrade-jetpack",illustration:"/calypso/images/illustrations/illustration-jetpack.svg",title:a("Upgrade Jetpack to use Simple Payments"),illustrationWidth:600,action:j.default.createElement(de.default,{icon:"star",title:a("Upgrade your Jetpack!"),description:a("Simple Payments requires Jetpack version 5.2 or later."),feature:ee.FEATURE_SIMPLE_PAYMENTS,plan:ee.PLAN_PREMIUM,href:"../../plugins/jetpack/"+o})}),!0):u||l?j.default.createElement(A.default,{isVisible:t,onClose:this.handleDialogClose,buttons:this.getActionButtons(),additionalClassNames:"editor-simple-payments-modal"},j.default.createElement(ie.default,{eventName:"calypso_simple_payments_dialog_view"}),j.default.createElement(N.default,{siteId:n}),(!i||u)&&j.default.createElement(D.default,{siteId:n}),m&&j.default.createElement(H.default,{activeTab:c,paymentButtons:r,onChangeTabs:this.handleChangeTabs}),p&&j.default.createElement(z.default,{status:"is-error",text:p,onDismissClick:this.dismissError}),"form"===c?j.default.createElement(V.default,{initialValues:f,showError:this.showError}):j.default.createElement(G.default,{siteId:n,paymentButtons:r,selectedPaymentId:this.state.selectedPaymentId,onSelectedChange:this.handleSelectedChange,onTrashClick:this.handleTrash,onEditClick:this.showButtonForm})):this.renderEmptyDialog(j.default.createElement(le.default,{illustration:"/calypso/images/illustrations/type-e-commerce.svg",illustrationWidth:300,title:a("Want to add a payment button to your site?"),action:j.default.createElement(oe.default,{className:"editor-simple-payments-modal__nudge-nudge",title:a("Upgrade your plan to our Premium or Business plan!"),message:a("Get simple payments, advanced social media tools, your own domain, and more."),feature:ee.FEATURE_SIMPLE_PAYMENTS,event:"editor_simple_payments_modal_nudge",shouldDisplay:this.returnTrue}),secondaryAction:j.default.createElement("a",{className:"empty-content__action button",href:"https://support.wordpress.com/simple-payments/"},a("Learn more about Simple Payments"))}),!0)}}]),t}(C.Component);ge.propTypes={showDialog:x.default.bool.isRequired,editPaymentId:x.default.number,onClose:x.default.func.isRequired,onInsert:x.default.func.isRequired,isJetpackNotSupported:x.default.bool},ge.initialFields={title:"",description:"",price:"",currency:"USD",multiple:!1,email:"",featuredImageId:null},t.default=(0,E.connect)(function(e,t){var n=t.siteId;return n||(n=(0,k.getSelectedSiteId)(e)),{siteId:n,siteSlug:(0,T.getSiteSlug)(e,n),paymentButtons:(0,I.default)(e,n),currencyCode:(0,K.getCurrentUserCurrencyCode)(e),shouldQuerySitePlans:null===(0,te.getSitePlanSlug)(e,n),isJetpackNotSupported:(0,T.isJetpackSite)(e,n)&&!(0,T.isJetpackMinimumVersion)(e,n,"5.2"),planHasSimplePaymentsFeature:(0,te.hasFeature)(e,n,ee.FEATURE_SIMPLE_PAYMENTS),formIsValid:(0,W.isProductFormValid)(e),formIsDirty:(0,W.isProductFormDirty)(e),currentUserEmail:(0,K.getCurrentUserEmail)(e)}})((0,w.localize)(ge)),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/list-item-placeholder.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/i18n-calypso/index.js"),a=n("./client/components/card/compact.jsx"),l=o(a),u=function(e){var t=e.translate;return i.default.createElement(l.default,{className:"editor-simple-payments-modal__list-item is-placeholder"},i.default.createElement("div",{className:"editor-simple-payments-modal__list-label"},i.default.createElement("div",null,i.default.createElement("span",{className:"placeholder-text"},t("Loading payment buttons…"))),i.default.createElement("div",null,i.default.createElement("span",{className:"placeholder-text"},"$1000"))))};t.default=(0,s.localize)(u),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/list-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./client/lib/format-currency/index.js"),x=n("./client/components/card/compact.jsx"),C=o(x),j=n("./client/components/ellipsis-menu/index.jsx"),E=o(j),w=n("./client/components/forms/form-radio/index.jsx"),S=o(w),k=n("./client/components/popover/menu-item.jsx"),T=o(k),P=n("./client/components/tinymce/plugins/simple-payments/dialog/product-image.jsx"),I=o(P),R=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleRadioChange=function(){return o.props.onSelectedChange(o.props.paymentId)},o.handleEditClick=function(){return o.props.onEditClick(o.props.paymentId)},o.handleTrashClick=function(){return o.props.onTrashClick(o.props.paymentId)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"formatPrice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=(0,_.getCurrencyObject)(e,t),o=n.integer,r=n.fraction;return""+o+r+" "+t}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.paymentId,o=e.title,r=e.price,i=e.currency,s=e.featuredImageId,a=e.isSelected,l=e.translate,u="simple-payments-list-item-radio-"+n;return v.default.createElement(C.default,{className:"editor-simple-payments-modal__list-item"},v.default.createElement(S.default,{name:"selection",id:u,value:n,checked:a,onChange:this.handleRadioChange}),v.default.createElement("label",{className:"editor-simple-payments-modal__list-label",htmlFor:u},v.default.createElement("div",{className:"editor-simple-payments-modal__list-name"},o),v.default.createElement("div",null,this.formatPrice(r,i))),v.default.createElement(I.default,{siteId:t,imageId:s}),v.default.createElement(E.default,{className:"editor-simple-payments-modal__list-menu",popoverClassName:"is-dialog-visible",position:"bottom left"},v.default.createElement(T.default,{icon:"pencil",onClick:this.handleEditClick},l("Edit")),v.default.createElement(T.default,{icon:"trash",onClick:this.handleTrashClick},l("Trash"))))}}]),t}(g.Component);R.propTypes={onSelectedChange:h.default.func,onEditClick:h.default.func,onTrashClick:h.default.func},R.defaultProps={onSelectedChange:b.noop,onEditClick:b.noop,onTrashClick:b.noop},t.default=(0,y.localize)(R),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/components/tinymce/plugins/simple-payments/dialog/list-item.jsx"),_=o(b),x=n("./client/components/tinymce/plugins/simple-payments/dialog/list-item-placeholder.jsx"),C=o(x),j=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"renderListItems",value:function(){var e=this.props,t=e.siteId,n=e.paymentButtons,o=e.selectedPaymentId,r=e.onSelectedChange,i=e.onEditClick,s=e.onTrashClick;return n?n.map(function(e){var n=e.ID,a=e.title,l=e.price,u=e.currency,d=e.featuredImageId;return v.default.createElement(_.default,{key:n,siteId:t,paymentId:n,isSelected:o===n,title:a,price:l,currency:u,featuredImageId:d,onSelectedChange:r,onEditClick:i,onTrashClick:s})}):(0,y.range)(2).map(function(e){return v.default.createElement(C.default,{key:e})})}},{key:"render",value:function(){return v.default.createElement("div",{className:"editor-simple-payments-modal__list"},this.renderListItems())}}]),t}(g.Component);j.propTypes={siteId:h.default.number.isRequired,paymentButtons:h.default.array,selectedPaymentId:h.default.number,onSelectedChange:h.default.func,onEditClick:h.default.func,onTrashClick:h.default.func},j.defaultProps={selectedPaymentId:null,onSelectedChange:y.noop,onEditClick:y.noop,onTrashClick:y.noop},t.default=j,e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/navigation.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/gridicons/build/index.js"),_=o(b),x=n("./client/components/section-header/index.jsx"),C=o(x),j=n("./client/components/header-cake/index.jsx"),E=o(j),w=n("./client/components/button/index.jsx"),S=o(w),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onChangeTabs=function(e){return function(){return o.props.onChangeTabs(e)}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.paymentButtons,n=e.activeTab,o=e.translate,r="editor-simple-payments-modal__navigation";return"form"===n?v.default.createElement(E.default,{className:r,onClick:this.onChangeTabs("list"),backText:o("Payment Buttons")}):t?v.default.createElement(C.default,{className:r,label:o("Payment Buttons"),count:t.length},v.default.createElement(S.default,{compact:!0,icon:!0,onClick:this.onChangeTabs("form")},v.default.createElement(_.default,{icon:"plus-small"})," ",o("Add New"))):v.default.createElement(C.default,{className:r})}}]),t}(g.Component);k.propTypes={activeTab:h.default.oneOf(["list","form"]).isRequired,onChangeTabs:h.default.func.isRequired,paymentButtons:h.default.array},t.default=(0,y.localize)(k),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/dialog/product-image.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-redux/es/index.js"),a=n("./client/lib/media/utils.js"),l=o(a),u=n("./client/components/data/query-media/index.jsx"),d=o(u),c=n("./client/state/selectors/get-media-item.js"),f=o(c),p=function(e){var t=e.siteId,n=e.imageId,o=e.image;if(!t||!n)return null;if(!o)return i.default.createElement("figure",{className:"editor-simple-payments-modal__figure is-placeholder"},i.default.createElement(d.default,{siteId:t,mediaId:n}));var r=l.default.url(o,{size:"medium"});return i.default.createElement("figure",{className:"editor-simple-payments-modal__figure"},i.default.createElement("img",{className:"editor-simple-payments-modal__image",src:r}))};t.default=(0,s.connect)(function(e,t){var n=t.siteId,o=t.imageId;return{image:o?(0,f.default)(e,n,o):null}})(p),e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/plugin.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/tinymce/tinymce.js"),i=o(r),s=n("./node_modules/react/react.js"),a=n("./node_modules/react-dom/index.js"),l=n("./client/components/tinymce/plugins/simple-payments/dialog/index.jsx"),u=o(l),d=n("./client/components/tinymce/plugins/simple-payments/shortcode-utils.js"),c=n("./client/lib/react-helpers/index.js"),f=function(e){var t=void 0,n=e.getParam("redux_store");e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){(0,a.unmountComponentAtNode)(t),t.parentNode.removeChild(t),t=null}),e.addCommand("simplePaymentsButton",function(o){function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";(0,c.renderWithReduxStore)((0,s.createElement)(u.default,{showDialog:"show"===o,editPaymentId:i,onInsert:function(t){e.execCommand("mceInsertContent",!1,(0,d.serialize)(t)),r("hide")},onClose:function(){e.focus(),r("hide")}}),t,n)}var i=null;if(o){var a=(0,d.deserialize)(o);i=a.id||null}r()})};t.default=function(){i.default.PluginManager.add("wpcom/simplepayments",f)},e.exports=t.default},"./client/components/tinymce/plugins/simple-payments/shortcode-utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.id;return l.default.stringify({tag:"simple-payment",type:"single",attrs:{id:t}})}function i(e){if(!e)return null;var t=l.default.parse(e),n={},o=parseInt((0,s.get)(t,"attrs.named.id",null));return n.id=isNaN(o)?null:o,n}Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=r,t.deserialize=i;var s=n("./node_modules/lodash/lodash.js"),a=n("./client/lib/shortcode/index.js"),l=o(a)},"./client/components/tinymce/plugins/toolbar-pin/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){i=e.getContainer()}function n(t){r=t,e.dom.toggleClass(i,"is-pinned",r)}var o=!1,r=!1,i=void 0,s=(0,a.throttle)(function(){i&&(r&&window.pageYOffset<i.offsetTop?n(!1):!r&&window.pageYOffset>i.offsetTop&&n(!0))},50),u=(0,a.throttle)(function(r){var i=!e.isHidden(),a="remove"!==r.type&&i&&(0,l.isWithinBreakpoint)(">660px");if(a!==o){var u=(a?"add":"remove")+"EventListener";window[u]("scroll",s),o=a,o?(t(),s()):n(!1)}},200);e.on("init show hide remove",u),window.addEventListener("resize",u)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpcom/toolbarpin",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/lodash/lodash.js"),l=n("./client/lib/viewport/index.js");e.exports=t.default},"./client/components/tinymce/plugins/touch-scroll-toolbar/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){e.$(".mce-toolbar:not(.mce-menubar)",document.body).each(function(e,t){t.addEventListener("touchstart",function(e){e.stopImmediatePropagation()})})}function n(){e.$([e.$(".mce-inline-toolbar-grp .mce-container-body",document.body),e.$(".mce-toolbar-grp",e.theme.panel.getEl())]).each(function(t,n){n.on("scroll",(0,a.throttle)(function(t){var n=t.target,o=void 0;if(n.scrollLeft===n.scrollWidth-n.clientWidth?o="add":s.default.DOM.hasClass(n,"is-scrolled-full")&&(o="remove"),o){var r=e.$(n);r.hasClass("mce-container-body")||r.add(s.default.DOM.getParent(n,".mce-container-body")),r[o+"Class"]("is-scrolled-full")}},200))})}function o(){function t(){e.$(".mce-toolbar-grp",e.theme.panel.getEl()).each(function(t,n){var o=n.scrollWidth>n.clientWidth;e.$(n).toggleClass("is-scrollable",o)})}window.addEventListener("resize",(0,a.throttle)(t,200)),t(),e.on("wptoolbar",function(t){setTimeout(function(){if(t.toolbar&&t.toolbar.visible()){var n=t.toolbar.getEl(),o=n.firstChild.scrollWidth>n.clientWidth;e.dom.toggleClass(n,"is-scrollable",o)}},0)})}e.on("init",function(){t(),n(),o()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpcom/touchscrolltoolbar",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/lodash/lodash.js");e.exports=t.default},"./client/components/tinymce/plugins/wpcom-autoresize/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function n(){var t,n,o,r,i;if(t=e.selection.getRng(),0===t.startOffset&&0!==t.endOffset||!t.collapsed)return!1;n=t.startContainer,o=e.getBody(),r=n;do if(i=r,r=r.parentNode,r.childNodes[r.childNodes.length-1]!==i)return!1;while(r!==o);return!0}function o(r){var l,u,d,c,f,p,m,h,g,v,y,b,_=s.default.DOM;if(u=e.getDoc()){if(d=u.body,c=u.documentElement,f=i.autoresize_min_height,!d||r&&"setcontent"===r.type&&r.initial||t())return void(d&&c&&(d.style.overflowY="auto",c.style.overflowY="auto"));m=e.dom.getStyle(d,"margin-top",!0),h=e.dom.getStyle(d,"margin-bottom",!0),g=e.dom.getStyle(d,"padding-top",!0),y=e.dom.getStyle(d,"border-top-width",!0),b=e.dom.getStyle(d,"border-bottom-width",!0),v=e.getParam("autoresize_bottom_margin",50),p=d.offsetHeight+parseInt(m,10)+parseInt(h,10)+parseInt(g,10)+parseInt(v,10)+parseInt(y,10)+parseInt(b,10),p&&p<c.offsetHeight&&(p=c.offsetHeight),(isNaN(p)||p<=0)&&(p=s.default.Env.ie?d.scrollHeight:s.default.Env.webkit&&0===d.clientHeight?0:d.offsetHeight),p>i.autoresize_min_height&&(f=p),i.autoresize_max_height&&p>i.autoresize_max_height?(f=i.autoresize_max_height,d.style.overflowY="auto",c.style.overflowY="auto"):(d.style.overflowY="hidden",c.style.overflowY="hidden",d.scrollTop=0),f!==a&&(l=f-a,_.setStyle(e.iframeElement,"height",f+"px"),a=f,s.default.isWebKit&&l<0&&o(r),(r&&"keyup"===r.type||r&&"nodechange"===r.type&&r.element&&"BR"===r.element.tagName)&&n()&&window.scrollTo(0,document.body.scrollHeight))}}function r(e,t,n){setTimeout(function(){o({}),e--?r(e,t,n):n&&n()},t)}var i=e.settings,a=0;e.settings.inline||s.default.Env.iOS||(i.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),i.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t,n;t=e.getParam("autoresize_overflow_padding",1),n=e.getParam("autoresize_bottom_margin",50),t!==!1&&e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),n!==!1&&e.dom.setStyles(e.getBody(),{paddingBottom:n})}),e.on("nodechange setcontent keyup FullscreenStateChanged",o),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){e.dom.addClass(e.getBody(),"wp-autoresize"),r(20,100,function(){r(5,1e3)})}),e.addCommand("wpcomAutoResize",o))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpcom/autoresize",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-charmap/charmap.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/components/dialog/index.jsx"),_=o(b),x=n("./client/components/forms/form-button/index.jsx"),C=o(x),j=function(e){
function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.defaultCharMap=function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},o.renderCell=function(e){return y.default.createElement("div",{key:e[0],onClick:o.onCellClick,role:"button",title:e[1],className:"wpcom-charmap__character"},String.fromCharCode(parseInt(e[0],10)))},o.onCellClick=function(e){o.props.editor.execCommand("mceInsertContent",!1,e.target.textContent.trim())},o.getButtons=function(){return[y.default.createElement(C.default,{isPrimary:!1,"aria-label":o.props.translate("Close special characters dialog"),onClick:o.props.onClose},o.props.translate("Close"))]},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement(_.default,{isVisible:this.props.showDialog,buttons:this.getButtons(),additionalClassNames:"wpcom-charmap__dialog",onClose:this.props.onClose},y.default.createElement("h2",{className:"wpcom-charmap__heading"},this.props.translate("Special characters")),y.default.createElement("div",{className:"wpcom-charmap__table"},this.defaultCharMap().map(this.renderCell,this)))}}]),t}(y.default.Component);j.displayName="CharMap",j.propTypes={onClose:h.default.func,showDialog:h.default.bool,editor:h.default.object},t.default=(0,g.localize)(j),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-charmap/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t;e.on("init",function(){t=document.createElement("div"),t.setAttribute("class","charmap-dialog-container"),e.getContainer().appendChild(t)}),e.on("remove",function(){s.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null}),e.addCommand("Wpcom_CharMap",function(){function n(){e.focus(),o("hide")}function o(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";s.default.render(l.default.createElement(f.default,{showDialog:"show"===o,onClose:n,editor:e}),t)}o("show")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.PluginManager.add("wpcom/charmap",r)};var i=n("./node_modules/react-dom/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/tinymce/tinymce.js"),d=o(u),c=n("./client/components/tinymce/plugins/wpcom-charmap/charmap.jsx"),f=o(c);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-help/help-modal.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/lodash/lodash.js"),h=n("./node_modules/i18n-calypso/index.js"),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./client/components/dialog/index.jsx"),x=o(_),C=n("./client/components/forms/form-button/index.jsx"),j=o(C),E=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.defaultShortcuts=function(){return[{c:o.props.translate("Copy"),x:o.props.translate("Cut")},{v:o.props.translate("Paste"),a:o.props.translate("Select all")},{z:o.props.translate("Undo"),y:o.props.translate("Redo")},{b:o.props.translate("Bold"),i:o.props.translate("Italic")},{u:o.props.translate("Underline"),k:o.props.translate("Insert/edit link")}]},o.additionalShortcuts=function(){return[{1:o.props.translate("Heading 1"),2:o.props.translate("Heading 2")},{3:o.props.translate("Heading 3"),4:o.props.translate("Heading 4")},{5:o.props.translate("Heading 5"),6:o.props.translate("Heading 6")},{l:o.props.translate("Align left"),c:o.props.translate("Align center")},{r:o.props.translate("Align right"),j:o.props.translate("Justify")},{d:o.props.translate("Strikethrough"),q:o.props.translate("Blockquote")},{u:o.props.translate("Bullet list"),o:o.props.translate("Numbered list")},{a:o.props.translate("Insert/edit link"),s:o.props.translate("Remove link")},{m:o.props.translate("Insert/edit image"),t:o.props.translate("Insert Read More tag")},{h:o.props.translate("Keyboard Shortcuts"),x:o.props.translate("Code")},{p:o.props.translate("Insert Page Break tag")}]},o.renderRow=function(e,t){var n=[];return(0,m.forEach)(e,function(e,t){n.push(b.default.createElement("th",{className:"wpcom-help__key",key:t},b.default.createElement("kbd",null,t))),n.push(b.default.createElement("td",{className:"wpcom-help__action",key:e},e))}),b.default.createElement("tr",{key:t},n)},o.getButtons=function(){return[b.default.createElement(j.default,{key:"close",isPrimary:!1,onClick:o.props.onClose},o.props.translate("Close"))]},o.getKeyLabel=function(){return o.props.translate("Key",{context:"Computer key used in keyboard shortcut"})},o.getActionLabel=function(){return o.props.translate("Action",{context:"Action taken when pressing keyboard shortcut"})},o.getTableHead=function(){return b.default.createElement("thead",null,b.default.createElement("tr",null,b.default.createElement("th",{className:"wpcom-help__key"},o.getKeyLabel()),b.default.createElement("th",{className:"wpcom-help__action"},o.getActionLabel()),b.default.createElement("th",{className:"wpcom-help__key"},o.getKeyLabel()),b.default.createElement("th",{className:"wpcom-help__action"},o.getActionLabel())))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.macosx?this.props.translate("Default shortcuts, Command + key:",{context:"Mac shortcuts"}):this.props.translate("Default shortcuts, Ctrl + key:",{context:"Windows shortcuts"}),t=this.props.macosx?this.props.translate("Additional shortcuts, Control + Option + key:",{context:"Mac shortcuts"}):this.props.translate("Additional shortcuts, Shift + Alt + key:",{context:"Windows shortcuts"});return b.default.createElement(x.default,{isVisible:this.props.showDialog,buttons:this.getButtons(),additionalClassNames:"wpcom-help__dialog",onClose:this.props.onClose},b.default.createElement("h2",{className:"wpcom-help__heading"},this.props.translate("Keyboard Shortcuts")),b.default.createElement("p",null,e),b.default.createElement("table",{className:"wpcom-help__table"},this.getTableHead(),b.default.createElement("tbody",null,this.defaultShortcuts().map(this.renderRow,this))),b.default.createElement("p",null,t),b.default.createElement("table",{className:"wpcom-help__table"},this.getTableHead(),b.default.createElement("tbody",null,this.additionalShortcuts().map(this.renderRow,this))))}}]),t}(b.default.Component);E.propTypes={onClose:v.default.func,macosx:v.default.bool,showDialog:v.default.bool},t.default=(0,h.localize)(E),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-help/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t;e.on("init",function(){t=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){s.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),t=null}),e.addCommand("WP_Help",function(){function n(){e.focus(),o("hide")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show";s.default.render(l.default.createElement(f.default,{showDialog:"show"===e,onClose:n,macosx:d.default.Env.mac}),t)}o("show")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.PluginManager.add("wpcom/help",r)};var i=n("./node_modules/react-dom/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/tinymce/tinymce.js"),d=o(u),c=n("./client/components/tinymce/plugins/wpcom-help/help-modal.jsx"),f=o(c);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-sourcecode/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.content,n=e.initial,o=e.load;return t=t.replace(u,function(e,t){return t=t.replace(/\r/,""),t=t.replace(/<br ?\/?>\n?/g,"\n").replace(/<\/?p( [^>]*)?>\n?/g,"\n"),n&&!o||(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),"<pre>"+t+"</pre>"})}function i(e){var t=e.content;return t&&t.indexOf("[")!==-1?t.replace(u,function(e,t){return t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),"<p>"+t+"</p>"}):t}function s(e){e.on("BeforeSetContent",function(e){e.content&&"html"!==e.mode&&(e.content=r(e))}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=i(e))}),e.on("PostProcess",function(e){e.content&&(e.content=i(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapPre=r,t.unwrapPre=i,t.default=function(){l.default.PluginManager.add("wpcom/sourcecode",s)};var a=n("./node_modules/tinymce/tinymce.js"),l=o(a),u=new RegExp("(?:<p>\\s*)?(?:<pre>\\s*)?(\\[(code|sourcecode)[^\\]]*\\][\\s\\S]*?\\[\\/\\2\\])(?:\\s*<\\/pre>)?(?:\\s*<\\/p>)?","gi")},"./client/components/tinymce/plugins/wpcom-tabindex/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=document.getElementById(this.id+"_ifr");t&&t.setAttribute("tabIndex",e)}}function i(e){var t=e&&e.settings;if(t&&"tabindex"in t){var n=Math.min(32767,Number(t.tabindex));(0,a.default)(n)&&e.on("init",r(n))}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/babel-runtime/core-js/number/is-integer.js"),a=o(s);t.default=function(){u.default.PluginManager.add("wpcom/tabindex",i)};var l=n("./node_modules/tinymce/tinymce.js"),u=o(l);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-track-paste/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){m("init");var t=e.getParam("redux_store"),n=function(e){return"application/x-vnd.google-docs-image-clip+wrapped"===e||"application/x-vnd.google-docs-document-slice-clip+wrapped"===e},o=function(e){return e.some(n)?p.SOURCE_GOOGLE_DOCS:p.SOURCE_UNKNOWN},r=function(e,n){m("track paste event");var r=(0,s.default)(n),i=o(r);t.dispatch((0,c.withAnalytics)((0,c.recordTracksEvent)("calypso_editor_content_paste",{mode:e,types:r.join(", "),source:i}),(0,f.pasteEvent)(i)))},i=function(e){return e.clipboardData&&r("visual-editor",e.clipboardData.types)},a=function(e){return e.clipboardData&&r("html-editor",e.clipboardData.types)};e.on("paste",i);var l=e.getParam("textarea");l&&l.addEventListener("paste",a),e.on("remove",function(){e.off("paste",i),l.removeEventListener("paste",a)})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/array/from.js"),s=o(i),a=n("./node_modules/debug/browser.js"),l=o(a),u=n("./node_modules/tinymce/tinymce.js"),d=o(u),c=n("./client/state/analytics/actions.js"),f=n("./client/state/ui/editor/actions.js"),p=n("./client/components/tinymce/plugins/wpcom-track-paste/sources.js"),m=(0,l.default)("calypso:tinymce-plugins:wpcom-track-paste");t.default=function(){d.default.PluginManager.add("wpcom/trackpaste",r)},e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/gallery-view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./client/lib/shortcode/index.js"),x=o(_),C=n("./client/components/gallery-shortcode/index.jsx"),j=o(C),E=function(e){function t(e){(0,a.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={wrapper:null},n}return(0,p.default)(t,e),(0,c.default)(t,null,[{key:"match",value:function(e){var t=x.default.next("gallery",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}},{key:"serialize",value:function(e){return encodeURIComponent(e)}},{key:"edit",value:function(e,t){e.execCommand("wpcomEditGallery",t)}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.setState({wrapper:h.default.findDOMNode(this.refs.view)}),window.MutationObserver&&(this.observer=new MutationObserver(this.props.onResize),this.observer.observe(h.default.findDOMNode(this.refs.view),{attributes:!0,childList:!0,subtree:!0}))}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"renderShortcode",value:function(){if(this.state.wrapper)return b.default.createElement(j.default,{siteId:this.props.siteId,width:this.state.wrapper.clientWidth},this.props.content)}},{key:"render",value:function(){return b.default.createElement("div",{ref:"view",className:"wpview-content wpview-type-gallery"},this.renderShortcode())}}]),t}(y.Component);E.propTypes={siteId:v.default.number,content:v.default.string,onResize:v.default.func},E.defaultProps={onResize:function(){}},t.default=E,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){var t=D(".wpview-marker");return!!t.length&&(t.each(function(t,n){var o=e.dom.getAttrib(n,"data-wpview-text"),r=e.dom.getAttrib(n,"data-wpview-type");e.dom.replace(e.dom.createFragment('<div class="wpview-wrap" data-wpview-text="'+o+'" data-wpview-type="'+r+'"><p class="wpview-selection-before"> </p><div class="wpview-body" contenteditable="false"></div><p class="wpview-selection-after"> </p></div>'),n)}),!0)}function n(){e.nodeChanged()}function o(){if(t()){var o=e.getParam("redux_store"),s=(0,v.getSelectedSiteId)(o.getState());D(".wpview-wrap").each(function(e,t){var a=D(t);if(void 0===a.attr("data-wpview-rendered")){var l=a.attr("data-wpview-type");(0,g.renderWithReduxStore)(c.default.createElement(h.default.components[l],{content:r(t),siteId:s,onResize:(0,i.debounce)(n,500)}),a.find(".wpview-body")[0],o),a.attr("data-wpview-rendered","")}})}}function r(e){return decodeURIComponent(D(e).attr("data-wpview-text")||"")}function s(e){return l(e,"wpview-wrap")}function l(e,t){for(;e&&e.parentNode;){if(e.className&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1)return e;e=e.parentNode}return!1}function d(e){e.stopPropagation()}function f(t,n){var o=t?"before":"after",r=t?0:1;_(),e.selection.setCursorLocation(e.dom.select(".wpview-selection-"+o,n)[0],r),e.nodeChanged()}function m(t,n,o){var r=e.dom,i=r.create("p");O.ie&&O.ie<11||(i.innerHTML='<br data-mce-bogus="1">'),n?t.parentNode.insertBefore(i,t):r.insertAfter(i,t),_(),n&&o===A.ENTER?f(n,t):e.selection.setCursorLocation(i,0),e.nodeChanged()}function y(t){e.undoManager.transact(function(){m(t),u.default.unmountComponentAtNode(D(t).find(".wpview-body")[0]),e.dom.remove(t),e.focus()})}function b(t){var n,o=e.dom;t&&(t!==S&&(I||e.getBody().focus(),_(),S=t,o.setAttrib(t,"data-mce-selected",1),n=o.create("div",{class:"wpview-clipboard",contenteditable:"true"},r(t)),e.dom.select(".wpview-body",t)[0].appendChild(n),o.bind(n,"beforedeactivate focusin focusout",d),o.bind(S,"beforedeactivate focusin focusout",d),z?e.selection.select(n):e.selection.select(n,!0)),e.nodeChanged(),e.fire("wpview-selected",t))}function _(){var t,n=e.dom;S&&(t=e.dom.select(".wpview-clipboard",S)[0],n.unbind(t),n.remove(t),n.unbind(S,"beforedeactivate focusin focusout click mouseup",d),n.setAttrib(S,"data-mce-selected",null)),S=null}function x(e,t){return"<p>"+window.decodeURIComponent(t)+"</p>"}function C(e){return e.replace(/<div[^>]+data-wpview-text="([^"]+)"[^>]*>(?:[\s\S]+?wpview-selection-after[^>]+>[^<>]*<\/p>\s*|\.)<\/div>/g,x).replace(/<p [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/p>/g,x)}function j(){var t,n;e.isHidden()||(t=e.getContent({format:"raw"}),n=h.default.setMarkers(t),t!==n&&e.setContent(n,{format:"raw",isSettingMarkers:!0}))}function E(e){D("div.wpview-wrap, p.wpview-marker",e).each(function(e,t){t.innerHTML="."})}function w(e){return e<=47&&e!==A.SPACEBAR&&e!==A.ENTER&&e!==A.DELETE&&e!==A.BACKSPACE&&(e<37||e>40)||e>=224||e>=144&&e<=150||e>=91&&e<=93||e>=112&&e<=135}var S,k,T,P,I,R,N,M,D=e.$,O=a.default.Env,A=a.default.util.VK,L=a.default.dom.TreeWalker,B=!1,F=!0,z=/iPad|iPod|iPhone/.test(navigator.userAgent);e.on("BeforeAddUndo",function(e){e.level.content&&(e.level.content=C(e.level.content))}),e.on("BeforeSetContent",function(t){var n;if(t.selection||D(".wpview-wrap .wpview-body").each(function(e,t){u.default.unmountComponentAtNode(t)}),t.content){if(!t.load&&(S&&y(S),n=e.selection.getNode(),n&&n!==e.getBody()&&/^\s*https?:\/\/\S+\s*$/i.test(t.content))){if(n=e.dom.getParent(n,"p"),!n||!/^[\s\uFEFF\u00A0]*$/.test(D(n).text()||""))return;n.innerHTML=""}t.isSettingMarkers||(t.content=h.default.setMarkers(t.content))}}),e.on("pastePreProcess",function(e){var t=e.content;if(t){t=a.default.trim(t.replace(/<[^>]+>/g,""));var n=/(https?:\/\/[^<]*)(\.jpg|\.jpeg|\.gif|\.png)\??.*$/i.exec(t);n?e.content='<img src="'+n[1]+n[2]+'" style="max-width:100%;" />':/^https?:\/\/\S+$/i.test(t)&&(e.content=t)}}),e.on("SetContent",function(){o()}),e.on("click",function(t){var n,o,r,i=t.clientX,l=t.clientY,u=e.getBody(),d=u.getBoundingClientRect(),c=u.firstChild,p=u.lastChild;c&&p&&(n=c.getBoundingClientRect(),o=p.getBoundingClientRect(),l<n.top&&(r=s(c))?(f(!0,r),t.preventDefault()):l>o.bottom&&(r=s(p))?(f(!1,r),t.preventDefault()):(i<d.left||i>d.right)&&a.default.each(e.dom.select(".wpview-wrap"),function(e){var n=e.getBoundingClientRect();return!(l<n.top)&&(l>=n.top&&l<=n.bottom?(i<d.left?(f(!0,e),t.preventDefault()):i>d.right&&(f(!1,e),t.preventDefault()),!1):void 0)}))}),e.on("init",function(){var t=!1,n=e.selection,o=window.MutationObserver||window.WebKitMutationObserver;e.on("BeforeSetContent",function(){var t,o,r=s(n.getNode());r&&(!r.nextSibling||s(r.nextSibling)?(o=e.getDoc().createTextNode(""),e.dom.insertAfter(o,r)):(t=new L(r.nextSibling,r.nextSibling),o=t.next()),n.select(o),n.collapse(!0))}),e.dom.bind(e.getDoc(),"touchmove",function(){t=!0}),e.on("mousedown mouseup click touchend",function(e){var n=s(e.target);return F=!1,n?(e.stopImmediatePropagation(),e.preventDefault(),"touchend"===e.type&&t?t=!1:b(n),!1):("touchend"!==e.type&&"mousedown"!==e.type||_(),void("touchend"===e.type&&t&&(t=!1)))},!0),o&&new o(function(){e.fire("wp-body-class-change")}).observe(e.getBody(),{attributes:!0,attributeFilter:["class"]})}),e.on("preinit show",function(){h.default.emitters.forEach(function(t){t.addListener("change",j,e.getParam("redux_store"))}),j()}),e.on("hide remove",function(){h.default.emitters.forEach(function(e){e.removeListener("change",j)})}),e.on("PreProcess",function(e){E(e.node)},!0),e.on("hide",function(){_(),E()}),e.on("GetContent",function(e){"raw"===e.format&&e.content&&!e.selection&&(e.content=C(e.content))}),e.on("PostProcess",function(e){e.content&&(e.content=e.content.replace(/<div [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/div>/g,x).replace(/<p [^>]*?data-wpview-text="([^"]+)"[^>]*>[\s\S]*?<\/p>/g,x))}),e.on("keydown",function(t){var n,o,r,i,a,l,u,d=t.keyCode,c=e.dom,p=e.selection;if(S){if((t.metaKey||t.ctrlKey)&&d!==A.BACKSPACE&&86!==d||d>=112&&d<=123)return void((t.metaKey||t.ctrlKey)&&88===d&&(B=S));if(o=s(p.getNode()),o!==S)return void _();d===A.LEFT?(f(!0,o),t.preventDefault()):d===A.UP?(o.previousSibling?s(o.previousSibling)?f(!0,o.previousSibling):(_(),p.select(o.previousSibling,!0),p.collapse()):f(!0,o),t.preventDefault()):d===A.RIGHT?(f(!1,o),t.preventDefault()):d===A.DOWN?(o.nextSibling?s(o.nextSibling)?f(!1,o.nextSibling):(_(),p.setCursorLocation(o.nextSibling,0)):f(!1,o),t.preventDefault()):w(d)||(y(S),d!==A.ENTER&&d!==A.DELETE&&d!==A.BACKSPACE||t.preventDefault())}else{if(t.metaKey||t.ctrlKey||d>=112&&d<=123)return;if(n=p.getNode(),T=n,o=s(n),p.isCollapsed()||(a=p.getRng(),(o=s(a.endContainer))?(l=a.cloneRange(),p.select(o.previousSibling,!0),p.collapse(),u=p.getRng(),l.setEnd(u.endContainer,u.endOffset),p.setRng(l)):(o=s(a.startContainer))&&(l=a.cloneRange(),l.setStart(o.nextSibling,0),p.setRng(l))),!o)return void(t.keyCode===A.BACKSPACE&&(e.dom.isEmpty(n)?(o=s(n.previousSibling))&&(f(!1,o),e.dom.remove(n),t.preventDefault()):(a=p.getRng())&&0===a.startOffset&&0===a.endOffset&&(o=s(n.previousSibling))&&(f(!1,o),t.preventDefault())));if(!(r=c.hasClass(o,"wpview-selection-before"))&&!(i=c.hasClass(o,"wpview-selection-after")))return;if(w(d))return;i&&d===A.UP||r&&d===A.BACKSPACE?(o.previousSibling?s(o.previousSibling)?f(!1,o.previousSibling):c.isEmpty(o.previousSibling)&&d===A.BACKSPACE?c.remove(o.previousSibling):(p.select(o.previousSibling,!0),p.collapse()):f(!0,o),t.preventDefault()):!i||d!==A.DOWN&&d!==A.RIGHT?!r||d!==A.UP&&d!==A.LEFT?r&&d===A.DOWN?(o.nextSibling?s(o.nextSibling)?f(!0,o.nextSibling):p.setCursorLocation(o.nextSibling,0):f(!1,o),t.preventDefault()):i&&d===A.LEFT||r&&d===A.RIGHT?(b(o),t.preventDefault()):i&&d===A.BACKSPACE?(y(o),t.preventDefault()):i?m(o):r&&m(o,!0,d):(o.previousSibling&&(s(o.previousSibling)?f(d===A.UP,o.previousSibling):(p.select(o.previousSibling,!0),p.collapse())),t.preventDefault()):(o.nextSibling&&(s(o.nextSibling)?f(d===A.RIGHT,o.nextSibling):p.setCursorLocation(o.nextSibling,0)),t.preventDefault()),d===A.ENTER&&t.preventDefault()}}),e.on("keyup",function(){B&&(y(B),B=!1)}),e.on("focus",function(){var t;I=!0,e.dom.addClass(e.getBody(),"has-focus"),F&&(t=s(e.getBody().firstChild))&&f(!0,t),F=!1}),e.on("blur",function(){I=!1,e.dom.removeClass(e.getBody(),"has-focus")}),e.on("NodeChange",function(t){var n=e.dom,o=e.dom.select(".wpview-wrap"),r=t.element.className,i=s(t.element),u=T;if(T=!1,clearInterval(k),a.default.each(o,function(e){e.className&&(e.className=e.className.replace(/ ?\bwpview-(?:selection-before|selection-after|cursor-hide)\b/g,""))}),I&&i)if("wpview-selection-before"!==r&&"wpview-selection-after"!==r||!e.selection.isCollapsed())l(t.element,"wpview-clipboard")||P||(_(),P++,f(!0,i));else{if(P=0,_(),u===i.previousSibling)return void f(!0,i);if(u===i.nextSibling)return void f(!1,i);n.addClass(i,r),k=setInterval(function(){n.hasClass(i,"wpview-cursor-hide")?n.removeClass(i,"wpview-cursor-hide"):n.addClass(i,"wpview-cursor-hide")},500)}}),e.on("BeforeExecCommand",function(){var t,n=e.selection.getNode();n&&((N="wpview-selection-before"===n.className)||"wpview-selection-after"===n.className)&&(t=s(n))&&(m(t,N),R=t)}),e.on("ExecCommand",function(t){var n,o;"embedDialog"!==t.command&&(S&&(n=S,_(),b(n)),R&&(o=R[N?"previousSibling":"nextSibling"],o&&"P"===o.nodeName&&e.dom.isEmpty(o)&&(e.dom.remove(o),f(N,R)),R=!1))}),e.on("ResolveName",function(t){e.dom.hasClass(t.target,"wpview-wrap")?(t.name=e.dom.getAttrib(t.target,"data-wpview-type")||"wpview",t.stopPropagation()):s(t.target)&&(t.preventDefault(),t.stopPropagation())}),e.addButton("wp_view_edit",{tooltip:p.default.translate("Edit",{context:"verb"}),icon:"dashicon dashicons-edit",onPostRender:function(){e.on("wptoolbar",function(){var t;S&&(t=e.dom.getAttrib(S,"data-wpview-type"),this.visible(h.default.isEditable(t)))}.bind(this))},onClick:function(){var t;S&&(t=e.dom.getAttrib(S,"data-wpview-type"),h.default.edit(t,e,r(S)))}}),e.addButton("wp_view_remove",{tooltip:p.default.translate("Remove"),icon:"dashicon dashicons-no",onClick:function(){S&&y(S)}}),e.once("preinit",function(){M=e.wp._createToolbar(["wp_view_edit","wp_view_remove"])}),e.on("wptoolbar",function(e){S&&(e.element=S,e.toolbar=M)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){a.default.PluginManager.add("wpcom/view",r)};var i=n("./node_modules/lodash/lodash.js"),s=n("./node_modules/tinymce/tinymce.js"),a=o(s),l=n("./node_modules/react-dom/index.js"),u=o(l),d=n("./node_modules/react/react.js"),c=o(d),f=n("./node_modules/i18n-calypso/index.js"),p=o(f),m=n("./client/components/tinymce/plugins/wpcom-view/views.js"),h=o(m),g=n("./client/lib/react-helpers/index.js"),v=n("./client/state/ui/selectors.js");e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/resizable-view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m);t.default=function(e){var t,n,o=e.displayName||e.name||"";return n=t=function(t){function n(){(0,u.default)(this,n);var e=(0,p.default)(this,(n.__proto__||(0,a.default)(n)).apply(this,arguments));return e.boundSetWrapperState=e.setWrapperState.bind(e),e.state={wrapper:null},e}return(0,h.default)(n,t),(0,c.default)(n,[{key:"setWrapperState",value:function(e){e&&(this.setState({wrapper:e}),this.disconnectObserver(),this.observer=new MutationObserver(this.props.onResize),this.observer.observe(e,{attributes:!0,childList:!0,subtree:!0}))}},{key:"componentWillUnmount",value:function(){this.disconnectObserver()}},{key:"disconnectObserver",value:function(){this.observer&&this.observer.disconnect()}},{key:"render",value:function(){var t=void 0;return this.state.wrapper&&(t={width:this.state.wrapper.clientWidth}),v.default.createElement("div",{ref:this.boundSetWrapperState},v.default.createElement(e,(0,i.default)({},this.props,t)))}}]),n}(g.PureComponent),t.displayName="ResizableView("+o+")",
t.propTypes={onResize:b.default.func},t.defaultProps={onResize:function(){}},n};var g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y);e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/events/events.js"),s=r(i),a=n("./node_modules/lodash/lodash.js"),l=n("./client/components/tinymce/plugins/wpcom-view/gallery-view.jsx"),u=r(l),d=n("./client/components/tinymce/plugins/wpcom-view/views/embed/index.js"),c=r(d),f=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/index.jsx"),p=o(f),m=n("./client/components/tinymce/plugins/wpcom-view/views/video/index.js"),h=o(m),g=n("./client/components/tinymce/plugins/wpcom-view/views/simple-payments/index.jsx"),v=r(g),y=n("./client/config/index.js"),b={gallery:u.default,embed:new c.default,contactForm:p,video:h};(0,y.isEnabled)("simple-payments")&&(b.simplePayments=v.default);var _=(0,a.mapValues)(b,function(e){return"function"==typeof e.getComponent?e.getComponent():e}),x=(0,a.values)(b).filter(function(e){return e instanceof s.default});t.default={setMarkers:function(e){var t=[{content:e}],n=void 0;return(0,a.forEach)(b,function(e,o){n=t.slice(),t=[],(0,a.forEach)(n,function(n){var r=n.content,i=void 0;if(n.processed)return void t.push(n);for(;r&&(i=e.match(r));)i.index&&t.push({content:r.substring(0,i.index)}),t.push({content:'<p class="wpview-marker" data-wpview-text="'+e.serialize(i.content,i.options)+'" data-wpview-type="'+o+'">.</p>',processed:!0}),r=r.slice(i.index+i.content.length);r&&t.push({content:r})})}),e=(0,a.map)(t,"content").join(""),e.replace(/<p>\s*<p data-wpview-marker=/g,"<p data-wpview-marker=").replace(/<\/p>\s*<\/p>/g,"</p>")},isEditable:function(e){return!(!b[e]||!b[e].edit)},edit:function(e,t,n){this.isEditable(e)&&b[e].edit(t,n)},components:_,emitters:x},e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=p.default.next("contact-form",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}function i(e){return encodeURIComponent(e)}function s(e,t){e.execCommand("wpcomContactForm",t)}function a(){return g}Object.defineProperty(t,"__esModule",{value:!0}),t.match=r,t.serialize=i,t.edit=s,t.getComponent=a;var l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/i18n-calypso/index.js"),c=n("./client/components/tinymce/plugins/contact-form/shortcode-utils.js"),f=n("./client/lib/shortcode/index.js"),p=o(f),m=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fields.jsx"),h=o(m),g=(0,d.localize)(function(e){var t=e.content,n=e.translate,o=(0,c.deserialize)(t),r=o.fields;return u.default.createElement("div",{className:"wpview-content wpview-type-contact-form"},[].concat(r).map(h.default),u.default.createElement("button",{disabled:!0},n("Submit")))})},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fields.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return v.hasOwnProperty(e.type)?v[e.type].apply(this,arguments):null};var r=n("./node_modules/react/react.js"),i=o(r),s=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fieldset.jsx"),a=o(s),l=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-legend.jsx"),u=o(l),d=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-required.jsx"),c=o(d),f=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(u.default,e),i.default.createElement("input",{type:"text"}))},p=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(u.default,e),i.default.createElement("textarea",null))},m=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement("label",null,i.default.createElement("input",{type:"checkbox"}),e.label,i.default.createElement(c.default,{required:e.required})))},h=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(u.default,e),i.default.createElement("select",null,[].concat(e.options.split(",")).map(function(e,t){return i.default.createElement("option",{key:"contact-form-select-option-"+t},e)})))},g=function(e,t){return i.default.createElement(a.default,{key:"contact-form-field-"+t},i.default.createElement(u.default,e),[].concat(e.options.split(",")).map(function(e,t){return i.default.createElement("label",{key:"contact-form-radio-"+t},i.default.createElement("input",{type:"radio"}),i.default.createElement("span",null,e))}))},v={name:f,email:f,url:f,text:f,textarea:p,checkbox:m,select:h,radio:g};e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-fieldset.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return v.default.createElement("fieldset",(0,i.default)({},(0,y.omit)(this.props,"className"),{className:"wpview-type-contact-form-field"}),this.props.children)}}]),t}(v.default.Component);b.displayName="ContactFormViewPreviewFieldset",t.default=b,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-legend.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-required.jsx"),v=o(g),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement("legend",null,this.props.label,h.default.createElement(v.default,this.props))}}]),t}(h.default.Component);y.displayName="PreviewLegend",t.default=y,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/contact-form/preview-required.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.props.required?h.default.createElement("em",null," (",this.props.translate("required"),")"):null}}]),t}(h.default.Component);v.displayName="ContactFormViewPreviewRequired",t.default=(0,g.localize)(v),e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/embed/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/get.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/events/events.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=n("./client/lib/embeds/list-store.js"),C=o(x),j=n("./client/lib/embeds/store.js"),E=o(j),w=n("./client/lib/embeds/actions.js"),S=o(w),k=n("./client/components/tinymce/plugins/wpcom-view/views/embed/view.jsx"),T=o(k),P=n("./client/state/ui/selectors.js"),I=n("./client/state/action-types.js"),R=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return e.sitesListener=e.updateSite.bind(e),e}return(0,v.default)(t,e),(0,c.default)(t,[{key:"onChange",value:function(){this.emit("change"),this.fetchSiteEmbeds()}},{key:"updateSite",value:function(e){var t=e||(0,P.getSelectedSiteId)(this.store.getState());this.hasOwnProperty("siteId")?this.siteId!==t&&(this.siteId=t,this.onChange()):(this.siteId=t,this.fetchSiteEmbeds())}},{key:"addListener",value:function(e,n,o){(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"addListener",this).call(this,e,n),"change"===e&&1===this.listeners(e).length&&(this.store=o,this.selectedSiteSubscriberId=(0,_.uniqueId)(),o.dispatch({type:I.SELECTED_SITE_SUBSCRIBE,listener:this.sitesListener}),this.embedsListListener=C.default.addListener(this.onChange.bind(this)),this.embedsListener=E.default.addListener(this.onChange.bind(this)),this.updateSite())}},{key:"removeListener",value:function(e,n){(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"removeListener",this).call(this,e,n),"change"!==e||this.listeners(e).length||(this.store.dispatch({type:I.SELECTED_SITE_UNSUBSCRIBE,listener:this.sitesListener}),this.embedsListListener&&this.embedsListListener.remove(),this.embedsListener&&this.embedsListener.remove())}},{key:"fetchSiteEmbeds",value:function(){this.siteId&&!C.default.get(this.siteId)&&S.default.fetch(this.siteId)}},{key:"fetchEmbed",value:function(e){this.siteId&&!E.default.get(e).status&&S.default.fetch(this.siteId,e)}},{key:"match",value:function(e){var t=this;if(this.siteId){var n=C.default.get(this.siteId);if(n&&"LOADED"===n.status)for(var o=/(^|<p>)(https?:\/\/[^\s"]+?)(<\/p>\s*|$)/gi,r=void 0,s=function(){var e=r[2],o=n.embeds.some(function(t){return t.test(e)});if(!o)return"continue";var i=E.default.get(e);return i.body?{v:{index:r.index+r[1].length,content:e}}:((0,_.defer)(function(){return t.fetchEmbed(e)}),"continue")};r=o.exec(e);){var a=s();switch(a){case"continue":continue;default:if("object"===("undefined"==typeof a?"undefined":(0,i.default)(a)))return a.v}}}}},{key:"serialize",value:function(e){return encodeURIComponent(e)}},{key:"getComponent",value:function(){return T.default}},{key:"edit",value:function(e,t){e.execCommand("embedDialog",t)}}]),t}(b.default);t.default=R,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/embed/view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/flux/utils.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./client/components/resizable-iframe/index.jsx"),j=o(C),E=n("./client/lib/embeds/store.js"),w=o(E),S=n("./client/lib/embed-frame-markup/index.jsx"),k=o(S),T=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.setState({wrapper:this.refs.view},this.setHtml)}},{key:"componentDidUpdate",value:function(e,t){this.state.body!==t.body&&this.setHtml(),this.constrainEmbedDimensions()}},{key:"constrainEmbedDimensions",value:function(){if(this.refs.iframe){var e=h.default.findDOMNode(this.refs.view),t=h.default.findDOMNode(this.refs.iframe);if(t.contentDocument){var n=t.contentDocument.querySelector("iframe");if(n&&n.width){var o=parseInt(n.width,10);if(!(o<=e.clientWidth)&&(n.style.width=e.clientWidth+"px",n.height)){var r=parseInt(n.height,10)/o;n.style.height=Math.round(e.clientWidth*r)+"px"}}}}}},{key:"setHtml",value:function(){if(this.state.body&&this.refs.iframe){var e=h.default.findDOMNode(this.refs.iframe);if(e.contentDocument){var t=(0,k.default)((0,x.pick)(this.state,"body","scripts","styles"));e.contentDocument.open(),e.contentDocument.write(t),e.contentDocument.body.style.width="100%",e.contentDocument.body.style.overflow="hidden",e.contentDocument.close()}}}},{key:"renderFrame",value:function(){if(this.state.wrapper)return b.default.createElement(j.default,{ref:"iframe",onResize:this.props.onResize,frameBorder:"0",seamless:!0,width:"100%"})}},{key:"render",value:function(){return b.default.createElement("div",{ref:"view",className:"wpview-content wpview-type-embed"},this.renderFrame())}}],[{key:"getStores",value:function(){return[w.default]}},{key:"calculateState",value:function(e,t){return w.default.get(t.content)}}]),t}(y.Component);T.propTypes={siteId:v.default.number,content:v.default.string,onResize:v.default.func},T.defaultProps={onResize:function(){}};var P=_.Container.create(T,{withProps:!0});t.default=P,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/simple-payments/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/i18n-calypso/index.js"),y=n("./node_modules/lodash/lodash.js"),b=n("./client/lib/shortcode/index.js"),_=o(b),x=n("./client/components/tinymce/plugins/simple-payments/shortcode-utils.js"),C=n("./client/state/selectors/get-simple-payments.js"),j=o(C),E=n("./client/state/ui/selectors.js"),w=n("./client/lib/format-currency/index.js"),S=o(w),k=n("./client/components/data/query-simple-payments/index.js"),T=o(k),P=n("./client/components/data/query-media/index.jsx"),I=o(P),R=n("./client/state/selectors/get-media-item.js"),N=o(R),M=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.translate,n=e.productId,o=e.product,r=e.siteId;if(!o)return h.default.createElement(T.default,{siteId:r,productId:n});var i=this.props.productImage,s=o.title,a=o.description,l=o.price,u=o.currency,d=o.multiple,c=o.featuredImageId;return h.default.createElement("div",{className:"wpview-content wpview-type-simple-payments"},c&&h.default.createElement(I.default,{siteId:r,mediaId:c}),h.default.createElement("div",{className:"wpview-type-simple-payments__wrapper"},i&&h.default.createElement("div",{className:"wpview-type-simple-payments__image-part"},h.default.createElement("figure",{className:"wpview-type-simple-payments__image-figure"},h.default.createElement("img",{className:"wpview-type-simple-payments__image",src:i.URL}))),h.default.createElement("div",{className:"wpview-type-simple-payments__text-part"},h.default.createElement("div",{className:"wpview-type-simple-payments__title"},s),h.default.createElement("div",{className:"wpview-type-simple-payments__description"},a),h.default.createElement("div",{className:"wpview-type-simple-payments__price-part"},(0,S.default)(l,u)),h.default.createElement("div",{className:"wpview-type-simple-payments__pay-part"},d&&h.default.createElement("div",{className:"wpview-type-simple-payments__pay-quantity"},h.default.createElement("input",{className:"wpview-type-simple-payments__pay-quantity-input",type:"text",value:"1",readOnly:!0})),h.default.createElement("div",{className:"wpview-type-simple-payments__pay-paypal-button-wrapper"},h.default.createElement("div",{className:"wpview-type-simple-payments__pay-paypal-button-content"},h.default.createElement("span",{className:"wpview-type-simple-payments__pay-paypal-button-text"},t("Pay with")),h.default.createElement("span",{className:"wpview-type-simple-payments_paypal-logo"})))))))}}]),t}(m.Component);M=(0,g.connect)(function(e,t){var n=t.content,o=(0,x.deserialize)(n),r=o.id,i=void 0===r?null:r,s=(0,E.getSelectedSiteId)(e),a=(0,j.default)(e,s,i);return{shortcodeData:o,productId:i,siteId:s,product:a,productImage:(0,N.default)(e,s,(0,y.get)(a,"featuredImageId"))}})((0,v.localize)(M)),M.match=function(e){var t=_.default.next("simple-payment",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}},M.serialize=function(e){return encodeURIComponent(e)},M.edit=function(e,t){e.execCommand("simplePaymentsButton",t)},t.default=M,e.exports=t.default},"./client/components/tinymce/plugins/wpcom-view/views/video/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=l.default.next("wpvideo",e);if(t)return{index:t.index,content:t.content,options:{shortcode:t.shortcode}}}function i(e){return encodeURIComponent(e)}function s(){return d.default}Object.defineProperty(t,"__esModule",{value:!0}),t.match=r,t.serialize=i,t.getComponent=s;var a=n("./client/lib/shortcode/index.js"),l=o(a),u=n("./client/components/tinymce/plugins/wpcom-view/views/video/view.jsx"),d=o(u)},"./client/components/tinymce/plugins/wpcom-view/views/video/view.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.siteId,n=e.content,o=e.width;if(!t||!o)return null;var r=(0,m.stringify)((0,d.merge)({attrs:{named:{w:o}}},(0,m.parse)(n)));return l.default.createElement(g.default,{siteId:t,width:o},r)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./client/components/tinymce/plugins/wpcom-view/resizable-view.jsx"),f=o(c),p=n("./client/state/ui/selectors.js"),m=n("./client/lib/shortcode/index.js"),h=n("./client/components/shortcode/index.jsx"),g=o(h);r.propTypes={siteId:s.default.number,content:s.default.string,width:s.default.number},t.default=(0,u.connect)(function(e){return{siteId:(0,p.getSelectedSiteId)(e)}})((0,f.default)(r)),e.exports=t.default},"./client/components/tinymce/plugins/wpcom/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t,n=s.default.DOM,o=s.default.each;e.on("focus",function(){window.wpActiveEditor=e.id}),e.on("BeforeSetContent",function(e){var t;e.content&&(e.content.indexOf("<!--more")!==-1&&(t=(0,a.translate)("Read more…"),e.content=e.content.replace(/<!--more(.*?)-->/g,function(e,n){return'<img src="'+s.default.Env.transparentSrc+'" data-wp-more="more" data-wp-more-text="'+n+'" class="wp-more-tag mce-wp-more" title="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />'})),e.content.indexOf("<!--nextpage-->")!==-1&&(t=(0,a.translate)("Page break"),e.content=e.content.replace(/<!--nextpage-->/g,'<img src="'+s.default.Env.transparentSrc+'" data-wp-more="nextpage" class="wp-more-tag mce-wp-nextpage" title="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />')),e.load&&"raw"!==e.format&&(e.content=u.default.wpautop(e.content)))}),e.on("PostProcess",function(e){e.get&&(e.content=e.content.replace(/<img[^>]+>/g,function(e){var t,n="";return e.indexOf('data-wp-more="more"')!==-1?((t=e.match(/data-wp-more-text="([^"]+)"/))&&(n=t[1]),e="<!--more"+n+"-->"):e.indexOf('data-wp-more="nextpage"')!==-1&&(e="<!--nextpage-->"),e}))}),e.on("ResolveName",function(t){var n;"IMG"===t.target.nodeName&&(n=e.dom.getAttrib(t.target,"data-wp-more"))&&(t.name=n)}),e.addCommand("WP_More",function(t){var n,o,r,i="wp-more-tag",l=e.dom,u=e.selection.getNode();return t=t||"more",i+=" mce-wp-"+t,r="more"===t?(0,a.translate)("Read more…"):(0,a.translate)("Next page"),o='<img src="'+s.default.Env.transparentSrc+'" title="'+r+'" class="'+i+'" data-wp-more="'+t+'" data-mce-resize="false" data-mce-placeholder="1" />',"BODY"===u.nodeName||"P"===u.nodeName&&"BODY"===u.parentNode.nodeName?void e.insertContent(o):(n=l.getParent(u,function(e){return!(!e.parentNode||"BODY"!==e.parentNode.nodeName)},e.getBody()),void(n&&("P"===n.nodeName?n.appendChild(l.create("p",null,o).firstChild):l.insertAfter(l.create("p",null,o),n),e.nodeChanged())))}),e.addCommand("WP_Code",function(){e.formatter.toggle("code")}),e.addCommand("WP_Page",function(){e.execCommand("WP_More","nextpage")}),e.addButton("wp_more",{tooltip:(0,a.translate)("Insert Read More tag"),onclick:function(){e.execCommand("WP_More","more")}}),e.addButton("wp_page",{tooltip:(0,a.translate)("Page break"),onclick:function(){e.execCommand("WP_More","nextpage")}}),e.addButton("wp_help",{tooltip:(0,a.translate)("Keyboard Shortcuts"),cmd:"WP_Help"}),e.addButton("wp_charmap",{icon:"charmap",tooltip:(0,a.translate)("Special Characters"),cmd:"Wpcom_CharMap"}),e.addButton("wp_code",{tooltip:(0,a.translate)("Code"),cmd:"WP_Code",stateSelector:"code"}),e.addMenuItem("wp_more",{text:(0,a.translate)("Insert Read More tag"),icon:"wp_more",context:"insert",onclick:function(){e.execCommand("WP_More","more")}}),e.addMenuItem("wp_page",{text:(0,a.translate)("Page break"),icon:"wp_page",context:"insert",onclick:function(){e.execCommand("WP_More","nextpage")}}),e.on("BeforeExecCommand",function(n){!s.default.Env.webkit||"InsertUnorderedList"!==n.command&&"InsertOrderedList"!==n.command||(t||(t=e.dom.create("style",{type:"text/css"},"#tinymce,#tinymce span,#tinymce li,#tinymce li>span,#tinymce p,#tinymce p>span{font:medium sans-serif;color:#000;line-height:normal;}")),e.getDoc().head.appendChild(t))}),e.on("ExecCommand",function(n){s.default.Env.webkit&&t&&("InsertUnorderedList"===n.command||"InsertOrderedList"===n.command)&&e.dom.remove(t)}),e.on("init",function(){var t=s.default.Env,n=["mceContentBody"],r=e.getDoc(),i=e.dom;s.default.Env.iOS&&i.addClass(r.documentElement,"ios"),"rtl"===e.getParam("directionality")&&(n.push("rtl"),i.setAttrib(r.documentElement,"dir","rtl")),t.ie?9===parseInt(t.ie,10)?n.push("ie9"):8===parseInt(t.ie,10)?n.push("ie8"):t.ie<8&&n.push("ie7"):t.webkit&&n.push("webkit"),n.push("wp-editor"),o(n,function(e){e&&i.addClass(r.body,e)}),e.on("BeforeSetContent",function(e){e.content&&(e.content=e.content.replace(/<p>\s*<(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)( [^>]*)?>/gi,"<$1$2>").replace(/<\/(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)>\s*<\/p>/gi,"</$1>"))}),e.getParam("wp_paste_filters",!0)&&(e.on("PastePreProcess",function(e){e.content=e.content.replace(/<br class="?Apple-interchange-newline"?>/gi,""),s.default.Env.webkit||(e.content=e.content.replace(/(<[^>]+) style="[^"]*"([^>]*>)/gi,"$1$2"),e.content=e.content.replace(/(<[^>]+) data-mce-style=([^>]+>)/gi,"$1 style=$2"))}),e.on("PastePostProcess",function(e){o(i.select("p",e.node),function(e){i.isEmpty(e)&&i.remove(e)})}))}),e.on("SaveContent",function(t){return!e.inline&&e.isHidden()?void(t.content=t.element.value):(t.content=t.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),void(t.content=u.default.removep(t.content)))}),e.on("BeforeSetContent",function(e){e.content&&(e.content=(0,d.removeEmptySpacesInParagraphs)(e.content))}),e.on("preInit",function(){e.schema.addValidElements("@[id|accesskey|class|dir|lang|style|tabindex|title|contenteditable|draggable|dropzone|hidden|spellcheck|translate],i,b"),s.default.Env.iOS&&(e.settings.height=300),o({c:"JustifyCenter",r:"JustifyRight",l:"JustifyLeft",j:"JustifyFull",q:"mceBlockQuote",u:"InsertUnorderedList",o:"InsertOrderedList",s:"unlink",m:"WP_Medialib",t:"WP_More",d:"Strikethrough",h:"WP_Help",p:"WP_Page",x:"WP_Code"},function(t,n){e.shortcuts.add("access+"+n,"",t)})}),e.on("preinit",function(){function t(t,r){function i(){if(!a)return this;var e,t,o=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,i=window.innerWidth,s=window.innerHeight,l=g?g.getBoundingClientRect():{top:0,right:i,bottom:s,left:0,width:i,height:s},f=this.getEl(),p=f.offsetWidth,m=f.offsetHeight,v=a.getBoundingClientRect(),y=(v.left+v.right)/2,b=5,_=8,x=m+_+b,C=h?h.getBoundingClientRect().bottom:0,j=u?u.getBoundingClientRect().bottom:0,E=d?s-d.getBoundingClientRect().top:0,w=c?s-c.getBoundingClientRect().top:0,S=Math.max(0,C,j,l.top),k=Math.max(0,E,w,s-l.bottom),T=v.top+l.top-S,P=s-l.top-v.bottom-k,I=s-S-k,R="";return T>=I||P>=I?this.hide():(this.bottom?P>=x?(R=" mce-arrow-up",e=v.bottom+l.top+r):T>=x&&(R=" mce-arrow-down",e=v.top+l.top+r-m-_):T>=x?(R=" mce-arrow-down",e=v.top+l.top+r-m-_):P>=x&&I/2>v.bottom+l.top-S&&(R=" mce-arrow-up",e=v.bottom+l.top+r),"undefined"==typeof e&&(e=r+S+b),t=y-p/2+l.left+o,v.left<0||v.right>l.width?t=l.left+o+(l.width-p)/2:p>=i?(R+=" mce-arrow-full",t=0):t<0&&v.left+p>i||t+p>i&&v.right-p<0?t=(i-p)/2:t<l.left+o?(R+=" mce-arrow-left",t=v.left+l.left+o):t+p>l.width+l.left+o&&(R+=" mce-arrow-right",t=v.right-p+l.left+o),f.className=f.className.replace(/ ?mce-arrow-[\w]+/g,"")+R,n.setStyles(f,{left:t,top:e}),this)}var s,l,m=[];return o(t,function(t){function n(){var n=e.selection;"bullist"===o&&n.selectorChanged("ul > li",function(e,n){for(var o,r=n.parents.length;r--&&(o=n.parents[r].nodeName,"OL"!==o&&"UL"!==o););t.active(e&&"UL"===o)}),"numlist"===o&&n.selectorChanged("ol > li",function(e,n){for(var o,r=n.parents.length;r--&&(o=n.parents[r].nodeName,"OL"!==o&&"UL"!==o););t.active(e&&"OL"===o)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var o;"|"===t?l=null:f.has(t)?(t={type:t},p.toolbar_items_size&&(t.size=p.toolbar_items_size),m.push(t),l=null):(l||(l={type:"buttongroup",items:[]},m.push(l)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",p.toolbar_items_size&&(t.size=p.toolbar_items_size),t=f.create(t),l.items.push(t),e.initialized?n():e.on("init",n)))}),s=f.create({type:"panel",layout:"stack",classes:"toolbar-grp inline-toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:[{type:"toolbar",layout:"flow",items:m}]}),s.bottom=r,s.on("show",function(){this.reposition()}),s.on("keydown",function(t){27===t.keyCode&&(this.hide(),e.focus())}),e.on("remove",function(){s.remove()}),s.reposition=i,s.hide().renderTo(document.body),s}function r(e){i&&(i.hide(),"hide"===e.type||"blur"===e.type?i=!1:"resizewindow"!==e.type&&"scrollwindow"!==e.type||(clearTimeout(l),l=setTimeout(function(){i&&"function"==typeof i.show&&i.show()},250)))}var i,a,l,u,d,c,f=s.default.ui.Factory,p=e.settings,m=e.getContainer(),h=document.getElementById("wpadminbar"),g=document.getElementById(e.id+"_ifr");m&&(u=s.default.$(".mce-toolbar-grp",m)[0],d=s.default.$(".mce-statusbar",m)[0]),"content"===e.id&&(c=document.getElementById("post-status-info")),e.shortcuts.add("alt+119","",function(){var e;i&&(e=i.find("toolbar")[0],e&&e.focus(!0))}),e.on("nodechange",function(t){var n=e.selection.isCollapsed(),o={element:t.element,parents:t.parents,collapsed:n};e.fire("wptoolbar",o),a=o.selection||o.element,i&&i.hide(),o.toolbar?(i=o.toolbar,i.show()):i=!1}),e.on("focus",function(){i&&i.show()}),n.bind(window,"resize scroll",r),e.on("remove",function(){n.unbind(window,"resize scroll",r)}),e.on("blur hide",r),e.wp=e.wp||{},e.wp._createToolbar=t},!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpcom",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/i18n-calypso/index.js"),l=n("./client/lib/formatting/index.js"),u=o(l),d=n("./client/components/tinymce/plugins/wpcom/wpcom-utils.js");e.exports=t.default},"./client/components/tinymce/plugins/wpcom/wpcom-utils.js":function(e,t,n){"use strict";function o(e){return e.replace(/<p>([^<>]+)<\/p>/gi,function(e,t){return"&nbsp;"!==t&&/\S/.test(t)?e:"<p><br /></p>"})}Object.defineProperty(t,"__esModule",{value:!0}),t.removeEmptySpacesInParagraphs=o},"./client/components/tinymce/plugins/wpeditimage/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(t){return!(!e.dom.getAttrib(t,"data-mce-placeholder")&&!e.dom.getAttrib(t,"data-mce-object"))}function n(t){return t.replace(/(?:<p>)?\[(?:wp_)?caption([^\]]+)\]([\s\S]+?)\[\/(?:wp_)?caption\](?:<\/p>)?/g,function(t,n,o){var r=void 0,i=void 0,a=void 0,l=void 0,u=void 0,d=void 0,c=s.default.trim;return r=n.match(/id=['"]([^'"]*)['"] ?/),r&&(n=n.replace(r[0],"")),i=n.match(/align=['"]([^'"]*)['"] ?/),i&&(n=n.replace(i[0],"")),a=n.match(/class=['"]([^'"]*)['"] ?/),a&&(n=n.replace(a[0],"")),d=n.match(/width=['"]([0-9]*)['"] ?/),d&&(n=n.replace(d[0],"")),o=c(o),u=o.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),u&&u[2]?(l=c(u[2]),u=c(u[1])):(l=c(n).replace(/caption=['"]/,"").replace(/['"]$/,""),u=o),r=r&&r[1]?r[1].replace(/[<>&]+/g,""):"",i=i&&i[1]?i[1]:"alignnone",a=a&&a[1]?" "+a[1].replace(/[<>&]+/g,""):"",!d&&u&&(d=u.match(/width=['"]([0-9]*)['"]/)),d&&d[1]&&(d=d[1]),d&&l?(d=parseInt(d,10),e.getParam("wpeditimage_html5_captions")||(d+=10),'<div class="mceTemp"><dl id="'+r+'" class="wp-caption '+i+a+'" style="width: '+d+'px"><dt class="wp-caption-dt">'+u+'</dt><dd class="wp-caption-dd">'+l+"</dd></dl></div>"):o})}function o(e){return e.replace(/<div (?:id="attachment_|class="mceTemp)[^>]*>([\s\S]+?)<\/div>/g,function(e,t){var n="";return t.indexOf("<img ")===-1?(n=t.match(/<dd [^>]+>([\s\S]+?)<\/dd>/i),n&&n[1]?"<p>"+n[1]+"</p>":""):(n=t.replace(/\s*<dl ([^>]+)>\s*<dt [^>]+>([\s\S]+?)<\/dt>\s*<dd [^>]+>([\s\S]*?)<\/dd>\s*<\/dl>\s*/gi,function(e,t,n,o){var r=void 0,i=void 0,s=void 0;s=n.match(/width="([0-9]*)"/),s=s&&s[1]?s[1]:"",i=t.match(/class="([^"]*)"/),i=i&&i[1]?i[1]:"";var a=i.match(/align[a-z]+/i)||"alignnone";return s&&o?(r=t.match(/id="([^"]*)"/),r=r&&r[1]?r[1]:"",i=i.replace(/wp-caption ?|align[a-z]+ ?/gi,""),i&&(i=' class="'+i+'"'),o=o.replace(/\r\n|\r/g,"\n").replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){
return e.replace(/[\r\n\t]+/," ")}),o=o.replace(/\s*\n\s*/g,"<br />"),'[caption id="'+r+'" align="'+a+'" width="'+s+'"'+i+"]"+n+" "+o+"[/caption]"):("alignnone"!==a[0]&&(n=n.replace(/><img/,' class="'+a[0]+'"><img')),n)}),n.indexOf("[caption")===-1&&(n=t.replace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),n)})}function r(t){return!t||t.indexOf("<")===-1&&t.indexOf(">")===-1?t:(l||(l=new s.default.html.Serializer({},e.schema)),l.serialize(e.parser.parse(t,{forced_root_block:!1})))}function i(t){var n=void 0;"DIV"===t.nodeName&&e.dom.hasClass(t,"mceTemp")?n=t:"IMG"!==t.nodeName&&"DT"!==t.nodeName&&"A"!==t.nodeName||(n=e.dom.getParent(t,"div.mceTemp")),n?(n.nextSibling?e.selection.select(n.nextSibling):n.previousSibling?e.selection.select(n.previousSibling):e.selection.select(n.parentNode),e.selection.collapse(!0),e.dom.remove(n)):e.dom.remove(t),e.nodeChanged(),e.undoManager.add()}var a=void 0,l=void 0,u=void 0,d=s.default.each,c=s.default.Env.iOS;e.addButton("wp_img_remove",{tooltip:"Remove",icon:"dashicon dashicons-trash",onclick:function(){i(e.selection.getNode())}}),d({alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",alignnone:"No alignment"},function(t,n){var o=n.slice(5);e.addButton("wp_img_"+n,{tooltip:t,icon:"dashicon dashicons-align-"+o,cmd:"alignnone"===n?"wpAlignNone":"Justify"+o.slice(0,1).toUpperCase()+o.slice(1),onPostRender:function(){var t=this;e.on("NodeChange",function(o){if("IMG"===o.element.nodeName){var r=e.dom.getParent(o.element,".wp-caption")||o.element;"alignnone"===n?t.active(!/\balign(left|center|right)\b/.test(r.className)):t.active(e.dom.hasClass(r,n))}})}})}),e.once("preinit",function(){a=e.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wpcom_img_size_decrease","wpcom_img_size_increase","wp_img_caption","wp_img_advanced","wp_img_edit","wp_img_remove"])}),e.on("wptoolbar",function(e){"IMG"!==e.element.nodeName||t(e.element)||(e.toolbar=a)}),c&&e.on("click",function(t){if("IMG"===t.target.nodeName){var n=t.target;window.setTimeout(function(){e.selection.select(n),e.nodeChanged()},200)}else a.hide()}),e.on("init",function(){var t=e.dom,n=e.getParam("wpeditimage_html5_captions")?"html5-captions":"html4-captions";t.addClass(e.getBody(),n),e.on("wpLoadImageForm",function(t){if(!e.getParam("wpeditimage_disable_captions")){var n={type:"textbox",flex:1,name:"caption",minHeight:60,multiline:!0,scroll:!0,label:"Image caption"};t.data.splice(t.data.length-1,0,n)}}),e.on("wpNewImageRefresh",function(e){var n=void 0,o=void 0;(n=t.getParent(e.node,"dl.wp-caption"))&&(n.style.width||(o=parseInt(e.node.clientWidth,10)+10,o=o?o+"px":"50%",t.setStyle(n,"width",o)))}),e.on("wpImageFormSubmit",function(n){var o=n.imgData.data,i=void 0,s=void 0,a=void 0,l=void 0,u=void 0,d=n.imgData.node,c=n.imgData.caption,f="",p="",m="";return o.id="__wp-temp-img-id",n.imgData.cancel=!0,o.style||(o.style=null),o.src?(c&&(c=c.replace(/\r\n|\r/g,"\n").replace(/<\/?[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),c=c.replace(/(<br[^>]*>)\s*\n\s*/g,"$1").replace(/\s*\n\s*/g,"<br />"),c=r(c)),d?(u=d.id||null,t.setAttribs(d,o),i=t.getParent(d,"dl.wp-caption"),c?i?(s=t.select("dd.wp-caption-dd",i)[0])&&(s.innerHTML=c):(d.className&&(f=d.className.match(/wp-image-([0-9]+)/),p=d.className.match(/align(left|right|center|none)/)),p?(p=p[0],d.className=d.className.replace(/align(left|right|center|none)/g,"")):p="alignnone",p=' class="wp-caption '+p+'"',f&&(f=' id="attachment_'+f[1]+'"'),m=o.width||d.clientWidth,m&&(m=parseInt(m,10),e.getParam("wpeditimage_html5_captions")||(m+=10),m=' style="width: '+m+'px"'),a=d.parentNode&&"A"===d.parentNode.nodeName?d.parentNode:d,l="<dl "+f+p+m+'><dt class="wp-caption-dt"></dt><dd class="wp-caption-dd">'+c+"</dd></dl>",i=t.create("div",{class:"mceTemp"},l),(s=t.getParent(a,"p"))?s.parentNode.insertBefore(i,s):a.parentNode.insertBefore(i,a),e.$(i).find("dt.wp-caption-dt").append(a),s&&t.isEmpty(s)&&t.remove(s)):i&&(l="A"===d.parentNode.nodeName?t.getOuterHTML(d.parentNode):t.getOuterHTML(d),s=t.create("p",{},l),t.insertAfter(s,i.parentNode),e.selection.select(s),e.nodeChanged(),t.remove(i.parentNode))):(l=t.createHTML("img",o),c?(a=e.selection.getNode(),o.width&&(m=parseInt(o.width,10),e.getParam("wpeditimage_html5_captions")||(m+=10),m=' style="width: '+m+'px"'),l='<dl class="wp-caption alignnone"'+m+'><dt class="wp-caption-dt">'+l+'</dt><dd class="wp-caption-dd">'+c+"</dd></dl>",s="P"===a.nodeName?a:t.getParent(a,"p"),s&&"P"===s.nodeName?(i=t.create("div",{class:"mceTemp"},l),s.parentNode.insertBefore(i,s),e.selection.select(i),e.nodeChanged(),t.isEmpty(s)&&t.remove(s)):e.selection.setContent('<div class="mceTemp">'+l+"</div>")):e.selection.setContent(l)),d=t.get("__wp-temp-img-id"),t.setAttrib(d,"id",u),void(n.imgData.node=d)):void(d&&((i=t.getParent(d,"div.mceTemp"))?t.remove(i):"A"===d.parentNode.nodeName?t.remove(d.parentNode):t.remove(d),e.nodeChanged()))}),e.on("wpLoadImageData",function(n){var o=void 0,r=n.imgData.data,i=n.imgData.node;(o=t.getParent(i,"dl.wp-caption"))&&(o=t.select("dd.wp-caption-dd",o)[0],o&&(r.caption=e.serializer.serialize(o).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,"")))}),t.bind(e.getDoc(),"dragstart",function(n){var o=e.selection.getNode();"IMG"===o.nodeName&&t.getParent(o,".wp-caption")&&n.preventDefault()}),s.default.Env.ie&&s.default.Env.ie>10&&t.bind(e.getBody(),"mscontrolselect",function(n){"IMG"===n.target.nodeName&&t.getParent(n.target,".wp-caption")?e.getBody().focus():"DL"===n.target.nodeName&&t.hasClass(n.target,"wp-caption")&&n.target.focus()})}),e.on("ObjectResized",function(t){var n=t.target;"IMG"===n.nodeName&&e.undoManager.transact(function(){var o=void 0,r=void 0,i=e.dom;n.className=n.className.replace(/\bsize-[^ ]+/,""),(o=i.getParent(n,".wp-caption"))&&(r=t.width||i.getAttrib(n,"width"),r&&(r=parseInt(r,10),e.getParam("wpeditimage_html5_captions")||(r+=10),i.setStyle(o,"width",r+"px")))})}),e.on("pastePostProcess",function(t){e.dom.getParent(e.selection.getNode(),"dd.wp-caption-dd")&&(e.$("img, audio, video, object, embed, iframe, script, style",t.node).remove(),e.$("*",t.node).each(function(t,n){e.dom.isBlock(n)&&(s.default.trim(n.textContent||n.innerText)?(e.dom.insertAfter(e.dom.create("br"),n),e.dom.remove(n,!0)):e.dom.remove(n))}),e.$("br",t.node).each(function(t,n){n.nextSibling&&"BR"!==n.nextSibling.nodeName&&n.previousSibling&&"BR"!==n.previousSibling.nodeName||e.dom.remove(n)}),u=!0)}),e.on("BeforeExecCommand",function(t){var n=void 0,o=void 0,r=void 0,i=void 0,s=void 0,l=void 0,d=t.command,c=e.dom;if("mceInsertContent"===d){if(n=e.selection.getNode(),l=c.getParent(n,"div.mceTemp")){if(u)return void(u=!1);o=c.create("p"),c.insertAfter(o,l),e.selection.setCursorLocation(o,0),"IMG"!==n.nodeName&&"DT"!==n.nodeName||e.$(l).remove(),e.nodeChanged()}}else if("JustifyLeft"===d||"JustifyRight"===d||"JustifyCenter"===d||"wpAlignNone"===d){if(n=e.selection.getNode(),i="align"+d.slice(7).toLowerCase(),r=e.dom.getParent(n,".wp-caption"),"IMG"!==n.nodeName&&!r)return;n=r||n,s=e.dom.hasClass(n,i)?" alignnone":" "+i,n.className=n.className.replace(/ ?align(left|center|right|none)/g,"")+s,e.nodeChanged(),t.preventDefault(),a&&a.reposition(),e.fire("ExecCommand",{command:d,ui:t.ui,value:t.value})}}),e.on("keydown",function(t){var n=void 0,o=void 0,r=void 0,a=void 0,l=e.selection,u=t.keyCode,d=e.dom,c=s.default.util.VK;if(u===c.ENTER)n=l.getNode(),o=d.getParent(n,"div.mceTemp"),o&&(d.events.cancel(t),s.default.each(d.select("dt, dd",o),function(e){d.isEmpty(e)&&d.remove(e)}),a=s.default.Env.ie&&s.default.Env.ie<11?"":'<br data-mce-bogus="1" />',r=d.create("p",null,a),"DD"===n.nodeName?d.insertAfter(r,o):o.parentNode.insertBefore(r,o),e.nodeChanged(),l.setCursorLocation(r,0));else if((u===c.DELETE||u===c.BACKSPACE)&&(n=l.getNode(),"DIV"===n.nodeName&&d.hasClass(n,"mceTemp")?o=n:"IMG"!==n.nodeName&&"DT"!==n.nodeName&&"A"!==n.nodeName||(o=d.getParent(n,"div.mceTemp")),o))return d.events.cancel(t),i(n),!1}),s.default.Env.gecko&&e.on("undo redo",function(){"IMG"===e.selection.getNode().nodeName&&e.selection.collapse()}),e.wpSetImgCaption=function(e){return n(e)},e.wpGetImgCaption=function(e){return o(e)},e.on("BeforeSetContent",function(t){"raw"!==t.format&&(t.content=e.wpSetImgCaption(t.content))}),e.on("PostProcess",function(t){t.get&&(t.content=e.wpGetImgCaption(t.content))}),e.wp=e.wp||{},e.wp.isPlaceholder=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpeditimage",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i);e.exports=t.default},"./client/components/tinymce/plugins/wpemoji/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e){e.className="emoji",e.setAttribute("data-mce-resize","false"),e.setAttribute("data-mce-placeholder","1"),e.setAttribute("data-wp-emoji","1")}function n(e){l.default.parse(e,{base:(0,d.default)("twemoji_cdn_url"),size:"72x72",attributes:function(){return{"data-mce-resize":"false","data-mce-placeholder":"1","data-wp-emoji":"1"}},callback:function(e,t){var n=["a9","ae","2122","2194","2660","2663","2665","2666"];return-1===n.indexOf(e)&&"".concat(t.base,t.size,"/",e,t.ext)}})}function o(t){var o=void 0,r=void 0;t&&l.default.test(t.textContent||t.innerText)&&(i.webkit&&(o=e.selection,r=o.getBookmark()),n(t),i.webkit&&o.moveToBookmark(r))}var r=!1,i=s.default.Env,a=window.navigator.userAgent,u=a.indexOf("Windows")>-1,c=function(){var e=a.match(/Windows NT 6\.(\d)/);return!!(e&&e[1]>1)}();c?e.on("keyup",function(t){231===t.keyCode&&o(e.selection.getNode())}):u||(e.on("keydown keyup",function(e){r="keydown"===e.type}),e.on("input",function(){r||o(e.selection.getNode())})),e.on("setcontent",function(){o(e.selection.getNode())}),e.on("PastePostProcess",function(n){s.default.each(e.dom.$("img.emoji",n.node),function(e){e.alt&&l.default.test(e.alt)&&t(e)})}),e.on("postprocess",function(e){e.content&&(e.content=e.content.replace(/<img[^>]+data-wp-emoji="[^>]+>/g,function(e){var t=e.match(/alt="([^"]+)"/);return t&&t[1]?t[1]:e}))}),e.on("resolvename",function(t){"IMG"===t.target.nodeName&&e.dom.getAttrib(t.target,"data-wp-emoji")&&t.preventDefault()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wpemoji",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i),a=n("./node_modules/twemoji/2/twemoji.npm.js"),l=o(a),u=n("./client/config/index.js"),d=o(u);e.exports=t.default},"./client/components/tinymce/plugins/wplink/dialog.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=r(i),a=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=r(a),u=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=r(u),c=n("./node_modules/babel-runtime/helpers/createClass.js"),f=r(c),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=r(p),h=n("./node_modules/babel-runtime/helpers/inherits.js"),g=r(h),v=n("./node_modules/prop-types/index.js"),y=r(v),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/react/react.js"),x=r(_),C=n("./node_modules/tinymce/tinymce.js"),j=r(C),E=n("./node_modules/react-redux/es/index.js"),w=n("./node_modules/lodash/lodash.js"),S=n("./node_modules/gridicons/build/index.js"),k=r(S),T=n("./client/lib/media-serialization/index.js"),P=o(T),I=n("./client/lib/media/store.js"),R=r(I),N=n("./client/lib/media/utils.js"),M=r(N),D=n("./client/components/dialog/index.jsx"),O=r(D),A=n("./client/components/forms/form-text-input/index.jsx"),L=r(A),B=n("./client/components/forms/form-checkbox/index.jsx"),F=r(B),z=n("./client/components/forms/form-button/index.jsx"),U=r(z),H=n("./client/components/forms/form-fieldset/index.jsx"),W=r(H),V=n("./client/components/forms/form-label/index.jsx"),q=r(V),G=n("./client/my-sites/post-selector/index.jsx"),K=r(G),$=n("./client/state/ui/selectors.js"),Y=n("./client/state/posts/selectors.js"),J=n("./client/lib/formatting/index.js"),Z=n("./client/lib/posts/stats.js"),X=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,Q=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,4}[^ "]*$/i,ee=/^(?:[a-z]+:|#|\?|\.|\/)/,te=function(e){function t(){var e,n,o,r;(0,d.default)(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=(0,m.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(a))),o.getLink=function(){var e=o.props.editor;return e.dom.getParent(e.selection.getNode(),"a")},o.getCorrectedUrl=function(){var e=o.state.url.trim();return X.test(e)?"mailto:"+e:ee.test(e)?e:"http://"+e},o.updateEditor=function(){var e,t,n,r=o.props.editor;return r.focus(),j.default.isIE&&r.selection.moveToBookmark(r.windowManager.bookmark),o.state.url?(t=o.getLink(),n=o.state.linkText,e={href:o.getCorrectedUrl(),target:o.state.newWindow?"_blank":""},t?(n&&("innerText"in t?t.innerText=n:t.textContent=n),r.dom.setAttribs(t,e)):n?(n=r.dom.encode(n),r.selection.setNode(r.dom.create("a",e,n))):r.execCommand("mceInsertLink",!1,e),void o.closeDialog()):void o.removeLink()},o.hasSelectedText=function(e){var t,n,r=o.props.editor,i=r.selection.getContent();if(/</.test(i)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(i)||i.indexOf("href=")===-1))return!1;if(e){if(t=e.childNodes,0===t.length)return!1;for(n=t.length-1;n>=0;n--)if(3!==t[n].nodeType)return!1}return!0},o.getInferredUrl=function(){var e,t,n,r=o.props.editor.selection.getContent();if(X.test(r))return"mailto:"+r;if(Q.test(r))return r.replace(/&amp;|&#0?38;/gi,"&");if(e=o.props.editor.selection.getNode(),e&&"IMG"===e.nodeName){if(t=P.deserialize(e),o.props.site&&t.media.ID)return n=R.default.get(o.props.site.ID,t.media.ID)||t.media,M.default.url(n,{size:"full"});if(t.media.URL)return t.media.URL}},o.getState=function(){var e=o.props.editor,t=e.selection.getNode(),n=e.dom.getParent(t,"a[href]"),r=o.hasSelectedText(n),i={isNew:!0,newWindow:!1,showLinkText:!0,linkText:"",url:"",isUserDefinedLinkText:!1};return n?(i.linkText=n.innerText||n.textContent,i.url=e.dom.getAttrib(n,"href"),i.newWindow="_blank"===e.dom.getAttrib(n,"target"),i.isNew=!1):r&&(i.linkText=e.selection.getContent({format:"text"})),n||(i.url=o.getInferredUrl()||""),o.hasSelectedText(n)||(i.showLinkText=!1),i},o.closeDialog=function(){o.props.onClose()},o.setUrl=function(e){o.setState({url:e.target.value})},o.setLinkText=function(e){o.setState({linkText:e.target.value,isUserDefinedLinkText:!0})},o.setNewWindow=function(e){o.setState({newWindow:e.target.checked})},o.onInputKeyDown=function(e){"Enter"===e.key&&(e.preventDefault(),o.updateEditor())},o.removeLink=function(){o.props.editor.execCommand("unlink"),o.closeDialog()},o.getButtons=function(){var e,t;return e=o.state.isNew?o.props.translate("Add Link"):o.props.translate("Save"),t=[x.default.createElement(U.default,{key:"save",onClick:o.updateEditor},e),x.default.createElement(U.default,{key:"cancel",isPrimary:!1,onClick:o.closeDialog},o.props.translate("Cancel"))],o.state.url&&!o.state.isNew&&t.push(x.default.createElement("button",{className:"wplink__remove-link",onClick:o.removeLink},x.default.createElement(k.default,{icon:"link-break"}),o.props.translate("Remove"))),t},o.setExistingContent=function(e){var t={url:e.URL},n=!o.state.isUserDefinedLinkText&&!o.props.editor.selection.getContent()&&!o.getLink();n&&(0,s.default)(t,{linkText:(0,J.decodeEntities)(e.title)}),(0,Z.recordStat)("link-existing-content"),(0,Z.recordEvent)("Set link to existing content"),o.setState(t)},o.getSelectedPostId=function(){if(o.state.url&&o.props.sitePosts){var e=(0,w.find)(o.props.sitePosts,{URL:o.state.url});return e?e.ID:void 0}},o.state=o.getState(),r=n,(0,m.default)(o,r)}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.visible&&!this.props.visible&&this.setState(this.getState())}},{key:"render",value:function(){return x.default.createElement(O.default,{isVisible:this.props.visible,onClose:this.closeDialog,buttons:this.getButtons(),autoFocus:!1,additionalClassNames:"wplink__dialog"},x.default.createElement(W.default,null,x.default.createElement(q.default,null,x.default.createElement("span",null,this.props.translate("URL")),x.default.createElement(L.default,{ref:"url",autoFocus:!0,onChange:this.setUrl,value:this.state.url,onKeyDown:this.onInputKeyDown})),this.state.showLinkText?x.default.createElement(q.default,null,x.default.createElement("span",null,this.props.translate("Link Text")),x.default.createElement(L.default,{onChange:this.setLinkText,value:this.state.linkText,onKeyDown:this.onInputKeyDown})):null),x.default.createElement(W.default,null,x.default.createElement(q.default,null,x.default.createElement(F.default,{onChange:this.setNewWindow,checked:this.state.newWindow}),x.default.createElement("span",null,this.props.translate("Open link in a new window/tab")))),x.default.createElement(W.default,null,x.default.createElement(q.default,null,x.default.createElement("span",null,this.props.translate("Link to existing content")),this.props.site&&x.default.createElement(K.default,{siteId:this.props.site.ID,type:"any",excludePrivateTypes:!0,status:"publish",orderBy:"date",order:"DESC",selected:this.getSelectedPostId(),onChange:this.setExistingContent,suppressFirstPageLoad:!this.props.firstLoad,emptyMessage:this.props.translate("No posts found")}))))}}]),t}(x.default.Component);te.propTypes={visible:y.default.bool,editor:y.default.object,onClose:y.default.func,site:y.default.object,sitePosts:y.default.array,firstLoad:y.default.bool},te.defaultProps={onClose:function(){},firstLoad:!1},t.default=(0,E.connect)(function(e){var t=(0,$.getSelectedSite)(e);return{site:t,sitePosts:t?(0,Y.getSitePosts)(e,t.ID):null}})((0,b.localize)(te)),e.exports=t.default},"./client/components/tinymce/plugins/wplink/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,m.renderWithReduxStore)(l.default.createElement(p.default,{visible:o,editor:e,firstLoad:!r,onClose:function(){return t(!1)}}),n,e.getParam("redux_store")),o&&(r=!0),o||e.focus()}var n=void 0,o=void 0,r=void 0;e.on("init",function(){n=e.getContainer().appendChild(document.createElement("div"))}),e.on("remove",function(){s.default.unmountComponentAtNode(n),n.parentNode.removeChild(n),n=null}),e.addCommand("WP_Link",function(){return t()}),e.addShortcut("access+a","","WP_Link"),e.addShortcut("meta+k","","WP_Link"),e.addButton("link",{icon:"link",tooltip:(0,c.translate)("Insert/edit link"),cmd:"WP_Link",stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink"}),e.addMenuItem("link",{icon:"link",text:(0,c.translate)("Insert/edit link"),cmd:"WP_Link",stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.on("pastepreprocess",function(t){var n=t.content;e.selection.isCollapsed()||(n=n.replace(/<[^>]+>/g,""),n=d.default.trim(n),/^(?:https?:)?\/\/\S+$/i.test(n)&&(e.execCommand("mceInsertLink",!1,{href:e.dom.decode(n)}),t.preventDefault()))}),d.default.ui.Factory.add("WPLinkPreview",d.default.ui.Control.extend({url:"#",renderHtml:function(){return'<div id="'+this._id+'" class="wp-link-preview"><a href="'+this.url+'" target="_blank" rel="noopener noreferrer" tabindex="-1">'+this.url+"</a></div>"},setURL:function(e){var t=void 0,n=void 0;this.url!==e&&(this.url=e,e=window.decodeURIComponent(e),e=e.replace(/^(?:https?:)?\/\/(?:www\.)?/,""),(t=e.indexOf("?"))!==-1&&(e=e.slice(0,t)),(t=e.indexOf("#"))!==-1&&(e=e.slice(0,t)),e=e.replace(/(?:index)?\.html$/,""),"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e.length>40&&(t=e.indexOf("/"))!==-1&&(n=e.lastIndexOf("/"))!==-1&&n!==t&&(t+e.length-n<40&&(n=-(40-(t+1))),e=e.slice(0,t+1)+"…"+e.slice(n)),d.default.$(this.getEl().firstChild).attr("href",this.url).text(e))}})),e.addButton("wp_link_preview",{type:"WPLinkPreview",onPostRender:function(){var t=this;e.on("wptoolbar",function(n){var r=e.dom.getParent(n.element,"a"),i=void 0,s=void 0;r&&(i=e.$(r),s=i.attr("href"),s&&!i.find("img").length&&(t.setURL(s),n.element=r,n.toolbar=o))})}}),e.addButton("wp_link_edit",{tooltip:"Edit ",icon:"dashicon dashicons-edit",cmd:"WP_Link"}),e.addButton("wp_link_remove",{tooltip:"Remove",icon:"dashicon dashicons-no",cmd:"unlink"}),e.on("preinit",function(){e.wp&&e.wp._createToolbar&&(o=e.wp._createToolbar(["wp_link_preview","wp_link_edit","wp_link_remove"],!0))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){d.default.PluginManager.add("wplink",r)};var i=n("./node_modules/react-dom/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/tinymce/tinymce.js"),d=o(u),c=n("./node_modules/i18n-calypso/index.js"),f=n("./client/components/tinymce/plugins/wplink/dialog.jsx"),p=o(f),m=n("./client/lib/react-helpers/index.js");e.exports=t.default},"./client/components/tinymce/plugins/wptextpattern/plugin.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(){function t(e){for(var t,n=c.length;n--;)if(r=c[n],t=e.data.indexOf(r.end),t!==-1)return t}var n,o,r,i,l,u=e.selection.getRng(),d=u.startContainer,p=u.startOffset;d&&3===d.nodeType&&d.data.length&&p&&s.default.inArray(f,d.data.charAt(p-1))!==-1&&(n=t(d),o=d.data.lastIndexOf(r.end),n!==o&&o!==-1&&(o-n<=r.start.length||d.data.slice(n+r.start.length,o).indexOf(r.start.slice(0,1))===-1&&(i=e.formatter.get(r.format),i&&i[0].inline&&(e.undoManager.add(),e.undoManager.transact(function(){d.insertData(p,"​"),d=d.splitText(n),l=d.splitText(p-n),d.deleteData(0,r.start.length),d.deleteData(d.data.length-r.end.length,r.end.length),e.formatter.apply(r.format,{},d),e.selection.setCursorLocation(l,1)}),setTimeout(function(){a="space",e.once("selectionchange",function(){var e;l&&(e=l.data.indexOf("​"),e!==-1&&l.deleteData(e,e+1))})})))))}function n(t){var n,o=e.dom.getParent(t,"p");if(o){for(;(n=o.firstChild)&&3!==n.nodeType;)o=n;if(n)return n.data||(n=n.nextSibling&&3===n.nextSibling.nodeType?n.nextSibling:null),n}}function o(){var t,o,r=e.selection.getRng(),i=r.startContainer;i&&n(i)===i&&(t=i.parentNode,o=i.data,s.default.each(u,function(n){var s=o.match(n.regExp);if(s&&r.startOffset===s[0].length)return e.undoManager.add(),e.undoManager.transact(function(){i.deleteData(0,s[0].length),t.innerHTML||t.appendChild(document.createElement("br")),e.selection.setCursorLocation(t),e.execCommand(n.cmd)}),setTimeout(function(){a="space"}),!1}))}function r(){var t,o,r,l=e.selection.getRng(),u=l.startContainer,c=n(u),f=d.length;if(c){for(t=c.data;f--;)if(d[f].start){if(0===t.indexOf(d[f].start)){o=d[f];break}}else if(d[f].regExp&&d[f].regExp.test(t)){o=d[f];break}o&&(c===u&&s.default.trim(t)===o.start||e.once("keyup",function(){e.undoManager.add(),e.undoManager.transact(function(){o.format?(e.formatter.apply(o.format,{},c),c.replaceData(0,c.data.length,i(c.data.slice(o.start.length)))):o.element&&(r=c.parentNode&&c.parentNode.parentNode,r&&r.replaceChild(document.createElement(o.element),c.parentNode))}),setTimeout(function(){a="enter"})}))}}function i(e){return e?e.replace(/^\s+/,""):""}var a,l=s.default.util.VK,u=[{regExp:/^[*-]\s/,cmd:"InsertUnorderedList"},{regExp:/^1[.)]\s/,cmd:"InsertOrderedList"}],d=[{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:">",format:"blockquote"},{regExp:/^(-){3,}$/,element:"hr"}],c=[{start:"`",end:"`",format:"code"}],f=[];s.default.each(c,function(e){s.default.each((e.start+e.end).split(""),function(e){s.default.inArray(f,e)===-1&&f.push(e)})}),e.on("selectionchange",function(){a=null}),e.on("keydown",function(n){(a&&27===n.keyCode||"space"===a&&n.keyCode===l.BACKSPACE)&&(e.undoManager.undo(),n.preventDefault(),n.stopImmediatePropagation()),n.keyCode!==l.ENTER||l.modifierPressed(n)||r(),n.keyCode!==l.SPACEBAR||n.ctrlKey||n.metaKey||n.altKey?n.keyCode>47&&!(n.keyCode>=91&&n.keyCode<=93)&&setTimeout(t):setTimeout(o)},!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.PluginManager.add("wptextpattern",r)};var i=n("./node_modules/tinymce/tinymce.js"),s=o(i);e.exports=t.default},"./client/components/token-field/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/typeof.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/extends.js"),c=o(d),f=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/createClass.js"),v=o(g),y=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),b=o(y),_=n("./node_modules/babel-runtime/helpers/inherits.js"),x=o(_),C=n("./node_modules/react/react.js"),j=o(C),E=n("./node_modules/prop-types/index.js"),w=o(E),S=n("./node_modules/lodash/lodash.js"),k=n("./node_modules/classnames/index.js"),T=o(k),P=n("./node_modules/debug/browser.js"),I=o(P),R=n("./client/components/token-field/suggestions-list.jsx"),N=o(R),M=n("./client/components/token-field/token.jsx"),D=o(M),O=n("./client/components/token-field/token-input.jsx"),A=o(O),L=(0,I.default)("calypso:token-field"),B=function(e){function t(){var e,n,o,r;(0,h.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,b.default)(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(s))),o.state=o.constructor.initialState,o._renderTokensAndInput=function(){var e=(0,S.map)(o.props.value,o._renderToken);return e.splice(o._getIndexOfInput(),0,o._renderInput()),e},o._renderToken=function(e){var t=o._getTokenValue(e),n=e.status?e.status:void 0;return j.default.createElement(D.default,{key:"token-"+t,value:t,status:n,tooltip:e.tooltip,displayTransform:o.props.displayTransform,onClickRemove:o._onTokenClickRemove,isBorderless:e.isBorderless||o.props.isBorderless,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disabled:"error"!==n&&o.props.disabled})},o._renderInput=function(){var e=o.props,t=e.autoCapitalize,n=e.autoComplete,r=e.id,i=e.maxLength,s=e.value,a=e.placeholder,l={autoCapitalize:t,autoComplete:n,disabled:o.props.disabled,hasFocus:o.state.tokenInputHasFocus,id:r,key:"input",onBlur:o._onBlur,value:o.state.incompleteTokenValue};return 0===s.length&&a&&(l.placeholder=a),i&&s.length>=i||(l=(0,c.default)({},l,{onChange:o._onInputChange})),j.default.createElement(A.default,l)},o.setTokensAndInput=function(e){o.tokensAndInput=e},o._onFocus=function(e){o.setState({isActive:!0,tokenInputHasFocus:!0}),"function"==typeof o.props.onFocus&&o.props.onFocus(e)},o._onBlur=function(){o._inputHasValidValue()?(L("_onBlur adding current token"),o.setState({isActive:!1},o._addCurrentToken)):(L("_onBlur not adding current token"),o.setState(o.constructor.initialState))},o._onTokenClickRemove=function(e){o._deleteToken(e.value)},o._onSuggestionHovered=function(e){var t=o._getMatchingSuggestions().indexOf(e);t>=0&&o.setState({selectedSuggestionIndex:t,selectedSuggestionScroll:!1})},o._onSuggestionSelected=function(e){L("_onSuggestionSelected",e),o._addNewToken(e)},o._onInputChange=function(e){var t=e.value,n=o.props.tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,r=t.split(n);r.length>1&&o._addNewTokens(r.slice(0,-1)),o.setState({incompleteTokenValue:(0,S.last)(r)||"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1})},o._onContainerTouched=function(e){e.target===o.tokensAndInput&&o.state.isActive&&e.preventDefault()},o._onKeyDown=function(e){var t=!1;switch(e.keyCode){case 8:t=o._handleDeleteKey(o._deleteTokenBeforeInput);break;case 9:t=o._addCurrentToken();break;case 13:t=o._addCurrentToken();break;case 37:t=o._handleLeftArrowKey();break;case 38:t=o._handleUpArrowKey();break;case 39:t=o._handleRightArrowKey();break;case 40:t=o._handleDownArrowKey();break;case 46:t=o._handleDeleteKey(o._deleteTokenAfterInput);break;case 32:o.props.tokenizeOnSpace&&(t=o._addCurrentToken())}t&&e.preventDefault()},o._onKeyPress=function(e){var t=!1;switch(e.charCode){case 44:t=o._handleCommaKey()}t&&e.preventDefault()},o._handleDeleteKey=function(e){var t=!1;return o.state.tokenInputHasFocus&&o._isInputEmpty()&&(e(),t=!0),t},o._getMatchingSuggestions=function(){var e=o.props.suggestions,t=o.props.saveTransform(o.state.incompleteTokenValue),n=[],r=[];return 0===t.length?e=(0,S.difference)(e,o.props.value):(t=t.toLocaleLowerCase(),(0,S.each)(e,function(e){var o=e.toLocaleLowerCase().indexOf(t);this.props.value.indexOf(e)===-1&&(0===o?n.push(e):o>0&&r.push(e))}.bind(o)),e=n.concat(r)),(0,S.take)(e,o.props.maxSuggestions)},o._getSelectedSuggestion=function(){if(o.state.selectedSuggestionIndex!==-1)return o._getMatchingSuggestions()[o.state.selectedSuggestionIndex]},o._addCurrentToken=function(){var e=!1,t=o._getSelectedSuggestion();return t?(o._addNewToken(t),e=!0):o._inputHasValidValue()&&(o._addNewToken(o.state.incompleteTokenValue),e=!0),e},o._handleLeftArrowKey=function(){var e=!1;return o._isInputEmpty()&&(o._moveInputBeforePreviousToken(),e=!0),e},o._handleRightArrowKey=function(){var e=!1;return o._isInputEmpty()&&(o._moveInputAfterNextToken(),e=!0),e},o._handleUpArrowKey=function(){return o.setState({selectedSuggestionIndex:Math.max((o.state.selectedSuggestionIndex||0)-1,0),selectedSuggestionScroll:!0}),!0},o._handleDownArrowKey=function(){return o.setState({selectedSuggestionIndex:Math.min(o.state.selectedSuggestionIndex+1||0,o._getMatchingSuggestions().length-1),selectedSuggestionScroll:!0}),!0},o._handleCommaKey=function(){var e=!0;return o._inputHasValidValue()&&o._addNewToken(o.state.incompleteTokenValue),e},o._isInputEmpty=function(){return 0===o.state.incompleteTokenValue.length},o._inputHasValidValue=function(){return o.props.saveTransform(o.state.incompleteTokenValue).length>0},o._deleteTokenBeforeInput=function(){var e=o._getIndexOfInput()-1;e>-1&&o._deleteToken(o.props.value[e])},o._deleteTokenAfterInput=function(){var e=o._getIndexOfInput();e<o.props.value.length&&(o._deleteToken(o.props.value[e]),o._moveInputToIndex(e))},o._deleteToken=function(e){var t=o.props.value.filter(function(t){return o._getTokenValue(t)!==o._getTokenValue(e)});o.props.onChange(t)},o._moveInputToIndex=function(e){o.setState({inputOffsetFromEnd:o.props.value.length-Math.max(e,-1)-1})},o._moveInputBeforePreviousToken=function(){o.setState({inputOffsetFromEnd:Math.min(o.state.inputOffsetFromEnd+1,o.props.value.length)})},o._moveInputAfterNextToken=function(){o.setState({inputOffsetFromEnd:Math.max(o.state.inputOffsetFromEnd-1,0)})},o._addNewTokens=function(e){var t=(0,S.uniq)(e.map(o.props.saveTransform).filter(Boolean).filter(function(e){return!o._valueContainsToken(e)}));if(L("_addNewTokens: tokensToAdd",t),t.length>0){var n=(0,S.clone)(o.props.value);n.splice.apply(n,[o._getIndexOfInput(),0].concat(t)),L("_addNewTokens: onChange",n),o.props.onChange(n)}},o._addNewToken=function(e){o._addNewTokens([e]),o.setState({incompleteTokenValue:"",selectedSuggestionIndex:-1,selectedSuggestionScroll:!1}),o.state.isActive&&(L("_addNewToken focusing input"),o.setState({tokenInputHasFocus:!0}))},o._valueContainsToken=function(e){return(0,S.some)(o.props.value,function(t){return o._getTokenValue(e)===o._getTokenValue(t)})},o._getTokenValue=function(e){return"object"===("undefined"==typeof e?"undefined":(0,u.default)(e))?e.value:e},o._getIndexOfInput=function(){return o.props.value.length-o.state.inputOffsetFromEnd},r=n,(0,b.default)(o,r);
}return(0,x.default)(t,e),(0,v.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.disabled&&this.state.isActive&&this.setState({isActive:!1,incompleteTokenValue:""})}},{key:"render",value:function(){var e=(0,T.default)("token-field",{"is-active":this.state.isActive,"is-disabled":this.props.disabled}),t={ref:"main",className:e,tabIndex:"-1"};return this.props.disabled||(t=(0,a.default)({},t,{onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onFocus:this._onFocus})),j.default.createElement("div",t,j.default.createElement("div",{ref:this.setTokensAndInput,className:"token-field__input-container",tabIndex:"-1",onMouseDown:this._onContainerTouched,onTouchStart:this._onContainerTouched},this._renderTokensAndInput()),j.default.createElement(N.default,{match:this.props.saveTransform(this.state.incompleteTokenValue),displayTransform:this.props.displayTransform,suggestions:this._getMatchingSuggestions(),selectedIndex:this.state.selectedSuggestionIndex,scrollIntoView:this.state.selectedSuggestionScroll,isExpanded:this.state.isActive,onHover:this._onSuggestionHovered,onSelect:this._onSuggestionSelected}))}}]),t}(C.PureComponent);B.propTypes={suggestions:w.default.array,maxSuggestions:w.default.number,displayTransform:w.default.func,saveTransform:w.default.func,onChange:w.default.func,isBorderless:w.default.bool,maxLength:w.default.number,onFocus:w.default.func,disabled:w.default.bool,tokenizeOnSpace:w.default.bool,placeholder:w.default.string,id:w.default.string,value:function e(t){var e=t.value;return Array.isArray(e)?void(0,S.forEach)(e,function(e){if("object"===("undefined"==typeof e?"undefined":(0,u.default)(e))&&!("value"in e))return new Error("When using object for value prop, each object is expected to have a 'value' property.")}):new Error("Value prop is expected to be an array.")}},B.defaultProps={suggestions:(0,i.default)([]),maxSuggestions:100,value:(0,i.default)([]),placeholder:"",displayTransform:S.identity,saveTransform:function(e){return e.trim()},onChange:function(){},isBorderless:!1,disabled:!1,tokenizeOnSpace:!1},B.initialState={incompleteTokenValue:"",inputOffsetFromEnd:0,isActive:!1,selectedSuggestionIndex:-1,selectedSuggestionScroll:!1,tokenInputHasFocus:!1},t.default=B,e.exports=t.default},"./client/components/token-field/suggestions-list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./node_modules/react/react.js"),_=o(b),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./node_modules/dom-scroll-into-view/index.js"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o._computeSuggestionMatch=function(e){var t,n=o.props.displayTransform(o.props.match||"").toLocaleLowerCase();return 0===n.length?null:(e=o.props.displayTransform(e),t=e.toLocaleLowerCase().indexOf(n),{suggestionBeforeMatch:e.substring(0,t),suggestionMatch:e.substring(t,t+n.length),suggestionAfterMatch:e.substring(t+n.length)})},o._renderSuggestions=function(){return(0,g.map)(o.props.suggestions,function(e,t){var n=this._computeSuggestionMatch(e),o=(0,C.default)("token-field__suggestion",{"is-selected":t===this.props.selectedIndex});return _.default.createElement("li",{className:o,key:e,onMouseDown:this._handleMouseDown,onClick:this._handleClick(e),onMouseEnter:this._handleHover(e)},n?_.default.createElement("span",null,n.suggestionBeforeMatch,_.default.createElement("strong",{className:"token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):this.props.displayTransform(e))}.bind(o))},o._handleHover=function(e){return function(){this._scrollingIntoView||this.props.onHover(e)}.bind(o)},o._handleClick=function(e){return function(){this.props.onSelect(e)}.bind(o)},o._handleMouseDown=function(e){e.preventDefault()},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(e){var t;e.isExpanded&&this.props.isExpanded&&this.props.selectedIndex>-1&&this.props.scrollIntoView&&(this._scrollingIntoView=!0,t=this.refs.list,(0,E.default)(t.children[this.props.selectedIndex],t,{onlyScrollIfNeeded:!0}),setTimeout(function(){this._scrollingIntoView=!1}.bind(this),100))}},{key:"render",value:function(){var e=(0,C.default)("token-field__suggestions-list",{"is-expanded":this.props.isExpanded&&this.props.suggestions.length>0});return _.default.createElement("ul",{ref:"list",className:e,tabIndex:"-1"},this._renderSuggestions())}}]),t}(_.default.PureComponent);w.propTypes={isExpanded:y.default.bool,match:y.default.string,displayTransform:y.default.func.isRequired,onSelect:y.default.func,suggestions:y.default.array,selectedIndex:y.default.number},w.defaultProps={isExpanded:!1,match:"",onHover:function(){},onSelect:function(){},suggestions:(0,i.default)([])},t.default=w,e.exports=t.default},"./client/components/token-field/token-input.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.setTextInput=function(e){o.textInput=e},o.onChange=function(e){o.props.onChange({value:e.target.value})},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(){this.props.hasFocus&&this.textInput.focus()}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.value,o=(0===n.length&&t&&t.length||n.length)+1;return b.default.createElement("input",(0,i.default)({className:"token-field__input",onChange:this.onChange,ref:this.setTextInput,size:o,type:"text"},(0,_.omit)(this.props,["hasFocus","onChange"])))}}]),t}(b.default.PureComponent);x.propTypes={disabled:v.default.bool,hasFocus:v.default.bool,onChange:v.default.func,onBlur:v.default.func,placeholder:v.default.string,value:v.default.string},x.defaultProps={disabled:!1,hasFocus:!1,onChange:_.noop,onBlur:_.noop,placeholder:"",value:""},t.default=x,e.exports=t.default},"./client/components/token-field/token.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=n("./client/components/tooltip/index.jsx"),j=o(C),E=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o._onClickRemove=function(){o.props.onClickRemove({value:o.props.value})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.status,o=e.isBorderless,r=e.tooltip,i=e.displayTransform,s=(0,b.default)("token-field__token",{"is-error":"error"===n,"is-success":"success"===n,"is-validating":"validating"===n,"is-borderless":o,"is-disabled":this.props.disabled});return v.default.createElement("span",{className:s,tabIndex:"-1",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},v.default.createElement("span",{className:"token-field__token-text"},i(t)),v.default.createElement(x.default,{icon:"cross-small",size:24,className:"token-field__remove-token",onClick:!this.props.disabled&&this._onClickRemove}),r&&v.default.createElement(j.default,{showOnMobile:!0,context:this,status:n,isVisible:!0,position:"bottom"},r))}}]),t}(v.default.PureComponent);E.displayName="Token",E.propTypes={value:h.default.string.isRequired,displayTransform:h.default.func.isRequired,onClickRemove:h.default.func,status:h.default.oneOf(["error","success","validating"]),isBorderless:h.default.bool,tooltip:h.default.string,disabled:h.default.bool},E.defaultProps={onClickRemove:function(){},isBorderless:!1,disabled:!1},t.default=E,e.exports=t.default},"./client/components/tooltip/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/components/popover/index.jsx"),x=o(_),C=n("./client/lib/viewport/index.js"),j=o(C),E=function(){},w=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){if(!this.props.showOnMobile&&j.default.isMobile())return null;var e=(0,b.default)("popover","tooltip","is-"+this.props.status,"is-"+this.props.position,this.props.className);return h.default.createElement(x.default,{autoPosition:this.props.autoPosition,className:e,rootClassName:this.props.rootClassName,context:this.props.context,id:this.props.id,isVisible:this.props.isVisible,onClose:E,position:this.props.position,showDelay:this.props.showDelay},this.props.children)}}]),t}(m.Component);w.propTypes={autoPosition:v.default.bool,className:v.default.string,id:v.default.string,isVisible:v.default.bool,position:v.default.string,rootClassName:v.default.string,status:v.default.string,showDelay:v.default.number,showOnMobile:v.default.bool},w.defaultProps={showDelay:100,position:"top",showOnMobile:!1},t.default=w,e.exports=t.default},"./client/components/track-input-changes/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onInputChange=function(){o.inputEdited=!0},o.onInputBlur=function(e){o.inputEdited&&(o.props.onNewValue(e),o.inputEdited=!1)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.inputEdited=!1}},{key:"render",value:function(){var e=this,t=h.default.Children.only(this.props.children),n=(0,y.assign)({},t.props,{onChange:function(n){"function"==typeof t.props.onChange&&t.props.onChange.call(t,n),e.onInputChange(n)},onBlur:function(n){"function"==typeof t.props.onBlur&&t.props.onBlur.call(t,n),e.onInputBlur(n)}});return h.default.cloneElement(t,n)}}]),t}(m.Component);b.displayName="TrackInputChanges",b.propTypes={onNewValue:v.default.func},b.defaultProps={onNewValue:y.noop},t.default=b,e.exports=t.default},"./client/lib/build-url/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=s.default.parse(e,!0);return t?n.query.s=t:delete n.query.s,n=(0,r.pick)(n,"pathname","hash","query"),s.default.format(n).replace(/\%20/g,"+")};var r=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/url/url.js"),s=o(i);e.exports=t.default},"./client/lib/embed-frame-markup/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,n=e.scripts,o=e.styles;return t||n||o?(0,a.renderToStaticMarkup)(s.default.createElement("html",null,s.default.createElement("head",null,(0,l.map)(o,function(e,t){var n=e.media,o=e.src;return s.default.createElement("link",{key:t,rel:"stylesheet",media:n,href:o})}),s.default.createElement("style",{dangerouslySetInnerHTML:{__html:"a { cursor: default; }"}})),s.default.createElement("body",{style:{margin:0}},s.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}}),s.default.createElement("script",{src:u}),s.default.createElement("script",{dangerouslySetInnerHTML:{__html:"\n\t\t\t\t\t[ 'click', 'dragstart' ].forEach( function( type ) {\n\t\t\t\t\t\tdocument.addEventListener( type, function( event ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\t}, true );\n\t\t\t\t\t} );\n\t\t\t\t"}}),(0,l.flatMap)(n,function(e,t){var n=e.extra,o=e.src;return[n?s.default.createElement("script",{key:t+"-extra",dangerouslySetInnerHTML:{__html:n}}):null,s.default.createElement("script",{key:t,src:o})]})))):""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./node_modules/react/react.js"),s=o(i),a=n("./node_modules/react-dom/server.js"),l=n("./node_modules/lodash/lodash.js"),u="https://s0.wp.com/wp-includes/js/jquery/jquery.js";e.exports=t.default},"./client/lib/embeds/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./client/dispatcher/index.js"),i=o(r),s=n("./client/lib/wp/browser.js"),a=o(s);t.default={fetch:function(e,t){var n=a.default.undocumented().site(e),o=void 0;t?(i.default.handleViewAction({type:"FETCH_EMBED",siteId:e,url:t}),o={embed_url:t,force:"wpcom"}):i.default.handleViewAction({type:"FETCH_EMBEDS",siteId:e}),n.embeds(o,function(n,o){t?i.default.handleServerAction({type:"RECEIVE_EMBED",siteId:e,url:t,data:o,error:n}):i.default.handleServerAction({type:"RECEIVE_EMBEDS",siteId:e,embeds:o?o.embeds:null,error:n})})}},e.exports=t.default},"./client/lib/embeds/list-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/flux/utils.js"),b=n("./client/dispatcher/index.js"),_=o(b),x=/\(\?P?<([\w$]+)>/g,C=/^([^\w\s\\])(.*)([^\w\s\\])([gim])?$/,j=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e){return this.getState()[e]}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case"FETCH_EMBEDS":e=(0,a.default)({},e,(0,i.default)({},t.siteId,{status:"LOADING"}));break;case"RECEIVE_EMBEDS":if(t.error)e=(0,a.default)({},e,(0,i.default)({},t.siteId,{status:"ERROR"}));else{var n=t.embeds.map(function(e){e=e.replace(x,"(");var t=e.match(C);if(t&&t[1]===t[3])return new RegExp(t[2],t[4]);try{return new RegExp(e)}catch(e){return!1}}).filter(Boolean);e=(0,a.default)({},e,(0,i.default)({},t.siteId,{status:"LOADED",embeds:n}))}}return e}}]),t}(y.ReduceStore);t.default=new j(_.default),e.exports=t.default},"./client/lib/embeds/store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/flux/utils.js"),b=n("./client/dispatcher/index.js"),_=o(b),x=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e){var t=this.getState()[e];return t?t:{}}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case"STOP_EDITING_POST":e={};break;case"FETCH_EMBED":e=(0,a.default)({},e,(0,i.default)({},t.url,{status:"LOADING"}));break;case"RECEIVE_EMBED":t.error?e=(0,a.default)({},e,(0,i.default)({},t.url,{status:"ERROR"})):t.data&&(e=(0,a.default)({},e,(0,i.default)({},t.url,{status:"LOADED",body:t.data.result,scripts:t.data.scripts,styles:t.data.styles})))}return e}}]),t}(y.ReduceStore);t.default=new x(_.default),e.exports=t.default},"./client/lib/infinite-list/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/lodash.js"),i=n("./client/dispatcher/index.js"),s=o(i),a=n("./client/lib/infinite-list/scroll-store.js"),l=o(a),u=n("./client/lib/infinite-list/positions-store.js"),d=o(u),c=null,f=null,p=1e3,m={leading:!1};t.default={storePositions:(0,r.throttle)(function(e,t){c||setTimeout(function(){var e=d.default.get(c.url);(0,r.isEqual)(c.positions,e)||s.default.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:c.url,positions:c.positions}),c=null},0),c={url:e,positions:t}},p,m),storeScroll:(0,r.throttle)(function(e,t){f||setTimeout(function(){var e=l.default.get(f.url);f.scrollPosition!==e&&s.default.handleViewAction({type:"SCROLL_CHANGED",url:f.url,scrollPosition:f.scrollPosition}),f=null},0),f={url:e,scrollPosition:t}},p,m)},e.exports=t.default},"./client/lib/infinite-list/positions-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=m.get(e);f("comparing positions:",e,n,t),(0,i.isEqual)(n,t)||(f("storing values:",e,t),p[e]=t,m.emit("change"))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/lodash.js"),s=n("./node_modules/debug/browser.js"),a=o(s),l=n("./client/dispatcher/index.js"),u=o(l),d=n("./client/lib/mixins/emitter/index.js"),c=o(d),f=(0,a.default)("calypso:infinite-list:positions-store"),p={},m={get:function(e){return f("positions-store:get(): ",e,p),p[e]}};(0,c.default)(m),m.dispatchToken=u.default.register(function(e){var t=e.action;switch(t.type){case"INFINITE_LIST_POSITION_CHANGED":r(t.url,t.positions)}}),t.default=m,e.exports=t.default},"./client/lib/infinite-list/scroll-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=l.get(e);n!==t&&(a[e]=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./client/dispatcher/index.js"),s=o(i),a={},l={get:function(e){return a[e]}};l.dispatchToken=s.default.register(function(e){var t=e.action;switch(t.type){case"SCROLL_CHANGED":r(t.url,t.scrollPosition)}}),t.default=l,e.exports=t.default},"./client/lib/media-serialization/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Formats={DOM:"DOM",STRING:"STRING",SHORTCODE:"SHORTCODE",OBJECT:"OBJECT",API:"API",UNKNOWN:"UNKNOWN"},t.MediaTypes={IMAGE:"IMAGE",VIDEO:"VIDEO",AUDIO:"AUDIO",UNKNOWN:"UNKNOWN"}},"./client/lib/media-serialization/create-element-from-string.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0;if(document.implementation&&document.implementation.createHTMLDocument)t=document.implementation.createHTMLDocument("").body;else if("undefined"!=typeof DOMParser)try{return(new DOMParser).parseFromString(e,"text/html").body.firstChild}catch(e){}return t=t||document.createElement("div"),t.innerHTML=e,t.firstChild},e.exports=t.default},"./client/lib/media-serialization/detect-format.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r);t.default=function(e){return"string"==typeof e?a.Formats.STRING:"object"===("undefined"==typeof e?"undefined":(0,i.default)(e))&&"string"==typeof e.nodeName?a.Formats.DOM:e&&e.tag&&(0,s.includes)(d,e.type)?a.Formats.SHORTCODE:e&&e.type&&(0,s.includes)(a.MediaTypes,e.type)?a.Formats.OBJECT:u.default.getMimePrefix(e)?a.Formats.API:a.Formats.UNKNOWN};var s=n("./node_modules/lodash/lodash.js"),a=n("./client/lib/media-serialization/constants.js"),l=n("./client/lib/media/utils.js"),u=o(l),d=["closed","self-closing","single"];e.exports=t.default},"./client/lib/media-serialization/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,s.default)(e);return l.default[n.toLowerCase()].deserialize(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./client/lib/media-serialization/detect-format.js"),s=o(i),a=n("./client/lib/media-serialization/strategies/index.js"),l=o(a)},"./client/lib/media-serialization/strategies/api.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t={media:(0,i.assign)({transient:!1},e),appearance:{}};switch(a.default.getMimePrefix(e)){case"image":t.type=l.MediaTypes.IMAGE;break;case"audio":t.type=l.MediaTypes.AUDIO;break;case"video":t.type=l.MediaTypes.VIDEO}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./node_modules/lodash/lodash.js"),s=n("./client/lib/media/utils.js"),a=o(s),l=n("./client/lib/media-serialization/constants.js")},"./client/lib/media-serialization/strategies/dom.js":function(e,t,n){"use strict";function o(e,t){return t.type=i.MediaTypes.IMAGE,t.media.URL=e.getAttribute("src"),t.media.alt=e.getAttribute("alt"),t.media.transient=e.hasAttribute("data-istransient"),["width","height"].forEach(function(n){var o="natural"+n[0].toUpperCase()+n.slice(1),r=e.getAttribute(n)||e[o]||e[n];r&&isFinite(r)&&(t.media[n]=parseInt(r,10))}),s.test(e.className)&&(t.appearance.size=e.className.match(s)[1]),l.test(e.className)&&(t.appearance.align=e.className.match(l)[1]),a.test(e.className)&&(t.media.ID=e.className.match(a)[1],isFinite(t.media.ID)&&(t.media.ID=parseInt(t.media.ID,10))),t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};switch(e.nodeName){case"IMG":t=o(e,t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./client/lib/media-serialization/constants.js"),s=/\bsize-(\w+)\b/,a=/\bwp-image-((media-)?\d+)\b/,l=/\balign(left|center|right|none)\b/},"./client/lib/media-serialization/strategies/index.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./client/lib/media-serialization/strategies/dom.js"),i=o(r),s=n("./client/lib/media-serialization/strategies/string.js"),a=o(s),l=n("./client/lib/media-serialization/strategies/shortcode.js"),u=o(l),d=n("./client/lib/media-serialization/strategies/object.js"),c=o(d),f=n("./client/lib/media-serialization/strategies/api.js"),p=o(f),m=n("./client/lib/media-serialization/strategies/unknown.js"),h=o(m);t.default={dom:i,string:a,shortcode:u,object:c,api:p,unknown:h},e.exports=t.default},"./client/lib/media-serialization/strategies/object.js":function(e,t,n){"use strict";function o(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=o},"./client/lib/media-serialization/strategies/shortcode.js":function(e,t,n){"use strict";function o(e,t){if(e.attrs&&e.attrs.named&&(l.test(e.attrs.named.align)&&(t.appearance.align=e.attrs.named.align.match(l)[1]),a.test(e.attrs.named.id)&&(t.media.ID=parseInt(e.attrs.named.id.match(a)[1],10)),t.media.width&&isFinite(e.attrs.named.width)&&(t.media.width=parseInt(e.attrs.named.width,10))),!e.content)return t;var n=e.content.match(s);return n&&n[2]&&(t.media.caption=n[2].trim()),n?(0,i.deserialize)(n[1],t):t}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};switch(e.tag){case"caption":t=o(e,t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=r;var i=n("./client/lib/media-serialization/index.js"),s=/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i,a=/attachment_(\d+)/,l=/align(\w+)/},"./client/lib/media-serialization/strategies/string.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=d.default.parse(e);return n?(0,c.deserialize)(n,t):t}function i(e,t){var n=(0,p.default)(e);return n instanceof window.Element?(0,c.deserialize)(n,t):t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{media:{},appearance:{}};return[r,i].reduce(function(n,o){return(0,l.default)(n,o(e,t))},{})}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/core-js/object/assign.js"),l=o(a);t.deserialize=s;var u=n("./client/lib/shortcode/index.js"),d=o(u),c=n("./client/lib/media-serialization/index.js"),f=n("./client/lib/media-serialization/create-element-from-string.js"),p=o(f)},"./client/lib/media-serialization/strategies/unknown.js":function(e,t,n){"use strict";function o(){return{type:r.MediaTypes.UNKNOWN,media:{},appearance:{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=o;var r=n("./client/lib/media-serialization/constants.js")},"./client/lib/media/library-selected-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){e in v._media||(v._media[e]=[])}function i(e,t){v._media[e]=(0,d.map)(t,"ID")}function s(e,t){r(e),v._media[e].push(t.ID)}function a(e,t,n){var o;n||(n=t.ID),n&&e in v._media&&(o=v._media[e].indexOf(n),-1!==o&&v._media[e].splice(o,1,t.ID))}function l(e,t){t.forEach(function(t){a(e,t)})}function u(e,t){var n;e in v._media&&(n=v._media[e].indexOf(t.ID),-1!==n&&v._media[e].splice(n,1))}Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/lodash/lodash.js"),c=n("./client/lib/media/store.js"),f=o(c),p=n("./client/dispatcher/index.js"),m=o(p),h=n("./client/lib/mixins/emitter/index.js"),g=o(h),v={_media:{}};(0,g.default)(v),v.get=function(e,t){return f.default.get(e,t)},v.getAll=function(e){return e in v._media?v._media[e].map(function(t){return f.default.get(e,t)}).filter(function(e){return e&&(e.guid||e.transient)}):[]},v.dispatchToken=m.default.register(function(e){var t=e.action;switch(m.default.waitFor([f.default.dispatchToken]),t.type){case"CHANGE_MEDIA_SOURCE":i(t.siteId,[]),v.emit("change");break;case"SET_MEDIA_LIBRARY_SELECTED_ITEMS":if(t.error||!t.siteId||!t.data||!Array.isArray(t.data))break;i(t.siteId,t.data),v.emit("change");break;case"CREATE_MEDIA_ITEM":!t.error&&t.siteId&&t.data&&(s(t.siteId,t.data),v.emit("change"));break;case"RECEIVE_MEDIA_ITEM":if(t.error&&t.siteId&&t.id&&(u(t.siteId,{ID:t.id}),v.emit("change")),!t.siteId||!t.data||t.error)break;a(t.siteId,t.data,t.id),v.emit("change");break;case"RECEIVE_MEDIA_ITEMS":!t.error&&t.siteId&&t.data&&t.data.media&&(l(t.siteId,t.data.media),v.emit("change"));break;case"REMOVE_MEDIA_ITEM":if(!t.siteId||!t.data||t.error)break;u(t.siteId,t.data),v.emit("change")}}),t.default=v,e.exports=t.default},"./client/lib/popup-monitor/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){this.intervals={},this.monitorInterval=null}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i),a=n("./client/lib/mixins/emitter/index.js"),l=o(a);(0,l.default)(r.prototype),r.prototype.open=function(e,t,n){var o;return t=t||Date.now(),o=window.open(e,t,n),this.startMonitoring(t,o),this},r.prototype.getScreenCenterSpecs=function(e,t){var n="undefined"!=typeof window.screenTop?window.screenTop:window.screenY,o="undefined"!=typeof window.screenLeft?window.screenLeft:window.screenX;return["width="+e,"height="+t,"top="+(n+window.innerHeight/2-t/2),"left="+(o+window.innerWidth/2-e/2)].join()},r.prototype.isOpen=function(e){var t=!1;try{t=this.intervals[e]&&this.intervals[e].closed}catch(e){}return!t},r.prototype.checkStatus=function(){for(var e in this.intervals)this.intervals.hasOwnProperty(e)&&!this.isOpen(e)&&(this.emit("close",e),delete this.intervals[e]);0===(0,s.default)(this.intervals).length&&(clearInterval(this.monitorInterval),delete this.monitorInterval)},r.prototype.startMonitoring=function(e,t){this.monitorInterval||(this.monitorInterval=setInterval(this.checkStatus.bind(this),100)),this.intervals[e]=t},t.default=r,e.exports=t.default},"./client/lib/posts/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var o,r=b.default.get();("string"==typeof e||Array.isArray(e))&&(e=(0,c.fromPairs)([].concat(e).map(function(e){return[e,t]}))),o=(r.metadata||[]).filter(function(t){return!e.hasOwnProperty(t.key)}),(0,l.default)(e).forEach(function(t){var r={key:t,operation:n};"delete"!==n&&(r.value=e[t]),o.push(r)}),R.default.handleViewAction({type:"EDIT_POST",post:{metadata:o}})}function i(e){return e=(0,c.clone)(e),e=(0,M.normalizeTermsForApi)(e),e.author&&(e.author=e.author.ID),e}Object.defineProperty(t,"__esModule",{value:!0});var s,a=n("./node_modules/babel-runtime/core-js/object/keys.js"),l=o(a),u=n("./node_modules/store/store.js"),d=o(u),c=n("./node_modules/lodash/lodash.js"),f=n("./node_modules/debug/browser.js"),p=o(f),m=n("./client/lib/wp/browser.js"),h=o(m),g=n("./client/lib/posts/posts-store.js"),v=o(g),y=n("./client/lib/posts/post-edit-store.js"),b=o(y),_=n("./client/lib/posts/post-list-store-factory.js"),x=o(_),C=n("./client/lib/preferences/store.js"),j=o(C),E=n("./client/lib/sites-list/index.js"),w=o(E),S=n("./client/lib/posts/utils.js"),k=o(S),T=n("./client/lib/version-compare/index.js"),P=o(T),I=n("./client/dispatcher/index.js"),R=o(I),N=n("./client/lib/posts/stats.js"),M=n("./client/state/posts/utils.js"),D=(0,
w.default)(),O=(0,p.default)("calypso:posts");s={startEditingNew:function(e,t){var n;t=t||{},n={type:"DRAFT_NEW_POST",siteId:e,postType:t.type||"post",title:t.title,content:t.content},R.default.handleViewAction(n)},startEditingExisting:function(e,t){var n,o=b.default.get();e&&(o&&o.site_ID===e&&o.ID===t||(R.default.handleViewAction({type:"START_EDITING_POST",siteId:e,postId:t}),n=h.default.site(e).post(t),n.get({context:"edit",meta:"autosave"},function(e,t){R.default.handleServerAction({type:"RECEIVE_POST_TO_EDIT",error:e,post:t})})))},stopEditing:function(){R.default.handleViewAction({type:"STOP_EDITING_POST"})},autosave:function(e){var t,n=b.default.get(),o=b.default.getSavedPost(),r=h.default.undocumented().site(n.site_ID);if(e=e||function(){},!b.default.isDirty())return e(new Error("NOT_DIRTY"));if(d.default.set("wpcom-autosave:"+n.site_ID+":"+n.ID,n),k.default.isPublished(o)||k.default.isPublished(n)){if(t=D.getSite(n.site_ID),!n.ID||!t||t.jetpack&&(0,P.default)(t.options.jetpack_version,"3.7.0-dev","<"))return e(new Error("NO_AUTOSAVE"));R.default.handleViewAction({type:"POST_AUTOSAVE",post:n}),r.postAutosave(n.ID,{content:n.content,title:n.title,excerpt:n.excerpt},function(t,n){R.default.handleServerAction({type:"RECEIVE_POST_AUTOSAVE",error:t,autosave:n}),e(t,n)})}else s.saveEdited(null,null,e,{recordSaveEvent:!1,autosave:!0})},blockSave:function(e){R.default.handleViewAction({type:"BLOCK_EDIT_POST_SAVE",key:e})},unblockSave:function(e){R.default.handleViewAction({type:"UNBLOCK_EDIT_POST_SAVE",key:e})},edit:function(e){R.default.handleViewAction({type:"EDIT_POST",post:e})},editRawContent:function(e){R.default.handleViewAction({type:"EDIT_POST_RAW_CONTENT",content:e})},resetRawContent:function(){R.default.handleViewAction({type:"RESET_POST_RAW_CONTENT"})},updateMetadata:function(e,t){r(e,t,"update")},deleteMetadata:function(e){r(e,null,"delete")},saveEdited:function(e,t,n,o){var r,s,a,u,d,f,p;return R.default.handleViewAction({type:"EDIT_POST",post:e}),r=b.default.get(),b.default.hasContent()?b.default.isSaveBlocked()?void(0,c.defer)(n,new Error("SAVE_BLOCKED"),r):(u=b.default.getChangedAttributes(),(0,l.default)(u).length?(u=i(u),d=b.default.getRawContent(),f=j.default.get("editor-mode"),p=!r.ID,R.default.handleViewAction({type:"EDIT_POST_SAVE"}),s=h.default.site(r.site_ID).post(r.ID),a={context:"edit",apiVersion:"1.2"},o&&o.autosave&&(a.autosave=o.autosave),o&&o.recordSaveEvent===!1||(0,N.recordSaveEvent)(t),(u&&"future"===u.status&&k.default.isFutureDated(r)||u&&"publish"===u.status&&k.default.isBackDated(r))&&(u=(0,c.assign)({},u,{status:"publish",date:r.date})),void s[p?"add":"update"](a,u,function(e,t){var o,r;r=j.default.get("editor-mode"),e||(o=v.default.get(t.global_ID)),R.default.handleServerAction({type:"RECEIVE_POST_BEING_EDITED",error:e,rawContent:f===r?d:null,isNew:p,original:o,post:t}),n(e,t)})):void(0,c.defer)(n,new Error("NO_CHANGE"),r)):void(0,c.defer)(n,new Error("NO_CONTENT"),r)},update:function(e,t,n){var o=h.default.site(e.site_ID).post(e.ID);o.update(t,s.receiveUpdate.bind(null,n))},trash:function(e,t){var n=h.default.site(e.site_ID).post(e.ID);n.delete(s.receiveUpdate.bind(null,t))},restore:function(e,t){var n=h.default.site(e.site_ID).post(e.ID);n.restore(s.receiveUpdate.bind(null,t))},queryPosts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";R.default.handleViewAction({type:"QUERY_POSTS",options:e,postListStoreId:t})},fetchNextPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=(0,x.default)(e);if(!t.isLastPage()&&!t.isFetchingNextPage()){R.default.handleViewAction({type:"FETCH_NEXT_POSTS_PAGE",postListStoreId:e});var n=t.getID(),o=t.getNextPageParams(),r=t.getSiteId();r?h.default.site(r).postsList(o,s.receivePage.bind(null,n,e)):h.default.me().postsList(o,s.receivePage.bind(null,n,e))}},receivePage:function(e,t,n,o){R.default.handleServerAction({type:"RECEIVE_POSTS_PAGE",id:e,postListStoreId:t,error:n,data:o})},fetchUpdated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=(0,x.default)(e);if(!t.isFetchingNextPage()){R.default.handleViewAction({type:"FETCH_UPDATED_POSTS",postListStoreId:e});var n=t.getID(),o=t.getUpdatesParams(),r=t.getSiteId();r?(O("Fetching posts that have been updated for %s since %s %o",r,o.modified_after,o),h.default.site(r).postsList(o,s.receiveUpdated.bind(null,n,e))):(O("Fetching posts that have been updated since %s %o",o.modified_after,o),h.default.me().postsList(o,s.receiveUpdated.bind(null,n,e)))}},receiveUpdated:function(e,t,n,o){R.default.handleServerAction({type:"RECEIVE_UPDATED_POSTS",id:e,postListStoreId:t,error:n,data:o})},receiveUpdate:function(e,t,n){var o;t||(o=v.default.get(n.global_ID)),R.default.handleServerAction({type:"RECEIVE_UPDATED_POST",error:t,original:o,post:n}),e(t,n)},fetchCounts:function(e,t){R.default.handleViewAction({type:"FETCH_POST_COUNTS",siteId:e}),h.default.undocumented().site(e).postCounts(t,function(t,n){R.default.handleServerAction({type:"RECEIVE_POST_COUNTS",error:t,data:n,siteId:e})})}},t.default=s,e.exports=t.default},"./client/lib/posts/post-list-cache-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(new Date).getTime(),n=e.timeSaved;return t-n>P}function i(e){return l(e)?k[e].list:void(k[e]&&k[e].dirty&&(N("delete cached list %o",e),delete k[e],delete T[e]))}function s(e){var t=u(e.query);k[t]&&k[t].dirty||(k[t]={timeStored:(new Date).getTime(),dirty:!1,list:e,listKey:t})}function a(e,t){var n=I.getSite(e.site_ID),o=[n.slug,n.ID,!1],r=[e.status,t],i=void 0,s=void 0,a=void 0,l=void 0;for(s in k)k.hasOwnProperty(s)&&(a=k[s],l=a.list,l.query.type===e.type&&-1!==o.indexOf(l.query.siteId)&&(i=l.query.status.split(","),0!==(0,b.intersection)(i,r).length&&(a.dirty=!0)));S.cacheIndex.clearRecordsByParamFilter(function(e){var t=o.slice(0,-1),n=["/me/posts"].concat((0,y.default)(t.map(function(e){return"/sites/"+e+"/posts"}))),i=e.query&&e.query.status?e.query.status.split(","):[],s=(0,b.intersection)(i,r);return n.indexOf(e.path)!==-1&&!!s.length})}function l(e){return k[e]&&!r(k[e])&&!k[e].dirty}function u(e){var t=[],n=(0,g.default)(e).sort();return n.forEach(function(n){t.push(n+"-"+e[n])}),t.join(":")}function d(e,t,n){N("setCanonicalList %o %o (%o)",e,t,n),T[e]=T[e]||{},T[e][t]=n}function c(e,t){N("getCanonicalList %o %o",e,t);var n=T[e];if(!n||"object"!==("undefined"==typeof n?"undefined":(0,m.default)(n)))return!1;var o=(0,g.default)(n);return o[0]!==t?(delete k[e],delete T[e],!1):n[t]}function f(e,t){N("deleteCanonicalList %o %o",e,t);var n=T[e];n&&n[t]&&delete n[t]}Object.defineProperty(t,"__esModule",{value:!0});var p=n("./node_modules/babel-runtime/helpers/typeof.js"),m=o(p),h=n("./node_modules/babel-runtime/core-js/object/keys.js"),g=o(h),v=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),y=o(v);t.getCacheKey=u,t.setCanonicalList=d,t.getCanonicalList=c,t.deleteCanonicalList=f;var b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/debug/browser.js"),x=o(_),C=n("./client/lib/sites-list/index.js"),j=o(C),E=n("./client/dispatcher/index.js"),w=o(E),S=n("./client/lib/wp/sync-handler/cache-index.js"),k={},T={},P=3e5,I=(0,j.default)(),R={get:i,_reset:function(){k={}}},N=(0,x.default)("calypso:posts-list:cache");R.dispatchToken=w.default.register(function(e){var t=e.action,o=n("./client/lib/posts/post-list-store-factory.js")();switch(w.default.waitFor([o.dispatchToken]),t.type){case"FETCH_NEXT_POSTS_PAGE":s(o.get());break;case"RECEIVE_POSTS_PAGE":s(o.get());break;case"RECEIVE_UPDATED_POSTS":s(o.get());break;case"RECEIVE_UPDATED_POST":case"RECEIVE_POST_BEING_EDITED":t.post&&(a(t.post,t.original?t.original.status:null),s(o.get()))}}),t.default=R},"./client/lib/posts/post-list-store-factory.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e||"default";return a[t]||(a[t]=new s.default(t)),a[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./client/lib/posts/post-list-store.js"),s=o(i),a={};r._reset=function(){a={}},e.exports=t.default},"./client/lib/posts/post-list-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(e.length<3||t.length<2)return[];var n=e.indexOf(t[0]);if(n===-1)return r(e,t.slice(1));var o=e.indexOf(t.slice(-1)[0]);if(o===-1)return r(e,t.slice(0,-1));var i=e.slice(n,o+1);return(0,b.difference)(i,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=o(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=o(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=o(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=o(p),h=n("./node_modules/babel-runtime/helpers/typeof.js"),g=o(h);t.getRemovedPosts=r,t.default=function(e){function t(e){var t=(0,b.assign)({},P,e);"draft,pending"===t.status&&(t.orderBy="modified");var n=(0,k.getCacheKey)(t),o=T.default.get(n);o?u=o:(u={id:R,postIds:[],errors:[],page:0,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1,query:t,listKey:n},R++)}function n(e){return(0,b.transform)(e,function(e,t,n){null!=t&&(e[n]=t)},{})}function o(){var e=u.query.orderBy;u.postIds.sort(function(t,n){var o=S.default.get(t),r=S.default.get(n),i=o[e],s=r[e];return i===s?o.title===r.title?0:o.title>r.title?1:-1:i>s?-1:1})}function i(e,t,n){if(t||!n||"object"!==("undefined"==typeof n?"undefined":(0,g.default)(n)))return t=t||{message:"Error fetching PostsList: empty data response"},I("Error fetching PostsList from api:",t),t.timestamp=Date.now(),void u.errors.push(t);var i=n.found,s=n.meta,a=n.posts,l=n.__sync,d=l||{},c=d.responseSource,f=d.requestKey;if(e===u.id){u.isFetchingNextPage=!1,u.nextPageHandle=s&&s.next_page,u.nextPageHandle&&i||(u.isLastPage=!0);var p=a.map(function(e){return e.global_ID}),m=u.postIds.slice(0);if("local"===c&&f)(0,k.setCanonicalList)(u.listKey,f,m);else{var h=(0,k.getCanonicalList)(u.listKey,f);h&&(I("canonicalList found (%o)",h),m=h,(0,k.deleteCanonicalList)(u.listKey,f))}var v=r(m,p);v.length&&(I("removePosts (%o)",v),m=(0,b.difference)(m,v));var y=(0,b.difference)(p,m);y.length&&(I("newPosts (%o)",y),m=m.concat(y),u.page++),u.postIds=m,o()}}function a(e,t,n){var r=void 0,i=void 0,s=void 0;return t?void I("An error occurred while fetching updated posts %o",t):void(e===u.id&&n.posts.length&&(r=n.posts,I("Fetched updated posts:",r),i=r.map(function(e){return e.global_ID}),s=(0,b.difference)(i,u.postIds),s.length&&(u.postIds=u.postIds.concat(s),o())))}if(!e)throw new Error("must supply a post-list-store id");var u={postIds:[],errors:[],query:(0,b.clone)(P),page:0,nextPageHandle:!1,isLastPage:!1,isFetchingNextPage:!1,isFetchingUpdated:!1};return new(function(o){function r(){(0,l.default)(this,r);var t=(0,f.default)(this,(r.__proto__||(0,s.default)(r)).call(this));return t.id=e,t.dispatchToken=C.default.register(t.handlePayload.bind(t)),t}return(0,m.default)(r,o),(0,d.default)(r,[{key:"get",value:function(){return u}},{key:"getID",value:function(){return u.id}},{key:"getSiteId",value:function(){return u.query.siteId}},{key:"getAll",value:function(){return u.postIds.map(function(e){return S.default.get(e)})}},{key:"getTree",value:function(){var e=[];return u.postIds.forEach(function(t){var n=(0,b.clone)(S.default.get(t));n.parent=n.parent?n.parent.ID:0,e.push(n)}),(0,E.default)("ID").treeify(e)}},{key:"getPost",value:function(e){if(u.postIds.indexOf(e)>-1)return S.default.get(e)}},{key:"getPage",value:function(){return u.page}},{key:"off",value:function(e,t){this.removeListener(e,t)}},{key:"isLastPage",value:function(){return u.isLastPage}},{key:"isFetchingNextPage",value:function(){return u.isFetchingNextPage}},{key:"hasRecentError",value:function(){var e=30,t=Date.now();return(0,b.some)(u.errors,function(n){return t-n.timestamp<1e3*e})}},{key:"getNextPageParams",value:function(){var e={},t=u.query;return e.status=t.status,e.order_by=t.orderBy,e.order=t.order,e.author=t.author,e.number=t.perPage,e.type=t.type,e.page_handle=u.nextPageHandle,e.exclude_tree=t.exclude_tree,e.number=t.number,e.before=t.before,e.after=t.after,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),n(e)}},{key:"getUpdatesParams",value:function(){var e={},t=u.query;return e.status=t.status,e.author=t.author,e.type=t.type,t.search&&(e.search=t.search),t.category&&(e.category=t.category),t.tag&&(e.tag=t.tag),e.siteId||(e.site_visibility="visible"),t.meta&&(e.meta=t.meta),u.postIds.length&&(e.modified_after=(0,b.maxBy)(this.getAll(),function(e){return new Date(e.modified).getTime()}).modified,"modified"===t.orderBy||u.isLastPage||(e.after=this.getPost((0,b.last)(u.postIds)).date)),n(e)}},{key:"handlePayload",value:function(e){var n=e.action;if(!n.postListStoreId||n.postListStoreId===this.id||"RECEIVE_UPDATED_POST"===n.type)switch(C.default.waitFor([S.default.dispatchToken]),n.type){case"QUERY_POSTS":I("QUERY_POSTS",n),t(n.options),this.emit("change");break;case"FETCH_NEXT_POSTS_PAGE":I("FETCH_NEXT_POSTS_PAGE",n),u.isFetchingNextPage=!0,this.emit("change");break;case"RECEIVE_POSTS_PAGE":I("receivePage",n),i(n.id,n.error,n.data),this.emit("change");break;case"RECEIVE_UPDATED_POSTS":a(n.id,n.error,n.data),this.emit("change");break;case"RECEIVE_UPDATED_POST":n.post&&u.postIds.indexOf(n.post.global_ID)>-1&&this.emit("change")}}}]),r}(_.EventEmitter))};var v=n("./node_modules/debug/browser.js"),y=o(v),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/events/events.js"),x=n("./client/dispatcher/index.js"),C=o(x),j=n("./client/lib/tree-convert/index.js"),E=o(j),w=n("./client/lib/posts/posts-store.js"),S=o(w),k=n("./client/lib/posts/post-list-cache-store.js"),T=o(k),P={siteId:!1,type:"post",status:"publish",orderBy:"date",order:"DESC",author:!1,search:!1,category:!1,tag:!1,perPage:20},I=(0,y.default)("calypso:posts-list"),R=0},"./client/lib/posts/posts-store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=a.get(e.global_ID);t&&(0,l.isEqual)(e,t)||(g[e.global_ID]=e)}function i(e,t){var n=t||{},o=n.global_ID;if(!o)return void h("global_ID is required for a post",t);var i=a.get(o);return i&&"local"===e?void h("existing record (%o), do not overwrite with local response",i):void f.default.normalizeSync(t,function(e,t){r(t)})}function s(e,t){var n=i.bind(null,t);e.forEach(n)}Object.defineProperty(t,"__esModule",{value:!0});var a,l=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/debug/browser.js"),d=o(u),c=n("./client/lib/posts/utils.js"),f=o(c),p=n("./client/dispatcher/index.js"),m=o(p),h=(0,d.default)("calypso:posts"),g={};a={get:function(e){return g[e]}},a.dispatchToken=m.default.register(function(e){var t=e.action;switch(t.type){case"RECEIVE_POSTS_PAGE":case"RECEIVE_UPDATED_POSTS":if(!t.error&&t.data.posts){var n=t.data.__sync&&t.data.__sync.responseSource;s(t.data.posts,n)}break;case"RECEIVE_UPDATED_POST":t.error||i("server",t.post)}}),t.default=a,e.exports=t.default},"./client/lib/posts/stats.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=void 0,o=E.getSelectedSite();g.default.mc.bumpStat("editor_usage",e),o&&(n=o.jetpack?"jetpack":"wpcom",g.default.mc.bumpStat("editor_usage_"+n,e),t&&g.default.mc.bumpStat("editor_cpt_usage_"+n,t+"_"+e))}function i(e){g.default.mc.bumpStat("editor_actions",e)}function s(e,t,n){g.default.ga.recordEvent("Editor",e,t,n)}function a(e){var t=y.default.get(),n=y.default.getSavedPost();if(t&&n){var o=n.status,a=t.status,l="calypso_editor_"+t.type+"_",u=!1,d=!1,c=!1,f=null;t.ID||_.default.isPublished(t)?"draft"===a?l+="savedraft":o===a?(c="edit",l+="update"):"publish"===a||"private"===a?(l+="publish",c="new",e&&e.isConfirmationSidebarEnabled&&(f="confirmation_sidebar")):"pending"===a?l+="pending":"future"===a&&(l+="schedule",u="status-schedule",d="Scheduled Post",e&&e.isConfirmationSidebarEnabled&&(f="confirmation_sidebar")):l+="savedraft",c&&r(c,t.type),u&&i(u),d&&s(d),j("recordSaveEvent %s currentStatus=%s nextStatus=%s",l,o,a),g.default.tracks.recordEvent(l,{post_id:t.ID,post_type:t.type,visibility:_.default.getVisibility(t),current_status:o,next_status:a,context:f})}}function l(e){S("editor-button","calypso_"+e),g.default.ga.recordEvent("Editor","Clicked TinyMCE Button",e),j("TinyMCE button click",e,"mc=",w)}function u(e){S("html-editor-button","calypso_"+e),g.default.ga.recordEvent("Editor","Clicked TinyMCE HTML Button",e),j("TinyMCE HTML button click",e,"mc=",w)}Object.defineProperty(t,"__esModule",{value:!0}),t.recordStat=i,t.recordEvent=s,t.recordSaveEvent=a,t.recordTinyMCEButtonClick=l,t.recordTinyMCEHTMLButtonClick=u;var d=n("./node_modules/debug/browser.js"),c=o(d),f=n("./node_modules/lodash/lodash.js"),p=n("./client/config/index.js"),m=o(p),h=n("./client/lib/analytics/index.js"),g=o(h),v=n("./client/lib/posts/post-edit-store.js"),y=o(v),b=n("./client/lib/posts/utils.js"),_=o(b),x=n("./client/lib/sites-list/index.js"),C=o(x),j=(0,c.default)("calypso:posts:stats"),E=new C.default,w=Math.random()<=.01||"development"===(0,m.default)("env"),S=w?g.default.mc.bumpStat:f.noop},"./client/lib/react-pass-to-children/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,o=(0,r.assign)({},e.props,t);return delete o.children,s.default.Children.count(e.props.children)>1?(n=s.default.Children.map(e.props.children,function(e){return s.default.isValidElement(e)?s.default.cloneElement(e,o):e}),s.default.createElement("div",null,n)):s.default.cloneElement(e.props.children,o)};var r=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/react/react.js"),s=o(i);e.exports=t.default},"./client/lib/search-url/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){if(n)return void n(e);var o=(0,l.default)(window.location.href,e);c("search posts for:",e),t&&e?(c("replacing URL: "+o),s.default.replace(o)):(c("setting URL: "+o),s.default.show(o))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./node_modules/page/index.js"),s=o(i),a=n("./client/lib/build-url/index.js"),l=o(a),u=n("./node_modules/debug/browser.js"),d=o(u),c=(0,d.default)("calypso:search-url");e.exports=t.default},"./client/lib/sharing/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./client/lib/popup-monitor/index.js"),i=o(r),s=function(e,t){var n=new i.default;n.open(e,null,"toolbar=0,location=0,status=0,menubar=0,"+n.getScreenCenterSpecs(780,500)),n.once("close",t)};t.default=s,e.exports=t.default},"./client/lib/shortcodes/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){s.default.handleViewAction({type:u.ActionTypes.FETCH_SHORTCODE,payload:{siteId:e,shortcode:t}}),l.default.undocumented().site(e).shortcodes({shortcode:t},function(n,o){s.default.handleServerAction({type:u.ActionTypes.RECEIVE_SHORTCODE,payload:{siteId:e,shortcode:t,data:o},error:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=r;var i=n("./client/dispatcher/index.js"),s=o(i),a=n("./client/lib/wp/browser.js"),l=o(a),u=n("./client/lib/shortcodes/constants.js")},"./client/lib/shortcodes/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ActionTypes={FETCH_SHORTCODE:"FETCH_SHORTCODE",RECEIVE_SHORTCODE:"RECEIVE_SHORTCODE"},t.LoadStatus={LOADING:"LOADING",ERROR:"ERROR",LOADED:"LOADED"}},"./client/lib/shortcodes/store.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/flux/utils.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./client/dispatcher/index.js"),x=o(_),C=n("./client/lib/shortcode/index.js"),j=o(C),E=n("./client/lib/shortcodes/constants.js"),w=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"getInitialState",value:function(){return{}}},{key:"get",value:function(e,t){var n=this.getState();if(n[e]&&n[e][t])return n[e][t]}},{key:"reduce",value:function(e,t){switch(t=t.action,t.type){case E.ActionTypes.FETCH_SHORTCODE:e=(0,a.default)({},e,(0,i.default)({},t.payload.siteId,(0,a.default)({},e[t.payload.siteId],(0,i.default)({},t.payload.shortcode,{status:E.LoadStatus.LOADING}))));break;case E.ActionTypes.RECEIVE_SHORTCODE:e=(0,a.default)({},e,(0,i.default)({},t.payload.siteId,(0,a.default)({},e[t.payload.siteId],(0,i.default)({},t.payload.shortcode,{status:t.error?E.LoadStatus.ERROR:E.LoadStatus.LOADED})))),t.error||(0,a.default)(e[t.payload.siteId][t.payload.shortcode],{body:t.payload.data.result,scripts:t.payload.data.scripts,styles:t.payload.data.styles});break;case"RECEIVE_MEDIA_ITEMS":case"RECEIVE_MEDIA_ITEM":if(!e.hasOwnProperty(t.siteId))break;var n=void 0;n=Array.isArray(t.data.media)?t.data.media:[t.data];var o=n.map(function(e){return e.ID.toString()});e=(0,a.default)({},e,(0,i.default)({},t.siteId,(0,b.pickBy)(e[t.siteId],function(e,t){var n=j.default.parse(t);if("gallery"!==n.tag||!n.attrs.named||!n.attrs.named.ids)return!0;var r=n.attrs.named.ids.split(",");return!(0,b.intersection)(r,o).length})))}return e}}]),t}(y.ReduceStore);t.default=new w(x.default),e.exports=t.default},"./client/lib/tree-convert/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return this instanceof r?void(this.key=e||"id"):new r(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./client/lib/tree-convert/tree-traverser.js"),s=o(i);r.prototype.treeify=function(e){var t=[],n={};return e.forEach(function(t,o){n[e[o][this.key]]=t},this),e.forEach(function(e){var o;e.parent>0&&n[e.parent]?(o=n[e.parent],o.items=o.items||[],o.items.push(e)):(e.parent=0,t.push(e))}),this.sortItems(t),this.removeOrderProperty(t),t},r.prototype.untreeify=function(e,t){return t=t||[],e.forEach(function(e,n){e.items&&r.prototype.untreeify(e.items,t),e.order=n+1,t.push(e)}),t},r.prototype.sortItems=function(e){var t={};t.items=e,s.default.traverse(t,[function(e){return e.items&&e.items.sort(function(e,t){return e.order-t.order}),e}])},r.prototype.removeOrderProperty=function(e){var t={};t.items=e,s.default.traverse(t,[function(e){return e.items&&e.items.forEach(function(e){delete e.order}),e}])},t.default=r,e.exports=t.default},"./client/lib/tree-convert/tree-traverser.js":function(e,t,n){"use strict";function o(e,t){return i(t,function(t){return(0,d.some)(t.items,{id:e.id})})||t}function r(e,t,n){return t.forEach(function(t){e=t(e,n)},this),e.items&&(e.items=e.items.map(function(e){return r(e,t,n)})),e}function i(e,t){return t(e)?e:e.items?a(e.items,function(e){return i(e,t)}):void 0}function s(e,t,n){var o;if(e.items)for(o=0;o<e.items.length;o++){if(n(e.items[o]))return void(e.items[o]=t);s(e.items[o],t,n)}}function a(e,t){var n,o,r=e.length;for(n=0;n<r;n++)if(o=t(e[n]))return o}function l(e,t){return function(n){return n.id===t&&(n.items=n.items||[],n.items.push(e)),n}}function u(e,t,n){return function(o){var r,i="before"===n?0:1;return~(r=(0,d.findIndex)(o.items,{id:t}))&&o.items.splice(r+i,0,e),o}}Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/lodash/lodash.js");t.default={traverse:function(e,t){return r(e,t,e)},parent:o,find:i,replaceItem:s,remover:function(e){return function(t){var n;return~(n=(0,d.findIndex)(t.items,{id:e}))&&t.items.splice(n,1),t}},inserter:function(e,t,n){var o="child"===n?l:u;return o(e,t,n)}},e.exports=t.default},"./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentNavigationTab=void 0;var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/classnames/index.js"),a=o(s),l=t.CommentNavigationTab=function(e){var t=e.children,n=e.className,o=e.onClick;return i.default.createElement("div",{className:(0,a.default)("comment-navigation__tab",n),onClick:o},t)};t.default=l},"./client/my-sites/media-library/content.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/page/index.js"),j=o(C),E=n("./node_modules/i18n-calypso/index.js"),w=n("./client/lib/analytics/index.js"),S=o(w),k=n("./client/lib/analytics/track-component-view/index.jsx"),T=o(k),P=n("./client/components/notice/index.jsx"),I=o(P),R=n("./client/components/notice/notice-action.jsx"),N=o(R),M=n("./client/components/data/media-list-data/index.jsx"),D=o(M),O=n("./client/components/data/media-library-selected-data/index.jsx"),A=o(O),L=n("./client/lib/media/actions.js"),B=o(L),F=n("./client/lib/media/constants.js"),z=n("./client/state/sites/selectors.js"),U=n("./client/my-sites/media-library/header.jsx"),H=o(U),W=n("./client/my-sites/media-library/external-media-header.jsx"),V=o(W),q=n("./client/my-sites/media-library/list.jsx"),G=o(q),K=n("./client/my-sites/sharing/connections/inline-connection.jsx"),$=o(K),Y=n("./client/state/sharing/keyring/selectors.js"),J=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.retryList=function(){B.default.sourceChanged(o.props.site.ID)},o.goToSharing=function(e){e.preventDefault(),(0,j.default)("/sharing/"+o.props.site.slug)},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"renderErrors",value:function(){var e=this,t=(0,b.values)(this.props.mediaValidationErrors).map(b.head);return(0,b.map)((0,b.groupBy)(t),function(t,n){var o=void 0,r=void 0,i={count:t.length,args:t.length};e.props.site&&(r=B.default.clearValidationErrorsByType.bind(null,e.props.site.ID,n));var s="is-error",a=void 0,l=void 0,u=!1;switch(n){case F.ValidationErrors.FILE_TYPE_NOT_IN_PLAN:s="is-warning",a="plan-media-storage-error-video",l="video-upload",o=e.props.translate("%d file could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.","%d files could not be uploaded because your site does not support video files. Upgrade to a premium plan for video support.",i);break;case F.ValidationErrors.FILE_TYPE_UNSUPPORTED:o=e.props.translate("%d file could not be uploaded because the file type is not supported.","%d files could not be uploaded because their file types are unsupported.",i);break;case F.ValidationErrors.UPLOAD_VIA_URL_404:o=e.props.translate("%d file could not be uploaded because no image exists at the specified URL.","%d files could not be uploaded because no images exist at the specified URLs",i);break;case F.ValidationErrors.EXCEEDS_MAX_UPLOAD_SIZE:o=e.props.translate("%d file could not be uploaded because it exceeds the maximum upload size.","%d files could not be uploaded because they exceed the maximum upload size.",i);break;case F.ValidationErrors.NOT_ENOUGH_SPACE:a="plan-media-storage-error",l="extra-storage",o=e.props.translate("%d file could not be uploaded because there is not enough space left.","%d files could not be uploaded because there is not enough space left.",i);break;case F.ValidationErrors.EXCEEDS_PLAN_STORAGE_LIMIT:a="plan-media-storage-error",l="extra-storage",o=e.props.translate("%d file could not be uploaded because you have reached your plan storage limit.","%d files could not be uploaded because you have reached your plan storage limit.",i);break;case F.ValidationErrors.SERVICE_FAILED:o=e.props.translate("We are unable to retrieve your full media library."),u=!0;break;default:o=e.props.translate("%d file could not be uploaded because an error occurred while uploading.","%d files could not be uploaded because errors occurred while uploading.",i)}return v.default.createElement(I.default,{key:n,status:s,text:o,onDismissClick:r},e.renderNoticeAction(a,l),u&&e.renderTryAgain())})}},{key:"renderTryAgain",value:function(){return v.default.createElement(N.default,{onClick:this.retryList},this.props.translate("Retry"))}},{key:"renderNoticeAction",value:function(e,t){if(!e)return null;var n="calypso_upgrade_nudge_impression",o={cta_name:e,cta_feature:t};return v.default.createElement(N.default,{external:!0,href:t?"/plans/compare/"+this.props.siteSlug+"?feature="+t:"/plans/"+this.props.siteSlug,onClick:this.recordPlansNavigation.bind(this,"calypso_upgrade_nudge_cta_click",o)},this.props.translate("Upgrade Plan"),v.default.createElement(T.default,{eventName:n,eventProperties:o}))}},{key:"recordPlansNavigation",value:function(e,t){S.default.ga.recordEvent("Media","Clicked Upload Error Action"),S.default.tracks.recordEvent(e,t)}},{key:"renderExternalMedia",value:function(){var e=this.props.translate("To show Photos from Google, you need to connect your Google account.");return v.default.createElement("div",{className:"media-library__connect-message"},v.default.createElement("p",null,v.default.createElement("img",{src:"/calypso/images/sharing/google-photos-logo.svg",width:"96",height:"96"})),v.default.createElement("p",null,e),v.default.createElement($.default,{serviceName:"google_photos"}))}},{key:"getThumbnailType",value:function(){return""!==this.props.source?F.MEDIA_IMAGE_THUMBNAIL:this.props.site.is_private?F.MEDIA_IMAGE_RESIZER:F.MEDIA_IMAGE_PHOTON}},{key:"renderMediaList",value:function(){return!this.props.site||this.props.isRequesting&&!this.hasRequested?(this.hasRequested=!0,v.default.createElement(G.default,{key:"list-loading",filterRequiresUpgrade:this.props.filterRequiresUpgrade})):""===this.props.source||this.props.isConnected?v.default.createElement(D.default,{siteId:this.props.site.ID,postId:this.props.postId,filter:this.props.filter,search:this.props.search,source:this.props.source},v.default.createElement(A.default,{siteId:this.props.site.ID},v.default.createElement(G.default,{key:"list-"+[this.props.site.ID,this.props.search,this.props.filter].join(),site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.props.filterRequiresUpgrade,search:this.props.search,containerWidth:this.props.containerWidth,thumbnailType:this.getThumbnailType(),single:this.props.single,scrollable:this.props.scrollable,onEditItem:this.props.onEditItem}))):this.renderExternalMedia()}},{key:"renderHeader",value:function(){return this.props.isConnected?""!==this.props.source?v.default.createElement(V.default,{onMediaScaleChange:this.props.onMediaScaleChange,
site:this.props.site,visible:!this.props.isRequesting,canCopy:void 0===this.props.postId,source:this.props.source,onSourceChange:this.props.onSourceChange,selectedItems:this.props.selectedItems,sticky:!this.props.scrollable}):this.props.filterRequiresUpgrade?null:v.default.createElement(H.default,{site:this.props.site,filter:this.props.filter,onMediaScaleChange:this.props.onMediaScaleChange,onAddMedia:this.props.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDeleteItem:this.props.onDeleteItem,sticky:!this.props.scrollable}):null}},{key:"render",value:function(){return v.default.createElement("div",{className:"media-library__content"},this.renderHeader(),this.renderErrors(),this.renderMediaList())}}]),t}(v.default.Component);J.propTypes={site:x.default.object,mediaValidationErrors:x.default.object,filter:x.default.string,filterRequiresUpgrade:x.default.bool,search:x.default.string,source:x.default.string,containerWidth:x.default.number,single:x.default.bool,scrollable:x.default.bool,onAddMedia:x.default.func,onMediaScaleChange:x.default.func,onEditItem:x.default.func,postId:x.default.number,isConnected:x.default.bool},J.defaultProps={mediaValidationErrors:(0,i.default)({}),onAddMedia:b.noop,source:""},t.default=(0,y.connect)(function(e,t){return{siteSlug:t.site?(0,z.getSiteSlug)(e,t.site.ID):"",isRequesting:(0,Y.isKeyringConnectionsFetching)(e)}},null,null,{pure:!1})((0,E.localize)(J)),e.exports=t.default},"./client/my-sites/media-library/data-source.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryDataSource=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/gridicons/build/index.js"),y=o(v),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./client/components/button/index.jsx"),w=o(E),S=n("./client/components/popover/menu.jsx"),k=o(S),T=n("./client/components/popover/menu-item.jsx"),P=o(T),I=n("./client/config/index.js"),R=o(I),N=t.MediaLibraryDataSource=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.togglePopover=function(){n.setState({popover:!n.state.popover})},n.changeSource=function(e){var t=e.target,o=t.getAttribute("action")?t.getAttribute("action"):t.parentNode.getAttribute("action"),r=o?o:"";r!==n.props.source&&n.props.onSourceChange(r)},n.state={popover:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"renderScreenReader",value:function(e){return h.default.createElement("span",{className:"screen-reader-text"},e&&e.label)}},{key:"renderMenuItems",value:function(e){var t=this;return e.map(function(e){return h.default.createElement(P.default,{action:e.value,key:e.value,onClick:t.changeSource},e.icon,e.label)})}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.source,o=[{value:"",label:t("WordPress library"),icon:h.default.createElement(y.default,{icon:"my-sites",size:24})},{value:"google_photos",label:t("Photos from Your Google library"),icon:h.default.createElement("img",{src:"/calypso/images/sharing/google-photos-logo.svg",width:"24",height:"24"})}],r=(0,b.find)(o,function(e){return e.value===n}),i=(0,j.default)({button:!0,"media-library__source-button":!0,"is-open":this.state.popover});return R.default.isEnabled("external-media")?h.default.createElement("div",{className:"media-library__datasource"},h.default.createElement(w.default,{borderless:!0,ref:"popoverMenuButton",className:i,onClick:this.togglePopover,title:t("Choose media library source")},r&&r.icon,this.renderScreenReader(r),h.default.createElement(k.default,{context:this.refs&&this.refs.popoverMenuButton,isVisible:this.state.popover,position:"bottom right",onClose:this.togglePopover,className:"is-dialog-visible media-library__header-popover"},this.renderMenuItems(o)))):null}}]),t}(m.Component);N.propTypes={source:x.default.string.isRequired,onSourceChange:x.default.func.isRequired},t.default=(0,g.localize)(N)},"./client/my-sites/media-library/drop-zone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/lib/analytics/index.js"),_=o(b),x=n("./client/components/drop-zone/index.jsx"),C=o(x),j=n("./client/lib/media/actions.js"),E=o(j),w=n("./client/lib/site/utils.js"),S=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.uploadFiles=function(e){o.props.site&&(E.default.clearValidationErrors(o.props.site.ID),E.default.add(o.props.site.ID,e),o.props.onAddMedia(),o.props.trackStats&&_.default.mc.bumpStat("editor_upload_via","drop"))},o.isValidTransfer=function(e){return!!e&&(!e.mozSourceNode&&(!e.types||-1!==Array.prototype.indexOf.call(e.types,"Files")))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return(0,w.userCan)("upload_files",this.props.site)?v.default.createElement(C.default,{fullScreen:this.props.fullScreen,onVerifyValidTransfer:this.isValidTransfer,onFilesDrop:this.uploadFiles}):null}}]),t}(v.default.Component);S.displayName="MediaLibraryDropZone",S.propTypes={site:h.default.object,fullScreen:h.default.bool,onAddMedia:h.default.func,trackStats:h.default.bool},S.defaultProps={fullScreen:!0,onAddMedia:y.noop,trackStats:!0},t.default=S,e.exports=t.default},"./client/my-sites/media-library/external-media-header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/gridicons/build/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./client/my-sites/media-library/scale.jsx"),j=o(C),E=n("./client/components/card/index.jsx"),w=o(E),S=n("./client/components/button/index.jsx"),k=o(S),T=n("./client/lib/media/actions.js"),P=o(T),I=n("./client/lib/media/list-store.js"),R=o(I),N=n("./client/components/sticky-panel/index.jsx"),M=o(N),D=250,O=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onCopy=function(){var e=n.props,t=e.site,o=e.selectedItems,r=e.source,i=e.onSourceChange;i("",function(){P.default.addExternal(t.ID,o,r)})},n.handleClick=n.onClick.bind(n),n.handleMedia=n.onUpdateState.bind(n),n.handleFetchOn=n.onSetFetch.bind(n),n.handleFetchOff=(0,y.debounce)(n.onDisableFetch.bind(n),D),n.state=n.getState(),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onSetFetch",value:function(){this.handleFetchOff.cancel(),this.setState({fetching:!0})}},{key:"onDisableFetch",value:function(){this.setState({fetching:!1})}},{key:"componentDidMount",value:function(){R.default.on("change",this.handleMedia)}},{key:"componentWillUnmount",value:function(){this.handleFetchOff.cancel(),R.default.off("change",this.handleMedia)}},{key:"onUpdateState",value:function(){var e=this.getState(),t=e.fetching;t?this.handleFetchOn():this.handleFetchOff()}},{key:"getState",value:function(){return{fetching:R.default.isFetchingNextPage(this.props.site.ID)}}},{key:"onClick",value:function(){var e=this.props.site.ID;P.default.sourceChanged(e),P.default.fetchNextPage(e)}},{key:"renderCopyButton",value:function(){var e=this.props,t=e.selectedItems,n=e.translate;return h.default.createElement(k.default,{compact:!0,disabled:0===t.length,onClick:this.onCopy,primary:!0},n("Copy to media library"))}},{key:"renderCard",value:function(){var e=this.props,t=e.onMediaScaleChange,n=e.translate,o=e.canCopy;return h.default.createElement(w.default,{className:"media-library__header"},h.default.createElement(k.default,{compact:!0,disabled:this.state.fetching,onClick:this.handleClick},h.default.createElement(v.default,{icon:"refresh",size:24}),n("Refresh")),o&&this.renderCopyButton(),h.default.createElement(j.default,{onChange:t}))}},{key:"render",value:function(){var e=this.props.visible;return e?this.props.sticky?h.default.createElement(M.default,{minLimit:660},this.renderCard()):this.renderCard():null}}]),t}(h.default.Component);O.propTypes={onMediaScaleChange:x.default.func,site:x.default.object.isRequired,visible:x.default.bool.isRequired,canCopy:x.default.bool,selectedItems:x.default.array,onSourceChange:x.default.func,sticky:x.default.bool},t.default=(0,b.localize)(O),e.exports=t.default},"./client/my-sites/media-library/filter-bar.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryFilterBar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/lodash/lodash.js"),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./client/components/section-nav/index.jsx"),x=o(_),C=n("./client/components/section-nav/tabs.jsx"),j=o(C),E=n("./client/components/search/index.jsx"),w=o(E),S=n("./client/lib/analytics/track-component-view/index.jsx"),k=o(S),T=n("./client/blocks/plan-storage/index.jsx"),P=o(T),I=n("./client/my-sites/media-library/filter-item.jsx"),R=o(I),N=n("./client/my-sites/media-library/data-source.jsx"),M=o(N),D=t.MediaLibraryFilterBar=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.changeFilter=function(e){o.props.onFilterChange(e)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getSearchPlaceholderText",value:function(){var e=this.props,t=e.filter,n=e.source,o=e.translate;if("google_photos"===n)return o("Search your Google library…");switch(t){case"this-post":return o("Search media uploaded to this post…");case"images":return o("Search images…");case"audio":return o("Search audio files…");case"videos":return o("Search videos…");case"documents":return o("Search documents…");default:return o("Search all media…")}}},{key:"getFilterLabel",value:function(e){var t=this.props.translate;switch(e){case"this-post":return t("This Post",{comment:"Filter label for media list"});case"images":return t("Images",{comment:"Filter label for media list"});case"audio":return t("Audio",{comment:"Filter label for media list"});case"videos":return t("Videos",{comment:"Filter label for media list"});case"documents":return t("Documents",{comment:"Filter label for media list"});default:return t("All",{comment:"Filter label for media list"})}}},{key:"isFilterDisabled",value:function(e){var t=this.props.enabledFilters;return t&&(!e.length||!(0,v.includes)(t,e))}},{key:"renderTabItems",value:function(){var e=this;if(""!==this.props.source)return null;var t=["","this-post","images","documents","videos","audio"];return this.props.post||(0,v.pull)(t,"this-post"),h.default.createElement(j.default,null,t.map(function(t){return h.default.createElement(R.default,{key:"filter-tab-"+t,value:t,selected:e.props.filter===t,onChange:e.changeFilter,disabled:e.isFilterDisabled(t)},e.getFilterLabel(t))}))}},{key:"renderSearchSection",value:function(){if(this.props.filterRequiresUpgrade||!this.props.isConnected)return null;var e=""===this.props.source;return h.default.createElement(w.default,{key:this.props.source,analyticsGroup:"Media",pinned:e,fitsContainer:!0,onSearch:this.props.onSearch,initialValue:this.props.search,placeholder:this.getSearchPlaceholderText(),delaySearch:!0})}},{key:"renderPlanStorage",value:function(){if(this.props.source)return null;var e="calypso_upgrade_nudge_impression",t={cta_name:"plan-media-storage"};return h.default.createElement(P.default,{siteId:this.props.site.ID},h.default.createElement(k.default,{eventName:e,eventProperties:t}))}},{key:"render",value:function(){return h.default.createElement("div",{className:"media-library__filter-bar"},h.default.createElement(M.default,{source:this.props.source,onSourceChange:this.props.onSourceChange}),h.default.createElement(x.default,{selectedText:this.getFilterLabel(this.props.filter),hasSearch:!0,allowDropdown:!this.props.source},this.renderTabItems(),this.renderSearchSection()),this.renderPlanStorage())}}]),t}(m.Component);D.propTypes={basePath:b.default.string,enabledFilters:b.default.arrayOf(b.default.string),filter:b.default.string,filterRequiresUpgrade:b.default.bool,search:b.default.string,source:b.default.string,site:b.default.object,onFilterChange:b.default.func,onSearch:b.default.func,translate:b.default.func,post:b.default.bool,isConnected:b.default.bool},D.defaultProps={filter:"",basePath:"/media",onFilterChange:v.noop,onSourceChange:v.noop,onSearch:v.noop,translate:v.identity,source:"",post:!1,isConnected:!0},t.default=(0,g.localize)(D)},"./client/my-sites/media-library/filter-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./client/components/section-nav/item.jsx"),v=o(g),y=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.activate=function(){o.props.onChange(o.props.value)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.selected;return h.default.createElement(v.default,{selected:n,onClick:this.activate,disabled:t},this.props.children)}}]),t}(m.Component);t.default=y,e.exports=t.default},"./client/my-sites/media-library/filter-to-mime-prefix.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;switch(e){case"images":t="image";break;case"audio":t="audio";break;case"videos":t="video";break;case"documents":t="application"}return t},e.exports=t.default},"./client/my-sites/media-library/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/gridicons/build/index.js"),_=o(b),x=n("./client/components/popover/menu.jsx"),C=o(x),j=n("./client/components/popover/menu-item.jsx"),E=o(j),w=n("./client/my-sites/media-library/scale.jsx"),S=o(w),k=n("./client/my-sites/media-library/upload-button.jsx"),T=o(k),P=n("./client/my-sites/media-library/upload-url.jsx"),I=o(P),R=n("./client/lib/site/utils.js"),N=n("./client/post-editor/media-modal/secondary-actions.jsx"),M=o(N),D=n("./client/components/card/index.jsx"),O=o(D),A=n("./client/components/button-group/index.jsx"),L=o(A),B=n("./client/components/button/index.jsx"),F=o(B),z=n("./client/components/sticky-panel/index.jsx"),U=o(z),H=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={addingViaUrl:!1,isMoreOptionsVisible:!1},o.setMoreOptionsContext=function(e){e&&o.setState({moreOptionsContext:e})},o.toggleAddViaUrl=function(e){o.setState({addingViaUrl:e,isMoreOptionsVisible:!1})},o.toggleMoreOptions=function(e){o.setState({isMoreOptionsVisible:e})},o.renderUploadButtons=function(){var e=o.props,t=e.site,n=e.filter,r=e.onAddMedia;if((0,R.userCan)("upload_files",t))return y.default.createElement(L.default,{className:"media-library__upload-buttons"},y.default.createElement(T.default,{site:t,filter:n,onAddMedia:r,className:"button is-compact"},y.default.createElement(_.default,{icon:"add-image"}),y.default.createElement("span",{className:"is-desktop"},o.props.translate("Add New",{context:"Media upload"}))),y.default.createElement(F.default,{compact:!0,ref:o.setMoreOptionsContext,onClick:o.toggleMoreOptions.bind(o,!o.state.isMoreOptionsVisible),className:"button media-library__upload-more"},y.default.createElement("span",{className:"screen-reader-text"},o.props.translate("More Options")),y.default.createElement(_.default,{icon:"chevron-down",size:20}),y.default.createElement(C.default,{context:o.state.moreOptionsContext,isVisible:o.state.isMoreOptionsVisible,onClose:o.toggleMoreOptions.bind(o,!1),position:"bottom right",className:"is-dialog-visible media-library__header-popover"},y.default.createElement(E.default,{onClick:o.toggleAddViaUrl.bind(o,!0)},o.props.translate("Add via URL",{context:"Media upload"})))))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.site,n=e.onAddMedia;if(this.state.addingViaUrl)return y.default.createElement(I.default,{site:t,onAddMedia:n,onClose:this.toggleAddViaUrl.bind(this,!1),className:"media-library__header"});var o=y.default.createElement(O.default,{className:"media-library__header"},this.renderUploadButtons(),y.default.createElement(M.default,{selectedItems:this.props.selectedItems,onViewDetails:this.props.onViewDetails,onDelete:this.props.onDeleteItem,site:this.props.site,view:"LIST"}),y.default.createElement(S.default,{onChange:this.props.onMediaScaleChange}));return this.props.sticky?y.default.createElement(U.default,{minLimit:660},o):o}}]),t}(y.default.Component);H.displayName="MediaLibraryHeader",H.propTypes={site:h.default.object,filter:h.default.string,sliderPositionCount:h.default.number,onMediaScaleChange:h.default.func,onAddMedia:h.default.func,sticky:h.default.bool},H.defaultProps={onAddMedia:function(){},sliderPositionCount:100,sticky:!1},t.default=(0,g.localize)(H),e.exports=t.default},"./client/my-sites/media-library/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/classnames/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/prop-types/index.js"),_=o(b),x=n("./node_modules/react-redux/es/index.js"),C=n("./client/my-sites/media-library/content.jsx"),j=o(C),E=n("./client/lib/media/actions.js"),w=o(E),S=n("./client/my-sites/media-library/drop-zone.jsx"),k=o(S),T=n("./client/lib/media/library-selected-store.js"),P=o(T),I=n("./client/lib/media/utils.js"),R=o(I),N=n("./client/my-sites/media-library/filter-to-mime-prefix.js"),M=o(N),D=n("./client/my-sites/media-library/filter-bar.jsx"),O=o(D),A=n("./client/components/data/media-validation-data/index.jsx"),L=o(A),B=n("./client/components/data/query-preferences/index.jsx"),F=o(B),z=n("./client/lib/search-url/index.js"),U=o(z),H=n("./client/state/sharing/keyring/selectors.js"),W=n("./client/state/sharing/keyring/actions.js"),V=function(e){return""===e.source||(0,y.some)(e.connectedServices,function(t){return t.service===e.source})},q=function(e){return!e.isRequesting&&""!==e.source&&0===e.connectedServices.length},G=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.doSearch=function(e){(0,U.default)(e,o.props.search,o.props.onSearch)},o.onAddMedia=function(){var e=P.default.getAll(o.props.site.ID),t=e;o.props.site&&(o.props.filter&&(t=R.default.filterItemsByMimePrefix(t,(0,M.default)(o.props.filter))),o.props.single&&t.length>1&&(t=t.slice(-1)),(0,y.isEqual)(e,t)||w.default.setLibrarySelectedItems(o.props.site.ID,t),o.props.onAddMedia())},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){q(this.props)&&this.props.requestKeyringConnections()}},{key:"componentWillReceiveProps",value:function(e){q(e)&&""===this.props.source&&this.props.requestKeyringConnections()}},{key:"filterRequiresUpgrade",value:function(){var e=this.props,t=e.filter,n=e.site,o=e.source;if(o)return!1;switch(t){case"audio":return!(n&&n.options.upgraded_filetypes_enabled||n.jetpack);case"videos":return!(n&&n.options.videopress_enabled||n.jetpack)}return!1}},{key:"renderDropZone",value:function(){return""!==this.props.source?null:h.default.createElement(k.default,{site:this.props.site,filter:this.props.filter,fullScreen:this.props.fullScreenDropZone,onAddMedia:this.onAddMedia})}},{key:"render",value:function(){var e=void 0;e=h.default.createElement(j.default,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),search:this.props.search,source:this.props.source,isConnected:V(this.props),containerWidth:this.props.containerWidth,single:this.props.single,scrollable:this.props.scrollable,onAddMedia:this.onAddMedia,onAddAndEditImage:this.props.onAddAndEditImage,onMediaScaleChange:this.props.onScaleChange,onSourceChange:this.props.onSourceChange,selectedItems:this.props.mediaLibrarySelectedItems,onDeleteItem:this.props.onDeleteItem,onEditItem:this.props.onEditItem,onViewDetails:this.props.onViewDetails,postId:this.props.postId}),this.props.site&&(e=h.default.createElement(L.default,{siteId:this.props.site.ID},e));var t=(0,v.default)("media-library",{"is-single":this.props.single},this.props.className);return h.default.createElement("div",{className:t},h.default.createElement(F.default,null),this.renderDropZone(),h.default.createElement(O.default,{site:this.props.site,filter:this.props.filter,filterRequiresUpgrade:this.filterRequiresUpgrade(),enabledFilters:this.props.enabledFilters,search:this.props.search,onFilterChange:this.props.onFilterChange,onSourceChange:this.props.onSourceChange,source:this.props.source,onSearch:this.doSearch,isConnected:V(this.props),post:!!this.props.postId}),e)}}]),t}(m.Component);G.propTypes={className:_.default.string,site:_.default.object,filter:_.default.string,enabledFilters:_.default.arrayOf(_.default.string),search:_.default.string,source:_.default.string,onAddMedia:_.default.func,onFilterChange:_.default.func,onSourceChange:_.default.func,onSearch:_.default.func,onScaleChange:_.default.func,onEditItem:_.default.func,fullScreenDropZone:_.default.bool,containerWidth:_.default.number,single:_.default.bool,scrollable:_.default.bool,postId:_.default.number},G.defaultProps={fullScreenDropZone:!0,onAddMedia:function(){},onScaleChange:function(){},scrollable:!1,source:""},t.default=(0,x.connect)(function(e){return{connectedServices:(0,y.toArray)((0,H.getKeyringConnections)(e)).filter(function(e){return"other"===e.type&&"ok"===e.status}),isRequesting:(0,H.isKeyringConnectionsFetching)(e)}},{requestKeyringConnections:W.requestKeyringConnections})(G),e.exports=t.default},"./client/my-sites/media-library/list-item-audio.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./client/my-sites/media-library/list-item-file-details.jsx"),b=o(y),_=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return v.default.createElement(b.default,(0,i.default)({},this.props,{icon:"audio"}))}}]),t}(v.default.Component);_.displayName="MediaLibraryListItemDocument",t.default=_,e.exports=t.default},"./client/my-sites/media-library/list-item-document.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./client/my-sites/media-library/list-item-file-details.jsx"),v=o(g),y=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement(v.default,this.props)}}]),t}(h.default.Component);y.displayName="MediaLibraryListItemDocument",t.default=y,e.exports=t.default},"./client/my-sites/media-library/list-item-file-details.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/gridicons/build/index.js"),b=o(y),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return v.default.createElement("div",{className:"media-library__list-item-file-details media-library__list-item-centered"},v.default.createElement("div",{className:"media-library__list-item-icon"},v.default.createElement(b.default,{icon:this.props.icon})),v.default.createElement("div",{className:"media-library__list-item-file-name",style:{fontSize:12*(1+this.props.scale)}},this.props.media.title),v.default.createElement("hr",{className:"media-library__list-item-details-separator"}),v.default.createElement("div",{className:"media-library__list-item-file-extension",style:{fontSize:9*(1+this.props.scale)}},(this.props.media.extension||"").toUpperCase()))}}]),t}(v.default.Component);_.displayName="MediaLibraryListItemFileDetails",_.propTypes={media:h.default.object,scale:h.default.number,icon:h.default.string},_.defaultProps={icon:"pages"},t.default=_,e.exports=t.default},"./client/my-sites/media-library/list-item-image.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./client/lib/media/utils.js"),b=o(y),_=n("./client/my-sites/media-library/list-item-file-details.jsx"),x=o(_),C=n("./client/lib/media/constants.js"),j=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={},o.getImageDimensions=function(){var e,t;return e=o.props.media.width?o.props.media.width:o.state.imageWidth,t=o.props.media.height?o.props.media.height:o.state.imageHeight,{width:e,height:t}},o.getImageStyle=function(){var e=o.getImageDimensions();return{maxHeight:e.height>e.width?"none":"100%",maxWidth:e.height<e.width?"none":"100%"}},o.setUnknownImageDimensions=function(e){o.props.media.width||o.setState({imageWidth:e.target.clientWidth}),o.props.media.height||o.setState({imageHeight:e.target.clientHeight})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=b.default.url(this.props.media,{photon:this.props.thumbnailType===C.MEDIA_IMAGE_PHOTON,maxWidth:this.props.maxImageWidth,size:this.props.thumbnailType===C.MEDIA_IMAGE_THUMBNAIL&&"medium"});return e?v.default.createElement("img",{src:e,onLoad:this.setUnknownImageDimensions,alt:this.props.media.alt||this.props.media.title,style:this.getImageStyle(),className:"media-library__list-item-centered",draggable:"false"}):v.default.createElement(x.default,{scale:this.props.scale,media:this.props.media,icon:"image"})}}]),t}(v.default.Component);j.displayName="MediaLibraryListItemImage",j.propTypes={media:h.default.object,scale:h.default.number,maxImageWidth:h.default.number,thumbnailType:h.default.string},j.defaultProps={maxImageWidth:450,thumbnailType:C.MEDIA_IMAGE_PHOTON},t.default=j,e.exports=t.default;
},"./client/my-sites/media-library/list-item-video.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/photon/index.js"),x=o(_),C=n("./client/my-sites/media-library/list-item-file-details.jsx"),j=o(C),E=n("./node_modules/gridicons/build/index.js"),w=o(E),S=n("./client/lib/media/constants.js"),k=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.getHighestQualityThumbnail=function(){if(o.props.media.thumbnails)return o.props.media.thumbnails.fmt_hd||o.props.media.thumbnails.fmt_dvd||o.props.media.thumbnails.fmt_std},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.getHighestQualityThumbnail();if(e){var t=this.props.thumbnailType===S.MEDIA_IMAGE_THUMBNAIL?e:(0,x.default)(e,{width:this.props.maxImageWidth});return b.default.createElement("div",{className:"media-library__list-item-video",style:{backgroundImage:"url("+t+")"}},b.default.createElement("span",{className:"media-library__list-item-icon media-library__list-item-centered"},b.default.createElement(w.default,{icon:"video-camera"})))}return b.default.createElement(j.default,(0,i.default)({},this.props,{icon:"video-camera"}))}}]),t}(b.default.Component);k.displayName="MediaLibraryListItemVideo",k.propTypes={media:v.default.object,maxImageWidth:v.default.number,thumbnailType:v.default.string},k.defaultProps={maxImageWidth:450,thumbnailType:S.MEDIA_IMAGE_PHOTON},t.default=k,e.exports=t.default},"./client/my-sites/media-library/list-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/prop-types/index.js"),_=o(b),x=n("./node_modules/react/react.js"),C=o(x),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./client/components/spinner/index.jsx"),S=o(w),k=n("./node_modules/gridicons/build/index.js"),T=o(k),P=n("./client/my-sites/media-library/list-item-image.jsx"),I=o(P),R=n("./client/my-sites/media-library/list-item-video.jsx"),N=o(R),M=n("./client/my-sites/media-library/list-item-audio.jsx"),D=o(M),O=n("./client/my-sites/media-library/list-item-document.jsx"),A=o(O),L=n("./client/lib/media/utils.js"),B=o(L),F=n("./client/post-editor/media-modal/gallery-help.jsx"),z=o(F),U=n("./client/lib/media/constants.js"),H=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.clickItem=function(e){o.props.onToggle(o.props.media,e.shiftKey)},o.renderItem=function(){var e;if(o.props.media){switch(B.default.getMimePrefix(o.props.media)){case"image":e=I.default;break;case"video":e=N.default;break;case"audio":e=D.default;break;default:e=A.default}return C.default.createElement(e,o.props)}},o.renderSpinner=function(){if(o.props.media&&o.props.media.transient)return C.default.createElement(S.default,{className:"media-library__list-item-spinner"})},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!(e.media===this.props.media&&e.scale===this.props.scale&&e.maxImageWidth===this.props.maxImageWidth&&e.thumbnailType===this.props.thumbnailType&&e.selectedIndex===this.props.selectedIndex&&(0,y.isEqual)(e.style,this.props.style))}},{key:"render",value:function(){var e,t,n,o;return e=(0,E.default)("media-library__list-item",{"is-placeholder":!this.props.media,"is-selected":-1!==this.props.selectedIndex,"is-transient":this.props.media&&this.props.media.transient,"is-small":this.props.scale<=.125}),t=(0,y.omit)(this.props,(0,a.default)(this.constructor.propTypes)),n=(0,y.assign)({width:100*this.props.scale+"%"},this.props.style),this.props.media&&(o=this.props.media.file),-1!==this.props.selectedIndex&&(t["data-selected-number"]=this.props.selectedIndex+1),C.default.createElement("div",(0,i.default)({className:e,style:n,onClick:this.clickItem},t),C.default.createElement("span",{className:"media-library__list-item-selected-icon"},C.default.createElement(T.default,{icon:"checkmark",size:20})),C.default.createElement("figure",{className:"media-library__list-item-figure",title:o},this.renderItem(),this.renderSpinner(),this.props.showGalleryHelp&&C.default.createElement(z.default,null)))}}]),t}(C.default.Component);H.displayName="MediaLibraryListItem",H.propTypes={media:_.default.object,scale:_.default.number.isRequired,maxImageWidth:_.default.number,thumbnailType:_.default.string,showGalleryHelp:_.default.bool,selectedIndex:_.default.number,onToggle:_.default.func,onEditItem:_.default.func,style:_.default.object},H.defaultProps={maxImageWidth:450,thumbnailType:U.MEDIA_IMAGE_PHOTON,selectedIndex:-1,onToggle:y.noop,onEditItem:y.noop},t.default=H,e.exports=t.default},"./client/my-sites/media-library/list-no-content.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./client/components/empty-content/index.jsx"),_=o(b),x=n("./client/my-sites/media-library/upload-button.jsx"),C=o(x),j=n("./client/lib/site/utils.js"),E=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getLabel",value:function(){var e=this.props,t=e.filter,n=e.source,o=e.translate;if("google_photos"===n)return o("You don't have any photos in your Google library.",{comment:"Media no results"});switch(t){case"this-post":return o("There are no media items uploaded to this post.",{comment:"Media no results"});case"images":return o("You don't have any images.",{comment:"Media no results"});case"videos":return o("You don't have any videos.",{comment:"Media no results"});case"audio":return o("You don't have any audio files.",{comment:"Media no results"});case"documents":return o("You don't have any documents.",{comment:"Media no results"});default:return o("You don't have any media.",{comment:"Media no results"})}}},{key:"render",value:function(){var e="",t="";return(0,j.userCan)("upload_files",this.props.site)&&!this.props.source?(e=this.props.translate("Would you like to upload something?"),t=v.default.createElement(C.default,{className:"button is-primary",site:this.props.site},this.props.translate("Upload Media"))):this.props.source&&(e=this.props.translate("New photos may take a few minutes to appear.")),v.default.createElement(_.default,{title:this.getLabel(),line:e,action:t,illustration:"/calypso/images/media/illustration-media.svg",illustrationWidth:150})}}]),t}(g.Component);E.propTypes={site:h.default.object,filter:h.default.string,source:h.default.string},t.default=(0,y.localize)(E),e.exports=t.default},"./client/my-sites/media-library/list-no-results.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./client/my-sites/no-results/index.jsx"),_=o(b),x=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getLabel=function(){var e;switch(o.props.filter){case"images":e=o.props.translate("No images match your search for {{searchTerm/}}.",{components:{searchTerm:y.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;case"videos":e=o.props.translate("No videos match your search for {{searchTerm/}}.",{components:{searchTerm:y.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;case"audio":e=o.props.translate("No audio files match your search for {{searchTerm/}}.",{components:{searchTerm:y.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;case"documents":e=o.props.translate("No documents match your search for {{searchTerm/}}.",{components:{searchTerm:y.default.createElement("em",null,o.props.search)},context:"Media no search results"});break;default:e=o.props.translate("No media files match your search for {{searchTerm/}}.",{components:{searchTerm:y.default.createElement("em",null,o.props.search)},context:"Media no search results"})}return e},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement(_.default,{text:this.getLabel(),image:"/calypso/images/pages/illustration-pages.svg"})}}]),t}(y.default.Component);x.displayName="MediaLibraryListNoResults",x.propTypes={filter:h.default.string,search:h.default.string},x.defaultProps={search:""},t.default=(0,g.localize)(x),e.exports=t.default},"./client/my-sites/media-library/list-plan-promo.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./node_modules/page/index.js"),_=o(b),x=n("./client/lib/analytics/index.js"),C=o(x),j=n("./client/lib/formatting/index.js"),E=n("./client/components/empty-content/index.jsx"),w=o(E),S=n("./client/components/button/index.jsx"),k=o(S),T=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getTitle=function(){switch(o.props.filter){case"videos":return o.props.translate("Upload Videos",{textOnly:!0,context:"Media upload plan needed"});case"audio":return o.props.translate("Upload Audio",{textOnly:!0,context:"Media upload plan needed"});default:return o.props.translate("Upload Media",{textOnly:!0,context:"Media upload plan needed"})}},o.getSummary=function(){switch(o.props.filter){case"videos":return(0,j.preventWidows)(o.props.translate("To upload video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);case"audio":return(0,j.preventWidows)(o.props.translate("To upload audio files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2);default:return(0,j.preventWidows)(o.props.translate("To upload audio and video files to your site, upgrade your plan.",{textOnly:!0,context:"Media upgrade promo"}),2)}},o.viewPlansPage=function(){var e=o.props.site.slug,t=void 0===e?"":e;C.default.tracks.recordEvent("calypso_media_plans_button_click"),(0,_.default)("/plans/"+t)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=h.default.createElement(k.default,{className:"button is-primary",onClick:this.viewPlansPage},this.props.translate("See Plans"));return h.default.createElement(w.default,{title:this.getTitle(),line:this.getSummary(),action:this.props.children||e,illustration:""})}}]),t}(h.default.Component);T.displayName="MediaLibraryListPlanPromo",T.propTypes={site:y.default.object,filter:y.default.string},t.default=(0,g.localize)(T),e.exports=t.default},"./client/my-sites/media-library/list-plan-upgrade-nudge.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return t("audio"===e?"Upgrade to the Premium Plan and Enable Audio Uploads":"Upgrade to a Premium Plan and Enable VideoPress")}function i(e,t){return t("audio"===e?"By upgrading to the Premium plan you'll enable audio upload support on your site.":"By upgrading to a Premium Plan you'll enable VideoPress support on your site.")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryUpgradeNudge=void 0;var s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/i18n-calypso/index.js"),f=n("./client/lib/plans/constants.js"),p=n("./client/my-sites/upgrade-nudge/index.jsx"),m=o(p),h=n("./client/my-sites/media-library/list-plan-promo.js"),g=o(h),v=t.MediaLibraryUpgradeNudge=function(e){var t=e.translate,n=e.filter,o=e.site;return u.default.createElement("div",{className:"media-library__videopress-nudge-container"},u.default.createElement(g.default,{site:o,filter:n},u.default.createElement(m.default,{className:"media-library__videopress-nudge-regular",title:r(n,t),message:i(n,t),feature:"audio"===n?f.FEATURE_AUDIO_UPLOADS:f.FEATURE_VIDEO_UPLOADS,event:"calypso_media_uploads_upgrade_nudge"})))};v.propTypes={site:a.default.object,translate:a.default.func,filter:a.default.string},v.defaultProps={translate:d.identity,filter:"video"},t.default=(0,c.localize)(v)},"./client/my-sites/media-library/list.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaLibraryList=void 0;var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/react-dom/index.js"),C=o(x),j=n("./node_modules/react/react.js"),E=o(j),w=n("./client/lib/media/actions.js"),S=o(w),k=n("./client/lib/media/utils.js"),T=o(k),P=n("./client/my-sites/media-library/list-item.jsx"),I=o(P),R=n("./client/my-sites/media-library/list-no-results.jsx"),N=o(R),M=n("./client/my-sites/media-library/list-no-content.jsx"),D=o(M),O=n("./client/lib/user/index.js"),A=o(O),L=n("./client/components/sorted-grid/index.jsx"),B=o(L),F=n("./client/my-sites/media-library/list-plan-upgrade-nudge.jsx"),z=o(F),U=n("./client/state/preferences/selectors.js"),H=(0,A.default)(),W=1e3,V=t.MediaLibraryList=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.state={},o.setListContext=function(e){e&&o.setState({listContext:C.default.findDOMNode(e)})},o.getMediaItemHeight=function(){return Math.round(o.props.containerWidth*o.props.mediaScale)+o.props.rowPadding},o.getItemsPerRow=function(){return Math.floor(1/o.props.mediaScale)},o.getMediaItemStyle=function(e){var t,n,r=o.getItemsPerRow(),i=r===1/o.props.mediaScale,s=0===(e+1)%r;return t={paddingBottom:o.props.rowPadding,fontSize:225*o.props.mediaScale},i||s||(n=1%o.props.mediaScale/(r-1)*100+"%",H.isRTL()?t.marginLeft=n:t.marginRight=n),t},o.toggleItem=function(e,t){var n=void 0;n=o.props.single?(0,_.filter)(o.props.mediaLibrarySelectedItems,{ID:e.ID}):(0,_.clone)(o.props.mediaLibrarySelectedItems);var r=(0,_.findIndex)(n,{ID:e.ID}),i=-1===r,s=(0,_.findIndex)(o.props.media,{ID:e.ID}),a=s,l=s;!o.props.single&&t&&(a=Math.min(a,o.state.lastSelectedMediaIndex),l=Math.max(l,o.state.lastSelectedMediaIndex));for(var u=a;u<=l;u++){var d=(0,_.findIndex)(n,{ID:o.props.media[u].ID});i&&-1===d?n.push(o.props.media[u]):i||-1===d||n.splice(d,1)}o.setState({lastSelectedMediaIndex:s}),o.props.site&&S.default.setLibrarySelectedItems(o.props.site.ID,n)},o.getItemRef=function(e){return"item-"+e.ID},o.getGroupLabel=function(e){var t=new Date(e),n=new Date;return t.getYear()===n.getYear()?(0,b.moment)(e).format("MMM DD"):(0,b.moment)(e).format("MMM DD, YYYY")},o.getItemGroup=function(e){return e.date.slice(0,10)},o.renderItem=function(e){var t,n=(0,_.findIndex)(o.props.media,{ID:e.ID}),r=o.props.mediaLibrarySelectedItems,i=(0,_.findIndex)(r,{ID:e.ID}),s=o.getItemRef(e);return t=!o.props.single&&i!==-1&&1===r.length&&"image"===T.default.getMimePrefix(e),E.default.createElement(I.default,{ref:s,key:s,style:o.getMediaItemStyle(n),media:e,scale:o.props.mediaScale,thumbnailType:o.props.thumbnailType,showGalleryHelp:t,selectedIndex:i,onToggle:o.toggleItem,onEditItem:o.props.onEditItem})},o.renderLoadingPlaceholders=function(){var e=o.getItemsPerRow(),t=(o.props.media||[]).length,n=e-t%e;return Array.apply(null,new Array(n)).map(function(e,n){return E.default.createElement(I.default,{key:"placeholder-"+n,style:this.getMediaItemStyle(t+n),scale:this.props.mediaScale})},o)},o.renderTrailingItems=function(){var e=o.props,t=e.media,n=e.source;if("google_photos"===n&&t&&t.length>=W){var r=(0,b.translate)("Use the search button to access more photos. You can search for dates, locations, and things.");return E.default.createElement("p",null,E.default.createElement("em",null,r))}return null},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e;return this.props.filterRequiresUpgrade?E.default.createElement(z.default,{filter:this.props.filter,site:this.props.site}):!this.props.mediaHasNextPage&&this.props.media&&0===this.props.media.length?E.default.createElement(this.props.search?N.default:D.default,{site:this.props.site,filter:this.props.filter,search:this.props.search,source:this.props.source}):(e=function(){this.props.mediaOnFetchNextPage()}.bind(this),E.default.createElement(B.default,{ref:this.setListContext,getItemGroup:this.getItemGroup,getGroupLabel:this.getGroupLabel,context:!!this.props.scrollable&&this.state.listContext,items:this.props.media||[],itemsPerRow:this.getItemsPerRow(),lastPage:!this.props.mediaHasNextPage,fetchingNextPage:this.props.mediaFetchingNextPage,guessedItemHeight:this.getMediaItemHeight(),fetchNextPage:e,getItemRef:this.getItemRef,renderItem:this.renderItem,renderLoadingPlaceholders:this.renderLoadingPlaceholders,renderTrailingItems:this.renderTrailingItems,className:"media-library__list"}))}}]),t}(E.default.Component);V.displayName="MediaLibraryList",V.propTypes={site:v.default.object,media:v.default.arrayOf(v.default.object),mediaLibrarySelectedItems:v.default.arrayOf(v.default.object),filter:v.default.string,filterRequiresUpgrade:v.default.bool.isRequired,search:v.default.string,containerWidth:v.default.number,rowPadding:v.default.number,mediaScale:v.default.number.isRequired,thumbnailType:v.default.string,mediaHasNextPage:v.default.bool,mediaFetchingNextPage:v.default.bool,mediaOnFetchNextPage:v.default.func,single:v.default.bool,scrollable:v.default.bool,onEditItem:v.default.func},V.defaultProps={mediaLibrarySelectedItems:(0,i.default)([]),containerWidth:0,rowPadding:10,mediaHasNextPage:!1,mediaFetchingNextPage:!1,mediaOnFetchNextPage:_.noop,single:!1,scrollable:!1,onEditItem:_.noop},t.default=(0,y.connect)(function(e){return{mediaScale:(0,U.getPreference)(e,"mediaScale")}},null,null,{pure:!1})(V)},"./client/my-sites/media-library/scale.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./client/components/forms/range/index.jsx"),E=o(j),w=n("./client/components/segmented-control/index.jsx"),S=o(w),k=n("./client/components/segmented-control/item.jsx"),T=o(k),P=n("./client/state/preferences/actions.js"),I=n("./client/state/preferences/selectors.js"),R=[.077,.115,.157,.24,.323],N=100,M=.32,D=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.onScaleChange=e.onScaleChange.bind(e),e.savePreference=e.savePreference.bind(e),e.debouncedSavePreference=(0,b.debounce)(e.savePreference,1e3),e.setScaleToMobileGrid=e.setScale.bind(e,M),e.setScaleToMobileFull=e.setScale.bind(e,1),e.state={},e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){this.debouncedSavePreference.cancel()}},{key:"savePreference",value:function(e){this.props.saveMediaScalePreference(e)}},{key:"setScale",value:function(e){e!==this.props.scale&&(this.props.onChange(e),this.props.setMediaScalePreference(e),this.debouncedSavePreference(e))}},{key:"onScaleChange",value:function(e){var t=parseInt(e.target.value,10),n=t*R.length/N,o=R[Math.floor(n)];this.setState({sliderPosition:t}),this.setScale(o)}},{key:"getSliderPosition",value:function(){if(this.state.hasOwnProperty("sliderPosition"))return this.state.sliderPosition;var e=this.props.scale,t=R.indexOf(e);return-1===t?0:Math.floor(t*(N-1)/(R.length-1))}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.scale;return v.default.createElement("div",{className:"media-library__scale"},v.default.createElement(S.default,{className:"media-library__scale-toggle",compact:!0},v.default.createElement(T.default,{selected:1!==n,onClick:this.setScaleToMobileGrid},v.default.createElement("span",{className:"media-library__scale-toggle-label"},t("Grid")),v.default.createElement(C.default,{icon:"grid",size:18})),v.default.createElement(T.default,{selected:1===n,onClick:this.setScaleToMobileFull},v.default.createElement("span",{className:"media-library__scale-toggle-label"},t("List")),v.default.createElement(C.default,{icon:"menu",size:18}))),v.default.createElement(E.default,{step:"1",min:"0",max:N-1,minContent:v.default.createElement(C.default,{icon:"image",size:12}),maxContent:v.default.createElement(C.default,{icon:"image",size:24}),value:this.getSliderPosition(),onChange:this.onScaleChange,className:"media-library__scale-range"}))}}]),t}(g.Component);D.propTypes={mediaScale:h.default.number,onChange:h.default.func,setMediaScalePreference:h.default.func,saveMediaScalePreference:h.default.func},D.defaultProps={onChange:function(){}},t.default=(0,y.connect)(function(e){return{scale:(0,I.getPreference)(e,"mediaScale")}},{setMediaScalePreference:(0,b.partial)(P.setPreference,"mediaScale"),saveMediaScalePreference:(0,b.partial)(P.savePreference,"mediaScale")})((0,_.localize)(D)),e.exports=t.default},"./client/my-sites/media-library/upload-url.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./node_modules/i18n-calypso/index.js"),E=n("./client/lib/analytics/index.js"),w=o(E),S=n("./client/components/forms/form-text-input/index.jsx"),k=o(S),T=n("./client/lib/media/actions.js"),P=o(T),I=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={value:"",isError:!1},o.upload=function(e){e.preventDefault();var t=!e.target.checkValidity();o.setState({isError:t}),!t&&o.props.site&&(P.default.clearValidationErrors(o.props.site.ID),P.default.add(o.props.site.ID,o.state.value),o.setState({value:"",isError:!1}),o.props.onAddMedia(),o.props.onClose(),w.default.mc.bumpStat("editor_upload_via","url"))},o.onChange=function(e){o.setState({isError:!1,value:e.target.value})},o.onKeyDown=function(e){return"Escape"===e.key?o.props.onClose(e):void("Enter"===e.key&&o.upload(e))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,_.default)("media-library__upload-url",this.props.className),t=this.props,n=t.onClose,o=t.translate;return v.default.createElement("form",{className:e,onSubmit:this.upload,noValidate:!0},v.default.createElement(k.default,{type:"url",value:this.state.value,placeholder:"https://",onChange:this.onChange,onKeyDown:this.onKeyDown,isError:this.state.isError,autoFocus:!0,required:!0}),v.default.createElement("div",{className:"media-library__upload-url-button-group"},v.default.createElement("button",{type:"submit",className:"button is-primary"},o("Upload",{context:"verb"})),v.default.createElement("button",{type:"button",className:"media-library__upload-url-cancel",onClick:n},v.default.createElement("span",{className:"screen-reader-text"},o("Cancel")),v.default.createElement(C.default,{icon:"cross"}))))}}]),t}(g.Component);I.propTypes={className:h.default.string,site:h.default.object,onAddMedia:h.default.func,onClose:h.default.func},I.defaultProps={onAddMedia:y.noop,onClose:y.noop},t.default=(0,j.localize)(I),e.exports=t.default},"./client/my-sites/no-results/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"no-results"},this.props.image?h.default.createElement("img",{className:"no-results__img",src:this.props.image}):null,h.default.createElement("span",null,this.props.text))}}]),t}(h.default.Component);g.defaultProps={text:"No results",image:!1},t.default=g,e.exports=t.default},"./client/my-sites/post-selector/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/my-sites/post-selector/selector.jsx"),_=o(b),x=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={search:""},o.onSearch=function(e){e!==o.state.search&&o.setState({search:e})},o.getQuery=function(){var e=o.props,t=e.type,n=e.status,r=e.excludeTree,i=e.orderBy,s=e.order,a=e.excludePrivateTypes,l=o.state.search;return(0,y.reduce)({type:t,status:n,excludeTree:r,orderBy:i,order:s,excludePrivateTypes:a,search:l},function(e,t,n){return null===t||void 0===t?e:("orderBy"===n&&""!==l&&(t="date"),"order"===n&&""!==l&&(t="DESC"),e[(0,y.snakeCase)(n)]=t,e)},{})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.multiple,o=e.onChange,r=e.emptyMessage,i=e.createLink,s=e.selected,a=e.showTypeLabels,l=e.suppressFirstPageLoad;return v.default.createElement(_.default,{siteId:t,query:this.getQuery(),onSearch:this.onSearch,multiple:n,onChange:o,emptyMessage:r,createLink:i,selected:s,showTypeLabels:a,suppressFirstPageLoad:l})}}]),t}(v.default.PureComponent);x.displayName="PostSelector",x.propTypes={type:h.default.string,excludePrivateTypes:h.default.bool,siteId:h.default.number.isRequired,status:h.default.string,multiple:h.default.bool,onChange:h.default.func,selected:h.default.number,excludeTree:h.default.number,emptyMessage:h.default.string,createLink:h.default.string,orderBy:h.default.oneOf(["title","date","modified","comment_count","ID"]),order:h.default.oneOf(["ASC","DESC"]),showTypeLabels:h.default.bool,suppressFirstPageLoad:h.default.bool},x.defaultProps={type:"post",status:"publish,private",multiple:!1,orderBy:"title",order:"ASC",suppressFirstPageLoad:!1},t.default=x,e.exports=t.default},"./client/my-sites/post-selector/no-results.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=function(e){
function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=void 0,t=void 0;return t=this.props.translate("No results. Please try a different search."),this.props.createLink&&(e=this.props.translate("You may want to {{a}}create a new page{{/a}}.",{context:"Menus: item search/listing results",comment:"This is used when no posts or pages match the given search.",components:{a:y.default.createElement("a",{className:"create-link",href:this.props.createLink,target:"_blank",rel:"noopener noreferrer"})}})),y.default.createElement("span",{className:"is-empty-content"},t," ",e)}}]),t}(y.default.Component);b.displayName="PostSelectorNoResults",b.propTypes={createLink:h.default.string},t.default=(0,g.localize)(b),e.exports=t.default},"./client/my-sites/post-selector/search.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/gridicons/build/index.js"),_=o(b),x=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement("div",{className:"post-selector__search"},y.default.createElement(_.default,{icon:"search",size:18}),y.default.createElement("input",{type:"search",placeholder:this.props.translate("Search…",{textOnly:!0}),value:this.props.searchTerm,onChange:this.props.onSearch}))}}]),t}(y.default.Component);x.displayName="PostSelectorSearch",x.propTypes={searchTerm:h.default.string,onSearch:h.default.func.isRequired},t.default=(0,g.localize)(x),e.exports=t.default},"./client/my-sites/post-selector/selector.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/json/stringify.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/extends.js"),u=o(l),d=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/createClass.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=o(g),y=n("./node_modules/babel-runtime/helpers/inherits.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/react/react.js"),E=o(j),w=n("./node_modules/react-redux/es/index.js"),S=n("./node_modules/classnames/index.js"),k=o(S),T=n("./node_modules/dom-helpers/util/scrollbarSize.js"),P=o(T),I=n("./node_modules/react-virtualized/dist/commonjs/List/index.js"),R=o(I),N=n("./node_modules/react-virtualized/dist/commonjs/AutoSizer/index.js"),M=o(N),D=n("./node_modules/lodash/lodash.js"),O=n("./client/my-sites/post-selector/no-results.jsx"),A=o(O),L=n("./client/lib/analytics/index.js"),B=o(L),F=n("./client/my-sites/post-selector/search.jsx"),z=o(F),U=n("./client/lib/formatting/index.js"),H=n("./client/state/posts/selectors.js"),W=n("./client/state/post-types/selectors.js"),V=n("./client/state/sites/selectors.js"),q=n("./client/components/data/query-post-types/index.jsx"),G=o(q),K=n("./client/components/data/query-posts/index.jsx"),$=o(K),Y=800,J=25,Z=20,X=10,Q=function(e){function t(){var e,n,o,r;(0,p.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(s))),ee.call(o),r=n,(0,v.default)(o,r)}return(0,b.default)(t,e),(0,h.default)(t,[{key:"componentWillMount",value:function(){var e=this;this.itemHeights={},this.hasPerformedSearch=!1,this.postIds=(0,D.map)(this.props.posts,"ID"),this.getPostChildren=(0,D.memoize)(this.getPostChildren),this.queueRecomputeRowHeights=(0,D.debounce)(this.recomputeRowHeights),this.debouncedSearch=(0,D.debounce)(function(){e.props.onSearch(e.state.searchTerm)},Y)}},{key:"componentWillReceiveProps",value:function(e){(0,D.isEqual)(this.props.queryWithVersion,e.queryWithVersion)&&this.props.siteId===e.siteId||this.setState({requestedPages:[1]}),this.props.posts!==e.posts&&(this.getPostChildren.cache.clear(),this.postIds=(0,D.map)(e.posts,"ID"))}},{key:"componentDidUpdate",value:function(e){var t=e.selected!==this.props.selected||e.loading&&!this.props.loading;t&&this.list.forceUpdateGrid(),this.props.posts!==e.posts&&this.recomputeRowHeights()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.siteId,r=t.queryWithVersion,i=t.suppressFirstPageLoad,s=t.posts,l=t.postTypes,d=this.state,c=d.requestedPages,f=d.searchTerm,p=this.isCompact(),m=this.isTypeLabelsVisible(),h=f.length>0||!p,g=(0,k.default)("post-selector",n,{"is-compact":p,"is-type-labels-visible":m}),v=(0,D.filter)(c,function(e){return 1!==e||!i||!s});return E.default.createElement("div",{className:g},v.map(function(e){return E.default.createElement($.default,{key:"page-"+e,siteId:o,query:(0,u.default)({},r,{page:e})})}),m&&o&&!l&&E.default.createElement(G.default,{siteId:o}),h&&E.default.createElement(z.default,{searchTerm:f,onSearch:this.onSearch}),E.default.createElement("div",{className:"post-selector__results"},E.default.createElement(M.default,{key:(0,a.default)(r),disableHeight:p},function(t){var n=t.height,o=t.width;return E.default.createElement(R.default,{ref:e.setListRef,width:o,height:p?e.getCompactContainerHeight():n,onRowsRendered:e.setRequestedPages,noRowsRenderer:e.renderEmptyContent,rowCount:e.getRowCount(),estimatedRowSize:J,rowHeight:e.getRowHeight,rowRenderer:e.cellRendererWrapper})})))}}]),t}(E.default.Component);Q.displayName="PostSelectorPosts",Q.propTypes={siteId:x.default.number.isRequired,query:x.default.object,queryWithVersion:x.default.object,posts:x.default.array,lastPage:x.default.number,loading:x.default.bool,emptyMessage:x.default.string,createLink:x.default.string,selected:x.default.number,onSearch:x.default.func,onChange:x.default.func,multiple:x.default.bool,showTypeLabels:x.default.bool},Q.defaultProps={analyticsPrefix:"Post Selector",searchThreshold:8,loading:!0,emptyMessage:"",posts:[],onSearch:function(){},onChange:function(){}};var ee=function(){var e=this;this.state={searchTerm:"",requestedPages:[1]},this.recomputeRowHeights=function(){e.list&&(e.list.recomputeRowHeights(),e.isCompact()&&e.forceUpdate())},this.setListRef=function(t){e.list=t},this.setItemRef=function(t,n){if(n&&t){var o=e.itemHeights[t.global_ID]||J,r=n.clientHeight;e.itemHeights[t.global_ID]=r,o!==r&&e.queueRecomputeRowHeights()}},this.hasNoSearchResults=function(){return!e.props.loading&&e.props.posts&&!e.props.posts.length&&e.state.searchTerm},this.hasNoPosts=function(){return!e.props.loading&&e.props.posts&&!e.props.posts.length},this.getItem=function(t){if(e.props.posts)return e.props.posts[t]},this.isCompact=function(){return!(!e.props.posts||e.state.searchTerm||e.hasNoPosts())&&e.props.posts.length<e.props.searchThreshold},this.isTypeLabelsVisible=function(){return"boolean"==typeof e.props.showTypeLabels?e.props.showTypeLabels:"any"===e.props.queryWithVersion.type},this.isLastPage=function(){var t=e.props,n=t.lastPage,o=t.loading,r=e.state.requestedPages;return(0,D.includes)(r,n)&&!o},this.getPostChildren=function(t){var n=e.props.posts;return(0,D.filter)(n,function(e){var n=e.parent;return n&&n.ID===t})},this.getItemHeight=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?t.parent&&!n&&(0,D.includes)(e.postIds,t.parent.ID)?0:e.itemHeights[t.global_ID]?e.itemHeights[t.global_ID]:(0,D.reduce)(e.getPostChildren(t.ID),function(t,n){return t+e.getItemHeight(n,!0)},J):J},this.getRowHeight=function(t){var n=t.index;return e.getItemHeight(e.getItem(n))},this.getCompactContainerHeight=function(){return(0,D.range)(0,e.getRowCount()).reduce(function(t,n){return t+e.getRowHeight({index:n})},0)},this.getPageForIndex=function(t){var n=e.props,o=n.queryWithVersion,r=n.lastPage,i=o.number||Z,s=Math.ceil(t/i);return Math.max(Math.min(s,r||1/0),1)},this.getRowCount=function(){var t=0;return e.props.posts&&(t+=e.props.posts.length),e.isLastPage()||(t+=1),t},this.setRequestedPages=function(t){var n=t.startIndex,o=t.stopIndex,r=e.state.requestedPages,i=(0,D.difference)((0,D.range)(e.getPageForIndex(n-X),e.getPageForIndex(o+X)+1),r);i.length&&e.setState({requestedPages:r.concat(i)})},this.onSearch=function(t){var n=t.target.value;e.state.searchTerm&&!n&&e.props.onSearch(""),n!==e.state.searchTerm&&(e.hasPerformedSearch||(e.hasPerformedSearch=!0,B.default.ga.recordEvent(e.props.analyticsPrefix,"Performed Post Search")),e.setState({searchTerm:n}),e.debouncedSearch())},this.renderItem=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.parent||n||!(0,D.includes)(e.postIds,t.parent.ID)){var o=function(){for(var n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=e.props).onChange.apply(n,[t].concat(r))},r=function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return e.setItemRef.apply(e,[t].concat(o))},i=e.getPostChildren(t.ID);return E.default.createElement("div",{key:t.global_ID,ref:r,className:"post-selector__list-item"},E.default.createElement("label",null,E.default.createElement("input",{name:"posts",type:e.props.multiple?"checkbox":"radio",value:t.ID,onChange:o,checked:e.props.selected===t.ID,className:"post-selector__input"}),E.default.createElement("span",{className:"post-selector__label"},(0,U.decodeEntities)(t.title||e.props.translate("Untitled")),e.isTypeLabelsVisible()&&E.default.createElement("span",{className:"post-selector__label-type",style:{paddingRight:e.isCompact()?0:(0,P.default)()}},(0,U.decodeEntities)((0,D.get)(e.props.postTypes,[t.type,"labels","singular_name"],""))))),i.length>0&&E.default.createElement("div",{className:"post-selector__nested-list"},i.map(function(t){return e.renderItem(t,!0)})))}},this.renderEmptyContent=function(){var t=void 0;if(e.hasNoSearchResults()?t=E.default.createElement(A.default,{createLink:e.props.createLink,noResultsMessage:e.props.noResultsMessage}):e.hasNoPosts()&&(t=e.props.emptyMessage),t)return E.default.createElement("div",{key:"no-results",className:"post-selector__list-item is-empty"},t)},this.renderRow=function(t){var n=t.index,o=e.getItem(n);return o?e.renderItem(o):E.default.createElement("div",{key:"placeholder",className:"post-selector__list-item is-placeholder"},E.default.createElement("label",null,E.default.createElement("input",{type:e.props.multiple?"checkbox":"radio",disabled:!0,className:"post-selector__input"}),E.default.createElement("span",{className:"post-selector__label"},e.props.translate("Loading…"))))},this.cellRendererWrapper=function(t){var n=t.key,o=t.style,r=(0,i.default)(t,["key","style"]);return E.default.createElement("div",{key:n,style:o},e.renderRow(r))}};t.default=(0,w.connect)(function(e,t){var n=t.siteId,o=t.query,r=!(0,V.isJetpackSite)(e,n)||(0,V.isJetpackMinimumVersion)(e,n,"5.0")?"1.2":void 0,i=(0,u.default)({},o,{apiVersion:r});return{posts:(0,H.getSitePostsForQueryIgnoringPage)(e,n,i),found:(0,H.getSitePostsFoundForQuery)(e,n,i),lastPage:(0,H.getSitePostsLastPageForQuery)(e,n,i),loading:(0,H.isRequestingSitePostsForQueryIgnoringPage)(e,n,i),postTypes:(0,W.getPostTypes)(e,n),queryWithVersion:i}})((0,C.localize)(Q)),e.exports=t.default},"./client/my-sites/sharing/connections/inline-connection-action.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNamedConnectedService=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./client/my-sites/sharing/connections/service-action.jsx"),_=o(b),x=n("./client/state/sharing/keyring/actions.js"),C=n("./client/state/sharing/keyring/selectors.js"),j=n("./client/state/analytics/actions.js"),E=n("./client/lib/sharing/index.js"),w=o(E),S=t.getNamedConnectedService=function(e,t){return(0,C.getKeyringConnections)(e).filter(function(e){return e.service===t})},k="unknown",T="not-connected",P="reconnect",I="connected",R=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.handleAction=n.onAction.bind(n),n.state={isConnecting:!1,isRefreshing:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getConnectionStatus",value:function(e,t){return t?k:e?"broken"===e.status?P:I:T}},{key:"onAction",value:function(){var e=this.props.service,t=this.getConnectionStatus(this.props.connectedService,this.state.isFetching);P===t?this.refresh(e):this.addConnection(e)}},{key:"refresh",value:function(e){this.setState({isRefreshing:!0}),this.requestAccess(e.refresh_URL),this.trackEvent(e.ID,"Clicked Connect Button")}},{key:"addConnection",value:function(e){this.setState({isConnecting:!0}),this.requestAccess(e.connect_URL),this.trackEvent(e.ID,"Clicked Reconnect Button")}},{key:"requestAccess",value:function(e){var t=this;(0,w.default)(e,function(){t.props.requestKeyringConnections()})}},{key:"trackEvent",value:function(e,t){this.props.recordGoogleEvent("Sharing",t,e)}},{key:"componentWillReceiveProps",value:function(e){e.isFetching===!0&&this.setState({isConnecting:!1,isRefreshing:!1})}},{key:"render",value:function(){var e=this.getConnectionStatus(this.props.connectedService,this.props.isFetching),t=this.state,n=t.isConnecting,o=t.isRefreshing,r=this.props.service;return h.default.createElement(_.default,{status:e,service:r,onAction:this.handleAction,isConnecting:n,isRefreshing:o,isDisconnecting:!1})}}]),t}(m.Component);R.propTypes={service:y.default.object.isRequired,isFetching:y.default.bool.isRequired,connectedService:y.default.object},t.default=(0,g.connect)(function(e,t){var n=S(e,t.serviceName);return{isFetching:(0,C.isKeyringConnectionsFetching)(e),connectedService:n.length>0?n[0]:null}},{requestKeyringConnections:x.requestKeyringConnections,recordGoogleEvent:j.recordGoogleEvent})(R)},"./client/my-sites/sharing/connections/inline-connection.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./client/state/sharing/services/selectors.js"),_=n("./client/components/data/query-keyring-services/index.jsx"),x=o(_),C=n("./client/components/data/query-publicize-connections/index.jsx"),j=o(C),E=n("./client/my-sites/sharing/connections/inline-connection-action.jsx"),w=o(E),S=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.service;return h.default.createElement("div",null,h.default.createElement(j.default,{selectedSite:!0}),h.default.createElement(x.default,null),e&&h.default.createElement(w.default,{service:e}))}}]),t}(m.Component);S.propTypes={serviceName:y.default.string.isRequired},t.default=(0,g.connect)(function(e,t){return{service:(0,b.getKeyringServiceByName)(e,t.serviceName)}})(S),e.exports=t.default},"./client/my-sites/sharing/connections/service-action.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/prop-types/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/lodash/lodash.js"),d=n("./node_modules/i18n-calypso/index.js"),c=n("./client/components/button/index.jsx"),f=o(c),p=n("./client/state/sharing/publicize/selectors.js"),m=function(e){var t=e.isConnecting,n=e.isDisconnecting,o=e.isRefreshing,r=e.onAction,i=e.removableConnections,s=e.status,l=e.translate,u=!1,d=!1,c=void 0,p="unknown"===s||n||o||t,m=function(e){e.stopPropagation(),r()};return"unknown"===s?c=l("Loading…",{context:"Sharing: Publicize status pending button label"}):n?c=l("Disconnecting…",{context:"Sharing: Publicize disconnect pending button label"}):o?(c=l("Reconnecting…",{context:"Sharing: Publicize reconnect pending button label"}),d=!0):t?c=l("Connecting…",{context:"Sharing: Publicize connect pending button label"}):"connected"===s?c=i.length>1?l("Disconnect All",{context:"Sharing: Publicize disconnect button label"}):l("Disconnect",{context:"Sharing: Publicize disconnect button label"}):"reconnect"===s?(c=l("Reconnect",{context:"Sharing: Publicize reconnect pending button label"}),d=!0):(c=l("Connect",{context:"Sharing: Publicize connect pending button label"}),u=!0),a.default.createElement(f.default,{primary:u,scary:d,compact:!0,onClick:m,disabled:p},c)};m.propTypes={isConnecting:i.default.bool,isDisconnecting:i.default.bool,isRefreshing:i.default.bool,onAction:i.default.func,removableConnections:i.default.arrayOf(i.default.object),service:i.default.object.isRequired,status:i.default.string,translate:i.default.func},m.defaultProps={isConnecting:!1,isDisconnecting:!1,isRefreshing:!1,onAction:function(){},removableConnections:[],status:"unknown",translate:u.identity},t.default=(0,l.connect)(function(e,t){var n=t.service;return{removableConnections:(0,p.getRemovableConnections)(e,n.ID)}})((0,d.localize)(m)),e.exports=t.default},"./client/my-sites/upgrade-nudge/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/typeof.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./node_modules/lodash/lodash.js"),S=n("./node_modules/i18n-calypso/index.js"),k=n("./node_modules/gridicons/build/index.js"),T=o(k),P=n("./client/components/button/index.jsx"),I=o(P),R=n("./client/components/card/index.jsx"),N=o(R),M=n("./client/state/sites/plans/selectors.js"),D=n("./client/lib/plans/index.js"),O=n("./client/lib/products-values/index.js"),A=n("./client/lib/analytics/track-component-view/index.jsx"),L=o(A),B=n("./client/state/analytics/actions.js"),F=n("./client/state/ui/selectors.js"),z=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.handleClick=function(){var e=o.props,t=e.event,n=e.feature,r=e.onClick,i=e.recordTracksEvent;(t||n)&&i("calypso_upgrade_nudge_cta_click",{cta_name:t,cta_feature:n,cta_size:"regular"}),r()},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"shouldDisplay",value:function e(){var t=this.props,n=t.feature,o=t.jetpack,r=t.planHasFeature,e=t.shouldDisplay,i=t.site;return e?e():!(!i||"object"!==("undefined"==typeof i?"undefined":(0,a.default)(i))||"boolean"!=typeof i.jetpack)&&((!n||!r)&&(!(!n&&!(0,O.isFreePlan)(i.plan))&&(("no-adverts"!==n||!i.options.wordads)&&!(!o&&i.jetpack||o&&!i.jetpack))))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.compact,o=e.event,r=e.feature,i=e.icon,s=e.message,a=e.site,l=e.title,u=e.translate,d=(0,E.default)(t,"upgrade-nudge"),c=this.props.href;return this.shouldDisplay()?(!c&&a&&(c=r?"/plans/"+a.slug+"?feature="+r:"/plans/"+a.slug),n?b.default.createElement(I.default,{className:d,onClick:this.handleClick,href:c},b.default.createElement(T.default,{className:"upgrade-nudge__icon",icon:i}),b.default.createElement("div",{className:"upgrade-nudge__info"},b.default.createElement("span",{className:"upgrade-nudge__title"},l||u("Upgrade to Premium")),b.default.createElement("span",{className:"upgrade-nudge__message"},s))):b.default.createElement(N.default,{compact:!0,className:d,onClick:this.handleClick,href:c},b.default.createElement(T.default,{className:"upgrade-nudge__icon",icon:i,size:18}),b.default.createElement("div",{className:"upgrade-nudge__info"},b.default.createElement("span",{className:"upgrade-nudge__title"},l||u("Upgrade to Premium")),b.default.createElement("span",{className:"upgrade-nudge__message"},s)),(o||r)&&b.default.createElement(L.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:o,cta_feature:r,cta_size:"regular"}}))):null}}]),t}(b.default.Component);z.propTypes={onClick:x.default.func,className:x.default.string,message:x.default.string,icon:x.default.string,event:x.default.string,href:x.default.string,jetpack:x.default.bool,compact:x.default.bool,feature:x.default.oneOf([!1].concat((0,i.default)((0,D.getValidFeatureKeys)()))),shouldDisplay:x.default.func,site:x.default.object,translate:x.default.func},z.defaultProps={onClick:w.noop,message:"And get your own domain address.",icon:"star",event:null,jetpack:!1,feature:!1,compact:!1,shouldDisplay:null,site:null,translate:w.identity},t.default=(0,C.connect)(function(e,t){var n=(0,F.getSelectedSiteId)(e);return{site:(0,F.getSelectedSite)(e),planHasFeature:(0,M.hasFeature)(e,n,t.feature)}},{recordTracksEvent:B.recordTracksEvent})((0,S.localize)(z)),e.exports=t.default},"./client/post-editor/controller.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.params.post&&"new"!==e.params.post?parseInt(e.params.post,10):null}function i(e){return(0,S.startsWith)(e.path,"/post")?"post":(0,S.startsWith)(e.path,"/page")?"page":e.params.type}function s(e){p.default.unmountComponentAtNode(document.getElementById("secondary")),p.default.render(v.default.createElement(C.Provider,{store:e.store},v.default.createElement(F.default,{user:Y,userUtils:D.default})),document.getElementById("primary"))}function a(e){var t=e.store.getState(),n=(0,U.getSelectedSiteId)(t),o=(0,H.getEditorPostId)(t),r=(0,H.getEditorPath)(t,n,o,"post",e.query);return r!==e.pathname&&(e.querystring&&(r+="?"+e.querystring),x.default.redirect(r),!0)}function l(e){var t=e.text,n=e.url,o=e.title,r=e.image,i=e.embed,s=[];return r&&s.push(h.default.renderToStaticMarkup(v.default.createElement("p",null,v.default.createElement("a",{href:n},v.default.createElement("img",{src:r}))))),(0,w.isWebUri)(i)&&s.push(h.default.renderToStaticMarkup(v.default.createElement("p",null,i))),t&&s.push(h.default.renderToStaticMarkup(v.default.createElement("blockquote",null,t))),s.push(h.default.renderToStaticMarkup(v.default.createElement("p",null,b.default.translate("via {{anchor/}}",{components:{anchor:v.default.createElement("a",{href:n},o)}})))),s.join("\n\n")}function u(e,t,n){q.default.site(e).post(t).get({context:"edit"}).then(function(t){var o=(0,S.pick)(t,"canonical_image","content","excerpt","featured_image","format","post_thumbnail","terms","title","type");o.tags=(0,S.map)(t.tags,"name"),o.title=(0,L.decodeEntities)(o.title),o.featured_image=(0,$.getFeaturedImageId)(t);var r={terms:o.terms,title:o.title};T.default.startEditingNew(e,{content:t.content,title:t.title,type:t.type}),n.store.dispatch((0,W.editPost)(e,null,r)),T.default.edit(o);var i=["geo_latitude","geo_longitude"],s=(0,S.reduce)(t.metadata,function(e,t){var n=t.key,o=t.value;return e[n]=o,e},{});T.default.updateMetadata((0,S.pick)(s,i))}).catch(function(e){K.default.handleServerAction({type:"SET_POST_LOADING_ERROR",error:e})})}Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/babel-runtime/core-js/object/assign.js"),c=o(d),f=n("./node_modules/react-dom/index.js"),p=o(f),m=n("./node_modules/react-dom/server.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=o(y),_=n("./node_modules/page/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/querystring-es3/index.js"),E=o(j),w=n("./node_modules/valid-url/index.js"),S=n("./node_modules/lodash/lodash.js"),k=n("./client/lib/posts/actions.js"),T=o(k),P=n("./client/lib/route/index.js"),I=o(P),R=n("./client/lib/user/index.js"),N=o(R),M=n("./client/lib/user/utils.js"),D=o(M),O=n("./client/lib/analytics/index.js"),A=o(O),L=n("./client/lib/formatting/index.js"),B=n("./client/post-editor/post-editor.jsx"),F=o(B),z=n("./client/state/ui/editor/actions.js"),U=n("./client/state/ui/selectors.js"),H=n("./client/state/ui/editor/selectors.js"),W=n("./client/state/posts/actions.js"),V=n("./client/lib/wp/browser.js"),q=o(V),G=n("./client/dispatcher/index.js"),K=o(G),$=n("./client/lib/posts/utils.js"),Y=(0,N.default)();t.default={post:function(e){function t(t){var n=!!e.query.copy;if(e.store.dispatch((0,z.startEditingPost)(t,n?null:d,o)),!a(e)){var r=void 0;switch(o){case"post":r="Post";break;case"page":r="Page";break;default:r="Custom Post Type"}if(f)u(t,f,e),A.default.pageView.record("/"+o,r+" > New");else if(d)T.default.startEditingExisting(t,d),A.default.pageView.record("/"+o+"/:blogid/:postid",r+" > Edit");else{var i={type:o};if(e.query.url){var s=l(e.query);(0,c.default)(i,{postFormat:"quote",title:e.query.title,content:s})}T.default.startEditingNew(t,i),A.default.pageView.record("/"+o,r+" > New")}}}function n(){var n=(0,U.getSelectedSiteId)(e.store.getState());return!!n&&(p&&p(),t(n),!0)}var o=i(e),d=r(e),f=e.query.copy,p=void 0;n()||(p=e.store.subscribe(n)),s(e)},exitPost:function(e,t){var n=r(e),o=(0,U.getSelectedSiteId)(e.store.getState());o&&e.store.dispatch((0,z.stopEditingPost)(o,n)),t()},pressThis:function(e,t){if(e.getSiteSelectionHeaderText=function(){return b.default.translate("Select a site to start writing")},!e.query.url)return t();var n=Y.get();if(!n.primarySiteSlug)return t();var o=I.default.addSiteFragment(e.pathname,n.primarySiteSlug),r=E.default.stringify(e.query),i=[o,r].join("?");return x.default.redirect(i),!1}},e.exports=t.default},"./client/post-editor/edit-post-status/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditPostStatus=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./client/config/index.js"),E=n("./client/components/button/index.jsx"),w=o(E),S=n("./client/components/forms/form-toggle/compact.jsx"),k=o(S),T=n("./client/post-editor/editor-revisions/legacy-link.jsx"),P=o(T),I=n("./client/lib/posts/utils.js"),R=o(I),N=n("./client/components/info-popover/index.jsx"),M=o(N),D=n("./client/lib/site/utils.js"),O=o(D),A=n("./client/lib/posts/stats.js"),L=n("./client/state/posts/actions.js"),B=n("./client/state/ui/selectors.js"),F=n("./client/state/ui/editor/selectors.js"),z=n("./client/state/posts/selectors.js"),U=n("./client/post-editor/editor-publish-date/index.jsx"),H=o(U),W=n("./client/post-editor/editor-visibility/index.jsx"),V=o(W),q=t.EditPostStatus=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.toggleStickyStatus=function(){var e=void 0,t=void 0;n.props.post.sticky?(e="advanced_sticky_disabled",t="Off"):(e="advanced_sticky_enabled",t="On"),(0,A.recordStat)(e),(0,A.recordEvent)("Changed Sticky Setting",t),n.props.editPost(n.props.siteId,n.props.postId,{sticky:!n.props.post.sticky})},n.togglePendingStatus=function(){var e="pending"===n.props.post.status;(0,A.recordStat)("status_changed"),(0,A.recordEvent)("Changed Pending Status",e?"Marked Draft":"Marked Pending"),n.props.editPost(n.props.siteId,n.props.postId,{status:e?"draft":"pending"})},n.revertToDraft=function(){n.props.onSave("draft")},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=void 0,t=void 0,n=void 0,o=void 0,r=void 0,i=void 0,s=this.props,a=s.translate,l=s.isPostPrivate;this.props.post&&(i="password"===R.default.getVisibility(this.props.post),e=this.props.post.sticky,n=R.default.isPending(this.props.post),t=R.default.isPublished(this.props.savedPost),r=this.props.savedPost&&"future"===this.props.savedPost.status,o=O.default.userCan("publish_posts",this.props.site));var u=this.props.site&&this.props.site.options&&this.props.site.options.admin_url;return h.default.createElement("div",{className:"edit-post-status"},this.renderPostScheduling(),this.renderPostVisibility(),"post"===this.props.type&&!l&&!i&&h.default.createElement("label",{className:"edit-post-status__sticky"},h.default.createElement("span",{className:"edit-post-status__label-text"},a("Stick to the front page"),h.default.createElement(M.default,{position:"top right",gaEventCategory:"Editor",popoverName:"Sticky Post"},a("Sticky posts will appear at the top of the posts listing."))),h.default.createElement(k.default,{checked:e,onChange:this.toggleStickyStatus,"aria-label":a("Stick post to the front page")})),!t&&!r&&o&&h.default.createElement("label",{className:"edit-post-status__pending-review"},h.default.createElement("span",{className:"edit-post-status__label-text"},a("Pending review"),h.default.createElement(M.default,{position:"top right"},a("Flag this post to be reviewed for approval."))),h.default.createElement(k.default,{checked:n,onChange:this.togglePendingStatus,"aria-label":a("Request review for post")})),(t||r||n&&!o)&&h.default.createElement(w.default,{className:"edit-post-status__revert-to-draft",onClick:this.revertToDraft,compact:!0},h.default.createElement(C.default,{icon:"undo",size:18})," ",a("Revert to draft")),!(0,j.isEnabled)("post-editor/revisions")&&h.default.createElement(P.default,{adminUrl:u,revisionsFromPostObj:(0,_.get)(this.props,"post.revisions")}))}},{key:"renderPostScheduling",value:function(){return h.default.createElement(H.default,{post:this.props.post,setPostDate:this.props.setPostDate
})}},{key:"renderPostVisibility",value:function(){if(this.props.post&&"open"!==this.props.confirmationSidebarStatus){var e=this.props.post||{},t=e.password,n=e.type,o=this.props.site&&this.props.site.is_private,r=this.props.savedPost?this.props.savedPost.status:null,i=this.props.savedPost?this.props.savedPost.password:null,s={status:this.props.status,onPrivatePublish:this.props.onPrivatePublish,isPrivateSite:o,type:n,password:t,savedStatus:r,savedPassword:i,context:"post-settings"};return h.default.createElement(V.default,s)}}}]),t}(m.Component);q.propTypes={moment:v.default.func,setPostDate:v.default.func,onSave:v.default.func,post:v.default.object,savedPost:v.default.object,site:v.default.object,translate:v.default.func,type:v.default.string,postDate:v.default.string,onPrivatePublish:v.default.func,status:v.default.string,isPostPrivate:v.default.bool,confirmationSidebarStatus:v.default.string,setNestedSidebar:v.default.func},t.default=(0,b.connect)(function(e){var t=(0,B.getSelectedSiteId)(e),n=(0,F.getEditorPostId)(e),o=(0,z.getEditedPost)(e,t,n);return{siteId:t,postId:n,post:o}},{editPost:L.editPost})((0,y.localize)(q))},"./client/post-editor/editor-action-bar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/gridicons/build/index.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./client/components/async-load/index.jsx"),C=o(x),j=n("./client/post-editor/editor-sticky/index.jsx"),E=o(j),w=n("./client/lib/posts/utils.js"),S=o(w),k=n("./client/components/tooltip/index.jsx"),T=o(k),P=n("./client/components/button/index.jsx"),I=o(P),R=n("./client/post-editor/editor-action-bar/view-label.jsx"),N=o(R),M=n("./client/post-editor/editor-status-label/index.jsx"),D=o(M),O=n("./client/state/ui/selectors.js"),A=n("./client/state/ui/editor/selectors.js"),L=n("./client/state/posts/selectors.js"),B=function(e){n.e("async-load-post-editor-editor-author").then(function(t){e(n("./client/post-editor/editor-author/index.jsx").__esModule?n("./client/post-editor/editor-author/index.jsx").default:n("./client/post-editor/editor-author/index.jsx"))}.bind(null,n)).catch(n.oe)},F=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={viewLinkTooltip:!1},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props.site&&!this.props.site.single_user_site,n="password"===S.default.getVisibility(this.props.post),o=this.props,r=o.isPostPrivate,i=o.postAuthor;return h.default.createElement("div",{className:"editor-action-bar"},h.default.createElement("div",{className:"editor-action-bar__cell is-left"},!this.props.hasEditorNestedSidebar&&h.default.createElement(D.default,{post:this.props.savedPost,advancedStatus:!0})),h.default.createElement("div",{className:"editor-action-bar__cell is-center"},t&&h.default.createElement(C.default,{require:B,post:this.props.post,isNew:this.props.isNew,postAuthor:i})),h.default.createElement("div",{className:"editor-action-bar__cell is-right"},this.props.post&&"post"===this.props.type&&!n&&!r&&h.default.createElement(E.default,null),S.default.isPublished(this.props.savedPost)&&h.default.createElement(I.default,{href:this.props.savedPost.URL,target:"_blank",rel:"noopener noreferrer",onMouseEnter:function(){return e.setState({viewLinkTooltip:!0})},onMouseLeave:function(){return e.setState({viewLinkTooltip:!1})},ref:"viewLink",borderless:!0},h.default.createElement(b.default,{icon:"external"}),h.default.createElement(T.default,{className:"editor-action-bar__view-post-tooltip",context:this.refs&&this.refs.viewLink,isVisible:this.state.viewLinkTooltip,position:"bottom left"},h.default.createElement(N.default,null)))))}}]),t}(m.Component);F.propTypes={isNew:v.default.bool,onPrivatePublish:v.default.func,post:v.default.object,savedPost:v.default.object,site:v.default.object,type:v.default.string,isPostPrivate:v.default.bool,postAuthor:v.default.object,hasEditorNestedSidebar:v.default.bool},t.default=(0,_.connect)(function(e){var t=(0,O.getSelectedSiteId)(e),n=(0,A.getEditorPostId)(e),o=(0,L.getEditedPost)(e,t,n),r=(0,L.getEditedPostValue)(e,t,n,"type");return{siteId:t,postId:n,post:o,type:r}})(F),e.exports=t.default},"./client/post-editor/editor-action-bar/view-label.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.typeSlug,r=e.type,i=void 0;return i="page"===o?t("View page"):"post"===o?t("View post"):r?(0,p.decodeEntities)(r.labels.view_item):t("View",{context:"verb"}),d.default.createElement("span",{className:"editor-action-bar__view-label"},n&&"page"!==o&&"post"!==o&&d.default.createElement(b.default,{siteId:n}),i)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=o(i),a=n("./node_modules/prop-types/index.js"),l=o(a),u=n("./node_modules/react/react.js"),d=o(u),c=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/i18n-calypso/index.js"),p=n("./client/lib/formatting/index.js"),m=n("./client/state/posts/selectors.js"),h=n("./client/state/ui/selectors.js"),g=n("./client/state/ui/editor/selectors.js"),v=n("./client/state/post-types/selectors.js"),y=n("./client/components/data/query-post-types/index.jsx"),b=o(y);r.propTypes={translate:l.default.func,siteId:l.default.number,typeSlug:l.default.string,type:l.default.object},t.default=(0,c.connect)(function(e){var t=(0,h.getSelectedSiteId)(e),n={siteId:t},o=(0,m.getEditedPost)(e,t,(0,g.getEditorPostId)(e));return o?(0,s.default)(n,{typeSlug:o.type,type:(0,v.getPostType)(e,t,o.type)}):n})((0,f.localize)(r)),e.exports=t.default},"./client/post-editor/editor-categories-tags/accordion.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCategoriesTagsAccordion=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/lodash/lodash.js"),j=n("./client/components/accordion/index.jsx"),E=o(j),w=n("./client/components/accordion/section.jsx"),S=o(w),k=n("./client/post-editor/editor-drawer/label.jsx"),T=o(k),P=n("./client/post-editor/editor-term-selector/index.jsx"),I=o(P),R=n("./client/post-editor/term-token-field/index.jsx"),N=o(R),M=n("./client/components/notice/index.jsx"),D=o(M),O=n("./client/components/notice/notice-action.jsx"),A=o(O),L=n("./client/lib/route/index.js"),B=n("./client/state/ui/selectors.js"),F=n("./client/state/ui/editor/selectors.js"),z=n("./client/state/posts/selectors.js"),U=n("./client/state/sites/selectors.js"),H=n("./client/state/terms/selectors.js"),W=t.EditorCategoriesTagsAccordion=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"renderJetpackNotice",value:function(){var e=this.props,t=e.translate,n=e.siteSlug;return v.default.createElement(D.default,{status:"is-warning",showDismiss:!1,text:t("You must update Jetpack to use this feature."),className:"editor-categories-tags__upgrade-notice"},v.default.createElement(A.default,{href:(0,L.addSiteFragment)("/plugins/jetpack",n)},t("Update Now")))}},{key:"renderCategories",value:function(){var e=this.props,t=e.translate,n=e.postType,o=e.isTermsSupported;if("page"!==n)return v.default.createElement(S.default,null,v.default.createElement(T.default,{helpText:t("Use categories to group your posts by topic."),labelText:t("Categories")}),o?v.default.createElement(I.default,{compact:!0,taxonomyName:"category"}):this.renderJetpackNotice())}},{key:"renderTags",value:function(){var e=this.props,t=e.isTermsSupported,n=e.postType,o=e.translate,r=o("page"===n?"Use tags to associate more specific keywords with your pages.":"Use tags to associate more specific keywords with your posts.");return v.default.createElement(S.default,null,v.default.createElement(T.default,{helpText:r,labelText:o("Tags")},t?v.default.createElement(N.default,{taxonomyName:"post_tag"}):this.renderJetpackNotice()))}},{key:"getCategoriesSubtitle",value:function(){var e=this.props,t=e.translate,n=e.postTerms,o=e.defaultCategory,r=(0,C.toArray)((0,C.get)(n,"category"));if(r.length>1)return t("%d category","%d categories",{args:[r.length],count:r.length});var i=void 0;return i=r.length>0?r[0]:o,i?(0,C.unescape)(i.name):void 0}},{key:"getTagsSubtitle",value:function(){var e=this.props,t=e.translate,n=e.postTerms,o=(0,C.toArray)((0,C.get)(n,"post_tag")),r=o.length;switch(r){case 0:return null;case 1:case 2:return o.map(function(e){return"#"+(0,C.unescape)(e.name||e)}).join(", ");default:return t("%d tag","%d tags",{args:[r],count:r})}}},{key:"getSubtitle",value:function(){var e=[],t=this.props,n=t.postType,o=t.siteId;if(!o)return null;if("post"===n){var r=this.getCategoriesSubtitle();r&&e.push(r)}var i=this.getTagsSubtitle();return i&&e.push(i),e.join(", ")}},{key:"getTitle",value:function(){var e=this.props,t=e.translate,n=e.postType,o=void 0;return o=t("page"===n?"Tags":"Categories & Tags")}},{key:"render",value:function(){var e=(0,_.default)("editor-drawer__accordion","editor-categories-tags__accordion",this.props.className);return v.default.createElement(E.default,{title:this.getTitle(),subtitle:this.getSubtitle(),className:e,e2eTitle:"categories-tags"},this.renderCategories(),this.renderTags())}}]),t}(g.Component);W.propTypes={translate:h.default.func,postTerms:h.default.object,postType:h.default.string,defaultCategory:h.default.object,isTermsSupported:h.default.bool,siteSlug:h.default.string},t.default=(0,y.connect)(function(e){var t=(0,B.getSelectedSiteId)(e),n=(0,F.getEditorPostId)(e),o=(0,U.getSiteOption)(e,t,"default_category"),r=!1!==(0,U.isJetpackMinimumVersion)(e,t,"4.1.0");return{defaultCategory:(0,H.getTerm)(e,t,"category",o),postTerms:(0,z.getEditedPostValue)(e,t,n,"terms"),postType:(0,z.getEditedPostValue)(e,t,n,"type"),siteSlug:(0,U.getSiteSlug)(e,t),siteId:t,postId:n,isTermsSupported:r}})((0,x.localize)(W))},"./client/post-editor/editor-confirmation-sidebar/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/state/ui/selectors.js"),C=n("./client/state/post-types/selectors.js"),j=n("./client/lib/posts/utils.js"),E=o(j),w=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"renderPublishHeader",value:function(){var e=this.props,t=e.post,n=e.postTypeLabel,o=e.translate,r=(0,_.get)(t,"type","post");switch(r){case"post":return h.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your post’s settings below. When you’re happy, use the big green button to send your post out into the world!",{comment:"This string appears as the header for the confirmation sidebar when a user publishes a post.",components:{strong:h.default.createElement("strong",null)}}));case"page":return h.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your page’s settings below. When you’re happy, use the big green button to send your page out into the world!",{comment:"This string appears as the header for the confirmation sidebar when a user publishes a page.",components:{strong:h.default.createElement("strong",null)}}));default:return h.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your settings below. When you’re happy, use the big green button to send your %(postTypeLabel)s out into the world!",{comment:"This string appears as the header for the confirmation sidebar when a user publishes a custom post type. `postTypeLabel` is the singular name of the custom post type.",args:{postTypeLabel:n},components:{strong:h.default.createElement("strong",null)}}))}}},{key:"renderScheduleHeader",value:function(){var e=this.props,t=e.post,n=e.postTypeLabel,o=e.translate,r=(0,_.get)(t,"type","post");switch(r){case"post":return h.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your post’s settings below. When you’re happy, use the big green button to schedule your post!",{comment:"This string appears as the header for the confirmation sidebar when a user schedules the publishing of a post.",components:{strong:h.default.createElement("strong",null)}}));case"page":return h.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your page’s settings below. When you’re happy, use the big green button to schedule your page!",{comment:"This string appears as the header for the confirmation sidebar when a user schedules the publishing of a page.",components:{strong:h.default.createElement("strong",null)}}));default:return h.default.createElement("div",{className:"editor-confirmation-sidebar__header"},o("{{strong}}Almost there!{{/strong}} You can double-check your settings below. When you’re happy, use the big green button to schedule your %(postTypeLabel)s!",{comment:"This string appears as the header for the confirmation sidebar when a user schedules a custom post type. `postTypeLabel` is the singular name of the custom post type.",args:{postTypeLabel:n},components:{strong:h.default.createElement("strong",null)}}))}}},{key:"render",value:function(){var e=E.default.isFutureDated(this.props.post);return e?this.renderScheduleHeader():this.renderPublishHeader()}}]),t}(m.PureComponent);w.propTypes={post:v.default.object},t.default=(0,y.connect)(function(e,t){var n=t.post,o=(0,x.getSelectedSiteId)(e),r=(0,C.getPostTypes)(e,o),i=n&&r&&r[n.type]&&(0,_.get)(r[n.type],"labels.singular_name");return{postTypeLabel:i}})((0,b.localize)(w)),e.exports=t.default},"./client/post-editor/editor-confirmation-sidebar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/gridicons/build/index.js"),E=o(j),w=n("./client/components/button/index.jsx"),S=o(w),k=n("./client/post-editor/editor-publish-date/index.jsx"),T=o(k),P=n("./client/post-editor/editor-visibility/index.jsx"),I=o(P),R=n("./client/components/forms/form-checkbox/index.jsx"),N=o(R),M=n("./client/components/forms/form-label/index.jsx"),D=o(M),O=n("./client/post-editor/editor-confirmation-sidebar/header.jsx"),A=o(O),L=n("./client/state/posts/actions.js"),B=n("./client/state/ui/selectors.js"),F=n("./client/state/ui/editor/selectors.js"),z=n("./client/state/posts/selectors.js"),U=n("./client/post-editor/editor-publish-button/index.jsx"),H=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getCloseOverlayHandler=function(e){return function(){return o.props.setStatus({status:"closed",context:e})}},o.closeAndPublish=function(){o.props.setStatus({status:"closed",context:"publish"}),o.props.onPublish(!0)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getPublishButtonLabel",value:function(e){switch(e){case"update":return this.props.translate("Update");case"schedule":return this.props.translate("Schedule!");case"publish":return this.props.translate("Publish!");case"requestReview":return this.props.translate("Submit for Review")}}},{key:"renderPublishButton",value:function(){if(this.props.site&&this.props.post&&this.props.savedPost){var e=(0,U.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t=this.getPublishButtonLabel(e),n=!this.props.isPrivatePost||this.props.isPrivatePostPasswordValid;return v.default.createElement(S.default,{disabled:!n,onClick:this.closeAndPublish},t)}}},{key:"getBusyButtonLabel",value:function(e){switch(e){case"update":return this.props.translate("Updating...");case"schedule":return this.props.translate("Scheduling...");case"publish":return this.props.translate("Publishing...");case"requestReview":return this.props.translate("Submitting for Review...")}return this.props.translate("Publishing...")}},{key:"renderPrivacyControl",value:function(){if(this.props.post){var e=this.props.post||{},t=e.password,n=e.type,o=(0,C.get)(this.props.post,"status","draft"),r=(0,C.get)(this.props,"site.is_private"),i=(0,C.get)(this.props,"savedPost.status"),s=(0,C.get)(this.props,"savedPost.password"),a={onPrivatePublish:this.props.onPrivatePublish,isPrivateSite:r,type:n,password:t,status:o,savedStatus:i,savedPassword:s,context:"confirmation-sidebar"};return v.default.createElement(I.default,a)}}},{key:"renderPublishingBusyButton",value:function(){if("publishing"===this.props.status&&this.props.site&&this.props.post&&this.props.savedPost){var e=(0,U.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t=this.getBusyButtonLabel(e);return v.default.createElement(S.default,{disabled:!0,className:"editor-confirmation-sidebar__publishing-button is-busy is-primary"},t)}}},{key:"renderNoticeDisplayPreferenceCheckbox",value:function(){return v.default.createElement("div",{className:"editor-confirmation-sidebar__display-preference"},v.default.createElement(D.default,null,v.default.createElement(N.default,{onChange:this.props.handlePreferenceChange,defaultChecked:!0,className:"editor-confirmation-sidebar__display-preference-checkbox",id:"confirmation_sidebar_display_preference",name:"confirmation_sidebar_display_preference"}),v.default.createElement("span",null,this.props.translate("Show this every time I publish",{comment:"This string appears in the bottom of a publish confirmation sidebar.There is limited space. Longer strings will wrap."}))))}},{key:"render",value:function(){var e="open"===this.props.status,t="closed"!==this.props.status;return v.default.createElement("div",{className:(0,b.default)({"editor-confirmation-sidebar":!0,"is-active":t})},this.renderPublishingBusyButton(),v.default.createElement("div",{className:(0,b.default)({"editor-confirmation-sidebar__sidebar":!0,"is-active":e})},v.default.createElement("div",{className:"editor-confirmation-sidebar__ground-control"},v.default.createElement("div",{className:"editor-confirmation-sidebar__close"},v.default.createElement(S.default,{borderless:!0,onClick:this.getCloseOverlayHandler("dismiss_x"),title:this.props.translate("Close sidebar"),"aria-label":this.props.translate("Close sidebar")},v.default.createElement(E.default,{icon:"cross"}))),v.default.createElement("div",{className:"editor-confirmation-sidebar__action"},this.renderPublishButton())),v.default.createElement("div",{className:"editor-confirmation-sidebar__content-wrap"},v.default.createElement(A.default,{post:this.props.post}),v.default.createElement(T.default,{post:this.props.post,setPostDate:this.props.setPostDate}),v.default.createElement("div",{className:"editor-confirmation-sidebar__privacy-control"},this.renderPrivacyControl())),this.renderNoticeDisplayPreferenceCheckbox()))}}]),t}(v.default.Component);H.propTypes={handlePreferenceChange:h.default.func,onPrivatePublish:h.default.func,onPublish:h.default.func,post:h.default.object,savedPost:h.default.object,isPrivatePost:h.default.bool,isPrivatePostPasswordValid:h.default.bool,setPostDate:h.default.func,setStatus:h.default.func,site:h.default.object,status:h.default.string},t.default=(0,_.connect)(function(e){var t=(0,B.getSelectedSiteId)(e),n=(0,F.getEditorPostId)(e),o=(0,z.getEditedPost)(e,t,n),r=(0,z.isEditedPostPrivate)(e,t,n),i=(0,z.isPrivateEditedPostPasswordValid)(e,t,n);return{siteId:t,postId:n,post:o,isPrivatePost:r,isPrivatePostPasswordValid:i}},{editPost:L.editPost})((0,x.localize)(H)),e.exports=t.default},"./client/post-editor/editor-delete-post/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./client/lib/posts/actions.js"),E=o(j),w=n("./client/lib/accept/index.js"),S=o(w),k=n("./client/lib/posts/utils.js"),T=o(k),P=n("./client/components/button/index.jsx"),I=o(P),R=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={isTrashing:!1},o.sendToTrash=function(){T.default.userCan("delete_post",o.props.post)&&(o.setState({isTrashing:!0}),E.default.trash(o.props.post,function(e){o.setState({isTrashing:!1}),o.props.onTrashingPost&&o.props.onTrashingPost(e)}))},o.onSendToTrash=function(){var e=void 0;o.state.isTrashing||(e="page"===o.props.post.type?o.props.translate("Are you sure you want to trash this page?"):o.props.translate("Are you sure you want to trash this post?"),(0,S.default)(e,function(e){e&&o.sendToTrash()},o.props.translate("Move to trash"),o.props.translate("Back")))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.post;if(!e||!e.ID||"trash"===e.status)return null;var t=(0,_.default)("editor-delete-post__button",{"is-trashing":this.state.isTrashing}),n=this.state.isTrashing?this.props.translate("Trashing..."):this.props.translate("Move to trash");return y.default.createElement("div",{className:"editor-delete-post"},y.default.createElement(I.default,{borderless:!0,className:t,onClick:this.onSendToTrash,"aria-label":n},y.default.createElement(C.default,{icon:"trash",size:18}),n))}}]),t}(y.default.Component);R.displayName="EditorDeletePost",R.propTypes={site:h.default.object,post:h.default.object,onTrashingPost:h.default.func},t.default=(0,g.localize)(R),e.exports=t.default},"./client/post-editor/editor-diff-viewer/changes.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/classnames/index.js"),u=o(l),d=n("./node_modules/lodash/lodash.js"),c=function(e){var t=e.changes;return i.default.createElement("div",null,(0,d.map)(t,function(e,t){var n=(0,u.default)({"editor-diff-viewer__additions":e.added,"editor-diff-viewer__deletions":e.removed});return i.default.createElement("span",{className:n,key:t},e.value)}))};c.propTypes={changes:a.default.arrayOf(a.default.shape({value:a.default.string.isRequired,added:a.default.boolean,removed:a.default.removed,count:a.default.number}).isRequired)},t.default=c,e.exports=t.default},"./client/post-editor/editor-diff-viewer/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-dom/index.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./client/state/selectors/get-post-revision-changes.js"),j=o(C),E=n("./client/post-editor/editor-diff-viewer/changes.jsx"),w=o(E),S=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.scrollToFirstChangeOrTop=function(){var e=v.default.findDOMNode(o),t=e.querySelector(".editor-diff-viewer__additions, .editor-diff-viewer__deletions"),n=(0,x.get)(e,"offsetHeight",0),r=Math.max(0,(0,x.get)(t,"offsetTop",0)-n/2);e.scrollTo(0,r)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.scrollToFirstChangeOrTop()}},{key:"componentDidUpdate",value:function(){this.scrollToFirstChangeOrTop()}},{key:"render",value:function(){var e=this.props.revisionChanges;return h.default.createElement("div",{className:"editor-diff-viewer"},h.default.createElement("h1",{className:"editor-diff-viewer__title"},h.default.createElement(w.default,{changes:e.title})),h.default.createElement("pre",{className:"editor-diff-viewer__content"},h.default.createElement(w.default,{changes:e.content})))}}]),t}(m.PureComponent);S.propTypes={postId:b.default.number.isRequired,selectedRevisionId:b.default.number,siteId:b.default.number.isRequired,revisionChanges:b.default.shape({title:b.default.array,content:b.default.array}).isRequired},t.default=(0,_.connect)(function(e,t){var n=t.siteId,o=t.postId,r=t.selectedRevisionId;return{revisionChanges:(0,j.default)(e,n,o,r)}})(S),e.exports=t.default},"./client/post-editor/editor-document-head/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.type,r=e.typeObject,i=e.newPost,s=void 0;return s="post"===o?i?t("New Post",{textOnly:!0}):t("Edit Post",{textOnly:!0}):"page"===o?i?t("New Page",{textOnly:!0}):t("Edit Page",{textOnly:!0}):i?r?r.labels.new_item:t("New",{textOnly:!0}):r?r.labels.edit_item:t("Edit",{context:"verb",textOnly:!0}),l.default.createElement("div",null,n&&"page"!==o&&"post"!==o&&l.default.createElement(m.default,{siteId:n}),l.default.createElement(f.default,{title:s}))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/i18n-calypso/index.js"),c=n("./client/components/data/document-head/index.jsx"),f=o(c),p=n("./client/components/data/query-post-types/index.jsx"),m=o(p),h=n("./client/state/ui/selectors.js"),g=n("./client/state/ui/editor/selectors.js"),v=n("./client/state/posts/selectors.js"),y=n("./client/state/post-types/selectors.js");r.propTypes={translate:s.default.func,siteId:s.default.number,type:s.default.string,typeObject:s.default.object,newPost:s.default.bool},t.default=(0,u.connect)(function(e){var t=(0,h.getSelectedSiteId)(e),n=(0,g.getEditorPostId)(e),o=(0,v.getEditedPostValue)(e,t,n,"type");return{siteId:t,type:o,typeObject:(0,y.getPostType)(e,t,o),newPost:(0,g.isEditorNewPost)(e)}})((0,d.localize)(r)),e.exports=t.default},"./client/post-editor/editor-drawer/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/components/accordion/index.jsx"),C=o(x),j=n("./client/components/accordion/section.jsx"),E=o(j),w=n("./client/post-editor/editor-categories-tags/accordion.jsx"),S=o(w),k=n("./client/components/async-load/index.jsx"),T=o(k),P=n("./client/components/forms/form-textarea/index.jsx"),I=o(P),R=n("./client/post-editor/editor-more-options/slug.jsx"),N=o(R),M=n("./client/lib/post-metadata/index.js"),D=o(M),O=n("./client/components/track-input-changes/index.jsx"),A=o(O),L=n("./client/lib/posts/actions.js"),B=o(L),F=n("./client/lib/posts/stats.js"),z=n("./client/lib/products-values/index.js"),U=n("./client/components/data/query-post-types/index.jsx"),H=o(U),W=n("./client/components/data/query-site-settings/index.js"),V=o(W),q=n("./client/state/ui/selectors.js"),G=n("./client/state/ui/editor/selectors.js"),K=n("./client/state/posts/selectors.js"),$=n("./client/state/post-types/selectors.js"),Y=n("./client/state/sites/selectors.js"),J=n("./client/config/index.js"),Z=o(J),X=n("./client/state/selectors/are-site-permalinks-editable.js"),Q=o(X),ee=n("./client/post-editor/editor-drawer/taxonomies.jsx"),te=o(ee),ne=n("./client/post-editor/editor-drawer/page-options.jsx"),oe=o(ne),re=n("./client/post-editor/editor-drawer/label.jsx"),ie=o(re),se=n("./client/post-editor/editor-more-options/copy-post.jsx"),ae=o(se),le=n("./client/post-editor/edit-post-status/index.jsx"),ue=o(le),de={post:{thumbnail:!0,excerpt:!0,"post-formats":!0,"geo-location":!0,tags:!0,comments:!0},page:{thumbnail:!0,"page-attributes":!0,"geo-location":!0,
excerpt:!0,comments:!0}},ce=function(e){n.e("async-load-post-editor-editor-post-formats-accordion").then(function(t){e(n("./client/post-editor/editor-post-formats/accordion.jsx").__esModule?n("./client/post-editor/editor-post-formats/accordion.jsx").default:n("./client/post-editor/editor-post-formats/accordion.jsx"))}.bind(null,n)).catch(n.oe)},fe=function(e){n.e("async-load-post-editor-editor-sharing-accordion").then(function(t){e(n("./client/post-editor/editor-sharing/accordion.jsx").__esModule?n("./client/post-editor/editor-sharing/accordion.jsx").default:n("./client/post-editor/editor-sharing/accordion.jsx"))}.bind(null,n)).catch(n.oe)},pe=function(e){n.e("async-load-featured-image").then(function(t){e(n("./client/post-editor/editor-drawer/featured-image.jsx").__esModule?n("./client/post-editor/editor-drawer/featured-image.jsx").default:n("./client/post-editor/editor-drawer/featured-image.jsx"))}.bind(null,n)).catch(n.oe)},me=function(e){n.e("async-load-post-editor-editor-location").then(function(t){e(n("./client/post-editor/editor-location/index.jsx").__esModule?n("./client/post-editor/editor-location/index.jsx").default:n("./client/post-editor/editor-location/index.jsx"))}.bind(null,n)).catch(n.oe)},he=function(e){n.e("async-load-post-editor-editor-discussion").then(function(t){e(n("./client/post-editor/editor-discussion/index.jsx").__esModule?n("./client/post-editor/editor-discussion/index.jsx").default:n("./client/post-editor/editor-discussion/index.jsx"))}.bind(null,n)).catch(n.oe)},ge=function(e){n.e("async-load-post-editor-editor-seo-accordion").then(function(t){e(n("./client/post-editor/editor-seo-accordion/index.jsx").__esModule?n("./client/post-editor/editor-seo-accordion/index.jsx").default:n("./client/post-editor/editor-seo-accordion/index.jsx"))}.bind(null,n)).catch(n.oe)},ve=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onExcerptChange",value:function(e){B.default.edit({excerpt:e.target.value})}},{key:"currentPostTypeSupports",value:function(e){var t=this.props,n=t.typeObject,o=t.type;return n&&n.supports?!!n.supports[e]:!de.hasOwnProperty(o)||!!de[o][e]}},{key:"recordExcerptChangeStats",value:function(){(0,F.recordStat)("excerpt_changed"),(0,F.recordEvent)("Changed Excerpt")}},{key:"renderCategories",value:function(){var e=this.props.type,t=Z.default.isEnabled("manage/custom-post-types"),n=!t&&this.currentPostTypeSupports("tags");if("post"===e||n)return h.default.createElement(S.default,null)}},{key:"renderTaxonomies",value:function(){var e=this.props.canJetpackUseTaxonomies,t=Z.default.isEnabled("manage/custom-post-types");if(t&&!1!==e)return h.default.createElement(te.default,null)}},{key:"renderPostFormats",value:function(){if(this.props.post&&this.currentPostTypeSupports("post-formats"))return h.default.createElement(T.default,{require:ce,post:this.props.post,className:"editor-drawer__accordion"})}},{key:"renderSharing",value:function(){return h.default.createElement(T.default,{require:fe,site:this.props.site,post:this.props.post})}},{key:"renderFeaturedImage",value:function(){if(this.currentPostTypeSupports("thumbnail"))return h.default.createElement(T.default,{require:pe,site:this.props.site,post:this.props.post})}},{key:"renderExcerpt",value:function(){var e=this.props.translate;if(this.currentPostTypeSupports("excerpt")){var t=(0,_.get)(this.props.post,"excerpt");return h.default.createElement(E.default,null,h.default.createElement(ie.default,{labelText:e("Excerpt"),helpText:e("Excerpts are optional hand-crafted summaries of your content.")},h.default.createElement(A.default,{onNewValue:this.recordExcerptChangeStats},h.default.createElement(I.default,{id:"excerpt",name:"excerpt",onChange:this.onExcerptChange,value:t,placeholder:e("Write an excerpt…"),"aria-label":e("Write an excerpt…")}))))}}},{key:"renderLocation",value:function(){var e=this.props.translate;if(this.props.site&&!this.props.isJetpack&&this.currentPostTypeSupports("geo-location"))return h.default.createElement(E.default,null,h.default.createElement(ie.default,{labelText:e("Location")}),h.default.createElement(T.default,{require:me,coordinates:D.default.geoCoordinates(this.props.post)}))}},{key:"renderDiscussion",value:function(){if(this.currentPostTypeSupports("comments"))return h.default.createElement(E.default,null,h.default.createElement(T.default,{require:he,site:this.props.site,post:this.props.post,isNew:this.props.isNew}))}},{key:"renderSeo",value:function(){var e=this.props.jetpackVersionSupportsSeo;if(this.props.site&&(!this.props.isJetpack||this.props.isSeoToolsModuleActive&&e)){var t=this.props.site.plan,n=(0,z.isBusiness)(t)||(0,z.isEnterprise)(t);if(n)return h.default.createElement(T.default,{require:ge,metaDescription:D.default.metaDescription(this.props.post)})}}},{key:"renderCopyPost",value:function(){var e=this.props.type;if("post"===e||"page"===e)return h.default.createElement(ae.default,null)}},{key:"renderMoreOptions",value:function(){var e=this.props,t=e.isPermalinkEditable,n=e.translate;if(this.currentPostTypeSupports("excerpt")||this.currentPostTypeSupports("geo-location")||this.currentPostTypeSupports("comments")||t)return h.default.createElement(C.default,{title:n("More Options"),className:"editor-drawer__more-options",e2eTitle:"more-options"},t&&h.default.createElement(N.default,null),this.renderExcerpt(),this.renderLocation(),this.renderDiscussion(),this.renderCopyPost())}},{key:"renderPageOptions",value:function(){if(this.currentPostTypeSupports("page-attributes"))return h.default.createElement(oe.default,null)}},{key:"renderStatus",value:function(){var e=(0,_.get)(this.props.post,"date",null),t=(0,_.get)(this.props.post,"status",null),n=this.props,o=n.translate,r=n.type;return h.default.createElement(C.default,{title:o("Status"),e2eTitle:"status"},h.default.createElement(ue.default,{savedPost:this.props.savedPost,postDate:e,onSave:this.props.onSave,onTrashingPost:this.props.onTrashingPost,onPrivatePublish:this.props.onPrivatePublish,setPostDate:this.props.setPostDate,site:this.props.site,status:t,type:r,isPostPrivate:this.props.isPostPrivate,confirmationSidebarStatus:this.props.confirmationSidebarStatus}))}},{key:"render",value:function(){var e=this.props.site;return h.default.createElement("div",{className:"editor-drawer"},e&&h.default.createElement(H.default,{siteId:e.ID}),e&&h.default.createElement(V.default,{siteId:e.ID}),this.renderStatus(),this.renderCategories(),this.renderTaxonomies(),this.renderFeaturedImage(),this.renderPageOptions(),this.renderSharing(),this.renderPostFormats(),this.renderSeo(),this.renderMoreOptions())}}]),t}(m.Component);ve.propTypes={site:v.default.object,savedPost:v.default.object,post:v.default.object,canJetpackUseTaxonomies:v.default.bool,typeObject:v.default.object,isNew:v.default.bool,type:v.default.string,setPostDate:v.default.func,onSave:v.default.func,isPostPrivate:v.default.bool,confirmationSidebarStatus:v.default.string},ve.displayName="EditorDrawer";var ye=(0,_.flow)(b.localize,(0,y.connect)(function(e){var t=(0,q.getSelectedSiteId)(e),n=(0,K.getEditedPostValue)(e,t,(0,G.getEditorPostId)(e),"type");return{isPermalinkEditable:(0,Q.default)(e,t),canJetpackUseTaxonomies:(0,Y.isJetpackMinimumVersion)(e,t,"4.1"),isJetpack:(0,Y.isJetpackSite)(e,t),isSeoToolsModuleActive:(0,Y.isJetpackModuleActive)(e,t,"seo-tools"),jetpackVersionSupportsSeo:(0,Y.isJetpackMinimumVersion)(e,t,"4.4-beta1"),type:n,typeObject:(0,$.getPostType)(e,t,n)}},null,null,{pure:!1}));t.default=ye(ve),e.exports=t.default},"./client/post-editor/editor-drawer/label.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.children,n=e.labelText,o=e.helpText;return l.default.createElement("label",{className:"editor-drawer__label"},l.default.createElement("span",{className:"editor-drawer__label-text"},n,o&&l.default.createElement(d.default,{position:"top left"},o)),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./client/components/info-popover/index.jsx"),d=o(u);r.propTypes={helpText:s.default.string,labelText:s.default.string},e.exports=t.default},"./client/post-editor/editor-drawer/page-options.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.postType,o=e.hierarchical,r=void 0;return r=t("page"===n?"Page Attributes":"Attributes"),s.default.createElement(x.default,{title:r,e2eTitle:"page-options"},o&&s.default.createElement(h.default,null),s.default.createElement(v.default,null),s.default.createElement(b.default,null))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/react.js"),s=o(i),a=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/i18n-calypso/index.js"),u=n("./node_modules/lodash/lodash.js"),d=n("./client/state/ui/selectors.js"),c=n("./client/state/posts/selectors.js"),f=n("./client/state/ui/editor/selectors.js"),p=n("./client/state/post-types/selectors.js"),m=n("./client/post-editor/editor-page-parent/index.jsx"),h=o(m),g=n("./client/post-editor/editor-page-templates/index.jsx"),v=o(g),y=n("./client/post-editor/editor-page-order/index.jsx"),b=o(y),_=n("./client/components/accordion/index.jsx"),x=o(_);t.default=(0,a.connect)(function(e){var t=(0,d.getSelectedSiteId)(e),n=(0,f.getEditorPostId)(e),o=(0,c.getEditedPostValue)(e,t,n,"type"),r="page"===o||(0,u.get)((0,p.getPostType)(e,t,o),"hierarchical");return{postType:o,hierarchical:r}})((0,l.localize)(r)),e.exports=t.default},"./client/post-editor/editor-drawer/taxonomies.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return!!(0,c.includes)(["post_format","mentions","xposts"],t)||"post"===e&&(0,c.includes)(["category","post_tag"],t)}function i(e){var t=e.translate,n=e.siteId,o=e.postType,i=e.isSupported,s=e.taxonomies,a=e.terms;return i?u.default.createElement("div",{className:"editor-drawer__taxonomies"},n&&o&&u.default.createElement(h.default,{siteId:n,postType:o}),(0,c.reduce)(s,function(e,n){var i=n.name,s=n.label,l=n.hierarchical;if(r(o,i))return e;var d=(0,c.get)(a,i),f=(0,c.size)(d),m=void 0;return m=f>2?t("%d selected","%d selected",{count:f,args:[f]}):(0,c.map)(d,function(e){return(0,p.decodeEntities)(e.name||e)}).join(", "),e.concat(u.default.createElement(C.default,{key:i,title:s,subtitle:m,e2eTitle:"taxonomies"},l?u.default.createElement(S.default,{compact:!0,taxonomyName:i}):u.default.createElement(E.default,{taxonomyName:i})))},[])):null}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/lodash/lodash.js"),f=n("./node_modules/i18n-calypso/index.js"),p=n("./client/lib/formatting/index.js"),m=n("./client/components/data/query-taxonomies/index.jsx"),h=o(m),g=n("./client/state/ui/selectors.js"),v=n("./client/state/ui/editor/selectors.js"),y=n("./client/state/posts/selectors.js"),b=n("./client/state/post-types/taxonomies/selectors.js"),_=n("./client/state/sites/selectors.js"),x=n("./client/components/accordion/index.jsx"),C=o(x),j=n("./client/post-editor/term-token-field/index.jsx"),E=o(j),w=n("./client/post-editor/editor-term-selector/index.jsx"),S=o(w);i.propTypes={translate:a.default.func,siteId:a.default.number,postType:a.default.string,isSupported:a.default.bool,terms:a.default.oneOfType([a.default.object,a.default.array]),taxonomies:a.default.array},t.default=(0,d.connect)(function(e){var t=(0,g.getSelectedSiteId)(e),n=(0,v.getEditorPostId)(e),o=(0,y.getEditedPostValue)(e,t,n,"type"),r=!1!==(0,_.isJetpackMinimumVersion)(e,t,"4.1.0");return{siteId:t,postType:o,isSupported:r,terms:(0,y.getEditedPostValue)(e,t,n,"terms"),taxonomies:(0,b.getPostTypeTaxonomies)(e,t,o)}})((0,f.localize)(i)),e.exports=t.default},"./client/post-editor/editor-featured-image/dropzone-icon.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r);t.default=function(){return i.default.createElement("svg",{width:"55",height:"42",viewBox:"0 0 55 42",xmlns:"http://www.w3.org/2000/svg"},i.default.createElement("title",null,"Featured Image"),i.default.createElement("g",{fillRule:"nonzero",fill:"#542B06"},i.default.createElement("path",{d:"M22 11c0-1.656 1.344-3 3-3s3 1.344 3 3-1.344 3-3 3-3-1.344-3-3zm18-7v12.33l-3.173 8.29-12.01.637L31.992 32H4c-2.21 0-4-1.79-4-4V4c0-2.21 1.79-4 4-4h32c2.21 0 4 1.79 4 4zm-4 0H4v14.888L12 10l11.79 13.1 3.174-3.7c1.596-1.864 4.48-1.864 6.074 0L36 22.852V4z"}),i.default.createElement("path",{d:"M41 16.667l3.443 9.27 9.89.406-7.762 6.136L49.24 42 41 36.52 32.76 42l2.67-9.52-7.763-6.14 9.89-.404"})))},e.exports=t.default},"./client/post-editor/editor-featured-image/dropzone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/lodash/lodash.js"),y=n("./node_modules/i18n-calypso/index.js"),b=n("./client/components/drop-zone/index.jsx"),_=o(b),x=n("./client/lib/media/actions.js"),C=o(x),j=n("./client/lib/media/store.js"),E=o(j),w=n("./client/lib/media/utils.js"),S=o(w),k=n("./client/lib/posts/actions.js"),T=o(k),P=n("./client/post-editor/editor-featured-image/dropzone-icon.jsx"),I=o(P),R=n("./client/state/media/actions.js"),N=n("./client/state/posts/actions.js"),M=n("./client/state/ui/selectors.js"),D=n("./client/state/ui/editor/selectors.js"),O=n("./client/state/analytics/actions.js"),A=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.onFilesDrop=function(e){var t=(0,v.head)(S.default.filterItemsByMimePrefix(e,"image"));if(!t)return!1;var n=(0,v.uniqueId)("featured-image"),r=o.props.siteId,i=function e(){var t=E.default.get(r,n),i=t&&S.default.isItemBeingUploaded(t),s=!t;s?o.props.deleteMedia(r,n):o.props.receiveMedia(r,t),i||(E.default.off("change",e),t&&o.props.recordTracksEvent("calypso_editor_featured_image_upload",{source:"dropzone",type:"dragdrop"})),setTimeout(function(){T.default.edit({featured_image:t.ID})},0)};E.default.on("change",i),C.default.add(r,{ID:n,fileContents:t,fileName:t.name})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return h.default.createElement(_.default,{className:"editor-featured-image__dropzone",dropZoneName:"featuredImage",icon:h.default.createElement(I.default,null),textLabel:this.props.translate("Set as Featured Image"),onFilesDrop:this.onFilesDrop})}}]),t}(m.Component);t.default=(0,g.connect)(function(e){return{siteId:(0,M.getSelectedSiteId)(e),postId:(0,D.getEditorPostId)(e)}},{editPost:N.editPost,deleteMedia:R.deleteMedia,receiveMedia:R.receiveMedia,recordTracksEvent:O.recordTracksEvent})((0,y.localize)(A)),e.exports=t.default},"./client/post-editor/editor-featured-image/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=r(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=r(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=r(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=r(p),h=n("./node_modules/react/react.js"),g=r(h),v=n("./node_modules/prop-types/index.js"),y=r(v),b=n("./node_modules/classnames/index.js"),_=r(b),x=n("./node_modules/gridicons/build/index.js"),C=r(x),j=n("./node_modules/react-redux/es/index.js"),E=n("./node_modules/lodash/lodash.js"),w=n("./client/components/data/media-library-selected-data/index.jsx"),S=r(w),k=n("./client/post-editor/media-modal/index.jsx"),T=r(k),P=n("./client/lib/media/actions.js"),I=r(P),R=n("./client/lib/posts/actions.js"),N=r(R),M=n("./client/lib/posts/utils.js"),D=r(M),O=n("./client/lib/posts/stats.js"),A=o(O),L=n("./client/post-editor/editor-featured-image/preview-container.jsx"),B=r(L),F=n("./client/post-editor/editor-featured-image/dropzone.jsx"),z=r(F),U=n("./client/state/selectors/is-drop-zone-visible.js"),H=r(U),W=n("./client/components/button/index.jsx"),V=r(W),q=n("./client/components/remove-button/index.jsx"),G=r(q),K=n("./client/state/selectors/get-media-item.js"),$=r(K),Y=n("./client/components/data/query-media/index.jsx"),J=r(Y),Z=n("./node_modules/i18n-calypso/index.js"),X=n("./client/state/analytics/actions.js"),Q=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.state={isSelecting:!1},o.showMediaModal=function(){var e=o.props,t=e.featuredImage,n=e.site;t&&I.default.setLibrarySelectedItems(n.ID,[t]),o.setState({isSelecting:!0})},o.hideMediaModal=function(){o.setState({isSelecting:!1})},o.setImage=function(e){o.hideMediaModal(),o.props.onImageSelected(),e&&(N.default.edit({featured_image:e.items[0].ID}),A.recordStat("featured_image_set"),A.recordEvent("Featured image set"),o.props.recordTracksEvent("calypso_editor_featured_image_upload",{source:"medialibrary",type:"click"}))},o.renderMediaModal=function(){if(o.props.site)return g.default.createElement(S.default,{siteId:o.props.site.ID},g.default.createElement(T.default,{visible:o.props.selecting||o.state.isSelecting,onClose:o.setImage,site:o.props.site,labels:{confirm:o.props.translate("Set Featured Image")},enabledFilters:["images"],single:!0}))},o.renderCurrentImage=function(){if(o.props.site&&o.props.post){var e=D.default.getFeaturedImageId(o.props.post);if(e)return g.default.createElement(B.default,{siteId:o.props.site.ID,itemId:e,maxWidth:o.props.maxWidth})}},r=n,(0,f.default)(o,r)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,n=e.site,o=e.post,r=(0,M.getFeaturedImageId)(o),i=(0,_.default)("editor-featured-image",{"is-assigned":D.default.getFeaturedImageId(this.props.post),"has-active-drop-zone":this.props.hasDropZone&&this.props.isDropZoneVisible});return g.default.createElement("div",{className:i},n&&r&&(0,E.isNumber)(r)?g.default.createElement(J.default,{siteId:n.ID,mediaId:r}):null,this.renderMediaModal(),g.default.createElement("div",{className:"editor-featured-image__inner-content"},g.default.createElement(V.default,{className:"editor-featured-image__current-image",onClick:this.showMediaModal,borderless:!0,compact:!0},this.renderCurrentImage(),g.default.createElement(C.default,{icon:"pencil",className:"editor-featured-image__edit-icon"})),r&&g.default.createElement(G.default,{onRemove:t.removeImage})),this.props.hasDropZone&&g.default.createElement(z.default,null))}}],[{key:"removeImage",value:function(){N.default.edit({featured_image:""}),A.recordStat("featured_image_removed"),A.recordEvent("Featured image removed")}}]),t}(h.Component);Q.propTypes={featuredImage:y.default.object,hasDropZone:y.default.bool,isDropZoneVisible:y.default.bool,maxWidth:y.default.number,site:y.default.object,post:y.default.object,recordTracksEvent:y.default.func,selecting:y.default.bool,translate:y.default.func,onImageSelected:y.default.func},Q.defaultProps={hasDropZone:!1,isDropZoneVisible:!1,maxWidth:450,onImageSelected:function(){}},t.default=(0,j.connect)(function(e,t){var n=t.post,o=t.site,r=o&&o.ID,i=(0,M.getFeaturedImageId)(n);return{featuredImage:(0,$.default)(e,r,i),isDropZoneVisible:(0,H.default)(e,"featuredImage")}},{recordTracksEvent:X.recordTracksEvent})((0,Z.localize)(Q)),e.exports=t.default},"./client/post-editor/editor-featured-image/preview-container.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/lib/media/actions.js"),_=o(b),x=n("./client/lib/media/store.js"),C=o(x),j=n("./client/lib/posts/actions.js"),E=o(j),w=n("./client/post-editor/editor-featured-image/preview.jsx"),S=o(w),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={image:null},o.fetchImage=function(){o.updateImageState(function(){o.state.image||(0,y.defer)(function(){_.default.fetch(o.props.siteId,o.props.itemId)})})},o.updateImageState=function(e){var t=C.default.get(o.props.siteId,o.props.itemId);o.setState({image:t},function(){"function"==typeof e&&e()}),(0,y.defer)(function(){t&&t.ID!==o.props.itemId&&E.default.edit({featured_image:t.ID})})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.fetchImage(),C.default.on("change",this.updateImageState)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.siteId,o=t.itemId;n===e.siteId&&o===e.itemId||this.fetchImage()}},{key:"componentWillUnmount",value:function(){C.default.off("change",this.updateImageState)}},{key:"render",value:function(){return v.default.createElement(S.default,{image:this.state.image,maxWidth:this.props.maxWidth})}}]),t}(v.default.Component);k.displayName="EditorFeaturedImagePreviewContainer",k.propTypes={siteId:h.default.number.isRequired,itemId:h.default.oneOfType([h.default.number,h.default.string]).isRequired,maxWidth:h.default.number},t.default=k,e.exports=t.default},"./client/post-editor/editor-featured-image/preview.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/lodash/lodash.js"),C=n("./client/lib/media/store.js"),j=o(C),E=n("./client/lib/media/utils.js"),w=o(E),S=n("./client/components/spinner/index.jsx"),k=o(S),T=n("./client/components/spinner-line/index.jsx"),P=o(T),I=n("./client/components/image-preloader/index.jsx"),R=o(I),N=n("./client/state/ui/selectors.js"),M=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state=o.constructor.initialState,o.isReceivingPersistedImage=function(e,t){var n=o.props.siteId;if(n!==t.siteId)return!1;var r=o.props.image;if(!r||!r.transient||!t.image)return!1;var i=j.default.get(n,r.ID);return i&&i.ID===t.image.ID},o.src=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props;if(e.image)return w.default.url(e.image,{maxWidth:o.props.maxWidth,size:"post-thumbnail"})},o.clearState=function(){(0,x.some)(o.state)&&o.setState(o.constructor.initialState)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.src();if(t&&t!==this.src(e)){var n={height:this.refs.preview.clientHeight};this.isReceivingPersistedImage(this.props,e)&&(n.transientSrc=t),this.setState(n)}}},{key:"render",value:function(){var e=this.state.height,t=(0,_.default)("editor-featured-image__preview",{"is-transient":(0,x.get)(this.props.image,"transient"),"has-assigned-height":!!e}),n=void 0;return n=this.state.transientSrc?h.default.createElement("img",{src:this.state.transientSrc}):h.default.createElement(P.default,null),h.default.createElement("div",{ref:"preview",className:t,style:{height:e}},h.default.createElement(k.default,null),h.default.createElement(R.default,{placeholder:n,src:this.src(),onLoad:this.clearState,className:"editor-featured-image__preview-image"}))}}]),t}(m.Component);M.propTypes={siteId:v.default.number,image:v.default.object,maxWidth:v.default.number},M.initialState={height:null,transientSrc:null},t.default=(0,y.connect)(function(e){return{siteId:(0,N.getSelectedSiteId)(e)}})(M),e.exports=t.default},"./client/post-editor/editor-forbidden/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.userCanEdit,o=e.siteSlug;if(!1!==n)return null;var r=[l.default.createElement(_.default,{key:"back",href:"/posts/"+o,primary:!0},t("Back to My Sites"))];return l.default.createElement(C.default,{isVisible:!0,buttons:r,className:"editor-forbidden"},l.default.createElement("h1",null,t("You can't edit this post type")),l.default.createElement("p",null,t("If you think you should have access to this post type, request that your site administrator grant you access.")))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/i18n-calypso/index.js"),f=n("./client/state/selectors/can-current-user.js"),p=o(f),m=n("./client/state/ui/selectors.js"),h=n("./client/state/ui/editor/selectors.js"),g=n("./client/state/posts/selectors.js"),v=n("./client/state/post-types/selectors.js"),y=n("./client/state/sites/selectors.js"),b=n("./client/components/button/index.jsx"),_=o(b),x=n("./client/components/dialog/index.jsx"),C=o(x);r.propTypes={translate:s.default.func,userCanEdit:s.default.bool,siteSlug:s.default.string},t.default=(0,u.connect)(function(e){var t=(0,m.getSelectedSiteId)(e),n=(0,g.getEditedPostValue)(e,t,(0,h.getEditorPostId)(e),"type"),o=(0,v.getPostType)(e,t,n),r=(0,d.get)(o,["capabilities","edit_posts"],null);return{userCanEdit:(0,p.default)(e,t,r),siteSlug:(0,y.getSiteSlug)(e,t)}})((0,c.localize)(r)),e.exports=t.default},"./client/post-editor/editor-ground-control/history-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/prop-types/index.js"),l=o(a),u=n("./node_modules/i18n-calypso/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./client/state/posts/revisions/actions.js"),f=n("./client/post-editor/editor-revisions/dialog.jsx"),p=o(f),m=function(e){var t=e.loadRevision,n=e.postId,o=e.siteId,r=e.closeDialog,s=e.openDialog,a=e.translate;return i.default.createElement("div",{className:"editor-ground-control__history"},i.default.createElement("button",{className:"editor-ground-control__history-button button is-link",onClick:s},a("History")),i.default.createElement(p.default,{onClose:r,loadRevision:t,postId:n,siteId:o}))};m.PropTypes={loadRevision:l.default.func.isRequired,closePostRevisionsDialog:l.default.func.isRequired,openPostRevisionsDialog:l.default.func.isRequired,translate:l.default.func},t.default=(0,d.flow)(u.localize,(0,s.connect)(null,{closeDialog:c.closePostRevisionsDialog,openDialog:c.openPostRevisionsDialog}))(m),e.exports=t.default},"./client/post-editor/editor-ground-control/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorGroundControl=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/moment/moment.js"),_=o(b),x=n("./node_modules/page/index.js"),C=o(x),j=n("./node_modules/i18n-calypso/index.js"),E=o(j),w=n("./node_modules/gridicons/build/index.js"),S=o(w),k=n("./client/config/index.js"),T=n("./client/components/card/index.jsx"),P=o(T),I=n("./client/blocks/site/index.jsx"),R=o(I),N=n("./client/lib/posts/utils.js"),M=o(N),D=n("./client/lib/site/utils.js"),O=o(D),A=n("./client/lib/posts/stats.js"),L=n("./client/post-editor/editor-publish-button/index.jsx"),B=o(L),F=n("./client/components/button/index.jsx"),z=o(F),U=n("./client/post-editor/editor-post-type/index.jsx"),H=o(U),W=n("./client/post-editor/editor-ground-control/history-button.jsx"),V=o(W),q=t.EditorGroundControl=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={showAdvanceStatus:!1,needsVerification:o.props.userUtils&&o.props.userUtils.needsVerificationForSite(o.props.site)},o.updateNeedsVerification=function(){o.setState({needsVerification:o.props.userUtils&&o.props.userUtils.needsVerificationForSite(o.props.site)})},o.toggleAdvancedStatus=function(){o.setState({showAdvanceStatus:!o.state.showAdvanceStatus})},o.onSaveButtonClick=function(){o.props.onSave();var e=M.default.isPage(o.props.page)?"Clicked Save Page Button":"Clicked Save Post Button";(0,A.recordEvent)(e),(0,A.recordStat)("save_draft_clicked")},o.onPreviewButtonClick=function(e){if(o.isPreviewEnabled()){o.props.onPreview(e);var t=M.default.isPage(o.props.page)?"Clicked Preview Page Button":"Clicked Preview Post Button";(0,A.recordEvent)(t)}},o.onBackButtonClick=function(){C.default.back(o.props.allPostsUrl)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.props.user&&this.props.user.on("change",this.updateNeedsVerification).on("verify",this.updateNeedsVerification)}},{key:"componentWillUnmount",value:function(){this.props.user&&this.props.user.off("change",this.updateNeedsVerification).off("verify",this.updateNeedsVerification)}},{key:"componentWillReceiveProps",value:function(e){this.setState({needsVerification:e.userUtils&&e.userUtils.needsVerificationForSite(e.site)}),this.props.user&&this.props.user.off("change",this.updateNeedsVerification).off("verify",this.updateNeedsVerification),e.user&&e.user.on("change",this.updateNeedsVerification).on("verify",this.updateNeedsVerification)}},{key:"getPreviewLabel",value:function(){
return M.default.isPublished(this.props.savedPost)&&this.props.site.jetpack?this.props.translate("View"):this.props.translate("Preview")}},{key:"getVerificationNoticeLabel",value:function(){var e=(0,L.getPublishButtonStatus)(this.props.site,this.props.post,this.props.savedPost),t={update:E.default.translate("To update, check your email and confirm your address."),schedule:E.default.translate("To schedule, check your email and confirm your address."),publish:E.default.translate("To publish, check your email and confirm your address."),requestReview:E.default.translate("To submit for review, check your email and confirm your address.")};return t[e]}},{key:"shouldShowStatusLabel",value:function(){var e=this.props,t=e.isSaving,n=e.post;return t||n&&n.ID&&!M.default.isPublished(n)}},{key:"isSaveAvailable",value:function(){return!this.props.isSaving&&!this.props.isSaveBlocked&&this.props.isDirty&&this.props.hasContent&&!!this.props.post&&!M.default.isPublished(this.props.post)}},{key:"isPreviewEnabled",value:function(){return this.props.hasContent&&!(this.props.isNew&&!this.props.isDirty)&&!this.props.isSaveBlocked}},{key:"canPublishPost",value:function(){return O.default.userCan("publish_posts",this.props.site)}},{key:"renderGroundControlQuickSaveButtons",value:function(){var e=this.props,t=e.isSaving,n=e.loadRevision,o=e.post,r=e.translate,i=this.isSaveAvailable(),s=this.shouldShowStatusLabel(),a=i||s,l=(0,k.isEnabled)("post-editor/revisions")&&(0,y.get)(o,"revisions.length");if(a||l)return h.default.createElement("div",{className:"editor-ground-control__quick-save"},l&&h.default.createElement(V.default,{loadRevision:n}),a&&h.default.createElement("div",{className:"editor-ground-control__status"},i&&h.default.createElement("button",{className:"editor-ground-control__save button is-link",onClick:this.onSaveButtonClick,tabIndex:3},r("Save")),!i&&s&&h.default.createElement("span",{className:"editor-ground-control__save-status","data-e2e-status":t?"Saving…":"Saved"},r(t?"Saving…":"Saved"))))}},{key:"renderGroundControlActionButtons",value:function(){if("open"!==this.props.confirmationSidebarStatus)return h.default.createElement("div",{className:"editor-ground-control__action-buttons"},h.default.createElement(z.default,{borderless:!0,className:"editor-ground-control__preview-button",disabled:!this.isPreviewEnabled(),onClick:this.onPreviewButtonClick,tabIndex:4},h.default.createElement(S.default,{icon:"visible"})," ",h.default.createElement("span",{className:"editor-ground-control__button-label"},this.getPreviewLabel())),h.default.createElement(z.default,{borderless:!0,className:"editor-ground-control__toggle-sidebar",onClick:this.props.toggleSidebar},h.default.createElement(S.default,{icon:"cog"}),h.default.createElement("span",{className:"editor-ground-control__button-label"}," ",h.default.createElement(H.default,{isSettings:!0}))),h.default.createElement("div",{className:"editor-ground-control__publish-button"},h.default.createElement(B.default,{site:this.props.site,post:this.props.post,savedPost:this.props.savedPost,onSave:this.props.onSave,onPublish:this.props.onPublish,tabIndex:5,isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled,isPublishing:this.props.isPublishing,isSaveBlocked:this.props.isSaveBlocked,hasContent:this.props.hasContent,needsVerification:this.state.needsVerification,busy:this.props.isPublishing||M.default.isPublished(this.props.savedPost)&&this.props.isSaving})))}},{key:"render",value:function(){var e=this.props.translate;return h.default.createElement(P.default,{className:"editor-ground-control"},h.default.createElement(z.default,{borderless:!0,className:"editor-ground-control__back",href:"",onClick:this.onBackButtonClick,"aria-label":e("Go back")},h.default.createElement(S.default,{icon:"arrow-left"})),h.default.createElement(R.default,{compact:!0,site:this.props.site,indicator:!1,homeLink:!0,externalLink:!0}),this.state.needsVerification&&h.default.createElement("div",{className:"editor-ground-control__email-verification-notice",tabIndex:7,onClick:this.props.onMoreInfoAboutEmailVerify},h.default.createElement(S.default,{icon:"info",className:"editor-ground-control__email-verification-notice-icon"}),this.getVerificationNoticeLabel()," ",h.default.createElement("span",{className:"editor-ground-control__email-verification-notice-more"},e("Learn More"))),this.renderGroundControlQuickSaveButtons(),this.renderGroundControlActionButtons())}}]),t}(m.PureComponent);q.propTypes={hasContent:v.default.bool,isConfirmationSidebarEnabled:v.default.bool,confirmationSidebarStatus:v.default.string,isDirty:v.default.bool,isSaveBlocked:v.default.bool,isPublishing:v.default.bool,isSaving:v.default.bool,isSidebarOpened:v.default.bool,loadRevision:v.default.func.isRequired,moment:v.default.func,onPreview:v.default.func,onPublish:v.default.func,onSave:v.default.func,onSaveDraft:v.default.func,onMoreInfoAboutEmailVerify:v.default.func,post:v.default.object,savedPost:v.default.object,setPostDate:v.default.func,site:v.default.object,user:v.default.object,userUtils:v.default.object,toggleSidebar:v.default.func,translate:v.default.func},q.defaultProps={hasContent:!1,isConfirmationSidebarEnabled:!0,isDirty:!1,isSaveBlocked:!1,isPublishing:!1,isSaving:!1,moment:_.default,onPublish:y.noop,onSaveDraft:y.noop,post:null,savedPost:null,site:{},translate:y.identity,user:null,userUtils:null,setPostDate:y.noop},t.default=(0,j.localize)(q)},"./client/post-editor/editor-html-toolbar/add-image-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddImageDialog=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./client/components/dialog/index.jsx"),_=o(b),x=n("./client/components/forms/form-fieldset/index.jsx"),C=o(x),j=n("./client/components/forms/form-label/index.jsx"),E=o(j),w=n("./client/components/forms/form-text-input/index.jsx"),S=o(w),k=t.AddImageDialog=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={imageAlt:"",imageTitle:"",imageUrl:""},o.setImageAlt=function(e){o.setState({imageAlt:e.target.value})},o.setImageTitle=function(e){o.setState({imageTitle:e.target.value})},o.setImageUrl=function(e){o.setState({imageUrl:e.target.value})},o.onCloseDialog=function(){o.setState({imageAlt:"",imageTitle:"",imageUrl:""}),o.props.onClose()},o.onInsertImage=function(){var e=o.state,t=e.imageAlt,n=e.imageTitle,r=e.imageUrl;o.props.onInsert({alt:t,src:r,title:n}),o.onCloseDialog()},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.shouldDisplay,n=e.translate,o=this.state,r=o.imageAlt,i=o.imageTitle,s=o.imageUrl,a=[{action:"cancel",label:n("Cancel")},{action:"add-image",isPrimary:!0,label:n("Add Image"),onClick:this.onInsertImage}];return v.default.createElement(_.default,{autoFocus:!1,isVisible:t,buttons:a,onClose:this.onCloseDialog,additionalClassNames:"editor-html-toolbar__dialog"},v.default.createElement(C.default,null,v.default.createElement(E.default,{htmlFor:"image_url"},n("URL")),v.default.createElement(S.default,{name:"image_url",onChange:this.setImageUrl,value:s})),v.default.createElement(C.default,null,v.default.createElement(E.default,{htmlFor:"image_title"},n("Title")),v.default.createElement(S.default,{name:"image_title",onChange:this.setImageTitle,value:i})),v.default.createElement(C.default,null,v.default.createElement(E.default,{htmlFor:"image_alt"},n("Alt Text")),v.default.createElement(S.default,{name:"image_alt",onChange:this.setImageAlt,value:r})))}}]),t}(g.Component);k.propTypes={onClose:h.default.func,onInsert:h.default.func,shouldDisplay:h.default.bool,translate:h.default.func},t.default=(0,y.localize)(k)},"./client/post-editor/editor-html-toolbar/add-link-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddLinkDialog=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/state/ui/selectors.js"),x=n("./client/components/dialog/index.jsx"),C=o(x),j=n("./client/components/forms/form-checkbox/index.jsx"),E=o(j),w=n("./client/components/forms/form-fieldset/index.jsx"),S=o(w),k=n("./client/components/forms/form-label/index.jsx"),T=o(k),P=n("./client/components/forms/form-text-input/index.jsx"),I=o(P),R=n("./client/my-sites/post-selector/index.jsx"),N=o(R),M=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,D=/^(https?|ftp):\/\/[A-Z0-9.-]+\.[A-Z]{2,4}[^ "]*$/i,O=/^(?:[a-z]+:|#|\?|\.|\/)/,A=t.AddLinkDialog=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={linkNewTab:!1,linkText:"",linkUrl:"",selectedPost:{id:null,url:null}},o.bindLinkUrlRef=function(e){o.linkUrl=e},o.setLinkUrl=function(e){var t=o.state.selectedPost;o.setState({linkUrl:e.target.value,selectedPost:t.url===e.target.value?t:{id:null,url:null}})},o.setLinkText=function(e){o.setState({linkText:e.target.value})},o.setLinkNewTab=function(e){o.setState({linkNewTab:e.target.checked})},o.onSelectPost=function(e){o.setState({linkUrl:e.URL,selectedPost:{id:e.ID,url:e.URL}})},o.onCloseDialog=function(){o.setState({linkNewTab:!1,linkText:"",linkUrl:"",selectedPost:{id:null,url:null}}),o.props.onClose()},o.onInsertLink=function(){var e=o.state,t=e.linkNewTab,n=e.linkText;o.props.onInsert({href:o.correctUrl(),target:t?"_blank":""},n),o.onCloseDialog()},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({linkUrl:this.inferUrl(e.selectedText),linkText:e.selectedText})}},{key:"correctUrl",value:function(){var e=this.state.linkUrl.trim();return M.test(e)?"mailto:"+e:O.test(e)?e:"http://"+e}},{key:"inferUrl",value:function(e){return M.test(e)?"mailto:"+e:D.test(e)?e.replace(/&amp;|&#0?38;/gi,"&"):""}},{key:"render",value:function(){var e=this.props,t=e.shouldDisplay,n=e.siteId,o=e.translate,r=this.state,i=r.linkNewTab,s=r.linkText,a=r.linkUrl,l=r.selectedPost,u=[{action:"cancel",label:o("Cancel")},{action:"add-link",isPrimary:!0,label:o("Add Link"),onClick:this.onInsertLink}];return v.default.createElement(C.default,{autoFocus:!1,isVisible:t,buttons:u,onClose:this.onCloseDialog,additionalClassNames:"editor-html-toolbar__dialog"},v.default.createElement(S.default,null,v.default.createElement(T.default,{htmlFor:"link_url"},o("URL")),v.default.createElement(I.default,{name:"link_url",onChange:this.setLinkUrl,ref:this.bindLinkUrlRef,value:a})),v.default.createElement(S.default,null,v.default.createElement(T.default,{htmlFor:"link_text"},o("Link Text")),v.default.createElement(I.default,{name:"link_text",onChange:this.setLinkText,value:s})),v.default.createElement(S.default,null,v.default.createElement(T.default,null,v.default.createElement(E.default,{checked:i,name:"link_new_tab",onChange:this.setLinkNewTab}),v.default.createElement("span",null,o("Open link in a new window/tab")))),v.default.createElement(S.default,null,v.default.createElement(T.default,null,v.default.createElement("span",null,o("Link to existing content"))),v.default.createElement(N.default,{emptyMessage:o("No posts found"),onChange:this.onSelectPost,order:"DESC",orderBy:"date",selected:l.id,showTypeLabels:!0,siteId:n,type:"any",excludePrivateTypes:!0})))}}]),t}(g.Component);A.propTypes={onClose:h.default.func,onInsert:h.default.func,selectedText:h.default.string,shouldDisplay:h.default.bool,siteId:h.default.number,translate:h.default.func},t.default=(0,y.connect)(function(e){return{siteId:(0,_.getSelectedSiteId)(e)}})((0,b.localize)(A))},"./client/post-editor/editor-html-toolbar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorHtmlToolbar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/i18n-calypso/index.js"),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./node_modules/gridicons/build/index.js"),E=o(j),w=n("./node_modules/tinymce/tinymce.js"),S=n("./client/components/tinymce/plugins/contact-form/shortcode-utils.js"),k=n("./client/components/tinymce/plugins/simple-payments/shortcode-utils.js"),T=n("./client/lib/media/actions.js"),P=o(T),I=n("./client/lib/media/library-selected-store.js"),R=o(I),N=n("./client/lib/media/utils.js"),M=o(N),D=n("./client/lib/media/validation-store.js"),O=o(D),A=n("./client/lib/posts/actions.js"),L=o(A),B=n("./client/lib/viewport/index.js"),F=n("./client/post-editor/media-modal/markup.js"),z=o(F),U=n("./client/state/ui/selectors.js"),H=n("./client/state/ui/editor/contact-form/actions.js"),W=n("./client/post-editor/editor-html-toolbar/add-image-dialog.jsx"),V=o(W),q=n("./client/post-editor/editor-html-toolbar/add-link-dialog.jsx"),G=o(q),K=n("./client/components/button/index.jsx"),$=o(K),Y=n("./client/components/tinymce/plugins/contact-form/dialog/index.jsx"),J=o(Y),Z=n("./client/state/selectors/is-drop-zone-visible.js"),X=o(Z),Q=n("./client/post-editor/editor-media-modal/index.jsx"),ee=o(Q),te=n("./client/my-sites/media-library/drop-zone.jsx"),ne=o(te),oe=n("./client/config/index.js"),re=o(oe),ie=n("./client/components/tinymce/plugins/simple-payments/dialog/index.jsx"),se=o(ie),ae=39,le=t.EditorHtmlToolbar=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={contactFormDialogTab:"fields",isPinned:!1,isScrollable:!1,isScrolledFull:!1,openTags:[],selectedText:"",showContactFormDialog:!1,showImageDialog:!1,showInsertContentMenu:!1,showLinkDialog:!1,showMediaModal:!1,source:"",showSimplePaymentsDialog:!1,simplePaymentsDialogTab:"addNew"},o.bindButtonsRef=function(e){o.buttons=e},o.bindInsertContentButtonsRef=function(e){o.insertContentButtons=e},o.onWindowResize=function(){o.disablePinOnSmallScreens(),o.toggleToolbarScrollableOnResize()},o.pinToolbarOnScroll=function(){if(!(0,B.isWithinBreakpoint)("<660px")){var e=o.props.content.offsetTop,t=o.state.isPinned;t&&window.pageYOffset<e-ae?o.setState({isPinned:!1}):!t&&window.pageYOffset>e-ae&&o.setState({isPinned:!0})}},o.disablePinOnSmallScreens=function(){o.state.isPinned&&(0,B.isWithinBreakpoint)("<660px")&&o.setState({isPinned:!1})},o.toggleToolbarScrollableOnResize=function(){var e=o.buttons.scrollWidth>o.buttons.clientWidth;e!==o.state.isScrollable&&o.setState({isScrollable:e})},o.hideToolbarFadeOnFullScroll=function(e){var t=e.target,n=t.scrollLeft,r=t.scrollWidth,i=t.clientWidth,s=n>=r-i-10;s!==o.state.isScrolledFull&&o.setState({isScrolledFull:s})},o.clickOutsideInsertContentMenu=function(e){o.state.showInsertContentMenu&&!o.insertContentButtons.contains(e.target)&&o.setState({showInsertContentMenu:!1})},o.updateEditorContent=function(e,t,n){return w.Env.gecko?o.updateEditorContentFirefox(e,t,n):11===w.Env.ie?o.updateEditorContentIE11(e,t,n):o.insertEditorContent(e,t,n)},o.attributesToString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.reduce)(e,function(e,t,n){return t?e+(" "+n+'="'+t+'"'):e},"")},o.openHtmlTag=function(e){var t=e.name,n=e.attributes,r=void 0===n?{}:n,i=e.options,s=void 0===i?{}:i;return(s.paragraph?"\n":"")+(s.indent?"\t":"")+("<"+t+o.attributesToString(r)+">")+(s.paragraph?"\n":"")},o.closeHtmlTag=function(e){var t=e.name,n=e.options,o=void 0===n?{}:n;return"</"+t+">"+(o.newLineAfter?"\n":"")+(o.paragraph?"\n\n":"")},o.onClickBold=function(){o.insertHtmlTag({name:"strong"})},o.onClickItalic=function(){o.insertHtmlTag({name:"em"})},o.onClickLink=function(e,t){t?o.insertHtmlTagWithText({name:"a",attributes:e,options:{text:t}}):(o.insertHtmlTagOpenClose({name:"a",attributes:e}),o.setCursorPosition(o.props.content.selectionEnd,-4))},o.onClickQuote=function(){o.insertHtmlTag({name:"blockquote",options:{paragraph:!0}})},o.onClickDelete=function(){var e=o.props.moment().format();o.insertHtmlTag({name:"del",attributes:{datetime:e}})},o.onClickInsert=function(){var e=o.props.moment().format();o.insertHtmlTag({name:"ins",attributes:{datetime:e}})},o.onClickImage=function(e){o.insertHtmlTagSelfClosed({name:"img",attributes:e})},o.onClickUnorderedList=function(){o.insertHtmlTag({name:"ul",options:{paragraph:!0}})},o.onClickOrderedList=function(){o.insertHtmlTag({name:"ol",options:{paragraph:!0}})},o.onClickListItem=function(){o.insertHtmlTag({name:"li",options:{indent:!0,newLineAfter:!0}})},o.onClickCode=function(){o.insertHtmlTag({name:"code"})},o.onClickMore=function(){o.insertCustomContent("<!--more-->",{paragraph:!0})},o.onClickCloseTags=function(){var e=(0,b.reduce)(o.state.openTags,function(e,t){return o.closeHtmlTag({name:t})+e},"");o.insertCustomContent(e),o.setState({openTags:[]})},o.onInsertMedia=function(e){o.insertCustomContent(e)},o.onInsertContactForm=function(){o.insertCustomContent((0,S.serialize)(o.props.contactForm),{paragraph:!0}),o.closeContactFormDialog()},o.openImageDialog=function(){o.setState({showImageDialog:!0})},o.closeImageDialog=function(){o.setState({showImageDialog:!1})},o.openLinkDialog=function(){var e=o.splitEditorContent(),t=e.inner;o.setState({selectedText:t,showLinkDialog:!0})},o.closeLinkDialog=function(){o.setState({showLinkDialog:!1})},o.toggleInsertContentMenu=function(){o.setState({showInsertContentMenu:!o.state.showInsertContentMenu})},o.openContactFormDialog=function(){o.setState({contactFormDialogTab:"fields",showContactFormDialog:!0,showInsertContentMenu:!1})},o.toggleContactFormDialogTab=function(){o.setState({contactFormDialogTab:"fields"===o.state.contactFormDialogTab?"settings":"fields"})},o.closeContactFormDialog=function(){o.setState({showContactFormDialog:!1})},o.openMediaModal=function(){o.setState({showInsertContentMenu:!1,showMediaModal:!0,source:""})},o.openGoogleModal=function(){o.setState({showInsertContentMenu:!1,showMediaModal:!0,source:"google_photos"})},o.closeMediaModal=function(){o.setState({showMediaModal:!1})},o.openSimplePaymentsDialog=function(){o.setState({simplePaymentsDialogTab:"addNew",showSimplePaymentsDialog:!0,showInsertContentMenu:!1})},o.closeSimplePaymentsDialog=function(){o.setState({showSimplePaymentsDialog:!1})},o.changeSimplePaymentsDialogTab=function(e){o.setState({simplePaymentsDialogTab:e})},o.insertSimplePayment=function(e){o.insertCustomContent((0,k.serialize)(e),{paragraph:!0}),o.closeSimplePaymentsDialog()},o.onFilesDrop=function(){var e=o.props.site,t=R.default.getAll(e.ID),n=1===t.length&&"image"===M.default.getMimePrefix(t[0]);n&&!O.default.hasErrors(e.ID)?(t[0].transient&&L.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),o.onInsertMedia(z.default.get(e,t[0])),P.default.setLibrarySelectedItems(e.ID,[])):o.openMediaModal()},o.isTagOpen=function(e){return-1!==o.state.openTags.indexOf(e)},o.renderAddEverythingDropdown=function(){var e=o.props.translate,t=(0,C.default)("editor-html-toolbar__insert-content-dropdown",{"is-visible":o.state.showInsertContentMenu});return h.default.createElement("div",{className:t},h.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:o.openMediaModal},h.default.createElement(E.default,{icon:"add-image"}),h.default.createElement("span",{"data-e2e-insert-type":"media"},e("Media"))),re.default.isEnabled("external-media")&&h.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:o.openGoogleModal},h.default.createElement(E.default,{icon:"add-image"}),h.default.createElement("span",{"data-e2e-insert-type":"google-media"},e("Media from Google"))),h.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:o.openContactFormDialog},h.default.createElement(E.default,{icon:"mention"}),h.default.createElement("span",{"data-e2e-insert-type":"contact-form"},e("Contact Form"))),re.default.isEnabled("simple-payments")&&h.default.createElement("div",{className:"editor-html-toolbar__insert-content-dropdown-item",onClick:o.openSimplePaymentsDialog},h.default.createElement(E.default,{icon:"money"}),h.default.createElement("span",{"data-e2e-insert-type":"payment-button"},e("Payment Button"))))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.pinToolbarOnScroll=(0,b.throttle)(this.pinToolbarOnScroll,50),this.hideToolbarFadeOnFullScroll=(0,b.throttle)(this.hideToolbarFadeOnFullScroll,200),this.onWindowResize=(0,b.throttle)(this.onWindowResize,400),window.addEventListener("scroll",this.pinToolbarOnScroll),window.addEventListener("resize",this.onWindowResize),this.buttons.addEventListener("scroll",this.hideToolbarFadeOnFullScroll),document.addEventListener("click",this.clickOutsideInsertContentMenu),this.toggleToolbarScrollableOnResize()}},{key:"componentWillUnmount",value:function(){this.pinToolbarOnScroll.cancel(),this.onWindowResize.cancel(),this.hideToolbarFadeOnFullScroll.cancel(),window.removeEventListener("scroll",this.pinToolbarOnScroll),window.removeEventListener("resize",this.onWindowResize),this.buttons.removeEventListener("scroll",this.hideToolbarFadeOnFullScroll),document.removeEventListener("click",this.clickOutsideInsertContentMenu)}},{key:"splitEditorContent",value:function(){var e=this.props.content,t=e.selectionEnd,n=e.selectionStart,o=e.value;return{before:o.substring(0,n),inner:o.substring(n,t),after:o.substring(t,o.length)}}},{key:"setCursorPosition",value:function(e,t){this.props.content.selectionEnd=this.props.content.selectionStart=e+t}},{key:"insertEditorContent",value:function(e,t,n){var o=this.props,r=o.content,i=o.onToolbarChangeContent;r.focus(),document.execCommand("insertText",!1,t),i(e+t+n)}},{key:"updateEditorContentFirefox",value:function(e,t,n){var o=e+t+n,r=this.props,i=r.content,s=r.content,a=s.selectionEnd,l=s.value,u=r.onToolbarChangeContent;this.props.content.value=o,i.focus(),document.execCommand("insertText",!1,t),u(o),this.setCursorPosition(a,o.length-l.length),this.props.content.focus()}},{key:"updateEditorContentIE11",value:function(e,t,n){var o=e+t+n,r=this.props,i=r.content,s=i.selectionEnd,a=i.value,l=r.onToolbarChangeContent;this.props.content.value=o,l(o),this.setCursorPosition(s,o.length-a.length)}},{key:"insertHtmlTagOpen",value:function(e){var t=this.state.openTags,n=this.splitEditorContent(),o=n.before,r=n.after;this.updateEditorContent(o,this.openHtmlTag(e),r),this.setState({openTags:t.concat(e.name)})}},{key:"insertHtmlTagClose",value:function(e){var t=this.state.openTags,n=this.splitEditorContent(),o=n.before,r=n.after;this.updateEditorContent(o,this.closeHtmlTag(e),r),this.setState({openTags:t.filter(function(t){return t!==e.name})})}},{key:"insertHtmlTagOpenClose",value:function(e){var t=this.splitEditorContent(),n=t.before,o=t.inner,r=t.after;this.updateEditorContent(n,this.openHtmlTag(e)+o+this.closeHtmlTag(e),r)}},{key:"insertHtmlTagSelfClosed",value:function(e){var t=this.splitEditorContent(),n=t.before,o=t.inner,r=t.after,i="<"+e.name+this.attributesToString(e.attributes)+" />",s=e.options&&e.options.paragraph?"\n"+i+"\n\n":i;this.updateEditorContent(n,o+s,r)}},{key:"insertHtmlTagWithText",value:function(e){var t=this.splitEditorContent(),n=t.before,o=t.after;this.updateEditorContent(n,this.openHtmlTag(e)+e.options.text+this.closeHtmlTag(e),o)}},{key:"insertCustomContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.splitEditorContent(),o=n.before,r=n.inner,i=n.after,s=t.paragraph?"\n":"";this.updateEditorContent(o,r+s+e+s+s,i)}},{key:"insertHtmlTag",value:function(e){var t=this.props.content,n=t.selectionEnd,o=t.selectionStart;n===o?this.isTagOpen(e.name)?this.insertHtmlTagClose(e):this.insertHtmlTagOpen(e):this.insertHtmlTagOpenClose(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.site,o=t.translate,r=(0,C.default)("editor-html-toolbar",{"is-pinned":this.state.isPinned,"is-scrollable":this.state.isScrollable,"is-scrolled-full":this.state.isScrolledFull,"has-active-drop-zone":this.props.isDropZoneVisible}),i={strong:{label:"b",onClick:this.onClickBold},em:{label:"i",onClick:this.onClickItalic},a:{label:"link",onClick:this.openLinkDialog},blockquote:{label:"b-quote",onClick:this.onClickQuote},del:{onClick:this.onClickDelete},ins:{onClick:this.onClickInsert},img:{onClick:this.openImageDialog},ul:{onClick:this.onClickUnorderedList},ol:{onClick:this.onClickOrderedList},li:{onClick:this.onClickListItem},code:{onClick:this.onClickCode},more:{onClick:this.onClickMore},"close-tags":{disabled:!this.state.openTags.length,label:o("close tags"),onClick:this.onClickCloseTags}};return h.default.createElement("div",{className:r},h.default.createElement("div",{className:"editor-html-toolbar__wrapper"},h.default.createElement("div",{className:"editor-html-toolbar__wrapper-buttons"},h.default.createElement("div",{className:"editor-html-toolbar__buttons",ref:this.bindButtonsRef},h.default.createElement("div",{className:"editor-html-toolbar__button-insert-content",ref:this.bindInsertContentButtonsRef},h.default.createElement($.default,{borderless:!0,className:"editor-html-toolbar__button-insert-content-dropdown",compact:!0,onClick:this.toggleInsertContentMenu},h.default.createElement(E.default,{icon:"add-outline"}),h.default.createElement("span",null,o("Add")))),(0,b.map)(i,function(t,n){var o=t.disabled,r=t.label,i=t.onClick;return h.default.createElement($.default,{borderless:!0,className:"editor-html-toolbar__button-"+n+" "+(e.isTagOpen(n)?"is-tag-open":""),compact:!0,disabled:o,key:n,onClick:i},r||n)})),this.renderAddEverythingDropdown())),h.default.createElement(V.default,{onClose:this.closeImageDialog,onInsert:this.onClickImage,shouldDisplay:this.state.showImageDialog}),h.default.createElement(G.default,{onClose:this.closeLinkDialog,onInsert:this.onClickLink,selectedText:this.state.selectedText,shouldDisplay:this.state.showLinkDialog}),h.default.createElement(J.default,{activeTab:this.state.contactFormDialogTab,isEdit:!1,onChangeTabs:this.toggleContactFormDialogTab,onClose:this.closeContactFormDialog,onFieldAdd:this.props.fieldAdd,onFieldRemove:this.props.fieldRemove,onFieldUpdate:this.props.fieldUpdate,onInsert:this.onInsertContactForm,onSettingsUpdate:this.props.settingsUpdate,showDialog:this.state.showContactFormDialog}),h.default.createElement(ee.default,{onClose:this.closeMediaModal,onInsertMedia:this.onInsertMedia,visible:this.state.showMediaModal,source:this.state.source}),h.default.createElement(ne.default,{onAddMedia:this.onFilesDrop,site:n,fullScreen:!1}),h.default.createElement(se.default,{showDialog:this.state.showSimplePaymentsDialog,activeTab:this.state.simplePaymentsDialogTab,isEdit:!1,onClose:this.closeSimplePaymentsDialog,onChangeTabs:this.changeSimplePaymentsDialogTab,onInsert:this.insertSimplePayment}))}}]),t}(m.Component);le.propTypes={contactForm:v.default.object,content:v.default.object,fieldAdd:v.default.func,fieldRemove:v.default.func,fieldUpdate:v.default.func,isDropZoneVisible:v.default.bool.isRequired,moment:v.default.func,onToolbarChangeContent:v.default.func,settingsUpdate:v.default.func,site:v.default.object,translate:v.default.func};var ue=function(e){return{contactForm:(0,b.get)(e,"ui.editor.contactForm",{}),isDropZoneVisible:(0,X.default)(e),site:(0,U.getSelectedSite)(e)}},de={fieldAdd:H.fieldAdd,fieldRemove:H.fieldRemove,fieldUpdate:H.fieldUpdate,settingsUpdate:H.settingsUpdate};t.default=(0,y.connect)(ue,de)((0,_.localize)(le))},"./client/post-editor/editor-media-advanced/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-dom/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/i18n-calypso/index.js"),E=n("./client/post-editor/media-modal/markup.js"),w=o(E),S=n("./client/components/button/index.jsx"),k=o(S),T=n("./client/components/dialog/index.jsx"),P=o(T),I=n("./client/components/forms/form-fieldset/index.jsx"),R=o(I),N=n("./client/components/forms/form-label/index.jsx"),M=o(N),D=n("./client/components/forms/form-text-input/index.jsx"),O=o(D),A=n("./client/state/ui/selectors.js"),L=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments));return e.save=e.save.bind(e),e}return(0,h.default)(t,e),(0,c.default)(t,[{key:"save",value:function(){var e=this.props.item,t=e.media,n=e.appearance,o=w.default.get(this.props.selectedSite,(0,i.default)({},t,{alt:x.default.findDOMNode(this.refs.alt).value}),n);this.props.insertMedia(o)}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.visible,o=e.item,r=e.onClose,i=[b.default.createElement(k.default,{primary:!0,onClick:this.save},t("Save"))];return b.default.createElement(P.default,{isVisible:n,buttons:i,onClose:r},b.default.createElement("form",{onSubmit:this.save},b.default.createElement(R.default,null,b.default.createElement(M.default,null,t("Alt text"),b.default.createElement(O.default,{ref:"alt",defaultValue:o.media.alt})))))}}]),t}(y.Component);L.propTypes={translate:v.default.func,visible:v.default.bool,item:v.default.object,onClose:v.default.func,insertMedia:v.default.func},L.defaultProps={onClose:function(){},insertMedia:function(){}},t.default=(0,C.connect)(function(e){return{selectedSite:(0,A.getSelectedSite)(e)}})((0,j.localize)(L)),e.exports=t.default},"./client/post-editor/editor-media-modal/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./client/components/data/media-library-selected-data/index.jsx"),j=o(C),E=n("./client/post-editor/media-modal/index.jsx"),w=o(E),S=n("./client/lib/posts/actions.js"),k=o(S),T=n("./client/lib/media/utils.js"),P=n("./client/post-editor/media-modal/markup.js"),I=o(P),R=n("./client/state/analytics/actions.js"),N=n("./client/state/ui/selectors.js"),M=function(e){
function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.onClose=function(e){e?o.insertMedia(e):o.props.onClose()},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"insertMedia",value:function(e){var t=e.type,n=e.items,o=e.settings,r=this.props.site,i=void 0,s=void 0,a=(0,x.partial)(I.default.get,r);switch(t){case"gallery":i="individual"===(0,x.get)(o,"type")?(0,x.map)(o.items,a).join(""):(0,T.generateGalleryShortcode)(o),s="insert_gallery";break;case"media":default:i=(0,x.map)(n,a).join(""),s="insert_item"}(0,x.some)(n,"transient")&&k.default.blockSave("MEDIA_MODAL_TRANSIENT_INSERT"),i&&(this.props.onInsertMedia(i),s&&this.props.bumpStat("editor_media_actions",s)),this.props.onClose()}},{key:"render",value:function(){var e=this.props.site;return b.default.createElement(j.default,{siteId:(0,x.get)(e,"ID")},b.default.createElement(w.default,(0,i.default)({},this.props,{onClose:this.onClose})))}}]),t}(y.Component);M.propTypes={site:v.default.object,onInsertMedia:v.default.func,onClose:v.default.func},M.defaultProps={onInsertMedia:function(){},onClose:function(){}},t.default=(0,_.connect)(function(e){return{site:(0,N.getSelectedSite)(e)}},{bumpStat:R.bumpStat})(M),e.exports=t.default},"./client/post-editor/editor-more-options/copy-post.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/page/index.js"),x=o(_),C=n("./node_modules/gridicons/build/index.js"),j=o(C),E=n("./client/state/sites/selectors.js"),w=n("./client/state/ui/selectors.js"),S=n("./client/state/posts/selectors.js"),k=n("./client/state/ui/editor/selectors.js"),T=n("./client/components/accordion/section.jsx"),P=o(T),I=n("./client/components/button/index.jsx"),R=o(I),N=n("./client/components/dialog/index.jsx"),M=o(N),D=n("./client/post-editor/editor-drawer/label.jsx"),O=o(D),A=n("./client/components/forms/form-section-heading/index.jsx"),L=o(A),B=n("./client/my-sites/post-selector/index.jsx"),F=o(B),z=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={selectedPostId:null,showDialog:!1},o.isPost=function(){return"post"===o.props.type},o.openDialog=function(e){e.preventDefault(),o.setState({showDialog:!0})},o.closeDialog=function(){o.setState({selectedPostId:null,showDialog:!1})},o.setPostToCopy=function(e){o.setState({selectedPostId:e.ID})},o.goToNewDraft=function(){var e=o.props,t=e.siteSlug,n=e.type,r=o.state.selectedPostId;""!==r&&(x.default.redirect("/"+n+"/"+t+"?copy="+r),o.closeDialog())},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.translate,o=e.type,r=this.state,i=r.selectedPostId,s=r.showDialog,a=[{action:"cancel",label:n("Cancel")},{action:"copy",label:n("Overwrite"),isPrimary:!0,disabled:!i,onClick:this.goToNewDraft}];return v.default.createElement(P.default,{className:"editor-more-options__copy-post"},v.default.createElement(O.default,{labelText:n(this.isPost()?"Copy Post":"Copy Page"),helpText:n(this.isPost()?"Pick a post and we'll copy the title, content, tags and categories.":"Pick a page and we'll copy the title and content.")},v.default.createElement(R.default,{borderless:!0,compact:!0,onClick:this.openDialog},v.default.createElement(j.default,{icon:"clipboard"}),n(this.isPost()?"Select a post to copy":"Select a page to copy"))),v.default.createElement(M.default,{autoFocus:!1,isVisible:s,buttons:a,onClose:this.closeDialog,additionalClassNames:"editor-more-options__copy-post-select-dialog"},v.default.createElement(L.default,null,n(this.isPost()?"Select a post to copy":"Select a page to copy")),v.default.createElement("p",null,n(this.isPost()?"Pick a post and we'll copy the title, content, tags and categories.":"Pick a page and we'll copy the title and content.")),t&&v.default.createElement(F.default,{emptyMessage:n(this.isPost()?"No posts found":"No pages found"),onChange:this.setPostToCopy,order:"DESC",orderBy:"date",selected:i,siteId:t,status:"draft,future,pending,private,publish",type:o})))}}]),t}(g.Component);z.propTypes={siteId:h.default.number,siteSlug:h.default.string,translate:h.default.func,type:h.default.oneOf(["page","post"]).isRequired},t.default=(0,y.connect)(function(e){var t=(0,k.getEditorPostId)(e),n=(0,w.getSelectedSiteId)(e),o=(0,S.getEditedPostValue)(e,n,t,"type");return{siteId:n,siteSlug:(0,E.getSiteSlug)(e,n),type:o}})((0,b.localize)(z)),e.exports=t.default},"./client/post-editor/editor-more-options/slug.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react-redux/es/index.js"),_=n("./client/post-editor/editor-drawer/label.jsx"),x=o(_),C=n("./client/components/accordion/section.jsx"),j=o(C),E=n("./client/post-editor/editor-slug/index.jsx"),w=o(E),S=n("./client/state/ui/selectors.js"),k=n("./client/state/ui/editor/selectors.js"),T=n("./client/state/posts/selectors.js"),P=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getPopoverLabel",value:function(){var e=this.props,t=e.translate,n=e.postType;return t("page"===n?"The slug is the URL-friendly version of the page title.":"The slug is the URL-friendly version of the post title.")}},{key:"render",value:function(){var e=this.props,t=e.postType,n=e.translate;return v.default.createElement(j.default,{className:"editor-more-options__slug"},v.default.createElement(x.default,{labelText:n("Slug"),helpText:this.getPopoverLabel()},v.default.createElement(w.default,{instanceName:t+"-sidebar",className:"editor-more-options__slug-field"})))}}]),t}(g.PureComponent);P.propTypes={postType:h.default.string,translate:h.default.func},t.default=(0,b.connect)(function(e){var t=(0,S.getSelectedSiteId)(e);return{postType:(0,T.getEditedPostValue)(e,t,(0,k.getEditorPostId)(e),"type")}})((0,y.localize)(P)),e.exports=t.default},"./client/post-editor/editor-notice/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorNotice=void 0;var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./client/components/notice/index.jsx"),w=o(E),S=n("./client/state/ui/selectors.js"),k=n("./client/state/ui/editor/selectors.js"),T=n("./client/state/posts/selectors.js"),P=n("./client/state/post-types/selectors.js"),I=n("./client/components/data/query-post-types/index.jsx"),R=o(I),N=n("./client/state/ui/layout-focus/actions.js"),M=n("./client/lib/viewport/index.js"),D=t.EditorNotice=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){(0,M.isMobile)()&&(!this.props.message&&e.message||!this.props.error&&e.error)&&this.props.setLayoutFocus("content")}},{key:"getErrorMessage",value:function(){var e=this.props,t=e.translate,n=e.error;if(n)switch(n.message){case"NO_CONTENT":return t("You haven't written anything yet!")}}},{key:"getText",value:function(e){var t=this.props,n=t.translate,o=t.type,r=t.typeObject,i=t.site,s=r&&r.labels.singular_name;switch(e){case"warnPublishDateChange":return n("Are you sure about that? If you change the date, existing links to your post will stop working.");case"publishFailure":return"page"===o?n("Publishing of page failed."):"post"!==o&&s?n("Publishing of %(typeLabel)s failed.",{args:{typeLabel:s}}):n("Publishing of post failed.");case"saveFailure":return n("Saving of draft failed.");case"trashFailure":return"page"===o?n("Trashing of page failed."):"post"!==o&&s?n("Trashing of %(typeLabel)s failed.",{args:{typeLabel:s}}):n("Trashing of post failed.");case"published":return i?"page"===o?n("Page published on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title),a:b.default.createElement("a",{href:"/page/"+i.slug})},comment:"Editor: Message displayed when a page is published, with a link to the site it was published on."}):"post"!==o&&s?n("%(typeLabel)s published on {{siteLink/}}!",{args:{typeLabel:s},components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post of a custom type is published, with a link to the site it was published on."}):n("Post published on {{siteLink/}}!",{components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post is published, with a link to the site it was published on."}):"page"===o?n("Page published!"):"post"!==o&&s?n("%(typeLabel)s published!",{args:{typeLabel:s}}):n("Post published!");case"scheduled":return i?"page"===o?n("Page scheduled on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title),a:b.default.createElement("a",{href:"/page/"+i.slug})},comment:"Editor: Message displayed when a page is scheduled, with a link to the site it was scheduled on."}):"post"!==o&&s?n("%(typeLabel)s scheduled on {{siteLink/}}!",{args:{typeLabel:s},components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post of a custom type is scheduled, with a link to the site it was scheduled on."}):n("Post scheduled on {{siteLink/}}!",{components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post is scheduled, with a link to the site it was scheduled on."}):"page"===o?n("Page scheduled!"):"post"!==o&&s?n("%(typeLabel)s scheduled!",{args:{typeLabel:s}}):n("Post scheduled!");case"publishedPrivately":return n("{{strong}}Published privately.{{/strong}} Only admins and editors can view.",{components:{strong:b.default.createElement("strong",null)},comment:"Editor: Message displayed when a post is published privately."});case"view":return"page"===o?n("View Page"):"post"!==o&&r?r.labels.view_item:n("View Post");case"preview":return n("View Preview");case"updated":return i?"page"===o?n("Page updated on {{siteLink/}}! {{a}}Add another page{{/a}}",{components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title),a:b.default.createElement("a",{href:"/page/"+i.slug})},comment:"Editor: Message displayed when a page is updated, with a link to the site it was updated on."}):"post"!==o&&s?n("%(typeLabel)s updated on {{siteLink/}}!",{args:{typeLabel:s},components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post of a custom type is updated, with a link to the site it was updated on."}):n("Post updated on {{siteLink/}}!",{components:{siteLink:b.default.createElement("a",{href:i.URL,target:"_blank",rel:"noopener noreferrer"},i.title)},comment:"Editor: Message displayed when a post is updated, with a link to the site it was updated on."}):"page"===o?n("Page updated!"):"post"!==o&&s?n("%(typeLabel)s updated!",{args:{typeLabel:s}}):n("Post updated!")}}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.message,o=e.status,r=e.onDismissClick,s=this.getErrorMessage()||this.getText(n);return b.default.createElement("div",{className:(0,j.default)("editor-notice",{"is-global":!0})},t&&b.default.createElement(R.default,{siteId:t}),s&&b.default.createElement(w.default,(0,i.default)({status:o,text:s,onDismissClick:r},{showDismiss:!0})))}}]),t}(y.Component);D.propTypes={translate:v.default.func,siteId:v.default.number,site:v.default.object,type:v.default.string,typeObject:v.default.object,message:v.default.string,status:v.default.string,onDismissClick:v.default.func,error:v.default.object},t.default=(0,_.connect)(function(e){var t=(0,S.getSelectedSiteId)(e),n=(0,T.getEditedPost)(e,t,(0,k.getEditorPostId)(e));return n?{siteId:t,site:(0,S.getSelectedSite)(e),type:n.type,typeObject:(0,P.getPostType)(e,t,n.type)}:{}},{setLayoutFocus:N.setLayoutFocus})((0,x.localize)(D))},"./client/post-editor/editor-page-order/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/components/accordion/section.jsx"),x=o(_),C=n("./client/components/forms/form-text-input/index.jsx"),j=o(C),E=n("./client/lib/posts/stats.js"),w=n("./client/state/ui/selectors.js"),S=n("./client/state/ui/editor/selectors.js"),k=n("./client/state/posts/selectors.js"),T=n("./client/state/posts/actions.js"),P=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.editMenuOrder=e.editMenuOrder.bind(e),e.statTracked=!1,e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"editMenuOrder",value:function(e){var t=this.props,n=t.menuOrder,o=t.siteId,r=t.postId,i=parseInt(e.target.value,10)||0;i!==n&&(this.statTracked||(this.statTracked=!0,(0,E.recordStat)("advanced_menu_order_changed"),(0,E.recordEvent)("Changed page menu order")),this.props.editPost(o,r,{menu_order:i}))}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.menuOrder;return v.default.createElement(x.default,{className:"editor-page-order"},v.default.createElement("label",null,v.default.createElement("span",{className:"editor-page-order__label-text"},t("Order",{context:"Editor: Field label for menu order."})),v.default.createElement(j.default,{type:"number",value:n,pattern:"[0-9]*",onChange:this.editMenuOrder,onBlur:this.editMenuOrder,className:"editor-page-order__input"})))}}]),t}(g.Component);P.propTypes={siteId:h.default.number,postId:h.default.number,menuOrder:h.default.number},P.defaultProps={menuOrder:0},t.default=(0,y.connect)(function(e){var t=(0,w.getSelectedSiteId)(e),n=(0,S.getEditorPostId)(e),o=(0,k.getEditedPostValue)(e,t,n,"menu_order");return{siteId:t,postId:n,menuOrder:o}},{editPost:T.editPost})((0,b.localize)(P)),e.exports=t.default},"./client/post-editor/editor-page-parent/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/my-sites/post-selector/index.jsx"),C=o(x),j=n("./client/components/forms/form-label/index.jsx"),E=o(j),w=n("./client/components/forms/form-toggle/compact.jsx"),S=o(w),k=n("./client/components/accordion/section.jsx"),T=o(k),P=n("./client/state/ui/selectors.js"),I=n("./client/state/ui/editor/selectors.js"),R=n("./client/state/posts/selectors.js"),N=n("./client/state/posts/actions.js"),M=n("./client/state/post-types/selectors.js"),D=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.boundUpdatePageParent=n.updatePageParent.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"updatePageParent",value:function(e){var t=this.props,n=t.siteId,o=t.postId,r=e&&e.ID?e.ID:null;this.props.editPost(n,o,{parent:r})}},{key:"render",value:function(){var e=this.props,t=e.parentId,n=e.translate,o=e.postId,r=e.siteId,i=e.postType,s=e.labels;return v.default.createElement(T.default,{className:"editor-page-parent"},v.default.createElement(E.default,null,v.default.createElement("span",{className:"editor-page-parent__label-text"},s.parent||n("Parent Page"))),v.default.createElement(E.default,{className:"editor-page-parent__top-level"},v.default.createElement("span",{className:"editor-page-parent__top-level-label"},n("Top level",{context:"Editor: Page being edited is top level i.e. has no parent"})),v.default.createElement(S.default,{checked:!t,onChange:this.boundUpdatePageParent,"aria-label":n("Toggle to set as top level")})),v.default.createElement(C.default,{type:i,siteId:r,onChange:this.boundUpdatePageParent,selected:t,excludeTree:o,emptyMessage:s.not_found||n("You have no other pages yet.")}))}}]),t}(g.Component);D.propTypes={siteId:h.default.number,postId:h.default.number,parentId:h.default.number,postType:h.default.string,translate:h.default.func,labels:h.default.object},t.default=(0,b.connect)(function(e){var t=(0,P.getSelectedSiteId)(e),n=(0,I.getEditorPostId)(e),o=(0,R.getEditedPostValue)(e,t,n,"type"),r=(0,R.getEditedPostValue)(e,t,n,"parent"),i=(0,_.get)(r,"ID",r)||0,s=(0,_.get)((0,M.getPostType)(e,t,o),"labels",{});return{siteId:t,postId:n,postType:o,parentId:i,labels:s}},{editPost:N.editPost})((0,y.localize)(D)),e.exports=t.default},"./client/post-editor/editor-page-slug/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/gridicons/build/index.js"),b=o(y),_=n("./client/post-editor/editor-slug/index.jsx"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return v.default.createElement(x.default,{path:this.props.path,instanceName:"page-permalink"},v.default.createElement(b.default,{icon:"link"}))}}]),t}(g.PureComponent);C.propTypes={path:h.default.string},t.default=C,e.exports=t.default},"./client/post-editor/editor-page-templates/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/i18n-calypso/index.js"),x=n("./client/components/data/query-page-templates/index.jsx"),C=o(x),j=n("./client/components/accordion/section.jsx"),E=o(j),w=n("./client/components/select-dropdown/index.jsx"),S=o(w),k=n("./client/components/select-dropdown/item.jsx"),T=o(k),P=n("./client/post-editor/editor-drawer/label.jsx"),I=o(P),R=n("./client/state/ui/selectors.js"),N=n("./client/state/ui/editor/selectors.js"),M=n("./client/state/posts/selectors.js"),D=n("./client/state/page-templates/selectors.js"),O=n("./client/state/sites/selectors.js"),A=n("./client/state/posts/actions.js"),L=n("./client/post-editor/editor-theme-help/index.jsx"),B=o(L),F=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.selectTemplate=e.selectTemplate.bind(e),e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"selectTemplate",value:function(e){var t=this.props,n=t.siteId,o=t.postId;this.props.editPost(n,o,{page_template:e})}},{key:"getSelectedTemplateText",value:function(){var e=this.props,t=e.templates,n=e.template,o=e.translate,r=void 0;return n&&(r=(0,b.find)(t,{file:n})),r?r.label:o("Default Template")}},{key:"getTemplates",value:function(){var e=this.props,t=e.translate,n=e.templates;return[{label:t("Default Template"),file:""}].concat(n||[])}},{key:"render",value:function(){var e=this,t=this.props,n=t.postType,o=t.template,r=t.siteId,i=t.translate,s=t.postId,a=t.pageForPostsId;if("page"!==n||s===a)return null;var l=this.getTemplates();return v.default.createElement("div",null,r&&v.default.createElement(C.default,{siteId:r}),(0,b.size)(l)>1&&v.default.createElement(E.default,null,v.default.createElement(I.default,{labelText:i("Page Template")},v.default.createElement(B.default,{className:"editor-page-templates__help-link"}),v.default.createElement(S.default,{selectedText:this.getSelectedTemplateText()},(0,b.map)(l,function(t){var n=t.file,r=t.label;return v.default.createElement(T.default,{key:n,selected:n===o,onClick:function(){return e.selectTemplate(n)}},r)})))))}}]),t}(g.Component);F.propTypes={siteId:h.default.number,postId:h.default.number,postType:h.default.string,template:h.default.string,templates:h.default.array,editPost:h.default.func,pageForPostsId:h.default.number},t.default=(0,y.connect)(function(e){var t=(0,R.getSelectedSiteId)(e),n=(0,N.getEditorPostId)(e),o=(0,M.getEditedPostValue)(e,t,n,"type"),r=(0,M.getEditedPostValue)(e,t,n,"page_template"),i=(0,D.getPageTemplates)(e,t),s=(0,O.getSiteOption)(e,t,"page_for_posts");return{siteId:t,postId:n,postType:o,template:r,templates:i,pageForPostsId:s}},{editPost:A.editPost})((0,_.localize)(F)),e.exports=t.default},"./client/post-editor/editor-permalink/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/gridicons/build/index.js"),E=o(j),w=n("./client/post-editor/editor-slug/index.jsx"),S=o(w),k=n("./client/components/popover/index.jsx"),T=o(k),P=n("./client/components/tooltip/index.jsx"),I=o(P),R=n("./client/components/forms/clipboard-button/index.jsx"),N=o(R),M=n("./client/state/ui/selectors.js"),D=n("./client/state/ui/editor/selectors.js"),O=n("./client/state/posts/selectors.js"),A=function(e){function t(){(0,u.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments));return e.showPopover=e.showPopover.bind(e),e.showTooltip=e.showTooltip.bind(e),e.onCopy=e.onCopy.bind(e),e.hideTooltip=e.hideTooltip.bind(e),e.closePopover=e.closePopover.bind(e),e.state={showPopover:!1,popoverVisible:!1,showCopyConfirmation:!1,tooltip:!1},e}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.showPopover!==t.showPopover&&this.setState({popoverVisible:this.state.showPopover})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.dismissCopyConfirmation)}},{key:"showPopover",value:function(){this.setState({showPopover:!this.state.showPopover,tooltip:!1})}},{key:"showTooltip",value:function(){this.state.showPopover||this.setState({tooltip:!0})}},{key:"onCopy",value:function(){var e=this;this.setState({showCopyConfirmation:!0}),clearTimeout(this.dismissCopyConfirmation),this.dismissCopyConfirmation=setTimeout(function(){e.setState({showCopyConfirmation:!1})},4e3)}},{key:"hideTooltip",value:function(){this.setState({tooltip:!1})}},{key:"closePopover",value:function(){this.setState({showPopover:!1})}},{key:"renderCopyButton",value:function(){if(this.state.popoverVisible){var e=this.props,t=e.path,n=e.slug,o=e.translate,r=void 0;return r=this.state.showCopyConfirmation?o("Copied!"):o("Copy",{context:"verb"}),b.default.createElement(N.default,{text:t+n,onCopy:this.onCopy,compact:!0},r)}}},{key:"render",value:function(){var e=this.props.translate,t=void 0;return t=e(this.props.isEditable?"Edit post URL":"View post URL"),b.default.createElement("div",{className:"editor-permalink",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},b.default.createElement(E.default,{className:"editor-permalink__toggle",icon:"link",onClick:this.showPopover,ref:"popoverButton"}),b.default.createElement(T.default,{isVisible:this.state.showPopover,onClose:this.closePopover,position:"bottom right",context:this.refs&&this.refs.popoverButton,className:"editor-permalink__popover"},b.default.createElement(S.default,(0,i.default)({},(0,_.pick)(this.props,"path","isEditable"),{onEscEnter:this.closePopover,instanceName:"post-popover"})),this.renderCopyButton()),b.default.createElement(I.default,{context:this.refs&&this.refs.popoverButton,isVisible:this.state.tooltip,position:"bottom"},t))}}]),t}(y.Component);A.propTypes={path:v.default.string,isEditable:v.default.bool,translate:v.default.func,slug:v.default.string},t.default=(0,C.connect)(function(e){var t=(0,M.getSelectedSiteId)(e),n=(0,D.getEditorPostId)(e);return{slug:(0,O.getEditedPostSlug)(e,t,n)}})((0,x.localize)(A)),e.exports=t.default},"./client/post-editor/editor-post-type-unsupported/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.types,o=e.type,r=e.typeObject,i=e.writePostPath,s=e.siteSlug;if(!n||!o||r)return null;var a=[l.default.createElement(y.default,{href:"/posts/"+s},t("Back to My Sites"))],u=(0,d.includes)(x,o),c=void 0;if(u){switch(o){case"jetpack-portfolio":c=t("Portfolios are not enabled. Open your site settings to activate them.");break;case"jetpack-testimonial":c=t("Testimonials are not enabled. Open your site settings to activate them.")}a.push(l.default.createElement(y.default,{href:"/settings/writing/"+s,primary:!0},t("Site Settings")))}else c=t("To use this post type, please check that your theme and site support it."),a.push(l.default.createElement(y.default,{href:i,primary:!0},t("Write a Blog Post")));return l.default.createElement(_.default,{isVisible:!0,buttons:a,className:"editor-post-type-unsupported"},l.default.createElement("h1",null,t("This post type is not supported")),l.default.createElement("p",null,c),l.default.createElement("p",null,t("For more information, visit our {{supportLink}}support page on custom content types{{/supportLink}}.",{components:{supportLink:l.default.createElement("a",{href:"https://support.wordpress.com/custom-post-types/"})}})))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/prop-types/index.js"),s=o(i),a=n("./node_modules/react/react.js"),l=o(a),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/i18n-calypso/index.js"),f=n("./client/state/ui/selectors.js"),p=n("./client/state/ui/editor/selectors.js"),m=n("./client/state/posts/selectors.js"),h=n("./client/state/post-types/selectors.js"),g=n("./client/state/sites/selectors.js"),v=n("./client/components/button/index.jsx"),y=o(v),b=n("./client/components/dialog/index.jsx"),_=o(b),x=["jetpack-portfolio","jetpack-testimonial"];r.propTypes={translate:s.default.func,types:s.default.object,type:s.default.string,typeObject:s.default.object,writePostPath:s.default.string,siteSlug:s.default.string},t.default=(0,u.connect)(function(e){var t=(0,f.getSelectedSiteId)(e),n=(0,m.getEditedPostValue)(e,t,(0,p.getEditorPostId)(e),"type");return{type:n,types:(0,h.getPostTypes)(e,t),typeObject:(0,h.getPostType)(e,t,n),writePostPath:(0,p.getEditorNewPostPath)(e,t),siteSlug:(0,g.getSiteSlug)(e,t)}})((0,c.localize)(r)),e.exports=t.default},"./client/post-editor/editor-post-type/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.typeSlug,r=e.type,i=e.globalId,s=e.isSettings,a=void 0;"page"===o?a=s?t("Page Settings"):t("Page",{context:"noun"}):"post"===o?a=s?t("Post Settings"):t("Post",{context:"noun"}):r?(a=s?t("%s: Settings",{args:r.labels.singular_name,comment:"type refers to a post type's singular noun"}):r.labels.singular_name,a=(0,x.decodeEntities)(a)):a=t("Loading…");var l=(0,f.default)("editor-post-type",{"is-loading":!a});return d.default.createElement("span",{className:l},n&&"page"!==o&&"post"!==o&&d.default.createElement(_.default,{siteId:n}),a," ",d.default.createElement(j.default,{globalId:i,showAll:!0,showIcon:!1}))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=o(i),a=n("./node_modules/prop-types/index.js"),l=o(a),u=n("./node_modules/react/react.js"),d=o(u),c=n("./node_modules/classnames/index.js"),f=o(c),p=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/i18n-calypso/index.js"),h=n("./client/state/posts/selectors.js"),g=n("./client/state/ui/selectors.js"),v=n("./client/state/ui/editor/selectors.js"),y=n("./client/state/post-types/selectors.js"),b=n("./client/components/data/query-post-types/index.jsx"),_=o(b),x=n("./client/lib/formatting/index.js"),C=n("./client/blocks/post-status/index.jsx"),j=o(C);
r.propTypes={translate:l.default.func,siteId:l.default.number,typeSlug:l.default.string,type:l.default.object,globalId:l.default.string,isSettings:l.default.bool},t.default=(0,p.connect)(function(e){var t={},n=(0,g.getSelectedSite)(e);if(!n)return t;t.siteId=n.ID;var o=(0,h.getEditedPost)(e,n.ID,(0,v.getEditorPostId)(e));return o?(0,s.default)(t,{typeSlug:o.type,type:(0,y.getPostType)(e,n.ID,o.type),globalId:o.global_ID}):t})((0,m.localize)(r)),e.exports=t.default},"./client/post-editor/editor-preview/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/url/url.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/i18n-calypso/index.js"),j=n("./client/lib/url/index.js"),E=n("./client/components/web-preview/index.jsx"),w=o(E),S=n("./client/components/web-preview/content.jsx"),k=o(S),T=n("./client/config/index.js"),P=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={iframeUrl:"about:blank"},o._hasTouch=!1,o.didStartSaving=function(e,t){return!(!e||!t)&&(t.isSaving&&!e.isSaving)},o.didFinishSaving=function(e){return e.isSaving&&!o.props.isSaving},o.didLoad=function(e){return e&&e.isLoading&&!o.props.isLoading},o.didShowSavedPreviewViaTouch=function(e){return o._hasTouch&&!e.showPreview&&o.props.showPreview&&!o.props.isSaving&&!o.props.isLoading},o.didShowOrHideFullPreview=function(e){return(0,T.isEnabled)("post-editor/preview-scroll-to-content")&&"about:blank"!==o.state.iframeUrl&&e.showPreview!==o.props.showPreview},o.getIframePreviewUrl=function(){var e=b.default.parse(o.props.previewUrl,!0);return e.query.preview="true",e.query.iframe="true",e.query.revision=String(o.props.revision),o.props.postId&&(0,T.isEnabled)("post-editor/preview-scroll-to-content")&&(o.props.showPreview?e.hash="post-"+o.props.postId:e.hash="__preview-hidden"),delete e.search,b.default.format(e)},o.cleanExternalUrl=function(e){return(0,j.omitUrlParams)(e,["iframe","frame-nonce"])},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidUpdate",value:function(e){this.didStartSaving(e,this.props)&&this.setState({iframeUrl:"about:blank"}),this.props.previewUrl&&(this.didFinishSaving(e)||this.didLoad(e)||this.didShowSavedPreviewViaTouch(e)||this.didShowOrHideFullPreview(e))&&this.setState({iframeUrl:this.getIframePreviewUrl()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyDown)}},{key:"render",value:function(){var e=this.props.isFullScreen,t=(0,x.default)("editor-preview",{"is-fullscreen":e});return v.default.createElement("div",{className:t},e?v.default.createElement(k.default,{showPreview:this.props.showPreview,showEdit:!0,showExternal:!0,showUrl:!0,defaultViewportDevice:this.props.defaultViewportDevice,onClose:this.props.onClose,onEdit:this.props.onEdit,previewUrl:this.state.iframeUrl,editUrl:this.props.editUrl,externalUrl:this.cleanExternalUrl(this.props.externalUrl),loadingMessage:this.props.translate("{{strong}}One moment, please.{{/strong}} We're loading your preview.",{components:{strong:v.default.createElement("strong",null)}})}):v.default.createElement(w.default,{showPreview:this.props.showPreview,defaultViewportDevice:this.props.defaultViewportDevice,onClose:this.props.onClose,previewUrl:this.state.iframeUrl,externalUrl:this.cleanExternalUrl(this.props.externalUrl)}))}}]),t}(v.default.Component);P.propTypes={showPreview:h.default.bool,isSaving:h.default.bool,isLoading:h.default.bool,isFullScreen:h.default.bool,previewUrl:h.default.string,editUrl:h.default.string,onClose:h.default.func,postId:h.default.number,revision:h.default.number},t.default=(0,C.localize)(P),e.exports=t.default},"./client/post-editor/editor-publish-button/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPublishButton=t.getPublishButtonStatus=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./client/lib/posts/stats.js"),_=n("./client/lib/posts/utils.js"),x=o(_),C=n("./client/lib/site/utils.js"),j=o(C),E=n("./client/components/button/index.jsx"),w=o(E),S=n("./node_modules/i18n-calypso/index.js"),k=n("./client/state/ui/selectors.js"),T=n("./client/state/ui/editor/selectors.js"),P=n("./client/state/posts/selectors.js"),I=t.getPublishButtonStatus=function(e,t,n){return x.default.isPublished(n)&&!x.default.isBackDatedPublished(n)&&!x.default.isFutureDated(t)||n&&"future"===n.status&&x.default.isFutureDated(t)?"update":x.default.isFutureDated(t)?"schedule":j.default.userCan("publish_posts",e)?"publish":n&&"pending"===n.status?"update":"requestReview"},R=t.EditorPublishButton=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"trackClick",value:function(){var e={update:"Clicked Update Post Button",schedule:"Clicked Schedule Post Button",requestReview:"Clicked Request-Review Post Button",publish:"Clicked Publish Post Button"},t={update:"Clicked Update Page Button",schedule:"Clicked Schedule Page Button",requestReview:"Clicked Request-Review Page Button",publish:"Clicked Publish Page Button"},n=I(this.props.site,this.props.post,this.props.savedPost),o=x.default.isPage(this.props.post)?t[n]:e[n];(0,b.recordEvent)(o),(0,b.recordEvent)("Clicked Primary Button")}},{key:"getButtonLabel",value:function(){switch(I(this.props.site,this.props.post,this.props.savedPost)){case"update":return this.props.translate("Update");case"schedule":return this.props.isConfirmationSidebarEnabled?this.props.translate("Schedule…",{comment:"Button label on the editor sidebar - a confirmation step will follow"}):this.props.translate("Schedule");case"publish":return this.props.isConfirmationSidebarEnabled?this.props.isPublishing?this.props.translate("Publishing…",{comment:"Button label on the editor sidebar while publishing is in progress"}):this.props.translate("Publish…",{comment:"Button label on the editor sidebar - a confirmation step will follow"}):this.props.translate("Publish");case"requestReview":return this.props.translate("Submit for Review")}}},{key:"onClick",value:function(){return this.trackClick(),x.default.isPublished(this.props.savedPost)&&!x.default.isBackDatedPublished(this.props.savedPost)?this.props.onSave():j.default.userCan("publish_posts",this.props.site)?this.props.onPublish():this.props.onSave("pending")}},{key:"isEnabled",value:function(){return!this.props.isPublishing&&!this.props.isSaveBlocked&&this.props.hasContent&&!this.props.needsVerification&&(!this.props.privatePost||this.props.privatePostPasswordValid)}},{key:"render",value:function(){return v.default.createElement(w.default,{className:"editor-publish-button",primary:!0,busy:this.props.busy,onClick:this.onClick,disabled:!this.isEnabled(),tabIndex:this.props.tabIndex},this.getButtonLabel())}}]),t}(g.Component);R.propTypes={site:h.default.object,post:h.default.object,savedPost:h.default.object,onSave:h.default.func,onPublish:h.default.func,tabIndex:h.default.number,isPublishing:h.default.bool,isSaveBlocked:h.default.bool,hasContent:h.default.bool,needsVerification:h.default.bool,privatePost:h.default.bool,privatePostPasswordValid:h.default.bool,busy:h.default.bool,isConfirmationSidebarEnabled:h.default.bool},t.default=(0,y.connect)(function(e){var t=(0,k.getSelectedSiteId)(e),n=(0,T.getEditorPostId)(e),o=(0,P.isEditedPostPrivate)(e,t,n),r=(0,P.isPrivateEditedPostPasswordValid)(e,t,n);return{privatePost:o,privatePostPasswordValid:r}})((0,S.localize)(R))},"./client/post-editor/editor-publish-date/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPublishDate=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-dom/index.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./node_modules/gridicons/build/index.js"),w=o(E),S=n("./node_modules/lodash/lodash.js"),k=n("./client/components/button/index.jsx"),T=o(k),P=n("./client/post-editor/editor-publish-date/post-scheduler.jsx"),I=o(P),R=n("./client/lib/posts/utils.js"),N=o(R),M=n("./client/state/ui/selectors.js"),D=t.EditorPublishDate=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.handleOutsideClick=function(e){var t="string"==typeof e.target.className?e.target.className.split(/\s/):[],o=(0,S.intersection)(t,["DayPicker-Day","date-picker__day"]).length>0,r=b.default.findDOMNode(n.refs.editorPublishDateWrapper).contains(e.target);o||r||n.setState({isOpen:!1})},n.setImmediate=function(){n.props.setPostDate(null),n.setState({isOpen:!1})},n.toggleOpenState=function(){n.setState({isOpen:!n.state.isOpen})},n.state={isOpen:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleOutsideClick)}},{key:"componentDidUpdate",value:function(){this.state.isOpen?window.addEventListener("click",this.handleOutsideClick):window.removeEventListener("click",this.handleOutsideClick)}},{key:"getHeaderDescription",value:function(){var e=N.default.isFutureDated(this.props.post),t=N.default.isBackDated(this.props.post),n=N.default.isPublished(this.props.post);return n&&e?this.props.translate("Scheduled"):e?this.props.translate("Schedule"):n?this.props.translate("Published"):t?this.props.translate("Backdate"):this.props.translate("Publish Immediately")}},{key:"renderCalendarHeader",value:function(){var e=N.default.isFutureDated(this.props.post),t=N.default.isBackDated(this.props.post),n=N.default.isPublished(this.props.post);if(!n)return e||t?v.default.createElement(T.default,{borderless:!0,className:"editor-publish-date__immediate",onClick:this.setImmediate},this.props.translate("Publish Immediately")):v.default.createElement("div",{className:"editor-publish-date__choose-header"},this.props.translate("Choose a date to schedule"))}},{key:"renderHeader",value:function(){var e=N.default.isFutureDated(this.props.post),t=N.default.isBackDated(this.props.post),n=N.default.isPublished(this.props.post),o=(0,j.default)("editor-publish-date__header",{"is-scheduled":e,"is-back-dated":t,"is-published":n}),r=this.props.post&&this.props.post.date?this.props.post.date:null;return v.default.createElement("div",{className:o,onClick:this.toggleOpenState},v.default.createElement(w.default,{className:"editor-publish-date__header-icon",icon:"calendar",size:18}),v.default.createElement("div",{className:"editor-publish-date__header-wrapper"},v.default.createElement("div",{className:"editor-publish-date__header-description"},this.getHeaderDescription()),(e||t||n)&&v.default.createElement("div",{className:"editor-publish-date__header-chrono"},this.props.moment(r).calendar())))}},{key:"renderSchedule",value:function(){var e=this.props.post&&this.props.post.date?this.props.post.date:null,t=N.default.isFutureDated(this.props.post),n=(0,j.default)("editor-publish-date__schedule",{"is-scheduled":t});return v.default.createElement("div",{className:n},this.renderCalendarHeader(),v.default.createElement(I.default,{post:this.props.post,site:this.props.site,initialDate:this.props.moment(),setPostDate:this.props.setPostDate,selectedDay:e}))}},{key:"render",value:function(){var e=(0,j.default)("editor-publish-date",{"is-open":this.state.isOpen});return v.default.createElement("div",{className:e},v.default.createElement("div",{className:"editor-publish-date__wrapper",ref:"editorPublishDateWrapper"},this.renderHeader(),this.state.isOpen&&this.renderSchedule()))}}]),t}(v.default.Component);D.propTypes={post:h.default.object,postDate:h.default.string,setPostDate:h.default.func},t.default=(0,_.connect)(function(e){return{site:(0,M.getSelectedSite)(e)}})((0,x.localize)(D))},"./client/post-editor/editor-publish-date/post-scheduler.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./client/components/post-schedule/index.jsx"),x=o(_),C=n("./client/components/data/query-posts/index.jsx"),j=o(C),E=n("./client/lib/posts/utils.js"),w=o(E),S=n("./client/lib/site/utils.js"),k=o(S),T=n("./client/state/posts/selectors.js"),P=(0,y.connect)(function(e,t){var n=t.site,o=t.query;return{posts:(0,T.getSitePostsForQueryIgnoringPage)(e,(0,b.get)(n,"ID"),o)||[]}})(function(e){var t=e.onDateChange,n=e.onMonthChange,o=e.posts,r=e.selectedDay,i=e.site;return h.default.createElement(x.default,{displayInputChrono:!1,selectedDay:r,onDateChange:t,onMonthChange:n,posts:o,site:i})}),I=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={firstDayOfTheMonth:o.getFirstDayOfTheMonth(o.props.initialDate),lastDayOfTheMonth:o.getLastDayOfTheMonth(o.props.initialDate)},o.setCurrentMonth=function(e){o.setState({firstDayOfTheMonth:o.getFirstDayOfTheMonth(e),lastDayOfTheMonth:o.getLastDayOfTheMonth(e)})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getFirstDayOfTheMonth",value:function(e){var t=k.default.timezone(this.props.site);return w.default.getOffsetDate(e,t).set({year:e.year(),month:e.month(),date:1,hours:0,minutes:0,seconds:0,milliseconds:0})}},{key:"getLastDayOfTheMonth",value:function(e){return this.getFirstDayOfTheMonth(e).add(1,"month").second(-1)}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.setPostDate,o=e.site,r={status:"publish,future",before:this.state.lastDayOfTheMonth.format(),after:this.state.firstDayOfTheMonth.format(),number:100};return h.default.createElement("div",null,!w.default.isPage(t)&&h.default.createElement(j.default,{siteId:(0,b.get)(o,"ID"),query:r}),h.default.createElement(P,{onDateChange:n,onMonthChange:this.setCurrentMonth,query:r,selectedDay:(0,b.get)(t,"date"),site:o}))}}]),t}(m.PureComponent);I.propTypes={initialDate:v.default.object.isRequired,post:v.default.object,setPostDate:v.default.func,site:v.default.object},t.default=I,e.exports=t.default},"./client/post-editor/editor-revisions-list/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/classnames/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/prop-types/index.js"),u=o(l),d=n("./node_modules/i18n-calypso/index.js"),c=function(e){var t=e.numRevisions,n=e.translate,o=(0,i.default)("editor-revisions-list__header",{"editor-revisions-list__loading-placeholder":!t});return a.default.createElement("div",{className:o},!!t&&n("%(revisions)d revision","%(revisions)d revisions",{count:t,args:{revisions:t}}))};c.propTypes={numRevisions:u.default.number.isRequired,translate:u.default.func.isRequired},t.default=(0,d.localize)(c),e.exports=t.default},"./client/post-editor/editor-revisions-list/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/lodash/lodash.js"),E=n("./client/post-editor/editor-revisions-list/header.jsx"),w=o(E),S=n("./client/post-editor/editor-revisions-list/item.jsx"),k=o(S),T=n("./client/state/posts/revisions/actions.js"),P=n("./client/state/selectors/get-post-revision.js"),I=o(P),R=n("./client/state/selectors/get-post-revisions-selected-revision-id.js"),N=o(R),M=n("./client/lib/keyboard-shortcuts/index.js"),D=o(M),O=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.trySelectingTimeout=null,o.trySelectingFirstRevision=function(){var e=o.props.revisions;if(e.length){var t=(0,j.head)(e);t.id&&o.props.selectPostRevision(t.id)}},o.selectNextRevision=function(){var e=o.props.nextRevisionId;e&&o.props.selectPostRevision(e)},o.selectPreviousRevision=function(){var e=o.props.prevRevisionId;e&&o.props.selectPostRevision(e)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.selectedRevisionId;this.trySelectingTimeout||t&&this.props.selectedRevisionId||(this.trySelectingTimeout=setTimeout(this.trySelectingFirstRevision,300))}},{key:"componentDidMount",value:function(){window.scrollTo(0,0),D.default.on("move-selection-up",this.selectNextRevision),D.default.on("move-selection-down",this.selectPreviousRevision)}},{key:"componentWillUnmount",value:function(){D.default.off("move-selection-up",this.selectNextRevision),D.default.off("move-selection-down",this.selectPreviousRevision)}},{key:"componentDidUpdate",value:function(){this.scrollToSelectedItem()}},{key:"scrollToSelectedItem",value:function(){var e=h.default.findDOMNode(this),t=e.querySelector(".editor-revisions-list__scroller"),n=e.querySelector(".editor-revisions-list__revision.is-selected"),o=e.querySelector(".editor-revisions-list__list");if(t&&n&&o){var r=n.getBoundingClientRect(),i=r.bottom,s=r.top,a=o.getBoundingClientRect(),l=a.top,u=t.getBoundingClientRect(),d=u.bottom,c=u.height,f=u.top,p=s<f,m=i>d,g=s-l,v=Math.abs(c-(i-l));p&&t.scrollTo(0,g),m&&t.scrollTo(0,v)}}},{key:"render",value:function(){var e=this.props,t=e.revisions,n=e.selectedRevisionId,o=e.siteId;return v.default.createElement("div",{className:"editor-revisions-list"},v.default.createElement(w.default,{numRevisions:t.length}),v.default.createElement("div",{className:"editor-revisions-list__scroller"},v.default.createElement("ul",{className:"editor-revisions-list__list"},(0,j.map)(t,function(e){var t=(0,x.default)("editor-revisions-list__revision",{"is-selected":e.id===n});return v.default.createElement("li",{className:t,key:e.id},v.default.createElement(k.default,{revision:e,siteId:o}))}))))}}]),t}(g.PureComponent);O.propTypes={postId:b.default.number,siteId:b.default.number,revisions:b.default.array.isRequired,selectedRevisionId:b.default.number},t.default=(0,C.connect)(function(e,t){var n=t.revisions,o=(0,N.default)(e),r=(0,j.findIndex)(n,{id:o}),i=o&&(0,j.get)(n,[r-1,"id"]),s=o&&(0,j.get)(n,[r+1,"id"]);return{selectedRevision:(0,I.default)(e,o),nextRevisionId:i,prevRevisionId:s,selectedRevisionId:o}},{selectPostRevision:T.selectPostRevision})(O),e.exports=t.default},"./client/post-editor/editor-revisions-list/item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/state/posts/revisions/actions.js"),C=n("./client/state/sites/selectors.js"),j=n("./client/components/time-since/index.jsx"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.selectRevision=function(){o.props.selectPostRevision(o.props.revision.id)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.revision,n=e.isMultiUserSite,o=e.translate,r=(0,_.get)(t,"author.display_name"),i=(0,_.get)(t,"changes.added"),s=(0,_.get)(t,"changes.removed");return h.default.createElement("button",{className:"editor-revisions-list__button",onClick:this.selectRevision,type:"button"},h.default.createElement("span",{className:"editor-revisions-list__date"},h.default.createElement(E.default,{date:t.date})),r&&n&&h.default.createElement("span",{className:"editor-revisions-list__author"},r),h.default.createElement("div",{className:"editor-revisions-list__changes"},i>0&&h.default.createElement("span",{className:"editor-revisions-list__additions","aria-label":o("%(changes)d word added","%(changes)d words added",{args:{changes:i},count:i})},h.default.createElement("b",null,"+"),i),s>0&&h.default.createElement("span",{className:"editor-revisions-list__deletions","aria-label":o("%(changes)d word removed","%(changes)d words removed",{args:{changes:s},count:s})},h.default.createElement("b",null,"-"),s),0===i&&0===s&&h.default.createElement("span",{className:"editor-revisions-list__minor-changes"},o("minor",{context:"post revisions: minor changes"}))))}}]),t}(m.PureComponent);w.propTypes={revision:y.default.object.isRequired,siteId:y.default.number.isRequired,isMultiUserSite:y.default.bool.isRequired,selectPostRevision:y.default.func.isRequired,translate:y.default.func.isRequired},t.default=(0,_.flow)(b.localize,(0,g.connect)(function(e,t){var n=t.siteId;return{isMultiUserSite:!(0,C.isSingleUserSite)(e,n)}},{selectPostRevision:x.selectPostRevision}))(w),e.exports=t.default},"./client/post-editor/editor-revisions/dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/typeof.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/prop-types/index.js"),_=o(b),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/lodash/lodash.js"),j=n("./client/state/selectors/get-post-revisions-selected-revision.js"),E=o(j),w=n("./client/state/selectors/is-post-revisions-dialog-visible.js"),S=o(w),k=n("./client/state/ui/editor/selectors.js"),T=n("./client/state/ui/selectors.js"),P=n("./client/state/analytics/actions.js"),I=n("./client/state/posts/revisions/actions.js"),R=n("./client/post-editor/editor-revisions/index.jsx"),N=o(R),M=n("./client/components/dialog/index.jsx"),D=o(M),O=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.onLoadClick=function(){var e=o.props,t=e.loadRevision,n=e.revision,r=e.closeDialog;t(n),r(),o.props.recordTracksEvent("calypso_editor_post_revisions_load_revision")},o.dialogButtons=function(){var e=o.props,t=e.postId,n=e.revision,r=e.siteId,i=e.translate;return[{action:"cancel",compact:!0,label:i("Cancel")},{action:"load",compact:!0,disabled:!(n&&t&&r),isPrimary:!0,label:i("Load",{context:"Load revision in editor"}),onClick:o.onLoadClick}]},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.toggleBodyClass({isVisible:this.props.isVisible})}},{key:"componentWillUpdate",value:function(e){var t=e.isVisible;this.toggleBodyClass({isVisible:t})}},{key:"toggleBodyClass",value:function(e){var t=e.isVisible;if("object"===("undefined"==typeof document?"undefined":(0,i.default)(document))&&(0,C.get)(document,"body.classList")){var n="showing-post-revisions-dialog";t?document.body.classList.add(n):document.body.classList.remove(n)}}},{key:"componentDidMount",value:function(){this.props.recordTracksEvent("calypso_editor_post_revisions_open")}},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.onClose;return v.default.createElement(D.default,{buttons:this.dialogButtons(),className:"editor-revisions__dialog",isVisible:t,onClose:n},v.default.createElement(N.default,null))}}]),t}(g.PureComponent);O.propTypes={loadRevision:_.default.func.isRequired,onClose:_.default.func,isVisible:_.default.bool.isRequired,closeDialog:_.default.func.isRequired,recordTracksEvent:_.default.func.isRequired,translate:_.default.func.isRequired},O.defaultProps={onClose:C.noop},t.default=(0,C.flow)(x.localize,(0,y.connect)(function(e){return{isVisible:(0,S.default)(e),postId:(0,k.getEditorPostId)(e),revision:(0,E.default)(e),siteId:(0,T.getSelectedSiteId)(e)}},{recordTracksEvent:P.recordTracksEvent,closeDialog:I.closePostRevisionsDialog}))(O),e.exports=t.default},"./client/post-editor/editor-revisions/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/inherits.js"),c=o(d),f=n("./node_modules/react/react.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/lodash/lodash.js"),b=n("./client/state/ui/editor/selectors.js"),_=n("./client/state/selectors/get-post-revisions.js"),x=o(_),C=n("./client/state/selectors/get-post-revisions-authors-id.js"),j=o(C),E=n("./client/state/selectors/get-post-revisions-selected-revision-id.js"),w=o(E),S=n("./client/state/ui/selectors.js"),k=n("./client/post-editor/editor-diff-viewer/index.jsx"),T=o(k),P=n("./client/post-editor/editor-revisions-list/index.jsx"),I=o(P),R=n("./client/components/data/query-post-revisions/index.jsx"),N=o(R),M=n("./client/components/data/query-users/index.jsx"),D=o(M),O=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,u.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.render=function(){var e=o.props,t=e.authorsIds,n=e.postId,r=e.revisions,i=e.selectedRevisionId,s=e.siteId;return p.default.createElement("div",{className:"editor-revisions__wrapper"},p.default.createElement(N.default,{postId:n,siteId:s,selectedRevisionId:i}),p.default.createElement(D.default,{siteId:s,userIds:t}),p.default.createElement(T.default,{postId:n,selectedRevisionId:i,siteId:s}),p.default.createElement(I.default,{postId:n,revisions:r,siteId:s}))},r=n,(0,u.default)(o,r)}return(0,c.default)(t,e),t}(f.Component);O.propTypes={authorsIds:h.default.array.isRequired,postId:h.default.number.isRequired,revisions:h.default.array.isRequired,selectedRevisionId:h.default.number,siteId:h.default.number.isRequired,translate:h.default.func.isRequired},t.default=(0,y.flow)(g.localize,(0,v.connect)(function(e){var t=(0,b.getEditorPostId)(e),n=(0,S.getSelectedSiteId)(e);return{authorsIds:(0,j.default)(e,n,t),postId:t,revisions:(0,x.default)(e,n,t,"display"),selectedRevisionId:(0,w.default)(e),siteId:n}}))(O),e.exports=t.default},"./client/post-editor/editor-revisions/legacy-link.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/gridicons/build/index.js"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.adminUrl,n=e.translate,o=e.revisionsFromPostObj,r=(0,b.get)(o,0,0);if(!t||!r)return null;var i=t+"revision.php?revision="+r;return h.default.createElement("a",{className:"editor-revisions__wpadmin-link",href:i,target:"_blank",rel:"noopener noreferrer","aria-label":n("Open list of revisions")},h.default.createElement(x.default,{icon:"history",size:18}),n("%(revisions)d revision","%(revisions)d revisions",{count:o.length,args:{revisions:o.length}}))}}]),t}(m.PureComponent);C.propTypes={adminUrl:v.default.string,revisionsFromPostObj:v.default.array,translate:v.default.func},C.defaultProps={revisionsFromPostObj:[]},t.default=(0,y.localize)(C),e.exports=t.default},"./client/post-editor/editor-sidebar/header.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),s=n("./node_modules/prop-types/index.js"),a=o(s),l=n("./node_modules/i18n-calypso/index.js"),u=n("./node_modules/gridicons/build/index.js"),d=o(u),c=n("./client/state/ui/editor/sidebar/constants.js"),f=n("./client/components/button/index.jsx"),p=o(f),m=n("./client/post-editor/editor-post-type/index.jsx"),h=o(m),g=function(e){
var t=e.nestedSidebar,n=void 0===t?c.NESTED_SIDEBAR_NONE:t,o=e.closeSidebar,r=e.translate;return i.default.createElement("div",{className:"editor-sidebar__header"},n===c.NESTED_SIDEBAR_REVISIONS&&i.default.createElement("span",null,i.default.createElement(p.default,{borderless:!0,className:"editor-sidebar__header-title",onClick:o,title:r("Close sidebar")},i.default.createElement(h.default,{isSettings:!0})),i.default.createElement("span",null,"→ ",r("Revisions"))),n===c.NESTED_SIDEBAR_NONE&&i.default.createElement(h.default,{isSettings:!0}),i.default.createElement(p.default,{compact:!0,borderless:!0,className:"editor-sidebar__back",onClick:o,title:r("Close sidebar")},i.default.createElement(d.default,{icon:"cross"})))};g.propTypes={translate:a.default.func.isRequired,closeSidebar:a.default.func,nestedSidebar:a.default.oneOf([c.NESTED_SIDEBAR_NONE,c.NESTED_SIDEBAR_REVISIONS])},t.default=(0,l.localize)(g),e.exports=t.default},"./client/post-editor/editor-sidebar/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorSidebar=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/react-redux/es/index.js"),v=n("./node_modules/prop-types/index.js"),y=o(v),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./client/state/ui/editor/sidebar/constants.js"),C=n("./client/state/ui/editor/sidebar/actions.js"),j=n("./client/state/ui/editor/sidebar/selectors.js"),E=n("./client/post-editor/editor-drawer/index.jsx"),w=o(E),S=n("./client/post-editor/editor-sidebar/header.jsx"),k=o(S),T=n("./client/layout/sidebar/footer.jsx"),P=o(T),I=n("./client/layout/sidebar/region.jsx"),R=o(I),N=n("./client/post-editor/editor-action-bar/index.jsx"),M=o(N),D=n("./client/post-editor/editor-delete-post/index.jsx"),O=o(D),A=t.EditorSidebar=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.closeSidebar=function(){o.props.nestedSidebarTarget!==x.NESTED_SIDEBAR_NONE?o.props.setNestedSidebar(x.NESTED_SIDEBAR_NONE):o.props.closeEditorSidebar()},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isNew,n=e.onTrashingPost,o=e.onPublish,r=e.onSave,i=e.post,s=e.savedPost,a=e.site,l=e.setPostDate,u=e.isPostPrivate,d=e.confirmationSidebarStatus,c=e.nestedSidebarTarget,f=e.setNestedSidebar,p=(0,_.default)("editor-sidebar",{"is-nested-sidebar-focused":c!==x.NESTED_SIDEBAR_NONE});return h.default.createElement("div",{className:p},h.default.createElement(k.default,{nestedSidebar:c,closeSidebar:this.closeSidebar}),h.default.createElement(M.default,{isNew:t,post:i,savedPost:s,site:a}),h.default.createElement(R.default,{className:"editor-sidebar__parent-region"},h.default.createElement(w.default,{site:a,savedPost:s,post:i,isNew:t,setPostDate:l,onPrivatePublish:o,onSave:r,isPostPrivate:u,confirmationSidebarStatus:d,setNestedSidebar:f})),h.default.createElement(P.default,null,c===x.NESTED_SIDEBAR_NONE&&h.default.createElement(O.default,{post:i,onTrashingPost:n})))}}]),t}(m.Component);A.propTypes={savedPost:y.default.object,post:y.default.object,isNew:y.default.bool,onSave:y.default.func,onPublish:y.default.func,onTrashingPost:y.default.func,site:y.default.object,toggleSidebar:y.default.func,type:y.default.string,setPostDate:y.default.func,isPostPrivate:y.default.bool,confirmationSidebarStatus:y.default.string,setNestedSidebar:y.default.func},t.default=(0,g.connect)(function(e){return{nestedSidebarTarget:(0,j.getNestedSidebarTarget)(e)}},{setNestedSidebar:C.setNestedSidebar,closeEditorSidebar:C.closeEditorSidebar})(A)},"./client/post-editor/editor-slug/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/i18n-calypso/index.js"),C=n("./node_modules/classnames/index.js"),j=o(C),E=n("./client/components/track-input-changes/index.jsx"),w=o(E),S=n("./client/components/forms/form-text-input/index.jsx"),k=o(S),T=n("./client/lib/posts/stats.js"),P=n("./client/state/ui/selectors.js"),I=n("./client/state/ui/editor/selectors.js"),R=n("./client/state/posts/selectors.js"),N=n("./client/state/posts/actions.js"),M=function(e){function t(){(0,a.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments));return e.state={isSlugFocused:!1},e.onSlugKeyDown=e.onSlugKeyDown.bind(e),e.onSlugChange=e.onSlugChange.bind(e),e.onBlur=e.onBlur.bind(e),e.onFocus=e.onFocus.bind(e),e.focusSlug=e.focusSlug.bind(e),e.recordChangeStats=e.recordChangeStats.bind(e),e.statTracked=!1,e}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onSlugChange",value:function(e){var t=this.props,n=t.siteId,o=t.postId;this.props.editPost(n,o,{slug:e.target.value})}},{key:"onSlugKeyDown",value:function(e){if("Enter"===e.key||"Escape"===e.key){var t=this.props,n=t.onEscEnter,o=t.isEditable;this.setState({isSlugFocused:!1},function(){n(),o&&h.default.findDOMNode(this.refs.slugField).blur()})}}},{key:"onBlur",value:function(){this.state.isSlugFocused&&this.setState({isSlugFocused:!1})}},{key:"onFocus",value:function(){this.setState({isSlugFocused:!0})}},{key:"focusSlug",value:function(){this.props.isEditable&&h.default.findDOMNode(this.refs.slugField).focus()}},{key:"recordChangeStats",value:function(){switch(this.props.instanceName){case"post-sidebar":(0,T.recordStat)("slug-edited-post-sidebar"),(0,T.recordEvent)("Slug Edited (Post Sidebar)");break;case"post-popover":(0,T.recordStat)("slug-edited-post-popover"),(0,T.recordEvent)("Slug Edited (Post Permalink Popover)");break;case"page-sidebar":(0,T.recordStat)("slug-edited-page-sidebar"),(0,T.recordEvent)("Slug Edited (Page Sidebar)");break;case"page-permalink":(0,T.recordStat)("slug-edited-page-permalink"),(0,T.recordEvent)("Slug Edited (Page Permalink)")}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.translate,o=e.slug,r=e.children,i=e.path,s=e.isEditable,a=(0,j.default)("editor-slug",t,{"is-focused":this.state.isSlugFocused});return b.default.createElement("div",{className:a,onClick:this.focusSlug},r,b.default.createElement("span",{className:"editor-slug__url-path",onClick:this.focusSlug},i),s&&b.default.createElement(w.default,{onNewValue:this.recordChangeStats},b.default.createElement(k.default,{ref:"slugField",value:o,onChange:this.onSlugChange,onKeyDown:this.onSlugKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,"aria-label":n("Enter slug")})))}}]),t}(y.Component);M.propTypes={path:v.default.string,slug:v.default.string,onEscEnter:v.default.func,className:v.default.string,isEditable:v.default.bool,instanceName:v.default.string,translate:v.default.func,siteId:v.default.number,postId:v.default.number},M.defaultProps={onEscEnter:function(){},isEditable:!0,slug:""},t.default=(0,_.connect)(function(e){var t=(0,P.getSelectedSiteId)(e),n=(0,I.getEditorPostId)(e),o=(0,R.getEditedPostSlug)(e,t,n);return{siteId:t,postId:n,slug:o}},{editPost:N.editPost})((0,x.localize)(M)),e.exports=t.default},"./client/post-editor/editor-status-label/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./client/lib/posts/utils.js"),E=o(j),w=n("./client/post-editor/editor-status-label/placeholder.jsx"),S=o(w),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={currentTime:Date.now()},o.renderLabel=function(){var e,t=o.props.post,n=o.props.moment(E.default.getEditedTime(t));if(!t.modified)return o.props.translate("New Draft");"draft"===t.status&&n.isAfter(o.state.currentTime)&&(n=o.props.moment(o.state.currentTime));var r=n.from(o.state.currentTime);switch(t.status){case"publish":e=o.props.translate("{{strong}}Published{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:r},components:{strong:y.default.createElement("strong",null)}});break;case"private":e=o.props.translate("{{strong}}Published Privately{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:r},components:{strong:y.default.createElement("strong",null)}});break;case"draft":e=o.props.translate("{{strong}}Saved{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:r},components:{strong:y.default.createElement("strong",null)}});break;case"pending":e=o.props.translate("{{strong}}Pending Review{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:r},components:{strong:y.default.createElement("strong",null)}});break;case"future":e=o.props.translate("{{strong}}Scheduled{{/strong}} %(relativeTimeFromNow)s",{args:{relativeTimeFromNow:r},components:{strong:y.default.createElement("strong",null)}});break;case"trash":e=o.props.translate("{{strong}}Trashed{{/strong}}",{components:{strong:y.default.createElement("strong",null)}});break;default:e=""}return e},o.updateCurrentTime=function(){o.setState({currentTime:Date.now()})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.currentTimeTimer=setInterval(this.updateCurrentTime,6e4)}},{key:"componentWillReceiveProps",value:function(e){e.post!==this.props.post&&this.updateCurrentTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.currentTimeTimer)}},{key:"render",value:function(){var e="editor-status-label";return this.props.post?(e=(0,_.default)(e,"is-"+this.props.post.status),this.props.onClick?y.default.createElement("button",{className:e,onClick:this.props.onClick,ref:"statusLabel","aria-label":this.props.translate("Show advanced status details"),"aria-pressed":!!this.props.advancedStatus,role:"alert","aria-live":"polite"},y.default.createElement(C.default,{icon:"cog",size:18}),this.renderLabel()):y.default.createElement("span",{className:(0,_.default)(e,"is-plain")},this.renderLabel())):y.default.createElement(S.default,{className:e})}}]),t}(y.default.PureComponent);k.displayName="StatusLabel",k.propTypes={onClick:h.default.func,post:h.default.object,advancedStatus:h.default.bool},k.defaultProps={onClick:null,post:null,advancedStatus:!1},t.default=(0,g.localize)(k),e.exports=t.default},"./client/post-editor/editor-status-label/placeholder.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.translate,n=e.siteId,o=e.typeSlug,r=e.type,i=e.className,s=(0,p.default)("editor-status-label__placeholder",i),a=void 0;return a="post"===o?t("Loading Post…"):"page"===o?t("Loading Page…"):r?t("Loading %(postType)s…",{args:{postType:(0,b.decodeEntities)(r.labels.singular_name)}}):t("Loading…"),d.default.createElement("button",{className:s},"post"!==o&&"page"!==o&&n&&d.default.createElement(x.default,{siteId:n}),d.default.createElement("strong",null,a))}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/assign.js"),s=o(i),a=n("./node_modules/prop-types/index.js"),l=o(a),u=n("./node_modules/react/react.js"),d=o(u),c=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/classnames/index.js"),p=o(f),m=n("./node_modules/i18n-calypso/index.js"),h=n("./client/state/posts/selectors.js"),g=n("./client/state/post-types/selectors.js"),v=n("./client/state/ui/editor/selectors.js"),y=n("./client/state/ui/selectors.js"),b=n("./client/lib/formatting/index.js"),_=n("./client/components/data/query-post-types/index.jsx"),x=o(_);r.propTypes={translate:l.default.func,siteId:l.default.number,typeSlug:l.default.string,type:l.default.object,className:l.default.string},t.default=(0,c.connect)(function(e){var t=(0,y.getSelectedSiteId)(e),n={siteId:t},o=(0,h.getEditedPost)(e,t,(0,v.getEditorPostId)(e));return o?(0,s.default)(n,{typeSlug:o.type,type:(0,g.getPostType)(e,t,o.type)}):n})((0,m.localize)(r)),e.exports=t.default},"./client/post-editor/editor-sticky/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/react-redux/es/index.js"),C=n("./node_modules/gridicons/build/index.js"),j=o(C),E=n("./client/components/tooltip/index.jsx"),w=o(E),S=n("./client/components/button/index.jsx"),k=o(S),T=n("./client/lib/posts/stats.js"),P=n("./client/state/posts/actions.js"),I=n("./client/state/ui/selectors.js"),R=n("./client/state/ui/editor/selectors.js"),N=n("./client/state/posts/selectors.js"),M=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={tooltip:!1},o.toggleStickyStatus=function(){var e=void 0,t=void 0;o.props.sticky?(e="advanced_sticky_disabled_toolbar",t="Off"):(e="advanced_sticky_enabled_toolbar",t="On"),(0,T.recordStat)(e),(0,T.recordEvent)("Changed Sticky Setting",t),o.props.editPost(o.props.siteId,o.props.postId,{sticky:!o.props.sticky}),o.setState({tooltip:!1})},o.enableTooltip=function(){o.setState({tooltip:!0})},o.disableTooltip=function(){o.setState({tooltip:!1})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,_.default)("editor-sticky",{"is-sticky":this.props.sticky});return y.default.createElement(k.default,{borderless:!0,className:e,onClick:this.toggleStickyStatus,onMouseEnter:this.enableTooltip,onMouseLeave:this.disableTooltip,"aria-label":this.props.translate("Stick post to the front page"),ref:"stickyPostButton"},y.default.createElement(j.default,{icon:"bookmark"}),this.props.sticky&&y.default.createElement(w.default,{className:"editor-sticky__tooltip",context:this.refs&&this.refs.stickyPostButton,isVisible:this.state.tooltip,position:"bottom left"},y.default.createElement("span",null,this.props.translate("Marked as sticky"))))}}]),t}(y.default.Component);M.displayName="EditorSticky",M.propTypes={postId:h.default.number,siteId:h.default.number,sticky:h.default.bool},t.default=(0,x.connect)(function(e){var t=(0,R.getEditorPostId)(e),n=(0,I.getSelectedSiteId)(e),o=(0,N.getEditedPostValue)(e,n,t,"sticky");return{postId:t,siteId:n,sticky:o}},{editPost:P.editPost})((0,g.localize)(M)),e.exports=t.default},"./client/post-editor/editor-term-selector/add-term.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/gridicons/build/index.js"),j=o(C),E=n("./client/components/button/index.jsx"),w=o(E),S=n("./client/blocks/term-form-dialog/index.jsx"),k=o(S),T=n("./client/state/ui/selectors.js"),P=n("./client/state/ui/editor/selectors.js"),I=n("./client/state/posts/selectors.js"),R=n("./client/state/post-types/taxonomies/selectors.js"),N=n("./client/state/terms/selectors.js"),M=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.openDialog=function(e){e.preventDefault(),n.setState({showDialog:!0})},n.closeDialog=function(){n.setState({showDialog:!1})},n.state={showDialog:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.labels,n=e.onSuccess,o=e.type,r=e.terms,i=e.taxonomy,s=r?r.length:0,a=(0,b.default)("editor-term-selector__add-term",{"is-compact":s<8});return v.default.createElement("div",{className:a},v.default.createElement(w.default,{borderless:!0,compact:!0,onClick:this.openDialog},v.default.createElement(j.default,{icon:"folder"})," ",t.add_new_item),v.default.createElement(k.default,{showDialog:this.state.showDialog,onClose:this.closeDialog,postType:o,taxonomy:i,onSuccess:n}))}}]),t}(g.Component);M.propTypes={labels:h.default.object,onSuccess:h.default.func,taxonomy:h.default.string,terms:h.default.array,type:h.default.string},M.defaultProps={onSuccess:x.noop},t.default=(0,_.connect)(function(e,t){var n=t.taxonomy,o=(0,T.getSelectedSiteId)(e),r=(0,P.getEditorPostId)(e),i=(0,I.getEditedPostValue)(e,o,r,"type"),s=(0,R.getPostTypeTaxonomy)(e,o,i,n),a=(0,x.get)(s,"labels",{});return{terms:(0,N.getTerms)(e,o,n),labels:a,type:i}})(M),e.exports=t.default},"./client/post-editor/editor-term-selector/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/react-redux/es/index.js"),x=n("./node_modules/lodash/lodash.js"),C=n("./client/blocks/term-tree-selector/index.jsx"),j=o(C),E=n("./client/post-editor/editor-term-selector/add-term.jsx"),w=o(E),S=n("./client/state/selectors/can-current-user.js"),k=o(S),T=n("./client/state/posts/actions.js"),P=n("./client/state/ui/selectors.js"),I=n("./client/state/ui/editor/selectors.js"),R=n("./client/state/posts/selectors.js"),N=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onAddTerm=function(e){var t=n.props,o=t.postId,r=t.taxonomyName,i=t.siteId;n.props.addTermForPost(i,r,e,o)},n.boundOnTermsChange=n.onTermsChange.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"onTermsChange",value:function(e){var t=this.props,n=t.postTerms,o=t.taxonomyName,r=t.siteId,s=t.postId,a=(0,x.cloneDeep)(n)||{},l=(0,x.toArray)(a[o]),u=(0,x.findIndex)(l,{ID:e.ID});u!==-1?l.splice(u,1):l.push(e),this.props.editPost(r,s,{terms:(0,i.default)({},o,l)})}},{key:"getSelectedTermIds",value:function(){var e=this.props,t=e.postTerms,n=e.taxonomyName,o=t?t[n]:[];return(0,x.map)(o,"ID")}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.taxonomyName,o=e.canEditTerms,r=e.compact;return b.default.createElement("div",null,b.default.createElement(j.default,{analyticsPrefix:"Editor",onChange:this.boundOnTermsChange,selected:this.getSelectedTermIds(),taxonomy:n,siteId:t,multiple:!0,compact:r}),o&&b.default.createElement(w.default,{taxonomy:n,onSuccess:this.onAddTerm}))}}]),t}(y.Component);N.propTypes={siteId:v.default.number,postId:v.default.number,postTerms:v.default.object,taxonomyName:v.default.string,canEditTerms:v.default.bool,compact:v.default.bool},t.default=(0,_.connect)(function(e){var t=(0,P.getSelectedSiteId)(e),n=(0,I.getEditorPostId)(e);return{postTerms:(0,R.getEditedPostValue)(e,t,n,"terms"),canEditTerms:(0,k.default)(e,t,"manage_categories"),siteId:t,postId:n}},{editPost:T.editPost,addTermForPost:T.addTermForPost})(N),e.exports=t.default},"./client/post-editor/editor-theme-help/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./client/state/ui/selectors.js"),x=n("./client/state/sites/selectors.js"),C=n("./client/lib/posts/stats.js"),j=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.recordClick=n.recordClick.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"recordClick",value:function(){(0,C.recordStat)("clicked_theme_help_link")}},{key:"render",value:function(){var e=this.props,t=e.translate,n=e.themeHelpPath,o=e.className;return n?v.default.createElement("a",{className:o,href:n,onClick:this.recordClick},t("Need help setting up your site?")):null}}]),t}(g.PureComponent);j.propTypes={themeHelpPath:h.default.string,classname:h.default.string},t.default=(0,y.connect)(function(e){var t=(0,_.getSelectedSiteId)(e);return{themeHelpPath:(0,x.getSiteThemeShowcasePath)(e,t)}})((0,b.localize)(j)),e.exports=t.default},"./client/post-editor/editor-title/index.jsx":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r(i),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=r(a),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=r(u),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=r(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),m=r(p),h=n("./node_modules/prop-types/index.js"),g=r(h),v=n("./node_modules/react/react.js"),y=r(v),b=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/react-dom/index.js"),x=r(_),C=n("./node_modules/classnames/index.js"),j=r(C),E=n("./node_modules/i18n-calypso/index.js"),w=n("./client/lib/posts/utils.js"),S=r(w),k=n("./client/post-editor/editor-permalink/index.jsx"),T=r(k),P=n("./client/components/track-input-changes/index.jsx"),I=r(P),R=n("./client/components/textarea-autosize/index.jsx"),N=r(R),M=n("./client/lib/viewport/index.js"),D=n("./client/lib/posts/stats.js"),O=o(D),A=n("./client/state/ui/selectors.js"),L=n("./client/state/selectors/are-site-permalinks-editable.js"),B=r(L),F=n("./client/state/ui/editor/selectors.js"),z=n("./client/state/posts/selectors.js"),U=n("./client/state/posts/actions.js"),H=/[\r\n]+/g,W=function(e){function t(){var e,n,o,r;(0,l.default)(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=o=(0,f.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(a))),o.onChange=function(e){var t=o.props,n=t.siteId,r=t.editedPostId,i=e.target.value.replace(H," ");o.props.editPost(n,r,{title:i}),o.props.onChange(i)},o.resizeAfterNewlineInput=function(e){var t=e.target.value;H.test(t)&&(e.target.value=t.replace(H," "),o.refs.titleInput.resize())},o.recordChangeStats=function(){var e=S.default.isPage(o.props.post);O.recordStat(e?"page_title_changed":"post_title_changed"),O.recordEvent(e?"Changed Page Title":"Changed Post Title")},r=n,(0,f.default)(o,r)}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(e){if(!(0,M.isMobile)()){var t=this.props,n=t.isNew,o=t.siteId;if(n&&!e.isNew||n&&e.siteId!==o){var r=x.default.findDOMNode(this.refs.titleInput);r.focus()}}}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.isPermalinkEditable,o=e.isNew,r=e.tabIndex,i=e.translate,s=(0,j.default)("editor-title",{"is-loading":!t});return y.default.createElement("div",{className:s},t&&t.ID&&!S.default.isPage(t)&&y.default.createElement(T.default,{path:n?S.default.getPermalinkBasePath(t):t.URL,isEditable:n}),y.default.createElement(I.default,{onNewValue:this.recordChangeStats},y.default.createElement(N.default,{tabIndex:r,className:"editor-title__input",placeholder:i("Title"),onChange:this.onChange,onInput:this.resizeAfterNewlineInput,onBlur:this.onBlur,autoFocus:o&&!(0,M.isMobile)(),value:t&&t.title?t.title:"","aria-label":i("Edit title"),ref:"titleInput",rows:"1"})))}}]),t}(v.Component);W.propTypes={editPost:g.default.func,isNew:g.default.bool,onChange:g.default.func,post:g.default.object,site:g.default.object,siteId:g.default.number,tabIndex:g.default.number,translate:g.default.func},W.defaultProps={isNew:!0,onChange:function(){}},t.default=(0,b.connect)(function(e){var t=(0,A.getSelectedSiteId)(e),n=(0,B.default)(e,t),o=(0,F.getEditorPostId)(e),r=(0,z.getEditedPost)(e,t,o),i=(0,F.isEditorNewPost)(e);return{editedPostId:o,isPermalinkEditable:n,isNew:i,post:r,siteId:t}},{editPost:U.editPost})((0,E.localize)(W)),e.exports=t.default},"./client/post-editor/editor-visibility/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react-dom/index.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/react/react.js"),b=o(y),_=n("./node_modules/lodash/lodash.js"),x=n("./node_modules/classnames/index.js"),C=o(x),j=n("./node_modules/gridicons/build/index.js"),E=o(j),w=n("./node_modules/react-redux/es/index.js"),S=n("./node_modules/i18n-calypso/index.js"),k=n("./client/components/forms/form-fieldset/index.jsx"),T=o(k),P=n("./client/components/forms/form-input-validation/index.jsx"),I=o(P),R=n("./client/components/forms/form-text-input/index.jsx"),N=o(R),M=n("./client/components/select-dropdown/index.jsx"),D=o(M),O=n("./client/components/select-dropdown/item.jsx"),A=o(O),L=n("./client/lib/touch-detect/index.js"),B=o(L),F=n("./client/lib/posts/actions.js"),z=o(F),U=n("./client/lib/posts/stats.js"),H=n("./client/lib/analytics/index.js"),W=n("./client/lib/accept/index.js"),V=o(W),q=n("./client/state/posts/actions.js"),G=n("./client/state/ui/selectors.js"),K=n("./client/state/ui/editor/selectors.js"),$=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={passwordIsValid:!0},o.showingAcceptDialog=!1,o.getVisibility=function(){return o.props.password?"password":"private"===o.props.status?"private":"public"},o.isPasswordValid=function(){if("password"!==o.getVisibility())return!0;var e=h.default.findDOMNode(o.refs.postPassword).value.trim();return e.length},o.updatePostStatus=function(){var e="draft"===o.props.status?"draft":"publish",t={status:e};z.default.edit(t)},o.recordStats=function(e){o.getVisibility()!==e&&((0,U.recordStat)("visibility-set-"+e),(0,U.recordEvent)("Changed visibility",e),H.tracks.recordEvent("calypso_editor_visibility_set",{context:o.props.context,visibility:e}))},o.updateVisibility=function(e){var t=o.props,n=t.siteId,r=t.postId,i=void 0;switch(e){case"public":i={password:""};break;case"password":i={password:o.props.savedPassword||" ",sticky:!1},o.setState({passwordIsValid:!0})}o.recordStats(e),o.updatePostStatus(),i&&o.props.editPost(n,r,i)},o.setPostToPrivate=function(){var e=o.props,t=e.siteId,n=e.postId;z.default.edit({status:"private"}),o.props.editPost(t,n,{password:"",sticky:!1}),o.recordStats("private")},o.onPrivatePublish=function(){o.setPostToPrivate(),setTimeout(function(){return o.props.onPrivatePublish(!0)},0)},o.onSetToPrivate=function(){if("private"===o.props.savedStatus)return void o.setPostToPrivate();o.showingAcceptDialog=!0;var e=void 0;e="page"===o.props.type?o.props.translate("Private pages are only visible to administrators and editors of this site. Would you like to privately publish this page now?"):o.props.translate("Private posts are only visible to administrators and editors of this site. Would you like to privately publish this post now?"),(0,V.default)(e,function(e){o.showingAcceptDialog=!1,e&&o.onPrivatePublish()},o.props.translate("Yes"),o.props.translate("No"))},o.onPasswordChange=function(e){var t=o.props,n=t.siteId,r=t.postId,i=e.target.value.trim(),s=i.length>0;o.setState({passwordIsValid:s}),s||(i=" "),o.props.editPost(n,r,{password:i})},o.renderPasswordInput=function(){var e=o.props.password?o.props.password.trim():null,t=!o.state.passwordIsValid,n=o.props.translate("Password is empty.",{context:"Editor: Error shown when password is empty."});return b.default.createElement("div",null,b.default.createElement(N.default,{autoFocus:!0,onKeyUp:o.onKey,onChange:o.onPasswordChange,onBlur:o.onPasswordChange,value:e,isError:t,ref:"postPassword",placeholder:o.props.translate("Create password",{context:"Editor: Create password for post"})}),t?b.default.createElement(I.default,{isError:!0,text:n}):null)},o.renderPrivacyDropdown=function(e){var t=o.props.translate("Public",{context:"Editor: Radio label to set post visible to public"}),n=o.props.translate("Site Members",{context:"Editor: Radio label to set post visible to public on a private site so that only site members can see it"}),r=[{label:o.props.isPrivateSite?n:t,icon:b.default.createElement(E.default,{icon:"globe",size:18}),value:"public",onClick:function(){o.updateVisibility("public")}},{label:o.props.translate("Admins and Editors",{context:"Editor: Radio label to set post to private so that only admins and editors can see it"
}),icon:b.default.createElement(E.default,{icon:"user",size:18}),value:"private",onClick:o.onSetToPrivate},{label:o.props.translate("Password Protected",{context:"Editor: Radio label to set post to password protected"}),icon:b.default.createElement(E.default,{icon:"lock",size:18}),value:"password",onClick:function(){o.updateVisibility("password")}}],i=(0,_.find)(r,["value",e]);return b.default.createElement("div",{className:"editor-visibility__dropdown"},b.default.createElement(T.default,{className:"editor-fieldset"},b.default.createElement(D.default,{selectedText:i?i.label:o.props.translate("Select an option"),selectedIcon:i.icon},r.map(function(t){return b.default.createElement(A.default,{selected:t.value===e,key:t.value,value:t.value,onClick:t.onClick,icon:t.icon},t.label)})),"password"===e?o.renderPasswordInput():null))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(this.props.password!==e.password){var t=this.props.password+"",n=e.password+"",o=""===t&&" "===n,r=n.trim().length>0,i=o||r;this.setState({passwordIsValid:i})}}},{key:"render",value:function(){var e=this.getVisibility(),t=(0,C.default)("editor-visibility",{"is-touch":B.default.hasTouch()});return b.default.createElement("div",{className:t},this.renderPrivacyDropdown(e))}}]),t}(b.default.Component);$.defaultProps={isPrivateSite:!1},$.propTypes={context:v.default.string,onPrivatePublish:v.default.func,isPrivateSite:v.default.bool,type:v.default.string,status:v.default.string,password:v.default.string,savedStatus:v.default.string,savedPassword:v.default.string,siteId:v.default.number,postId:v.default.number},t.default=(0,w.connect)(function(e){var t=(0,G.getSelectedSiteId)(e),n=(0,K.getEditorPostId)(e);return{siteId:t,postId:n}},{editPost:q.editPost})((0,S.localize)($)),e.exports=t.default},"./client/post-editor/editor-word-count/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorWordCount=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./client/lib/posts/post-edit-store.js"),_=o(b),x=n("./client/lib/user/index.js"),C=o(x),j=n("./client/lib/text-utils/index.js"),E=(0,C.default)(),w=t.EditorWordCount=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={rawContent:""},o.onRawContentChange=function(){o.setState({rawContent:_.default.getRawContent()})},o.getSelectedTextCount=function(){var e=(0,j.countWords)(o.props.selectedText);return e?o.props.translate("%(selectedText)s word selected {{span}}%(separator)s{{/span}}","%(selectedText)s words selected {{span}}%(separator)s{{/span}}",{count:e,args:{selectedText:e,separator:"/ "},components:{span:v.default.createElement("span",{className:"editor-word-count__separator"})}}):null},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){_.default.on("rawContentChange",this.onRawContentChange)}},{key:"componentDidMount",value:function(){this.onRawContentChange()}},{key:"componentWillUnmount",value:function(){_.default.removeListener("rawContentChange",this.onRawContentChange)}},{key:"render",value:function(){var e=E.get(),t=e&&e.localeSlug||"en";switch(t){case"ja":case"th":case"zh-cn":case"zh-hk":case"zh-sg":case"zh-tw":return null;case"ko":return null}var n=(0,j.countWords)(this.state.rawContent);return v.default.createElement("div",{className:"editor-word-count"},v.default.createElement("span",{className:"editor-word-count__is-selected-text"},v.default.createElement("strong",null,this.getSelectedTextCount())),this.props.translate("%d word","%d words",{count:n,args:[n]}))}}]),t}(g.PureComponent);w.propTypes={selectedText:h.default.string},t.default=(0,y.localize)(w)},"./client/post-editor/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,i.default)("/post",l.default.pressThis,s.siteSelection,s.sites),(0,i.default)("/post/new",function(){return i.default.redirect("/post")}),(0,i.default)("/post/:site?/:post?",s.siteSelection,l.default.post),i.default.exit("/post/:site?/:post?",l.default.exitPost),(0,i.default)("/page",s.siteSelection,s.sites),(0,i.default)("/page/new",function(){return i.default.redirect("/page")}),(0,i.default)("/page/:site?/:post?",s.siteSelection,l.default.post),i.default.exit("/page/:site?/:post?",l.default.exitPost),d.default.isEnabled("manage/custom-post-types")&&((0,i.default)("/edit/:type",s.siteSelection,s.sites),(0,i.default)("/edit/:type/new",function(e){return i.default.redirect("/edit/"+e.params.type)}),(0,i.default)("/edit/:type/:site?/:post?",s.siteSelection,l.default.post),i.default.exit("/edit/:type/:site?/:post?",l.default.exitPost))};var r=n("./node_modules/page/index.js"),i=o(r),s=n("./client/my-sites/controller.js"),a=n("./client/post-editor/controller.js"),l=o(a),u=n("./client/config/index.js"),d=o(u);e.exports=t.default},"./client/post-editor/invalid-url-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/lodash/lodash.js"),_=n("./node_modules/page/index.js"),x=o(_),C=n("./client/components/dialog/index.jsx"),j=o(C),E=n("./client/components/forms/form-button/index.jsx"),w=o(E),S=n("./client/lib/route/path.js"),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.isPage=function(){return(0,b.startsWith)(x.default.current,"/page/")},o.getDialogButtons=function(){var e=o.state.isPage?o.props.translate("New Page"):o.props.translate("New Post");return[y.default.createElement(w.default,{key:"startNewPage",isPrimary:!0,onClick:o.startNewPage},e),y.default.createElement(w.default,{key:"back",isPrimary:!1,onClick:o.props.onClose},o.props.translate("Close"))]},o.startNewPage=function(){var e=(0,S.getSiteFragment)(x.default.current),t=o.state.isPage?"/page/":"/post/";(0,x.default)(t+e)},o.getStrings=function(e){return e?{dialogTitle:o.props.translate("Invalid Page Address"),dialogContent:o.props.translate("This page cannot be found. Check the web address or start a new page.")}:{dialogTitle:o.props.translate("Invalid Post Address"),dialogContent:o.props.translate("This post cannot be found. Check the web address or start a new post.")}},o.state={isPage:o.isPage()},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.getStrings(this.state.isPage);return y.default.createElement(j.default,{isVisible:!0,buttons:this.getDialogButtons()},y.default.createElement("h1",null,e.dialogTitle),y.default.createElement("p",null,e.dialogContent))}}]),t}(y.default.Component);k.displayName="EditorTrashedDialog",k.defaultProps={onClose:b.noop,onSave:b.noop},k.propTypes={onClose:h.default.func,onSave:h.default.func},t.default=(0,g.localize)(k),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-fields.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/assign.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/react-dom/index.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/react/react.js"),j=o(C),E=n("./node_modules/lodash/lodash.js"),w=n("./node_modules/i18n-calypso/index.js"),S=n("./client/lib/analytics/index.js"),k=o(S),T=n("./client/lib/media/utils.js"),P=o(T),I=n("./client/lib/media/actions.js"),R=o(I),N=n("./client/components/clipboard-button-input/index.jsx"),M=o(N),D=n("./client/components/forms/form-textarea/index.jsx"),O=o(D),A=n("./client/components/forms/form-text-input/index.jsx"),L=o(A),B=n("./client/components/track-input-changes/index.jsx"),F=o(B),z=n("./client/post-editor/media-modal/fieldset.jsx"),U=o(z),H=function(e){function t(){(0,c.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments));return e.bumpTitleStat=function(){k.default.ga.recordEvent("Media","Changed Item Title"),k.default.mc.bumpStat("calypso_media_edit_details","title")},e.bumpAltStat=function(){k.default.ga.recordEvent("Media","Changed Image Alt"),k.default.mc.bumpStat("calypso_media_edit_details","alt")},e.bumpCaptionStat=function(){k.default.ga.recordEvent("Media","Changed Item Caption"),k.default.mc.bumpStat("calypso_media_edit_details","caption")},e.bumpDescriptionStat=function(){k.default.ga.recordEvent("Media","Changed Item Description"),k.default.mc.bumpStat("calypso_media_edit_details","description")},e.setFieldValue=function(t){var n=t.target,o=(0,a.default)({ID:e.props.item.ID},(0,E.get)(e.state,"modifiedItem",{}),(0,i.default)({},n.name,n.value));e.setState({modifiedItem:o}),e.persistChange()},e.scrollToShowVisibleDropdown=function(e){e.open&&"scrollIntoView"in window.Element.prototype&&b.default.findDOMNode(e.target).scrollIntoView()},e.persistChange=(0,E.debounce)(e.persistChange,1e3),e}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.item&&e.item&&e.item.ID!==this.props.item.ID&&(this.setState({modifiedItem:null}),this.persistChange.cancel())}},{key:"isMimePrefix",value:function(e){return P.default.getMimePrefix(this.props.item)===e}},{key:"persistChange",value:function(){this.props.site&&this.state.modifiedItem&&R.default.update(this.props.site.ID,this.state.modifiedItem)}},{key:"getItemValue",value:function(e){var t=(0,E.get)(this.state,["modifiedItem",e],null);return null!==t?t:this.props.item?this.props.item[e]:void 0}},{key:"renderImageAltText",value:function(){return this.isMimePrefix("image")?j.default.createElement(U.default,{legend:this.props.translate("Alt text")},j.default.createElement(F.default,{onNewValue:this.bumpAltStat},j.default.createElement(L.default,{name:"alt",value:this.getItemValue("alt"),onChange:this.setFieldValue}))):null}},{key:"render",value:function(){var e=this.props.translate;return j.default.createElement("div",{className:"editor-media-modal-detail__fields"},j.default.createElement(U.default,{legend:e("Title")},j.default.createElement(F.default,{onNewValue:this.bumpTitleStat},j.default.createElement(L.default,{name:"title",value:this.getItemValue("title"),onChange:this.setFieldValue}))),j.default.createElement(U.default,{legend:e("Caption")},j.default.createElement(F.default,{onNewValue:this.bumpCaptionStat},j.default.createElement(O.default,{name:"caption",value:this.getItemValue("caption"),onChange:this.setFieldValue}))),this.renderImageAltText(),j.default.createElement(U.default,{legend:e("Description")},j.default.createElement(F.default,{onNewValue:this.bumpDescriptionStat},j.default.createElement(O.default,{name:"description",value:this.getItemValue("description"),onChange:this.setFieldValue}))),j.default.createElement(U.default,{legend:e("URL")},j.default.createElement(M.default,{value:P.default.url(this.props.item)})))}}]),t}(C.Component);H.propTypes={site:x.default.object,item:x.default.object},t.default=(0,w.localize)(H),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-file-info.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./client/lib/media/utils.js"),C=o(x),j=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.getItemValue=function(e){var t=void 0;if(!o.props.item)return o.props.translate("Loading…");switch(e){case"extension":t=(o.props.item[e]||"").toUpperCase();break;case"dimensions":t=[y.default.createElement("abbr",{key:"width",title:o.props.translate("Width in pixels")},o.props.item.width)," ✕ ",y.default.createElement("abbr",{key:"height",title:o.props.translate("Height in pixels")},o.props.item.height)];break;case"date":t=o.props.moment(o.props.item[e]).format("D MMMM YYYY");break;case"length":t=C.default.playtime(o.props.item[e]);break;default:t=o.props.item[e]}return t},o.renderDimensions=function(){if(o.props.item&&(o.props.item.width||o.props.item.height))return y.default.createElement("tr",null,y.default.createElement("th",null,o.props.translate("Dimensions")),y.default.createElement("td",null,o.getItemValue("dimensions")))},o.renderDuration=function(){if(o.props.item&&o.props.item.length)return y.default.createElement("tr",null,y.default.createElement("th",null,o.props.translate("Duration")),y.default.createElement("td",null,o.getItemValue("length")))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,_.default)("editor-media-modal-detail__file-info",{"is-loading":!this.props.item});return y.default.createElement("table",{className:e},y.default.createElement("tbody",null,y.default.createElement("tr",null,y.default.createElement("th",null,this.props.translate("File Name")),y.default.createElement("td",{title:this.getItemValue("file")},y.default.createElement("span",null,this.getItemValue("file")))),y.default.createElement("tr",null,y.default.createElement("th",null,this.props.translate("File Type")),y.default.createElement("td",null,this.getItemValue("extension"))),this.renderDimensions(),this.renderDuration(),y.default.createElement("tr",null,y.default.createElement("th",null,this.props.translate("Upload Date")),y.default.createElement("td",null,this.getItemValue("date")))))}}]),t}(y.default.Component);j.displayName="EditorMediaModalDetailFileInfo",j.propTypes={item:h.default.object},t.default=(0,g.localize)(j),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/lodash/lodash.js"),C=n("./node_modules/i18n-calypso/index.js"),j=n("./node_modules/url/url.js"),E=o(j),w=n("./node_modules/gridicons/build/index.js"),S=o(w),k=n("./client/post-editor/media-modal/detail/detail-fields.jsx"),T=o(k),P=n("./client/post-editor/media-modal/detail/detail-file-info.jsx"),I=o(P),R=n("./client/post-editor/media-modal/detail/detail-preview-image.jsx"),N=o(R),M=n("./client/post-editor/media-modal/detail/detail-preview-video.jsx"),D=o(M),O=n("./client/post-editor/media-modal/detail/detail-preview-audio.jsx"),A=o(O),L=n("./client/post-editor/media-modal/detail/detail-preview-document.jsx"),B=o(L),F=n("./client/components/button/index.jsx"),z=o(F),U=n("./client/components/data/query-jetpack-modules/index.jsx"),H=o(U),W=n("./client/lib/site/utils.js"),V=n("./client/lib/version-compare/index.js"),q=o(V),G=n("./client/lib/media/utils.js"),K=o(G),$=n("./client/config/index.js"),Y=o($),J=n("./client/state/ui/selectors.js"),Z=n("./client/state/sites/selectors.js"),X=n("./client/state/selectors/is-private-site.js"),Q=o(X),ee=function(e,t){return!!e&&(!!Y.default.isEnabled("post-editor/image-editor")&&(!(0,x.get)(t,"is_private")&&(!(0,x.get)(t,"jetpack",!1)||!(0,q.default)((0,x.get)(t,"options.jetpack_version","0.0"),"4.7-alpha","<"))))},te=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.handleOnRestoreClick=function(){var e=o.props,t=e.site,n=e.item,r=e.onRestore;r(t&&t.ID,n)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"enableVideoEditing",value:function(e){var t=this.props,n=t.isJetpack,o=t.isVideoPressEnabled,r=t.isVideoPressModuleActive;if(!K.default.isVideoPressItem(e))return!1;if(n){if(!r)return!1}else if(!o)return!1;return!0}},{key:"renderEditButton",value:function(){var e=this.props,t=e.item,n=e.onEdit,o=e.site,r=e.translate;if(!(0,W.userCan)("upload_files",o))return null;if(this.props.isPrivateSite)return null;var i=K.default.getMimePrefix(t);if(!(0,x.includes)(["image","video"],i))return null;var s=r("video"===i?"Edit Thumbnail":"Edit Image");return v.default.createElement(z.default,{className:"editor-media-modal-detail__edit",onClick:n,disabled:(0,G.isItemBeingUploaded)(t)},v.default.createElement(S.default,{icon:"pencil",size:36})," ",s)}},{key:"renderRestoreButton",value:function(){var e=this.props,t=e.item,n=e.translate,o=E.default.parse(t.guid),r=E.default.parse(t.URL);return o.pathname!==r.pathname&&v.default.createElement(z.default,{className:(0,_.default)("editor-media-modal-detail__restore"),onClick:this.handleOnRestoreClick,disabled:(0,G.isItemBeingUploaded)(t)},v.default.createElement(S.default,{icon:"refresh",size:36}),n("Restore Original"))}},{key:"renderMediaEditorButtons",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-desktop";if(!e)return null;var n=K.default.getMimePrefix(e);return"video"===n?this.renderVideoEditorButtons(e,t):this.renderImageEditorButtons(t)}},{key:"renderImageEditorButtons",value:function(e){var t=this.props.site;if(!ee(t))return null;var n=(0,_.default)("editor-media-modal-detail__edition-bar",e);return v.default.createElement("div",{className:n},this.renderRestoreButton(e),this.renderEditButton())}},{key:"renderVideoEditorButtons",value:function(e,t){if(!this.enableVideoEditing(e))return null;var n=(0,_.default)("editor-media-modal-detail__edition-bar",t);return v.default.createElement("div",{className:n},this.renderEditButton())}},{key:"renderFields",value:function(){var e=this.props,t=e.site,n=e.item;return(0,W.userCan)("upload_files",t)?v.default.createElement(T.default,{site:t,item:n}):null}},{key:"renderPreviousItemButton",value:function(){var e=this.props,t=e.hasPreviousItem,n=e.onShowPreviousItem,o=e.translate;return t?v.default.createElement("button",{onClick:n,className:"editor-media-modal-detail__previous"},v.default.createElement(S.default,{icon:"chevron-left",size:36}),v.default.createElement("span",{className:"screen-reader-text"},o("Previous"))):null}},{key:"renderNextItemButton",value:function(){var e=this.props,t=e.hasNextItem,n=e.onShowNextItem,o=e.translate;return t?v.default.createElement("button",{onClick:n,className:"editor-media-modal-detail__next"},v.default.createElement(S.default,{icon:"chevron-right",size:36}),v.default.createElement("span",{className:"screen-reader-text"},o("Next"))):null}},{key:"renderItem",value:function(){var e=this.props,t=e.item,n=e.site;if(!t)return null;var o=K.default.getMimePrefix(t),r=void 0;switch(o){case"image":r=N.default;break;case"video":r=D.default;break;case"audio":r=A.default;break;default:r=B.default}return v.default.createElement(r,{className:"editor-media-modal-detail__preview",site:n,item:t})}},{key:"render",value:function(){var e=this.props,t=e.isJetpack,n=e.item,o=e.siteId,r=(0,_.default)("editor-media-modal-detail__item",{"is-loading":!n});return v.default.createElement("figure",{className:r},v.default.createElement("div",{className:"editor-media-modal-detail__content editor-media-modal__content"},v.default.createElement("div",{className:"editor-media-modal-detail__preview-wrapper"},this.renderItem(),this.renderMediaEditorButtons(n),this.renderPreviousItemButton(),this.renderNextItemButton()),v.default.createElement("div",{className:"editor-media-modal-detail__sidebar"},t&&v.default.createElement(H.default,{siteId:o}),this.renderMediaEditorButtons(n,"is-mobile"),this.renderFields(),v.default.createElement(I.default,{item:n}))))}}]),t}(g.Component);te.propTypes={site:h.default.object,item:h.default.object,hasPreviousItem:h.default.bool,hasNextItem:h.default.bool,onShowPreviousItem:h.default.func,onShowNextItem:h.default.func,onEdit:h.default.func,onRestore:h.default.func},te.defaultProps={hasPreviousItem:!1,hasNextItem:!1,onShowPreviousItem:x.noop,onShowNextItem:x.noop,onEdit:x.noop,onRestore:x.noop};var ne=(0,y.connect)(function(e){var t=(0,J.getSelectedSiteId)(e);return{isJetpack:(0,Z.isJetpackSite)(e,t),isVideoPressEnabled:(0,Z.getSiteOption)(e,t,"videopress_enabled"),isVideoPressModuleActive:(0,Z.isJetpackModuleActive)(e,t,"videopress"),isPrivateSite:(0,Q.default)(e,t),siteId:t}});t.default=(0,x.flowRight)(ne,C.localize)(te),e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-audio.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/lib/media/utils.js"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,b.default)(this.props.className,"is-audio");return v.default.createElement("audio",{src:x.default.url(this.props.item),controls:!0,className:e})}}]),t}(v.default.Component);C.displayName="EditorMediaModalDetailPreviewAudio",C.propTypes={className:h.default.string,item:h.default.object.isRequired},t.default=C,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-document.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/gridicons/build/index.js"),b=o(y),_=n("./node_modules/classnames/index.js"),x=o(_),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=(0,x.default)(this.props.className,"is-document");return v.default.createElement("div",{className:e},v.default.createElement(b.default,{icon:"pages",size:120}))}}]),t}(v.default.Component);C.displayName="EditorMediaModalDetailPreviewDocument",C.propTypes={className:h.default.string},t.default=C,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-image.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./client/components/image-preloader/index.jsx"),C=o(x),j=n("./client/components/spinner/index.jsx"),E=o(j),w=n("./client/lib/media/utils.js"),S=function(e){function t(e){(0,a.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onImagePreloaderLoad=n.onImagePreloaderLoad.bind(n),n.state={loading:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){return this.props.item.URL===e.item.URL?null:void this.setState({loading:!0})}},{key:"onImagePreloaderLoad",value:function(){this.setState({loading:!1}),this.props.onLoad()}},{key:"render",value:function(){var e=(0,w.url)(this.props.item,{photon:this.props.site&&!this.props.site.is_private}),t=(0,w.isItemBeingUploaded)(this.props.item),n=this.state.loading,o=/^blob/.test(e),r=(0,_.default)(this.props.className,"is-image",{"is-uploading":t},{"is-loading":n},{"is-blob":o}),i=(0,_.default)(this.props.className,"is-image","is-fake",{"is-uploading":t},{"is-loading":n},{"is-blob":o});return v.default.createElement("div",null,v.default.createElement("img",{src:e,width:this.props.item.width,height:this.props.item.height,alt:this.props.item.alt||this.props.item.title,className:i}),v.default.createElement(C.default,{src:e,width:this.props.item.width,height:this.props.item.height,onLoad:this.onImagePreloaderLoad,placeholder:v.default.createElement("span",null),alt:this.props.item.alt||this.props.item.title,className:r}),(t||n)&&v.default.createElement(E.default,null))}}]),t}(g.Component);S.propTypes={className:h.default.string,item:h.default.object.isRequired,site:h.default.object},S.defaultProps={onLoad:y.noop},t.default=S,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-video.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=n("./client/lib/media/utils.js"),x=o(_),C=n("./client/post-editor/media-modal/detail/detail-preview-videopress.jsx"),j=o(C),E=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){if(x.default.isVideoPressItem(this.props.item))return v.default.createElement(j.default,this.props);var e=(0,b.default)(this.props.className,"is-video");return v.default.createElement("video",{src:x.default.url(this.props.item),controls:!0,className:e})}}]),t}(v.default.Component);E.displayName="EditorMediaModalDetailPreviewVideo",E.propTypes={className:h.default.string,item:h.default.object.isRequired},t.default=E,e.exports=t.default},"./client/post-editor/media-modal/detail/detail-preview-videopress.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/debug/browser.js"),C=o(x),j=n("./client/lib/load-script/index.js"),E=(0,C.default)("calypso:post-editor:videopress"),w="https://wordpress.com/wp-content/plugins/video/assets/js/next/videopress.js",S=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.setVideoInstance=function(e){return o.video=e},o.onScriptLoaded=function(e){var t=o.props,n=t.isPlaying,r=t.item,i=t.onScriptLoadError;if(e)return E("Script"+(0,y.get)(e,"src","")+" failed to load."),void i();var s=r.height,a=void 0===s?480:s,l=r.videopress_guid,u=r.width,d=void 0===u?854:u;l&&"undefined"!=typeof window&&window.videopress&&(o.player=window.videopress(l,o.video,{autoPlay:n,height:a,width:d}))},o.receiveMessage=function(e){if(!e.origin||e.origin===location.origin){var t=e.data;t&&"videopress_loading_state"===t.event&&"state"in t&&"converting"in t&&("loaded"!==t.state||t.converting||o.props.onVideoLoaded())}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.loadInitializeScript(),window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){(0,j.removeScriptCallback)(w,this.onScriptLoaded),this.destroy()}},{key:"componentWillReceiveProps",value:function(e){this.props.isPlaying&&!e.isPlaying?this.pause():!this.props.isPlaying&&e.isPlaying&&this.play()}},{key:"componentDidUpdate",value:function(e){this.props.item.videopress_guid!==e.item.videopress_guid&&(this.destroy(),this.loadInitializeScript())}},{key:"shouldComponentUpdate",value:function(e){return this.props.item.videopress_guid!==e.item.videopress_guid;
}},{key:"loadInitializeScript",value:function(){(0,j.loadScript)(w,this.onScriptLoaded)}},{key:"destroy",value:function(){if(window.removeEventListener("message",this.receiveMessage),this.player)for((0,y.invoke)(this,"player.destroy");this.video.firstChild;)this.video.removeChild(this.video.firstChild)}},{key:"play",value:function(){var e=(0,y.get)(this,"player.state");e&&(0,y.invoke)(this,"player.state.play")}},{key:"pause",value:function(){var e=(0,y.get)(this,"player.state");if(e){(0,y.invoke)(this,"player.state.pause");var t=(0,y.invoke)(this,"player.state.videoAt");t&&this.props.onPause(t)}}},{key:"render",value:function(){var e=(0,_.default)(this.props.className,"is-video");return v.default.createElement("div",{className:e,ref:this.setVideoInstance})}}]),t}(g.Component);S.propTypes={className:h.default.string,isPlaying:h.default.bool,item:h.default.object.isRequired,onPause:h.default.func,onScriptLoadError:h.default.func,onVideoLoaded:h.default.func},S.defaultProps={isPlaying:!1,onPause:y.noop,onScriptLoadError:y.noop,onVideoLoaded:y.noop},t.default=S,e.exports=t.default},"./client/post-editor/media-modal/detail/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalDetail=void 0;var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/post-editor/media-modal/detail/detail-item.jsx"),C=o(x),j=n("./client/lib/media/utils.js"),E=o(j),w=n("./client/components/header-cake/index.jsx"),S=o(w),k=n("./client/post-editor/media-modal/preload-image.js"),T=o(k),P=n("./client/state/ui/media-modal/constants.js"),I=n("./client/state/ui/editor/actions.js"),R=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.preloadImages=function(){E.default.filterItemsByMimePrefix(o.props.items,"image").forEach(function(e){var t=E.default.url(e,{photon:this.props.site&&!this.props.site.is_private});(0,T.default)(t)},o)},o.incrementIndex=function(e){o.props.onSelectedIndexChange(o.props.selectedIndex+e)},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.preloadImages()}},{key:"componentDidUpdate",value:function(){this.preloadImages()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.selectedIndex,o=e.site,r=e.onEditImageItem,i=e.onEditVideoItem,s=e.onRestoreItem,a=e.onReturnToList,l=t[n],u=E.default.getMimePrefix(l);return y.default.createElement("div",{className:"editor-media-modal-detail"},y.default.createElement(S.default,{onClick:a,backText:this.props.translate("Media Library")}),y.default.createElement(C.default,{site:o,item:l,hasPreviousItem:n-1>=0,hasNextItem:n+1<t.length,onShowPreviousItem:this.incrementIndex.bind(this,-1),onShowNextItem:this.incrementIndex.bind(this,1),onRestore:s,onEdit:"video"===u?i:r}))}}]),t}(y.default.Component);R.propTypes={site:h.default.object,items:h.default.array,selectedIndex:h.default.number,onSelectedIndexChange:h.default.func,onReturnToList:h.default.func,onEdit:h.default.func,onRestore:h.default.func},R.defaultProps={selectedIndex:0,onSelectedIndexChange:_.noop};var N=t.EditorMediaModalDetail=(0,g.localize)(R);t.default=(0,b.connect)(null,{onReturnToList:(0,_.partial)(I.setEditorMediaModalView,P.ModalViews.LIST),onEditImageItem:(0,_.partial)(I.setEditorMediaModalView,P.ModalViews.IMAGE_EDITOR),onEditVideoItem:(0,_.partial)(I.setEditorMediaModalView,P.ModalViews.VIDEO_EDITOR)})(N)},"./client/post-editor/media-modal/fieldset.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/classnames/index.js"),b=o(y),_=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return v.default.createElement("fieldset",{className:(0,b.default)("editor-media-modal__fieldset",this.props.className)},v.default.createElement("legend",{className:"editor-media-modal__fieldset-legend"},this.props.legend),this.props.children)}}]),t}(v.default.Component);_.displayName="EditorMediaModalFieldset",_.propTypes={legend:h.default.oneOfType([h.default.string,h.default.element]).isRequired},t.default=_,e.exports=t.default},"./client/post-editor/media-modal/gallery-help.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/i18n-calypso/index.js"),v=n("./node_modules/react/react.js"),y=o(v),b=n("./node_modules/react-redux/es/index.js"),_=n("./node_modules/redux/lib/index.js"),x=n("./node_modules/gridicons/build/index.js"),C=o(x),j=n("./client/lib/viewport/index.js"),E=n("./client/components/popover/index.jsx"),w=o(E),S=n("./client/components/forms/form-checkbox/index.jsx"),k=o(S),T=n("./client/components/button/index.jsx"),P=o(T),I=n("./client/state/preferences/actions.js"),R=n("./client/state/preferences/selectors.js"),N=n("./client/state/ui/selectors.js"),M=n("./client/components/data/query-preferences/index.jsx"),D=o(M),O=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.state={isDismissed:!1,rememberDismiss:!0},o.setRenderContext=function(e){e&&o.setState({renderContext:e})},o.toggleRememberDismiss=function(){setTimeout(function(){o.setState({rememberDismiss:!o.state.rememberDismiss})},0)},o.dismiss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.remember;o.setState({isDismissed:!0}),o.props.onDismiss({remember:t})},o.renderPopover=function(){var e=o.state,t=e.renderContext,n=e.isDismissed;if(t&&!n)return y.default.createElement(w.default,{onClose:function(){return o.dismiss()},context:t,position:"bottom",isVisible:!(0,j.isMobile)(),className:"popover__gallery-help is-dialog-visible"},y.default.createElement("div",{className:"editor-media-modal__gallery-help-content"},y.default.createElement("div",{className:"editor-media-modal__gallery-help-instruction"},y.default.createElement("span",{className:"editor-media-modal__gallery-help-icon"},y.default.createElement(C.default,{icon:"image-multiple",size:20})),y.default.createElement("span",{className:"editor-media-modal__gallery-help-text"},o.props.translate("Select more than one image to create a gallery."))),y.default.createElement("div",{className:"editor-media-modal__gallery-help-actions"},y.default.createElement("label",{className:"editor-media-modal__gallery-help-remember-dismiss"},y.default.createElement(k.default,{checked:o.state.rememberDismiss,onChange:o.toggleRememberDismiss}),y.default.createElement("span",null,o.props.translate("Don't show again"))),y.default.createElement(P.default,{onClick:function(){return o.dismiss({remember:o.state.rememberDismiss})},compact:!0},o.props.translate("Got it",{context:"Button label",comment:"User clicks this to confirm that he has understood the text"})))))},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return"post-editor"!==this.props.sectionName?null:this.props.isMediaModalGalleryInstructionsDismissed?null:y.default.createElement("div",{ref:this.setRenderContext,className:"editor-media-modal__gallery-help"},y.default.createElement(D.default,null),this.renderPopover())}}]),t}(y.default.PureComponent);O.displayName="EditorMediaModalGalleryHelp",O.propTypes={onDismiss:h.default.func,sectionName:h.default.string},O.defaultProps={onDismiss:function(){}},t.default=(0,b.connect)(function(e){return{sectionName:(0,N.getSectionName)(e),isMediaModalGalleryInstructionsDismissed:(0,R.getPreference)(e,"mediaModalGalleryInstructionsDismissed")||(0,R.getPreference)(e,"mediaModalGalleryInstructionsDismissedForSession")}},function(e){return(0,_.bindActionCreators)({onDismiss:function(e){return e.remember?(0,I.savePreference)("mediaModalGalleryInstructionsDismissed",!0):(0,I.setPreference)("mediaModalGalleryInstructionsDismissedForSession",!0)}},e)})((0,g.localize)(O)),e.exports=t.default},"./client/post-editor/media-modal/gallery/caption.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react/react.js"),_=o(b),x=n("./client/lib/media/actions.js"),C=o(x),j=n("./client/components/forms/form-text-input/index.jsx"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={caption:null},o.getValue=function(){return null!==o.state.caption?o.state.caption:o.props.item?o.props.item.caption:void 0},o.setCaption=function(e){o.setState({caption:e.target.value})},o.saveCaption=function(){var e=o.props,t=e.siteId,n=e.item;if(t&&n){var r=o.getValue();n&&r===n.caption||C.default.update(t,(0,i.default)({},n,{caption:r}))}},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return _.default.createElement(E.default,{value:this.getValue(),placeholder:this.props.translate("Caption this image…"),onChange:this.setCaption,onBlur:this.saveCaption,onMouseDown:function(e){return e.stopPropagation()},className:"editor-media-modal-gallery__caption"})}}]),t}(_.default.Component);w.displayName="EditorMediaModalGalleryCaption",w.propTypes={siteId:v.default.number,item:v.default.object},t.default=(0,y.localize)(w),e.exports=t.default},"./client/post-editor/media-modal/gallery/drop-zone.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/lodash/lodash.js"),b=n("./client/my-sites/media-library/drop-zone.jsx"),_=o(b),x=n("./client/lib/media/library-selected-store.js"),C=o(x),j=n("./client/lib/media/actions.js"),E=o(j),w=n("./client/lib/media/utils.js"),S=o(w),k=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.filterDroppedImagesSelected=function(){var e=o.props.site;if(e){var t=C.default.getAll(e.ID),n=S.default.filterItemsByMimePrefix(t,"image");(0,y.isEqual)(t,n)||(E.default.setLibrarySelectedItems(e.ID,n),o.props.onInvalidItemAdded())}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return v.default.createElement(_.default,{site:this.props.site,onAddMedia:this.filterDroppedImagesSelected,fullScreen:!1})}}]),t}(v.default.Component);k.displayName="EditorMediaModalGalleryDropZone",k.propTypes={site:h.default.object,onInvalidItemAdded:h.default.func},k.defaultProps={onInvalidItemAdded:function(){}},t.default=k,e.exports=t.default},"./client/post-editor/media-modal/gallery/edit-item.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./client/lib/site/utils.js"),b=n("./client/my-sites/media-library/list-item.jsx"),_=o(b),x=n("./client/post-editor/media-modal/gallery/caption.jsx"),C=o(x),j=n("./client/post-editor/media-modal/gallery/remove-button.jsx"),E=o(j),w=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.renderCaption=function(){var e=o.props,t=e.site,n=e.item;if((0,y.userCan)("upload_files",t))return v.default.createElement(C.default,{siteId:t.ID,item:n})},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.site,n=e.item,o=e.showRemoveButton;return v.default.createElement("div",{className:"editor-media-modal-gallery__edit-item"},v.default.createElement(_.default,{media:n,scale:1,photon:!1}),this.renderCaption(),o&&v.default.createElement(E.default,{siteId:t.ID,itemId:n.ID}))}}]),t}(v.default.Component);w.displayName="EditorMediaModalGalleryEditItem",w.propTypes={site:h.default.object,item:h.default.object,showRemoveButton:h.default.bool},w.defaultProps={showRemoveButton:!0},t.default=w,e.exports=t.default},"./client/post-editor/media-modal/gallery/edit.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/defineProperty.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),u=o(l),d=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/createClass.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=o(g),y=n("./node_modules/babel-runtime/helpers/inherits.js"),b=o(y),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./node_modules/react/react.js"),j=o(C),E=n("./node_modules/lodash/lodash.js"),w=n("./node_modules/i18n-calypso/index.js"),S=n("./client/components/ellipsis-menu/index.jsx"),k=o(S),T=n("./client/components/popover/menu-item.jsx"),P=o(T),I=n("./client/components/forms/sortable-list/index.jsx"),R=o(I),N=n("./client/post-editor/media-modal/gallery/edit-item.jsx"),M=o(N),D=function(e){function t(){var e,n,o,r;(0,p.default)(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=o=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(s))),o.onOrderChanged=function(e){var t=[];o.props.settings.items.forEach(function(n,o){t[e[o]]=n}),o.props.onUpdateSetting({items:t,orderBy:null})},r=n,(0,v.default)(o,r)}return(0,b.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.onUpdateSetting,o=t.site,r=t.settings,i=t.translate;if(!o||!r.items)return null;var s=(e={},(0,a.default)(e,i("Reverse order"),(0,E.reverse)([].concat((0,u.default)(r.items)))),(0,a.default)(e,i("Order alphabetically"),(0,E.sortBy)(r.items,"title")),(0,a.default)(e,i("Order chronologically"),(0,E.sortBy)(r.items,"date")),e);return j.default.createElement("div",null,j.default.createElement(k.default,{popoverClassName:"gallery__order-popover",position:"bottom right"},(0,E.map)(s,function(e,t){var o=function(){return n({items:e})};return j.default.createElement(P.default,{key:t,onClick:o},t)})),j.default.createElement(R.default,{onChange:this.onOrderChanged},r.items.map(function(e){return j.default.createElement(M.default,{key:e.ID,site:o,item:e,showRemoveButton:r.items.length>1})})))}}]),t}(j.default.Component);D.propTypes={site:x.default.object,settings:x.default.object,onUpdateSetting:x.default.func},D.defaultProps={settings:(0,i.default)({}),onUpdateSetting:E.noop},t.default=(0,w.localize)(D),e.exports=t.default},"./client/post-editor/media-modal/gallery/fields.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModalGalleryFields=void 0;var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/keys.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/lodash/lodash.js"),j=n("./node_modules/i18n-calypso/index.js"),E=n("./client/post-editor/media-modal/fieldset.jsx"),w=o(E),S=n("./client/components/select-dropdown/index.jsx"),k=o(S),T=n("./client/components/select-dropdown/item.jsx"),P=o(T),I=n("./client/components/forms/form-checkbox/index.jsx"),R=o(I),N=n("./client/lib/media/constants.js"),M=n("./client/lib/site/utils.js"),D=t.EditorMediaModalGalleryFields=function(e){function t(){var e,n,o,r;(0,c.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,h.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(s))),o.getTypeOptions=function(){var e=o.props.site,t={individual:o.props.translate("Individual Images"),default:o.props.translate("Thumbnail Grid")};return!e||e.jetpack&&!(0,M.isModuleActive)(e,"tiled-gallery")||(0,C.assign)(t,{rectangular:o.props.translate("Tiled Mosaic"),square:o.props.translate("Square Tiles"),circle:o.props.translate("Circles"),columns:o.props.translate("Tiled Columns")}),!e||e.jetpack&&!(0,M.isModuleActive)(e,"shortcodes")||(0,C.assign)(t,{slideshow:o.props.translate("Slideshow")}),t},o.getLinkOptions=function(){return"individual"===o.props.settings.type?{}:{"":o.props.translate("Attachment Page"),file:o.props.translate("Media File"),none:o.props.translate("None")}},o.getSizeOptions=function(){return(0,C.includes)(N.GallerySizeableTypes,o.props.settings.type)?{thumbnail:o.props.translate("Thumbnail"),medium:o.props.translate("Medium"),large:o.props.translate("Large"),full:o.props.translate("Full Size")}:{}},o.getColumnOptions=function(){var e=Math.min(o.props.numberOfItems,9);return(0,C.fromPairs)((0,C.times)(e,function(e){return[e+1,(e+1).toString()]}))},o.updateRandomOrder=function(e){o.props.onUpdateSetting("orderBy",e.target.checked?"rand":null)},o.renderDropdown=function(e,t,n){var r=o.props,i=r.settings,s=r.onUpdateSetting;if((0,a.default)(t).length)return x.default.createElement(w.default,{legend:e,className:"for-setting-"+n},x.default.createElement(k.default,{selectedText:t[i[n]]},(0,a.default)(t).map(function(e){var o=t[e];return x.default.createElement(P.default,{key:"value-"+e,selected:e===i[n],onClick:function(){return s(n,isFinite(parseInt(e))?+e:e)}},o)})))},o.renderColumnsOption=function(){if((0,C.includes)(N.GalleryColumnedTypes,o.props.settings.type))return o.renderDropdown(o.props.translate("Columns"),o.getColumnOptions(),"columns")},o.renderRandomOption=function(){var e=o.props.settings;if("individual"!==e.type)return x.default.createElement(w.default,{legend:o.props.translate("Random Order")},x.default.createElement(R.default,{onChange:o.updateRandomOrder,checked:"rand"===e.orderBy}))},r=n,(0,h.default)(o,r)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.getTypeOptions(),t=this.getLinkOptions(),n=this.getSizeOptions();return x.default.createElement("div",{className:"editor-media-modal-gallery__fields"},this.renderDropdown(this.props.translate("Layout"),e,"type"),this.renderColumnsOption(),this.renderRandomOption(),this.renderDropdown(this.props.translate("Link To"),t,"link"),this.renderDropdown(this.props.translate("Size"),n,"size"))}}]),t}(x.default.Component);D.propTypes={site:b.default.object,settings:b.default.object,onUpdateSetting:b.default.func,numberOfItems:b.default.number},D.defaultProps={settings:(0,i.default)({}),onUpdateSetting:C.noop,numberOfItems:0},t.default=(0,j.localize)(D)},"./client/post-editor/media-modal/gallery/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/prop-types/index.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/react/react.js"),_=o(b),x=n("./node_modules/react-redux/es/index.js"),C=n("./node_modules/lodash/lodash.js"),j=n("./client/components/header-cake/index.jsx"),E=o(j),w=n("./client/lib/media/store.js"),S=o(w),k=n("./client/post-editor/media-modal/gallery/drop-zone.jsx"),T=o(k),P=n("./client/post-editor/media-modal/gallery/fields.jsx"),I=o(P),R=n("./client/post-editor/media-modal/gallery/preview.jsx"),N=o(R),M=n("./client/lib/media/constants.js"),D=n("./client/state/ui/media-modal/constants.js"),O=n("./client/state/ui/editor/actions.js"),A=n("./client/lib/site/utils.js"),L=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.state={invalidItemDropped:!1},o.reconcileSettingsItems=function(e,t){var n=e.items.filter(function(e){return(0,C.some)(t,{ID:e.ID})}).concat(t.filter(function(t){return!(0,C.some)(e.items,{ID:t.ID})})).map(function(e){return S.default.get(o.props.site.ID,e.ID)});(0,C.isEqual)(n,e.items)||o.updateSetting("items",n)},o.maybeUpdateColumnsSetting=function(){o.props.items.length<o.props.settings.columns&&o.updateSetting("columns",o.props.items.length)},o.setDefaultSettings=function(){var e=o.props,t=e.site,n=e.settings,r=e.items,i=e.onUpdateSettings;if(!n){var s=(0,C.assign)({},M.GalleryDefaultAttrs,{items:r});!t||t.jetpack&&!(0,A.isModuleActive)(t,"tiled-gallery")||(s.type="rectangular"),i(s)}},o.updateSetting=function(e,t){"string"==typeof e&&(e=(0,i.default)({},e,t));var n=(0,C.assign)({},o.props.settings,e);n=(0,C.omitBy)(n,function(e){return null===e}),o.props.onUpdateSettings(n)},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.settings?(this.maybeUpdateColumnsSetting(),this.reconcileSettingsItems(this.props.settings,this.props.items)):this.setDefaultSettings()}},{key:"componentDidUpdate",value:function(e){this.props.settings&&(this.maybeUpdateColumnsSetting(),(0,C.isEqual)(e.items,this.props.items)||this.reconcileSettingsItems(this.props.settings,this.props.items))}},{key:"render",value:function(){var e=this,t=this.props,n=t.site,o=t.items,r=t.settings;return _.default.createElement("div",{className:"editor-media-modal-gallery"},_.default.createElement(T.default,{site:n,onInvalidItemAdded:function(){return e.setState({invalidItemDropped:!0})}}),_.default.createElement(E.default,{onClick:this.props.onReturnToList,backText:this.props.translate("Media Library")}),_.default.createElement("div",{className:"editor-media-modal-gallery__content editor-media-modal__content"},_.default.createElement(N.default,{site:n,items:o,settings:r,onUpdateSetting:this.updateSetting,invalidItemDropped:this.state.invalidItemDropped,onDismissInvalidItemDropped:function(){return e.setState({invalidItemDropped:!1})}}),_.default.createElement("div",{className:"editor-media-modal-gallery__sidebar"},_.default.createElement(I.default,{site:n,settings:r,onUpdateSetting:this.updateSetting,numberOfItems:o.length}))))}}]),t}(_.default.Component);L.propTypes={site:v.default.object,items:v.default.array,settings:v.default.object,onUpdateSettings:v.default.func,onReturnToList:v.default.func},L.defaultProps={onUpdateSettings:C.noop},t.default=(0,x.connect)(null,{onReturnToList:(0,C.partial)(O.setEditorMediaModalView,D.ModalViews.LIST)})((0,y.localize)(L)),e.exports=t.default},"./client/post-editor/media-modal/gallery/preview-individual.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./client/post-editor/media-modal/markup.js"),_=o(b),x=n("./client/state/ui/selectors.js"),C=function(e){function t(){return(0,a.default)(this,t),(0,c.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props.items.map(function(t){var n=_.default.caption(e.props.site,t);return null===n?v.default.createElement("div",{key:t.ID,dangerouslySetInnerHTML:{__html:_.default.get(e.props.site,t)}}):v.default.cloneElement(n,{key:t.ID})});return v.default.createElement("div",{className:"editor-media-modal-gallery__preview-individual"},v.default.createElement("div",{className:"editor-media-modal-gallery__preview-individual-content"},t))}}]),t}(v.default.Component);C.propTypes={items:h.default.arrayOf(h.default.object),site:h.default.object},t.default=(0,y.connect)(function(e){return{site:(0,x.getSelectedSite)(e)}})(C),e.exports=t.default},"./client/post-editor/media-modal/gallery/preview-shortcode.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/prop-types/index.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/create-react-class/index.js"),u=o(l),d=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/classnames/index.js"),f=o(c),p=n("./client/lib/media/utils.js"),m=n("./client/components/gallery-shortcode/index.jsx"),h=o(m);t.default=(0,u.default)({displayName:"EditorMediaModalGalleryPreviewShortcode",propTypes:{siteId:i.default.number,settings:i.default.object},getInitialState:function(){return{isLoading:!0,shortcode:(0,p.generateGalleryShortcode)(this.props.settings)}},componentWillReceiveProps:function(e){var t=(0,p.generateGalleryShortcode)(e.settings);this.state.shortcode!==t&&this.setState({isLoading:!0,shortcode:t})},setLoaded:function(){this.isMounted()&&this.setState({isLoading:!1})},render:function(){var e=this.props,t=e.siteId,n=e.settings,o=this.state,r=o.isLoading,i=o.shortcode,s=(0,f.default)("editor-media-modal-gallery__preview-shortcode",{"is-loading":r||(0,d.some)(n.items,"transient")});return a.default.createElement("div",{className:s},a.default.createElement(h.default,{siteId:t,onLoad:this.setLoaded},i))}}),e.exports=t.default},"./client/post-editor/media-modal/gallery/preview.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/freeze.js"),i=o(r),s=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/createClass.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/inherits.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/prop-types/index.js"),_=o(b),x=n("./node_modules/lodash/lodash.js"),C=n("./client/components/notice/index.jsx"),j=o(C),E=n("./client/components/segmented-control/index.jsx"),w=o(E),S=n("./client/components/segmented-control/item.jsx"),k=o(S),T=n("./client/post-editor/media-modal/gallery/edit.jsx"),P=o(T),I=n("./client/post-editor/media-modal/gallery/preview-shortcode.jsx"),R=o(I),N=n("./client/post-editor/media-modal/gallery/preview-individual.jsx"),M=o(N),D=function(e){function t(){var e,n,o,r;(0,u.default)(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=o=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(s))),o.state={isEditing:!1},r=n,(0,p.default)(o,r)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"renderPreviewModeToggle",value:function(){var e=this,t=this.props.translate;return v.default.createElement(w.default,{className:"editor-media-modal-gallery__preview-toggle",compact:!0},v.default.createElement(k.default,{selected:!this.state.isEditing,onClick:function(){return e.setState({isEditing:!1})}},t("Preview")),v.default.createElement(k.default,{selected:this.state.isEditing,onClick:function(){return e.setState({isEditing:!0})}},t("Edit")))}},{key:"renderPreview",value:function(){var e=this.props,t=e.site,n=e.settings,o=e.onUpdateSetting;if(t&&n.items)return this.state.isEditing?v.default.createElement(P.default,{site:t,settings:n,onUpdateSetting:o}):"individual"===n.type?v.default.createElement(M.default,{items:n.items}):v.default.createElement(R.default,{siteId:t.ID,settings:n})}},{key:"render",value:function(){var e=this.props.translate;return v.default.createElement("div",{className:"editor-media-modal-gallery__preview"
},this.props.invalidItemDropped&&v.default.createElement(j.default,{status:"is-warning",onDismissClick:this.props.onDismissInvalidItemDropped,isCompact:!0},e("Galleries can only include images. All other uploads will be added to your media library.")),v.default.createElement("div",{className:"editor-media-modal-gallery__preview-wrapper"},this.renderPreview()),this.renderPreviewModeToggle())}}]),t}(g.Component);D.propTypes={site:_.default.object,settings:_.default.object,onUpdateSetting:_.default.func,invalidItemDropped:_.default.bool,onDismissInvalidItemDropped:_.default.func},D.defaultProps={settings:(0,i.default)({}),onUpdateSetting:x.noop,invalidItemDropped:!1,onDismissInvalidItemDropped:x.noop},D.displayName="EditorMediaModalGalleryPreview",t.default=(0,y.localize)(D),e.exports=t.default},"./client/post-editor/media-modal/gallery/remove-button.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/react/react.js"),h=o(m),g=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/gridicons/build/index.js"),y=o(v),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/prop-types/index.js"),x=o(_),C=n("./client/lib/media/actions.js"),j=o(C),E=n("./client/lib/media/library-selected-store.js"),w=o(E),S=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.remove=function(){var e=o.props,t=e.siteId,n=e.itemId;if(t&&n){var r=w.default.getAll(t),i=(0,g.reject)(r,function(e){return e.ID===n});j.default.setLibrarySelectedItems(t,i)}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.translate;return h.default.createElement("button",{onClick:this.remove,onMouseDown:function(e){return e.stopPropagation()},className:"editor-media-modal-gallery__remove"},h.default.createElement("span",{className:"screen-reader-text"},e("Remove")),h.default.createElement(y.default,{icon:"cross"}))}}]),t}(m.PureComponent);S.propTypes={siteId:x.default.number,itemId:x.default.number},S.displayName="RemoveButton",t.default=(0,b.localize)(S),e.exports=t.default},"./client/post-editor/media-modal/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return!n(t)||(0,P.some)(t,function(t){return z.default.isItemBeingUploaded(t)&&("image"!==z.default.getMimePrefix(t)||!z.default.isTransientPreviewable(t)||e===X.ModalViews.GALLERY)})}Object.defineProperty(t,"__esModule",{value:!0}),t.EditorMediaModal=void 0;var i=n("./node_modules/babel-runtime/core-js/object/freeze.js"),s=o(i),a=n("./node_modules/babel-runtime/helpers/extends.js"),l=o(a),u=n("./node_modules/babel-runtime/core-js/object/assign.js"),d=o(u),c=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),f=o(c),p=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),m=o(p),h=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),g=o(h),v=n("./node_modules/babel-runtime/helpers/createClass.js"),y=o(v),b=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),_=o(b),x=n("./node_modules/babel-runtime/helpers/inherits.js"),C=o(x),j=n("./node_modules/react/react.js"),E=o(j),w=n("./node_modules/prop-types/index.js"),S=o(w),k=n("./node_modules/i18n-calypso/index.js"),T=n("./node_modules/react-redux/es/index.js"),P=n("./node_modules/lodash/lodash.js"),I=n("./client/my-sites/media-library/index.jsx"),R=o(I),N=n("./client/lib/analytics/index.js"),M=o(N),D=n("./client/lib/posts/stats.js"),O=n("./client/post-editor/media-modal/gallery/index.jsx"),A=o(O),L=n("./client/lib/media/actions.js"),B=o(L),F=n("./client/lib/media/utils.js"),z=o(F),U=n("./client/components/dialog/index.jsx"),H=o(U),W=n("./client/components/close-on-escape/index.jsx"),V=o(W),q=n("./client/lib/accept/index.js"),G=o(q),K=n("./client/state/ui/media-modal/selectors.js"),$=n("./client/state/sites/selectors.js"),Y=n("./client/state/ui/editor/selectors.js"),J=n("./client/state/ui/media-modal/actions.js"),Z=n("./client/state/ui/editor/actions.js"),X=n("./client/state/ui/media-modal/constants.js"),Q=n("./client/state/media/actions.js"),ee=n("./client/blocks/image-editor/index.jsx"),te=o(ee),ne=n("./client/blocks/video-editor/index.jsx"),oe=o(ne),re=n("./client/post-editor/media-modal/detail/index.jsx"),ie=o(re),se=n("./client/state/analytics/actions.js"),ae=t.EditorMediaModal=function(e){function t(e){var n;(0,g.default)(this,t);var o=(0,_.default)(this,(n=t.__proto__||(0,f.default)(t)).call.apply(n,[this].concat((0,m.default)(e))));return o.confirmSelection=function(){var e=o.props,t=e.view,n=e.mediaLibrarySelectedItems;if(!r(t,n,o.props.isParentReady))if(n.length&&""!==o.state.source){var i=n.map(function(e){return(0,d.default)({},e,{ID:(0,P.uniqueId)("media-"),transient:!0})});1===i.length&&"image"===z.default.getMimePrefix(i[0])?(o.copyExternal(i,o.state.source),o.props.onClose({type:"media",items:i})):o.copyExternalAfterLoadingWordPressLibrary(i,o.state.source)}else{var s=n.length?{type:X.ModalViews.GALLERY===t?"gallery":"media",items:n,settings:o.state.gallerySettings}:void 0;o.props.onClose(s)}},o.setDetailSelectedIndex=function(e){o.setState({detailSelectedIndex:e})},o.confirmDeleteMedia=function(e){var t=o.props,n=t.site,r=t.mediaLibrarySelectedItems;if(n&&e){var i=r;X.ModalViews.DETAIL===o.props.view&&(i=i[o.getDetailSelectedIndex()],o.setNextAvailableDetailView()),B.default.delete(n.ID,i),M.default.mc.bumpStat("editor_media_actions","delete_media"),o.props.deleteMedia(n.ID,(0,P.map)(i,"ID"))}},o.deleteMedia=function(){var e=o.props,t=e.view,n=e.mediaLibrarySelectedItems,r=e.translate,i=void 0;i=X.ModalViews.DETAIL===t?1:n.length;var s=r("Are you sure you want to delete this item? Deleted media will no longer appear anywhere on your website, including all posts, pages, and widgets. This cannot be undone.","Are you sure you want to delete these items? Deleted media will no longer appear anywhere on your website, including all posts, pages, and widgets. This cannot be undone.",{count:i});(0,G.default)(s,o.confirmDeleteMedia,r("Delete"),null,{isScary:!0})},o.onAddMedia=function(){(0,D.recordStat)("media_explorer_upload"),(0,D.recordEvent)("Upload Media")},o.onAddAndEditImage=function(){B.default.setLibrarySelectedItems(o.props.site.ID,[]),o.props.setView(X.ModalViews.IMAGE_EDITOR)},o.restoreOriginalMedia=function(e,t){e&&t&&B.default.update(e,{ID:t.ID,media_url:t.guid},!0)},o.onImageEditorDone=function(e,t,n){if(e)return void o.onImageEditorCancel(n);var r=n.fileName,i=n.site,s=n.ID,a=n.resetAllImageEditorState,l=n.width,u=n.height,c=z.default.getMimeType(r),f=(0,d.default)({ID:s,media:{fileName:r,fileContents:t,mimeType:c}},l&&{width:l},u&&{height:u});B.default.update(i.ID,f,!0),a(),o.props.setView(X.ModalViews.DETAIL)},o.handleUpdatePoster=function(e){var t=e.ID,n=e.posterUrl,r=o.props.site,i=(n||"").split("?")[0];r&&B.default.edit(r.ID,{ID:t,thumbnails:{fmt_hd:i,fmt_dvd:i,fmt_std:i}}),o.props.setView(X.ModalViews.DETAIL)},o.handleCancel=function(){var e=o.props.mediaLibrarySelectedItems,t=e[o.getDetailSelectedIndex()];return t?void o.props.setView(X.ModalViews.DETAIL):void o.props.setView(X.ModalViews.LIST)},o.onImageEditorCancel=function(e){var t=e.resetAllImageEditorState;o.handleCancel(),t()},o.onFilterChange=function(e){e!==o.state.filter&&M.default.mc.bumpStat("editor_media_actions","filter_"+(e||"all")),o.setState({filter:e})},o.onScaleChange=function(){o.statsTracking.scale||(M.default.mc.bumpStat("editor_media_actions","scale"),o.statsTracking.scale=!0)},o.onSearch=function(e){o.setState({search:e||void 0}),o.statsTracking.search||(M.default.mc.bumpStat("editor_media_actions","search"),o.statsTracking.search=!0)},o.onSourceChange=function(e){B.default.sourceChanged(o.props.site.ID),o.setState({source:e,search:void 0})},o.onClose=function(){o.props.onClose()},o.editItem=function(e){var t=o.props,n=t.site,r=t.mediaLibrarySelectedItems,i=t.single;if(n){var s=r;s.some(function(t){return t.ID===e.ID})||(s=i?[e]:s.concat(e),B.default.setLibrarySelectedItems(n.ID,s)),o.setDetailSelectedIndex((0,P.findIndex)(s,{ID:e.ID})),M.default.mc.bumpStat("editor_media_actions","edit_button_contextual"),M.default.ga.recordEvent("Media","Clicked Contextual Edit Button"),o.props.setView(X.ModalViews.DETAIL)}},o.updateSettings=function(e){o.setState({gallerySettings:e})},o.state=o.getDefaultState(e),o}return(0,C.default)(t,e),(0,y.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.site&&this.props.visible&&!e.visible&&B.default.setLibrarySelectedItems(e.site.ID,[]),this.props.visible!==e.visible&&(e.visible?(this.setState(this.getDefaultState(e)),e.source&&this.state.source!==e.source&&e.site&&B.default.sourceChanged(e.site.ID)):this.props.resetView())}},{key:"componentDidMount",value:function(){this.statsTracking={}}},{key:"componentWillMount",value:function(){var e=this.props,t=e.view,n=e.mediaLibrarySelectedItems,o=e.site;(0,P.isEmpty)(n)||t!==X.ModalViews.LIST||B.default.setLibrarySelectedItems(o.ID,[])}},{key:"componentWillUnmount",value:function(){this.props.resetView(),B.default.setLibrarySelectedItems(this.props.site.ID,[])}},{key:"getDefaultState",value:function(e){return{filter:"",detailSelectedIndex:0,source:e.source?e.source:"",gallerySettings:e.initialGallerySettings}}},{key:"copyExternalAfterLoadingWordPressLibrary",value:function(e,t){var n=this.props.site;B.default.sourceChanged(n.ID),this.setState({source:"",search:void 0},function(){B.default.addExternal(n.ID,e,t)})}},{key:"copyExternal",value:function(e,t){var n=this.props.site;B.default.addExternal(n.ID,e,t)}},{key:"setNextAvailableDetailView",value:function(){1===this.props.mediaLibrarySelectedItems.length?this.props.setView(X.ModalViews.LIST):this.getDetailSelectedIndex()===this.props.mediaLibrarySelectedItems.length-1&&this.setDetailSelectedIndex(Math.max(this.getDetailSelectedIndex()-1,0))}},{key:"getDetailSelectedIndex",value:function(){var e=this.props.mediaLibrarySelectedItems,t=this.state.detailSelectedIndex;return t>=e.length?0:t}},{key:"getFirstEnabledFilter",value:function(){if(this.props.enabledFilters)return(0,P.head)(this.props.enabledFilters)}},{key:"getModalButtons",value:function(){var e=this;if(!(0,P.includes)([X.ModalViews.IMAGE_EDITOR,X.ModalViews.VIDEO_EDITOR],this.props.view)){var t=this.props.mediaLibrarySelectedItems,n=r(this.props.view,t,this.props.isParentReady),o=[{action:"cancel",label:this.props.translate("Cancel")}],i=function(){var n=e.props.translate("Insert");return(t.length>1||1===t.length&&"image"!==z.default.getMimePrefix(t[0]))&&(n=e.props.translate("Copy to media library")),n};return""!==this.state.source?o.push({action:"confirm",label:this.props.labels.confirm||i(),isPrimary:!0,disabled:n||0===t.length,onClick:this.confirmSelection}):X.ModalViews.GALLERY!==this.props.view&&t.length>1&&!(0,P.some)(t,function(e){return"image"!==z.default.getMimePrefix(e)})?o.push({action:"confirm",label:this.props.translate("Continue"),isPrimary:!0,disabled:n||!this.props.site,onClick:(0,P.partial)(this.props.setView,X.ModalViews.GALLERY)}):o.push({action:"confirm",label:this.props.labels.confirm||this.props.translate("Insert"),isPrimary:!0,disabled:n||0===t.length,onClick:this.confirmSelection}),o}}},{key:"shouldClose",value:function(){return!(0,P.includes)([X.ModalViews.IMAGE_EDITOR,X.ModalViews.VIDEO_EDITOR],this.props.view)}},{key:"renderContent",value:function(){var e=void 0;switch(this.props.view){case X.ModalViews.DETAIL:e=E.default.createElement(ie.default,{site:this.props.site,items:this.props.mediaLibrarySelectedItems,selectedIndex:this.getDetailSelectedIndex(),onRestoreItem:this.restoreOriginalMedia,onSelectedIndexChange:this.setDetailSelectedIndex});break;case X.ModalViews.GALLERY:e=E.default.createElement(A.default,{site:this.props.site,items:this.props.mediaLibrarySelectedItems,settings:this.state.gallerySettings,onUpdateSettings:this.updateSettings});break;case X.ModalViews.IMAGE_EDITOR:var t=this.props,n=t.site,o=t.imageEditorProps,r=t.mediaLibrarySelectedItems,i=this.getDetailSelectedIndex(),s=(0,P.get)(r,i,null);e=E.default.createElement(te.default,(0,l.default)({siteId:(0,P.get)(n,"ID"),media:s,onDone:this.onImageEditorDone,onCancel:this.onImageEditorCancel},o));break;case X.ModalViews.VIDEO_EDITOR:var a=this.props.mediaLibrarySelectedItems,u=this.getDetailSelectedIndex(),d=(0,P.get)(a,u,null);e=E.default.createElement(oe.default,{media:d,onCancel:this.handleCancel,onUpdatePoster:this.handleUpdatePoster});break;default:e=E.default.createElement(R.default,{site:this.props.site,filter:this.state.filter||this.props.defaultFilter||this.getFirstEnabledFilter(),enabledFilters:this.props.enabledFilters,search:this.state.search,source:this.state.source,onAddMedia:this.onAddMedia,onAddAndEditImage:this.onAddAndEditImage,onFilterChange:this.onFilterChange,onScaleChange:this.onScaleChange,onSourceChange:this.onSourceChange,onSearch:this.onSearch,onEditItem:this.editItem,fullScreenDropZone:!1,single:this.props.single,onDeleteItem:this.deleteMedia,onViewDetails:this.props.onViewDetails,mediaLibrarySelectedItems:this.props.mediaLibrarySelectedItems,postId:this.props.postId,scrollable:!0})}return e}},{key:"render",value:function(){return E.default.createElement(H.default,{isVisible:this.props.visible,buttons:this.getModalButtons(),onClose:this.onClose,additionalClassNames:"editor-media-modal",shouldCloseOnOverlayClick:this.shouldClose(),shouldCloseOnEsc:!1},E.default.createElement(V.default,{onEscape:this.onClose}),this.renderContent())}}]),t}(j.Component);ae.propTypes={visible:S.default.bool,mediaLibrarySelectedItems:S.default.arrayOf(S.default.object),onClose:S.default.func,isParentReady:S.default.func,site:S.default.object,siteId:S.default.number,labels:S.default.object,single:S.default.bool,defaultFilter:S.default.string,enabledFilters:S.default.arrayOf(S.default.string),view:S.default.oneOf((0,P.values)(X.ModalViews)),setView:S.default.func,resetView:S.default.func,postId:S.default.number},ae.defaultProps={visible:!1,mediaLibrarySelectedItems:(0,s.default)([]),onClose:P.noop,isParentReady:function(){return!0},labels:(0,s.default)({}),setView:P.noop,resetView:P.noop,translate:P.identity,view:X.ModalViews.LIST,imageEditorProps:{},deleteMedia:function(){}},t.default=(0,T.connect)(function(e,t){var n=t.site,o=t.siteId;return{view:(0,K.getMediaModalView)(e),site:n||(0,$.getSite)(e,o),postId:(0,Y.getEditorPostId)(e)}},{setView:Z.setEditorMediaModalView,resetView:J.resetMediaModalView,deleteMedia:Q.deleteMedia,onViewDetails:(0,P.flow)((0,se.withAnalytics)((0,se.bumpStat)("editor_media_actions","edit_button_dialog")),(0,se.withAnalytics)((0,se.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,P.partial)(Z.setEditorMediaModalView,X.ModalViews.DETAIL))})((0,k.localize)(ae))},"./client/post-editor/media-modal/markup.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("./node_modules/lodash/lodash.js"),s=n("./node_modules/react-dom/server.js"),a=o(s),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/classnames/index.js"),c=o(d),f=n("./client/lib/shortcode/index.js"),p=o(f),m=n("./client/lib/media/utils.js"),h=o(m),g=n("./client/lib/media-serialization/index.js"),v=o(g);r={get:function(e,t,n){var o;return!t||t.hasOwnProperty("status")?"":(o=h.default.getMimePrefix(t),o&&"function"==typeof r.mimeTypes[o]?r.mimeTypes[o](e,t,n):r.link(t))},link:function(e){var t=u.default.createElement("a",{href:e.URL,title:e.title},e.title);return a.default.renderToStaticMarkup(t)},caption:function e(t,n){var o,i,s,e,a;return"string"!=typeof n&&(n=r.get(t,n)),o=p.default.parse(n),o&&o.content?(i=o.content.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),i&&(s=i[1].trim(),e=i[2].trim()),a=o.attrs.named.width,a||(a=v.default.deserialize(s).width),u.default.createElement("dl",{className:(0,c.default)("wp-caption",o.attrs.named.align,o.attrs.named.classes),style:{width:a}},u.default.createElement("dt",{className:"wp-caption-dt",dangerouslySetInnerHTML:{__html:s}}),u.default.createElement("dd",{className:"wp-caption-dd"},e))):null},mimeTypes:{image:function(e,t,n){n=(0,i.assign)({size:"full",align:"none",forceResize:!1},n);var o=void 0,r=void 0;if("full"===n.size)o=t.width,r=t.height;else{var s=h.default.getThumbnailSizeDimensions(n.size,e),l=Math.min(s.width/t.width||1/0,s.height/t.height||1/0);o=Math.round(t.width*l),r=Math.round(t.height*l)}var d=void 0;d=n.forceResize||e&&!e.jetpack&&o&&o!==t.width?{maxWidth:o}:{size:n.size};var f=u.default.createElement("img",{src:h.default.url(t,d),alt:t.alt||t.title,width:isFinite(o)?o:null,height:isFinite(r)?r:null,className:(0,c.default)("align"+n.align,"size-"+n.size,"wp-image-"+t.ID),"data-istransient":t.transient?"istransient":null}),m=a.default.renderToStaticMarkup(f);return t.caption&&o&&(m=p.default.stringify({tag:"caption",attrs:{id:"attachment_"+t.ID,width:o},content:[m,t.caption].join(" ")})),m},audio:function(e,t){return p.default.stringify({tag:"audio",attrs:{src:t.URL}})},video:function(e,t){return h.default.isVideoPressItem(t)?p.default.stringify({tag:"wpvideo",attrs:[t.videopress_guid],type:"single"}):p.default.stringify({tag:"video",attrs:{src:t.URL,height:t.height,width:t.width}})}}},t.default=r,e.exports=t.default},"./client/post-editor/media-modal/preload-image.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/lodash/lodash.js");t.default=(0,o.memoize)(function(e){(new window.Image).src=e}),e.exports=t.default},"./client/post-editor/media-modal/secondary-actions.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/assign.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/extends.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/classnames/index.js"),E=o(j),w=n("./node_modules/lodash/lodash.js"),S=n("./node_modules/gridicons/build/index.js"),k=o(S),T=n("./node_modules/i18n-calypso/index.js"),P=n("./client/lib/media/utils.js"),I=n("./client/state/current-user/selectors.js"),R=n("./client/state/sites/selectors.js"),N=n("./client/state/ui/media-modal/selectors.js"),M=n("./client/state/ui/editor/actions.js"),D=n("./client/state/ui/media-modal/constants.js"),O=n("./client/state/analytics/actions.js"),A=n("./client/components/button/index.jsx"),L=o(A),B=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"getButtons",value:function(){var e=this.props,t=e.disabled,n=e.selectedItems,o=e.site,r=e.translate,i=e.user,s=e.view,a=e.onDelete,l=e.onViewDetails,u=[];D.ModalViews.LIST===s&&n.length&&u.push({key:"edit",text:r("Edit"),disabled:t,primary:!0,onClick:l});var d=n.length&&(0,w.every)(n,function(e){return(0,P.canUserDeleteItem)(e,i,o)});if(D.ModalViews.GALLERY!==s&&d){var c=t||(0,w.some)(n,"transient");u.push({key:"delete",icon:"trash",className:"editor-media-modal__delete",disabled:c,onClick:c?w.noop:a})}return u}},{key:"render",value:function(){return x.default.createElement("div",null,this.getButtons().map(function(e){return x.default.createElement(L.default,(0,a.default)({className:(0,E.default)("editor-media-modal__secondary-action",e.className),"data-e2e-button":e.key,icon:!!e.icon,compact:!0},(0,w.pick)(e,["key","disabled","onClick","primary"])),e.icon&&x.default.createElement(k.default,{icon:e.icon}),e.text&&e.text)}))}}]),t}(_.Component);B.propTypes={user:b.default.object,site:b.default.object,selectedItems:b.default.array,view:b.default.oneOf((0,w.values)(D.ModalViews)),disabled:b.default.bool,onDelete:b.default.func,onViewDetails:b.default.func},B.defaultProps={disabled:!1,onDelete:w.noop},t.default=(0,C.connect)(function(e,t){return{view:(0,N.getMediaModalView)(e),user:(0,I.getCurrentUser)(e),siteSlug:t.site?(0,R.getSiteSlug)(e,t.site.ID):""}},{onViewDetails:(0,w.flow)((0,O.withAnalytics)((0,O.bumpStat)("editor_media_actions","edit_button_dialog")),(0,O.withAnalytics)((0,O.recordGoogleEvent)("Media","Clicked Dialog Edit Button")),(0,w.partial)(M.setEditorMediaModalView,D.ModalViews.DETAIL))},function(e,t,n){return(0,i.default)({},n,e,t,(0,w.pick)(n,["onViewDetails","view"]))})((0,T.localize)(B)),e.exports=t.default},"./client/post-editor/post-editor.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PostEditor=void 0;var r=n("./node_modules/babel-runtime/helpers/extends.js"),i=o(r),s=n("./node_modules/react/react.js"),a=o(s),l=n("./node_modules/create-react-class/index.js"),u=o(l),d=n("./node_modules/react-dom/index.js"),c=o(d),f=n("./node_modules/page/index.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/lodash/lodash.js"),v=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/i18n-calypso/index.js"),b=n("./node_modules/classnames/index.js"),_=o(b),x=n("./node_modules/tinymce/tinymce.js"),C=o(x),j=n("./node_modules/uuid/uuid.js"),E=n("./node_modules/url/url.js"),w=n("./client/lib/posts/actions.js"),S=o(w),k=n("./client/lib/route/index.js"),T=o(k),P=n("./client/lib/posts/post-edit-store.js"),I=o(P),R=n("./client/post-editor/editor-action-bar/index.jsx"),N=o(R),M=n("./client/post-editor/editor-featured-image/index.jsx"),D=o(M),O=n("./client/post-editor/editor-title/index.jsx"),A=o(O),L=n("./client/post-editor/editor-page-slug/index.jsx"),B=o(L),F=n("./client/components/tinymce/index.jsx"),z=o(F),U=n("./client/components/segmented-control/index.jsx"),H=o(U),W=n("./client/components/segmented-control/item.jsx"),V=o(W),q=n("./client/post-editor/invalid-url-dialog.jsx"),G=o(q),K=n("./client/post-editor/restore-post-dialog.jsx"),$=o(K),Y=n("./client/components/email-verification/email-verification-dialog/index.jsx"),J=o(Y),Z=n("./client/lib/posts/utils.js"),X=o(Z),Q=n("./client/post-editor/editor-preview/index.jsx"),ee=o(Q),te=n("./client/lib/posts/stats.js"),ne=n("./client/lib/analytics/index.js"),oe=o(ne),re=n("./client/state/ui/selectors.js"),ie=n("./client/state/ui/editor/actions.js"),se=n("./client/state/ui/editor/last-draft/actions.js"),ae=n("./client/state/ui/editor/sidebar/actions.js"),le=n("./client/state/ui/editor/selectors.js"),ue=n("./client/state/analytics/actions.js"),de=n("./client/state/posts/actions.js"),ce=n("./client/state/posts/selectors.js"),fe=n("./client/state/current-user/selectors.js"),pe=n("./client/state/selectors/has-broken-site-user-connection.js"),me=o(pe),he=n("./client/state/selectors/edited-post-has-content.js"),ge=o(he),ve=n("./client/state/ui/editor/sidebar/constants.js"),ye=n("./client/post-editor/editor-confirmation-sidebar/index.jsx"),be=o(ye),_e=n("./client/post-editor/editor-document-head/index.jsx"),xe=o(_e),Ce=n("./client/post-editor/editor-post-type-unsupported/index.jsx"),je=o(Ce),Ee=n("./client/post-editor/editor-forbidden/index.jsx"),we=o(Ee),Se=n("./client/post-editor/editor-notice/index.jsx"),ke=o(Se),Te=n("./client/post-editor/editor-word-count/index.jsx"),Pe=o(Te),Ie=n("./client/state/preferences/actions.js"),Re=n("./client/state/preferences/selectors.js"),Ne=n("./client/components/data/query-preferences/index.jsx"),Me=o(Ne),De=n("./client/state/ui/layout-focus/actions.js"),Oe=n("./client/state/ui/layout-focus/selectors.js"),Ae=n("./client/lib/protect-form/index.jsx"),Le=n("./client/post-editor/editor-sidebar/index.jsx"),Be=o(Le),Fe=n("./client/blocks/site/index.jsx"),ze=o(Fe),Ue=n("./client/post-editor/editor-status-label/index.jsx"),He=o(Ue),We=n("./client/post-editor/editor-ground-control/index.jsx"),Ve=o(We),qe=n("./client/lib/viewport/index.js"),Ge=n("./client/state/sites/selectors.js"),Ke=n("./client/lib/formatting/index.js"),$e=t.PostEditor=(0,u.default)({displayName:"PostEditor",propTypes:{siteId:h.default.number,preferences:h.default.object,setEditorModePreference:h.default.func,setEditorSidebar:h.default.func,setLayoutFocus:h.default.func.isRequired,setNextLayoutFocus:h.default.func.isRequired,editorModePreference:h.default.string,editorSidebarPreference:h.default.string,user:h.default.object,userUtils:h.default.object,editPath:h.default.string,markChanged:h.default.func.isRequired,markSaved:h.default.func.isRequired,translate:h.default.func.isRequired,hasBrokenPublicizeConnection:h.default.bool,editPost:h.default.func,type:h.default.string},_previewWindow:null,getInitialState:function(){return(0,i.default)({},this.getPostEditState(),{confirmationSidebar:"closed",confirmationSidebarPreference:!0,isSaving:!1,isPublishing:!1,notice:null,selectedText:null,showVerifyEmailDialog:!1,showAutosaveDialog:!0,isLoadingRevision:!1,isTitleFocused:!1,showPreview:!1,isPostPublishPreview:!1,previewAction:null})},getPostEditState:function(){return{savedPost:I.default.getSavedPost(),loadingError:I.default.getLoadingError(),isDirty:I.default.isDirty(),isSaveBlocked:I.default.isSaveBlocked(),hasContent:I.default.hasContent(),previewUrl:I.default.getPreviewUrl(),post:I.default.get(),isNew:I.default.isNew(),isAutosaving:I.default.isAutosaving(),isLoading:I.default.isLoading()}},componentWillMount:function(){I.default.on("change",this.onEditedPostChange),this.debouncedSaveRawContent=(0,g.debounce)(this.saveRawContent,200),this.throttledAutosave=(0,g.throttle)(this.autosave,2e4),this.debouncedAutosave=(0,g.debounce)(this.throttledAutosave,3e3),this.switchEditorVisualMode=this.switchEditorMode.bind(this,"tinymce"),this.switchEditorHtmlMode=this.switchEditorMode.bind(this,"html"),this.debouncedCopySelectedText=(0,g.debounce)(this.copySelectedText,200),this.onPreviewClick=this.onPreview.bind(this,"preview"),this.onViewClick=this.onPreview.bind(this,"view"),this.useDefaultSidebarFocus(),oe.default.mc.bumpStat("calypso_default_sidebar_mode",this.props.editorSidebarPreference),this.setState({isEditorInitialized:!1})},componentDidUpdate:function(e){e.nestedSidebarTarget!==ve.NESTED_SIDEBAR_NONE&&this.props.nestedSidebarTarget===ve.NESTED_SIDEBAR_NONE&&(window.scrollTo(0,1),window.scrollTo(0,0))},componentWillUpdate:function(e,t){var n=t.isNew,o=t.savedPost;!n&&o&&o!==this.state.savedPost&&e.receivePost(o),t.isDirty||e.dirty?this.props.markChanged():this.props.markSaved()},componentDidMount:function(){this.state.post&&this.state.post.content&&this.editor.setEditorContent(this.state.post.content,{initial:!0})},componentWillUnmount:function(){I.default.removeListener("change",this.onEditedPostChange),S.default.stopEditing(),this.debouncedAutosave.cancel(),this.throttledAutosave.cancel(),this.debouncedSaveRawContent.cancel(),this.debouncedCopySelectedText.cancel(),this._previewWindow=null,clearTimeout(this._switchEditorTimeout)},componentWillReceiveProps:function(e){var t=this.props,n=t.siteId,o=t.postId;e.siteId===n&&e.postId!==o&&p.default.replace(e.editPath,null,!1,!1),(e.siteId!==n||e.siteId===n&&e.postId!==o)&&this.useDefaultSidebarFocus(e)},storeEditor:function(e){this.editor=e},useDefaultSidebarFocus:function(e){var t=e||this.props;(0,qe.isWithinBreakpoint)(">660px")&&("open"===t.editorSidebarPreference||t.hasBrokenPublicizeConnection)&&this.props.setLayoutFocus("sidebar")},hideNotice:function(){this.setState({notice:null})},getLayout:function(){return this.props.setLayoutFocus("content")},setConfirmationSidebar:function(e){var t=e.status,n=e.context,o=void 0===n?null:n,r=["closed","open","publishing"],i=r.indexOf(t)>-1?t:"closed",s="open"===this.props.editorSidebarPreference?"sidebar":"content";switch(this.setState({confirmationSidebar:i}),i){case"closed":this.props.setLayoutFocus(s),oe.default.tracks.recordEvent("calypso_editor_confirmation_sidebar_close",{context:o});break;case"open":this.props.setLayoutFocus("editor-confirmation-sidebar"),oe.default.tracks.recordEvent("calypso_editor_confirmation_sidebar_open")}},copySelectedText:function(){var e=C.default.activeEditor.selection.getContent()||null;this.state.selectedText!==e&&this.setState({selectedText:e||null})},handleConfirmationSidebarPreferenceChange:function(e){this.setState({confirmationSidebarPreference:e.target.checked})},toggleSidebar:function(){"sidebar"===this.props.layoutFocus?this.props.closeEditorSidebar():this.props.openEditorSidebar()},loadRevision:function(e){this.setState({selectedRevisionId:null}),this.restoreRevision({content:e.content,excerpt:e.excerpt,title:e.title}),(0,qe.isWithinBreakpoint)("<660px")&&this.props.setLayoutFocus("content")},render:function(){var e=this.props.selectedSite||void 0,t=this.getEditorMode(),n=this.state.loadingError,o=e?e.URL+"/":null,r=void 0,s=void 0,l=void 0;this.state.post&&(r=X.default.isPage(this.state.post),s="trash"===this.state.post.status,l=(0,g.get)(this.state.post.meta,["data","autosave"]));var u=(0,_.default)("post-editor",{"is-loading":!this.state.isEditorInitialized});return a.default.createElement("div",{className:u},a.default.createElement(Me.default,null),a.default.createElement(be.default,{handlePreferenceChange:this.handleConfirmationSidebarPreferenceChange,onPrivatePublish:this.onPublish,onPublish:this.onPublish,post:this.state.post,savedPost:this.state.savedPost,setPostDate:this.setPostDate,setStatus:this.setConfirmationSidebar,site:e,status:this.state.confirmationSidebar}),a.default.createElement(xe.default,null),a.default.createElement(je.default,null),a.default.createElement(we.default,null),a.default.createElement("div",{className:"post-editor__inner"},a.default.createElement(Ve.default,{setPostDate:this.setPostDate,hasContent:this.state.hasContent,isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled,confirmationSidebarStatus:this.state.confirmationSidebar,isDirty:this.state.isDirty||this.props.dirty,isSaveBlocked:this.isSaveBlocked(),isPublishing:this.state.isPublishing,isSaving:this.state.isSaving,loadRevision:this.loadRevision,onPreview:this.onPreviewClick,onPublish:this.onPublish,onSave:this.onSave,onSaveDraft:this.props.onSaveDraft,post:this.state.post,savedPost:this.state.savedPost,site:e,user:this.props.user,userUtils:this.props.userUtils,toggleSidebar:this.toggleSidebar,onMoreInfoAboutEmailVerify:this.onMoreInfoAboutEmailVerify,allPostsUrl:this.getAllPostsUrl(),nestedSidebar:this.state.nestedSidebar,selectedRevisionId:this.state.selectedRevisionId,isSidebarOpened:"sidebar"===this.props.layoutFocus}),a.default.createElement("div",{className:"post-editor__content"},a.default.createElement("div",{className:"post-editor__content-editor"},a.default.createElement(N.default,{isNew:this.state.isNew,onPrivatePublish:this.onPublish,savedPost:this.state.savedPost,site:e,isPostPrivate:X.default.isPrivate(this.state.post),postAuthor:this.state.post?this.state.post.author:null}),a.default.createElement("div",{className:"post-editor__site"},a.default.createElement(ze.default,{compact:!0,site:e,indicator:!1,homeLink:!0,externalLink:!0}),a.default.createElement(He.default,{post:this.state.savedPost})),a.default.createElement("div",{
className:"post-editor__inner-content"},a.default.createElement(D.default,{site:e,post:this.state.post,maxWidth:1462,hasDropZone:!0}),a.default.createElement("div",{className:"post-editor__header"},a.default.createElement(A.default,{onChange:this.onEditorTitleChange,tabIndex:1}),this.state.post&&r&&e?a.default.createElement(B.default,{path:this.state.post.URL&&this.state.post.URL!==o?X.default.getPagePath(this.state.post):o}):null,a.default.createElement(H.default,{className:"post-editor__switch-mode",compact:!0},a.default.createElement(V.default,{selected:"tinymce"===t,onClick:this.switchEditorVisualMode,title:this.props.translate("Edit with a visual editor")},this.props.translate("Visual",{context:"Editor writing mode"})),a.default.createElement(V.default,{selected:"html"===t,onClick:this.switchEditorHtmlMode,title:this.props.translate("Edit the raw HTML code")},"HTML"))),a.default.createElement("hr",{className:"post-editor__header-divider"}),a.default.createElement(z.default,{ref:this.storeEditor,mode:t,tabIndex:2,isNew:this.state.isNew,onSetContent:this.debouncedSaveRawContent,onInit:this.onEditorInitialized,onChange:this.onEditorContentChange,onKeyUp:this.onEditorKeyUp,onFocus:this.onEditorFocus,onMouseUp:this.copySelectedText,onBlur:this.copySelectedText,onTextEditorChange:this.onEditorTextContentChange}),a.default.createElement(Pe.default,{selectedText:this.state.selectedText})))),a.default.createElement(Be.default,{savedPost:this.state.savedPost,post:this.state.post,isNew:this.state.isNew,onPublish:this.onPublish,onTrashingPost:this.onTrashingPost,site:e,setPostDate:this.setPostDate,onSave:this.onSave,isPostPrivate:X.default.isPrivate(this.state.post),confirmationSidebarStatus:this.state.confirmationSidebar,nestedSidebar:this.state.nestedSidebar}),this.props.isSitePreviewable?a.default.createElement(ee.default,{showPreview:this.state.showPreview,onClose:this.onPreviewClose,onEdit:this.onPreviewEdit,isSaving:this.state.isSaving||this.state.isAutosaving,isLoading:this.state.isLoading,isFullScreen:this.state.isPostPublishPreview,previewUrl:this.getPreviewUrl(),postId:this.props.postId,externalUrl:this.getExternalUrl(),editUrl:this.props.editPath,defaultViewportDevice:this.state.isPostPublishPreview?"computer":"tablet",revision:(0,g.get)(this.state,"post.revisions.length",0)}):null,a.default.createElement(ke.default,(0,i.default)({},this.state.notice,{onDismissClick:this.hideNotice,onViewClick:this.onPreview}))),s?a.default.createElement($.default,{onClose:this.onClose,onRestore:this.onSaveTrashed}):null,this.state.showVerifyEmailDialog?a.default.createElement(J.default,{onClose:this.closeVerifyEmailDialog}):null,n?a.default.createElement(G.default,{post:this.state.post,onClose:this.onClose}):null,l&&this.state.showAutosaveDialog?a.default.createElement($.default,{onRestore:this.restoreAutosave,onClose:this.closeAutosaveDialog,isAutosave:!0}):null)},restoreAutosave:function(){this.setState({showAutosaveDialog:!1}),this.restoreRevision((0,g.get)(this.state,"post.meta.data.autosave"))},restoreRevision:function(e){this.setState({isLoadingRevision:!0}),S.default.edit({content:e.content,excerpt:e.excerpt,title:e.title}),this.props.editPost(this.props.siteId,this.props.postId,{title:e.title})},closeAutosaveDialog:function(){this.setState({showAutosaveDialog:!1})},closeVerifyEmailDialog:function(){this.setState({showVerifyEmailDialog:!1})},onEditedPostChange:function(){var e,t,n,o=this,r=this.state.isLoading&&!I.default.isLoading(),i=I.default.getLoadingError();i?this.setState({loadingError:i}):I.default.isNew()&&!this.state.isNew||I.default.isLoading()?this.setState(this.getInitialState(),function(){return o.editor&&o.editor.setEditorContent("")}):this.state.isNew&&this.state.hasContent&&!this.state.isDirty?this.setState(this.getInitialState(),function(){return o.editor&&o.editor.setEditorContent(o.state.post.content)}):(e=this.getPostEditState(),t=e.post,n=this.props.selectedSite,r&&n&&"page"===this.props.type!==X.default.isPage(t)&&p.default.redirect(X.default.getEditURL(t,n)),this.setState(e,function(){this.editor&&(r||this.state.isLoadingRevision)&&this.editor.setEditorContent(this.state.post.content,{initial:!0}),this.state.isLoadingRevision&&this.setState({isLoadingRevision:!1})}))},isSaveBlocked:function(){return this.state.isSaveBlocked||!this.state.isEditorInitialized},onEditorInitialized:function(){this.setState({isEditorInitialized:!0})},onEditorTitleChange:function(){"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"closed",context:"content_edit"}),this.debouncedAutosave()},onEditorContentChange:function(){this.debouncedSaveRawContent(),this.debouncedAutosave()},onEditorTextContentChange:function(){"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"closed",context:"content_edit"}),this.debouncedSaveRawContent(),this.debouncedAutosave()},onEditorKeyUp:function(){"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"closed",context:"content_edit"}),this.debouncedCopySelectedText(),this.debouncedSaveRawContent()},onEditorFocus:function(){c.default.findDOMNode(this.editor).click()},saveRawContent:function(){S.default.editRawContent(this.editor.getContent({format:"raw"}))},autosave:function(){var e;if(this.state.isSaving!==!0&&!this.isSaveBlocked()){this.saveRawContent();var t=(0,i.default)({},this.props.edits,{content:this.editor.getContent()});S.default.edit(t),I.default.isDirty()&&I.default.hasContent()&&this.state.post&&(X.default.isPublished(this.state.savedPost)||X.default.isPublished(this.state.post)?e=function(){}:(this.setState({isSaving:!0}),e=function(e){e&&"NO_CHANGE"!==e.message?this.onSaveDraftFailure(e):this.onSaveDraftSuccess()}.bind(this)),S.default.autosave(e))}},onClose:function(){p.default.back(this.getAllPostsUrl())},getAllPostsUrl:function(){var e=this.props,t=e.type,n=e.selectedSite,o=n,r=void 0;switch(t){case"page":r="/pages";break;case"post":r="/posts";break;default:r="/types/"+t}return"post"!==t||!o||o.jetpack||o.single_user_site||(r+="/my"),o&&(r=T.default.addSiteFragment(r,o.slug)),r},onMoreInfoAboutEmailVerify:function(){this.setState({showVerifyEmailDialog:!0})},onTrashingPost:function(e){var t=X.default.isPage(this.state.post);e?this.setState({notice:{status:"is-error",message:"trashFailure"}}):((0,te.recordStat)(t?"page_trashed":"post_trashed"),(0,te.recordEvent)(t?"Clicked Trash Page Button":"Clicked Trash Post Button"),this.props.markSaved())},onSaveTrashed:function(e,t){this.onSave(e,t)},onSave:function(e,t){var n=(0,i.default)({},this.props.edits);e&&(n.status=e),!X.default.isPublished(this.state.savedPost)&&(!e&&X.default.isPublished(this.state.post)||X.default.isPublished(n))||(n.content=this.editor.getContent(),S.default.saveEdited(n,{isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled},function(e){e&&"NO_CHANGE"!==e.message?this.onSaveDraftFailure(e):this.onSaveDraftSuccess(),"function"==typeof t&&t(e)}.bind(this)),this.setState({isSaving:!0}))},getPreviewUrl:function(){var e=this.state,t=e.post,n=e.previewAction,o=e.previewUrl;return"view"===n&&t?t.URL:o},getExternalUrl:function(){var e=this.state.post;return e?e.URL:this.getPreviewUrl()},onPreview:function(e,t){var n,o="draft";return this.state.previewAction!==e&&this.setState({previewAction:e}),!this.props.isSitePreviewable||t.metaKey||t.ctrlKey?(this._previewWindow&&!this._previewWindow.closed||(this._previewWindow=window.open("about:blank","WordPress.com Post Preview")),this.state.savedPost&&this.state.savedPost.status&&(o=this.state.savedPost.status),n=function(){this._previewWindow?(this._previewWindow.location=this.getPreviewUrl(),this._previewWindow.focus()):this._previewWindow=window.open(this.getPreviewUrl(),"WordPress.com Post Preview")}.bind(this),void("publish"===o?(S.default.edit({content:this.editor.getContent()}),S.default.autosave(n)):this.onSave(null,n))):this.iframePreview()},iframePreview:function(){this.state.isDirty||this.props.dirty?(this.autosave(),setTimeout(function(){this.setState({showPreview:!0})}.bind(this),150)):this.setState({showPreview:!0})},onPreviewClose:function(){this.state.isPostPublishPreview?p.default.back(this.getAllPostsUrl()):this.setState({showPreview:!1,isPostPublishPreview:!1,previewAction:null})},onPreviewEdit:function(){return"open"===this.props.editorSidebarPreference&&this.props.setNextLayoutFocus("sidebar"),this.setState({showPreview:!1,isPostPublishPreview:!1,previewAction:null}),!1},onSaveDraftFailure:function(e){this.onSaveFailure(e,"saveFailure")},onSaveDraftSuccess:function(){var e=this.state.post;X.default.isPublished(e)?this.onSaveSuccess("updated"):this.onSaveSuccess()},onPublish:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.default)({},this.props.edits,{status:"publish"});return this.props.isConfirmationSidebarEnabled&&!1===e?void this.setConfirmationSidebar({status:"open"}):(this.props.isConfirmationSidebarEnabled&&"open"===this.state.confirmationSidebar&&this.setConfirmationSidebar({status:"publishing"}),X.default.isPrivate(this.state.post)?t.status="private":X.default.isFutureDated(this.state.post)&&(t.status="future"),t.content=this.editor.getContent(),S.default.saveEdited(t,{isConfirmationSidebarEnabled:this.props.isConfirmationSidebarEnabled},function(e){e&&"NO_CHANGE"!==e.message?this.onPublishFailure(e):this.onPublishSuccess()}.bind(this)),void this.setState({isSaving:!0,isPublishing:!0}))},onPublishFailure:function(e){this.onSaveFailure(e,"publishFailure"),this.props.isConfirmationSidebarEnabled&&this.setConfirmationSidebar({status:"closed",context:"publish_failure"})},onPublishSuccess:function(){var e=this.state.savedPost,t=void 0;t=X.default.isPrivate(e)?"publishedPrivately":X.default.isFutureDated(e)?"scheduled":"published",this.state.confirmationSidebarPreference||this.props.saveConfirmationSidebarPreference(this.props.siteId,!1),this.props.isConfirmationSidebarEnabled&&this.setConfirmationSidebar({status:"closed",context:"publish_success"}),this.onSaveSuccess(t)},onSaveFailure:function(e,t){this.setState({isSaving:!1,isPublishing:!1,notice:{status:"is-error",error:e,message:t}}),window.scrollTo(0,0)},setPostDate:function(e){var t=this.props,n=t.siteId,o=t.postId,r=e?e.format():null;S.default.edit({date:r}),n&&o&&this.props.editPost(n,o,{date:r}),oe.default.tracks.recordEvent("calypso_editor_publish_date_change",{context:"open"===this.state.confirmationSidebar?"confirmation-sidebar":"post-settings"}),this.checkForDateChange(r)},checkForDateChange:function(e){var t=this.state.savedPost;if(t){var n=this.props.moment(e),o=this.props.moment(t.date),r=!(n.get("date")===o.get("date")&&n.get("month")===o.get("month")&&n.get("year")===o.get("year")),i=!!n.diff(o)&&!!r;"post"===t.type&&X.default.isPublished(t)&&i?this.warnPublishDateChange():this.warnPublishDateChange({clearWarning:!0})}},warnPublishDateChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearWarning,n=void 0!==t&&t;return n?void("warnPublishDateChange"===(0,g.get)(this.state,"notice.message")&&this.hideNotice()):void this.setState({notice:{status:"is-warning",message:"warnPublishDateChange"}})},onSaveSuccess:function(e){var t=I.default.get(),n="private"!==t.status||"closed"!==this.state.confirmationSidebar;"draft"===t.status?this.props.setEditorLastDraft(t.site_ID,t.ID):this.props.resetEditorLastDraft(),this.props.savePostSuccess(t.site_ID,this.props.postId,t,{}),this.props.receivePost(t);var o={isSaving:!1,isPublishing:!1};if(e){o.notice={status:"is-success",message:e};var r=(0,g.get)(window,"document.referrer",""),i=(0,E.parse)(r).hostname,s="updated"===e&&this.props.isEditorOnlyRouteInHistory&&i===this.props.selectedSiteDomain;if(s)return void(window.location.href=this.getExternalUrl());window.scrollTo(0,0),this.props.isSitePreviewable&&n&&(this.setState({isPostPublishPreview:!0}),this.iframePreview())}else o.notice=null;this.setState(o)},getEditorMode:function(){var e="tinymce";return this.props.editorModePreference&&(e=this.props.editorModePreference,this.recordedDefaultEditorMode||(oe.default.mc.bumpStat("calypso_default_editor_mode",e),this.recordedDefaultEditorMode=!0)),e},getContainingTagInfo:function(e,t){var n=e.lastIndexOf("<",t),o=e.lastIndexOf(">",t);if(n>o){var r=e.substr(n),i=r.match(/<\s*(\/)?(\w+)/);if(!i)return null;var s=i[2],a=r.indexOf(">"),l=!!i[1];return{ltPos:n,gtPos:n+a+1,tagType:s,isClosingTag:l}}return null},getCursorMarkerSpan:function(e){var t=e?e:"start";return'<span\n\t\t\t\tdata-mce-type="bookmark"\n\t\t\t\tid="mce_SELREST_'+t+'"\n\t\t\t\tdata-mce-style="overflow:hidden;line-height:0"\n\t\t\t\tstyle="overflow:hidden;line-height:0"\n\t\t\t>&#65279;</span>'},addHTMLBookmarkInTextAreaContent:function(){var e=this.editor._editor.getElement(),t=e.selectionStart,n=e.selectionEnd,o=this.getContainingTagInfo(e.value,t);o&&(t=o.ltPos);var r=this.getContainingTagInfo(e.value,n);r&&(n=r.gtPos);var i=t!==n?"range":"single",s=null;if("range"===i){var a=this.getCursorMarkerSpan("end");s=[e.value.slice(t,n),a].join("")}e.value=[e.value.slice(0,t),this.getCursorMarkerSpan("start"),s,e.value.slice(n)].join(""),this.editor.onTextAreaChange({target:{value:e.value}})},focusHTMLBookmarkInVisualEditor:function(e){var t=e.target.getDoc().getElementById("mce_SELREST_start"),n=e.target.getDoc().getElementById("mce_SELREST_end");if(t){if(e.target.focus(),n){var o=document.createRange();o.setStart(t,0),o.setEnd(n,0),e.target.selection.setRng(o),n.parentNode.removeChild(n)}else e.target.selection.select(t);t.parentNode.removeChild(t),e.target.off("SetContent",this.focusHTMLBookmarkInVisualEditor)}},findBookmarkedPosition:function(e){var t=e.getWin(),n=t.getSelection();if(!(n.rangeCount<=0)){var o="SELRES_"+(0,j.v4)(),r=document.createElement("span");r.className="mce_SELRES_start",r.style.display="inline-block",r.style.width=0,r.style.overflow="hidden",r.style.lineHeight="0px",r.innerHTML=o;var i=document.createElement("span");i.className="mce_SELRES_end",i.style.display="inline-block",i.style.width=0,i.style.overflow="hidden",i.style.lineHeight="0px",i.innerHTML=o;var s=n.getRangeAt(0),a=s.startContainer,l=s.startOffset,u=s.cloneRange();u.collapse(!1),u.insertNode(i),u.setStart(a,l),u.collapse(!0),u.insertNode(r),s.setStartAfter(r),s.setEndBefore(i),n.removeAllRanges(),n.addRange(s);var d=(0,Ke.removep)(e.getContent()),c=new RegExp('<span[^>]*\\s*class="mce_SELRES_start"[^>]+>\\s*'+o+"[^<]*<\\/span>"),f=new RegExp('<span[^>]*\\s*class="mce_SELRES_end"[^>]+>\\s*'+o+"[^<]*<\\/span>"),p=d.match(c),m=d.match(f);return p?{start:p.index,end:m?m.index-p[0].length:null}:null}},switchEditorMode:function(e){var t=this.editor.getContent();if("html"===e){var n=this.findBookmarkedPosition(this.editor._editor);this.editor.setEditorContent(t),this.state.selectedText&&this.copySelectedText(),this.editor.setSelection(n)}else"tinymce"===e&&(this.addHTMLBookmarkInTextAreaContent(),this.editor._editor.on("SetContent",this.focusHTMLBookmarkInVisualEditor));this.props.setEditorModePreference(e),this._switchEditorTimeout=setTimeout(function(){S.default.edit({content:t}),"html"===e?S.default.editRawContent(t):this.saveRawContent()}.bind(this),0)}}),Ye=(0,g.flow)(y.localize,Ae.protectForm,(0,v.connect)(function(e){var t=(0,re.getSelectedSiteId)(e),n=(0,le.getEditorPostId)(e),o=(0,fe.getCurrentUserId)(e),r=(0,ce.getEditedPostValue)(e,t,n,"type");return{siteId:t,postId:n,type:r,selectedSite:(0,re.getSelectedSite)(e),selectedSiteDomain:(0,Ge.getSiteDomain)(e,t),editorModePreference:(0,Re.getPreference)(e,"editor-mode"),editorSidebarPreference:(0,Re.getPreference)(e,"editor-sidebar")||"open",editPath:(0,le.getEditorPath)(e,t,n),edits:(0,ce.getPostEdits)(e,t,n),dirty:(0,ce.isEditedPostDirty)(e,t,n),hasContent:(0,ge.default)(e,t,n),layoutFocus:(0,Oe.getCurrentLayoutFocus)(e),hasBrokenPublicizeConnection:(0,me.default)(e,t,o),isSitePreviewable:(0,Ge.isSitePreviewable)(e,t),isEditorOnlyRouteInHistory:(0,le.isEditorOnlyRouteInHistory)(e),isConfirmationSidebarEnabled:(0,le.isConfirmationSidebarEnabled)(e,t)}},{setEditorLastDraft:se.setEditorLastDraft,resetEditorLastDraft:se.resetEditorLastDraft,receivePost:de.receivePost,editPost:de.editPost,savePostSuccess:de.savePostSuccess,setEditorModePreference:(0,g.partial)(Ie.savePreference,"editor-mode"),setEditorSidebar:(0,g.partial)(Ie.savePreference,"editor-sidebar"),setLayoutFocus:De.setLayoutFocus,setNextLayoutFocus:De.setNextLayoutFocus,saveConfirmationSidebarPreference:ie.saveConfirmationSidebarPreference,recordTracksEvent:ue.recordTracksEvent,closeEditorSidebar:ae.closeEditorSidebar,openEditorSidebar:ae.openEditorSidebar},null,{pure:!1}));t.default=Ye($e)},"./client/post-editor/restore-post-dialog.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),a=o(s),l=n("./node_modules/babel-runtime/helpers/createClass.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/inherits.js"),p=o(f),m=n("./node_modules/prop-types/index.js"),h=o(m),g=n("./node_modules/react/react.js"),v=o(g),y=n("./node_modules/react-redux/es/index.js"),b=n("./node_modules/i18n-calypso/index.js"),_=n("./node_modules/lodash/lodash.js"),x=n("./client/components/dialog/index.jsx"),C=o(x),j=n("./client/components/forms/form-button/index.jsx"),E=o(j),w=n("./client/state/ui/selectors.js"),S=n("./client/state/ui/editor/selectors.js"),k=n("./client/state/posts/selectors.js"),T=function(e){function t(){var e,n,o,r;(0,a.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=(0,c.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),o.restorePost=function(){var e=o.props,t=e.isAutosave,n=e.userCanDeletePost,r=e.onRestore;t?r():n&&r("draft")},o.getStrings=function(){var e=o.props,t=e.isAutosave,n=e.postType,r=e.translate,i="page"===n;return t?i?{dialogTitle:r("Saved Draft"),dialogContent:r("A more recent revision of this page exists. Restore?")}:{dialogTitle:r("Saved Draft"),dialogContent:r("A more recent revision of this post exists. Restore?")}:i?{dialogTitle:r("Deleted Page"),dialogContent:r("This page has been sent to the trash. Restore it to continue writing.")}:{dialogTitle:r("Deleted Post"),dialogContent:r("This post has been sent to the trash. Restore it to continue writing.")}},r=n,(0,c.default)(o,r)}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.translate,o=this.getStrings(),r=[v.default.createElement(E.default,{key:"restore",isPrimary:!0,onClick:this.restorePost},n("Restore")),v.default.createElement(E.default,{key:"back",isPrimary:!1,onClick:t},n("Don't restore"))];return v.default.createElement(C.default,{isVisible:!0,buttons:r},v.default.createElement("h1",null,o.dialogTitle),v.default.createElement("p",null,o.dialogContent))}}]),t}(g.Component);T.propTypes={translate:h.default.func,onClose:h.default.func,onRestore:h.default.func,isAutosave:h.default.bool,postType:h.default.string,userCanDeletePost:h.default.bool},T.defaultProps={onClose:_.noop,onRestore:_.noop,isAutosave:!1},t.default=(0,y.connect)(function(e){var t=(0,w.getSelectedSiteId)(e),n=(0,S.getEditorPostId)(e),o=(0,k.getEditedPostValue)(e,t,n,"capabilities");return{postType:(0,k.getEditedPostValue)(e,t,n,"type"),userCanDeletePost:(0,_.get)(o,"delete_post")}})((0,b.localize)(T)),e.exports=t.default},"./client/post-editor/term-token-field/index.jsx":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/babel-runtime/core-js/object/keys.js"),i=o(r),s=n("./node_modules/babel-runtime/helpers/defineProperty.js"),a=o(s),l=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),u=o(l),d=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/createClass.js"),p=o(f),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=o(m),g=n("./node_modules/babel-runtime/helpers/inherits.js"),v=o(g),y=n("./node_modules/prop-types/index.js"),b=o(y),_=n("./node_modules/react/react.js"),x=o(_),C=n("./node_modules/react-redux/es/index.js"),j=n("./node_modules/lodash/lodash.js"),E=n("./node_modules/debug/browser.js"),w=o(E),S=n("./client/state/ui/selectors.js"),k=n("./client/state/terms/selectors.js"),T=n("./client/state/ui/editor/selectors.js"),P=n("./client/state/posts/selectors.js"),I=n("./client/state/post-types/taxonomies/selectors.js"),R=n("./client/state/posts/actions.js"),N=n("./client/components/token-field/index.jsx"),M=o(N),D=n("./client/lib/formatting/index.js"),O=n("./client/lib/posts/stats.js"),A=n("./client/components/data/query-terms/index.jsx"),L=o(A),B=(0,w.default)("calypso:post-editor:editor-terms"),F={number:1e3,order_by:"count",order:"DESC"},z=20,U=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){this.boundOnTermsChange=this.onTermsChange.bind(this)}},{key:"onTermsChange",value:function(e){B("onTermsChange",e,this);var t=void 0,n=void 0;e.length>this.getPostTerms().length?(t="term_added",n="Added Term"):(t="term_removed",n="Removed Term"),(0,O.recordStat)(t),(0,O.recordEvent)("Changed Terms",n);var o=this.props,r=o.siteId,i=o.postId,s=o.taxonomyName;this.props.editPost(r,i,{terms:(0,a.default)({},s,e)})}},{key:"getPostTerms",value:function(){var e=this.props,t=e.postTerms,n=e.taxonomyName;return t&&t[n]?Array.isArray(t[n])?t[n]:(0,i.default)(t[n]):[]}},{key:"render",value:function(){var e=(0,j.map)(this.props.terms,"name");return x.default.createElement("div",null,x.default.createElement(L.default,{siteId:this.props.siteId,taxonomy:this.props.taxonomyName,query:F}),x.default.createElement(M.default,{value:this.getPostTerms(),displayTransform:D.decodeEntities,suggestions:e,onChange:this.boundOnTermsChange,maxSuggestions:z}))}}]),t}(x.default.Component);U.propTypes={siteId:b.default.number,postId:b.default.number,postTerms:b.default.object,taxonomyName:b.default.string,taxonomyLabel:b.default.string,terms:b.default.arrayOf(b.default.object),editPost:b.default.func},t.default=(0,C.connect)(function(e,t){var n=(0,S.getSelectedSiteId)(e),o=(0,T.getEditorPostId)(e),r=(0,P.getEditedPostValue)(e,n,o,"type"),i=(0,I.getPostTypeTaxonomy)(e,n,r,t.taxonomyName);return{siteId:n,postId:o,taxonomyLabel:i&&i.label,terms:(0,k.getTerms)(e,n,t.taxonomyName),postTerms:(0,P.getEditedPostValue)(e,n,o,"terms")}},{editPost:R.editPost})(U),e.exports=t.default},"./client/state/current-user/email-verification/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetVerifyEmailState=t.verifyEmail=void 0;var o=n("./client/state/action-types.js");t.verifyEmail=function(){return{type:o.EMAIL_VERIFY_REQUEST}},t.resetVerifyEmailState=function(){return{type:o.EMAIL_VERIFY_STATE_RESET}}},"./client/state/jetpack/modules/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.JETPACK_MODULES_RECEIVE,siteId:e,modules:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchModuleList=t.deactivateModule=t.activateModule=void 0;var i=n("./node_modules/babel-runtime/helpers/extends.js"),s=o(i);t.receiveJetpackModules=r;var a=n("./node_modules/lodash/lodash.js"),l=n("./client/state/action-types.js"),u=n("./client/lib/wp/browser.js"),d=o(u);t.activateModule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){return o({type:l.JETPACK_MODULE_ACTIVATE,siteId:e,moduleSlug:t,silent:n}),d.default.undocumented().jetpackModuleActivate(e,t).then(function(){o({type:l.JETPACK_MODULE_ACTIVATE_SUCCESS,siteId:e,moduleSlug:t,silent:n})}).catch(function(r){o({type:l.JETPACK_MODULE_ACTIVATE_FAILURE,siteId:e,moduleSlug:t,silent:n,error:r.message})})}},t.deactivateModule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){return o({type:l.JETPACK_MODULE_DEACTIVATE,siteId:e,moduleSlug:t,silent:n}),d.default.undocumented().jetpackModuleDeactivate(e,t).then(function(){o({type:l.JETPACK_MODULE_DEACTIVATE_SUCCESS,siteId:e,moduleSlug:t,silent:n})}).catch(function(r){o({type:l.JETPACK_MODULE_DEACTIVATE_FAILURE,siteId:e,moduleSlug:t,silent:n,error:r.message})})}},t.fetchModuleList=function(e){return function(t){return t({type:l.JETPACK_MODULES_REQUEST,siteId:e}),d.default.undocumented().getJetpackModules(e).then(function(n){var o=n.data,i=(0,a.mapValues)(o,function(e){return(0,s.default)({active:e.activated},(0,a.omit)(e,"activated"))});t(r(e,i)),t({type:l.JETPACK_MODULES_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.JETPACK_MODULES_REQUEST_FAILURE,siteId:e,error:n.message})})}}},"./client/state/page-templates/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.PAGE_TEMPLATES_RECEIVE,siteId:e,templates:t}}function i(e){return function(t){return t({type:l.PAGE_TEMPLATES_REQUEST,siteId:e}),a.default.site(e).pageTemplates().then(function(n){var o=n.templates;t(r(e,o)),t({type:l.PAGE_TEMPLATES_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.PAGE_TEMPLATES_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePageTemplates=r,t.requestPageTemplates=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/page-templates/selectors.js":function(e,t,n){"use strict";function o(e,t){return!!e.pageTemplates.requesting[t]}function r(e,t){return e.pageTemplates.items[t]||null}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingPageTemplates=o,t.getPageTemplates=r},"./client/state/post-types/taxonomies/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return{type:l.POST_TYPES_TAXONOMIES_RECEIVE,siteId:e,postType:t,taxonomies:n}}function i(e,t){return function(n){return n({type:l.POST_TYPES_TAXONOMIES_REQUEST,siteId:e,postType:t}),a.default.site(e).postType(t).taxonomiesList().then(function(o){var i=o.taxonomies;n(r(e,t,i)),n({type:l.POST_TYPES_TAXONOMIES_REQUEST_SUCCESS,siteId:e,postType:t})}).catch(function(o){n({type:l.POST_TYPES_TAXONOMIES_REQUEST_FAILURE,siteId:e,postType:t,error:o})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receivePostTypeTaxonomies=r,t.requestPostTypeTaxonomies=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/post-types/taxonomies/selectors.js":function(e,t,n){"use strict";function o(e,t,n){return(0,s.get)(e.postTypes.taxonomies.requesting,[t,n],!1)}function r(e,t,n){var o=(0,s.get)(e.postTypes.taxonomies.items,[t,n]);return o?(0,s.values)(o):null}function i(e,t,n,o){var i=r(e,t,n);return i?(0,s.find)(i,{name:o})||null:null}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingPostTypeTaxonomies=o,t.getPostTypeTaxonomies=r,t.getPostTypeTaxonomy=i;var s=n("./node_modules/lodash/lodash.js")},"./client/state/sharing/keyring/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e){return e({type:c.KEYRING_CONNECTIONS_REQUEST}),d.default.undocumented().mekeyringConnections().then(function(t){var n=t.connections;e({type:c.KEYRING_CONNECTIONS_RECEIVE,connections:n}),e({type:c.KEYRING_CONNECTIONS_REQUEST_SUCCESS})}).catch(function(t){return e({type:c.KEYRING_CONNECTIONS_REQUEST_FAILURE,error:t})})}}function i(e){return{type:c.KEYRING_CONNECTION_DELETE,connection:e}}function s(e){return function(t){return d.default.undocumented().deletekeyringConnection(e.ID).then(function(){return t(i(e))}).catch(function(n){n&&404===n.statusCode&&t(i(e)),t({type:c.KEYRING_CONNECTION_DELETE_FAILURE,error:(0,l.default)({},n,{label:e.label})})})}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/helpers/extends.js"),l=o(a);t.requestKeyringConnections=r,t.deleteKeyringConnection=i,t.deleteStoredKeyringConnection=s;var u=n("./client/lib/wp/browser.js"),d=o(u),c=n("./client/state/action-types.js")},"./client/state/sharing/keyring/selectors.js":function(e,t,n){"use strict";function o(e){return(0,l.values)(e.sharing.keyring.items)}function r(e,t){return e.sharing.keyring.items[t]||null}function i(e,t){return(0,l.filter)(o(e),{service:t})}function s(e,t){return(0,l.filter)(e.sharing.keyring.items,function(e){return e.shared||e.keyring_connection_user_ID===t})}function a(e){return e.sharing.keyring.isFetching}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyringConnections=o,t.getKeyringConnectionById=r,t.getKeyringConnectionsByName=i,t.getUserConnections=s,t.isKeyringConnectionsFetching=a;var l=n("./node_modules/lodash/lodash.js")},"./client/state/sharing/publicize/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:_.PUBLICIZE_SHARE_DISMISS,siteId:e,postId:t}}function i(e,t,n,o){return function(r){return r({type:_.PUBLICIZE_SHARE,siteId:e,postId:t,skippedConnections:n,message:o}),new v.default(function(i){b.default.undocumented().publicizePost(e,t,o,n,function(n,o){r(n||!o.results?{type:_.PUBLICIZE_SHARE_FAILURE,siteId:e,postId:t,error:n}:{type:_.PUBLICIZE_SHARE_SUCCESS,siteId:e,postId:t}),i()})})}}function s(e){return function(t){return t({type:_.PUBLICIZE_CONNECTIONS_REQUEST,siteId:e}),b.default.undocumented().siteConnections(e).then(function(n){t(p(e,n)),t({type:_.PUBLICIZE_CONNECTIONS_REQUEST_SUCCESS,siteId:e})}).catch(function(n){return t({type:_.PUBLICIZE_CONNECTIONS_REQUEST_FAILURE,siteId:e,error:n})})}}function a(e,t){return function(n){return n({type:_.PUBLICIZE_CONNECTION_REQUEST,connectionId:t,siteId:e}),b.default.undocumented().site(e).getConnection(t).then(function(o){n({type:_.PUBLICIZE_CONNECTION_RECEIVE,connection:o,siteId:e}),n({type:_.PUBLICIZE_CONNECTION_REQUEST_SUCCESS,connectionId:t,siteId:e})}).catch(function(o){return n({type:_.PUBLICIZE_CONNECTION_REQUEST_FAILURE,connectionId:t,error:o,siteId:e})})}}function l(e,t,n){return function(o){return b.default.undocumented().createConnection(t,e,n,{shared:!1}).then(function(e){return o({type:_.PUBLICIZE_CONNECTION_CREATE,connection:e})}).catch(function(e){return o(c(e))})}}function u(e,t){return function(n){return b.default.undocumented().updateConnection(e.site_ID,e.ID,t).then(function(e){return n({type:_.PUBLICIZE_CONNECTION_UPDATE,connection:e})}).catch(function(t){return n({type:_.PUBLICIZE_CONNECTION_UPDATE_FAILURE,error:(0,h.default)({},t,{label:e.label})})})}}function d(e){return function(t){return b.default.undocumented().deleteSiteConnection(e.site_ID,e.ID).then(function(){return t(f(e))}).catch(function(n){n&&404===n.statusCode&&t(f(e)),t({type:_.PUBLICIZE_CONNECTION_DELETE_FAILURE,error:(0,h.default)({},n,{label:e.label})})})}}function c(e){return{type:_.PUBLICIZE_CONNECTION_CREATE_FAILURE,error:e}}function f(e){return{type:_.PUBLICIZE_CONNECTION_DELETE,connection:e}}function p(e,t){return{type:_.PUBLICIZE_CONNECTIONS_RECEIVE,siteId:e,data:t}}Object.defineProperty(t,"__esModule",{value:!0});var m=n("./node_modules/babel-runtime/helpers/extends.js"),h=o(m),g=n("./node_modules/babel-runtime/core-js/promise.js"),v=o(g);t.dismissShareConfirmation=r,t.sharePost=i,t.fetchConnections=s,t.fetchConnection=a,t.createSiteConnection=l,t.updateSiteConnection=u,t.deleteSiteConnection=d,t.failCreateConnection=c,t.deleteConnection=f,t.receiveConnections=p;var y=n("./client/lib/wp/browser.js"),b=o(y),_=n("./client/state/action-types.js")},"./client/state/sharing/services/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{
default:e}}function r(){return function(e){return e({type:a.KEYRING_SERVICES_REQUEST}),s.default.undocumented().metaKeyring().then(function(t){e({type:a.KEYRING_SERVICES_RECEIVE,services:t.services}),e({type:a.KEYRING_SERVICES_REQUEST_SUCCESS})}).catch(function(t){return e({type:a.KEYRING_SERVICES_REQUEST_FAILURE,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.requestKeyringServices=r;var i=n("./client/lib/wp/browser.js"),s=o(i),a=n("./client/state/action-types.js")},"./client/state/sharing/services/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e.sharing.services.items}function i(e,t){return(0,u.filter)(r(e),{type:t})}function s(e,t){var n=r(e);return!!n[t]&&n[t]}function a(e,t,n){var o=i(e,n);return t?o.filter(function(n){return!((0,f.isJetpackSite)(e,t)&&!n.jetpack_support)&&(!((0,f.isJetpackSite)(e,t)&&n.jetpack_module_required&&!(0,f.isJetpackModuleActive)(e,t,n.jetpack_module_required))&&(!("eventbrite"===n.ID&&!(0,c.default)(e,t,"manage_options"))&&!("publicize"===n.type&&!(0,c.default)(e,t,"publish_posts"))))}):o}function l(e){return e.sharing.services.isFetching}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyringServices=r,t.getKeyringServicesByType=i,t.getKeyringServiceByName=s,t.getEligibleKeyringServices=a,t.isKeyringServicesFetching=l;var u=n("./node_modules/lodash/lodash.js"),d=n("./client/state/selectors/can-current-user.js"),c=o(d),f=n("./client/state/sites/selectors.js")},"./client/state/site-settings/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:f.SITE_SETTINGS_RECEIVE,siteId:e,settings:t}}function i(e,t){return{type:f.SITE_SETTINGS_UPDATE,siteId:e,settings:t}}function s(e){return function(t){return t({type:f.SITE_SETTINGS_REQUEST,siteId:e}),c.default.undocumented().settings(e).then(function(n){var o=n.name,i=n.description,s=n.settings,a=(0,u.default)({},(0,p.normalizeSettings)(s),{blogname:o,blogdescription:i});t(r(e,a)),t({type:f.SITE_SETTINGS_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:f.SITE_SETTINGS_REQUEST_FAILURE,siteId:e,error:n})})}}function a(e,t){return function(n){return n({type:f.SITE_SETTINGS_SAVE,siteId:e}),c.default.undocumented().settings(e,"post",t).then(function(t){var o=t.updated;n(i(e,(0,p.normalizeSettings)(o))),n({type:f.SITE_SETTINGS_SAVE_SUCCESS,siteId:e})}).catch(function(t){n({type:f.SITE_SETTINGS_SAVE_FAILURE,siteId:e,error:t})})}}Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/babel-runtime/helpers/extends.js"),u=o(l);t.receiveSiteSettings=r,t.updateSiteSettings=i,t.requestSiteSettings=s,t.saveSiteSettings=a;var d=n("./client/lib/wp/browser.js"),c=o(d),f=n("./client/state/action-types.js"),p=n("./client/state/site-settings/utils.js")},"./client/state/site-settings/utils.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,s.default)(e).reduce(function(t,n){switch(n){case"default_category":t[n]=parseInt(e[n]);break;default:t[n]=e[n]}return t},{})}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/babel-runtime/core-js/object/keys.js"),s=o(i);t.normalizeSettings=r},"./client/state/sites/media-storage/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.SITE_MEDIA_STORAGE_RECEIVE,mediaStorage:e,siteId:t}}function i(e){return function(t){return t({type:l.SITE_MEDIA_STORAGE_REQUEST,siteId:e}),a.default.undocumented().site(e).mediaStorage().then(function(n){t(r(n,e)),t({type:l.SITE_MEDIA_STORAGE_REQUEST_SUCCESS,siteId:e})}).catch(function(n){t({type:l.SITE_MEDIA_STORAGE_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMediaStorage=r,t.requestMediaStorage=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/terms/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return function(o){var r=(0,v.uniqueId)("temporary");return o(a(e,t,(0,g.default)({},n,{ID:r}))),b.default.site(e).taxonomy(t).term().add(n).then(function(n){return o(a(e,t,n)),n},function(){return m.default.resolve()}).then(function(n){return o(u(e,t,r)),n})}}function i(e,t,n,o,r){return function(i,s){return b.default.site(e).taxonomy(t).term(o).update(r).then(function(o){var r=s(),a=(0,v.filter)((0,w.getTerms)(r,e,t),{parent:n}).map(function(e){return(0,g.default)({},e,{parent:o.ID})});i(u(e,t,n)),i(l(e,t,a.concat([o])));var d=(0,j.getSitePostsByTerm)(r,e,t,n);d.forEach(function(r){var s=(0,v.filter)(r.terms[t],function(e){return e.ID!==n});s.push(o),i((0,x.editPost)(e,r.ID,{terms:(0,f.default)({},t,s)}))});var c=(0,E.getSiteSettings)(r,e);return"category"===t&&(0,v.get)(c,["default_category"])===n&&o.ID!==n&&i((0,C.updateSiteSettings)(e,{default_category:o.ID})),o})}}function s(e,t,n,o){return function(r,i){return b.default.site(e).taxonomy(t).term(o).delete().then(function(){var o=i(),s=(0,w.getTerm)(o,e,t,n),d=(0,v.get)(s,"post_count",0),c=(0,v.filter)((0,w.getTerms)(o,e,t),function(e){return e.parent===n}).map(function(e){return(0,g.default)({},e,{parent:s.parent})});c.length&&r(l(e,t,c));var p=(0,j.getSitePostsByTerm)(o,e,t,n);if(p.forEach(function(o){var i=(0,v.filter)(o.terms[t],function(e){return e.ID!==n});r((0,x.editPost)(e,o.ID,{terms:(0,f.default)({},t,i)}))}),"category"===t&&d>0){var m=(0,E.getSiteSettings)(o,e),h=(0,w.getTerm)(o,e,t,(0,v.get)(m,["default_category"]));h&&r(a(e,t,(0,g.default)({},h,{post_count:h.post_count+d})))}r(u(e,t,n))})}}function a(e,t,n){return l(e,t,[n])}function l(e,t,n,o,r){return{type:_.TERMS_RECEIVE,siteId:e,taxonomy:t,terms:n,query:o,found:r}}function u(e,t,n){return{type:_.TERM_REMOVE,siteId:e,taxonomy:t,termId:n}}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(o){return o({type:_.TERMS_REQUEST,siteId:e,taxonomy:t,query:n}),b.default.site(e).taxonomy(t).termsList(n).then(function(r){o({type:_.TERMS_REQUEST_SUCCESS,siteId:e,taxonomy:t,query:n}),o(l(e,t,r.terms,n,r.found))}).catch(function(r){o({type:_.TERMS_REQUEST_FAILURE,siteId:e,taxonomy:t,query:n,error:r})})}}Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/babel-runtime/helpers/defineProperty.js"),f=o(c),p=n("./node_modules/babel-runtime/core-js/promise.js"),m=o(p),h=n("./node_modules/babel-runtime/helpers/extends.js"),g=o(h);t.addTerm=r,t.updateTerm=i,t.deleteTerm=s,t.receiveTerm=a,t.receiveTerms=l,t.removeTerm=u,t.requestSiteTerms=d;var v=n("./node_modules/lodash/lodash.js"),y=n("./client/lib/wp/browser.js"),b=o(y),_=n("./client/state/action-types.js"),x=n("./client/state/posts/actions.js"),C=n("./client/state/site-settings/actions.js"),j=n("./client/state/posts/selectors.js"),E=n("./client/state/site-settings/selectors.js"),w=n("./client/state/terms/selectors.js")},"./client/state/terms/selectors.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o){var r=(0,h.getSerializedTermsQuery)(o);return!!(0,f.get)(e.terms.queryRequests,[t,n,r])}function i(e,t,n,o){var i=s(e,t,n,o);return null!==i&&(0,f.range)(1,i+1).some(function(i){var s=(0,c.default)({},o,{page:i});return r(e,t,n,s)})}function s(e,t,n,o){var r=(0,f.get)(e.terms.queries,[t,n]);if(!r)return null;var i=r.getNumberOfPages(o);return null===i?null:Math.max(i,1)}function a(e,t,n){var o=(0,f.get)(e.terms.queries,[t,n]);return o?o.getItems():null}function l(e,t,n,o){var r=(0,f.get)(e.terms.queries,[t,n]);if(!r)return null;var i=r.getItem(o);return i?i:null}function u(e,t,n,o){var r=(0,f.get)(e.terms.queries,[t,n]);return r?r.getFound(o):null}Object.defineProperty(t,"__esModule",{value:!0}),t.getTermsForQueryIgnoringPage=t.getTermsForQuery=void 0;var d=n("./node_modules/babel-runtime/helpers/extends.js"),c=o(d);t.isRequestingTermsForQuery=r,t.isRequestingTermsForQueryIgnoringPage=i,t.getTermsLastPageForQuery=s,t.getTerms=a,t.getTerm=l,t.countFoundTermsForQuery=u;var f=n("./node_modules/lodash/lodash.js"),p=n("./client/lib/create-selector/index.js"),m=o(p),h=n("./client/state/terms/utils.js");t.getTermsForQuery=(0,m.default)(function(e,t,n,o){var r=(0,f.get)(e.terms.queries,[t,n]);return r?r.getItems(o):null},function(e,t,n){return(0,f.get)(e.terms.queries,[t,n])},function(e,t,n,o){var r=(0,h.getSerializedTermsQuery)(o);return[t,n,r].join()}),t.getTermsForQueryIgnoringPage=(0,m.default)(function(e,t,n,o){var r=(0,f.get)(e.terms.queries,[t,n]);return r?r.getItemsIgnoringPage(o):null},function(e,t,n){return(0,f.get)(e.terms.queries,[t,n])},function(e,t,n,o){var r=(0,h.getSerializedTermsQueryWithoutPage)(o);return[t,n,r].join()})},"./client/state/ui/drop-zone/actions.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:i.DROPZONE_SHOW,dropZoneName:e}}function r(e){return{type:i.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=o,t.hideDropZone=r;var i=n("./client/state/action-types.js")},"./client/state/ui/editor/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return{type:h.EDITOR_START,siteId:e,postId:t,postType:n}}function i(e,t){return{type:h.EDITOR_STOP,siteId:e,postId:t}}function s(e){return{type:h.EDITOR_PASTE_EVENT,source:e}}function a(e){var t=(0,v.setMediaModalView)(e),n=x[e];return n?(0,y.withAnalytics)((0,y.bumpStat)("editor_media_actions",n),t):t}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,o){var r=(0,_.getPreference)(o(),"editorConfirmationDisabledSites");n(t?(0,b.savePreference)("editorConfirmationDisabledSites",(0,m.filter)(r,function(t){return e!==t})):(0,b.savePreference)("editorConfirmationDisabledSites",[].concat((0,c.default)(r),[e]))),n((0,y.recordTracksEvent)(t?"calypso_publish_confirmation_preference_enable":"calypso_publish_confirmation_preference_disable")),n((0,y.bumpStat)("calypso_publish_confirmation",t?"enabled":"disabled"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.MODAL_VIEW_STATS=void 0;var u,d=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=o(d),f=n("./node_modules/babel-runtime/helpers/defineProperty.js"),p=o(f);t.startEditingPost=r,t.stopEditingPost=i,t.pasteEvent=s,t.setEditorMediaModalView=a,t.saveConfirmationSidebarPreference=l;var m=n("./node_modules/lodash/lodash.js"),h=n("./client/state/action-types.js"),g=n("./client/state/ui/media-modal/constants.js"),v=n("./client/state/ui/media-modal/actions.js"),y=n("./client/state/analytics/actions.js"),b=n("./client/state/preferences/actions.js"),_=n("./client/state/preferences/selectors.js"),x=t.MODAL_VIEW_STATS=(u={},(0,p.default)(u,g.ModalViews.LIST,"view_list"),(0,p.default)(u,g.ModalViews.DETAIL,"view_detail"),(0,p.default)(u,g.ModalViews.GALLERY,"view_gallery"),(0,p.default)(u,g.ModalViews.IMAGE_EDITOR,"view_edit"),(0,p.default)(u,g.ModalViews.VIDEO_EDITOR,"view_edit"),u)},"./client/state/ui/editor/contact-form/actions.js":function(e,t,n){"use strict";function o(){return{type:u.EDITOR_CONTACT_FORM_CLEAR}}function r(e){return{type:u.EDITOR_CONTACT_FORM_LOAD,contactForm:e}}function i(){return{type:u.EDITOR_CONTACT_FORM_FIELD_ADD}}function s(e){return{type:u.EDITOR_CONTACT_FORM_FIELD_REMOVE,index:e}}function a(e,t){return{type:u.EDITOR_CONTACT_FORM_FIELD_UPDATE,index:e,field:t}}function l(e){return{type:u.EDITOR_CONTACT_FORM_SETTINGS_UPDATE,settings:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.formClear=o,t.formLoad=r,t.fieldAdd=i,t.fieldRemove=s,t.fieldUpdate=a,t.settingsUpdate=l;var u=n("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/actions.js":function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function i(){return{type:m.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function s(){return{type:m.IMAGE_EDITOR_FLIP}}function a(e){return{type:m.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:m.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function u(e,t,n,o){return{type:m.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:n,title:o}}function d(e,t,n,o){return{type:m.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:n,rightBound:o}}function c(e,t,n,o){return{type:m.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:n,heightRatio:o}}function f(e,t,n,o){return{type:m.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:n,heightRatio:o}}function p(e,t){return{type:m.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=o,t.resetAllImageEditorState=r,t.imageEditorRotateCounterclockwise=i,t.imageEditorFlip=s,t.setImageEditorAspectRatio=a,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=u,t.setImageEditorCropBounds=d,t.imageEditorComputedCrop=c,t.imageEditorCrop=f,t.setImageEditorImageHasLoaded=p;var m=n("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/selectors.js":function(e,t,n){"use strict";function o(e){return e.ui.editor.imageEditor.transform}function r(e){return e.ui.editor.imageEditor.fileInfo}function i(e){return e.ui.editor.imageEditor.hasChanges}function s(e){return!e.ui.editor.imageEditor.imageIsLoading}function a(e){return e.ui.editor.imageEditor.cropBounds}function l(e){return e.ui.editor.imageEditor.crop}function u(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=o,t.getImageEditorFileInfo=r,t.imageEditorHasChanges=i,t.isImageEditorImageLoaded=s,t.getImageEditorCropBounds=a,t.getImageEditorCrop=l,t.getImageEditorAspectRatio=u},"./client/state/ui/editor/sidebar/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setNestedSidebar=t.closeEditorSidebar=t.openEditorSidebar=void 0;var o=n("./client/state/analytics/actions.js"),r=n("./client/state/action-types.js"),i=n("./client/state/ui/layout-focus/actions.js");t.openEditorSidebar=function(){return function(e){return e((0,o.withAnalytics)((0,o.composeAnalytics)((0,o.recordGoogleEvent)("Editor","Sidebar Toggle","open"),(0,o.bumpStat)("editor_actions","open-sidebar")),(0,i.setLayoutFocus)("sidebar")))}},t.closeEditorSidebar=function(){return function(e){return e((0,o.withAnalytics)((0,o.composeAnalytics)((0,o.recordGoogleEvent)("Editor","Sidebar Toggle","close"),(0,o.bumpStat)("editor_actions","close-sidebar")),(0,i.setLayoutFocus)("content")))}},t.setNestedSidebar=function(e){return{type:r.EDITOR_NESTED_SIDEBAR_SET,target:e}}},"./client/state/ui/editor/sidebar/selectors.js":function(e,t,n){"use strict";function o(e){return e.ui.editor.sidebar.nestedSidebarTarget}Object.defineProperty(t,"__esModule",{value:!0}),t.getNestedSidebarTarget=o},"./client/state/ui/media-modal/actions.js":function(e,t,n){"use strict";function o(e){return{type:i.MEDIA_MODAL_VIEW_SET,view:e}}function r(){return o(null)}Object.defineProperty(t,"__esModule",{value:!0}),t.setMediaModalView=o,t.resetMediaModalView=r;var i=n("./client/state/action-types.js")},"./client/state/ui/media-modal/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModalViews={LIST:"LIST",DETAIL:"DETAIL",GALLERY:"GALLERY",IMAGE_EDITOR:"IMAGE_EDITOR",VIDEO_EDITOR:"VIDEO_EDITOR"}},"./client/state/ui/media-modal/selectors.js":function(e,t,n){"use strict";function o(e){return e.ui.mediaModal.view}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaModalView=o},"./client/state/users/suggestions/actions.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return{type:l.USER_SUGGESTIONS_RECEIVE,suggestions:t,siteId:e}}function i(e){return function(t){return t({type:l.USER_SUGGESTIONS_REQUEST,siteId:e}),a.default.users().suggest({site_id:e}).then(function(n){t(r(e,n.suggestions)),t({type:l.USER_SUGGESTIONS_REQUEST_SUCCESS,siteId:e,data:n})}).catch(function(n){return t({type:l.USER_SUGGESTIONS_REQUEST_FAILURE,siteId:e,error:n})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveUserSuggestions=r,t.requestUserSuggestions=i;var s=n("./client/lib/wp/browser.js"),a=o(s),l=n("./client/state/action-types.js")},"./client/state/users/suggestions/selectors.js":function(e,t,n){"use strict";function o(e,t){return(0,i.get)(e.users.suggestions.requesting,[t],!1)}function r(e,t){return(0,i.get)(e.users.suggestions.items,[t],[])}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequestingUserSuggestions=o,t.getUserSuggestions=r;var i=n("./node_modules/lodash/lodash.js")},"./node_modules/autosize/dist/autosize.js":function(e,t,n){var o,r,i;!function(n,s){r=[t,e],o=s,i="function"==typeof o?o.apply(t,r):o,!(void 0!==i&&(e.exports=i))}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);p=t.overflowY,"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),f="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(f)&&(f=0),r()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,p=t,c&&(e.style.overflowY=t),o()}function o(){var t=window.pageYOffset,n=document.body.scrollTop,o=e.style.height;e.style.height="auto";var r=e.scrollHeight+f;return 0===e.scrollHeight?void(e.style.height=o):(e.style.height=r+"px",m=e.clientWidth,document.documentElement.scrollTop=t,void(document.body.scrollTop=n))}function r(){var t=e.style.height;o();var r=window.getComputedStyle(e,null);if(r.height!==e.style.height?"visible"!==p&&n("visible"):"hidden"!==p&&n("hidden"),t!==e.style.height){var i=s("autosize:resized");e.dispatchEvent(i)}}var a=void 0===arguments[1]?{}:arguments[1],l=a.setOverflowX,u=void 0===l||l,d=a.setOverflowY,c=void 0===d||d;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!i.has(e)){var f=null,p=null,m=e.clientWidth,h=function(){e.clientWidth!==m&&r()},g=function(t){window.removeEventListener("resize",h,!1),e.removeEventListener("input",r,!1),e.removeEventListener("keyup",r,!1),e.removeEventListener("autosize:destroy",g,!1),e.removeEventListener("autosize:update",r,!1),i.delete(e),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",g,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",r,!1),window.addEventListener("resize",h,!1),e.addEventListener("input",r,!1),e.addEventListener("autosize:update",r,!1),i.add(e),u&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=s("autosize:destroy");e.dispatchEvent(t)}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=s("autosize:update");e.dispatchEvent(t)}}var i="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},delete:function(t){e.splice(e.indexOf(t),1)}}}(),s=function(e){return new Event(e)};try{new Event("test")}catch(e){s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(e){return e},a.destroy=function(e){return e},a.update=function(e){return e}):(a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},a.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=a})},"./node_modules/babel-runtime/core-js/math/trunc.js":function(e,t,n){e.exports={default:n("./node_modules/core-js/library/fn/math/trunc.js"),__esModule:!0}},"./node_modules/chrono-node/src/chrono.js":function(e,t,n){var o=t.options=n("./node_modules/chrono-node/src/options.js");t.parser=n("./node_modules/chrono-node/src/parsers/parser.js"),t.refiner=n("./node_modules/chrono-node/src/refiners/refiner.js"),t.Parser=t.parser.Parser,t.Refiner=t.refiner.Refiner,t.Filter=t.refiner.Filter,t.ParsedResult=n("./node_modules/chrono-node/src/result.js").ParsedResult,t.ParsedComponents=n("./node_modules/chrono-node/src/result.js").ParsedComponents;var r=function(e){e=e||t.options.casualOption(),this.option=e,this.parsers=new Object(e.parsers),this.refiners=new Object(e.refiners)};r.prototype.parse=function(e,t,n){t=t||new Date,n=n||{};var o=[];return this.parsers.forEach(function(r){var i=r.execute(e,t,n);o=o.concat(i)}),o.sort(function(e,t){return e.index-t.index}),this.refiners.forEach(function(t){o=t.refine(e,o,n)}),o},r.prototype.parseDate=function(e,t,n){var o=this.parse(e,t,n);return o.length>0?o[0].start.date():null},t.Chrono=r,t.strict=new r(o.strictOption()),t.casual=new r(o.casualOption()),t.en=new r(o.mergeOptions([o.en.casual,o.commonPostProcessing])),t.de=new r(o.mergeOptions([o.de.casual,o.en,o.commonPostProcessing])),t.es=new r(o.mergeOptions([o.es.casual,o.en,o.commonPostProcessing])),t.fr=new r(o.mergeOptions([o.fr.casual,o.en,o.commonPostProcessing])),t.ja=new r(o.mergeOptions([o.ja.casual,o.en,o.commonPostProcessing])),t.parse=function(){return t.casual.parse.apply(t.casual,arguments)},t.parseDate=function(){return t.casual.parseDate.apply(t.casual,arguments)}},"./node_modules/chrono-node/src/options.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/parsers/parser.js"),r=n("./node_modules/chrono-node/src/refiners/refiner.js");t.mergeOptions=function(e){var t={},n={parsers:[],refiners:[]};return e.forEach(function(e){e.call&&(e=e.call()),e.parsers&&e.parsers.forEach(function(e){t[e.constructor]||(n.parsers.push(e),t[e.constructor]=!0)}),e.refiners&&e.refiners.forEach(function(e){t[e.constructor]||(n.refiners.push(e),t[e.constructor]=!0)})}),n},t.commonPostProcessing=function(){return{refiners:[new r.ExtractTimezoneOffsetRefiner,new r.ExtractTimezoneAbbrRefiner,new r.UnlikelyFormatFilter]}},t.strictOption=function(){return t.mergeOptions([t.en(!0),t.de(!0),t.es(!0),t.fr(!0),t.ja(!0),t.zh,t.commonPostProcessing])},t.casualOption=function(){return t.mergeOptions([t.en.casual,t.de(!0),t.es.casual,t.fr.casual,t.ja.casual,t.zh,t.commonPostProcessing])},t.de=function(e){return{parsers:[new o.DEDeadlineFormatParser(e),new o.DEMonthNameLittleEndianParser(e),new o.DEMonthNameParser(e),new o.DESlashDateFormatParser(e),new o.DETimeAgoFormatParser(e),new o.DETimeExpressionParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.DEMergeDateTimeRefiner,new r.DEMergeDateRangeRefiner]}},t.de.casual=function(){var e=t.de(!1);return e.parsers.unshift(new o.DECasualDateParser),e.parsers.unshift(new o.DEWeekdayParser),e},t.en=function(e){return{parsers:[new o.ENISOFormatParser(e),new o.ENDeadlineFormatParser(e),new o.ENMonthNameLittleEndianParser(e),new o.ENMonthNameMiddleEndianParser(e),new o.ENMonthNameParser(e),new o.ENSlashDateFormatParser(e),new o.ENSlashDateFormatStartWithYearParser(e),new o.ENSlashMonthFormatParser(e),new o.ENTimeAgoFormatParser(e),new o.ENTimeExpressionParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.ENMergeDateTimeRefiner,new r.ENMergeDateRangeRefiner,new r.ENPrioritizeSpecificDateRefiner]}},t.en.casual=function(){var e=t.en(!1);return e.parsers.unshift(new o.ENCasualDateParser),e.parsers.unshift(new o.ENCasualTimeParser),e.parsers.unshift(new o.ENWeekdayParser),e.parsers.unshift(new o.ENRelativeDateFormatParser),e},t.ja=function(){return{parsers:[new o.JPStandardParser],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.JPMergeDateRangeRefiner]}},t.ja.casual=function(){var e=t.ja();return e.parsers.unshift(new o.JPCasualDateParser),e},t.es=function(e){return{parsers:[new o.ESTimeAgoFormatParser(e),new o.ESDeadlineFormatParser(e),new o.ESTimeExpressionParser(e),new o.ESMonthNameLittleEndianParser(e),new o.ESSlashDateFormatParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner]}},t.es.casual=function(){var e=t.es(!1);return e.parsers.unshift(new o.ESCasualDateParser),e.parsers.unshift(new o.ESWeekdayParser),e},t.fr=function(e){return{parsers:[new o.FRDeadlineFormatParser(e),new o.FRMonthNameLittleEndianParser(e),new o.FRSlashDateFormatParser(e),new o.FRTimeAgoFormatParser(e),new o.FRTimeExpressionParser(e)],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner,new r.FRMergeDateRangeRefiner,new r.FRMergeDateTimeRefiner]}},t.fr.casual=function(){var e=t.fr(!1);return e.parsers.unshift(new o.FRCasualDateParser),e.parsers.unshift(new o.FRWeekdayParser),e},t.zh=function(){return{parsers:[new o.ZHHantDateParser,new o.ZHHantWeekdayParser,new o.ZHHantTimeExpressionParser,new o.ZHHantCasualDateParser,new o.ZHHantDeadlineFormatParser],refiners:[new r.OverlapRemovalRefiner,new r.ForwardDateRefiner]}}},"./node_modules/chrono-node/src/parsers/DE/DECasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(jetzt|(?:heute|diesen)\\s*(morgen|vormittag|mittag|nachmittag|abend)|(?:heute|diese)\\s*nacht|heute|(?:(?:ü|ue)ber)?morgen(?:\\s*(morgen|vormittag|mittag|nachmittag|abend|nacht))?|(?:vor)?gestern(?:\\s*(morgen|vormittag|mittag|nachmittag|abend|nacht))?|letzte\\s*nacht)(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),u=l.clone(),d=e.toLowerCase();/(?:heute|diese)\s*nacht/.test(d)?(a.start.imply("hour",22),a.start.imply("meridiem",1)):/^(?:ü|ue)bermorgen/.test(d)?u.add(l.hour()>1?2:1,"day"):/^morgen/.test(d)?l.hour()>1&&u.add(1,"day"):/^gestern/.test(d)?u.add(-1,"day"):/^vorgestern/.test(d)?u.add(-2,"day"):/letzte\s*nacht/.test(d)?(a.start.imply("hour",0),l.hour()>6&&u.add(-1,"day")):"jetzt"===d&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond()));var c=n[3]||n[4]||n[5];if(c)switch(c.toLowerCase()){case"morgen":a.start.imply("hour",6);break;case"vormittag":a.start.imply("hour",9);break;case"mittag":a.start.imply("hour",12);break;case"nachmittag":a.start.imply("hour",15),a.start.imply("meridiem",1);break;case"abend":a.start.imply("hour",18),a.start.imply("meridiem",1);break;case"nacht":a.start.imply("hour",0)}return a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a.tags.DECasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/DE/DEDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(\\W|^)(in|nach)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|einigen|eine[rm]\\s*halben|eine[rm])\\s*(sekunden?|min(?:ute)?n?|stunden?|tag(?:en)?|wochen?|monat(?:en)?|jahr(?:en)?)\\s*(?=\\W|$)","i"),l=new RegExp("(\\W|^)(in|nach)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|eine(?:r|m)?)\\s*(sekunden?|minuten?|stunden?|tag(?:en)?)\\s*(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var l=new i({index:a,text:e,ref:t}),u=n[3].toLowerCase();u=void 0!==s.INTEGER_WORDS[u]?s.INTEGER_WORDS[u]:"einer"===u||"einem"===u?1:"einigen"===u?3:/halben/.test(u)?.5:parseInt(u);var d=o(t);return/tag|woche|monat|jahr/i.test(n[4])?(/tag/i.test(n[4])?d.add(u,"d"):/woche/i.test(n[4])?d.add(7*u,"d"):/monat/i.test(n[4])?d.add(u,"month"):/jahr/i.test(n[4])&&d.add(u,"year"),l.start.assign("year",d.year()),l.start.assign("month",d.month()+1),l.start.assign("day",d.date()),l):(/stunde/i.test(n[4])?d.add(u,"hour"):/min/i.test(n[4])?d.add(u,"minute"):/sekunde/i.test(n[4])&&d.add(u,"second"),l.start.imply("year",d.year()),l.start.imply("month",d.month()+1),l.start.imply("day",d.date()),l.start.assign("hour",d.hour()),l.start.assign("minute",d.minute()),l.start.assign("second",d.second()),l.tags.DEDeadlineFormatParser=!0,l)}}},"./node_modules/chrono-node/src/parsers/DE/DEMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(\\W|^)(?:am\\s*?)?(?:(Sonntag|Montag|Dienstag|Mittwoch|Donnerstag|Freitag|Samstag|So|Mo|Di|Mi|Do|Fr|Sa)\\s*,?\\s*)?(?:den\\s*)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\–|\\s)\\s*([0-9]{1,2})\\.)?\\s*(Jan(?:uar|\\.)?|Feb(?:ruar|\\.)?|Mär(?:z|\\.)?|Maerz|Mrz\\.?|Apr(?:il|\\.)?|Mai|Jun(?:i|\\.)?|Jul(?:i|\\.)?|Aug(?:ust|\\.)?|Sep(?:t|t\\.|tember|\\.)?|Okt(?:ober|\\.)?|Nov(?:ember|\\.)?|Dez(?:ember|\\.)?)(?:,?\\s*([0-9]{1,4}(?![^\\s]\\d))(\\s*[vn]\\.?\\s*C(?:hr)?\\.?)?)?(?=\\W|$)","i"),l=2,u=3,d=4,c=5,f=6,p=7;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),m=n[c];m=s.MONTH_OFFSET[m.toLowerCase()];var h=n[u];h=parseInt(h);var g=null;if(n[f]&&(g=n[f],g=parseInt(g),n[p]?/v/i.test(n[p])&&(g=-g):g<100&&(g+=2e3)),g)a.start.assign("day",h),a.start.assign("month",m),a.start.assign("year",g);else{var v=o(t);v.month(m-1),v.date(h),v.year(o(t).year());var y=v.clone().add(1,"y"),b=v.clone().add(-1,"y");Math.abs(y.diff(o(t)))<Math.abs(v.diff(o(t)))?v=y:Math.abs(b.diff(o(t)))<Math.abs(v.diff(o(t)))&&(v=b),a.start.assign("day",h),a.start.assign("month",m),a.start.imply("year",v.year())}if(n[l]){var _=n[l];_=s.WEEKDAY_OFFSET[_.toLowerCase()],a.start.assign("weekday",_)}return n[d]&&(a.end=a.start.clone(),a.end.assign("day",parseInt(n[d]))),a.tags.DEMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/DE/DEMonthNameParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(^|\\D\\s+|[^\\w\\s])(Jan\\.?|Januar|Feb\\.?|Februar|Mär\\.?|M(?:ä|ae)rz|Mrz\\.?|Apr\\.?|April|Mai\\.?|Jun\\.?|Juni|Jul\\.?|Juli|Aug\\.?|August|Sep\\.?|Sept\\.?|September|Okt\\.?|Oktober|Nov\\.?|November|Dez\\.?|Dezember)\\s*(?:,?\\s*(?:([0-9]{4})(\\s*[vn]\\.?\\s*C(?:hr)?\\.?)?|([0-9]{1,4})\\s*([vn]\\.?\\s*C(?:hr)?\\.?)))?(?=[^\\s\\w]|$)","i"),l=2,u=3,d=4,c=5,f=6;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),p=n[l];p=s.MONTH_OFFSET[p.toLowerCase()];var m=1,h=null;if((n[u]||n[c])&&(h=n[u]||n[c],h=parseInt(h),n[d]||n[f]?/v/i.test(n[d]||n[f])&&(h=-h):h<100&&(h+=2e3)),h)a.start.imply("day",m),a.start.assign("month",p),a.start.assign("year",h);else{var g=o(t);g.month(p-1),g.date(m);var v=g.clone().add(1,"y"),y=g.clone().add(-1,"y");Math.abs(v.diff(o(t)))<Math.abs(g.diff(o(t)))?g=v:Math.abs(y.diff(o(t)))<Math.abs(g.diff(o(t)))&&(g=y),a.start.imply("day",m),a.start.assign("month",p),a.start.imply("year",g.year())}return a.tags.DEMonthNameParser=!0,
a}}},"./node_modules/chrono-node/src/parsers/DE/DESlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:(?:am\\s*?)?((?:sonntag|so|montag|mo|dienstag|di|mittwoch|mi|donnerstag|do|freitag|fr|samstag|sa))\\s*\\,?\\s*(?:den\\s*)?)?([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},l=1,u=6,d=2,c=3,f=4,p=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[u])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[u].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[p]||!(n[0].indexOf("/")<0))){var h=n[p]||o(t).year()+"",g=n[f],v=n[c];return g=parseInt(g),v=parseInt(v),h=parseInt(h),g<1||g>12?null:v<1||v>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",v),m.start.assign("month",g),m.start.assign("year",h),n[d]&&m.start.assign("weekday",a[n[d].toLowerCase()]),m.tags.DESlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/DE/DETimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/DE.js"),a=new RegExp("(\\W|^)vor\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|einigen|eine[rm]\\s*halben|eine[rm])\\s*(sekunden?|min(?:ute)?n?|stunden?|wochen?|tag(?:en)?|monat(?:en)?|jahr(?:en)?)\\s*(?=(?:\\W|$))","i"),l=new RegExp("(\\W|^)vor\\s*([0-9]+|eine(?:r|m))\\s*(sekunden?|minuten?|stunden?|tag(?:en)?)(?=(?:\\W|$))","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var a=new i({index:index,text:e,ref:t}),l=n[2].toLowerCase();l=void 0!==s.INTEGER_WORDS[l]?s.INTEGER_WORDS[l]:"einer"===l||"einem"===l?1:"einigen"===l?3:/halben/.test(l)?.5:parseInt(l);var u=o(t);return/stunde|min|sekunde/i.test(n[3])?(/stunde/i.test(n[3])?u.add(-l,"hour"):/min/i.test(n[3])?u.add(-l,"minute"):/sekunde/i.test(n[3])&&u.add(-l,"second"),a.start.imply("day",u.date()),a.start.imply("month",u.month()+1),a.start.imply("year",u.year()),a.start.assign("hour",u.hour()),a.start.assign("minute",u.minute()),a.start.assign("second",u.second()),a.tags.DETimeAgoFormatParser=!0,a):/woche/i.test(n[3])?(u.add(-l,"week"),a.start.imply("day",u.date()),a.start.imply("month",u.month()+1),a.start.imply("year",u.year()),a.start.imply("weekday",u.day()),a):(/tag/i.test(n[3])&&u.add(-l,"d"),/monat/i.test(n[3])&&u.add(-l,"month"),/jahr/i.test(n[3])&&u.add(-l,"year"),a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a)}}},"./node_modules/chrono-node/src/parsers/DE/DETimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,4}|mittags?|mitternachts?)(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\:|\\：)(\\d{2}))?)?(?:\\s*uhr)?(?:\\s*(morgens|vormittags|mittags|nachmittags|abends|nachts))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|bis|\\?)\\s*(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2}))?)?(?:\\s*(morgens|vormittags|mittags|nachmittags|abends|nachts))?(?=\\W|$)","i"),u=2,d=3,c=4,f=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),p=new i;p.ref=t,p.index=n.index+n[1].length,p.text=n[0].substring(n[1].length),p.tags.DETimeExpressionParser=!0,p.start.imply("day",a.date()),p.start.imply("month",a.month()+1),p.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.start.assign("second",v)}if(/mittags?/i.test(n[u])?(g=1,m=12):/mitternachts?/i.test(n[u])?(g=0,m=0):m=parseInt(n[u]),null!=n[d]?h=parseInt(n[d]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;var y=n[f][0].toLowerCase();"morgens"===y||"vormittags"===y?(g=0,12==m&&(m=0)):(g=1,12!=m&&(m+=12))}if(p.start.assign("hour",m),p.start.assign("minute",h),g>=0?p.start.assign("meridiem",g):m<12?p.start.imply("meridiem",0):p.start.imply("meridiem",1),n=l.exec(e.substring(p.index+p.text.length)),!n)return p.text.match(/^\d+$/)?null:p;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return p;null==p.end&&(p.end=new s(null,p.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.end.assign("second",v)}if(m=parseInt(n[2]),null!=n[d]){if(h=parseInt(n[d]),h>=60)return p}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;var y=n[f][0].toLowerCase();"morgens"===y||"vormittags"===y?(g=0,12==m&&(m=0,p.end.isCertain("day")||p.end.imply("day",p.end.get("day")+1))):(g=1,12!=m&&(m+=12)),p.start.isCertain("meridiem")||(0==g?(p.start.imply("meridiem",0),12==p.start.get("hour")&&p.start.assign("hour",0)):(p.start.imply("meridiem",1),12!=p.start.get("hour")&&p.start.assign("hour",p.start.get("hour")+12)))}if(p.text=p.text+n[0],p.end.assign("hour",m),p.end.assign("minute",h),g>=0)p.end.assign("meridiem",g);else{var b=p.start.isCertain("meridiem")&&1==p.start.get("meridiem");b&&p.start.get("hour")>m?p.end.imply("meridiem",0):m>12&&p.end.imply("meridiem",1)}return p.end.date().getTime()<p.start.date().getTime()&&p.end.imply("day",p.end.get("day")+1),p}}},"./node_modules/chrono-node/src/parsers/DE/DEWeekdayParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},a=new RegExp("(\\W|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:ä|ae)chste[mn])\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(diese|letzte|n(?:ä|ae)chste)\\s*woche)?(?=\\W|$)","i"),l=2,u=3,d=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0].substr(n[1].length,n[0].length-n[1].length),c=new i({index:a,text:e,ref:t}),f=n[u].toLowerCase(),p=s[f];if(void 0===p)return null;var m=o(t),h=n[l],g=n[d],v=m.day(),y=h||g;return y=y||"",y=y.toLowerCase(),/letzte/.test(y)?m.day(p-7):/n(?:ä|ae)chste/.test(y)?m.day(p+7):/diese/.test(y)?r.forwardDatesOnly&&v>p?m.day(p+7):m.day(p):r.forwardDatesOnly&&v>p?m.day(p+7):!r.forwardDatesOnly&&Math.abs(p-7-v)<Math.abs(p-v)?m.day(p-7):!r.forwardDatesOnly&&Math.abs(p+7-v)<Math.abs(p-v)?m.day(p+7):m.day(p),c.start.assign("weekday",p),c.start.imply("day",m.date()),c.start.imply("month",m.month()+1),c.start.imply("year",m.year()),c}}},"./node_modules/chrono-node/src/parsers/EN/ENCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(now|today|tonight|last\s*night|(?:tomorrow|tmr|yesterday)\s*|tomorrow|tmr|yesterday)(?=\W|$)/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),u=l.clone(),d=e.toLowerCase();return"tonight"==d?(a.start.imply("hour",22),a.start.imply("meridiem",1)):/^tomorrow|^tmr/.test(d)?l.hour()>1&&u.add(1,"day"):/^yesterday/.test(d)?u.add(-1,"day"):d.match(/last\s*night/)?(a.start.imply("hour",0),l.hour()>6&&u.add(-1,"day")):d.match("now")&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond())),a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a.tags.ENCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENCasualTimeParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=/(\W|^)((this)?\s*(morning|afternoon|evening|noon))/i,s=4;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return i},this.extract=function(e,t,n,o){var e=n[0].substr(n[1].length),i=n.index+n[1].length,a=new r({index:i,text:e,ref:t});return n[s]||(s=3),"afternoon"==n[s]?a.start.imply("hour",o.afternoon?o.afternoon:15):"evening"==n[s]?a.start.imply("hour",o.evening?o.evening:18):"morning"==n[s]?a.start.imply("hour",o.morning?o.morning:6):"noon"==n[s]&&a.start.imply("hour",o.noon?o.noon:12),a.tags.ENCasualTimeParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(within|in)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|an?(?:\\s*few)?|half(?:\\s*an?)?)\\s*(seconds?|min(?:ute)?s?|hours?|days?|weeks?|months?|years?)\\s*(?=\\W|$)","i"),l=new RegExp("(\\W|^)(within|in)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|an?)\\s*(seconds?|minutes?|hours?|days?)\\s*(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var l=new i({index:a,text:e,ref:t}),u=n[3].toLowerCase();u=void 0!==s.INTEGER_WORDS[u]?s.INTEGER_WORDS[u]:"a"===u||"an"===u?1:u.match(/few/i)?3:u.match(/half/i)?.5:parseInt(u);var d=o(t);return n[4].match(/day|week|month|year/i)?(n[4].match(/day/i)?d.add(u,"d"):n[4].match(/week/i)?d.add(7*u,"d"):n[4].match(/month/i)?d.add(u,"month"):n[4].match(/year/i)&&d.add(u,"year"),l.start.assign("year",d.year()),l.start.assign("month",d.month()+1),l.start.assign("day",d.date()),l):(n[4].match(/hour/i)?d.add(u,"hour"):n[4].match(/min/i)?d.add(u,"minute"):n[4].match(/second/i)&&d.add(u,"second"),l.start.imply("year",d.year()),l.start.imply("month",d.month()+1),l.start.imply("day",d.date()),l.start.assign("hour",d.hour()),l.start.assign("minute",d.minute()),l.start.assign("second",d.second()),l.tags.ENDeadlineFormatParser=!0,l)}}},"./node_modules/chrono-node/src/parsers/EN/ENISOFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),a=2,l=3,u=4,d=5,c=6,f=7,p=8,m=9,h=10;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,g=new i({text:e,index:s,ref:t});if(g.start.assign("year",parseInt(n[a])),g.start.assign("month",parseInt(n[l])),g.start.assign("day",parseInt(n[u])),o(g.start.get("month"))>12||o(g.start.get("month"))<1||o(g.start.get("day"))>31||o(g.start.get("day"))<1)return null;if(null!=n[d])if(g.start.assign("hour",parseInt(n[d])),g.start.assign("minute",parseInt(n[c])),null!=n[f]&&g.start.assign("second",parseInt(n[f])),null!=n[p]&&g.start.assign("millisecond",parseInt(n[p])),null==n[m])g.start.assign("timezoneOffset",0);else{var v=0,y=parseInt(n[m]);null!=n[h]&&(v=parseInt(n[h]));var b=60*y;b<0?b-=v:b+=v,g.start.assign("timezoneOffset",b)}return g.tags.ENISOFormatParser=!0,g}}},"./node_modules/chrono-node/src/parsers/EN/ENMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(?:on\\s*?)?(?:(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\\s*,?\\s*)?(([0-9]{1,2})(?:st|nd|rd|th)?|"+s.ORDINAL_WORDS_PATTERN+")(?:\\s*(?:to|\\-|\\–|until|through|till|\\s)\\s*(([0-9]{1,2})(?:st|nd|rd|th)?|"+s.ORDINAL_WORDS_PATTERN+"))?\\s*(?:of)?\\s*(Jan(?:uary|\\.)?|Feb(?:ruary|\\.)?|Mar(?:ch|\\.)?|Apr(?:il|\\.)?|May|Jun(?:e|\\.)?|Jul(?:y|\\.)?|Aug(?:ust|\\.)?|Sep(?:tember|\\.)?|Oct(?:ober|\\.)?|Nov(?:ember|\\.)?|Dec(?:ember|\\.)?)(?:,?\\s*([0-9]{1,4}(?![^\\s]\\d))(\\s*(?:BE|AD|BC))?)?(?=\\W|$)","i"),l=2,u=3,d=4,c=5,f=6,p=7,m=8,h=9;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),g=n[p];g=s.MONTH_OFFSET[g.toLowerCase()];var v=n[d]?parseInt(n[d]):s.ORDINAL_WORDS[n[u].trim().replace("-"," ").toLowerCase()],y=null;if(n[m])if(y=n[m],y=parseInt(y),n[h])/BE/i.test(n[h])?y-=543:/BC/i.test(n[h])&&(y=-y);else{if(y<10)return null;y<100&&(y+=2e3)}if(y)a.start.assign("day",v),a.start.assign("month",g),a.start.assign("year",y);else{var b=o(t);b.month(g-1),b.date(v),b.year(o(t).year());var _=b.clone().add(1,"y"),x=b.clone().add(-1,"y");Math.abs(_.diff(o(t)))<Math.abs(b.diff(o(t)))?b=_:Math.abs(x.diff(o(t)))<Math.abs(b.diff(o(t)))&&(b=x),a.start.assign("day",v),a.start.assign("month",g),a.start.imply("year",b.year())}if(n[l]){var C=n[l];C=s.WEEKDAY_OFFSET[C.toLowerCase()],a.start.assign("weekday",C)}if(n[c]){var j=n[f]?parseInt(n[f]):s.ORDINAL_WORDS[n[c].trim().replace("-"," ").toLowerCase()];a.end=a.start.clone(),a.end.assign("day",j)}return a.tags.ENMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENMonthNameMiddleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(?:(?:on\\s*?)?(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun\\.?|Mon\\.?|Tue\\.?|Wed\\.?|Thu\\.?|Fri\\.?|Sat\\.?)\\s*,?\\s*)?(Jan\\.?|January|Feb\\.?|February|Mar\\.?|March|Apr\\.?|April|May\\.?|Jun\\.?|June|Jul\\.?|July|Aug\\.?|August|Sep\\.?|Sept\\.?|September|Oct\\.?|October|Nov\\.?|November|Dec\\.?|December)\\s*(([0-9]{1,2})(?:st|nd|rd|th)?|"+s.ORDINAL_WORDS_PATTERN+")\\s*(?:(?:to|\\-)\\s*(([0-9]{1,2})(?:st|nd|rd|th)?| "+s.ORDINAL_WORDS_PATTERN+")\\s*)?(?:\\s*,?\\s*(?:([0-9]{4})\\s*(BE|AD|BC)?|([0-9]{1,4})\\s*(AD|BC))\\s*)?(?=\\W|$)(?!\\:\\d)","i"),l=2,u=3,d=4,c=5,f=6,p=7,m=8,h=9,g=10,v=11;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),y=n[u];y=s.MONTH_OFFSET[y.toLowerCase()];var b=n[c]?parseInt(n[c]):s.ORDINAL_WORDS[n[d].trim().replace("-"," ").toLowerCase()],_=null;if(n[m]||n[g]){_=n[m]||n[g],_=parseInt(_);var x=n[h]||n[v];x?/BE/i.test(x)?_-=543:/BC/i.test(x)&&(_=-_):_<100&&(_+=2e3)}if(_)a.start.assign("day",b),a.start.assign("month",y),a.start.assign("year",_);else{var C=o(t);C.month(y-1),C.date(b);var j=C.clone().add(1,"y"),E=C.clone().add(-1,"y");Math.abs(j.diff(o(t)))<Math.abs(C.diff(o(t)))?C=j:Math.abs(E.diff(o(t)))<Math.abs(C.diff(o(t)))&&(C=E),a.start.assign("day",b),a.start.assign("month",y),a.start.imply("year",C.year())}if(n[l]){var w=n[l];w=s.WEEKDAY_OFFSET[w.toLowerCase()],a.start.assign("weekday",w)}if(n[f]){var S=n[p]?S=parseInt(n[p]):s.ORDINAL_WORDS[n[f].replace("-"," ").trim().toLowerCase()];a.end=a.start.clone(),a.end.assign("day",S)}return a.tags.ENMonthNameMiddleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENMonthNameParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(^|\\D\\s+|[^\\w\\s])(Jan\\.?|January|Feb\\.?|February|Mar\\.?|March|Apr\\.?|April|May\\.?|Jun\\.?|June|Jul\\.?|July|Aug\\.?|August|Sep\\.?|Sept\\.?|September|Oct\\.?|October|Nov\\.?|November|Dec\\.?|December)\\s*(?:[,-]?\\s*([0-9]{4})(\\s*BE|AD|BC)?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)","i"),l=2,u=3,d=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),c=n[l];c=s.MONTH_OFFSET[c.toLowerCase()];var f=1,p=null;if(n[u]&&(p=n[u],p=parseInt(p),n[d]?n[d].match(/BE/)?p-=543:n[d].match(/BC/)&&(p=-p):p<100&&(p+=2e3)),p)a.start.imply("day",f),a.start.assign("month",c),a.start.assign("year",p);else{var m=o(t);m.month(c-1),m.date(f);var h=m.clone().add(1,"y"),g=m.clone().add(-1,"y");Math.abs(h.diff(o(t)))<Math.abs(m.diff(o(t)))?m=h:Math.abs(g.diff(o(t)))<Math.abs(m.diff(o(t)))&&(m=g),a.start.imply("day",f),a.start.assign("month",c),a.start.imply("year",m.year())}return a.tags.ENMonthNameParser=!0,a}}},"./node_modules/chrono-node/src/parsers/EN/ENRelativeDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(next|last|past)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|few|half(?:\\s*an?)?)?\\s*(seconds?|min(?:ute)?s?|hours?|days?|weeks?|months?|years?)(?=\\s*)(?=\\W|$)","i"),l=2,u=3,d=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,c=n[l].toLowerCase().match(/^next/)?1:-1,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var f=new i({index:a,text:e,ref:t});f.tags.ENRelativeDateFormatParser=!0;var p=void 0===n[u]?"":n[3].toLowerCase();p=void 0!==s.INTEGER_WORDS[p]?s.INTEGER_WORDS[p]:""===p?1:p.match(/few/i)?3:p.match(/half/i)?.5:parseInt(p),p*=c;var m=o(t);return n[d].match(/day|week|month|year/i)?(n[d].match(/day/i)?(m.add(p,"d"),f.start.assign("year",m.year()),f.start.assign("month",m.month()+1),f.start.assign("day",m.date())):n[d].match(/week/i)?(m.add(7*p,"d"),f.start.imply("day",m.date()),f.start.imply("month",m.month()+1),f.start.imply("year",m.year())):n[d].match(/month/i)?(m.add(p,"month"),f.start.imply("day",m.date()),f.start.assign("year",m.year()),f.start.assign("month",m.month()+1)):n[d].match(/year/i)&&(m.add(p,"year"),f.start.imply("day",m.date()),f.start.imply("month",m.month()+1),f.start.assign("year",m.year())),f):(n[d].match(/hour/i)?(m.add(p,"hour"),f.start.imply("minute",m.minute()),f.start.imply("second",m.second())):n[d].match(/min/i)?(m.add(p,"minute"),f.start.assign("minute",m.minute()),f.start.imply("second",m.second())):n[d].match(/second/i)&&(m.add(p,"second"),f.start.assign("second",m.second()),f.start.assign("minute",m.minute())),f.start.assign("hour",m.hour()),f.start.assign("year",m.year()),f.start.assign("month",m.month()+1),f.start.assign("day",m.date()),f)}}},"./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:(?:on\\s*?)?((?:sun|mon|tues?|wed(?:nes)?|thu(?:rs?)?|fri|sat(?:ur)?)(?:day)?)\\s*\\,?\\s*)?([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={sunday:0,sun:0,monday:1,mon:1,tuesday:2,wednesday:3,wed:3,thursday:4,thur:4,friday:5,fri:5,saturday:6,sat:6},l=1,u=6,d=2,c=3,f=4,p=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[u])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[u].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[p]||!(n[0].indexOf("/")<0))){var h=n[p]||o(t).year()+"",g=n[c],v=n[f];if(g=parseInt(g),v=parseInt(v),h=parseInt(h),(g<1||g>12)&&g>12){if(!(v>=1&&v<=12&&g>=13&&g<=31))return null;var y=g;g=v,v=y}return v<1||v>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",v),m.start.assign("month",g),m.start.assign("year",h),n[d]&&m.start.assign("weekday",a[n[d].toLowerCase()]),m.tags.ENSlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatStartWithYearParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)([0-9]{4})[\\-\\.\\/]([0-9]{1,2})[\\-\\.\\/]([0-9]{1,2})(?=\\W|$)","i"),a=2,l=3,u=4;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,d=new i({text:e,index:s,ref:t});return d.start.assign("year",parseInt(n[a])),d.start.assign("month",parseInt(n[l])),d.start.assign("day",parseInt(n[u])),o(d.start.get("month"))>12||o(d.start.get("month"))<1||o(d.start.get("day"))>31||o(d.start.get("day"))<1?null:(d.tags.ENDateFormatParser=!0,d)}}},"./node_modules/chrono-node/src/parsers/EN/ENSlashMonthFormatParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=new RegExp("(^|[^\\d/]\\s+|[^\\w\\s])([0-9]|0[1-9]|1[012])/([0-9]{4})([^\\d/]|$)","i"),s=1,a=4,l=2,u=3;t.Parser=function(e){o.apply(this,arguments),this.pattern=function(){return i},this.extract=function(e,t,n,o){var i=n.index+n[s].length,e=n[0].substr(n[s].length,n[0].length-(1+n[a].length)).trim(),d=new r({text:e,index:i,ref:t}),c=n[u],f=n[l],p=1;return f=parseInt(f),c=parseInt(c),d.start.imply("day",p),d.start.assign("month",f),d.start.assign("year",c),d.tags.ENSlashMonthFormatParser=!0,d}}},"./node_modules/chrono-node/src/parsers/EN/ENTimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/EN.js"),a=new RegExp("(\\W|^)(?:within\\s*)?("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|an?(?:\\s*few)?|half(?:\\s*an?)?)\\s*(seconds?|min(?:ute)?s?|hours?|weeks?|days?|months?|years?)\\s*(?:ago|before|earlier)(?=(?:\\W|$))","i"),l=new RegExp("(\\W|^)(?:within\\s*)?([0-9]+|an?)\\s*(seconds?|minutes?|hours?|days?)\\s*ago(?=(?:\\W|$))","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var a=new i({index:index,text:e,ref:t}),l=n[2].toLowerCase();l=void 0!==s.INTEGER_WORDS[l]?s.INTEGER_WORDS[l]:"a"===l||"an"===l?1:l.match(/few/)?3:l.match(/half/)?.5:parseInt(l);var u=o(t);return n[3].match(/hour|min|second/i)?(n[3].match(/hour/i)?u.add(-l,"hour"):n[3].match(/min/i)?u.add(-l,"minute"):n[3].match(/second/i)&&u.add(-l,"second"),a.start.imply("day",u.date()),a.start.imply("month",u.month()+1),a.start.imply("year",u.year()),a.start.assign("hour",u.hour()),a.start.assign("minute",u.minute()),a.start.assign("second",u.second()),a.tags.ENTimeAgoFormatParser=!0,a):n[3].match(/week/i)?(u.add(-l,"week"),a.start.imply("day",u.date()),a.start.imply("month",u.month()+1),a.start.imply("year",u.year()),a.start.imply("weekday",u.day()),a):(n[3].match(/day/i)&&u.add(-l,"d"),n[3].match(/month/i)&&u.add(-l,"month"),n[3].match(/year/i)&&u.add(-l,"year"),a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a)}}},"./node_modules/chrono-node/src/parsers/EN/ENTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:at|from)\\s*)?(\\d{1,4}|noon|midnight)(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\:|\\：)(\\d{2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|to|\\?)\\s*(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),u=2,d=3,c=4,f=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),p=new i;p.ref=t,p.index=n.index+n[1].length,p.text=n[0].substring(n[1].length),p.tags.ENTimeExpressionParser=!0,p.start.imply("day",a.date()),p.start.imply("month",a.month()+1),p.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.start.assign("second",v)}if("noon"==n[u].toLowerCase()?(g=1,m=12):"midnight"==n[u].toLowerCase()?(g=0,m=0):m=parseInt(n[u]),null!=n[d]?h=parseInt(n[d]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;var y=n[f][0].toLowerCase();"a"==y&&(g=0,12==m&&(m=0)),"p"==y&&(g=1,12!=m&&(m+=12))}if(p.start.assign("hour",m),p.start.assign("minute",h),g>=0?p.start.assign("meridiem",g):m<12?p.start.imply("meridiem",0):p.start.imply("meridiem",1),n=l.exec(e.substring(p.index+p.text.length)),!n)return p.text.match(/^\d+$/)?null:p;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return p;null==p.end&&(p.end=new s(null,p.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.end.assign("second",v)}if(m=parseInt(n[2]),null!=n[d]){if(h=parseInt(n[d]),h>=60)return p}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;var y=n[f][0].toLowerCase();"a"==y&&(g=0,12==m&&(m=0,p.end.isCertain("day")||p.end.imply("day",p.end.get("day")+1))),"p"==y&&(g=1,12!=m&&(m+=12)),p.start.isCertain("meridiem")||(0==g?(p.start.imply("meridiem",0),12==p.start.get("hour")&&p.start.assign("hour",0)):(p.start.imply("meridiem",1),12!=p.start.get("hour")&&p.start.assign("hour",p.start.get("hour")+12)))}if(p.text=p.text+n[0],p.end.assign("hour",m),p.end.assign("minute",h),g>=0)p.end.assign("meridiem",g);else{var b=p.start.isCertain("meridiem")&&1==p.start.get("meridiem");b&&p.start.get("hour")>m?p.end.imply("meridiem",0):m>12&&p.end.imply("meridiem",1)}return p.end.date().getTime()<p.start.date().getTime()&&p.end.imply("day",p.end.get("day")+1),p}}},"./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tues:2,tue:2,wednesday:3,wed:3,thursday:4,thurs:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6},a=new RegExp("(\\W|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)","i"),l=2,u=3,d=4;t.updateParsedComponent=function(e,t,n,r){var i=o(t),s=!1,a=i.day();return"last"==r||"past"==r?(i.day(n-7),s=!0):"next"==r?(i.day(n+7),s=!0):"this"==r?i.day(n):Math.abs(n-7-a)<Math.abs(n-a)?i.day(n-7):Math.abs(n+7-a)<Math.abs(n-a)?i.day(n+7):i.day(n),e.start.assign("weekday",n),s?(e.start.assign("day",i.date()),e.start.assign("month",i.month()+1),e.start.assign("year",i.year())):(e.start.imply("day",i.date()),e.start.imply("month",i.month()+1),e.start.imply("year",i.year())),e},t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,n,o,r){var a=o.index+o[1].length,e=o[0].substr(o[1].length,o[0].length-o[1].length),c=new i({index:a,text:e,ref:n}),f=o[u].toLowerCase(),p=s[f];if(void 0===p)return null;var m=o[l],h=o[d],g=m||h;return g=g||"",g=g.toLowerCase(),t.updateParsedComponent(c,n,p,g),c.tags.ENWeekdayParser=!0,c}}},"./node_modules/chrono-node/src/parsers/ES/ESCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(ahora|esta\s*(mañana|tarde|noche)|(ayer|mañana)\s*por\s*la\s*(mañana|tarde|noche)|hoy|mañana|ayer|anoche)(?=\W|$)/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),u=l.clone(),d=e.toLowerCase().replace(/\s+/g," ");if("mañana"==d)l.hour()>1&&u.add(1,"day");else if("ayer"==d)u.add(-1,"day");else if("anoche"==d)a.start.imply("hour",0),l.hour()>6&&u.add(-1,"day");else if(d.match("esta")){var c=n[3].toLowerCase();"tarde"==c?a.start.imply("hour",18):"mañana"==c?a.start.imply("hour",6):"noche"==c&&(a.start.imply("hour",22),a.start.imply("meridiem",1))}else if(d.match(/por\s*la/)){var f=n[4].toLowerCase();"ayer"===f?u.add(-1,"day"):"mañana"===f&&u.add(1,"day");var c=n[5].toLowerCase();"tarde"==c?a.start.imply("hour",18):"mañana"==c?a.start.imply("hour",9):"noche"==c&&(a.start.imply("hour",22),a.start.imply("meridiem",1))}else d.match("ahora")&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond()));return a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a.tags.ESCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/ES/ESDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(dentro\s*de|en)\s*([0-9]+|medi[oa]|una?)\s*(minutos?|horas?|d[ií]as?)\s*(?=(?:\W|$))/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var s=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var a=new i({index:s,text:e,ref:t}),l=parseInt(n[3]);isNaN(l)&&(l=n[3].match(/medi/)?.5:1);var u=o(t);return n[4].match(/d[ií]a/)?(u.add(l,"d"),a.start.assign("year",u.year()),a.start.assign("month",u.month()+1),a.start.assign("day",u.date()),a):(n[4].match(/hora/)?u.add(l,"hour"):n[4].match(/minuto/)&&u.add(l,"minute"),a.start.imply("year",u.year()),a.start.imply("month",u.month()+1),a.start.imply("day",u.date()),a.start.assign("hour",u.hour()),a.start.assign("minute",u.minute()),a.tags.ESDeadlineFormatParser=!0,a)}}},"./node_modules/chrono-node/src/parsers/ES/ESMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/ES.js"),a=(s.WEEKDAY_OFFSET,new RegExp("(\\W|^)(?:(Domingo|Lunes|Martes|Miércoles|Miercoles|Jueves|Viernes|Sábado|Sabado|Dom|Lun|Mar|Mie|Jue|Vie|Sab)\\s*,?\\s*)?([0-9]{1,2})(?:º|ª|°)?(?:\\s*(?:desde|de|\\-|\\–|al?|hasta|\\s)\\s*([0-9]{1,2})(?:º|ª|°)?)?\\s*(?:de)?\\s*(Ene(?:ro|\\.)?|Feb(?:rero|\\.)?|Mar(?:zo|\\.)?|Abr(?:il|\\.)?|May(?:o|\\.)?|Jun(?:io|\\.)?|Jul(?:io|\\.)?|Ago(?:sto|\\.)?|Sep(?:tiembre|\\.)?|Oct(?:ubre|\\.)?|Nov(?:iembre|\\.)?|Dic(?:iembre|\\.)?)(?:\\s*(?:del?)?(\\s*[0-9]{1,4}(?![^\\s]\\d))(\\s*[ad]\\.?\\s*c\\.?|a\\.?\\s*d\\.?)?)?(?=\\W|$)","i")),l=2,u=3,d=4,c=5,f=6,p=7;
t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),m=n[c];m=s.MONTH_OFFSET[m.toLowerCase()];var h=n[u];h=parseInt(h);var g=null;if(n[f]&&(g=n[f],g=parseInt(g),n[p]?/a\.?\s*c\.?/i.test(n[p])&&(g=-g):g<100&&(g+=2e3)),g)a.start.assign("day",h),a.start.assign("month",m),a.start.assign("year",g);else{var v=o(t);v.month(m-1),v.date(h),v.year(o(t).year());var y=v.clone().add(1,"y"),b=v.clone().add(-1,"y");Math.abs(y.diff(o(t)))<Math.abs(v.diff(o(t)))?v=y:Math.abs(b.diff(o(t)))<Math.abs(v.diff(o(t)))&&(v=b),a.start.assign("day",h),a.start.assign("month",m),a.start.imply("year",v.year())}if(n[l]){var _=n[l];_=s.WEEKDAY_OFFSET[_.toLowerCase()],a.start.assign("weekday",_)}return n[d]&&(a.end=a.start.clone(),a.end.assign("day",parseInt(n[d]))),a.tags.ESMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/ES/ESSlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:((?:domingo|dom|lunes|lun|martes|mar|mi[ée]rcoles|mie|jueves|jue|viernes|vie|s[áa]bado|sab))\\s*\\,?\\s*)?([0-1]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,miercoles:3,"miércoles":3,mie:3,jueves:4,jue:4,viernes:5,vier:5,"sábado":6,sabado:6,sab:6},l=1,u=6,d=2,c=4,f=3,p=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[u])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[u].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[p]||!(n[0].indexOf("/")<0))){var h=n[p]||o(t).year()+"",g=n[c],v=n[f];if(g=parseInt(g),v=parseInt(v),h=parseInt(h),(g<1||g>12)&&g>12){if(!(v>=1&&v<=12&&g>=13&&g<=31))return null;var y=g;g=v,v=y}return v<1||v>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",v),m.start.assign("month",g),m.start.assign("year",h),n[d]&&m.start.assign("weekday",a[n[d].toLowerCase()]),m.tags.ESSlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/ES/ESTimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)hace\s*([0-9]+|medi[oa]|una?)\s*(minutos?|horas?|semanas?|d[ií]as?|mes(es)?|años?)(?=(?:\W|$))/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var s=new i({index:index,text:e,ref:t}),a=parseInt(n[2]);isNaN(a)&&(a=n[2].match(/medi/)?.5:1);var l=o(t);return n[3].match(/hora/)||n[3].match(/minuto/)?(n[3].match(/hora/)?l.add(-a,"hour"):n[3].match(/minuto/)&&l.add(-a,"minute"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.assign("hour",l.hour()),s.start.assign("minute",l.minute()),s.tags.ESTimeAgoFormatParser=!0,s):n[3].match(/semana/)?(l.add(-a,"week"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.imply("weekday",l.day()),s):(n[3].match(/d[ií]a/)&&l.add(-a,"d"),n[3].match(/mes/)&&l.add(-a,"month"),n[3].match(/año/)&&l.add(-a,"year"),s.start.assign("day",l.date()),s.start.assign("month",l.month()+1),s.start.assign("year",l.year()),s)}}},"./node_modules/chrono-node/src/parsers/ES/ESTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:a las?|al?|desde|de)\\s*)?(\\d{1,4}|mediod[ií]a|medianoche)(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\:|\\：)(\\d{2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|a(?:s*las)?|\\?)\\s*(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2}))?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),u=2,d=3,c=4,f=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),p=new i;p.ref=t,p.index=n.index+n[1].length,p.text=n[0].substring(n[1].length),p.tags.ESTimeExpressionParser=!0,p.start.imply("day",a.date()),p.start.imply("month",a.month()+1),p.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.start.assign("second",v)}if(n[u].toLowerCase().match(/mediod/)?(g=1,m=12):"medianoche"==n[u].toLowerCase()?(g=0,m=0):m=parseInt(n[u]),null!=n[d]?h=parseInt(n[d]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;var y=n[f][0].toLowerCase();"a"==y&&(g=0,12==m&&(m=0)),"p"==y&&(g=1,12!=m&&(m+=12))}if(p.start.assign("hour",m),p.start.assign("minute",h),g>=0&&p.start.assign("meridiem",g),n=l.exec(e.substring(p.index+p.text.length)),!n)return p.text.match(/^\d+$/)?null:p;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return p;null==p.end&&(p.end=new s(null,p.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.end.assign("second",v)}if(m=parseInt(n[2]),null!=n[d]){if(h=parseInt(n[d]),h>=60)return p}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;"a"==n[f][0].toLowerCase()&&(g=0,12==m&&(m=0,p.end.isCertain("day")||p.end.imply("day",p.end.get("day")+1))),"p"==n[f][0].toLowerCase()&&(g=1,12!=m&&(m+=12)),p.start.isCertain("meridiem")||(0==g?(p.start.imply("meridiem",0),12==p.start.get("hour")&&p.start.assign("hour",0)):(p.start.imply("meridiem",1),12!=p.start.get("hour")&&p.start.assign("hour",p.start.get("hour")+12)))}else m>=12&&(g=1);return p.text=p.text+n[0],p.end.assign("hour",m),p.end.assign("minute",h),g>=0&&p.end.assign("meridiem",g),p.end.date().getTime()<p.start.date().getTime()&&p.end.imply("day",p.end.get("day")+1),p}}},"./node_modules/chrono-node/src/parsers/ES/ESWeekdayParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").updateParsedComponent,s={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,miercoles:3,"miércoles":3,mie:3,jueves:4,jue:4,viernes:5,vier:5,sabado:6,"sábado":6,sab:6},a=new RegExp("(\\W|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:(este|pasado|pr[oó]ximo)\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(este|pasado|pr[óo]ximo)\\s*week)?(?=\\W|$)","i"),l=2,u=3,d=4;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,o){var a=n.index+n[1].length,e=n[0].substr(n[1].length,n[0].length-n[1].length),c=new r({index:a,text:e,ref:t}),f=n[u].toLowerCase(),p=s[f];if(void 0===p)return null;var m=null,h=n[l],g=n[d];if(h||g){var v=h||g;v=v.toLowerCase(),"pasado"==v?m="this":"próximo"==v||"proximo"==v?m="next":"este"==v&&(m="this")}return i(c,t,p,m),c.tags.ESWeekdayParser=!0,c}}},"./node_modules/chrono-node/src/parsers/FR/FRCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)(maintenant|aujourd'hui|ajd|cette\s*nuit|la\s*veille|(demain|hier)(\s*(matin|soir|aprem|après-midi))?|ce\s*(matin|soir)|cet\s*(après-midi|aprem))(?=\W|$)/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var e=n[0].substr(n[1].length),s=n.index+n[1].length,a=new i({index:s,text:e,ref:t}),l=o(t),u=l.clone(),d=e.toLowerCase();return d.match(/demain/)&&l.hour()>1&&u.add(1,"day"),d.match(/hier/)&&u.add(-1,"day"),d.match(/cette\s*nuit/)?(a.start.imply("hour",22),a.start.imply("meridiem",1)):d.match(/la\s*veille/)?(a.start.imply("hour",0),l.hour()>6&&u.add(-1,"day")):d.match(/(après-midi|aprem)/)?a.start.imply("hour",14):d.match(/(soir)/)?a.start.imply("hour",18):d.match(/matin/)?a.start.imply("hour",8):d.match("maintenant")&&(a.start.imply("hour",l.hour()),a.start.imply("minute",l.minute()),a.start.imply("second",l.second()),a.start.imply("millisecond",l.millisecond())),a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a.tags.FRCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/FR/FRDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/FR.js"),a=new RegExp("(\\W|^)(dans|en)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|une?|(?:\\s*quelques)?|demi(?:\\s*|-?)?)\\s*(secondes?|min(?:ute)?s?|heures?|jours?|semaines?|mois|années?)\\s*(?=\\W|$)","i"),l=new RegExp("(\\W|^)(dans|en)\\s*("+s.INTEGER_WORDS_PATTERN+"|[0-9]+|un?)\\s*(secondes?|minutes?|heures?|jours?)\\s*(?=\\W|$)","i");t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return this.isStrictMode()?l:a},this.extract=function(e,t,n,r){var a=n.index+n[1].length,e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length);var l=new i({index:a,text:e,ref:t}),u=n[3];u=void 0!==s.INTEGER_WORDS[u]?s.INTEGER_WORDS[u]:"un"===u||"une"===u?1:u.match(/quelques?/i)?3:u.match(/demi-?/i)?.5:parseInt(u);var d=o(t);return n[4].match(/jour|semaine|mois|année/i)?(n[4].match(/jour/)?d.add(u,"d"):n[4].match(/semaine/i)?d.add(7*u,"d"):n[4].match(/mois/i)?d.add(u,"month"):n[4].match(/année/i)&&d.add(u,"year"),l.start.assign("year",d.year()),l.start.assign("month",d.month()+1),l.start.assign("day",d.date()),l):(n[4].match(/heure/i)?d.add(u,"hour"):n[4].match(/min/i)?d.add(u,"minutes"):n[4].match(/secondes/i)&&d.add(u,"second"),l.start.imply("year",d.year()),l.start.imply("month",d.month()+1),l.start.imply("day",d.date()),l.start.assign("hour",d.hour()),l.start.assign("minute",d.minute()),l.start.assign("second",d.second()),l.tags.FRDeadlineFormatParser=!0,l)}}},"./node_modules/chrono-node/src/parsers/FR/FRMonthNameLittleEndianParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/FR.js"),a=(s.WEEKDAY_OFFSET,new RegExp("(\\W|^)(?:(Dimanche|Lundi|Mardi|mercredi|Jeudi|Vendredi|Samedi|Dim|Lun|Mar|Mer|Jeu|Ven|Sam)\\s*,?\\s*)?([0-9]{1,2}|1er)(?:\\s*(?:au|\\-|\\–|jusqu'au?|\\s)\\s*([0-9]{1,2})(?:er)?)?\\s*(?:de)?\\s*(Jan(?:vier|\\.)?|Fév(?:rier|\\.)?|Mars|Avr(?:il|\\.)?|Mai|Juin|Juil(?:let|\\.)?|Ao[uû]t|Sept(?:embre|\\.)?|Oct(?:obre|\\.)?|Nov(?:embre|\\.)?|déc(?:embre|\\.)?)(?:\\s*(\\s*[0-9]{1,4}(?![^\\s]\\d))(?:\\s*(AC|[ap]\\.?\\s*c(?:h(?:r)?)?\\.?\\s*n\\.?))?)?(?=\\W|$)","i")),l=2,u=3,d=4,c=5,f=6,p=7;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=new i({text:n[0].substr(n[1].length,n[0].length-n[1].length),index:n.index+n[1].length,ref:t}),m=n[c];m=s.MONTH_OFFSET[m.toLowerCase()];var h=n[u];h=parseInt(h);var g=null;if(n[f]&&(g=n[f],g=parseInt(g),n[p]?/a/i.test(n[p])&&(g=-g):g<100&&(g+=2e3)),g)a.start.assign("day",h),a.start.assign("month",m),a.start.assign("year",g);else{var v=o(t);v.month(m-1),v.date(h),v.year(o(t).year());var y=v.clone().add(1,"y"),b=v.clone().add(-1,"y");Math.abs(y.diff(o(t)))<Math.abs(v.diff(o(t)))?v=y:Math.abs(b.diff(o(t)))<Math.abs(v.diff(o(t)))&&(v=b),a.start.assign("day",h),a.start.assign("month",m),a.start.imply("year",v.year())}if(n[l]){var _=n[l];_=s.WEEKDAY_OFFSET[_.toLowerCase()],a.start.assign("weekday",_)}return n[d]&&(a.end=a.start.clone(),a.end.assign("day",parseInt(n[d]))),a.tags.FRMonthNameLittleEndianParser=!0,a}}},"./node_modules/chrono-node/src/parsers/FR/FRSlashDateFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(\\W|^)(?:((?:dimanche|dim|lundi|lun|mardi|mar|mercredi|mer|jeudi|jeu|vendredi|ven|samedi|sam|le))\\s*\\,?\\s*)?([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}s*,?s*|[0-9]{2}s*,?s*))?(\\W|$)","i"),a={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},l=1,u=6,d=2,c=3,f=4,p=5;t.Parser=function(e){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if("/"==n[l]||"/"==n[u])return void(n.index+=n[0].length);var s=n.index+n[l].length,e=n[0].substr(n[l].length,n[0].length-n[u].length),m=new i({text:e,index:s,ref:t});if(!e.match(/^\d\.\d$/)&&!e.match(/^\d\.\d{1,2}\.\d{1,2}$/)&&(n[p]||!(n[0].indexOf("/")<0))){var h=n[p]||o(t).year()+"",g=n[f],v=n[c];if(v=parseInt(v),g=parseInt(g),h=parseInt(h),(g<1||g>12)&&g>12){if(!(v>=1&&v<=12&&g>=13&&g<=31))return null;var y=g;g=v,v=y}return v<1||v>31?null:(h<100&&(h+=h>50?1900:2e3),m.start.assign("day",v),m.start.assign("month",g),m.start.assign("year",h),n[d]&&m.start.assign("weekday",a[n[d].toLowerCase()]),m.tags.FRSlashDateFormatParser=!0,m)}}}},"./node_modules/chrono-node/src/parsers/FR/FRTimeAgoFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/(\W|^)il y a\s*([0-9]+|une?)\s*(minutes?|heures?|semaines?|jours?|mois|années?|ans?)(?=(?:\W|$))/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var e=n[0];e=n[0].substr(n[1].length,n[0].length-n[1].length),index=n.index+n[1].length;var s=new i({index:index,text:e,ref:t});s.tags.FRTimeAgoFormatParser=!0;var a=parseInt(n[2]);isNaN(a)&&(a=n[2].match(/demi/)?.5:1);var l=o(t);return n[3].match(/heure/)||n[3].match(/minute/)?(n[3].match(/heure/)?l.add(-a,"hour"):n[3].match(/minute/)&&l.add(-a,"minute"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.assign("hour",l.hour()),s.start.assign("minute",l.minute()),s):n[3].match(/semaine/)?(l.add(-a,"week"),s.start.imply("day",l.date()),s.start.imply("month",l.month()+1),s.start.imply("year",l.year()),s.start.imply("weekday",l.day()),s):(n[3].match(/jour/)&&l.add(-a,"d"),n[3].match(/mois/)&&l.add(-a,"month"),n[3].match(/années?|ans?/)&&l.add(-a,"year"),s.start.assign("day",l.date()),s.start.assign("month",l.month()+1),s.start.assign("year",l.year()),s)}}},"./node_modules/chrono-node/src/parsers/FR/FRTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=new RegExp("(^|\\s|T)(?:(?:[àa])\\s*)?(\\d{1,2}(?:h)?|midi|minuit)(?:(?:\\.|\\:|\\：|h)(\\d{1,2})(?:m)?(?:(?:\\:|\\：|m)(\\d{0,2})(?:s)?)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l=new RegExp("^\\s*(\\-|\\–|\\~|\\〜|[àa]|\\?)\\s*(\\d{1,2}(?:h)?)(?:(?:\\.|\\:|\\：|h)(\\d{1,2})(?:m)?(?:(?:\\.|\\:|\\：|m)(\\d{1,2})(?:s)?)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),u=2,d=3,c=4,f=5;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var a=o(t),p=new i;p.ref=t,p.index=n.index+n[1].length,p.text=n[0].substring(n[1].length),p.tags.FRTimeExpressionParser=!0,p.start.imply("day",a.date()),p.start.imply("month",a.month()+1),p.start.imply("year",a.year());var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.start.assign("second",v)}if("midi"==n[u].toLowerCase()?(g=1,m=12):"minuit"==n[u].toLowerCase()?(g=0,m=0):m=parseInt(n[u]),null!=n[d]?h=parseInt(n[d]):m>100&&(h=m%100,m=parseInt(m/100)),h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;var y=n[f][0].toLowerCase();"a"==y&&(g=0,12==m&&(m=0)),"p"==y&&(g=1,12!=m&&(m+=12))}if(p.start.assign("hour",m),p.start.assign("minute",h),g>=0&&p.start.assign("meridiem",g),n=l.exec(e.substring(p.index+p.text.length)),!n)return p.text.match(/^\d+$/)?null:p;if(n[0].match(/^\s*(\+|\-)\s*\d{3,4}$/))return p;null==p.end&&(p.end=new s(null,p.start.date()));var m=0,h=0,g=-1;if(null!=n[c]){var v=parseInt(n[c]);if(v>=60)return null;p.end.assign("second",v)}if(m=parseInt(n[2]),null!=n[d]){if(h=parseInt(n[d]),h>=60)return p}else m>100&&(h=m%100,m=parseInt(m/100));if(h>=60)return null;if(m>24)return null;if(m>=12&&(g=1),null!=n[f]){if(m>12)return null;"a"==n[f][0].toLowerCase()&&(g=0,12==m&&(m=0,p.end.isCertain("day")||p.end.imply("day",p.end.get("day")+1))),"p"==n[f][0].toLowerCase()&&(g=1,12!=m&&(m+=12)),p.start.isCertain("meridiem")||(0==g?(p.start.imply("meridiem",0),12==p.start.get("hour")&&p.start.assign("hour",0)):(p.start.imply("meridiem",1),12!=p.start.get("hour")&&p.start.assign("hour",p.start.get("hour")+12)))}else m>=12&&(g=1);return p.text=p.text+n[0],p.end.assign("hour",m),p.end.assign("minute",h),g>=0&&p.end.assign("meridiem",g),p.end.date().getTime()<p.start.date().getTime()&&p.end.imply("day",p.end.get("day")+1),p}}},"./node_modules/chrono-node/src/parsers/FR/FRWeekdayParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").updateParsedComponent,s={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},a=new RegExp("(\\s|^)(?:(?:\\,|\\(|\\（)\\s*)?(?:(ce)\\s*)?("+Object.keys(s).join("|")+")(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|$)","i"),l=2,u=3,d=4;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,o){var a=n.index+n[1].length,e=n[0].substr(n[1].length,n[0].length-n[1].length),c=new r({index:a,text:e,ref:t}),f=n[u].toLowerCase(),p=s[f];if(void 0===p)return null;var m=null,h=n[l],g=n[d];if(h||g){var v=h||g;v=v.toLowerCase(),"dernier"==v?m="last":"prochain"==v?m="next":"ce"==v&&(m="this")}return i(c,t,p,m),c.tags.FRWeekdayParser=!0,c}}},"./node_modules/chrono-node/src/parsers/JP/JPCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){var s=n.index,e=n[0],a=new i({index:s,text:e,ref:t}),l=o(t),u=l.clone();return"今夜"==e||"今夕"==e||"今晩"==e?(a.start.imply("hour",22),a.start.imply("meridiem",1)):"明日"==e?l.hour()>4&&u.add(1,"day"):"昨日"==e?u.add(-1,"day"):e.match("今朝")&&(a.start.imply("hour",6),a.start.imply("meridiem",0)),a.start.assign("day",u.date()),a.start.assign("month",u.month()+1),a.start.assign("year",u.year()),a.tags.JPCasualDateParser=!0,a}}},"./node_modules/chrono-node/src/parsers/JP/JPStandardParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/JP.js"),a=/(?:(同|((昭和|平成)?([0-9０-９]{2,4})))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,l=2,u=3,d=4,c=5,f=6;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=o(t),p=new i({text:n[0],index:n.index,ref:t}),m=n[c];m=s.toHankaku(m),m=parseInt(m);var h=n[f];if(h=s.toHankaku(h),h=parseInt(h),a.set("date",h),a.set("month",m-1),p.start.assign("day",a.date()),p.start.assign("month",a.month()+1),n[l])if(n[l].match("同年"))p.start.assign("year",a.year());else{var g=n[d];g=s.toHankaku(g),g=parseInt(g),"平成"==n[u]?g+=1988:"昭和"==n[u]&&(g+=1925),p.start.assign("year",g)}else{a.year(o(t).year());var v=a.clone().add(1,"y"),y=a.clone().add(-1,"y");Math.abs(v.diff(o(t)))<Math.abs(a.diff(o(t)))?a=v:Math.abs(y.diff(o(t)))<Math.abs(a.diff(o(t)))&&(a=y),p.start.assign("day",a.date()),p.start.assign("month",a.month()+1),p.start.imply("year",a.year())}return p.tags.JPStandardParser=!0,p}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantCasualDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=new RegExp("(而家|立(?:刻|即)|即刻)|(今|明|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|聽|昨|尋|琴)(?:日|天)(?:[\\s|,|，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?","i"),a=1,l=2,u=3,d=4,c=5,f=6;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return s},this.extract=function(e,t,n,r){e=n[0];var s=n.index,p=new i({index:s,text:e,ref:t}),m=o(t),h=m.clone();if(n[a])p.start.imply("hour",m.hour()),p.start.imply("minute",m.minute()),p.start.imply("second",m.second()),p.start.imply("millisecond",m.millisecond());else if(n[l]){var g=n[l],v=n[u];"明"==g||"聽"==g?m.hour()>1&&h.add(1,"day"):"昨"!=g&&"尋"!=g&&"琴"!=g||h.add(-1,"day"),"早"==v||"朝"==v?p.start.imply("hour",6):"晚"==v&&(p.start.imply("hour",22),p.start.imply("meridiem",1))}else if(n[d]){var y=n[d],b=y[0];"早"==b||"朝"==b||"上"==b?p.start.imply("hour",6):"下"==b||"晏"==b?(p.start.imply("hour",15),p.start.imply("meridiem",1)):"中"==b?(p.start.imply("hour",12),p.start.imply("meridiem",1)):"夜"==b||"晚"==b?(p.start.imply("hour",22),p.start.imply("meridiem",1)):"凌"==b&&p.start.imply("hour",0)}else if(n[c]){var _=n[c];"明"==_||"聽"==_?m.hour()>1&&h.add(1,"day"):"昨"!=_&&"尋"!=_&&"琴"!=_||h.add(-1,"day");var x=n[f];if(x){var C=x[0];"早"==C||"朝"==C||"上"==C?p.start.imply("hour",6):"下"==C||"晏"==C?(p.start.imply("hour",15),p.start.imply("meridiem",1)):"中"==C?(p.start.imply("hour",12),p.start.imply("meridiem",1)):"夜"==C||"晚"==C?(p.start.imply("hour",22),p.start.imply("meridiem",1)):"凌"==C&&p.start.imply("hour",0)}}return p.start.assign("day",h.date()),p.start.assign("month",h.month()+1),p.start.assign("year",h.year()),p.tags.ZHHantCasualDateParser=!0,p}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDateParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),a=new RegExp("(\\d{2,4}|["+Object.keys(s.NUMBER).join("")+"]{2,4})?(?:\\s*)(?:年)?(?:[\\s|,|，]*)(\\d{1,2}|["+Object.keys(s.NUMBER).join("")+"]{1,2})(?:\\s*)(?:月)(?:\\s*)(\\d{1,2}|["+Object.keys(s.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:日|號)?"),l=1,u=2,d=3;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=o(t),c=new i({text:n[0],index:n.index,ref:t}),f=parseInt(n[u]);if(isNaN(f)&&(f=s.zhStringToNumber(n[u])),c.start.assign("month",f),n[d]){var p=parseInt(n[d]);isNaN(p)&&(p=s.zhStringToNumber(n[d])),c.start.assign("day",p)}else c.start.imply("day",a.date());if(n[l]){var m=parseInt(n[l]);isNaN(m)&&(m=s.zhStringToYear(n[l])),c.start.assign("year",m)}else c.start.imply("year",a.year());return c.tags.ZHHantDateParser=!0,c}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDeadlineFormatParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),a=new RegExp("(\\d+|["+Object.keys(s.NUMBER).join("")+"]+|半|幾)(?:\\s*)(?:個)?(秒(?:鐘)?|分鐘|小時|鐘|日|天|星期|禮拜|月|年)(?:(?:之|過)?後|(?:之)?內)","i"),l=1,u=2;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,r){var a=n.index;e=n[0];var d=new i({index:a,text:e,ref:t}),c=parseInt(n[l]);if(isNaN(c)&&(c=s.zhStringToNumber(n[l])),isNaN(c)){var f=n[l];if("幾"===f)c=3;else{if("半"!==f)return null;c=.5}}var p=o(t),m=n[u],h=m[0];return h.match(/[日天星禮月年]/)?("日"==h||"天"==h?p.add(c,"d"):"星"==h||"禮"==h?p.add(7*c,"d"):"月"==h?p.add(c,"month"):"年"==h&&p.add(c,"year"),d.start.assign("year",p.year()),d.start.assign("month",p.month()+1),d.start.assign("day",p.date()),d):("秒"==h?p.add(c,"second"):"分"==h?p.add(c,"minute"):"小"!=h&&"鐘"!=h||p.add(c,"hour"),d.start.imply("year",p.year()),d.start.imply("month",p.month()+1),d.start.imply("day",p.date()),d.start.assign("hour",p.hour()),d.start.assign("minute",p.minute()),d.start.assign("second",p.second()),d.tags.ZHHantDeadlineFormatParser=!0,d)}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantTimeExpressionParser.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/parsers/parser.js").Parser,i=n("./node_modules/chrono-node/src/result.js").ParsedResult,s=n("./node_modules/chrono-node/src/result.js").ParsedComponents,a=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),l="(?:由|從|自)?(?:(今|明|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?",u="(?:\\s*(?:到|至|\\-|\\–|\\~|\\〜)\\s*)(?:(今|明|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(a.NUMBER).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?",d=new RegExp(l,"i"),c=new RegExp(u,"i"),f=1,p=2,m=3,h=4,g=5,v=6,y=7,b=8,_=9;t.Parser=function(){r.apply(this,arguments),this.pattern=function(){return d},this.extract=function(e,t,n,r){if(n.index>0&&e[n.index-1].match(/\w/))return null;var l=o(t),u=new i;u.ref=t,u.index=n.index,u.text=n[0],u.tags.ZHTimeExpressionParser=!0;var d=l.clone();if(n[f]){var x=n[f];"明"==x||"聽"==x?l.hour()>1&&d.add(1,"day"):"昨"!=x&&"尋"!=x&&"琴"!=x||d.add(-1,"day"),u.start.assign("day",d.date()),u.start.assign("month",d.month()+1),u.start.assign("year",d.year())}else if(n[h]){var C=n[h];"明"==C||"聽"==C?d.add(1,"day"):"昨"!=C&&"尋"!=C&&"琴"!=C||d.add(-1,"day"),u.start.assign("day",d.date()),u.start.assign("month",d.month()+1),u.start.assign("year",d.year())}else u.start.imply("day",d.date()),u.start.imply("month",d.month()+1),u.start.imply("year",d.year());var j=0,E=0,w=-1;if(n[b]){var S=parseInt(n[b]);if(isNaN(S)&&(S=a.zhStringToNumber(n[b])),S>=60)return null;u.start.assign("second",S)}if(j=parseInt(n[v]),isNaN(j)&&(j=a.zhStringToNumber(n[v])),n[y]?"半"==n[y]?E=30:"正"==n[y]||"整"==n[y]?E=0:(E=parseInt(n[y]),isNaN(E)&&(E=a.zhStringToNumber(n[y]))):j>100&&(E=j%100,j=parseInt(j/100)),E>=60)return null;if(j>24)return null;if(j>=12&&(w=1),n[_]){if(j>12)return null;var k=n[_][0].toLowerCase();"a"==k&&(w=0,12==j&&(j=0)),"p"==k&&(w=1,12!=j&&(j+=12))}else if(n[p]){var T=n[p],P=T[0];"朝"==P||"早"==P?(w=0,12==j&&(j=0)):"晚"==P&&(w=1,12!=j&&(j+=12))}else if(n[m]){var I=n[m],R=I[0];"上"==R||"朝"==R||"早"==R||"凌"==R?(w=0,12==j&&(j=0)):"下"!=R&&"晏"!=R&&"晚"!=R||(w=1,12!=j&&(j+=12))}else if(n[g]){var N=n[g],M=N[0];"上"==M||"朝"==M||"早"==M||"凌"==M?(w=0,12==j&&(j=0)):"下"!=M&&"晏"!=M&&"晚"!=M||(w=1,12!=j&&(j+=12))}if(u.start.assign("hour",j),u.start.assign("minute",E),w>=0?u.start.assign("meridiem",w):j<12?u.start.imply("meridiem",0):u.start.imply("meridiem",1),n=c.exec(e.substring(u.index+u.text.length)),!n)return u.text.match(/^\d+$/)?null:u;var D=d.clone();if(u.end=new s(null,null),n[f]){var x=n[f];"明"==x||"聽"==x?l.hour()>1&&D.add(1,"day"):"昨"!=x&&"尋"!=x&&"琴"!=x||D.add(-1,"day"),u.end.assign("day",D.date()),u.end.assign("month",D.month()+1),u.end.assign("year",D.year())}else if(n[h]){var C=n[h];"明"==C||"聽"==C?D.add(1,"day"):"昨"!=C&&"尋"!=C&&"琴"!=C||D.add(-1,"day"),u.end.assign("day",D.date()),u.end.assign("month",D.month()+1),u.end.assign("year",D.year())}else u.end.imply("day",D.date()),u.end.imply("month",D.month()+1),u.end.imply("year",D.year());if(j=0,E=0,w=-1,n[b]){var S=parseInt(n[b]);if(isNaN(S)&&(S=a.zhStringToNumber(n[b])),S>=60)return null;u.end.assign("second",S)}if(j=parseInt(n[v]),isNaN(j)&&(j=a.zhStringToNumber(n[v])),n[y]?"半"==n[y]?E=30:"正"==n[y]||"整"==n[y]?E=0:(E=parseInt(n[y]),isNaN(E)&&(E=a.zhStringToNumber(n[y]))):j>100&&(E=j%100,j=parseInt(j/100)),E>=60)return null;if(j>24)return null;if(j>=12&&(w=1),n[_]){if(j>12)return null;var k=n[_][0].toLowerCase();"a"==k&&(w=0,12==j&&(j=0)),"p"==k&&(w=1,12!=j&&(j+=12)),u.start.isCertain("meridiem")||(0==w?(u.start.imply("meridiem",0),12==u.start.get("hour")&&u.start.assign("hour",0)):(u.start.imply("meridiem",1),12!=u.start.get("hour")&&u.start.assign("hour",u.start.get("hour")+12)))}else if(n[p]){var T=n[p],P=T[0];"朝"==P||"早"==P?(w=0,12==j&&(j=0)):"晚"==P&&(w=1,12!=j&&(j+=12))}else if(n[m]){var I=n[m],R=I[0];"上"==R||"朝"==R||"早"==R||"凌"==R?(w=0,12==j&&(j=0)):"下"!=R&&"晏"!=R&&"晚"!=R||(w=1,12!=j&&(j+=12))}else if(n[g]){var N=n[g],M=N[0];"上"==M||"朝"==M||"早"==M||"凌"==M?(w=0,12==j&&(j=0)):"下"!=M&&"晏"!=M&&"晚"!=M||(w=1,12!=j&&(j+=12))}if(u.text=u.text+n[0],u.end.assign("hour",j),u.end.assign("minute",E),w>=0)u.end.assign("meridiem",w);else{var O=u.start.isCertain("meridiem")&&1==u.start.get("meridiem");O&&u.start.get("hour")>j?u.end.imply("meridiem",0):j>12&&u.end.imply("meridiem",1)}return u.end.date().getTime()<u.start.date().getTime()&&u.end.imply("day",u.end.get("day")+1),u}}},"./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantWeekdayParser.js":function(e,t,n){var o=(n("./node_modules/moment/moment.js"),n("./node_modules/chrono-node/src/parsers/parser.js").Parser),r=n("./node_modules/chrono-node/src/result.js").ParsedResult,i=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").updateParsedComponent,s=n("./node_modules/chrono-node/src/utils/ZH-Hant.js"),a=new RegExp("(上|今|下|這|呢)?(?:個)?(?:星期|禮拜)("+Object.keys(s.WEEKDAY_OFFSET).join("|")+")"),l=1,u=2;t.Parser=function(){o.apply(this,arguments),this.pattern=function(){return a},this.extract=function(e,t,n,o){var a=n.index;e=n[0];var d=new r({index:a,text:e,ref:t}),c=n[u],f=s.WEEKDAY_OFFSET[c];if(void 0===f)return null;var p=null,m=n[l];return"上"==m?p="last":"下"==m?p="next":"今"!=m&&"這"!=m&&"呢"!=m||(p="this"),i(d,t,f,p),d.tags.ZHHantWeekdayParser=!0,d}}},"./node_modules/chrono-node/src/parsers/parser.js":function(e,t,n){function o(e){this.isStrictMode=function(){return 1==e},this.pattern=function(){return/./i},this.extract=function(e,t,n,o){return null},this.execute=function(e,t,n){for(var o=[],r=this.pattern(),i=e,s=r.exec(i);s;){s.index+=e.length-i.length;var a=this.extract(e,t,s,n);a?(i=e.substring(a.index+a.text.length),this.isStrictMode()&&!a.hasPossibleDates()||o.push(a)):i=e.substring(s.index+1),s=r.exec(i)}return this.refiners&&this.refiners.forEach(function(){o=refiner.refine(o,e,options)}),o}}t.Parser=o,t.ENISOFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENISOFormatParser.js").Parser,
t.ENDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENDeadlineFormatParser.js").Parser,t.ENRelativeDateFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENRelativeDateFormatParser.js").Parser,t.ENMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/EN/ENMonthNameLittleEndianParser.js").Parser,t.ENMonthNameMiddleEndianParser=n("./node_modules/chrono-node/src/parsers/EN/ENMonthNameMiddleEndianParser.js").Parser,t.ENMonthNameParser=n("./node_modules/chrono-node/src/parsers/EN/ENMonthNameParser.js").Parser,t.ENSlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatParser.js").Parser,t.ENSlashDateFormatStartWithYearParser=n("./node_modules/chrono-node/src/parsers/EN/ENSlashDateFormatStartWithYearParser.js").Parser,t.ENSlashMonthFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENSlashMonthFormatParser.js").Parser,t.ENTimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/EN/ENTimeAgoFormatParser.js").Parser,t.ENTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/EN/ENTimeExpressionParser.js").Parser,t.ENWeekdayParser=n("./node_modules/chrono-node/src/parsers/EN/ENWeekdayParser.js").Parser,t.ENCasualDateParser=n("./node_modules/chrono-node/src/parsers/EN/ENCasualDateParser.js").Parser,t.ENCasualTimeParser=n("./node_modules/chrono-node/src/parsers/EN/ENCasualTimeParser.js").Parser,t.JPStandardParser=n("./node_modules/chrono-node/src/parsers/JP/JPStandardParser.js").Parser,t.JPCasualDateParser=n("./node_modules/chrono-node/src/parsers/JP/JPCasualDateParser.js").Parser,t.ESCasualDateParser=n("./node_modules/chrono-node/src/parsers/ES/ESCasualDateParser.js").Parser,t.ESDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/ES/ESDeadlineFormatParser.js").Parser,t.ESTimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/ES/ESTimeAgoFormatParser.js").Parser,t.ESTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/ES/ESTimeExpressionParser.js").Parser,t.ESWeekdayParser=n("./node_modules/chrono-node/src/parsers/ES/ESWeekdayParser.js").Parser,t.ESMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/ES/ESMonthNameLittleEndianParser.js").Parser,t.ESSlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/ES/ESSlashDateFormatParser.js").Parser,t.FRCasualDateParser=n("./node_modules/chrono-node/src/parsers/FR/FRCasualDateParser.js").Parser,t.FRDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/FR/FRDeadlineFormatParser.js").Parser,t.FRMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/FR/FRMonthNameLittleEndianParser.js").Parser,t.FRSlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/FR/FRSlashDateFormatParser.js").Parser,t.FRTimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/FR/FRTimeAgoFormatParser.js").Parser,t.FRTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/FR/FRTimeExpressionParser.js").Parser,t.FRWeekdayParser=n("./node_modules/chrono-node/src/parsers/FR/FRWeekdayParser.js").Parser,t.ZHHantDateParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDateParser.js").Parser,t.ZHHantWeekdayParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantWeekdayParser.js").Parser,t.ZHHantTimeExpressionParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantTimeExpressionParser.js").Parser,t.ZHHantCasualDateParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantCasualDateParser.js").Parser,t.ZHHantDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/ZH-Hant/ZHHantDeadlineFormatParser.js").Parser,t.DEDeadlineFormatParser=n("./node_modules/chrono-node/src/parsers/DE/DEDeadlineFormatParser.js").Parser,t.DEMonthNameLittleEndianParser=n("./node_modules/chrono-node/src/parsers/DE/DEMonthNameLittleEndianParser.js").Parser,t.DEMonthNameParser=n("./node_modules/chrono-node/src/parsers/DE/DEMonthNameParser.js").Parser,t.DESlashDateFormatParser=n("./node_modules/chrono-node/src/parsers/DE/DESlashDateFormatParser.js").Parser,t.DETimeAgoFormatParser=n("./node_modules/chrono-node/src/parsers/DE/DETimeAgoFormatParser.js").Parser,t.DETimeExpressionParser=n("./node_modules/chrono-node/src/parsers/DE/DETimeExpressionParser.js").Parser,t.DEWeekdayParser=n("./node_modules/chrono-node/src/parsers/DE/DEWeekdayParser.js").Parser,t.DECasualDateParser=n("./node_modules/chrono-node/src/parsers/DE/DECasualDateParser.js").Parser},"./node_modules/chrono-node/src/refiners/DE/DEMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(bis(?:\s*(?:am|zum))?|\-)\s*$/i}}},"./node_modules/chrono-node/src/refiners/DE/DEMergeDateTimeRefiner.js":function(e,t,n){function o(e){return!e.start.isCertain("hour")}function r(e){return!e.start.isCertain("month")&&!e.start.isCertain("weekday")}function i(e,t,n){var o=e.substring(t.index+t.text.length,n.index);return o.match(l)}function s(e,t,n){var o=t.start,r=n.start,i=o.clone();if(i.assign("hour",r.get("hour")),i.assign("minute",r.get("minute")),i.assign("second",r.get("second")),r.isCertain("meridiem")?i.assign("meridiem",r.get("meridiem")):void 0!==r.get("meridiem")&&void 0===i.get("meridiem")&&i.imply("meridiem",r.get("meridiem")),1==i.get("meridiem")&&i.get("hour")<12&&i.assign("hour",i.get("hour")+12),null!=t.end||null!=n.end){var s=null==t.end?t.start:t.end,a=null==n.end?n.start:n.end,l=s.clone();l.assign("hour",a.get("hour")),l.assign("minute",a.get("minute")),l.assign("second",a.get("second")),a.isCertain("meridiem")?l.assign("meridiem",a.get("meridiem")):null!=r.get("meridiem")&&l.imply("meridiem",a.get("meridiem")),null==t.end&&l.date().getTime()<i.date().getTime()&&(l.isCertain("day")?l.assign("day",l.get("day")+1):l.imply("day",l.get("day")+1)),t.end=l}t.start=i;var u=Math.min(t.index,n.index),d=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=u,t.text=e.substring(u,d);for(var c in n.tags)t.tags[c]=!0;return t.tags.DEMergeDateAndTimeRefiner=!0,t}var a=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),l=new RegExp("^\\s*(T|um|am|,|-)?\\s*$");t.Refiner=function(){a.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var a=[],l=null,u=null,d=1;d<t.length;d++)l=t[d],u=t[d-1],o(u)&&r(l)&&i(e,u,l)?(u=s(e,u,l),l=null,d+=1):o(l)&&r(u)&&i(e,u,l)&&(u=s(e,l,u),l=null,d+=1),a.push(u);return null!=l&&a.push(l),a}}},"./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(to|\-)\s*$/i},this.refine=function(e,t,n){if(t.length<2)return t;for(var o=[],r=null,i=null,s=1;s<t.length;s++)r=t[s],i=t[s-1],i.end||r.end||!this.isAbleToMerge(e,i,r)||(i=this.mergeResult(e,i,r),r=null,s+=1),o.push(i);return null!=r&&o.push(r),o},this.isAbleToMerge=function(e,t,n){var o=t.index+t.text.length,r=n.index,i=e.substring(o,r);return i.match(this.pattern())},this.isWeekdayResult=function(e){return e.start.isCertain("weekday")&&!e.start.isCertain("day")},this.mergeResult=function(e,t,n){if(!this.isWeekdayResult(t)&&!this.isWeekdayResult(n)){for(var o in n.start.knownValues)t.start.isCertain(o)||t.start.assign(o,n.start.get(o));for(var o in t.start.knownValues)n.start.isCertain(o)||n.start.assign(o,t.start.get(o))}if(t.start.date().getTime()>n.start.date().getTime()){var r=n;n=t,t=r}t.end=n.start;for(var i in n.tags)t.tags[i]=!0;var s=Math.min(t.index,n.index),a=Math.max(t.index+t.text.length,n.index+n.text.length);return t.index=s,t.text=e.substring(s,a),t.tags[this.constructor.name]=!0,t}}},"./node_modules/chrono-node/src/refiners/EN/ENMergeDateTimeRefiner.js":function(e,t,n){function o(e){return!e.start.isCertain("hour")}function r(e){return!e.start.isCertain("month")&&!e.start.isCertain("weekday")}function i(e,t,n){var o=e.substring(t.index+t.text.length,n.index);return o.match(l)}function s(e,t,n){var o=t.start,r=n.start,i=o.clone();if(i.assign("hour",r.get("hour")),i.assign("minute",r.get("minute")),i.assign("second",r.get("second")),r.isCertain("meridiem")?i.assign("meridiem",r.get("meridiem")):void 0!==r.get("meridiem")&&void 0===i.get("meridiem")&&i.imply("meridiem",r.get("meridiem")),1==i.get("meridiem")&&i.get("hour")<12&&i.assign("hour",i.get("hour")+12),null!=t.end||null!=n.end){var s=null==t.end?t.start:t.end,a=null==n.end?n.start:n.end,l=s.clone();l.assign("hour",a.get("hour")),l.assign("minute",a.get("minute")),l.assign("second",a.get("second")),a.isCertain("meridiem")?l.assign("meridiem",a.get("meridiem")):null!=r.get("meridiem")&&l.imply("meridiem",a.get("meridiem")),null==t.end&&l.date().getTime()<i.date().getTime()&&(l.isCertain("day")?l.assign("day",l.get("day")+1):l.imply("day",l.get("day")+1)),t.end=l}t.start=i;var u=Math.min(t.index,n.index),d=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=u,t.text=e.substring(u,d);for(var c in n.tags)t.tags[c]=!0;return t.tags.ENMergeDateAndTimeRefiner=!0,t}var a=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),l=new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$");t.Refiner=function(){a.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var a=[],l=null,u=null,d=1;d<t.length;d++)l=t[d],u=t[d-1],o(u)&&r(l)&&i(e,u,l)?(u=s(e,u,l),l=null,d+=1):o(l)&&r(u)&&i(e,u,l)&&(u=s(e,l,u),l=null,d+=1),a.push(u);return null!=l&&a.push(l),a}}},"./node_modules/chrono-node/src/refiners/EN/ENPrioritizeSpecificDateRefiner.js":function(e,t,n){function o(e,t){var n=!1;return e.start.isCertain("year")&&(t.start.isCertain("year")?e.start.isCertain("month")&&(t.start.isCertain("month")?e.start.isCertain("day")&&!t.start.isCertain("day")&&(n=!0):n=!0):n=!0),n}function r(e,t,n){var o=e.substring(t.index+t.text.length,n.index),r=t.tags.ENRelativeDateFormatParser||n.tags.ENRelativeDateFormatParser,i=!t.start.isCertain("day")&&!t.start.isCertain("month")&&!t.start.isCertain("year");return t.start.isCertain("year")&&n.start.isCertain("year")&&(i=t.start.get("year")===n.start.get("year")),t.start.isCertain("month")&&n.start.isCertain("month")&&(i=t.start.get("month")===n.start.get("month")&&i),r&&o.match(a)&&i}function i(e,t,n){var o=(t.start,n.start,Math.min(t.index,n.index)),r=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=o,t.text=e.substring(o,r);for(var i in n.tags)t.tags[i]=!0;return t.tags.ENPrioritizeSpecificDateRefiner=!0,t}var s=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),a=new RegExp("^\\s*(at|after|before|on|,|-|\\(|\\))?\\s*$");t.Refiner=function(){s.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var s=[],a=null,l=null,u=1;u<t.length;u++)a=t[u],l=t[u-1],o(l,a)&&r(e,l,a)?(l=i(e,l,a),a=null,u+=1):o(a,l)&&r(e,l,a)&&(l=i(e,a,l),a=null,u+=1),s.push(l);return null!=a&&s.push(a),s}}},"./node_modules/chrono-node/src/refiners/ExtractTimezoneAbbrRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner,r={},i=new RegExp("^\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");t.Refiner=function(){o.call(this),this.refine=function(e,t,n){return t.forEach(function(t){if(t.tags.ENTimeExpressionParser||t.tags.ZHTimeExpressionParser||t.tags.FRTimeExpressionParser||t.tags.DETimeExpressionParser){var n=i.exec(e.substring(t.index+t.text.length));if(n){var o=n[1].toUpperCase();if(void 0===r[o])return;var s=r[o];t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",s),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",s),t.text+=n[0],t.tags.ExtractTimezoneAbbrRefiner=!0}}}),t}},r={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:60,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360}},"./node_modules/chrono-node/src/refiners/ExtractTimezoneOffsetRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner,r=new RegExp("^\\s*(GMT|UTC)?(\\+|\\-)(\\d{1,2}):?(\\d{2})","i"),i=2,s=3,a=4;t.Refiner=function(){o.call(this),this.refine=function(e,t,n){return t.forEach(function(t){if(!t.start.isCertain("timezoneOffset")){var n=r.exec(e.substring(t.index+t.text.length));if(n){var o=parseInt(n[s]),l=parseInt(n[a]),u=60*o+l;"-"===n[i]&&(u=-u),null!=t.end&&t.end.assign("timezoneOffset",u),t.start.assign("timezoneOffset",u),t.text+=n[0],t.tags.ExtractTimezoneOffsetRefiner=!0}}}),t}}},"./node_modules/chrono-node/src/refiners/FR/FRMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(à|a|\-)\s*$/i},this.refine=function(e,t,n){if(t.length<2)return t;for(var o=[],r=null,i=null,s=1;s<t.length;s++)r=t[s],i=t[s-1],i.end||r.end||!this.isAbleToMerge(e,i,r)||(i=this.mergeResult(e,i,r),r=null,s+=1),o.push(i);return null!=r&&o.push(r),o},this.isAbleToMerge=function(e,t,n){var o=t.index+t.text.length,r=n.index,i=e.substring(o,r);return i.match(this.pattern())},this.isWeekdayResult=function(e){return e.start.isCertain("weekday")&&!e.start.isCertain("day")},this.mergeResult=function(e,t,n){if(!this.isWeekdayResult(t)&&!this.isWeekdayResult(n)){for(var o in n.start.knownValues)t.start.isCertain(o)||t.start.assign(o,n.start.get(o));for(var o in t.start.knownValues)n.start.isCertain(o)||n.start.assign(o,t.start.get(o))}if(t.start.date().getTime()>n.start.date()){var r=n;n=t,t=r}t.end=n.start;for(var i in n.tags)t.tags[i]=!0;var s=Math.min(t.index,n.index),a=Math.max(t.index+t.text.length,n.index+n.text.length);return t.index=s,t.text=e.substring(s,a),t.tags[this.constructor.name]=!0,t}}},"./node_modules/chrono-node/src/refiners/FR/FRMergeDateTimeRefiner.js":function(e,t,n){function o(e){return!e.start.isCertain("hour")||e.tags.FRCasualDateParser}function r(e){return!e.start.isCertain("month")&&!e.start.isCertain("weekday")}function i(e,t,n){var o=e.substring(t.index+t.text.length,n.index);return o.match(l)}function s(e,t,n){var o=t.start,r=n.start,i=o.clone();if(i.assign("hour",r.get("hour")),i.assign("minute",r.get("minute")),i.assign("second",r.get("second")),r.isCertain("meridiem")?i.assign("meridiem",r.get("meridiem")):void 0!==r.get("meridiem")&&void 0===i.get("meridiem")&&i.imply("meridiem",r.get("meridiem")),1==i.get("meridiem")&&i.get("hour")<12&&i.assign("hour",i.get("hour")+12),null!=t.end||null!=n.end){var s=null==t.end?t.start:t.end,a=null==n.end?n.start:n.end,l=s.clone();l.assign("hour",a.get("hour")),l.assign("minute",a.get("minute")),l.assign("second",a.get("second")),a.isCertain("meridiem")?l.assign("meridiem",a.get("meridiem")):null!=r.get("meridiem")&&l.imply("meridiem",a.get("meridiem")),null==t.end&&l.date().getTime()<i.date().getTime()&&(l.isCertain("day")?l.assign("day",l.get("day")+1):l.imply("day",l.get("day")+1)),t.end=l}t.start=i;var u=Math.min(t.index,n.index),d=Math.max(t.index+t.text.length,n.index+n.text.length);t.index=u,t.text=e.substring(u,d);for(var c in n.tags)t.tags[c]=!0;return t.tags.FRMergeDateAndTimeRefiner=!0,t}var a=(n("./node_modules/chrono-node/src/result.js").ParsedComponents,n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner),l=new RegExp("^\\s*(T|à|a|vers|de|,|-)?\\s*$");t.Refiner=function(){a.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var a=[],l=null,u=null,d=1;d<t.length;d++)l=t[d],u=t[d-1],o(u)&&r(l)&&i(e,u,l)?(u=s(e,u,l),l=null,d+=1):o(l)&&r(u)&&i(e,u,l)&&(u=s(e,l,u),l=null,d+=1),a.push(u);return null!=l&&a.push(l),a}}},"./node_modules/chrono-node/src/refiners/ForwardDateRefiner.js":function(e,t,n){var o=n("./node_modules/moment/moment.js"),r=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){r.call(this),this.refine=function(e,t,n){return n.forwardDate||n.forwardDatesOnly?(t.forEach(function(e){var t=o(e.ref);if(e.start.isCertain("day")&&e.start.isCertain("month")&&!e.start.isCertain("year")&&t.isAfter(e.start.moment())){for(var n=0;n<3&&t.isAfter(e.start.moment());n++)e.start.imply("year",e.start.get("year")+1),e.end&&!e.end.isCertain("year")&&e.end.imply("year",e.end.get("year")+1);e.tags.ExtractTimezoneOffsetRefiner=!0}e.start.isCertain("day")||e.start.isCertain("month")||e.start.isCertain("year")||!e.start.isCertain("weekday")||!t.isAfter(e.start.moment())||(t.day()>e.start.get("weekday")?t.day(e.start.get("weekday")+7):t.day(e.start.get("weekday")),e.start.imply("day",t.date()),e.start.imply("month",t.month()+1),e.start.imply("year",t.year()),e.tags.ExtractTimezoneOffsetRefiner=!0)}),t):t}}},"./node_modules/chrono-node/src/refiners/JP/JPMergeDateRangeRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js").Refiner;t.Refiner=function(){o.call(this),this.pattern=function(){return/^\s*(から|ー)\s*$/i}}},"./node_modules/chrono-node/src/refiners/OverlapRemovalRefiner.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Refiner;t.Refiner=function(){o.call(this),this.refine=function(e,t,n){if(t.length<2)return t;for(var o=[],r=t[0],i=1;i<t.length;i++){var s=t[i];s.index<r.index+r.text.length?s.text.length>r.text.length&&(r=s):(o.push(r),r=s)}return null!=r&&o.push(r),o}}},"./node_modules/chrono-node/src/refiners/UnlikelyFormatFilter.js":function(e,t,n){var o=n("./node_modules/chrono-node/src/refiners/refiner.js").Filter;t.Refiner=function(){o.call(this),this.isValid=function(e,t,n){return!t.text.replace(" ","").match(/^\d*(\.\d*)?$/)}}},"./node_modules/chrono-node/src/refiners/refiner.js":function(e,t,n){t.Refiner=function(){this.refine=function(e,t,n){return t}},t.Filter=function(){t.Refiner.call(this),this.isValid=function(e,t,n){return!0},this.refine=function(e,t,n){for(var o=[],r=0;r<t.length;r++){var i=t[r];this.isValid(e,i,n)&&o.push(i)}return o}},t.OverlapRemovalRefiner=n("./node_modules/chrono-node/src/refiners/OverlapRemovalRefiner.js").Refiner,t.ExtractTimezoneOffsetRefiner=n("./node_modules/chrono-node/src/refiners/ExtractTimezoneOffsetRefiner.js").Refiner,t.ExtractTimezoneAbbrRefiner=n("./node_modules/chrono-node/src/refiners/ExtractTimezoneAbbrRefiner.js").Refiner,t.ForwardDateRefiner=n("./node_modules/chrono-node/src/refiners/ForwardDateRefiner.js").Refiner,t.UnlikelyFormatFilter=n("./node_modules/chrono-node/src/refiners/UnlikelyFormatFilter.js").Refiner,t.ENMergeDateTimeRefiner=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateTimeRefiner.js").Refiner,t.ENMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/EN/ENMergeDateRangeRefiner.js").Refiner,t.ENPrioritizeSpecificDateRefiner=n("./node_modules/chrono-node/src/refiners/EN/ENPrioritizeSpecificDateRefiner.js").Refiner,t.JPMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/JP/JPMergeDateRangeRefiner.js").Refiner,t.FRMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/FR/FRMergeDateRangeRefiner.js").Refiner,t.FRMergeDateTimeRefiner=n("./node_modules/chrono-node/src/refiners/FR/FRMergeDateTimeRefiner.js").Refiner,t.DEMergeDateRangeRefiner=n("./node_modules/chrono-node/src/refiners/DE/DEMergeDateRangeRefiner.js").Refiner,t.DEMergeDateTimeRefiner=n("./node_modules/chrono-node/src/refiners/DE/DEMergeDateTimeRefiner.js").Refiner},"./node_modules/chrono-node/src/result.js":function(e,t,n){function o(e){e=e||{},this.ref=e.ref,this.index=e.index,this.text=e.text,this.tags=e.tags||{},this.start=new r(e.start,e.ref),e.end&&(this.end=new r(e.end,e.ref))}function r(e,t){if(this.knownValues={},this.impliedValues={},e)for(key in e)this.knownValues[key]=e[key];t&&(t=i(t),this.imply("day",t.date()),this.imply("month",t.month()+1),this.imply("year",t.year())),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}var i=n("./node_modules/moment/moment.js");o.prototype.clone=function(){var e=new o(this);e.tags=JSON.parse(JSON.stringify(this.tags)),e.start=this.start.clone(),this.end&&(e.end=this.end.clone())},o.prototype.hasPossibleDates=function(){return this.start.isPossibleDate()&&(!this.end||this.end.isPossibleDate())},r.prototype.clone=function(){var e=new r;return e.knownValues=JSON.parse(JSON.stringify(this.knownValues)),e.impliedValues=JSON.parse(JSON.stringify(this.impliedValues)),e},r.prototype.get=function(e,t){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:void 0},r.prototype.assign=function(e,t){this.knownValues[e]=t,delete this.impliedValues[e]},r.prototype.imply=function(e,t){e in this.knownValues||(this.impliedValues[e]=t)},r.prototype.isCertain=function(e){return e in this.knownValues},r.prototype.isPossibleDate=function(){var e=this.moment();return this.isCertain("timezoneOffset")&&e.utcOffset(this.get("timezoneOffset")),e.get("year")==this.get("year")&&(e.get("month")==this.get("month")-1&&(e.get("date")==this.get("day")&&(e.get("hour")==this.get("hour")&&e.get("minute")==this.get("minute"))))},r.prototype.date=function(){var e=this.moment();return e.toDate()},r.prototype.moment=function(){var e=i();e.set("year",this.get("year")),e.set("month",this.get("month")-1),e.set("date",this.get("day")),e.set("hour",this.get("hour")),e.set("minute",this.get("minute")),e.set("second",this.get("second")),e.set("millisecond",this.get("millisecond"));var t=e.utcOffset(),n=this.isCertain("timezoneOffset")?this.get("timezoneOffset"):t,o=n-t;return e.add(-o,"minutes"),e},t.ParsedComponents=r,t.ParsedResult=o},"./node_modules/chrono-node/src/utils/DE.js":function(e,t){t.WEEKDAY_OFFSET={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},t.MONTH_OFFSET={januar:1,jan:1,"jan.":1,februar:2,feb:2,"feb.":2,"märz":3,maerz:3,"mär":3,"mär.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12},t.INTEGER_WORDS_PATTERN="(?:eins|zwei|drei|vier|fünf|fuenf|sechs|sieben|acht|neun|zehn|elf|zwölf|zwoelf)",t.INTEGER_WORDS={eins:1,zwei:2,drei:3,vier:4,"fünf":5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,"zwölf":12,zwoelf:12}},"./node_modules/chrono-node/src/utils/EN.js":function(e,t){t.WEEKDAY_OFFSET={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6},t.MONTH_OFFSET={january:1,jan:1,"jan.":1,february:2,feb:2,"feb.":2,march:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,may:5,june:6,jun:6,"jun.":6,july:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,october:10,oct:10,"oct.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12},t.INTEGER_WORDS={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},t.INTEGER_WORDS_PATTERN="(?:"+Object.keys(t.INTEGER_WORDS).join("|")+")",t.ORDINAL_WORDS={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty second":22,"twenty third":23,"twenty fourth":24,"twenty fifth":25,"twenty sixth":26,"twenty seventh":27,"twenty eighth":28,"twenty ninth":29,thirtieth:30,"thirty first":31},t.ORDINAL_WORDS_PATTERN="(?:"+Object.keys(t.ORDINAL_WORDS).join("|").replace(/ /g,"[ -]")+")"},"./node_modules/chrono-node/src/utils/ES.js":function(e,t){t.WEEKDAY_OFFSET={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,"miércoles":3,miercoles:3,mie:3,jueves:4,jue:4,viernes:5,vie:5,"sábado":6,sabado:6,sab:6},t.MONTH_OFFSET={enero:1,ene:1,"ene.":1,febrero:2,feb:2,"feb.":2,marzo:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,mayo:5,may:5,"may.":5,junio:6,jun:6,"jun.":6,julio:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,septiembre:9,sep:9,sept:9,"sep.":9,"sept.":9,octubre:10,oct:10,"oct.":10,noviembre:11,nov:11,"nov.":11,diciembre:12,dic:12,"dic.":12}},"./node_modules/chrono-node/src/utils/FR.js":function(e,t){t.WEEKDAY_OFFSET={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},t.MONTH_OFFSET={janvier:1,jan:1,"jan.":1,"février":2,"fév":2,"fév.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,jul:7,"jul.":7,"août":8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,"décembre":12,dec:12,"dec.":12},t.INTEGER_WORDS_PATTERN="(?:un|deux|trois|quatre|cinq|six|sept|huit|neuf|dix|onze|douze|treize)",t.INTEGER_WORDS={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13}},"./node_modules/chrono-node/src/utils/JP.js":function(e,t){t.toHankaku=function(e,t){function n(t){return e(t).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"¥").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,o)}function o(e){return t(e.charCodeAt(0)-65248)}return n}(String,String.fromCharCode),t.toZenkaku=function(e,t){function n(t){return e(t).replace(/\u0020/g,"　").replace(/\u0022/g,"”").replace(/\u0027/g,"’").replace(/\u00A5/g,"￥").replace(/[!#-&(),-9\u003C-?A-[\u005D_a-{}~]/g,o)}function o(e){return t(e.charCodeAt(0)+65248)}return n}(String,String.fromCharCode)},"./node_modules/chrono-node/src/utils/ZH-Hant.js":function(e,t){var n={"零":0,"一":1,"二":2,"兩":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"廿":20,"卅":30},o={"天":0,"日":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6};t.NUMBER=n,t.WEEKDAY_OFFSET=o,t.zhStringToNumber=function(e){for(var t=0,o=0;o<e.length;o++){var r=e[o];"十"===r?t=0===t?n[r]:t*n[r]:t+=n[r]}return t},t.zhStringToYear=function(e){for(var t="",o=0;o<e.length;o++){var r=e[o];t+=n[r]}return parseInt(t)}},"./node_modules/component-file-picker/index.js":function(e,t,n){function o(e,t){function n(e){t(s.files,e,s),r.unbind(s,"change",n),a=!1}"function"==typeof e&&(t=e,e={}),e=e||{},s.multiple=!!e.multiple,s.webkitdirectory=s.mozdirectory=s.directory=!!e.directory,null==e.accept?delete s.accept:e.accept.join?s.accept=e.accept.join(","):e.accept&&(s.accept=e.accept),a&&r.unbind(s,"change",a),r.bind(s,"change",n),a=n,i.reset(),s.click()}var r=n("./node_modules/component-event/index.js");e.exports=o;var i=document.createElement("form");i.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(i);var s=i.childNodes[0],a=!1},"./node_modules/core-js/library/fn/math/trunc.js":function(e,t,n){n("./node_modules/core-js/library/modules/es6.math.trunc.js"),e.exports=n("./node_modules/core-js/library/modules/_core.js").Math.trunc},"./node_modules/core-js/library/modules/es6.math.trunc.js":function(e,t,n){var o=n("./node_modules/core-js/library/modules/_export.js");o(o.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},"./node_modules/dom-helpers/util/inDOM.js":function(e,t,n){"use strict";e.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},"./node_modules/dom-helpers/util/scrollbarSize.js":function(e,t,n){"use strict";var o,r=n("./node_modules/dom-helpers/util/inDOM.js");e.exports=function(e){if((!o||e)&&r){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),o=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return o}},"./node_modules/email-validator/index.js":function(e,t,n){"use strict";function o(e){if(e.length>254)return!1;var t=r.test(e);if(!t)return!1;var n=e.split("@");if(n[0].length>64)return!1;var o=n[1].split(".");return!o.some(function(e){return e.length>63})}var r=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$/;t.validate=o},"./node_modules/fbemitter/index.js":function(e,t,n){var o={EventEmitter:n("./node_modules/fbemitter/lib/BaseEventEmitter.js"),EmitterSubscription:n("./node_modules/fbemitter/lib/EmitterSubscription.js")};e.exports=o},"./node_modules/fbemitter/lib/BaseEventEmitter.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("./node_modules/fbemitter/lib/EmitterSubscription.js"),i=n("./node_modules/fbemitter/lib/EventSubscriptionVendor.js"),s=n("./node_modules/fbjs/lib/emptyFunction.js"),a=n("./node_modules/fbjs/lib/invariant.js"),l=function(){function e(){o(this,e),this._subscriber=new i,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var o=this;return this.addListener(e,function(){o.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription?void 0:a(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(s.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),o=0;o<n.length;o++){var r=n[o],i=t[r];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=l},"./node_modules/fbemitter/lib/EmitterSubscription.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("./node_modules/fbemitter/lib/EventSubscription.js"),s=function(e){function t(n,r,i){o(this,t),e.call(this,n),
this.listener=r,this.context=i}return r(t,e),t}(i);e.exports=s},"./node_modules/fbemitter/lib/EventSubscription.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(t){o(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=r},"./node_modules/fbemitter/lib/EventSubscriptionVendor.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("./node_modules/fbjs/lib/invariant.js"),i=function(){function e(){o(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this?r(!1):void 0,this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,o=this._subscriptionsForType[t];o&&delete o[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=i},"./node_modules/filesize/lib/filesize.js":function(e,t,n){"use strict";(function(t){!function(t){function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[],i=0,s=void 0,a=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,p=void 0,m=void 0,h=void 0,g=void 0;if(isNaN(e))throw new Error("Invalid arguments");return l=t.bits===!0,m=t.unix===!0,a=t.base||2,p=void 0!==t.round?t.round:m?1:2,h=void 0!==t.spacer?t.spacer:m?"":" ",g=t.symbols||t.suffixes||{},f=t.output||"string",s=void 0!==t.exponent?t.exponent:-1,c=Number(e),d=c<0,u=a>2?1e3:1024,d&&(c=-c),0===c?(n[0]=0,n[1]=m?"":l?"b":"B"):((s===-1||isNaN(s))&&(s=Math.floor(Math.log(c)/Math.log(u)),s<0&&(s=0)),s>8&&(s=8),i=2===a?c/Math.pow(2,10*s):c/Math.pow(1e3,s),l&&(i=8*i,i>u&&s<8&&(i/=u,s++)),n[0]=Number(i.toFixed(s>0?p:0)),n[1]=10===a&&1===s?l?"kb":"kB":r[l?"bits":"bytes"][s],m&&(n[1]=n[1].charAt(0),o.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),d&&(n[0]=-n[0]),n[1]=g[n[1]]||n[1],"array"===f?n:"exponent"===f?s:"object"===f?{value:n[0],suffix:n[1],symbol:n[1]}:n.join(h)}var o=/^(b|B)$/,r={bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]};e.exports=n}("undefined"!=typeof window?window:t)}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/flux/lib/FluxContainer.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){a(e);var n=l({},f,t||{}),i=function(t){function i(r){o(this,i),t.call(this,r),this.state=n.withProps?e.calculateState(null,r):e.calculateState(null,void 0)}return r(i,t),i.prototype.componentDidMount=function(){var o=this;t.prototype.componentDidMount&&t.prototype.componentDidMount.call(this);var r=e.getStores(),i=!1,s=function(){i=!0};this._fluxContainerSubscriptions=r.map(function(e){return e.addListener(s)});var a=function(){i&&o.setState(function(t){return n.withProps?e.calculateState(t,o.props):e.calculateState(t,void 0)}),i=!1};this._fluxContainerStoreGroup=new u(r,a)},i.prototype.componentWillReceiveProps=function(o,r){t.prototype.componentWillReceiveProps&&t.prototype.componentWillReceiveProps.call(this,o,r),n.withProps&&(n.pure&&c(this.props,o)||this.setState(function(t){return e.calculateState(t,o)}))},i.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount&&t.prototype.componentWillUnmount.call(this),this._fluxContainerStoreGroup.release();for(var e=this._fluxContainerSubscriptions,n=Array.isArray(e),o=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(o>=e.length)break;r=e[o++]}else{if(o=e.next(),o.done)break;r=o.value}var i=r;i.remove()}this._fluxContainerSubscriptions=[]},i}(e),d=n.pure?s(i):i,p=e.displayName||e.name;return d.displayName="FluxContainer("+p+")",d}function s(e){var t=function(e){function t(){o(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.shouldComponentUpdate=function(e,t){return!c(this.props,e)||!c(this.state,t)},t}(e);return t}function a(e){e.getStores?void 0:d(!1),e.calculateState?void 0:d(!1)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=n("./node_modules/flux/lib/FluxStoreGroup.js"),d=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),c=n("./node_modules/flux/node_modules/fbjs/lib/shallowEqual.js"),f={pure:!0,withProps:!1};e.exports={create:i}},"./node_modules/flux/lib/FluxMapStore.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("./node_modules/flux/lib/FluxReduceStore.js"),s=n("./node_modules/immutable/dist/immutable.js"),a=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),l=function(e){function t(){o(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.getInitialState=function(){return s.Map()},t.prototype.at=function(e){return this.has(e)?void 0:a(!1),this.get(e)},t.prototype.has=function(e){return this.getState().has(e)},t.prototype.get=function(e){return this.getState().get(e)},t.prototype.getAll=function(e,t){var n=this,o=s.Set(e),r=t||s.Map();return r.withMutations(function(e){for(var t=r,i=Array.isArray(t),s=0,t=i?t:t[Symbol.iterator]();;){var a;if(i){if(s>=t.length)break;a=t[s++]}else{if(s=t.next(),s.done)break;a=s.value}var l=a,u=l[0];o.has(u)&&n.has(u)||e.delete(u)}for(var d=o,c=Array.isArray(d),f=0,d=c?d:d[Symbol.iterator]();;){var p;if(c){if(f>=d.length)break;p=d[f++]}else{if(f=d.next(),f.done)break;p=f.value}var m=p;n.has(m)&&e.set(m,n.at(m))}})},t}(i);e.exports=l},"./node_modules/flux/lib/FluxMixinLegacy.js":function(e,t,n){"use strict";function o(e){return{getInitialState:function(){return r(this),this.constructor.calculateState(null)},componentDidMount:function(){var t=this,n=!1,o=function(){n=!0};this._fluxMixinSubscriptions=e.map(function(e){return e.addListener(o)});var r=function(){n&&t.setState(function(e){return t.constructor.calculateState(t.state)}),n=!1};this._fluxMixinStoreGroup=new i(e,r)},componentWillUnmount:function(){this._fluxMixinStoreGroup.release();for(var e=this._fluxMixinSubscriptions,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var o;if(t){if(n>=e.length)break;o=e[n++]}else{if(n=e.next(),n.done)break;o=n.value}var r=o;r.remove()}this._fluxMixinSubscriptions=[]}}}function r(e){e.constructor.calculateState?void 0:s(!1)}var i=n("./node_modules/flux/lib/FluxStoreGroup.js"),s=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js");e.exports=o},"./node_modules/flux/lib/FluxReduceStore.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("./node_modules/flux/lib/FluxStore.js"),s=n("./node_modules/flux/lib/abstractMethod.js"),a=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),l=function(e){function t(n){o(this,t),e.call(this,n),this._state=this.getInitialState()}return r(t,e),t.prototype.getState=function(){return this._state},t.prototype.getInitialState=function(){return s("FluxReduceStore","getInitialState")},t.prototype.reduce=function(e,t){return s("FluxReduceStore","reduce")},t.prototype.areEqual=function(e,t){return e===t},t.prototype.__invokeOnDispatch=function(e){this.__changed=!1;var t=this._state,n=this.reduce(t,e);void 0===n?a(!1):void 0,this.areEqual(t,n)||(this._state=n,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},t}(i);e.exports=l},"./node_modules/flux/lib/FluxStore.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("./node_modules/fbemitter/index.js"),i=r.EventEmitter,s=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),a=function(){function e(t){var n=this;o(this,e),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=t,this.__emitter=new i,this._dispatchToken=t.register(function(e){n.__invokeOnDispatch(e)})}return e.prototype.addListener=function(e){return this.__emitter.addListener(this.__changeEvent,e)},e.prototype.getDispatcher=function(){return this.__dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()?void 0:s(!1),this.__changed},e.prototype.__emitChange=function(){this.__dispatcher.isDispatching()?void 0:s(!1),this.__changed=!0},e.prototype.__invokeOnDispatch=function(e){this.__changed=!1,this.__onDispatch(e),this.__changed&&this.__emitter.emit(this.__changeEvent)},e.prototype.__onDispatch=function(e){s(!1)},e}();e.exports=a},"./node_modules/flux/lib/FluxStoreGroup.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){e&&e.length?void 0:i(!1);var t=e[0].getDispatcher();return t}var i=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js"),s=function(){function e(t,n){var i=this;o(this,e),this._dispatcher=r(t);var s=t.map(function(e){return e.getDispatchToken()});this._dispatchToken=this._dispatcher.register(function(e){i._dispatcher.waitFor(s),n()})}return e.prototype.release=function(){this._dispatcher.unregister(this._dispatchToken)},e}();e.exports=s},"./node_modules/flux/lib/abstractMethod.js":function(e,t,n){"use strict";function o(e,t){r(!1)}var r=n("./node_modules/flux/node_modules/fbjs/lib/invariant.js");e.exports=o},"./node_modules/flux/node_modules/fbjs/lib/shallowEqual.js":function(e,t,n){"use strict";function o(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=r.bind(t),s=0;s<n.length;s++)if(!i(n[s])||e[n[s]]!==t[n[s]])return!1;return!0}var r=Object.prototype.hasOwnProperty;e.exports=o},"./node_modules/flux/utils.js":function(e,t,n){e.exports.Container=n("./node_modules/flux/lib/FluxContainer.js"),e.exports.MapStore=n("./node_modules/flux/lib/FluxMapStore.js"),e.exports.Mixin=n("./node_modules/flux/lib/FluxMixinLegacy.js"),e.exports.ReduceStore=n("./node_modules/flux/lib/FluxReduceStore.js"),e.exports.Store=n("./node_modules/flux/lib/FluxStore.js")},"./node_modules/immutable/dist/immutable.js":function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return i(e)?e:P(e)}function n(e){return s(e)?e:I(e)}function o(e){return a(e)?e:R(e)}function r(e){return i(e)&&!l(e)?e:N(e)}function i(e){return!(!e||!e[un])}function s(e){return!(!e||!e[dn])}function a(e){return!(!e||!e[cn])}function l(e){return s(e)||a(e)}function u(e){return!(!e||!e[fn])}function d(e){return e.value=!1,e}function c(e){e&&(e.value=!0)}function f(){}function p(e,t){t=t||0;for(var n=Math.max(0,e.length-t),o=new Array(n),r=0;r<n;r++)o[r]=e[r+t];return o}function m(e){return void 0===e.size&&(e.size=e.__iterate(g)),e.size}function h(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?m(e)+t:t}function g(){return!0}function v(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function y(e,t){return _(e,t,0)}function b(e,t){return _(e,t,t)}function _(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function x(e){this.next=e}function C(e,t,n,o){var r=0===e?t:1===e?n:[t,n];return o?o.value=r:o={value:r,done:!1},o}function j(){return{value:void 0,done:!0}}function E(e){return!!k(e)}function w(e){return e&&"function"==typeof e.next}function S(e){var t=k(e);return t&&t.call(e)}function k(e){var t=e&&(jn&&e[jn]||e[En]);if("function"==typeof t)return t}function T(e){return e&&"number"==typeof e.length}function P(e){return null===e||void 0===e?B():i(e)?e.toSeq():U(e)}function I(e){return null===e||void 0===e?B().toKeyedSeq():i(e)?s(e)?e.toSeq():e.fromEntrySeq():F(e)}function R(e){return null===e||void 0===e?B():i(e)?s(e)?e.entrySeq():e.toIndexedSeq():z(e)}function N(e){return(null===e||void 0===e?B():i(e)?s(e)?e.entrySeq():e:z(e)).toSetSeq()}function M(e){this._array=e,this.size=e.length}function D(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function O(e){this._iterable=e,this.size=e.length||e.size}function A(e){this._iterator=e,this._iteratorCache=[]}function L(e){return!(!e||!e[Sn])}function B(){return kn||(kn=new M([]))}function F(e){var t=Array.isArray(e)?new M(e).fromEntrySeq():w(e)?new A(e).fromEntrySeq():E(e)?new O(e).fromEntrySeq():"object"==typeof e?new D(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function z(e){var t=H(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function U(e){var t=H(e)||"object"==typeof e&&new D(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function H(e){return T(e)?new M(e):w(e)?new A(e):E(e)?new O(e):void 0}function W(e,t,n,o){var r=e._cache;if(r){for(var i=r.length-1,s=0;s<=i;s++){var a=r[n?i-s:s];if(t(a[1],o?a[0]:s,e)===!1)return s+1}return s}return e.__iterateUncached(t,n)}function V(e,t,n,o){var r=e._cache;if(r){var i=r.length-1,s=0;return new x(function(){var e=r[n?i-s:s];return s++>i?j():C(t,o?e[0]:s-1,e[1])})}return e.__iteratorUncached(t,n)}function q(e,t){return t?G(t,e,"",{"":e}):K(e)}function G(e,t,n,o){return Array.isArray(t)?e.call(o,n,R(t).map(function(n,o){return G(e,n,o,t)})):$(t)?e.call(o,n,I(t).map(function(n,o){return G(e,n,o,t)})):t}function K(e){return Array.isArray(e)?R(e).map(K).toList():$(e)?I(e).map(K).toMap():e}function $(e){return e&&(e.constructor===Object||void 0===e.constructor)}function Y(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function J(e,t){if(e===t)return!0;if(!i(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||a(e)!==a(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!l(e);if(u(e)){var o=e.entries();return t.every(function(e,t){var r=o.next().value;return r&&Y(r[1],e)&&(n||Y(r[0],t))})&&o.next().done}var r=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{r=!0;var d=e;e=t,t=d}var c=!0,f=t.__iterate(function(t,o){if(n?!e.has(t):r?!Y(t,e.get(o,vn)):!Y(e.get(o,vn),t))return c=!1,!1});return c&&e.size===f}function Z(e,t){if(!(this instanceof Z))return new Z(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Tn)return Tn;Tn=this}}function X(e,t){if(!e)throw new Error(t)}function Q(e,t,n){if(!(this instanceof Q))return new Q(e,t,n);if(X(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Pn)return Pn;Pn=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function oe(){}function re(e){return e>>>1&1073741824|3221225471&e}function ie(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(e=e.valueOf(),e===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return re(n)}if("string"===t)return e.length>Ln?se(e):ae(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return le(e);if("function"==typeof e.toString)return ae(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function se(e){var t=zn[e];return void 0===t&&(t=ae(e),Fn===Bn&&(Fn=0,zn={}),Fn++,zn[e]=t),t}function ae(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return re(t)}function le(e){var t;if(Dn&&(t=In.get(e),void 0!==t))return t;if(t=e[An],void 0!==t)return t;if(!Mn){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[An],void 0!==t)return t;if(t=ue(e),void 0!==t)return t}if(t=++On,1073741824&On&&(On=0),Dn)In.set(e,t);else{if(void 0!==Nn&&Nn(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Mn)Object.defineProperty(e,An,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[An]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[An]=t}}return t}function ue(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function de(e){X(e!==1/0,"Cannot perform this action with an infinite size.")}function ce(e){return null===e||void 0===e?Ce():fe(e)&&!u(e)?e:Ce().withMutations(function(t){var o=n(e);de(o.size),o.forEach(function(e,n){return t.set(n,e)})})}function fe(e){return!(!e||!e[Un])}function pe(e,t){this.ownerID=e,this.entries=t}function me(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function he(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ge(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ye(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&_e(e._root)}function be(e,t){return C(e,t[0],t[1])}function _e(e,t){return{node:e,index:0,__prev:t}}function xe(e,t,n,o){var r=Object.create(Hn);return r.size=e,r._root=t,r.__ownerID=n,r.__hash=o,r.__altered=!1,r}function Ce(){return Wn||(Wn=xe(0))}function je(e,t,n){var o,r;if(e._root){var i=d(yn),s=d(bn);if(o=Ee(e._root,e.__ownerID,0,void 0,t,n,i,s),!s.value)return e;r=e.size+(i.value?n===vn?-1:1:0)}else{if(n===vn)return e;r=1,o=new pe(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=r,e._root=o,e.__hash=void 0,e.__altered=!0,e):o?xe(r,o):Ce()}function Ee(e,t,n,o,r,i,s,a){return e?e.update(t,n,o,r,i,s,a):i===vn?e:(c(a),c(s),new ve(t,o,[r,i]))}function we(e){return e.constructor===ve||e.constructor===ge}function Se(e,t,n,o,r){if(e.keyHash===o)return new ge(t,o,[e.entry,r]);var i,s=(0===n?e.keyHash:e.keyHash>>>n)&gn,a=(0===n?o:o>>>n)&gn,l=s===a?[Se(e,t,n+mn,o,r)]:(i=new ve(t,o,r),s<a?[e,i]:[i,e]);return new me(t,1<<s|1<<a,l)}function ke(e,t,n,o){e||(e=new f);for(var r=new ve(e,ie(n),[n,o]),i=0;i<t.length;i++){var s=t[i];r=r.update(e,0,void 0,s[0],s[1])}return r}function Te(e,t,n,o){for(var r=0,i=0,s=new Array(n),a=0,l=1,u=t.length;a<u;a++,l<<=1){var d=t[a];void 0!==d&&a!==o&&(r|=l,s[i++]=d)}return new me(e,r,s)}function Pe(e,t,n,o,r){for(var i=0,s=new Array(hn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?t[i++]:void 0;return s[o]=r,new he(e,i+1,s)}function Ie(e,t,o){for(var r=[],s=0;s<o.length;s++){var a=o[s],l=n(a);i(a)||(l=l.map(function(e){return q(e)})),r.push(l)}return Me(e,t,r)}function Re(e,t,n){return e&&e.mergeDeep&&i(t)?e.mergeDeep(t):Y(e,t)?e:t}function Ne(e){return function(t,n,o){if(t&&t.mergeDeepWith&&i(n))return t.mergeDeepWith(e,n);var r=e(t,n,o);return Y(t,r)?t:r}}function Me(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var o=t?function(n,o){e.update(o,vn,function(e){return e===vn?n:t(e,n,o)})}:function(t,n){e.set(n,t)},r=0;r<n.length;r++)n[r].forEach(o)}):e.constructor(n[0])}function De(e,t,n,o){var r=e===vn,i=t.next();if(i.done){var s=r?n:e,a=o(s);return a===s?e:a}X(r||e&&e.set,"invalid keyPath");var l=i.value,u=r?vn:e.get(l,vn),d=De(u,t,n,o);return d===u?e:d===vn?e.remove(l):(r?Ce():e).set(l,d)}function Oe(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,127&e}function Ae(e,t,n,o){var r=o?e:p(e);return r[t]=n,r}function Le(e,t,n,o){var r=e.length+1;if(o&&t+1===r)return e[t]=n,e;for(var i=new Array(r),s=0,a=0;a<r;a++)a===t?(i[a]=n,s=-1):i[a]=e[a+s];return i}function Be(e,t,n){var o=e.length-1;if(n&&t===o)return e.pop(),e;for(var r=new Array(o),i=0,s=0;s<o;s++)s===t&&(i=1),r[s]=e[s+i];return r}function Fe(e){var t=Ve();if(null===e||void 0===e)return t;if(ze(e))return e;var n=o(e),r=n.size;return 0===r?t:(de(r),r>0&&r<hn?We(0,r,mn,null,new Ue(n.toArray())):t.withMutations(function(e){e.setSize(r),n.forEach(function(t,n){return e.set(n,t)})}))}function ze(e){return!(!e||!e[Kn])}function Ue(e,t){this.array=e,this.ownerID=t}function He(e,t){function n(e,t,n){return 0===t?o(e,n):r(e,t,n)}function o(e,n){var o=n===a?l&&l.array:e&&e.array,r=n>i?0:i-n,u=s-n;return u>hn&&(u=hn),function(){if(r===u)return Jn;var e=t?--u:r++;return o&&o[e]}}function r(e,o,r){var a,l=e&&e.array,u=r>i?0:i-r>>o,d=(s-r>>o)+1;return d>hn&&(d=hn),function(){for(;;){if(a){var e=a();if(e!==Jn)return e;a=null}if(u===d)return Jn;var i=t?--d:u++;a=n(l&&l[i],o-mn,r+(i<<o))}}}var i=e._origin,s=e._capacity,a=Ze(s),l=e._tail;return n(e._root,e._level,0)}function We(e,t,n,o,r,i,s){var a=Object.create($n);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=o,a._tail=r,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function Ve(){return Yn||(Yn=We(0,0,mn))}function qe(e,t,n){if(t=h(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Ye(e,t).set(0,n):Ye(e,0,t+1).set(t,n)});t+=e._origin;var o=e._tail,r=e._root,i=d(bn);return t>=Ze(e._capacity)?o=Ge(o,e.__ownerID,0,t,n,i):r=Ge(r,e.__ownerID,e._level,t,n,i),i.value?e.__ownerID?(e._root=r,e._tail=o,e.__hash=void 0,e.__altered=!0,e):We(e._origin,e._capacity,e._level,r,o):e}function Ge(e,t,n,o,r,i){var s=o>>>n&gn,a=e&&s<e.array.length;if(!a&&void 0===r)return e;var l;if(n>0){var u=e&&e.array[s],d=Ge(u,t,n-mn,o,r,i);return d===u?e:(l=Ke(e,t),l.array[s]=d,l)}return a&&e.array[s]===r?e:(c(i),l=Ke(e,t),void 0===r&&s===l.array.length-1?l.array.pop():l.array[s]=r,l)}function Ke(e,t){return t&&e&&t===e.ownerID?e:new Ue(e?e.array.slice():[],t)}function $e(e,t){if(t>=Ze(e._capacity))return e._tail;if(t<1<<e._level+mn){for(var n=e._root,o=e._level;n&&o>0;)n=n.array[t>>>o&gn],o-=mn;return n}}function Ye(e,t,n){void 0!==t&&(t=0|t),void 0!==n&&(n=0|n);var o=e.__ownerID||new f,r=e._origin,i=e._capacity,s=r+t,a=void 0===n?i:n<0?i+n:r+n;if(s===r&&a===i)return e;if(s>=a)return e.clear();for(var l=e._level,u=e._root,d=0;s+d<0;)u=new Ue(u&&u.array.length?[void 0,u]:[],o),l+=mn,d+=1<<l;d&&(s+=d,r+=d,a+=d,i+=d);for(var c=Ze(i),p=Ze(a);p>=1<<l+mn;)u=new Ue(u&&u.array.length?[u]:[],o),l+=mn;var m=e._tail,h=p<c?$e(e,a-1):p>c?new Ue([],o):m;if(m&&p>c&&s<i&&m.array.length){u=Ke(u,o);for(var g=u,v=l;v>mn;v-=mn){var y=c>>>v&gn;g=g.array[y]=Ke(g.array[y],o)}g.array[c>>>mn&gn]=m}if(a<i&&(h=h&&h.removeAfter(o,0,a)),s>=p)s-=p,a-=p,l=mn,u=null,h=h&&h.removeBefore(o,0,s);else if(s>r||p<c){for(d=0;u;){var b=s>>>l&gn;if(b!==p>>>l&gn)break;b&&(d+=(1<<l)*b),l-=mn,u=u.array[b]}u&&s>r&&(u=u.removeBefore(o,l,s-d)),u&&p<c&&(u=u.removeAfter(o,l,p-d)),d&&(s-=d,a-=d)}return e.__ownerID?(e.size=a-s,e._origin=s,e._capacity=a,e._level=l,e._root=u,e._tail=h,e.__hash=void 0,e.__altered=!0,e):We(s,a,l,u,h)}function Je(e,t,n){for(var r=[],s=0,a=0;a<n.length;a++){var l=n[a],u=o(l);u.size>s&&(s=u.size),i(l)||(u=u.map(function(e){return q(e)})),r.push(u)}return s>e.size&&(e=e.setSize(s)),Me(e,t,r)}function Ze(e){return e<hn?0:e-1>>>mn<<mn}function Xe(e){return null===e||void 0===e?tt():Qe(e)?e:tt().withMutations(function(t){var o=n(e);de(o.size),o.forEach(function(e,n){return t.set(n,e)})})}function Qe(e){return fe(e)&&u(e)}function et(e,t,n,o){var r=Object.create(Xe.prototype);return r.size=e?e.size:0,r._map=e,r._list=t,r.__ownerID=n,r.__hash=o,r}function tt(){return Zn||(Zn=et(Ce(),Ve()))}function nt(e,t,n){var o,r,i=e._map,s=e._list,a=i.get(t),l=void 0!==a;if(n===vn){if(!l)return e;s.size>=hn&&s.size>=2*i.size?(r=s.filter(function(e,t){return void 0!==e&&a!==t}),o=r.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(o.__ownerID=r.__ownerID=e.__ownerID)):(o=i.remove(t),r=a===s.size-1?s.pop():s.set(a,void 0))}else if(l){if(n===s.get(a)[1])return e;o=i,r=s.set(a,[t,n])}else o=i.set(t,s.size),r=s.set(s.size,[t,n]);return e.__ownerID?(e.size=o.size,e._map=o,e._list=r,e.__hash=void 0,e):et(o,r)}function ot(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function rt(e){this._iter=e,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function st(e){this._iter=e,this.size=e.size}function at(e){var t=Tt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Pt,t.__iterateUncached=function(t,n){var o=this;return e.__iterate(function(e,n){return t(n,e,o)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===Cn){var o=e.__iterator(t,n);return new x(function(){var e=o.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===xn?_n:xn,n)},t}function lt(e,t,n){var o=Tt(e);return o.size=e.size,o.has=function(t){return e.has(t)},o.get=function(o,r){var i=e.get(o,vn);return i===vn?r:t.call(n,i,o,e)},o.__iterateUncached=function(o,r){var i=this;return e.__iterate(function(e,r,s){return o(t.call(n,e,r,s),r,i)!==!1},r)},o.__iteratorUncached=function(o,r){var i=e.__iterator(Cn,r);return new x(function(){var r=i.next();if(r.done)return r;var s=r.value,a=s[0];return C(o,a,t.call(n,s[1],a,e),r)})},o}function ut(e,t){var n=Tt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=at(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,o){return e.get(t?n:-1-n,o)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Pt,n.__iterate=function(t,n){var o=this;return e.__iterate(function(e,n){return t(e,n,o)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function dt(e,t,n,o){var r=Tt(e);return o&&(r.has=function(o){var r=e.get(o,vn);return r!==vn&&!!t.call(n,r,o,e)},r.get=function(o,r){var i=e.get(o,vn);return i!==vn&&t.call(n,i,o,e)?i:r}),r.__iterateUncached=function(r,i){var s=this,a=0;return e.__iterate(function(e,i,l){if(t.call(n,e,i,l))return a++,r(e,o?i:a-1,s)},i),a},r.__iteratorUncached=function(r,i){var s=e.__iterator(Cn,i),a=0;return new x(function(){for(;;){var i=s.next();if(i.done)return i;var l=i.value,u=l[0],d=l[1];if(t.call(n,d,u,e))return C(r,o?u:a++,d,i)}})},r}function ct(e,t,n){var o=ce().asMutable();return e.__iterate(function(r,i){o.update(t.call(n,r,i,e),0,function(e){return e+1})}),o.asImmutable()}function ft(e,t,n){var o=s(e),r=(u(e)?Xe():ce()).asMutable();e.__iterate(function(i,s){r.update(t.call(n,i,s,e),function(e){return e=e||[],e.push(o?[s,i]:i),e})});var i=kt(e);return r.map(function(t){return Et(e,i(t))})}function pt(e,t,n,o){var r=e.size;if(void 0!==t&&(t=0|t),void 0!==n&&(n=0|n),v(t,n,r))return e;var i=y(t,r),s=b(n,r);if(i!==i||s!==s)return pt(e.toSeq().cacheResult(),t,n,o);var a,l=s-i;l===l&&(a=l<0?0:l);var u=Tt(e);return u.size=0===a?a:e.size&&a||void 0,!o&&L(e)&&a>=0&&(u.get=function(t,n){return t=h(this,t),t>=0&&t<a?e.get(t+i,n):n}),u.__iterateUncached=function(t,n){var r=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,l=!0,u=0;return e.__iterate(function(e,n){if(!l||!(l=s++<i))return u++,t(e,o?n:u-1,r)!==!1&&u!==a}),u},u.__iteratorUncached=function(t,n){if(0!==a&&n)return this.cacheResult().__iterator(t,n);var r=0!==a&&e.__iterator(t,n),s=0,l=0;return new x(function(){for(;s++<i;)r.next();if(++l>a)return j();var e=r.next();return o||t===xn?e:t===_n?C(t,l-1,void 0,e):C(t,l-1,e.value[1],e)})},u}function mt(e,t,n){var o=Tt(e);return o.__iterateUncached=function(o,r){var i=this;if(r)return this.cacheResult().__iterate(o,r);var s=0;return e.__iterate(function(e,r,a){return t.call(n,e,r,a)&&++s&&o(e,r,i)}),s},o.__iteratorUncached=function(o,r){var i=this;if(r)return this.cacheResult().__iterator(o,r);var s=e.__iterator(Cn,r),a=!0;return new x(function(){if(!a)return j();var e=s.next();if(e.done)return e;var r=e.value,l=r[0],u=r[1];return t.call(n,u,l,i)?o===Cn?e:C(o,l,u,e):(a=!1,j())})},o}function ht(e,t,n,o){var r=Tt(e);return r.__iterateUncached=function(r,i){var s=this;if(i)return this.cacheResult().__iterate(r,i);var a=!0,l=0;return e.__iterate(function(e,i,u){if(!a||!(a=t.call(n,e,i,u)))return l++,r(e,o?i:l-1,s)}),l},r.__iteratorUncached=function(r,i){var s=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(Cn,i),l=!0,u=0;return new x(function(){var e,i,d;do{if(e=a.next(),e.done)return o||r===xn?e:r===_n?C(r,u++,void 0,e):C(r,u++,e.value[1],e);var c=e.value;i=c[0],d=c[1],l&&(l=t.call(n,d,i,s))}while(l);return r===Cn?e:C(r,i,d,e)})},r}function gt(e,t){var o=s(e),r=[e].concat(t).map(function(e){return i(e)?o&&(e=n(e)):e=o?F(e):z(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===r.length)return e;if(1===r.length){var l=r[0];if(l===e||o&&s(l)||a(e)&&a(l))return l}var u=new M(r);return o?u=u.toKeyedSeq():a(e)||(u=u.toSetSeq()),u=u.flatten(!0),u.size=r.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),u}function vt(e,t,n){var o=Tt(e);return o.__iterateUncached=function(o,r){function s(e,u){var d=this;e.__iterate(function(e,r){return(!t||u<t)&&i(e)?s(e,u+1):o(e,n?r:a++,d)===!1&&(l=!0),!l},r)}var a=0,l=!1;return s(e,0),a},o.__iteratorUncached=function(o,r){var s=e.__iterator(o,r),a=[],l=0;return new x(function(){for(;s;){var e=s.next();if(e.done===!1){var u=e.value;if(o===Cn&&(u=u[1]),t&&!(a.length<t)||!i(u))return n?e:C(o,l++,u,e);a.push(s),s=u.__iterator(o,r)}else s=a.pop()}return j()})},o}function yt(e,t,n){var o=kt(e);return e.toSeq().map(function(r,i){return o(t.call(n,r,i,e))}).flatten(!0)}function bt(e,t){var n=Tt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,o){var r=this,i=0;return e.__iterate(function(e,o){return(!i||n(t,i++,r)!==!1)&&n(e,i++,r)!==!1},o),i},n.__iteratorUncached=function(n,o){var r,i=e.__iterator(xn,o),s=0;return new x(function(){return(!r||s%2)&&(r=i.next(),r.done)?r:s%2?C(n,s++,t):C(n,s++,r.value,r)})},n}function _t(e,t,n){t||(t=It);var o=s(e),r=0,i=e.toSeq().map(function(t,o){return[o,t,r++,n?n(t,o,e):t]}).toArray();return i.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(o?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),o?I(i):a(e)?R(i):N(i)}function xt(e,t,n){if(t||(t=It),n){var o=e.toSeq().map(function(t,o){return[t,n(t,o,e)]}).reduce(function(e,n){return Ct(t,e[1],n[1])?n:e});return o&&o[0]}return e.reduce(function(e,n){
return Ct(t,e,n)?n:e})}function Ct(e,t,n){var o=e(n,t);return 0===o&&n!==t&&(void 0===n||null===n||n!==n)||o>0}function jt(e,n,o){var r=Tt(e);return r.size=new M(o).map(function(e){return e.size}).min(),r.__iterate=function(e,t){for(var n,o=this.__iterator(xn,t),r=0;!(n=o.next()).done&&e(n.value,r++,this)!==!1;);return r},r.__iteratorUncached=function(e,r){var i=o.map(function(e){return e=t(e),S(r?e.reverse():e)}),s=0,a=!1;return new x(function(){var t;return a||(t=i.map(function(e){return e.next()}),a=t.some(function(e){return e.done})),a?j():C(e,s++,n.apply(null,t.map(function(e){return e.value})))})},r}function Et(e,t){return L(e)?t:e.constructor(t)}function wt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function St(e){return de(e.size),m(e)}function kt(e){return s(e)?n:a(e)?o:r}function Tt(e){return Object.create((s(e)?I:a(e)?R:N).prototype)}function Pt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):P.prototype.cacheResult.call(this)}function It(e,t){return e>t?1:e<t?-1:0}function Rt(e){var n=S(e);if(!n){if(!T(e))throw new TypeError("Expected iterable or array-like: "+e);n=S(t(e))}return n}function Nt(e,t){var n,o=function(i){if(i instanceof o)return i;if(!(this instanceof o))return new o(i);if(!n){n=!0;var s=Object.keys(e);Ot(r,s),r.size=s.length,r._name=t,r._keys=s,r._defaultValues=e}this._map=ce(i)},r=o.prototype=Object.create(Xn);return r.constructor=o,o}function Mt(e,t,n){var o=Object.create(Object.getPrototypeOf(e));return o._map=t,o.__ownerID=n,o}function Dt(e){return e._name||e.constructor.name||"Record"}function Ot(e,t){try{t.forEach(At.bind(void 0,e))}catch(e){}}function At(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){X(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Lt(e){return null===e||void 0===e?Ut():Bt(e)&&!u(e)?e:Ut().withMutations(function(t){var n=r(e);de(n.size),n.forEach(function(e){return t.add(e)})})}function Bt(e){return!(!e||!e[Qn])}function Ft(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function zt(e,t){var n=Object.create(eo);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Ut(){return to||(to=zt(Ce()))}function Ht(e){return null===e||void 0===e?qt():Wt(e)?e:qt().withMutations(function(t){var n=r(e);de(n.size),n.forEach(function(e){return t.add(e)})})}function Wt(e){return Bt(e)&&u(e)}function Vt(e,t){var n=Object.create(no);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function qt(){return oo||(oo=Vt(tt()))}function Gt(e){return null===e||void 0===e?Yt():Kt(e)?e:Yt().unshiftAll(e)}function Kt(e){return!(!e||!e[ro])}function $t(e,t,n,o){var r=Object.create(io);return r.size=e,r._head=t,r.__ownerID=n,r.__hash=o,r.__altered=!1,r}function Yt(){return so||(so=$t(0))}function Jt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Zt(e,t){return t}function Xt(e,t){return[t,e]}function Qt(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):e}function nn(){return p(arguments)}function on(e,t){return e<t?1:e>t?-1:0}function rn(e){if(e.size===1/0)return 0;var t=u(e),n=s(e),o=t?1:0,r=e.__iterate(n?t?function(e,t){o=31*o+an(ie(e),ie(t))|0}:function(e,t){o=o+an(ie(e),ie(t))|0}:t?function(e){o=31*o+ie(e)|0}:function(e){o=o+ie(e)|0});return sn(r,o)}function sn(e,t){return t=Rn(t,3432918353),t=Rn(t<<15|t>>>-15,461845907),t=Rn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Rn(t^t>>>16,2246822507),t=Rn(t^t>>>13,3266489909),t=re(t^t>>>16)}function an(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var ln=Array.prototype.slice;e(n,t),e(o,t),e(r,t),t.isIterable=i,t.isKeyed=s,t.isIndexed=a,t.isAssociative=l,t.isOrdered=u,t.Keyed=n,t.Indexed=o,t.Set=r;var un="@@__IMMUTABLE_ITERABLE__@@",dn="@@__IMMUTABLE_KEYED__@@",cn="@@__IMMUTABLE_INDEXED__@@",fn="@@__IMMUTABLE_ORDERED__@@",pn="delete",mn=5,hn=1<<mn,gn=hn-1,vn={},yn={value:!1},bn={value:!1},_n=0,xn=1,Cn=2,jn="function"==typeof Symbol&&Symbol.iterator,En="@@iterator",wn=jn||En;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=_n,x.VALUES=xn,x.ENTRIES=Cn,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[wn]=function(){return this},e(P,t),P.of=function(){return P(arguments)},P.prototype.toSeq=function(){return this},P.prototype.toString=function(){return this.__toString("Seq {","}")},P.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},P.prototype.__iterate=function(e,t){return W(this,e,t,!0)},P.prototype.__iterator=function(e,t){return V(this,e,t,!0)},e(I,P),I.prototype.toKeyedSeq=function(){return this},e(R,P),R.of=function(){return R(arguments)},R.prototype.toIndexedSeq=function(){return this},R.prototype.toString=function(){return this.__toString("Seq [","]")},R.prototype.__iterate=function(e,t){return W(this,e,t,!1)},R.prototype.__iterator=function(e,t){return V(this,e,t,!1)},e(N,P),N.of=function(){return N(arguments)},N.prototype.toSetSeq=function(){return this},P.isSeq=L,P.Keyed=I,P.Set=N,P.Indexed=R;var Sn="@@__IMMUTABLE_SEQ__@@";P.prototype[Sn]=!0,e(M,R),M.prototype.get=function(e,t){return this.has(e)?this._array[h(this,e)]:t},M.prototype.__iterate=function(e,t){for(var n=this._array,o=n.length-1,r=0;r<=o;r++)if(e(n[t?o-r:r],r,this)===!1)return r+1;return r},M.prototype.__iterator=function(e,t){var n=this._array,o=n.length-1,r=0;return new x(function(){return r>o?j():C(e,r,n[t?o-r++:r++])})},e(D,I),D.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},D.prototype.has=function(e){return this._object.hasOwnProperty(e)},D.prototype.__iterate=function(e,t){for(var n=this._object,o=this._keys,r=o.length-1,i=0;i<=r;i++){var s=o[t?r-i:i];if(e(n[s],s,this)===!1)return i+1}return i},D.prototype.__iterator=function(e,t){var n=this._object,o=this._keys,r=o.length-1,i=0;return new x(function(){var s=o[t?r-i:i];return i++>r?j():C(e,s,n[s])})},D.prototype[fn]=!0,e(O,R),O.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,o=S(n),r=0;if(w(o))for(var i;!(i=o.next()).done&&e(i.value,r++,this)!==!1;);return r},O.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,o=S(n);if(!w(o))return new x(j);var r=0;return new x(function(){var t=o.next();return t.done?t:C(e,r++,t.value)})},e(A,R),A.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,o=this._iteratorCache,r=0;r<o.length;)if(e(o[r],r++,this)===!1)return r;for(var i;!(i=n.next()).done;){var s=i.value;if(o[r]=s,e(s,r++,this)===!1)break}return r},A.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,o=this._iteratorCache,r=0;return new x(function(){if(r>=o.length){var t=n.next();if(t.done)return t;o[r]=t.value}return C(e,r,o[r++])})};var kn;e(Z,R),Z.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Z.prototype.get=function(e,t){return this.has(e)?this._value:t},Z.prototype.includes=function(e){return Y(this._value,e)},Z.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:new Z(this._value,b(t,n)-y(e,n))},Z.prototype.reverse=function(){return this},Z.prototype.indexOf=function(e){return Y(this._value,e)?0:-1},Z.prototype.lastIndexOf=function(e){return Y(this._value,e)?this.size:-1},Z.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(e(this._value,n,this)===!1)return n+1;return n},Z.prototype.__iterator=function(e,t){var n=this,o=0;return new x(function(){return o<n.size?C(e,o++,n._value):j()})},Z.prototype.equals=function(e){return e instanceof Z?Y(this._value,e._value):J(e)};var Tn;e(Q,R),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Q.prototype.get=function(e,t){return this.has(e)?this._start+h(this,e)*this._step:t},Q.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Q.prototype.slice=function(e,t){return v(e,t,this.size)?this:(e=y(e,this.size),t=b(t,this.size),t<=e?new Q(0,0):new Q(this.get(e,this._end),this.get(t,this._end),this._step))},Q.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(e){return this.indexOf(e)},Q.prototype.__iterate=function(e,t){for(var n=this.size-1,o=this._step,r=t?this._start+n*o:this._start,i=0;i<=n;i++){if(e(r,i,this)===!1)return i+1;r+=t?-o:o}return i},Q.prototype.__iterator=function(e,t){var n=this.size-1,o=this._step,r=t?this._start+n*o:this._start,i=0;return new x(function(){var s=r;return r+=t?-o:o,i>n?j():C(e,i++,s)})},Q.prototype.equals=function(e){return e instanceof Q?this._start===e._start&&this._end===e._end&&this._step===e._step:J(this,e)};var Pn;e(ee,t),e(te,ee),e(ne,ee),e(oe,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=oe;var In,Rn="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(e,t){e=0|e,t=0|t;var n=65535&e,o=65535&t;return n*o+((e>>>16)*o+n*(t>>>16)<<16>>>0)|0},Nn=Object.isExtensible,Mn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Dn="function"==typeof WeakMap;Dn&&(In=new WeakMap);var On=0,An="__immutablehash__";"function"==typeof Symbol&&(An=Symbol(An));var Ln=16,Bn=255,Fn=0,zn={};e(ce,te),ce.prototype.toString=function(){return this.__toString("Map {","}")},ce.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},ce.prototype.set=function(e,t){return je(this,e,t)},ce.prototype.setIn=function(e,t){return this.updateIn(e,vn,function(){return t})},ce.prototype.remove=function(e){return je(this,e,vn)},ce.prototype.deleteIn=function(e){return this.updateIn(e,function(){return vn})},ce.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},ce.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var o=De(this,Rt(e),t,n);return o===vn?void 0:o},ce.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ce()},ce.prototype.merge=function(){return Ie(this,void 0,arguments)},ce.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return Ie(this,e,t)},ce.prototype.mergeIn=function(e){var t=ln.call(arguments,1);return this.updateIn(e,Ce(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},ce.prototype.mergeDeep=function(){return Ie(this,Re,arguments)},ce.prototype.mergeDeepWith=function(e){var t=ln.call(arguments,1);return Ie(this,Ne(e),t)},ce.prototype.mergeDeepIn=function(e){var t=ln.call(arguments,1);return this.updateIn(e,Ce(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},ce.prototype.sort=function(e){return Xe(_t(this,e))},ce.prototype.sortBy=function(e,t){return Xe(_t(this,t,e))},ce.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},ce.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new f)},ce.prototype.asImmutable=function(){return this.__ensureOwner()},ce.prototype.wasAltered=function(){return this.__altered},ce.prototype.__iterator=function(e,t){return new ye(this,e,t)},ce.prototype.__iterate=function(e,t){var n=this,o=0;return this._root&&this._root.iterate(function(t){return o++,e(t[1],t[0],n)},t),o},ce.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?xe(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},ce.isMap=fe;var Un="@@__IMMUTABLE_MAP__@@",Hn=ce.prototype;Hn[Un]=!0,Hn[pn]=Hn.remove,Hn.removeIn=Hn.deleteIn,pe.prototype.get=function(e,t,n,o){for(var r=this.entries,i=0,s=r.length;i<s;i++)if(Y(n,r[i][0]))return r[i][1];return o},pe.prototype.update=function(e,t,n,o,r,i,s){for(var a=r===vn,l=this.entries,u=0,d=l.length;u<d&&!Y(o,l[u][0]);u++);var f=u<d;if(f?l[u][1]===r:a)return this;if(c(s),(a||!f)&&c(i),!a||1!==l.length){if(!f&&!a&&l.length>=Vn)return ke(e,l,o,r);var m=e&&e===this.ownerID,h=m?l:p(l);return f?a?u===d-1?h.pop():h[u]=h.pop():h[u]=[o,r]:h.push([o,r]),m?(this.entries=h,this):new pe(e,h)}},me.prototype.get=function(e,t,n,o){void 0===t&&(t=ie(n));var r=1<<((0===e?t:t>>>e)&gn),i=this.bitmap;return 0===(i&r)?o:this.nodes[Oe(i&r-1)].get(e+mn,t,n,o)},me.prototype.update=function(e,t,n,o,r,i,s){void 0===n&&(n=ie(o));var a=(0===t?n:n>>>t)&gn,l=1<<a,u=this.bitmap,d=0!==(u&l);if(!d&&r===vn)return this;var c=Oe(u&l-1),f=this.nodes,p=d?f[c]:void 0,m=Ee(p,e,t+mn,n,o,r,i,s);if(m===p)return this;if(!d&&m&&f.length>=qn)return Pe(e,f,u,a,m);if(d&&!m&&2===f.length&&we(f[1^c]))return f[1^c];if(d&&m&&1===f.length&&we(m))return m;var h=e&&e===this.ownerID,g=d?m?u:u^l:u|l,v=d?m?Ae(f,c,m,h):Be(f,c,h):Le(f,c,m,h);return h?(this.bitmap=g,this.nodes=v,this):new me(e,g,v)},he.prototype.get=function(e,t,n,o){void 0===t&&(t=ie(n));var r=(0===e?t:t>>>e)&gn,i=this.nodes[r];return i?i.get(e+mn,t,n,o):o},he.prototype.update=function(e,t,n,o,r,i,s){void 0===n&&(n=ie(o));var a=(0===t?n:n>>>t)&gn,l=r===vn,u=this.nodes,d=u[a];if(l&&!d)return this;var c=Ee(d,e,t+mn,n,o,r,i,s);if(c===d)return this;var f=this.count;if(d){if(!c&&(f--,f<Gn))return Te(e,u,f,a)}else f++;var p=e&&e===this.ownerID,m=Ae(u,a,c,p);return p?(this.count=f,this.nodes=m,this):new he(e,f,m)},ge.prototype.get=function(e,t,n,o){for(var r=this.entries,i=0,s=r.length;i<s;i++)if(Y(n,r[i][0]))return r[i][1];return o},ge.prototype.update=function(e,t,n,o,r,i,s){void 0===n&&(n=ie(o));var a=r===vn;if(n!==this.keyHash)return a?this:(c(s),c(i),Se(this,e,t,n,[o,r]));for(var l=this.entries,u=0,d=l.length;u<d&&!Y(o,l[u][0]);u++);var f=u<d;if(f?l[u][1]===r:a)return this;if(c(s),(a||!f)&&c(i),a&&2===d)return new ve(e,this.keyHash,l[1^u]);var m=e&&e===this.ownerID,h=m?l:p(l);return f?a?u===d-1?h.pop():h[u]=h.pop():h[u]=[o,r]:h.push([o,r]),m?(this.entries=h,this):new ge(e,this.keyHash,h)},ve.prototype.get=function(e,t,n,o){return Y(n,this.entry[0])?this.entry[1]:o},ve.prototype.update=function(e,t,n,o,r,i,s){var a=r===vn,l=Y(o,this.entry[0]);return(l?r===this.entry[1]:a)?this:(c(s),a?void c(i):l?e&&e===this.ownerID?(this.entry[1]=r,this):new ve(e,this.keyHash,[o,r]):(c(i),Se(this,e,t,ie(o),[o,r])))},pe.prototype.iterate=ge.prototype.iterate=function(e,t){for(var n=this.entries,o=0,r=n.length-1;o<=r;o++)if(e(n[t?r-o:o])===!1)return!1},me.prototype.iterate=he.prototype.iterate=function(e,t){for(var n=this.nodes,o=0,r=n.length-1;o<=r;o++){var i=n[t?r-o:o];if(i&&i.iterate(e,t)===!1)return!1}},ve.prototype.iterate=function(e,t){return e(this.entry)},e(ye,x),ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,o=t.node,r=t.index++;if(o.entry){if(0===r)return be(e,o.entry)}else if(o.entries){if(n=o.entries.length-1,r<=n)return be(e,o.entries[this._reverse?n-r:r])}else if(n=o.nodes.length-1,r<=n){var i=o.nodes[this._reverse?n-r:r];if(i){if(i.entry)return be(e,i.entry);t=this._stack=_e(i,t)}continue}t=this._stack=this._stack.__prev}return j()};var Wn,Vn=hn/4,qn=hn/2,Gn=hn/4;e(Fe,ne),Fe.of=function(){return this(arguments)},Fe.prototype.toString=function(){return this.__toString("List [","]")},Fe.prototype.get=function(e,t){if(e=h(this,e),e>=0&&e<this.size){e+=this._origin;var n=$e(this,e);return n&&n.array[e&gn]}return t},Fe.prototype.set=function(e,t){return qe(this,e,t)},Fe.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Fe.prototype.insert=function(e,t){return this.splice(e,0,t)},Fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=mn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ve()},Fe.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Ye(n,0,t+e.length);for(var o=0;o<e.length;o++)n.set(t+o,e[o])})},Fe.prototype.pop=function(){return Ye(this,0,-1)},Fe.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Ye(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},Fe.prototype.shift=function(){return Ye(this,1)},Fe.prototype.merge=function(){return Je(this,void 0,arguments)},Fe.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return Je(this,e,t)},Fe.prototype.mergeDeep=function(){return Je(this,Re,arguments)},Fe.prototype.mergeDeepWith=function(e){var t=ln.call(arguments,1);return Je(this,Ne(e),t)},Fe.prototype.setSize=function(e){return Ye(this,0,e)},Fe.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:Ye(this,y(e,n),b(t,n))},Fe.prototype.__iterator=function(e,t){var n=0,o=He(this,t);return new x(function(){var t=o();return t===Jn?j():C(e,n++,t)})},Fe.prototype.__iterate=function(e,t){for(var n,o=0,r=He(this,t);(n=r())!==Jn&&e(n,o++,this)!==!1;);return o},Fe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?We(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Fe.isList=ze;var Kn="@@__IMMUTABLE_LIST__@@",$n=Fe.prototype;$n[Kn]=!0,$n[pn]=$n.remove,$n.setIn=Hn.setIn,$n.deleteIn=$n.removeIn=Hn.removeIn,$n.update=Hn.update,$n.updateIn=Hn.updateIn,$n.mergeIn=Hn.mergeIn,$n.mergeDeepIn=Hn.mergeDeepIn,$n.withMutations=Hn.withMutations,$n.asMutable=Hn.asMutable,$n.asImmutable=Hn.asImmutable,$n.wasAltered=Hn.wasAltered,Ue.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var o=n>>>t&gn;if(o>=this.array.length)return new Ue([],e);var r,i=0===o;if(t>0){var s=this.array[o];if(r=s&&s.removeBefore(e,t-mn,n),r===s&&i)return this}if(i&&!r)return this;var a=Ke(this,e);if(!i)for(var l=0;l<o;l++)a.array[l]=void 0;return r&&(a.array[o]=r),a},Ue.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var o=n-1>>>t&gn;if(o>=this.array.length)return this;var r;if(t>0){var i=this.array[o];if(r=i&&i.removeAfter(e,t-mn,n),r===i&&o===this.array.length-1)return this}var s=Ke(this,e);return s.array.splice(o+1),r&&(s.array[o]=r),s};var Yn,Jn={};e(Xe,ce),Xe.of=function(){return this(arguments)},Xe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Xe.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Xe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Xe.prototype.set=function(e,t){return nt(this,e,t)},Xe.prototype.remove=function(e){return nt(this,e,vn)},Xe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Xe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Xe.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Xe.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Xe.isOrderedMap=Qe,Xe.prototype[fn]=!0,Xe.prototype[pn]=Xe.prototype.remove;var Zn;e(ot,I),ot.prototype.get=function(e,t){return this._iter.get(e,t)},ot.prototype.has=function(e){return this._iter.has(e)},ot.prototype.valueSeq=function(){return this._iter.valueSeq()},ot.prototype.reverse=function(){var e=this,t=ut(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},ot.prototype.map=function(e,t){var n=this,o=lt(this,e,t);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().map(e,t)}),o},ot.prototype.__iterate=function(e,t){var n,o=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,o)}:(n=t?St(this):0,function(r){return e(r,t?--n:n++,o)}),t)},ot.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(xn,t),o=t?St(this):0;return new x(function(){var r=n.next();return r.done?r:C(e,t?--o:o++,r.value,r)})},ot.prototype[fn]=!0,e(rt,R),rt.prototype.includes=function(e){return this._iter.includes(e)},rt.prototype.__iterate=function(e,t){var n=this,o=0;return this._iter.__iterate(function(t){return e(t,o++,n)},t)},rt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(xn,t),o=0;return new x(function(){var t=n.next();return t.done?t:C(e,o++,t.value,t)})},e(it,N),it.prototype.has=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(xn,t);return new x(function(){var t=n.next();return t.done?t:C(e,t.value,t.value,t)})},e(st,I),st.prototype.entrySeq=function(){return this._iter.toSeq()},st.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){wt(t);var o=i(t);return e(o?t.get(1):t[1],o?t.get(0):t[0],n)}},t)},st.prototype.__iterator=function(e,t){var n=this._iter.__iterator(xn,t);return new x(function(){for(;;){var t=n.next();if(t.done)return t;var o=t.value;if(o){wt(o);var r=i(o);return C(e,r?o.get(0):o[0],r?o.get(1):o[1],t)}}})},rt.prototype.cacheResult=ot.prototype.cacheResult=it.prototype.cacheResult=st.prototype.cacheResult=Pt,e(Nt,te),Nt.prototype.toString=function(){return this.__toString(Dt(this)+" {","}")},Nt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Nt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Nt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Mt(this,Ce()))},Nt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Dt(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:Mt(this,n)},Nt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Mt(this,t)},Nt.prototype.wasAltered=function(){return this._map.wasAltered()},Nt.prototype.__iterator=function(e,t){var o=this;return n(this._defaultValues).map(function(e,t){return o.get(t)}).__iterator(e,t)},Nt.prototype.__iterate=function(e,t){var o=this;return n(this._defaultValues).map(function(e,t){return o.get(t)}).__iterate(e,t)},Nt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Mt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Xn=Nt.prototype;Xn[pn]=Xn.remove,Xn.deleteIn=Xn.removeIn=Hn.removeIn,Xn.merge=Hn.merge,Xn.mergeWith=Hn.mergeWith,Xn.mergeIn=Hn.mergeIn,Xn.mergeDeep=Hn.mergeDeep,Xn.mergeDeepWith=Hn.mergeDeepWith,Xn.mergeDeepIn=Hn.mergeDeepIn,Xn.setIn=Hn.setIn,Xn.update=Hn.update,Xn.updateIn=Hn.updateIn,Xn.withMutations=Hn.withMutations,Xn.asMutable=Hn.asMutable,Xn.asImmutable=Hn.asImmutable,e(Lt,oe),Lt.of=function(){return this(arguments)},Lt.fromKeys=function(e){return this(n(e).keySeq())},Lt.prototype.toString=function(){return this.__toString("Set {","}")},Lt.prototype.has=function(e){return this._map.has(e)},Lt.prototype.add=function(e){return Ft(this,this._map.set(e,!0))},Lt.prototype.remove=function(e){return Ft(this,this._map.remove(e))},Lt.prototype.clear=function(){return Ft(this,this._map.clear())},Lt.prototype.union=function(){var e=ln.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)r(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Lt.prototype.intersect=function(){var e=ln.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return r(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Lt.prototype.subtract=function(){var e=ln.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return r(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Lt.prototype.merge=function(){return this.union.apply(this,arguments)},Lt.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return this.union.apply(this,t)},Lt.prototype.sort=function(e){return Ht(_t(this,e))},Lt.prototype.sortBy=function(e,t){return Ht(_t(this,t,e))},Lt.prototype.wasAltered=function(){return this._map.wasAltered()},Lt.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,o){return e(o,o,n)},t)},Lt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Lt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Lt.isSet=Bt;var Qn="@@__IMMUTABLE_SET__@@",eo=Lt.prototype;eo[Qn]=!0,eo[pn]=eo.remove,eo.mergeDeep=eo.merge,eo.mergeDeepWith=eo.mergeWith,eo.withMutations=Hn.withMutations,eo.asMutable=Hn.asMutable,eo.asImmutable=Hn.asImmutable,eo.__empty=Ut,eo.__make=zt;var to;e(Ht,Lt),Ht.of=function(){return this(arguments)},Ht.fromKeys=function(e){return this(n(e).keySeq())},Ht.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ht.isOrderedSet=Wt;var no=Ht.prototype;no[fn]=!0,no.__empty=qt,no.__make=Vt;var oo;e(Gt,ne),Gt.of=function(){return this(arguments)},Gt.prototype.toString=function(){return this.__toString("Stack [","]")},Gt.prototype.get=function(e,t){var n=this._head;for(e=h(this,e);n&&e--;)n=n.next;return n?n.value:t},Gt.prototype.peek=function(){return this._head&&this._head.value},Gt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):$t(e,t)},Gt.prototype.pushAll=function(e){if(e=o(e),0===e.size)return this;de(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):$t(t,n)},Gt.prototype.pop=function(){return this.slice(1)},Gt.prototype.unshift=function(){return this.push.apply(this,arguments)},Gt.prototype.unshiftAll=function(e){return this.pushAll(e)},Gt.prototype.shift=function(){return this.pop.apply(this,arguments)},Gt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Yt()},Gt.prototype.slice=function(e,t){if(v(e,t,this.size))return this;var n=y(e,this.size),o=b(t,this.size);if(o!==this.size)return ne.prototype.slice.call(this,e,t);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):$t(r,i)},Gt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?$t(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Gt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,o=this._head;o&&e(o.value,n++,this)!==!1;)o=o.next;return n},Gt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,o=this._head;return new x(function(){if(o){var t=o.value;return o=o.next,C(e,n++,t)}return j()})},Gt.isStack=Kt;var ro="@@__IMMUTABLE_STACK__@@",io=Gt.prototype;io[ro]=!0,io.withMutations=Hn.withMutations,io.asMutable=Hn.asMutable,io.asImmutable=Hn.asImmutable,io.wasAltered=Hn.wasAltered;var so;t.Iterator=x,Jt(t,{toArray:function(){de(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new rt(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new ot(this,(!0))},toMap:function(){return ce(this.toKeyedSeq())},toObject:function(){de(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Xe(this.toKeyedSeq())},toOrderedSet:function(){return Ht(s(this)?this.valueSeq():this)},toSet:function(){return Lt(s(this)?this.valueSeq():this)},toSetSeq:function(){return new it(this)},toSeq:function(){return a(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Gt(s(this)?this.valueSeq():this)},toList:function(){return Fe(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var e=ln.call(arguments,0);return Et(this,gt(this,e))},includes:function(e){return this.some(function(t){return Y(t,e)})},entries:function(){return this.__iterator(Cn)},every:function(e,t){de(this.size);var n=!0;return this.__iterate(function(o,r,i){if(!e.call(t,o,r,i))return n=!1,!1}),n},filter:function(e,t){return Et(this,dt(this,e,t,!0))},find:function(e,t,n){var o=this.findEntry(e,t);return o?o[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(o,r,i){if(e.call(t,o,r,i))return n=[r,o],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return de(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){de(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(o){n?n=!1:t+=e,t+=null!==o&&void 0!==o?o.toString():""}),t},keys:function(){return this.__iterator(_n)},map:function(e,t){return Et(this,lt(this,e,t))},reduce:function(e,t,n){de(this.size);var o,r;return arguments.length<2?r=!0:o=t,this.__iterate(function(t,i,s){r?(r=!1,o=t):o=e.call(n,o,t,i,s)}),o},reduceRight:function(e,t,n){var o=this.toKeyedSeq().reverse();return o.reduce.apply(o,arguments)},reverse:function(){return Et(this,ut(this,!0))},slice:function(e,t){return Et(this,pt(this,e,t,!0))},some:function(e,t){return!this.every(Qt(e),t)},sort:function(e){return Et(this,_t(this,e))},values:function(){return this.__iterator(xn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return m(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return ct(this,e,t)},equals:function(e){return J(this,e)},entrySeq:function(){var e=this;if(e._cache)return new M(e._cache);var t=e.toSeq().map(Xt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Qt(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(g)},flatMap:function(e,t){return Et(this,yt(this,e,t))},flatten:function(e){return Et(this,vt(this,e,!0))},fromEntrySeq:function(){return new st(this)},get:function(e,t){return this.find(function(t,n){return Y(n,e)},void 0,t)},getIn:function(e,t){for(var n,o=this,r=Rt(e);!(n=r.next()).done;){var i=n.value;if(o=o&&o.get?o.get(i,vn):vn,o===vn)return t}return o},groupBy:function(e,t){return ft(this,e,t)},has:function(e){return this.get(e,vn)!==vn},hasIn:function(e){return this.getIn(e,vn)!==vn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keySeq:function(){return this.toSeq().map(Zt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first();
},max:function(e){return xt(this,e)},maxBy:function(e,t){return xt(this,t,e)},min:function(e){return xt(this,e?en(e):on)},minBy:function(e,t){return xt(this,t?en(t):on,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Et(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Et(this,ht(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Qt(e),t)},sortBy:function(e,t){return Et(this,_t(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Et(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Et(this,mt(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Qt(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=rn(this))}});var ao=t.prototype;ao[un]=!0,ao[wn]=ao.values,ao.__toJS=ao.toArray,ao.__toStringMapper=tn,ao.inspect=ao.toSource=function(){return this.toString()},ao.chain=ao.flatMap,ao.contains=ao.includes,function(){try{Object.defineProperty(ao,"length",{get:function(){if(!t.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(e.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Jt(n,{flip:function(){return Et(this,at(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return Y(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return Y(t,e)})},mapEntries:function(e,t){var n=this,o=0;return Et(this,this.toSeq().map(function(r,i){return e.call(t,[i,r],o++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Et(this,this.toSeq().flip().map(function(o,r){return e.call(t,o,r,n)}).flip())}});var lo=n.prototype;lo[dn]=!0,lo[wn]=ao.entries,lo.__toJS=ao.toObject,lo.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Jt(o,{toKeyedSeq:function(){return new ot(this,(!1))},filter:function(e,t){return Et(this,dt(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return Et(this,ut(this,!1))},slice:function(e,t){return Et(this,pt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=y(e,e<0?this.count():this.size);var o=this.slice(0,e);return Et(this,1===n?o:o.concat(p(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return Et(this,vt(this,e,!1))},get:function(e,t){return e=h(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=h(this,e),e>=0&&(void 0!==this.size?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return Et(this,bt(this,e))},interleave:function(){var e=[this].concat(p(arguments)),t=jt(this.toSeq(),R.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Et(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Et(this,ht(this,e,t,!1))},zip:function(){var e=[this].concat(p(arguments));return Et(this,jt(this,nn,e))},zipWith:function(e){var t=p(arguments);return t[0]=this,Et(this,jt(this,e,t))}}),o.prototype[cn]=!0,o.prototype[fn]=!0,Jt(r,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),r.prototype.has=ao.includes,Jt(I,n.prototype),Jt(R,o.prototype),Jt(N,r.prototype),Jt(te,n.prototype),Jt(ne,o.prototype),Jt(oe,r.prototype);var uo={Iterable:t,Seq:P,Collection:ee,Map:ce,OrderedMap:Xe,List:Fe,Stack:Gt,Set:Lt,OrderedSet:Ht,Record:Nt,Range:Q,Repeat:Z,is:Y,fromJS:q};return uo})},"./node_modules/react-day-picker/DayPicker.js":function(e,t,n){var o=n("./node_modules/react-day-picker/lib/src/DayPicker.js"),r=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),i=n("./node_modules/react-day-picker/lib/src/LocaleUtils.js"),s=n("./node_modules/react-day-picker/lib/src/ModifiersUtils.js"),a=n("./node_modules/react-day-picker/lib/src/Weekday.js").default,l=n("./node_modules/react-day-picker/lib/src/Navbar.js").default,u=n("./node_modules/react-day-picker/lib/src/PropTypes.js");e.exports=o.default||o,e.exports.DateUtils=r.default||r,e.exports.LocaleUtils=i.default||i,e.exports.ModifiersUtils=s.default||s,e.exports.WeekdayPropTypes=a.propTypes,e.exports.NavbarPropTypes=l.propTypes,e.exports.PropTypes=u},"./node_modules/react-day-picker/lib/src/Caption.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),c=(o(d),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.locale!==this.props.locale||e.classNames!==this.props.classNames||e.date.getMonth()!==this.props.date.getMonth()||e.date.getFullYear()!==this.props.date.getFullYear()}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.date,o=e.months,r=e.locale,i=e.localeUtils,s=e.onClick;return u.default.createElement("div",{className:t.caption,role:"heading"},u.default.createElement("div",{onClick:s},o?o[n.getMonth()]+" "+n.getFullYear():i.formatMonthTitle(n,r)))}}]),t}(l.Component));t.default=c,c.propTypes={}},"./node_modules/react-day-picker/lib/src/DateUtils.js":function(e,t,n){"use strict";function o(e){return new Date(e.getTime())}function r(e,t){var n=o(e);return n.setMonth(e.getMonth()+t),n}function i(e,t){return!(!e||!t)&&(e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())}function s(e,t){var n=o(e).setHours(0,0,0,0),r=o(t).setHours(0,0,0,0);return n<r}function a(e,t){var n=o(e).setHours(0,0,0,0),r=o(t).setHours(0,0,0,0);return n>r}function l(e){var t=new Date;return t.setHours(0,0,0,0),s(e,t)}function u(e){var t=new Date((new Date).getTime()+864e5);return t.setHours(0,0,0,0),e>=t}function d(e,t,n){var r=o(e);return r.setHours(0,0,0,0),a(r,t)&&s(r,n)||a(r,n)&&s(r,t)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:null,to:null},n=t.from,o=t.to;return n?n&&o&&i(n,o)&&i(e,n)?(n=null,o=null):o&&s(e,n)?n=e:o&&i(e,o)?(n=e,o=e):(o=e,s(o,n)&&(o=n,n=e)):n=e,{from:n,to:o}}function f(e,t){var n=t.from,o=t.to;return n&&i(e,n)||o&&i(e,o)||n&&o&&d(e,n,o)}function p(e){var t=o(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=o,t.addMonths=r,t.isSameDay=i,t.isDayBefore=s,t.isDayAfter=a,t.isPastDay=l,t.isFutureDay=u,t.isDayBetween=d,t.addDayToRange=c,t.isDayInRange=f,t.getWeekNumber=p,t.default={addDayToRange:c,addMonths:r,clone:o,getWeekNumber:p,isDayAfter:a,isDayBefore:s,isDayBetween:d,isDayInRange:f,isFutureDay:u,isPastDay:l,isSameDay:i}},"./node_modules/react-day-picker/lib/src/Day.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){if(e)return function(o){o.persist(),e(t,n,o)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),d=o(u),c=n("./node_modules/object-assign/index.js"),f=o(c),p=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),m=(o(p),n("./node_modules/react-day-picker/lib/src/DateUtils.js")),h=n("./node_modules/react-day-picker/lib/src/Helpers.js"),g=n("./node_modules/react-day-picker/lib/src/classNames.js"),v=o(g),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){var t=this,n=Object.keys(this.props),o=Object.keys(e);return n.length!==o.length||n.some(function(n){if("modifiers"===n||"modifiersStyles"===n||"classNames"===n){var o=t.props[n],r=e[n],i=Object.keys(o),s=Object.keys(r);return i.length!==s.length||i.some(function(e){return!(0,h.hasOwnProp)(r,e)||o[e]!==r[e]})}return"day"===n?!(0,m.isSameDay)(t.props[n],e[n]):!(0,h.hasOwnProp)(e,n)||t.props[n]!==e[n]})}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.modifiersStyles,o=e.day,r=e.tabIndex,i=e.empty,s=e.modifiers,l=e.onMouseEnter,u=e.onMouseLeave,c=e.onMouseUp,p=e.onMouseDown,m=e.onClick,h=e.onKeyDown,g=e.onTouchStart,y=e.onTouchEnd,b=e.onFocus,_=e.ariaLabel,x=e.ariaDisabled,C=e.ariaSelected,j=e.children,E=t.day;E+=t!==v.default?" "+Object.keys(s).join(" "):Object.keys(s).map(function(e){return" "+E+"--"+e}).join("");var w=void 0;return n&&Object.keys(s).filter(function(e){return!!n[e]}).forEach(function(e){w=(0,f.default)({},w,n[e])}),i?d.default.createElement("div",{"aria-disabled":!0,className:E,style:w}):d.default.createElement("div",{className:E,tabIndex:r,style:w,role:"gridcell","aria-label":_,"aria-disabled":x,"aria-selected":C,onClick:a(m,o,s),onKeyDown:a(h,o,s),onMouseEnter:a(l,o,s),onMouseLeave:a(u,o,s),onMouseUp:a(c,o,s),onMouseDown:a(p,o,s),onTouchEnd:a(y,o,s),onTouchStart:a(g,o,s),onFocus:a(b,o,s)},j)}}]),t}(u.Component);y.defaultProps={tabIndex:-1},y.defaultProps={modifiers:{},modifiersStyles:{},empty:!1},t.default=y,y.propTypes={}},"./node_modules/react-day-picker/lib/src/DayPicker.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n("./node_modules/react/react.js"),f=r(c),p=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),m=(r(p),n("./node_modules/react-day-picker/lib/src/Caption.js")),h=r(m),g=n("./node_modules/react-day-picker/lib/src/Navbar.js"),v=r(g),y=n("./node_modules/react-day-picker/lib/src/Month.js"),b=r(y),_=n("./node_modules/react-day-picker/lib/src/Weekday.js"),x=r(_),C=n("./node_modules/react-day-picker/lib/src/Helpers.js"),j=o(C),E=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),w=o(E),S=n("./node_modules/react-day-picker/lib/src/LocaleUtils.js"),k=o(S),T=n("./node_modules/react-day-picker/lib/src/classNames.js"),P=r(T),I=n("./node_modules/react-day-picker/lib/src/keys.js"),R=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return N.call(n),n.state=n.getStateFromProps(e),n}return l(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){this.props.month!==e.month&&this.setState(this.getStateFromProps(e))}},{key:"getNextNavigableMonth",value:function(){return w.addMonths(this.state.currentMonth,this.props.numberOfMonths)}},{key:"getPreviousNavigableMonth",value:function(){return w.addMonths(this.state.currentMonth,-1)}},{key:"allowPreviousMonth",value:function(){var e=w.addMonths(this.state.currentMonth,-1);return this.allowMonth(e)}},{key:"allowNextMonth",value:function(){var e=w.addMonths(this.state.currentMonth,this.props.numberOfMonths);return this.allowMonth(e)}},{key:"allowMonth",value:function(e){var t=this.props,n=t.fromMonth,o=t.toMonth,r=t.canChangeMonth;return!(!r||n&&j.getMonthsDiff(n,e)<0||o&&j.getMonthsDiff(o,e)>0)}},{key:"allowYearChange",value:function(){return this.props.canChangeMonth}},{key:"showMonth",value:function(e,t){var n=this;this.allowMonth(e)&&this.setState({currentMonth:j.startOfMonth(e)},function(){t&&t(),n.props.onMonthChange&&n.props.onMonthChange(n.state.currentMonth)})}},{key:"showNextYear",value:function(){if(this.allowYearChange()){var e=w.addMonths(this.state.currentMonth,12);this.showMonth(e)}}},{key:"showPreviousYear",value:function(){if(this.allowYearChange()){var e=w.addMonths(this.state.currentMonth,-12);this.showMonth(e)}}},{key:"focusFirstDayOfMonth",value:function(){j.getDayNodes(this.dayPicker,this.props.classNames)[0].focus()}},{key:"focusLastDayOfMonth",value:function(){var e=j.getDayNodes(this.dayPicker,this.props.classNames);e[e.length-1].focus()}},{key:"focusPreviousDay",value:function(e){var t=this,n=j.getDayNodes(this.dayPicker,this.props.classNames),o=j.nodeListToArray(n).indexOf(e);0===o?this.showPreviousMonth(function(){return t.focusLastDayOfMonth()}):n[o-1].focus()}},{key:"focusNextDay",value:function(e){var t=this,n=j.getDayNodes(this.dayPicker,this.props.classNames),o=j.nodeListToArray(n).indexOf(e);o===n.length-1?this.showNextMonth(function(){return t.focusFirstDayOfMonth()}):n[o+1].focus()}},{key:"focusNextWeek",value:function(e){var t=this,n=j.getDayNodes(this.dayPicker,this.props.classNames),o=j.nodeListToArray(n).indexOf(e),r=o>n.length-8;r?this.showNextMonth(function(){var e=n.length-o,r=7-e;j.getDayNodes(t.dayPicker,t.props.classNames)[r].focus()}):n[o+7].focus()}},{key:"focusPreviousWeek",value:function(e){var t=this,n=j.getDayNodes(this.dayPicker,this.props.classNames),o=j.nodeListToArray(n).indexOf(e),r=o<=6;r?this.showPreviousMonth(function(){var e=j.getDayNodes(t.dayPicker,t.props.classNames),n=e.length-7,r=n+o;e[r].focus()}):n[o-7].focus()}},{key:"handleOutsideDayClick",value:function(e){var t=this.state.currentMonth,n=this.props.numberOfMonths,o=j.getMonthsDiff(t,e);o>0&&o>=n?this.showNextMonth():o<0&&this.showPreviousMonth()}},{key:"renderNavbar",value:function(){var e=this.props,t=e.labels,n=e.locale,o=e.localeUtils,r=e.canChangeMonth,s=e.navbarElement,a=i(e,["labels","locale","localeUtils","canChangeMonth","navbarElement"]);if(!r)return null;var l={classNames:this.props.classNames,className:this.props.classNames.navBar,nextMonth:this.getNextNavigableMonth(),previousMonth:this.getPreviousNavigableMonth(),showPreviousButton:this.allowPreviousMonth(),showNextButton:this.allowNextMonth(),onNextClick:this.showNextMonth,onPreviousClick:this.showPreviousMonth,dir:a.dir,labels:t,locale:n,localeUtils:o};return f.default.isValidElement(s)?f.default.cloneElement(s,l):f.default.createElement(s,l)}},{key:"renderMonths",value:function(){for(var e=[],t=j.getFirstDayOfWeekFromProps(this.props),n=0;n<this.props.numberOfMonths;n+=1){var o=w.addMonths(this.state.currentMonth,n);e.push(f.default.createElement(b.default,u({key:n},this.props,{month:o,footer:this.props.todayButton&&this.renderTodayButton(),firstDayOfWeek:t,onDayKeyDown:this.handleDayKeyDown,onDayClick:this.handleDayClick})))}return this.props.reverseMonths&&e.reverse(),e}},{key:"renderTodayButton",value:function(){return f.default.createElement("button",{type:"button",tabIndex:0,className:this.props.classNames.todayButton,"aria-label":this.props.todayButton,onClick:this.handleTodayButtonClick},this.props.todayButton)}},{key:"render",value:function(){var e=this,t=this.props.classNames.container;return this.props.onDayClick||(t=t+" "+this.props.classNames.interactionDisabled),this.props.className&&(t=t+" "+this.props.className),f.default.createElement("div",u({},this.props.containerProps,{className:t,ref:function(t){return e.dayPicker=t},role:"application",lang:this.props.locale}),f.default.createElement("div",{className:this.props.classNames.wrapper,tabIndex:this.props.canChangeMonth&&this.props.tabIndex?this.props.tabIndex:-1,onKeyDown:this.handleKeyDown,onFocus:this.props.onFocus,onBlur:this.props.onBlur},this.renderNavbar(),this.renderMonths()))}}]),t}(c.Component);R.VERSION="6.2.1",R.defaultProps={classNames:P.default,tabIndex:0,initialMonth:new Date,numberOfMonths:1,labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},locale:"en",localeUtils:k,enableOutsideDays:!1,fixedWeeks:!1,canChangeMonth:!0,reverseMonths:!1,pagedNavigation:!1,showWeekNumbers:!1,renderDay:function(e){return e.getDate()},weekdayElement:f.default.createElement(x.default,null),navbarElement:f.default.createElement(v.default,{classNames:P.default}),captionElement:f.default.createElement(h.default,{classNames:P.default})};var N=function(){var e=this;this.getStateFromProps=function(e){var t=j.startOfMonth(e.month||e.initialMonth),n=t;if(e.pagedNavigation&&e.numberOfMonths>1&&e.fromMonth){var o=j.getMonthsDiff(e.fromMonth,n);n=w.addMonths(e.fromMonth,Math.floor(o/e.numberOfMonths)*e.numberOfMonths)}return{currentMonth:n}},this.dayPicker=null,this.showNextMonth=function(t){if(e.allowNextMonth()){var n=e.props.pagedNavigation?e.props.numberOfMonths:1,o=w.addMonths(e.state.currentMonth,n);e.showMonth(o,t)}},this.showPreviousMonth=function(t){if(e.allowPreviousMonth()){var n=e.props.pagedNavigation?e.props.numberOfMonths:1,o=w.addMonths(e.state.currentMonth,-n);e.showMonth(o,t)}},this.handleKeyDown=function(t){switch(t.persist(),t.keyCode){case I.LEFT:e.showPreviousMonth();break;case I.RIGHT:e.showNextMonth();break;case I.UP:e.showPreviousYear();break;case I.DOWN:e.showNextYear()}e.props.onKeyDown&&e.props.onKeyDown(t)},this.handleDayKeyDown=function(t,n,o){switch(o.persist(),o.keyCode){case I.LEFT:j.cancelEvent(o),e.focusPreviousDay(o.target);break;case I.RIGHT:j.cancelEvent(o),e.focusNextDay(o.target);break;case I.UP:j.cancelEvent(o),e.focusPreviousWeek(o.target);break;case I.DOWN:j.cancelEvent(o),e.focusNextWeek(o.target);break;case I.ENTER:case I.SPACE:j.cancelEvent(o),e.props.onDayClick&&e.handleDayClick(t,n,o)}e.props.onDayKeyDown&&e.props.onDayKeyDown(t,n,o)},this.handleDayClick=function(t,n,o){o.persist(),n[e.props.classNames.outside]&&e.handleOutsideDayClick(t),e.props.onDayClick&&e.props.onDayClick(t,n,o)},this.handleTodayButtonClick=function(t){e.showMonth(new Date),t.target.blur()}};t.default=R,R.propTypes={}},"./node_modules/react-day-picker/lib/src/Helpers.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){e.preventDefault(),e.stopPropagation()}function i(e){return new Date(e.getFullYear(),e.getMonth(),1,12)}function s(e){var t=i(e);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.getDate()}function a(e){var t=g({},e.modifiers);return e.selectedDays&&(t[e.classNames.selected]=e.selectedDays),e.disabledDays&&(t[e.classNames.disabled]=e.disabledDays),t}function l(e){var t=e.firstDayOfWeek,n=e.locale,o=void 0===n?"en":n,r=e.localeUtils,i=void 0===r?{}:r;return isNaN(t)?i.getFirstDayOfWeek?i.getFirstDayOfWeek(o):0:t}function u(e){return!!(e&&e.from&&e.to)}function d(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}function c(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.getFirstDayOfWeek)(),n=arguments[2],o=s(e),r=[],i=[],a=[],l=1;l<=o;l+=1)r.push(new Date(e.getFullYear(),e.getMonth(),l,12));r.forEach(function(e){i.length>0&&e.getDay()===t&&(a.push(i),i=[]),i.push(e),r.indexOf(e)===r.length-1&&a.push(i)});for(var u=a[0],d=7-u.length;d>0;d-=1){var c=(0,v.clone)(u[0]);c.setDate(u[0].getDate()-1),u.unshift(c)}for(var f=a[a.length-1],p=f.length;p<7;p+=1){var m=(0,v.clone)(f[f.length-1]);m.setDate(f[f.length-1].getDate()+1),f.push(m)}if(n&&a.length<6)for(var h=void 0,g=a.length;g<6;g+=1){h=a[a.length-1];for(var b=h[h.length-1],_=[],x=0;x<7;x+=1){var C=(0,v.clone)(b);C.setDate(b.getDate()+x+1),_.push(C)}a.push(_)}return a}function f(e){var t=(0,v.clone)(e);return t.setDate(1),t.setHours(12,0,0,0),t}function p(e,t){var n=void 0;n=t===_.default?t.day+"--"+t.outside:""+t.outside;var o=t.day.replace(/ /g,"."),r=n.replace(/ /g,"."),i="."+o+":not(."+r+")";return e.querySelectorAll(i)}function m(e){return Array.prototype.slice.call(e,0)}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.cancelEvent=r,t.getFirstDayOfMonth=i,t.getDaysInMonth=s,t.getModifiersFromProps=a,t.getFirstDayOfWeekFromProps=l,t.isRangeOfDates=u,t.getMonthsDiff=d,t.getWeekArray=c,t.startOfMonth=f,t.getDayNodes=p,t.nodeListToArray=m,t.hasOwnProp=h;var v=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),y=n("./node_modules/react-day-picker/lib/src/LocaleUtils.js"),b=n("./node_modules/react-day-picker/lib/src/classNames.js"),_=o(b)},"./node_modules/react-day-picker/lib/src/LocaleUtils.js":function(e,t,n){"use strict";function o(e){return e.toDateString()}function r(e){return c[e.getMonth()]+" "+e.getFullYear()}function i(e){return d[e]}function s(e){return u[e]}function a(){return 0}function l(){return c}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDay=o,t.formatMonthTitle=r,t.formatWeekdayShort=i,t.formatWeekdayLong=s,t.getFirstDayOfWeek=a,t.getMonths=l;var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["Su","Mo","Tu","We","Th","Fr","Sa"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];t.default={formatDay:o,formatMonthTitle:r,formatWeekdayShort:i,formatWeekdayLong:s,getFirstDayOfWeek:a,getMonths:l}},"./node_modules/react-day-picker/lib/src/ModifiersUtils.js":function(e,t,n){"use strict";function o(e,t){if(!t)return!1;var n=Array.isArray(t)?t:[t];return n.some(function(t){return!!t&&(t instanceof Date?(0,i.isSameDay)(e,t):(0,s.isRangeOfDates)(t)?(0,i.isDayInRange)(e,t):t.after&&t.before&&(0,i.isDayAfter)(t.before,t.after)?(0,i.isDayAfter)(e,t.after)&&(0,i.isDayBefore)(e,t.before):t.after&&t.before&&((0,i.isDayAfter)(t.after,t.before)||(0,i.isSameDay)(t.after,t.before))?(0,i.isDayAfter)(e,t.after)||(0,i.isDayBefore)(e,t.before):t.after?(0,i.isDayAfter)(e,t.after):t.before?(0,i.isDayBefore)(e,t.before):t.daysOfWeek?t.daysOfWeek.some(function(t){return e.getDay()===t}):"function"==typeof t&&t(e))})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce(function(n,r){var i=t[r];return o(e,i)&&n.push(r),n},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.dayMatchesModifier=o,t.getModifiersForDay=r;var i=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),s=n("./node_modules/react-day-picker/lib/src/Helpers.js");t.default={dayMatchesModifier:o,getModifiersForDay:r}},"./node_modules/react-day-picker/lib/src/Month.js":function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),d=r(u),c=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),f=(r(c),n("./node_modules/react-day-picker/lib/src/Weekdays.js")),p=r(f),m=n("./node_modules/react-day-picker/lib/src/Day.js"),h=r(m),g=n("./node_modules/react-day-picker/lib/src/ModifiersUtils.js"),v=o(g),y=n("./node_modules/react-day-picker/lib/src/Helpers.js"),b=o(y),_=n("./node_modules/react-day-picker/lib/src/DateUtils.js"),x=o(_),C=function(e){function t(){var e,n,o,r;i(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.renderDay=function(e){var t=o.props.month.getMonth(),n=b.getModifiersFromProps(o.props),r=v.getModifiersForDay(e,n);x.isSameDay(e,new Date)&&!Object.prototype.hasOwnProperty.call(n,o.props.classNames.today)&&r.push(o.props.classNames.today),e.getMonth()!==t&&r.push(o.props.classNames.outside);var i=e.getMonth()!==t,s=-1;o.props.onDayClick&&!i&&1===e.getDate()&&(s=o.props.tabIndex);var a=""+e.getFullYear()+e.getMonth()+e.getDate(),l={};return r.forEach(function(e){l[e]=!0}),d.default.createElement(h.default,{key:""+(i?"outside-":"")+a,classNames:o.props.classNames,day:e,modifiers:l,modifiersStyles:o.props.modifiersStyles,empty:i&&!o.props.enableOutsideDays&&!o.props.fixedWeeks,tabIndex:s,ariaLabel:o.props.localeUtils.formatDay(e,o.props.locale),ariaDisabled:i||r.indexOf("disabled")>-1,ariaSelected:r.indexOf("selected")>-1,onClick:o.props.onDayClick,onFocus:o.props.onDayFocus,onKeyDown:o.props.onDayKeyDown,onMouseEnter:o.props.onDayMouseEnter,onMouseLeave:o.props.onDayMouseLeave,onMouseDown:o.props.onDayMouseDown,onMouseUp:o.props.onDayMouseUp,onTouchEnd:o.props.onDayTouchEnd,onTouchStart:o.props.onDayTouchStart},o.props.renderDay(e,l))},r=n,s(o,r)}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classNames,o=t.month,r=t.months,i=t.fixedWeeks,s=t.captionElement,a=t.weekdayElement,l=t.locale,u=t.localeUtils,c=t.weekdaysLong,f=t.weekdaysShort,m=t.firstDayOfWeek,h=t.onCaptionClick,g=t.footer,v=t.showWeekNumbers,y=t.onWeekClick,_={date:o,classNames:n,months:r,localeUtils:u,locale:l,onClick:h?function(e){return h(o,e)}:void 0},C=d.default.isValidElement(s)?d.default.cloneElement(s,_):d.default.createElement(s,_),j=b.getWeekArray(o,m,i);return d.default.createElement("div",{className:n.month,role:"grid"},C,d.default.createElement(p.default,{classNames:n,weekdaysShort:f,weekdaysLong:c,firstDayOfWeek:m,showWeekNumbers:v,locale:l,localeUtils:u,weekdayElement:a}),d.default.createElement("div",{className:n.body,role:"rowgroup"},j.map(function(t){var o=void 0;return v&&(o=x.getWeekNumber(t[0])),d.default.createElement("div",{key:t[0].getTime(),className:n.week,role:"row"},v&&d.default.createElement("div",{className:n.weekNumber,tabIndex:0,role:"gridcell",onClick:function(e){return y(o,t,e)}},o),t.map(e.renderDay))})),g&&d.default.createElement("div",{className:n.footer},g))}}]),t}(u.Component);t.default=C,C.propTypes={}},"./node_modules/react-day-picker/lib/src/Navbar.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),c=(o(d),n("./node_modules/react-day-picker/lib/src/classNames.js")),f=o(c),p=n("./node_modules/react-day-picker/lib/src/keys.js"),m=function(e){function t(){var e,n,o,s;r(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.handleNextClick=function(){o.props.onNextClick&&o.props.onNextClick()},o.handlePreviousClick=function(){o.props.onPreviousClick&&o.props.onPreviousClick()},o.handleNextKeyDown=function(e){e.keyCode!==p.ENTER&&e.keyCode!==p.SPACE||(e.preventDefault(),o.handleNextClick())},o.handlePreviousKeyDown=function(e){e.keyCode!==p.ENTER&&e.keyCode!==p.SPACE||(e.preventDefault(),o.handlePreviousClick())},s=n,i(o,s)}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.labels!==this.props.labels||e.dir!==this.props.dir||this.props.showPreviousButton!==e.showPreviousButton||this.props.showNextButton!==e.showNextButton}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.className,o=e.showPreviousButton,r=e.showNextButton,i=e.labels,s=e.dir,a=void 0,l=void 0,d=void 0,c=void 0,f=void 0,p=void 0;"rtl"===s?(a=this.handleNextClick,l=this.handlePreviousClick,d=this.handleNextKeyDown,c=this.handlePreviousKeyDown,p=o,f=r):(a=this.handlePreviousClick,l=this.handleNextClick,d=this.handlePreviousKeyDown,c=this.handleNextKeyDown,p=r,f=o);var m=f?t.navButtonPrev:t.navButtonPrev+" "+t.navButtonInteractionDisabled,h=p?t.navButtonNext:t.navButtonNext+" "+t.navButtonInteractionDisabled,g=u.default.createElement("span",{
tabIndex:"0",role:"button","aria-label":i.previousMonth,key:"previous",className:m,onKeyDown:f?d:void 0,onClick:f?a:void 0}),v=u.default.createElement("span",{tabIndex:"0",role:"button","aria-label":i.nextMonth,key:"right",className:h,onKeyDown:p?c:void 0,onClick:p?l:void 0});return u.default.createElement("div",{className:n||t.navBar},"rtl"===s?[v,g]:[g,v])}}]),t}(l.Component);m.defaultProps={classNames:f.default,dir:"ltr",labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},showPreviousButton:!0,showNextButton:!0},t.default=m,m.propTypes={}},"./node_modules/react-day-picker/lib/src/PropTypes.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierPropType=void 0;var r=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),i=o(r),s={localeUtils:i.default.shape({formatMonthTitle:i.default.func,formatWeekdayShort:i.default.func,formatWeekdayLong:i.default.func,getFirstDayOfWeek:i.default.func}),range:i.default.shape({from:i.default.instanceOf(Date),to:i.default.instanceOf(Date)}),after:i.default.shape({after:i.default.instanceOf(Date)}),before:i.default.shape({before:i.default.instanceOf(Date)})};t.ModifierPropType=i.default.oneOfType([s.after,s.before,s.range,i.default.func,i.default.array]);t.default=s},"./node_modules/react-day-picker/lib/src/Weekday.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),c=(o(d),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"render",value:function(){var e=this.props,t=e.weekday,n=e.className,o=e.weekdaysLong,r=e.weekdaysShort,i=e.localeUtils,s=e.locale,a=void 0;a=o?o[t]:i.formatWeekdayLong(t,s);var l=void 0;return l=r?r[t]:i.formatWeekdayShort(t,s),u.default.createElement("div",{className:n,role:"columnheader"},u.default.createElement("abbr",{title:a},l))}}]),t}(l.Component));t.default=c,c.propTypes={}},"./node_modules/react-day-picker/lib/src/Weekdays.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),u=o(l),d=n("./node_modules/react-day-picker/node_modules/prop-types/index.js"),c=(o(d),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"render",value:function(){for(var e=this.props,t=e.classNames,n=e.firstDayOfWeek,o=e.showWeekNumbers,r=e.weekdaysLong,i=e.weekdaysShort,s=e.locale,a=e.localeUtils,l=e.weekdayElement,d=[],c=0;c<7;c+=1){var f=(c+n)%7,p={key:c,className:t.weekday,weekday:f,weekdaysLong:r,weekdaysShort:i,localeUtils:a,locale:s},m=u.default.isValidElement(l)?u.default.cloneElement(l,p):u.default.createElement(l,p);d.push(m)}return u.default.createElement("div",{className:t.weekdays,role:"rowgroup"},u.default.createElement("div",{className:t.weekdaysRow,role:"row"},o&&u.default.createElement("div",{className:t.weekday}),d))}}]),t}(l.Component));t.default=c,c.propTypes={}},"./node_modules/react-day-picker/lib/src/classNames.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={container:"DayPicker",wrapper:"DayPicker-wrapper",interactionDisabled:"DayPicker--interactionDisabled",month:"DayPicker-Month",navBar:"DayPicker-NavBar",navButtonPrev:"DayPicker-NavButton DayPicker-NavButton--prev",navButtonNext:"DayPicker-NavButton DayPicker-NavButton--next",navButtonInteractionDisabled:"DayPicker-NavButton--interactionDisabled",caption:"DayPicker-Caption",weekdays:"DayPicker-Weekdays",weekdaysRow:"DayPicker-WeekdaysRow",weekday:"DayPicker-Weekday",body:"DayPicker-Body",week:"DayPicker-Week",weekNumber:"DayPicker-WeekNumber",day:"DayPicker-Day",footer:"DayPicker-Footer",todayButton:"DayPicker-TodayButton",today:"today",selected:"selected",disabled:"disabled",outside:"outside"}},"./node_modules/react-day-picker/lib/src/keys.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.ENTER=13,t.SPACE=32,t.ESC=27},"./node_modules/react-day-picker/node_modules/prop-types/factoryWithThrowingShims.js":function(e,t,n){"use strict";var o=n("./node_modules/fbjs/lib/emptyFunction.js"),r=n("./node_modules/fbjs/lib/invariant.js"),i=n("./node_modules/react-day-picker/node_modules/prop-types/lib/ReactPropTypesSecret.js");e.exports=function(){function e(e,t,n,o,s,a){a!==i&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},"./node_modules/react-day-picker/node_modules/prop-types/index.js":function(e,t,n){e.exports=n("./node_modules/react-day-picker/node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/react-day-picker/node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e,t,n){"use strict";var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=o},"./node_modules/react-virtualized/dist/commonjs/AutoSizer/AutoSizer.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/prop-types/index.js"),u=(o(l),n("./node_modules/react/react.js")),d=o(u),c=n("./node_modules/react-virtualized/dist/commonjs/vendor/detectElementResize.js"),f=o(c),p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={height:0,width:0},n._onResize=n._onResize.bind(n),n._setRef=n._setRef.bind(n),n}return s(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._parentNode=this._autoSizer.parentNode,this._detectElementResize=(0,f.default)(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize()}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.disableHeight,o=e.disableWidth,r=this.state,i=r.height,s=r.width,a={overflow:"visible"};return n||(a.height=0),o||(a.width=0),d.default.createElement("div",{ref:this._setRef,style:a},t({height:i,width:s}))}},{key:"_onResize",value:function(){var e=this.props,t=e.disableHeight,n=e.disableWidth,o=e.onResize,r=this._parentNode.offsetHeight||0,i=this._parentNode.offsetWidth||0,s=window.getComputedStyle(this._parentNode)||{},a=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,c=r-u-d,f=i-a-l;(!t&&this.state.height!==c||!n&&this.state.width!==f)&&(this.setState({height:r-u-d,width:i-a-l}),o({height:r,width:i}))}},{key:"_setRef",value:function(e){this._autoSizer=e}}]),t}(u.PureComponent);p.defaultProps={onResize:function(){}},t.default=p},"./node_modules/react-virtualized/dist/commonjs/AutoSizer/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSizer=t.default=void 0;var r=n("./node_modules/react-virtualized/dist/commonjs/AutoSizer/AutoSizer.js"),i=o(r);t.default=i.default,t.AutoSizer=i.default},"./node_modules/react-virtualized/dist/commonjs/Grid/Grid.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),d=o(u),c=n("./node_modules/prop-types/index.js"),f=(o(c),n("./node_modules/react-virtualized/node_modules/classnames/index.js")),p=o(f),m=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/calculateSizeAndPositionDataAndUpdateScrollOffset.js"),h=o(m),g=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/ScalingCellSizeAndPositionManager.js"),v=o(g),y=n("./node_modules/react-virtualized/dist/commonjs/utils/createCallbackMemoizer.js"),b=o(y),_=n("./node_modules/react-virtualized/dist/commonjs/Grid/defaultOverscanIndicesGetter.js"),x=o(_),C=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/updateScrollIndexHelper.js"),j=o(C),E=n("./node_modules/react-virtualized/dist/commonjs/Grid/defaultCellRangeRenderer.js"),w=o(E),S=n("./node_modules/dom-helpers/util/scrollbarSize.js"),k=o(S),T=t.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=150,P={OBSERVED:"observed",REQUESTED:"requested"},I=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.state={isScrolling:!1,scrollDirectionHorizontal:_.SCROLL_DIRECTION_FORWARD,scrollDirectionVertical:_.SCROLL_DIRECTION_FORWARD,scrollLeft:0,scrollTop:0},o._onGridRenderedMemoizer=(0,b.default)(),o._onScrollMemoizer=(0,b.default)(!1),o._debounceScrollEndedCallback=o._debounceScrollEndedCallback.bind(o),o._invokeOnGridRenderedHelper=o._invokeOnGridRenderedHelper.bind(o),o._onScroll=o._onScroll.bind(o),o._setScrollingContainerRef=o._setScrollingContainerRef.bind(o),o._columnWidthGetter=o._wrapSizeGetter(e.columnWidth),o._rowHeightGetter=o._wrapSizeGetter(e.rowHeight),o._deferredInvalidateColumnIndex=null,o._deferredInvalidateRowIndex=null,o._recomputeScrollLeftFlag=!1,o._recomputeScrollTopFlag=!1,o._horizontalScrollBarSize=0,o._verticalScrollBarSize=0,o._scrollbarPresenceChanged=!1;var s=e.deferredMeasurementCache,a="undefined"!=typeof s;return o._columnSizeAndPositionManager=new v.default({batchAllCells:a&&!s.hasFixedHeight(),cellCount:e.columnCount,cellSizeGetter:function(e){return o._columnWidthGetter(e)},estimatedCellSize:o._getEstimatedColumnSize(e)}),o._rowSizeAndPositionManager=new v.default({batchAllCells:a&&!s.hasFixedWidth(),cellCount:e.rowCount,cellSizeGetter:function(e){return o._rowHeightGetter(e)},estimatedCellSize:o._getEstimatedRowSize(e)}),o._cellCache={},o._styleCache={},o}return s(t,e),l(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,o=e.columnIndex,r=void 0===o?this.props.scrollToColumn:o,i=e.rowIndex,s=void 0===i?this.props.scrollToRow:i,l=a({},this.props,{scrollToAlignment:n,scrollToColumn:r,scrollToRow:s});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,o=e.scrollTop,r=void 0===o?0:o;if(!(r<0)){this._debounceScrollEnded();var i=this.props,s=i.autoHeight,a=i.autoWidth,l=i.height,u=i.width,d=this._scrollbarSize,c=this._rowSizeAndPositionManager.getTotalSize(),f=this._columnSizeAndPositionManager.getTotalSize(),p=Math.min(Math.max(0,f-u+d),n),m=Math.min(Math.max(0,c-l+d),r);if(this.state.scrollLeft!==p||this.state.scrollTop!==m){var h=p!==this.state.scrollLeft?p>this.state.scrollLeft?_.SCROLL_DIRECTION_FORWARD:_.SCROLL_DIRECTION_BACKWARD:this.state.scrollDirectionHorizontal,g=m!==this.state.scrollTop?m>this.state.scrollTop?_.SCROLL_DIRECTION_FORWARD:_.SCROLL_DIRECTION_BACKWARD:this.state.scrollDirectionVertical,v={isScrolling:!0,scrollDirectionHorizontal:h,scrollDirectionVertical:g,scrollPositionChangeReason:P.OBSERVED};s||(v.scrollTop=m),a||(v.scrollLeft=p),this.setState(v)}this._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:m,totalColumnsWidth:f,totalRowsHeight:c})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount;this._columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),this._rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,i=this.props,s=i.scrollToColumn,a=i.scrollToRow;this._columnSizeAndPositionManager.resetCell(n),this._rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=s>=0&&n<=s,this._recomputeScrollTopFlag=a>=0&&r<=a,this._cellCache={},this._styleCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,o=this.props.columnCount,r=this.props;o>1&&this._updateScrollLeftForScrollToColumn(a({},r,{scrollToColumn:t})),this._updateScrollTopForScrollToRow(a({},r,{scrollToRow:n}))}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scrollLeft,n=e.scrollTop;this._setScrollPosition({scrollLeft:t,scrollTop:n})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getScrollbarSize,n=e.height,o=e.scrollLeft,r=e.scrollToColumn,i=e.scrollTop,s=e.scrollToRow,a=e.width;this._handleInvalidatedGridSize(),this._scrollbarSizeMeasured||(this._scrollbarSize=t(),this._scrollbarSizeMeasured=!0,this.setState({})),(o>=0||i>=0)&&this._setScrollPosition({scrollLeft:o,scrollTop:i});var l=n>0&&a>0;r>=0&&l&&this._updateScrollLeftForScrollToColumn(),s>=0&&l&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:o||0,scrollTop:i||0,totalColumnsWidth:this._columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:this._rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,o=this.props,r=o.autoHeight,i=o.autoWidth,s=o.columnCount,a=o.height,l=o.rowCount,u=o.scrollToAlignment,d=o.scrollToColumn,c=o.scrollToRow,f=o.width,p=this.state,m=p.scrollLeft,h=p.scrollPositionChangeReason,g=p.scrollTop;this._handleInvalidatedGridSize();var v=s>0&&0===e.columnCount||l>0&&0===e.rowCount;h===P.REQUESTED&&(!i&&m>=0&&(m!==t.scrollLeft&&m!==this._scrollingContainer.scrollLeft||v)&&(this._scrollingContainer.scrollLeft=m),!r&&g>=0&&(g!==t.scrollTop&&g!==this._scrollingContainer.scrollTop||v)&&(this._scrollingContainer.scrollTop=g));var y=(0===e.width||0===e.height)&&a>0&&f>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):(0,j.default)({cellSizeAndPositionManager:this._columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:m,scrollToAlignment:u,scrollToIndex:d,size:f,sizeJustIncreasedFromZero:y,updateScrollIndexCallback:function(e){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):(0,j.default)({cellSizeAndPositionManager:this._rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:g,scrollToAlignment:u,scrollToIndex:c,size:a,sizeJustIncreasedFromZero:y,updateScrollIndexCallback:function(e){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),m!==t.scrollLeft||g!==t.scrollTop){var b=this._rowSizeAndPositionManager.getTotalSize(),_=this._columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:m,scrollTop:g,totalColumnsWidth:_,totalRowsHeight:b})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillMount",value:function(){var e=this.props.getScrollbarSize;this._scrollbarSize=e(),void 0===this._scrollbarSize?(this._scrollbarSizeMeasured=!1,this._scrollbarSize=0):this._scrollbarSizeMeasured=!0,this._calculateChildrenToRender()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.state,o=n.scrollLeft,r=n.scrollTop;if(0===e.columnCount&&0!==o||0===e.rowCount&&0!==r)this._setScrollPosition({scrollLeft:0,scrollTop:0});else if(e.scrollLeft!==this.props.scrollLeft||e.scrollTop!==this.props.scrollTop){var i={};null!=e.scrollLeft&&(i.scrollLeft=e.scrollLeft),null!=e.scrollTop&&(i.scrollTop=e.scrollTop),this._setScrollPosition(i)}e.columnWidth===this.props.columnWidth&&e.rowHeight===this.props.rowHeight||(this._styleCache={}),this._columnWidthGetter=this._wrapSizeGetter(e.columnWidth),this._rowHeightGetter=this._wrapSizeGetter(e.rowHeight),this._columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:this._getEstimatedColumnSize(e)}),this._rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:this._getEstimatedRowSize(e)});var s=this.props,a=s.columnCount,l=s.rowCount;0!==a&&0!==l||(a=0,l=0),e.autoHeight&&e.isScrolling===!1&&this.props.isScrolling===!0&&this._resetStyleCache(),(0,h.default)({cellCount:a,cellSize:this.props.columnWidth,computeMetadataCallback:function(){return t._columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:e.columnWidth,nextScrollToIndex:e.scrollToColumn,scrollToIndex:this.props.scrollToColumn,updateScrollOffsetForScrollToIndex:function(){return t._updateScrollLeftForScrollToColumn(e,t.state)}}),(0,h.default)({cellCount:l,cellSize:this.props.rowHeight,computeMetadataCallback:function(){return t._rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:e.rowHeight,nextScrollToIndex:e.scrollToRow,scrollToIndex:this.props.scrollToRow,updateScrollOffsetForScrollToIndex:function(){return t._updateScrollTopForScrollToRow(e,t.state)}})}},{key:"componentWillUpdate",value:function(e,t){this._calculateChildrenToRender(e,t)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,o=e.autoWidth,r=e.className,i=e.containerStyle,s=e.height,l=e.id,u=e.noContentRenderer,c=e.role,f=e.style,m=e.tabIndex,h=e.width,g=this._isScrolling(),v={boxSizing:"border-box",direction:"ltr",height:n?"auto":s,position:"relative",width:o?"auto":h,WebkitOverflowScrolling:"touch",willChange:"transform"},y=this._columnSizeAndPositionManager.getTotalSize(),b=this._rowSizeAndPositionManager.getTotalSize(),_=b>s?this._scrollbarSize:0,x=y>h?this._scrollbarSize:0;x===this._horizontalScrollBarSize&&_===this._verticalScrollBarSize||(this._horizontalScrollBarSize=x,this._verticalScrollBarSize=_,this._scrollbarPresenceChanged=!0),v.overflowX=y+_<=h?"hidden":"auto",v.overflowY=b+x<=s?"hidden":"auto";var C=this._childrenToDisplay,j=0===C.length&&s>0&&h>0;return d.default.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:(0,p.default)("ReactVirtualized__Grid",r),id:l,onScroll:this._onScroll,role:c,style:a({},v,f),tabIndex:m},C.length>0&&d.default.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",style:a({width:t?"auto":y,height:b,maxWidth:y,maxHeight:b,overflow:"hidden",pointerEvents:g?"none":"",position:"relative"},i)},C),j&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,o=e.cellRangeRenderer,r=e.columnCount,i=e.deferredMeasurementCache,s=e.height,a=e.overscanColumnCount,l=e.overscanIndicesGetter,u=e.overscanRowCount,d=e.rowCount,c=e.width,f=t.scrollDirectionHorizontal,p=t.scrollDirectionVertical,m=t.scrollLeft,h=t.scrollTop,g=this._isScrolling(e,t);if(this._childrenToDisplay=[],s>0&&c>0){var v=this._columnSizeAndPositionManager.getVisibleCellRange({containerSize:c,offset:m}),y=this._rowSizeAndPositionManager.getVisibleCellRange({containerSize:s,offset:h}),b=this._columnSizeAndPositionManager.getOffsetAdjustment({containerSize:c,offset:m}),_=this._rowSizeAndPositionManager.getOffsetAdjustment({containerSize:s,offset:h});this._renderedColumnStartIndex=v.start,this._renderedColumnStopIndex=v.stop,this._renderedRowStartIndex=y.start,this._renderedRowStopIndex=y.stop;var x=l({direction:"horizontal",cellCount:r,overscanCellsCount:a,scrollDirection:f,startIndex:this._renderedColumnStartIndex,stopIndex:this._renderedColumnStopIndex}),C=l({direction:"vertical",cellCount:d,overscanCellsCount:u,scrollDirection:p,startIndex:this._renderedRowStartIndex,stopIndex:this._renderedRowStopIndex});this._columnStartIndex=x.overscanStartIndex,this._columnStopIndex=x.overscanStopIndex,this._rowStartIndex=C.overscanStartIndex,this._rowStopIndex=C.overscanStopIndex,this._childrenToDisplay=o({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:this._columnSizeAndPositionManager,columnStartIndex:this._columnStartIndex,columnStopIndex:this._columnStopIndex,deferredMeasurementCache:i,horizontalOffsetAdjustment:b,isScrolling:g,parent:this,rowSizeAndPositionManager:this._rowSizeAndPositionManager,rowStartIndex:this._rowStartIndex,rowStopIndex:this._rowStopIndex,scrollLeft:m,scrollTop:h,styleCache:this._styleCache,verticalOffsetAdjustment:_,visibleColumnIndices:v,visibleRowIndices:y})}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(this._debounceScrollEndedCallback,e)}},{key:"_debounceScrollEndedCallback",value:function(){this._disablePointerEventsTimeoutId=null,this._resetStyleCache()}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnGridRenderedHelper",value:function(){var e=this.props.onSectionRendered;this._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:this._columnStartIndex,columnOverscanStopIndex:this._columnStopIndex,columnStartIndex:this._renderedColumnStartIndex,columnStopIndex:this._renderedColumnStopIndex,rowOverscanStartIndex:this._rowStartIndex,rowOverscanStopIndex:this._rowStopIndex,rowStartIndex:this._renderedRowStartIndex,rowStopIndex:this._renderedRowStopIndex}})}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,s=t.props,a=s.height,l=s.onScroll,u=s.width;l({clientHeight:a,clientWidth:u,scrollHeight:i,scrollLeft:n,scrollTop:o,scrollWidth:r})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?e.isScrolling:t.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this._scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"_setScrollingContainerRef",value:function(e){this._scrollingContainer=e}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,o={scrollPositionChangeReason:P.REQUESTED};t>=0&&(o.scrollDirectionHorizontal=t>this.state.scrollLeft?_.SCROLL_DIRECTION_FORWARD:_.SCROLL_DIRECTION_BACKWARD,o.scrollLeft=t),n>=0&&(o.scrollDirectionVertical=n>this.state.scrollTop?_.SCROLL_DIRECTION_FORWARD:_.SCROLL_DIRECTION_BACKWARD,o.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(o)}},{key:"_wrapPropertyGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_wrapSizeGetter",value:function(e){return this._wrapPropertyGetter(e)}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.columnCount,o=e.height,r=e.scrollToAlignment,i=e.scrollToColumn,s=e.width,a=t.scrollLeft;if(i>=0&&n>0){var l=Math.max(0,Math.min(n-1,i)),u=this._rowSizeAndPositionManager.getTotalSize(),d=u>o?this._scrollbarSize:0;return this._columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:s-d,currentOffset:a,targetIndex:l})}}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t.scrollLeft,o=this._getCalculatedScrollLeft(e,t);o>=0&&n!==o&&this._setScrollPosition({scrollLeft:o})}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.height,o=e.rowCount,r=e.scrollToAlignment,i=e.scrollToRow,s=e.width,a=t.scrollTop;if(i>=0&&o>0){var l=Math.max(0,Math.min(o-1,i)),u=this._columnSizeAndPositionManager.getTotalSize(),d=u>s?this._scrollbarSize:0;return this._rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n-d,currentOffset:a,targetIndex:l})}}},{key:"_resetStyleCache",value:function(){var e=this._styleCache;this._cellCache={},this._styleCache={};for(var t=this._rowStartIndex;t<=this._rowStopIndex;t++)for(var n=this._columnStartIndex;n<=this._columnStopIndex;n++){var o=t+"-"+n;this._styleCache[o]=e[o]}this.setState({isScrolling:!1})}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t.scrollTop,o=this._getCalculatedScrollTop(e,t);o>=0&&n!==o&&this._setScrollPosition({scrollTop:o})}},{key:"_onScroll",value:function(e){e.target===this._scrollingContainer&&this.handleScrollEvent(e.target)}}]),t}(u.PureComponent);I.defaultProps={"aria-label":"grid",cellRangeRenderer:w.default,estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:k.default,noContentRenderer:function(){return null},onScroll:function(){return null},onScrollbarPresenceChange:function(){return null},onSectionRendered:function(){return null},overscanColumnCount:0,overscanIndicesGetter:x.default,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:T,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0},t.default=I},"./node_modules/react-virtualized/dist/commonjs/Grid/accessibilityOverscanIndicesGetter.js":function(e,t,n){"use strict";function o(e){var t=(e.direction,e.cellCount),n=e.overscanCellsCount,o=e.scrollDirection,s=e.startIndex,a=e.stopIndex,l=void 0,u=void 0;switch(n=Math.max(1,n),o){case i:l=s-1,u=a+n;break;case r:l=s-n,u=a+1}return{overscanStartIndex:Math.max(0,l),overscanStopIndex:Math.min(t-1,u)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=t.SCROLL_DIRECTION_BACKWARD=-1,i=t.SCROLL_DIRECTION_FORWARD=1;t.SCROLL_DIRECTION_HORIZONTAL="horizontal",t.SCROLL_DIRECTION_VERTICAL="vertical"},"./node_modules/react-virtualized/dist/commonjs/Grid/defaultCellRangeRenderer.js":function(e,t,n){"use strict";function o(e){for(var t=e.cellCache,n=e.cellRenderer,o=e.columnSizeAndPositionManager,r=e.columnStartIndex,i=e.columnStopIndex,s=e.deferredMeasurementCache,a=e.horizontalOffsetAdjustment,l=e.isScrolling,u=e.parent,d=e.rowSizeAndPositionManager,c=e.rowStartIndex,f=e.rowStopIndex,p=(e.scrollLeft,e.scrollTop,e.styleCache),m=e.verticalOffsetAdjustment,h=e.visibleColumnIndices,g=e.visibleRowIndices,v="undefined"!=typeof s,y=[],b=o.areOffsetsAdjusted()||d.areOffsetsAdjusted(),_=!l&&!b,x=c;x<=f;x++)for(var C=d.getSizeAndPositionOfCell(x),j=r;j<=i;j++){
var E=o.getSizeAndPositionOfCell(j),w=j>=h.start&&j<=h.stop&&x>=g.start&&x<=g.stop,S=x+"-"+j,k=void 0;_&&p[S]?k=p[S]:v&&!s.has(x,j)?k={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(k={height:C.size,left:E.offset+a,position:"absolute",top:C.offset+m,width:E.size},p[S]=k);var T={columnIndex:j,isScrolling:l,isVisible:w,key:S,parent:u,rowIndex:x,style:k},P=void 0;!l||a||m?P=n(T):(t[S]||(t[S]=n(T)),P=t[S]),null!=P&&P!==!1&&y.push(P)}return y}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/Grid/defaultOverscanIndicesGetter.js":function(e,t,n){"use strict";function o(e){var t=(e.direction,e.cellCount),n=e.overscanCellsCount,o=e.scrollDirection,s=e.startIndex,a=e.stopIndex,l=void 0,u=void 0;switch(o){case i:l=s,u=a+n;break;case r:l=s-n,u=a}return{overscanStartIndex:Math.max(0,l),overscanStopIndex:Math.min(t-1,u)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=t.SCROLL_DIRECTION_BACKWARD=-1,i=t.SCROLL_DIRECTION_FORWARD=1;t.SCROLL_DIRECTION_HORIZONTAL="horizontal",t.SCROLL_DIRECTION_VERTICAL="vertical"},"./node_modules/react-virtualized/dist/commonjs/Grid/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOverscanIndicesGetter=t.defaultCellRangeRenderer=t.accessibilityOverscanIndicesGetter=t.Grid=t.default=void 0;var r=n("./node_modules/react-virtualized/dist/commonjs/Grid/Grid.js"),i=o(r),s=n("./node_modules/react-virtualized/dist/commonjs/Grid/accessibilityOverscanIndicesGetter.js"),a=o(s),l=n("./node_modules/react-virtualized/dist/commonjs/Grid/defaultCellRangeRenderer.js"),u=o(l),d=n("./node_modules/react-virtualized/dist/commonjs/Grid/defaultOverscanIndicesGetter.js"),c=o(d);t.default=i.default,t.Grid=i.default,t.accessibilityOverscanIndicesGetter=a.default,t.defaultCellRangeRenderer=u.default,t.defaultOverscanIndicesGetter=c.default},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/CellSizeAndPositionManager.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){var n=t.batchAllCells,r=void 0!==n&&n,i=t.cellCount,s=t.cellSizeGetter,a=t.estimatedCellSize;o(this,e),this._batchAllCells=r,this._cellSizeGetter=s,this._cellCount=i,this._estimatedCellSize=a,this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1,this._lastBatchedIndex=-1}return r(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize;this._cellCount=t,this._estimatedCellSize=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(e){e.containerSize,e.offset;return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index "+e+" is outside of range 0.."+this._cellCount);if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,o=this._lastMeasuredIndex+1;o<=e;o++){var r=this._cellSizeGetter({index:o});if(void 0===r||isNaN(r))throw Error("Invalid size returned for cell "+o+" of value "+r);null===r?(this._cellSizeAndPositionData[o]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[o]={offset:n,size:r},n+=r,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex;if(o<=0)return 0;var s=this.getSizeAndPositionOfCell(i),a=s.offset,l=a-o+s.size,u=void 0;switch(n){case"start":u=a;break;case"end":u=l;break;case"center":u=a-(o-s.size)/2;break;default:u=Math.max(l,Math.min(a,r))}var d=this.getTotalSize();return Math.max(0,Math.min(d-o,u))}},{key:"getVisibleCellRange",value:function(e){if(this._batchAllCells)return{start:0,stop:this._cellCount-1};var t=e.containerSize,n=e.offset,o=this.getTotalSize();if(0===o)return{};var r=n+t,i=this._findNearestCell(n),s=this.getSizeAndPositionOfCell(i);n=s.offset+s.size;for(var a=i;n<r&&a<this._cellCount-1;)a++,n+=this.getSizeAndPositionOfCell(a).size;return{start:i,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e){for(var t=e.high,n=e.low,o=e.offset,r=void 0,i=void 0;n<=t;){if(r=n+Math.floor((t-n)/2),i=this.getSizeAndPositionOfCell(r).offset,i===o)return r;i<o?n=r+1:i>o&&(t=r-1)}if(n>0)return n-1}},{key:"_exponentialSearch",value:function(e){for(var t=e.index,n=e.offset,o=1;t<this._cellCount&&this.getSizeAndPositionOfCell(t).offset<n;)t+=o,o*=2;return this._binarySearch({high:Math.min(t,this._cellCount-1),low:Math.floor(t/2),offset:n})}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch({high:n,low:0,offset:e}):this._exponentialSearch({index:n,offset:e})}}]),e}();t.default=i},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/ScalingCellSizeAndPositionManager.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_SCROLL_SIZE=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n("./node_modules/react-virtualized/dist/commonjs/Grid/utils/CellSizeAndPositionManager.js"),l=o(a),u=t.DEFAULT_MAX_SCROLL_SIZE=15e5,d=function(){function e(t){var n=t.maxScrollSize,o=void 0===n?u:n,s=r(t,["maxScrollSize"]);i(this,e),this._cellSizeAndPositionManager=new l.default(s),this._maxScrollSize=o}return s(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize(),i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(r-o))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex,s=e.totalSize;r=this._safeOffsetToOffset({containerSize:o,offset:r});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:o,currentOffset:r,targetIndex:i,totalSize:s});return this._offsetToSafeOffset({containerSize:o,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,o=e.totalSize;return o<=t?0:n/(o-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(i*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(o-t))}}]),e}();t.default=d},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/calculateSizeAndPositionDataAndUpdateScrollOffset.js":function(e,t,n){"use strict";function o(e){var t=e.cellCount,n=e.cellSize,o=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,i=e.nextCellsCount,s=e.nextCellSize,a=e.nextScrollToIndex,l=e.scrollToIndex,u=e.updateScrollOffsetForScrollToIndex;t===i&&("number"!=typeof n&&"number"!=typeof s||n===s)||(o(r),l>=0&&l===a&&u())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/Grid/utils/updateScrollIndexHelper.js":function(e,t,n){"use strict";function o(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,o=e.previousCellsCount,r=e.previousCellSize,i=e.previousScrollToAlignment,s=e.previousScrollToIndex,a=e.previousSize,l=e.scrollOffset,u=e.scrollToAlignment,d=e.scrollToIndex,c=e.size,f=e.sizeJustIncreasedFromZero,p=e.updateScrollIndexCallback,m=n.getCellCount(),h=d>=0&&d<m,g=c!==a||f||!r||"number"==typeof t&&t!==r;h&&(g||u!==i||d!==s)?p(d):!h&&m>0&&(c<a||m<o)&&l>n.getTotalSize()-c&&p(m-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/List/List.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n("./node_modules/react-virtualized/dist/commonjs/Grid/index.js"),c=o(d),f=n("./node_modules/prop-types/index.js"),p=(o(f),n("./node_modules/react/react.js")),m=o(p),h=n("./node_modules/react-virtualized/node_modules/classnames/index.js"),g=o(h),v=function(e){function t(e,n){i(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._cellRenderer=o._cellRenderer.bind(o),o._onScroll=o._onScroll.bind(o),o._onSectionRendered=o._onSectionRendered.bind(o),o._setRef=o._setRef.bind(o),o}return a(t,e),u(t,[{key:"forceUpdateGrid",value:function(){this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index,o=this.Grid.getOffsetForCell({alignment:t,rowIndex:n}),r=o.scrollTop;return r}},{key:"measureAllRows",value:function(){this.Grid.measureAllCells()}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,o=e.scrollToIndex,r=e.width,i=(0,g.default)("ReactVirtualized__List",t);return m.default.createElement(c.default,l({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:i,columnWidth:r,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:o}))}},{key:"_cellRenderer",value:function(e){var t=e.rowIndex,n=e.style,o=r(e,["rowIndex","style"]),i=this.props.rowRenderer,s=Object.getOwnPropertyDescriptor(n,"width"),a=s.writable;return a&&(n.width="100%"),i(l({index:t,style:n},o))}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop,r=this.props.onScroll;r({clientHeight:t,scrollHeight:n,scrollTop:o})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,r=e.rowStopIndex,i=this.props.onRowsRendered;i({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:r})}}]),t}(p.PureComponent);v.defaultProps={estimatedRowSize:30,noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:d.accessibilityOverscanIndicesGetter,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}},t.default=v},"./node_modules/react-virtualized/dist/commonjs/List/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.List=t.default=void 0;var r=n("./node_modules/react-virtualized/dist/commonjs/List/List.js"),i=o(r);t.default=i.default,t.List=i.default},"./node_modules/react-virtualized/dist/commonjs/utils/createCallbackMemoizer.js":function(e,t,n){"use strict";function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var o=n.callback,r=n.indices,i=Object.keys(r),s=!e||i.every(function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0}),a=i.length!==Object.keys(t).length||i.some(function(e){var n=t[e],o=r[e];return Array.isArray(o)?n.join(",")!==o.join(","):n!==o});t=r,s&&a&&o(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/dist/commonjs/vendor/detectElementResize.js":function(e,t,n){"use strict";function o(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var n="undefined"!=typeof document&&document.attachEvent;if(!n){var o=function(){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)};return function(t){return e(t)}}(),r=function(){var e=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;return function(t){return e(t)}}(),i=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,r=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},a=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;i(this),this.__resizeRAF__&&r(this.__resizeRAF__),this.__resizeRAF__=o(function(){s(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}},l=!1,u="animation",d="",c="animationstart",f="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="",h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(l=!0),l===!1)for(var g=0;g<f.length;g++)if(void 0!==h.style[f[g]+"AnimationName"]){m=f[g],u=m+"Animation",d="-"+m.toLowerCase()+"-",c=p[g],l=!0;break}var v="resizeanim",y="@"+d+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",b=d+"animation: 1ms "+v+"; "}var _=function(){if(!document.getElementById("detectElementResize")){var t=(y?y:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.id="detectElementResize",o.type="text/css",null!=e&&o.setAttribute("nonce",e),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),n.appendChild(o)}},x=function(e,o){if(n)e.attachEvent("onresize",o);else{if(!e.__resizeTriggers__){var r=t.getComputedStyle(e);r&&"static"==r.position&&(e.style.position="relative"),_(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),i(e),e.addEventListener("scroll",a,!0),c&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName==v&&i(e)},e.__resizeTriggers__.addEventListener(c,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(o)}},C=function(e,t){if(n)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",a,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(c,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}};return{addResizeListener:x,removeResizeListener:C}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"./node_modules/react-virtualized/node_modules/classnames/index.js":function(e,t,n){var o,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var r=typeof o;if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if("object"===r)for(var s in o)i.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(o=[],r=function(){return n}.apply(t,o),!(void 0!==r&&(e.exports=r)))}()},"./node_modules/tinymce/plugins/colorpicker/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Color",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Color")}),s("tinymce.plugins.colorpicker.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Color"],function(e,t){return e.add("colorpicker",function(e){function n(n,o){function r(e){var n=new t(e),o=n.toRgb();s.fromJSON({r:o.r,g:o.g,b:o.b,hex:n.toHex().substr(1)}),i(n.toHex())}function i(e){s.find("#preview")[0].getEl().style.background=e}var s=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:o,onchange:function(){var e=this.rgb();s&&(s.find("#r").value(e.r),s.find("#g").value(e.g),s.find("#b").value(e.b),s.find("#hex").value(this.value().substr(1)),i(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=s.find("colorpicker")[0];return e=this.name(),t=this.value(),"hex"==e?(t="#"+t,r(t),void n.value(t)):(t={r:s.find("#r").value(),g:s.find("#g").value(),b:s.find("#b").value()},n.value(t),void r(t))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){n("#"+this.toJSON().hex)}});r(o)}e.settings.color_picker_callback||(e.settings.color_picker_callback=n)}),function(){}}),o("tinymce.plugins.colorpicker.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/directionality/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.plugins.directionality.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("directionality",function(e){function n(n){var o,r=e.dom,i=e.selection.getSelectedBlocks();i.length&&(o=r.getAttrib(i[0],"dir"),t.each(i,function(e){r.getParent(e.parentNode,"*[dir='"+n+"']",r.getRoot())||(o!=n?r.setAttrib(e,"dir",n):r.setAttrib(e,"dir",null))}),e.nodeChanged())}function o(e){var n=[];return t.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(t){n.push(t+"[dir="+e+"]")}),n.join(",")}e.addCommand("mceDirectionLTR",function(){n("ltr")}),e.addCommand("mceDirectionRTL",function(){n("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:o("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:o("rtl")})}),function(){}}),o("tinymce.plugins.directionality.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/hr/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.plugins.hr.Plugin",["tinymce.core.PluginManager"],function(e){return e.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}),function(){}}),o("tinymce.plugins.hr.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/lists/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.plugins.lists.core.NodeType",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},o=function(e){return e&&"BR"===e.nodeName},r=function(e){return e.parentNode.firstChild===e},i=function(e){return e.parentNode.lastChild===e},s=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},a=function(e,t){return!!o(t)&&!(!e.isBlock(t.nextSibling)||o(t.previousSibling))},l=function(e,t,n){var o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},u=function(e,t){return e.isChildOf(t,e.getRoot())};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:o,isFirstChild:r,isLastChild:i,isTextBlock:s,isBogusBr:a,isEmpty:l,isChildOfBody:u}}),s("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),s("tinymce.plugins.lists.core.Range",["tinymce.core.dom.RangeUtils","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n,o){var r=e.getNode(n,o);if(t.isListItemNode(n)&&t.isTextNode(r)){var i=o>=n.childNodes.length?r.data.length:0;return{container:r,offset:i}}return{container:n,offset:o}},o=function(e){var t=e.cloneRange(),o=n(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);var r=n(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t};return{getNormalizedEndPoint:n,normalizeRange:o}}),s("tinymce.plugins.lists.core.Bookmark",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Range"],function(e,t,n){var o=e.DOM,r=function(e){var t={},n=function(n){var r,i,s;i=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],1===i.nodeType&&(r=o.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(s=Math.min(s,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[s]):o.insertAfter(r,i.childNodes[s])):i.appendChild(r),i=r,s=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=s};return n(!0),e.collapsed||n(),t},i=function(e){function t(t){var n,r,i,s=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=s(n),n=n.parentNode,o.remove(i)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var r=o.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),n.normalizeRange(r)};return{createBookmark:r,resolveBookmark:i}}),s("tinymce.plugins.lists.core.Selection",["tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})};return{getSelectedListItems:n}}),s("tinymce.plugins.lists.actions.Indent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n,o){var r=e.DOM,i=function(e,t){var o;if(n.isListNode(e)){for(;o=e.firstChild;)t.appendChild(o);r.remove(e)}},s=function(e){var t,o,s;return"DT"===e.nodeName?(r.rename(e,"DD"),!0):(t=e.previousSibling,t&&n.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&n.isListNode(t.lastChild)?(t.lastChild.appendChild(e),i(e.lastChild,t.lastChild),!0):(t=e.nextSibling,t&&n.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):(t=e.previousSibling,!(!t||"LI"!==t.nodeName)&&(o=r.create(e.parentNode.nodeName),s=r.getStyle(e.parentNode,"listStyleType"),s&&r.setStyle(o,"listStyleType",s),t.appendChild(o),o.appendChild(e),i(e.lastChild,o),!0))))},a=function(e){var n=o.getSelectedListItems(e);if(n.length){for(var r=t.createBookmark(e.selection.getRng(!0)),i=0;i<n.length&&(s(n[i])||0!==i);i++);return e.selection.setRng(t.resolveBookmark(r)),e.nodeChanged(),!0}};return{indentSelection:a}}),s("tinymce.plugins.lists.core.NormalizeLists",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var o=e.DOM,r=function(e,t){var r,i=t.parentNode;"LI"===i.nodeName&&i.firstChild===t&&(r=i.previousSibling,r&&"LI"===r.nodeName?(r.appendChild(t),n.isEmpty(e,i)&&o.remove(i)):o.setStyle(i,"listStyleType","none")),n.isListNode(i)&&(r=i.previousSibling,r&&"LI"===r.nodeName&&r.appendChild(t))},i=function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){r(e,t)})};return{normalizeList:r,normalizeLists:i}}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.plugins.lists.core.TextBlock",["tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t){var n=e.DOM,o=function(e,o,r){var i,s,a,l=n.createFragment(),u=e.schema.getBlockElements();
if(e.settings.forced_root_block&&(r=r||e.settings.forced_root_block),r&&(s=n.create(r),s.tagName===e.settings.forced_root_block&&n.setAttribs(s,e.settings.forced_root_block_attrs),l.appendChild(s)),o)for(;i=o.firstChild;){var d=i.nodeName;a||"SPAN"===d&&"bookmark"===i.getAttribute("data-mce-type")||(a=!0),u[d]?(l.appendChild(i),s=null):r?(s||(s=n.create(r),l.appendChild(s)),s.appendChild(i)):l.appendChild(i)}return e.settings.forced_root_block?a||t.ie&&!(t.ie>10)||s.appendChild(n.create("br",{"data-mce-bogus":"1"})):l.appendChild(n.create("br")),l};return{createNewTextBlock:o}}),s("tinymce.plugins.lists.core.SplitList",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.TextBlock","tinymce.core.util.Tools"],function(e,t,n,o){var r=e.DOM,i=function(e,i,s,a){var l,u,d,c,f=function(e){o.each(d,function(t){e.parentNode.insertBefore(t,s.parentNode)}),r.remove(e)};for(d=r.select('span[data-mce-type="bookmark"]',i),a=a||n.createNewTextBlock(e,s),l=r.createRng(),l.setStartAfter(s),l.setEndAfter(i),u=l.extractContents(),c=u.firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&e.dom.isEmpty(c)){r.remove(c);break}e.dom.isEmpty(u)||r.insertAfter(u,i),r.insertAfter(a,i),t.isEmpty(e.dom,s.parentNode)&&f(s.parentNode),r.remove(s),t.isEmpty(e.dom,i)&&r.remove(i)};return{splitList:i}}),s("tinymce.plugins.lists.actions.Outdent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList","tinymce.plugins.lists.core.TextBlock"],function(e,t,n,o,r,i,s){var a=e.DOM,l=function(e,t){n.isEmpty(e,t)&&a.remove(t)},u=function(e,t){var r,u=t.parentNode,d=u.parentNode;return u===e.getBody()||("DD"===t.nodeName?(a.rename(t,"DT"),!0):n.isFirstChild(t)&&n.isLastChild(t)?("LI"===d.nodeName?(a.insertAfter(t,d),l(e.dom,d),a.remove(u)):n.isListNode(d)?a.remove(u,!0):(d.insertBefore(s.createNewTextBlock(e,t),u),a.remove(u)),!0):n.isFirstChild(t)?("LI"===d.nodeName?(a.insertAfter(t,d),t.appendChild(u),l(e.dom,d)):n.isListNode(d)?d.insertBefore(t,u):(d.insertBefore(s.createNewTextBlock(e,t),u),a.remove(t)),!0):n.isLastChild(t)?("LI"===d.nodeName?a.insertAfter(t,d):n.isListNode(d)?a.insertAfter(t,u):(a.insertAfter(s.createNewTextBlock(e,t),u),a.remove(t)),!0):("LI"===d.nodeName?(u=d,r=s.createNewTextBlock(e,t,"LI")):r=n.isListNode(d)?s.createNewTextBlock(e,t,"LI"):s.createNewTextBlock(e,t),i.splitList(e,u,t,r),o.normalizeLists(e.dom,u.parentNode),!0))},d=function(e){var n=r.getSelectedListItems(e);if(n.length){var o,i,s=t.createBookmark(e.selection.getRng(!0)),a=e.getBody();for(o=n.length;o--;)for(var l=n[o].parentNode;l&&l!==a;){for(i=n.length;i--;)if(n[i]===l){n.splice(o,1);break}l=l.parentNode}for(o=0;o<n.length&&(u(e,n[o])||0!==o);o++);return e.selection.setRng(t.resolveBookmark(s)),e.nodeChanged(),!0}};return{outdent:u,outdentSelection:d}}),s("tinymce.core.dom.BookmarkManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.BookmarkManager")}),s("tinymce.plugins.lists.actions.ToggleList",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList"],function(e,t,n,o,r,i,s,a){var l=function(e,t,n){var o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o)},u=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})},d=function(e,n,o){u(n,o["list-attributes"]),t.each(e.select("li",n),function(e){u(e,o["list-item-attributes"])})},c=function(e,t,n){l(e,t,n),d(e,t,n)},f=function(e,t,n){var o,i,s=e.getBody();for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o);o.parentNode!==s;){if(r.isTextBlock(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},p=function(n,o){for(var i,s=[],a=n.getBody(),l=n.dom,u=f(n,o,!0),d=f(n,o,!1),c=[],p=u;p&&(c.push(p),p!==d);p=p.nextSibling);return t.each(c,function(t){if(r.isTextBlock(n,t))return s.push(t),void(i=null);if(l.isBlock(t)||r.isBr(t))return r.isBr(t)&&l.remove(t),void(i=null);var o=t.nextSibling;return e.isBookmarkNode(t)&&(r.isTextBlock(n,o)||!o&&t.parentNode===a)?void(i=null):(i||(i=l.create("p"),t.parentNode.insertBefore(i,t),s.push(i)),void i.appendChild(t))}),s},m=function(e,n,i){var s,a=e.selection.getRng(!0),l="LI",u=e.dom;i=i?i:{},"false"!==u.getContentEditable(e.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(l="DT"),s=o.createBookmark(a),t.each(p(e,a),function(t){var o,s,a=function(e){var t=u.getStyle(e,"list-style-type"),n=i?i["list-style-type"]:"";return n=null===n?"":n,t===n};s=t.previousSibling,s&&r.isListNode(s)&&s.nodeName===n&&a(s)?(o=s,t=u.rename(t,l),s.appendChild(t)):(o=u.create(n),t.parentNode.insertBefore(o,t),o.appendChild(t),t=u.rename(t,l)),c(u,o,i),_(e.dom,o)}),e.selection.setRng(o.resolveBookmark(s)))},h=function(e){var l=o.createBookmark(e.selection.getRng(!0)),u=e.getBody(),d=s.getSelectedListItems(e),c=t.grep(d,function(t){return e.dom.isEmpty(t)});d=t.grep(d,function(t){return!e.dom.isEmpty(t)}),t.each(c,function(t){if(r.isEmpty(e.dom,t))return void n.outdent(e,t)}),t.each(d,function(t){var n,o;if(t.parentNode!==e.getBody()){for(n=t;n&&n!==u;n=n.parentNode)r.isListNode(n)&&(o=n);a.splitList(e,o,t),i.normalizeLists(e.dom,o.parentNode)}}),e.selection.setRng(o.resolveBookmark(l))},g=function(e,t){return e&&t&&r.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){var o=e.getStyle(t,"list-style-type",!0),r=e.getStyle(n,"list-style-type",!0);return o===r},y=function(e,t){return e.className===t.className},b=function(e,t,n){return g(t,n)&&v(e,t,n)&&y(t,n)},_=function(e,t){var n,o;if(n=t.nextSibling,b(e,t,n)){for(;o=n.firstChild;)t.appendChild(o);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;o=n.lastChild;)t.insertBefore(o,t.firstChild);e.remove(n)}},x=function(e,t,n){var r=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n?n:{},r!==e.getBody())if(r)if(r.nodeName===t)h(e,t);else{var i=o.createBookmark(e.selection.getRng(!0));c(e.dom,r,n),_(e.dom,e.dom.rename(r,t)),e.selection.setRng(o.resolveBookmark(i))}else m(e,t,n)};return{toggleList:x,removeList:h,mergeWithAdjacentLists:_}}),s("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),s("tinymce.plugins.lists.core.Delete",["tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.util.VK","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Range","tinymce.plugins.lists.core.Selection"],function(e,t,n,o,r,i,s,a,l){var u=function(n,o,r){var s,a,l=o.startContainer,u=o.startOffset;if(3===l.nodeType&&(r?u<l.data.length:u>0))return l;for(s=n.schema.getNonEmptyElements(),1===l.nodeType&&(l=e.getNode(l,u)),a=new t(l,n.getBody()),r&&i.isBogusBr(n.dom,l)&&a.next();l=a[r?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(s[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},d=function(e,t,n){var o,r,s=t.parentNode;if(i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)){if(i.isListNode(n.lastChild)&&(r=n.lastChild),s===n.lastChild&&i.isBr(s.previousSibling)&&e.remove(s.previousSibling),o=n.lastChild,o&&i.isBr(o)&&t.hasChildNodes()&&e.remove(o),i.isEmpty(e,n,!0)&&e.$(n).empty(),!i.isEmpty(e,t,!0))for(;o=t.firstChild;)n.appendChild(o);r&&n.appendChild(r),e.remove(t),i.isEmpty(e,s)&&s!==e.getRoot()&&e.remove(s)}},c=function(e,t){var n,s,l,c=e.dom,f=e.selection,p=c.getParent(f.getStart(),"LI");if(p){if(n=p.parentNode,n===e.getBody()&&i.isEmpty(c,n))return!0;if(s=a.normalizeRange(f.getRng(!0)),l=c.getParent(u(e,s,t),"LI"),l&&l!==p){var m=r.createBookmark(s);return t?d(c,l,p):d(c,p,l),e.selection.setRng(r.resolveBookmark(m)),!0}if(!l&&!t&&o.removeList(e,n.nodeName))return!0}return!1},f=function(e,t){var n=e.dom,r=n.getParent(e.selection.getStart(),n.isBlock);if(r&&n.isEmpty(r)){var i=a.normalizeRange(e.selection.getRng(!0)),s=n.getParent(u(e,i,t),"LI");if(s)return e.undoManager.transact(function(){n.remove(r),o.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1},p=function(e,t){return c(e,t)||f(e,t)},m=function(e){var t=e.dom.getParent(e.selection.getStart(),"LI,DT,DD");return!!(t||l.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),s.normalizeLists(e.dom,e.getBody())}),!0)},h=function(e,t){return e.selection.isCollapsed()?p(e,t):m(e)},g=function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?h(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&h(e,!0)&&t.preventDefault()})};return{setup:g,backspaceDelete:h}}),s("tinymce.plugins.lists.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Delete","tinymce.plugins.lists.core.NodeType"],function(e,t,n,o,r,i,s,a){var l=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},u=function(e){e.on("BeforeExecCommand",function(t){var n,i=t.command.toLowerCase();if("indent"===i?o.indentSelection(e)&&(n=!0):"outdent"===i&&r.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){i.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){i.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){i.toggleList(e,"DL",n)})},d=function(e){e.addQueryStateHandler("InsertUnorderedList",l(e,"UL")),e.addQueryStateHandler("InsertOrderedList",l(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",l(e,"DL"))},c=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?r.outdentSelection(e):o.indentSelection(e))})},f=function(e){var n=function(n){return function(){var o=this;e.on("NodeChange",function(e){var r=t.grep(e.parents,a.isListNode);o.active(r.length>0&&r[0].nodeName===n)})}},o=function(e,n){var o=e.settings.plugins?e.settings.plugins:"";return t.inArray(o.split(/[ ,]/),n)!==-1};o(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),o=!1,r=0,i=t.length;!o&&r<i;r++){var s=t[r].nodeName;o="LI"===s&&a.isFirstChild(t[r])||"UL"===s||"OL"===s||"DD"===s}n.disabled(o)})}})};return e.add("lists",function(e){return f(e),s.setup(e),e.on("init",function(){u(e),d(e),e.getParam("lists_indent_on_tab",!0)&&c(e)}),{backspaceDelete:function(t){s.backspaceDelete(e,t)}}}),function(){}}),o("tinymce.plugins.lists.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/media/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.html.Writer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Writer")}),s("tinymce.core.html.SaxParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.SaxParser")}),s("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),s("tinymce.plugins.media.core.Sanitize",["tinymce.core.util.Tools","tinymce.core.html.Writer","tinymce.core.html.SaxParser","tinymce.core.html.Schema"],function(e,t,n,o){var r=function(e,r){if(e.settings.media_filter_html===!1)return r;var i,s=new t;return new n({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){s.comment(e)},cdata:function(e){s.cdata(e)},text:function(e,t){s.text(e,t)},start:function(t,n,o){if(i=!0,"script"!==t&&"noscript"!==t){for(var r=0;r<n.length;r++){if(0===n[r].name.indexOf("on"))return;"style"===n[r].name&&(n[r].value=e.dom.serializeStyle(e.dom.parseStyle(n[r].value),t))}s.start(t,n,o),i=!1}},end:function(e){i||s.end(e)}},new o({})).parse(r),s.getContent()};return{sanitize:r}}),s("tinymce.plugins.media.core.VideoScript",[],function(){var e=function(e,t){if(e)for(var n=0;n<e.length;n++)if(t.indexOf(e[n].filter)!==-1)return e[n]};return{getVideoScriptMatch:e}}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.plugins.media.core.Nodes",["tinymce.plugins.media.core.Sanitize","tinymce.plugins.media.core.VideoScript","tinymce.core.html.Node","tinymce.core.Env"],function(e,t,n,o){var r=function(e,t){var r,i=t.name;return r=new n("img",1),r.shortEnded=!0,s(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===i?"30":"150"),style:t.attr("style"),src:o.transparentSrc,"data-mce-object":i,class:"mce-object mce-object-"+i}),r},i=function(e,t){var o,r,i,a=t.name;return o=new n("span",1),o.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":a,class:"mce-preview-object mce-object-"+a}),s(e,t,o),r=new n(a,1),r.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),width:t.attr("width")||"300",height:t.attr("height")||("audio"===a?"30":"150"),frameborder:"0"}),i=new n("span",1),i.attr("class","mce-shim"),o.append(r),o.append(i),o},s=function(t,n,o){var r,i,s,a,l;for(s=n.attributes,a=s.length;a--;)r=s[a].name,i=s[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(i=t.convertURL(i,r)),o.attr("data-mce-p-"+r,i));l=n.firstChild&&n.firstChild.value,l&&(o.attr("data-mce-html",escape(e.sanitize(t,l))),o.firstChild=null)},a=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},l=function(e){return function(n){for(var s,l,u=n.length;u--;)s=n[u],s.parent&&(s.parent.attr("data-mce-object")||("script"!==s.name||(l=t.getVideoScriptMatch(e.settings.media_scripts,s.attr("src"))))&&(l&&(l.width&&s.attr("width",l.width.toString()),l.height&&s.attr("height",l.height.toString())),"iframe"===s.name&&e.settings.media_live_embeds!==!1&&o.ceFalse?a(s)||s.replace(i(e,s)):a(s)||s.replace(r(e,s))))}};return{createPreviewIframeNode:i,createPlaceholderNode:r,placeHolderConverter:l}}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.plugins.media.core.Size",[],function(){var e=function(e){return e.replace(/px$/,"")},t=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},n=function(t){return function(n){return n?e(n.style[t]):""}},o=function(e){return function(n,o){n&&(n.style[e]=t(o))}};return{getMaxWidth:n("maxWidth"),getMaxHeight:n("maxHeight"),setMaxWidth:o("maxWidth"),setMaxHeight:o("maxHeight")}}),s("tinymce.plugins.media.core.UpdateHtml",["tinymce.core.html.Writer","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.dom.DOMUtils","tinymce.plugins.media.core.Size"],function(e,t,n,o,r){var i=o.DOM,s=function(e,t){var n,o,r,i;for(n in t)if(r=""+t[n],e.map[n])for(o=e.length;o--;)i=e[o],i.name===n&&(r?(e.map[n]=r,i.value=r):(delete e.map[n],e.splice(o,1)));else r&&(e.push({name:n,value:r}),e.map[n]=r)},a=function(n){var o=new e,r=new t(o);return r.parse(n),o.getContent()},l=function(o,r,i){var a,l=new e,u=0;return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){l.comment(e)},cdata:function(e){l.cdata(e)},text:function(e,t){l.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==r.height&&void 0!==r.width&&s(t,{width:r.width,height:r.height})}if(i)switch(e){case"video":s(t,{poster:r.poster,src:""}),r.source2&&s(t,{src:""});break;case"iframe":s(t,{src:r.source1});break;case"source":if(u++,u<=2&&(s(t,{src:r["source"+u],type:r["source"+u+"mime"]}),!r["source"+u]))return;break;case"img":if(!r.poster)return;a=!0}l.start(e,t,n)},end:function(e){if("video"===e&&i)for(var t=1;t<=2;t++)if(r["source"+t]){var n=[];n.map={},u<t&&(s(n,{src:r["source"+t],type:r["source"+t+"mime"]}),l.start("source",n,!0))}if(r.poster&&"object"===e&&i&&!a){var o=[];o.map={},s(o,{src:r.poster,width:r.width,height:r.height}),l.start("img",o,!0)}l.end(e)}},new n({})).parse(o),l.getContent()},u=function(e){var t=i.createFragment(e);return""!==i.getAttrib(t.firstChild,"data-ephox-embed-iri")},d=function(e,t){var n=i.createFragment(e),o=n.firstChild;return r.setMaxWidth(o,t.width),r.setMaxHeight(o,t.height),a(o.outerHTML)},c=function(e,t,n){return u(e)?d(e,t):l(e,t,n)};return{updateHtml:c}}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.plugins.media.core.HtmlToData",["tinymce.core.util.Tools","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.dom.DOMUtils","tinymce.plugins.media.core.VideoScript","tinymce.plugins.media.core.Size"],function(e,t,n,o,r,i){var s=o.DOM,a=function(e){return s.getAttrib(e,"data-ephox-embed-iri")},l=function(e){var t=s.createFragment(e);return""!==a(t.firstChild)},u=function(n,o){var i={};return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,o){if(i.source1||"param"!==t||(i.source1=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(i.type||(i.type=t),i=e.extend(o.map,i)),"script"===t){var s=r.getVideoScriptMatch(n,o.map.src);if(!s)return;i={type:"script",source1:o.map.src,width:s.width,height:s.height}}"source"===t&&(i.source1?i.source2||(i.source2=o.map.src):i.source1=o.map.src),"img"!==t||i.poster||(i.poster=o.map.src)}}).parse(o),i.source1=i.source1||i.src||i.data,i.source2=i.source2||"",i.poster=i.poster||"",i},d=function(e){var t=s.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:a(n),source2:"",poster:"",width:i.getMaxWidth(n),height:i.getMaxHeight(n)}},c=function(e,t){return l(t)?d(t):u(e,t)};return{htmlToData:c}}),s("tinymce.plugins.media.core.Mime",[],function(){var e=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),o=t[n];return o?o:""};return{guess:e}}),s("tinymce.plugins.media.core.UrlPatterns",[],function(){var e=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}];return{urlPatterns:e}}),s("tinymce.plugins.media.core.DataToHtml",["tinymce.plugins.media.core.Mime","tinymce.plugins.media.core.HtmlToData","tinymce.plugins.media.core.UrlPatterns","tinymce.plugins.media.core.VideoScript","tinymce.plugins.media.core.UpdateHtml","tinymce.core.util.Tools"],function(e,t,n,o,r,i){var s=function(s,a){var l="",u=i.extend({},a);if(!u.source1&&(i.extend(u,t.htmlToData(s.settings.media_scripts,u.embed)),!u.source1))return"";if(u.source2||(u.source2=""),u.poster||(u.poster=""),u.source1=s.convertURL(u.source1,"source"),u.source2=s.convertURL(u.source2,"source"),u.source1mime=e.guess(u.source1),u.source2mime=e.guess(u.source2),u.poster=s.convertURL(u.poster,"poster"),i.each(n.urlPatterns,function(e){var t,n,o=e.regex.exec(u.source1);if(o){for(n=e.url,t=0;o[t];t++)n=n.replace("$"+t,function(){return o[t]});u.source1=n,u.type=e.type,u.allowFullscreen=e.allowFullscreen,u.width=u.width||e.w,u.height=u.height||e.h}}),u.embed)l=r.updateHtml(u.embed,u,!0);else{var d=o.getVideoScriptMatch(s.settings.media_scripts,u.source1);if(d&&(u.type="script",u.width=d.width,u.height=d.height),u.width=u.width||300,u.height=u.height||150,i.each(u,function(e,t){u[t]=s.dom.encode(e)}),"iframe"===u.type){var c=u.allowFullscreen?' allowFullscreen="1"':"";l+='<iframe src="'+u.source1+'" width="'+u.width+'" height="'+u.height+'"'+c+"></iframe>"}else"application/x-shockwave-flash"===u.source1mime?(l+='<object data="'+u.source1+'" width="'+u.width+'" height="'+u.height+'" type="application/x-shockwave-flash">',u.poster&&(l+='<img src="'+u.poster+'" width="'+u.width+'" height="'+u.height+'" />'),l+="</object>"):u.source1mime.indexOf("audio")!==-1?s.settings.audio_template_callback?l=s.settings.audio_template_callback(u):l+='<audio controls="controls" src="'+u.source1+'">'+(u.source2?'\n<source src="'+u.source2+'"'+(u.source2mime?' type="'+u.source2mime+'"':"")+" />\n":"")+"</audio>":"script"===u.type?l+='<script src="'+u.source1+'"></script>':l=s.settings.video_template_callback?s.settings.video_template_callback(u):'<video width="'+u.width+'" height="'+u.height+'"'+(u.poster?' poster="'+u.poster+'"':"")+' controls="controls">\n<source src="'+u.source1+'"'+(u.source1mime?' type="'+u.source1mime+'"':"")+" />\n"+(u.source2?'<source src="'+u.source2+'"'+(u.source2mime?' type="'+u.source2mime+'"':"")+" />\n":"")+"</video>"}return l};return{dataToHtml:s}}),s("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),s("tinymce.plugins.media.core.Service",["tinymce.plugins.media.core.DataToHtml","tinymce.core.util.Promise"],function(e,t){var n=function(e,n,o){var r={};return new t(function(t,i){var s=function(o){return o.html&&(r[e.source1]=o),t({url:e.source1,html:o.html?o.html:n(e)})};r[e.source1]?s(r[e.source1]):o({url:e.source1},s,i)})},o=function(e,n){return new t(function(t){t({html:n(e),url:e.source1})})},r=function(t){return function(n){return e.dataToHtml(t,n)}},i=function(e,t){var i=e.settings.media_url_resolver;return i?n(t,r(e),i):o(t,r(e))};return{getEmbedHtml:i}}),s("tinymce.plugins.media.ui.SizeManager",[],function(){var e=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},t=function(e,t){var n=e.find("#width")[0],o=e.find("#height")[0],r=e.find("#constrain")[0];n&&o&&r&&t(n,o,r.checked())},n=function(t,n,o){var r=t.state.get("oldVal"),i=n.state.get("oldVal"),s=t.value(),a=n.value();o&&r&&i&&s&&a&&(s!==r?(a=Math.round(s/r*a),isNaN(a)||n.value(a)):(s=Math.round(a/i*s),isNaN(s)||t.value(s))),e(t,n)},o=function(n){t(n,e)},r=function(e){t(e,n)},i=function(e){var t=function(){e(function(e){r(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}};return{createUi:i,syncSize:o,updateSize:r}}),s("tinymce.plugins.media.ui.Dialog",["tinymce.core.util.Delay","tinymce.plugins.media.core.HtmlToData","tinymce.plugins.media.core.UpdateHtml","tinymce.plugins.media.core.Service","tinymce.plugins.media.core.Size","tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.media.ui.SizeManager"],function(e,t,n,o,r,i,s,a){var l=s.ie&&s.ie<=8?"onChange":"onInput",u=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},d=function(e){var n=e.selection.getNode(),o=n.getAttribute("data-ephox-embed-iri");return o?{source1:o,"data-ephox-embed-iri":o,width:r.getMaxWidth(n),height:r.getMaxHeight(n)}:n.getAttribute("data-mce-object")?t.htmlToData(e.settings.media_scripts,e.serializer.serialize(n,{selection:!0})):{}},c=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},f=function(e,n){return function(o){var r=o.html,s=e.find("#embed")[0],l=i.extend(t.htmlToData(n.settings.media_scripts,r),{source1:o.url});e.fromJSON(l),s&&(s.value(r),a.updateSize(e))}},p=function(e,t){var n,o,r=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(o=r.length-1;o>=0;o--)t[n]===r[o]&&r.splice(o,1);e.selection.select(r[0])},m=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),p(e,n),e.nodeChanged()},h=function(e,t){var r=e.toJSON();r.embed=n.updateHtml(r.embed,r),r.embed?m(t,r.embed):o.getEmbedHtml(t,r).then(function(e){m(t,e.html)}).catch(u(t))},g=function(e,t){i.each(t,function(t,n){e.find("#"+n).value(t)})},v=function(e){var r,s,p=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){o.getEmbedHtml(e,r.toJSON()).then(f(r,e)).catch(u(e))},1)},onchange:function(t){o.getEmbedHtml(e,r.toJSON()).then(f(r,e)).catch(u(e)),g(r,t.meta)},onbeforecall:function(e){e.meta=r.toJSON()}}],m=[],v=function(e){e(r),s=r.toJSON(),r.find("#embed").value(n.updateHtml(s.embed,s))};if(e.settings.media_alt_source!==!1&&m.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&m.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1){var y=a.createUi(v);p.push(y)}s=d(e);var b={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:c(e),multiline:!0,rows:5,label:"Source"},_=function(){s=i.extend({},t.htmlToData(e.settings.media_scripts,this.value())),this.parent().parent().fromJSON(s)};b[l]=_,r=e.windowManager.open({title:"Insert/edit media",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:p},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},b]},{title:"Advanced",type:"form",items:m}],onSubmit:function(){a.updateSize(r),h(r,e)}}),a.syncSize(r)};return{showDialog:v}}),s("tinymce.plugins.media.Plugin",["tinymce.core.html.Node","tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.plugins.media.core.Nodes","tinymce.plugins.media.core.Sanitize","tinymce.plugins.media.core.UpdateHtml","tinymce.plugins.media.ui.Dialog"],function(e,t,n,o,r,i,s){var a=function(t){t.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),t.on("preInit",function(){var i=t.schema.getSpecialElements();n.each("video audio iframe object".split(" "),function(e){i[e]=new RegExp("</"+e+"[^>]*>","gi")});var s=t.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){s[e]={}}),t.parser.addNodeFilter("iframe,video,audio,object,embed,script",o.placeHolderConverter(t)),t.serializer.addAttributeFilter("data-mce-object",function(n,o){for(var i,s,a,l,u,d,c,f,p=n.length;p--;)if(i=n[p],i.parent){for(c=i.attr(o),s=new e(c,1),"audio"!==c&&"script"!==c&&(f=i.attr("class"),f&&f.indexOf("mce-preview-object")!==-1?s.attr({width:i.firstChild.attr("width"),height:i.firstChild.attr("height")}):s.attr({width:i.attr("width"),height:i.attr("height")})),s.attr({style:i.attr("style")}),l=i.attributes,a=l.length;a--;){var m=l[a].name;0===m.indexOf("data-mce-p-")&&s.attr(m.substr(11),l[a].value)}"script"===c&&s.attr("type","text/javascript"),u=i.attr("data-mce-html"),u&&(d=new e("#text",3),d.raw=!0,d.value=r.sanitize(t,unescape(u)),s.append(d)),i.replace(s)}})}),t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"),t&&(t=unescape(t),n.setAttribute("data-mce-html",escape(i.updateHtml(t,{width:e.width,height:e.height})))))}),this.showDialog=function(){s.showDialog(t)},t.addButton("media",{tooltip:"Insert/edit media",onclick:this.showDialog,stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),t.addMenuItem("media",{icon:"media",text:"Media",onclick:this.showDialog,context:"insert",prependToContext:!0}),t.on("setContent",function(){t.$("span.mce-preview-object").each(function(e,n){var o=t.$(n);0===o.find("span.mce-shim",n).length&&o.append('<span class="mce-shim"></span>')})}),t.addCommand("mceMedia",this.showDialog)};return t.add("media",a),function(){}}),o("tinymce.plugins.media.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/paste/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){
return e("tinymce.util.VK")}),s("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="x-tinymce/html",t="<!-- "+e+" -->",n=function(e){return t+e},o=function(e){return e.replace(t,"")},r=function(e){return e.indexOf(t)!==-1};return{mark:n,unmark:o,isMarked:r,internalHtmlMime:function(){return e}}}),s("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),s("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),s("tinymce.plugins.paste.core.Utils",["tinymce.core.util.Tools","tinymce.core.html.DomParser","tinymce.core.html.Schema"],function(e,t,n){function o(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function r(r){function i(e){var t=e.name,n=e;if("br"===t)return void(l+="\n");if(u[t]&&(l+=" "),d[t])return void(l+=" ");if(3==e.type&&(l+=e.value),!e.shortEnded&&(e=e.firstChild))do i(e);while(e=e.next);c[t]&&n.next&&(l+="\n","p"==t&&(l+="\n"))}var s=new n,a=new t({},s),l="",u=s.getShortEndedElements(),d=e.makeMap("script noscript style textarea video audio iframe object"," "),c=s.getBlockElements();return r=o(r,[/<!\[[^\]]+\]>/g]),i(a.parse(r)),l}function i(e){function t(e,t,n){return t||n?" ":" "}return e=o(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function s(e){var t=0;return function(){return e+t++}}var a=function(){return navigator.userAgent.indexOf(" Edge/")!==-1};return{filter:o,innerText:r,trimHtml:i,createIdGenerator:s,isMsEdge:a}}),s("tinymce.plugins.paste.core.CutCopy",["tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n){var o=function(){},r=function(t){return e.iOS===!1&&void 0!==t&&"function"==typeof t.setData&&n.isMsEdge()!==!0},i=function(e,n,o){if(!r(e))return!1;try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(t.internalHtmlMime(),n),!0}catch(e){return!1}},s=function(e,t,n,o){i(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},a=function(e){return function(n,o){var r=t.mark(n),i=e.dom.create("div",{contenteditable:"false"}),s=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(i,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(s),e.dom.add(e.getBody(),i);var a=e.selection.getRng();s.focus();var l=e.dom.createRng();l.selectNodeContents(s),e.selection.setRng(l),setTimeout(function(){i.parentNode.removeChild(i),e.selection.setRng(a),o()},0)}},l=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},u=function(e){return function(t){e.selection.isCollapsed()===!1&&s(t,l(e),a(e),function(){e.execCommand("Delete")})}},d=function(e){return function(t){e.selection.isCollapsed()===!1&&s(t,l(e),a(e),o)}},c=function(e){e.on("cut",u(e)),e.on("copy",d(e))};return{register:c}}),s("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")}),s("tinymce.plugins.paste.core.Newlines",["tinymce.core.html.Entities"],function(e){var t=function(e){return!/<(?:(?!\/?(?:div|p|br))[^>]*|(?:div|p|br)\s+\w[^>]+)>/.test(e)},n=function(e){return e.replace(/\r?\n/g,"<br>")},o=function(t,n){var o,r=[],i="<"+t;if("object"==typeof n){for(o in n)n.hasOwnProperty(o)&&r.push(o+'="'+e.encodeAllRaw(n[o])+'"');r.length&&(i+=" "+r.join(" "))}return i+">"},r=function(e,t,n){var r,i,s,a=e.split(/\r?\n/),l=0,u=a.length,d=[],c=[],f=o(t,n),p="</"+t+">";if(1===a.length)return e;for(;l<u;l++)r=l===u-1,i=!r&&!a[l+1],s=!a[l]&&!d.length,d.push(a[l]?a[l]:"&nbsp;"),(r||i||s)&&(c.push(d.join("<br>")),d=[]),i&&l++;return 1===c.length?c[0]:f+c.join(p+f)+p},i=function(e,t,o){return t?r(e,t,o):n(e)};return{isPlainText:t,convert:i,toBRs:n,toBlockElements:r}}),s("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},n=function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},o=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},r=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},i=function(e,n,o){return!(e.selection.isCollapsed()!==!1||!t(n))&&r(e,n,o)},s=function(e,t,r){return!!n(t)&&o(e,t,r)},a=function(e,t){return e.insertContent(t,{merge:e.settings.paste_merge_formats!==!1,paste:!0}),!0},l=function(t,n){e.each([i,s,a],function(e){return e(t,n,a)!==!0})},u=function(e,t){e.settings.smart_paste===!1?a(e,t):l(e,t)};return{isImageUrl:n,isAbsoluteUrl:t,insertContent:u}}),s("tinymce.plugins.paste.core.Clipboard",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,o,r,i,s,a,l,u){return function(i){function d(e,t){var n,o,r=i.dom;if(o=t||s.isMarked(e),e=s.unmark(e),n=i.fire("BeforePastePreProcess",{content:e,internal:o}),n=i.fire("PastePreProcess",n),e=n.content,!n.isDefaultPrevented()){if(i.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()){var a=r.add(i.getBody(),"div",{style:"display:none"},e);n=i.fire("PastePostProcess",{node:a,internal:o}),r.remove(a),e=n.node.innerHTML}n.isDefaultPrevented()||l.insertContent(i,e)}}function c(e){e=i.dom.encode(e).replace(/\r\n/g,"\n"),e=a.convert(e,i.settings.forced_root_block,i.settings.forced_root_block_attrs),d(e,!1)}function f(){function e(e){var t,n,r,i=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1==i.nodeType){for(r=i.childNodes[T.startOffset];r&&3==r.nodeType&&!r.data.length;)r=r.nextSibling;if(r)return"BR"==r.tagName&&(n=o.doc.createTextNode("\ufeff"),r.parentNode.insertBefore(n,r),e=o.createRng(),e.setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),o.remove(n)),t.length?t[0]:void 0}}var n,o=i.dom,r=i.getBody(),s=i.dom.getViewPort(i.getWin()),a=s.y,l=20;if(T=i.selection.getRng(),i.inline&&(n=i.selection.getScrollContainer(),n&&n.scrollTop>0&&(a=n.scrollTop)),T.getClientRects){var u=e(T);if(u)l=a+(u.top-o.getPos(r).y);else{l=a;var d=T.startContainer;d&&(3==d.nodeType&&d.parentNode!=r&&(d=d.parentNode),1==d.nodeType&&(l=o.getPos(d,n||r).y))}}k=o.add(i.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+l+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},M),(t.ie||t.gecko)&&o.setStyle(k,"left","rtl"==o.getStyle(r,"direction",!0)?65535:-65535),o.bind(k,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),k.focus(),i.selection.select(k,!0)}function p(){if(k){for(var e;e=i.dom.get("mcepastebin");)i.dom.remove(e),i.dom.unbind(e);T&&i.selection.setRng(T)}k=T=null}function m(){var e,t,n,o,r="";for(e=i.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)n=e[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),o=n.innerHTML,r!=M&&(r+=o);return r}function h(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&n.indexOf(D)==-1&&(t["text/plain"]=n)}if(e.types)for(var o=0;o<e.types.length;o++){var r=e.types[o];t[r]=e.getData(r)}}return t}function g(e){var t=h(e.clipboardData||i.getDoc().dataTransfer);return u.isMsEdge()?o.extend(t,{"text/html":""}):t}function v(e){return E(e,"text/html")||E(e,"text/plain")}function y(e){var t;return t=e.indexOf(","),t!==-1?e.substr(t+1):null}function b(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}function _(e,t,n){e&&(i.selection.setRng(e),e=null);var o=t.result,r=y(o),s=new Image;if(s.src=o,b(i.settings,s)){var a,l,u=i.editorUpload.blobCache;l=u.findFirst(function(e){return e.base64()===r}),l?a=l:(a=u.create(O(),n,r),u.add(a)),d('<img src="'+a.blobUri()+'">',!1)}else d('<img src="'+o+'">',!1)}function x(e,t){function n(n){var o,r,i,s=!1;if(n)for(o=0;o<n.length;o++)if(r=n[o],/^image\/(jpeg|png|gif|bmp)$/.test(r.type)){var a=r.getAsFile?r.getAsFile():r;i=new FileReader,i.onload=_.bind(null,t,i,a),i.readAsDataURL(a),e.preventDefault(),s=!0}return s}var o=e.clipboardData||e.dataTransfer;if(i.settings.paste_data_images&&o)return n(o.items)||n(o.files)}function C(e){var t=e.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&t&&t.items&&0===t.items.length}function j(t){return e.getCaretRangeFromPoint(t.clientX,t.clientY,i.getDoc())}function E(e,t){return t in e&&e[t].length>0}function w(e){return r.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function S(){function e(e,t,n,o){var r,s;return E(e,"text/html")?r=e["text/html"]:(r=m(),r==M&&(n=!0)),r=u.trimHtml(r),k&&k.firstChild&&"mcepastebin"===k.firstChild.id&&(n=!0),p(),s=o===!1&&a.isPlainText(r),r.length&&!s||(n=!0),n&&(r=E(e,"text/plain")&&s?e["text/plain"]:u.innerText(r)),r==M?void(t||i.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?c(r):d(r,o))}function o(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}i.on("keydown",function(e){function n(e){w(e)&&!e.isDefaultPrevented()&&p()}if(w(e)&&!e.isDefaultPrevented()){if(P=e.shiftKey&&86==e.keyCode,P&&t.webkit&&navigator.userAgent.indexOf("Version/")!=-1)return;if(e.stopImmediatePropagation(),R=(new Date).getTime(),t.ie&&P)return e.preventDefault(),void i.fire("paste",{ieFake:!0});p(),f(),i.once("keyup",n),i.once("paste",function(){i.off("keyup",n)})}});var r=function(){return T||i.selection.getRng()};i.on("paste",function(o){var a=(new Date).getTime(),l=g(o),u=(new Date).getTime()-a,d=(new Date).getTime()-R-u<1e3,c="text"==I.pasteFormat||P,h=E(l,s.internalHtmlMime());return P=!1,o.isDefaultPrevented()||C(o)?void p():!v(l)&&x(o,r())?void p():(d||o.preventDefault(),!t.ie||d&&!o.ieFake||E(l,"text/html")||(f(),i.dom.bind(k,"paste",function(e){e.stopPropagation()}),i.getDoc().execCommand("Paste",!1,null),l["text/html"]=m()),void(E(l,"text/html")?(o.preventDefault(),e(l,d,c,h)):n.setEditorTimeout(i,function(){e(l,d,c,h)},0)))}),i.on("dragstart dragend",function(e){N="dragstart"==e.type}),i.on("drop",function(e){var t,r;if(r=j(e),!e.isDefaultPrevented()&&!N){t=h(e.dataTransfer);var a=E(t,s.internalHtmlMime());if((v(t)&&!o(t)||!x(e,r))&&r&&i.settings.paste_filter_drop!==!1){var l=t["mce-internal"]||t["text/html"]||t["text/plain"];l&&(e.preventDefault(),n.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),i.selection.setRng(r),l=u.trimHtml(l),t["text/html"]?d(l,a):c(l)})}))}}}),i.on("dragover dragend",function(e){i.settings.paste_data_images&&e.preventDefault()})}var k,T,P,I=this,R=0,N=!1,M="%MCEPASTEBIN%",D="data:text/mce-internal,",O=u.createIdGenerator("mceclip");I.pasteHtml=d,I.pasteText=c,I.pasteImageData=x,i.on("preInit",function(){S(),i.parser.addNodeFilter("img",function(e,n,o){function r(e){return e.data&&e.data.paste===!0}function s(e){e.attr("data-mce-object")||d===t.transparentSrc||e.remove()}function a(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!i.settings.paste_data_images&&r(o))for(var u=e.length;u--;){var d=e[u].attributes.map.src;d&&(a(d)?s(e[u]):!i.settings.allow_html_data_urls&&l(d)&&s(e[u]))}})})}}),s("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),s("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),s("tinymce.plugins.paste.core.WordFilter",["tinymce.core.util.Tools","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.html.Node","tinymce.plugins.paste.core.Utils"],function(e,t,n,o,r,i){function s(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function a(t){var n,o;return o=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(o,function(e){if(e.test(t))return n=!0,!1}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function u(u){var d=u.settings;u.on("BeforePastePreProcess",function(c){function f(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do n+=t(e);while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!n(e,t))return!1;while(e=e.next);return!0}function o(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do o(e);while(e=e.next)}function i(e,t,i){var a=e._listLevel||d;a!=d&&(a<d?s&&(s=s.parent.parent):(u=s,s=null)),s&&s.name==t?s.append(e):(u=u||s,s=new r(t,1),i>1&&s.attr("start",""+i),e.wrap(s)),e.name="li",a>d&&u&&u.lastChild.append(s),d=a,o(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var s,u,d=1,c=[],f=e.firstChild;"undefined"!=typeof f&&null!==f;)if(c.push(f),f=f.walk(),null!==f)for(;"undefined"!=typeof f&&f.parent!==e;)f=f.walk();for(var p=0;p<c.length;p++)if(e=c[p],"p"==e.name&&e.firstChild){var m=t(e);if(l(m)){i(e,"ul");continue}if(a(m)){var h=/([0-9]+)\./.exec(m),g=1;h&&(g=parseInt(h[1],10)),i(e,"ol",g);continue}if(e._listLevel){i(e,"ul",1);continue}s=null}else u=s,s=null}function p(t,n){var o,i={},s=u.dom.parseStyle(n);return e.each(s,function(e,r){switch(r){case"mso-list":o=/\w+ \w+([0-9]+)/i.exec(n),o&&(t._listLevel=parseInt(o[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":r="text-align";break;case"vert-align":r="vertical-align";break;case"font-color":case"mso-foreground":r="color";break;case"mso-background":case"mso-highlight":r="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(i[r]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===r.indexOf("mso-comment")?void t.remove():void(0!==r.indexOf("mso-")&&("all"==m||h&&h[r])&&(i[r]=e))}),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],t.wrap(new r("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],t.wrap(new r("i",1))),i=u.dom.serializeStyle(i,t.name),i?i:null}var m,h,g=c.content;if(g=g.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),g=g.replace(/<br class="?Apple-interchange-newline"?>/gi,""),m=d.paste_retain_style_properties,m&&(h=e.makeMap(m.split(/[, ]/))),d.paste_enable_default_filters!==!1&&s(c.content)){c.wordContent=!0,g=i.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var v=d.paste_word_valid_elements;v||(v="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var y=new n({valid_elements:v,valid_children:"-li[p]"});e.each(y.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},y);b.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("style",p(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),b.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),b.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),b.addNodeFilter("a",function(e){for(var t,n,o,r=e.length;r--;)if(t=e[r],n=t.attr("href"),o=t.attr("name"),n&&n.indexOf("#_msocom_")!=-1)t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1],n&&(n="#"+n)),n||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){t.unwrap();continue}t.attr({href:n,name:o})}else t.unwrap()});var _=b.parse(g);d.paste_convert_word_fake_lists!==!1&&f(_),c.content=new o({validate:d.validate},y).serialize(_)}})}return u.isWordContent=s,u}),s("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.core.WordFilter","tinymce.plugins.paste.core.Utils"],function(e,t,n,o){"use strict";return function(r){function i(e){r.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function s(e){r.on("PastePostProcess",function(t){e(t.node)})}function a(e){if(!n.isWordContent(e))return e;var i=[];t.each(r.schema.getBlockElements(),function(e,t){i.push(t)});var s=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=o.filter(e,[[s,"$1"]]),e=o.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function l(e){if(n.isWordContent(e))return e;var t=r.settings.paste_webkit_styles;if(r.settings.paste_remove_styles_if_webkit===!1||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var o=r.dom,i=r.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,r,s){var a=o.parseStyle(o.decode(r),"span"),l={};if("none"===t)return n+s;for(var u=0;u<t.length;u++){var d=a[t[u]],c=o.getStyle(i,t[u],!0);/color/.test(t[u])&&(d=o.toHex(d),c=o.toHex(c)),c!=d&&(l[t[u]]=d)}return l=o.serializeStyle(l,"span"),l?n+' style="'+l+'"'+s:n+s})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,o){return t+' style="'+n+'"'+o})}function u(e){r.$("a",e).find("font,u").each(function(e,t){r.dom.remove(t,!0)})}e.webkit&&i(l),e.ie&&(i(a),s(u))}}),s("tinymce.plugins.paste.Plugin",["tinymce.core.PluginManager","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,o,r){var i;return e.add("paste",function(s){function a(){return i||s.settings.paste_plaintext_inform===!1}function l(){if("text"==d.pasteFormat)d.pasteFormat="html",s.fire("PastePlainTextToggle",{state:!1});else if(d.pasteFormat="text",s.fire("PastePlainTextToggle",{state:!0}),!a()){var e=s.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");s.notificationManager.open({text:e,type:"info"}),i=!0}s.focus()}function u(){var e=this;e.active("text"===d.pasteFormat),s.on("PastePlainTextToggle",function(t){e.active(t.state)})}var d,c=this,f=s.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(f.plugins)&&e.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(c.clipboard=d=new t(s),c.quirks=new o(s),c.wordFilter=new r(s),s.settings.paste_as_text&&(c.clipboard.pasteFormat="text"),f.paste_preprocess&&s.on("PastePreProcess",function(e){f.paste_preprocess.call(c,c,e)}),f.paste_postprocess&&s.on("PastePostProcess",function(e){f.paste_postprocess.call(c,c,e)}),s.addCommand("mceInsertClipboardContent",function(e,t){t.content&&c.clipboard.pasteHtml(t.content,t.internal),t.text&&c.clipboard.pasteText(t.text)}),s.settings.paste_block_drop&&s.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),s.settings.paste_data_images||s.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),s.addCommand("mceTogglePlainTextPaste",l),s.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:l,onPostRender:u}),s.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:d.pasteFormat,onclick:l,onPostRender:u}),void n.register(s))}),function(){}}),o("tinymce.plugins.paste.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/tabfocus/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.plugins.tabfocus.Plugin",["tinymce.core.PluginManager","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.EditorManager","tinymce.core.util.Delay","tinymce.core.Env"],function(e,t,n,o,r,i){return e.add("tabfocus",function(e){function s(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function a(t){function s(r){function i(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&i(e.parentNode)}function s(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&o.get(t.id)&&e.tabIndex!=-1&&i(e)}if(u=l.select(":input:enabled,*[tabindex]:not(iframe)"),n.each(u,function(t,n){if(t.id==e.id)return a=n,!1}),r>0){for(c=a+1;c<u.length;c++)if(s(u[c]))return u[c]}else for(c=a-1;c>=0;c--)if(s(u[c]))return u[c];return null}var a,u,d,c;if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey||t.isDefaultPrevented())&&(d=n.explode(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==d.length&&(d[1]=d[0],d[0]=":prev"),u=t.shiftKey?":prev"==d[0]?s(-1):l.get(d[0]):":next"==d[1]?s(1):l.get(d[1]))){var f=o.get(u.id||u.name);u.id&&f?f.focus():r.setTimeout(function(){i.webkit||window.focus(),u.focus()},10),t.preventDefault()}}var l=t.DOM;e.on("init",function(){e.inline&&l.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",s),i.gecko?e.on("keypress keydown",a):e.on("keydown",a)})}),function(){}}),o("tinymce.plugins.tabfocus.Plugin")()}()}).call(window)},"./node_modules/tinymce/plugins/textcolor/plugin.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),s("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.plugins.textcolor.Plugin",["tinymce.core.dom.DOMUtils","tinymce.core.PluginManager","tinymce.core.util.I18n","tinymce.core.util.Tools"],function(e,t,n,o){var r=n.translate;return t.add("textcolor",function(t){function n(e){var n;return t.dom.getParents(t.selection.getStart(),function(t){var o;(o=t.style["forecolor"==e?"color":"background-color"])&&(n=o)}),n}function i(e){var n,o,r=[];for(o=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],o=t.settings.textcolor_map||o,o=t.settings[e+"_map"]||o,n=0;n<o.length;n+=2)r.push({text:o[n+1],color:"#"+o[n]});return r}function s(){function e(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+h+"-"+g++ +'" data-mce-color="'+(e?e:"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+r(t)+'">'+(n?"&#215;":"")+"</div></td>"}var n,o,s,a,l,u,d,p,m=this,h=m._id,g=0;for(p=m.settings.origin,n=i(p),n.push({text:r("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=n.length-1,u=0;u<f[p];u++){for(s+="<tr>",l=0;l<c[p];l++)d=u*c[p]+l,d>a?s+="<td></td>":(o=n[d],s+=e(o.color,o.text));s+="</tr>"}if(t.settings.color_picker_callback){for(s+='<tr><td colspan="'+c[p]+'" class="mce-custom-color-btn"><div id="'+h+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+h+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+r("Custom...")+"</button></div></td></tr>",s+="<tr>",l=0;l<c[p];l++)s+=e("","Custom color");s+="</tr>"}return s+="</tbody></table>"}function a(e,n){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()})}function l(e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})}function u(r){function i(e){p.hidePanel(),p.color(e),a(p.settings.format,e)}function s(){p.hidePanel(),p.resetColor(),l(p.settings.format)}function u(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var d,f,p=this.parent();f=p.settings.origin,e.DOM.getParent(r.target,".mce-custom-color-btn")&&(p.hidePanel(),t.settings.color_picker_callback.call(t,function(e){var t,n,r,s=p.panel.getEl().getElementsByTagName("table")[0];for(t=o.map(s.rows[s.rows.length-1].childNodes,function(e){return e.firstChild}),r=0;r<t.length&&(n=t[r],n.getAttribute("data-mce-color"));r++);if(r==c[f])for(r=0;r<c[f]-1;r++)u(t[r],t[r+1].getAttribute("data-mce-color"));u(n,e),i(e)},n(p.settings.format))),d=r.target.getAttribute("data-mce-color"),d?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),r.target.setAttribute("aria-selected",!0),this.lastId=r.target.id,"transparent"==d?s():i(d)):null!==d&&p.hidePanel()}function d(){var e=this;e._color?a(e.settings.format,e._color):l(e.settings.format)}var c,f;f={forecolor:t.settings.forecolor_rows||t.settings.textcolor_rows||5,backcolor:t.settings.backcolor_rows||t.settings.textcolor_rows||5},c={forecolor:t.settings.forecolor_cols||t.settings.textcolor_cols||8,backcolor:t.settings.backcolor_cols||t.settings.textcolor_cols||8},t.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:s,onclick:u},onclick:d}),t.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:s,onclick:u},onclick:d})}),function(){}}),o("tinymce.plugins.textcolor.Plugin")()}()}).call(window)},"./node_modules/tinymce/themes/modern/theme.js":function(e,t){(function(){!function(){var e={},t=function(t){for(var n=e[t],r=n.deps,i=n.defn,s=r.length,a=new Array(s),l=0;l<s;++l)a[l]=o(r[l]);var u=i.apply(null,a);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},o=function(n){var o=e[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&t(n),o.instance},r=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)},i={};i.bolt={module:{api:{define:n,require:r,demand:o}}};var s=n,a=function(e,t){s(e,[],function(){return t})};a("global!window",window),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.AddOnManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.AddOnManager")}),s("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),s("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),s("tinymce.core.ui.Api",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Api")}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),s("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("tinymce.themes.modern.ui.A11y",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},t=function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})};return{addKeys:t}}),s("tinymce.themes.modern.ui.Branding",["tinymce.core.dom.DOMUtils"],function(e){var t=e.DOM,n=function(e,n,o){return function(){var r=e.getContentAreaContainer().querySelector("iframe").offsetWidth,i=Math.max(r-e.getDoc().documentElement.offsetWidth,0);t.setStyle(n,"right",i+"px"),o?t.setStyle(n,"top","-16px"):t.setStyle(n,"bottom","1px")}},o=function(e){return function(){t.hide(e)}},r=function(e,t,o){n(e,t,o)(),e.on("NodeChange ResizeEditor",n(e,t,o))},i=function(e,t,n){n.appendChild(t),r(e,t,!0)},s=function(e,t){e.getContainer().appendChild(t),r(e,t,!1)},a=function(e){e.on("SkinLoaded",function(){var n=t.create("div",{class:"mce-branding-powered-by"}),r=e.getContainer().querySelector(".mce-statusbar");r?i(e,n,r):s(e,n),t.bind(n,"click",o(n))})},l=function(e){e.settings.branding!==!1&&a(e)};return{setup:l}}),s("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){
return e("tinymce.util.Delay")}),s("tinymce.core.geom.Rect",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.geom.Rect")}),s("tinymce.themes.modern.ui.Toolbar",["tinymce.core.util.Tools","tinymce.core.ui.Factory"],function(e,t){var n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",o=function(n,o,r){var i,s=[];if(o)return e.each(o.split(/[ ,]/),function(e){var o,a=function(){var t=n.selection;e.settings.stateSelector&&t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"==e?i=null:(i||(i={type:"buttongroup",items:[]},s.push(i)),n.buttons[e]&&(o=e,e=n.buttons[o],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=r,e=t.create(e),i.items.push(e),n.initialized?a():n.on("init",a)))}),{type:"toolbar",layout:"flow",items:s}},r=function(t,r){var i=[],s=t.settings,a=function(e){if(e)return i.push(o(t,e,r)),!0};if(e.isArray(s.toolbar)){if(0===s.toolbar.length)return;e.each(s.toolbar,function(e,t){s["toolbar"+(t+1)]=e}),delete s.toolbar}for(var l=1;l<10&&a(s["toolbar"+l]);l++);if(i.length||s.toolbar===!1||a(s.toolbar||n),i.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}};return{createToolbar:o,createToolbars:r}}),s("tinymce.themes.modern.ui.ContextToolbars",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.ui.Factory","tinymce.core.geom.Rect","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,o,r,i){var s=e.DOM,a=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},l=function(e){t.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},u=function(e,t){e.moveTo(t.left,t.top)},d=function(e,n,o){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,r){e.classes.toggle("arrow-"+t,o(r,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,r){e.classes.toggle("arrow-"+t,o(r,n.substr(1,1)))})},c=function(e,t,n,o,r,i){return i=a({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:a(o),contentAreaRect:a(r),panelRect:i})),i},f=function(e){var a,f=e.settings,p=function(){return e.contextToolbars||[]},m=function(t){var n,o,r;return n=s.getPos(e.getContentAreaContainer()),o=e.dom.getRect(t),r=e.dom.getRoot(),"BODY"===r.nodeName&&(o.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,o.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),o.x+=n.x,o.y+=n.y,o},h=function(t,n){var o,i,a,p,h,g,v,y,b=f.inline_toolbar_position_handler;if(!e.removed){if(!t||!t.toolbar.panel)return void l(e);v=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],h=t.toolbar.panel,n&&h.show(),a=m(t.element),i=s.getRect(h.getEl()),p=s.getRect(e.getContentAreaContainer()||e.getBody()),y=25,"inline"!==s.getStyle(t.element,"display",!0)&&(a.w=t.element.clientWidth,a.h=t.element.clientHeight),e.inline||(p.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<y&&(a=r.inflate(a,0,8)),o=r.findBestRelativePosition(i,a,p,v),a=r.clamp(a,p),o?(g=r.relativePosition(i,a,o),u(h,c(b,g.x,g.y,a,p,i))):(p.h+=i.h,a=r.intersect(p,a),a?(o=r.findBestRelativePosition(i,a,p,["bc-tc","bl-tl","br-tr"]),o?(g=r.relativePosition(i,a,o),u(h,c(b,g.x,g.y,a,p,i))):u(h,c(b,a.x,a.y,a,p,i))):h.hide()),d(h,o,function(e,t){return e===t})}},g=function(t){return function(){var o=function(){e.selection&&h(_(e.selection.getNode()),t)};n.requestAnimationFrame(o)}},v=function(){a||(a=e.selection.getScrollContainer()||e.getWin(),s.bind(a,"scroll",g(!0)),e.on("remove",function(){s.unbind(a,"scroll")}))},y=function(t){var n;return t.toolbar.panel?(t.toolbar.panel.show(),void h(t)):(v(),n=o.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:i.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),t.toolbar.panel=n,n.renderTo(document.body).reflow(),void h(t))},b=function(){t.each(p(),function(e){e.panel&&e.panel.hide()})},_=function(t){var n,o,r,i=p();for(r=e.$(t).parents().add(t),n=r.length-1;n>=0;n--)for(o=i.length-1;o>=0;o--)if(i[o].predicate(r[n]))return{toolbar:i[o],element:r[n]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&n.setEditorTimeout(e,function(){var t;t=_(e.selection.getNode()),t?(b(),y(t)):b()})}),e.on("blur hide contextmenu",b),e.on("ObjectResizeStart",function(){var t=_(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",g(!0)),e.on("nodeChange",g(!1)),e.on("remove",function(){t.each(p(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=_(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})};return{addContextualToolbars:f}}),s("tinymce.themes.modern.ui.Menubar",["tinymce.core.util.Tools"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){var n;return"|"==t?{text:"|"}:n=e[t]},o=function(o,r,i){var s,a,l,u,d;if(d=e.makeMap((r.removed_menuitems||"").split(/[ ,]/)),r.menu?(a=r.menu[i],u=!0):a=t[i],a){s={text:a.title},l=[],e.each((a.items||"").split(/[ ,]/),function(e){var t=n(o,e);t&&!d[e]&&l.push(n(o,e))}),u||e.each(o,function(e){e.context==i&&("before"==e.separator&&l.push({text:"|"}),e.prependToContext?l.unshift(e):l.push(e),"after"==e.separator&&l.push({text:"|"}))});for(var c=0;c<l.length;c++)"|"==l[c].text&&(0!==c&&c!=l.length-1||l.splice(c,1));if(s.menu=l,!s.menu.length)return null}return s},r=function(e){var n,r=[],i=e.settings,s=[];if(i.menu)for(n in i.menu)s.push(n);else for(n in t)s.push(n);for(var a="string"==typeof i.menubar?i.menubar.split(/[ ,]/):s,l=0;l<a.length;l++){var u=a[l];u=o(e.menuItems,e.settings,u),u&&r.push(u)}return r};return{createMenuButtons:r}}),s("tinymce.themes.modern.ui.Resize",["tinymce.core.dom.DOMUtils"],function(e){var t=e.DOM,n=function(e){return{width:e.clientWidth,height:e.clientHeight}},o=function(e,o,r){var i,s,a,l,u=e.settings;i=e.getContainer(),s=e.getContentAreaContainer().firstChild,a=n(i),l=n(s),null!==o&&(o=Math.max(u.min_width||100,o),o=Math.min(u.max_width||65535,o),t.setStyle(i,"width",o+(a.width-l.width)),t.setStyle(s,"width",o)),r=Math.max(u.min_height||100,r),r=Math.min(u.max_height||65535,r),t.setStyle(s,"height",r),e.fire("ResizeEditor")},r=function(e,t,n){var r=e.getContentAreaContainer();o(e,r.clientWidth+t,r.clientHeight+n)};return{resizeTo:o,resizeBy:r}}),s("tinymce.themes.modern.ui.Sidebar",["tinymce.core.util.Tools","tinymce.core.ui.Factory","tinymce.core.Env"],function(e,t,n){var o=function(e){return{element:function(){return e}}},r=function(e,t,n){var r=e.settings[n];r&&r(o(t.getEl("body")))},i=function(t,n,o){e.each(o,function(e){var o=n.items().filter("#"+e.name)[0];o&&o.visible()&&e.name!==t&&(r(e,o,"onhide"),o.visible(!1))})},s=function(e){e.items().each(function(e){e.active(!1)})},a=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},l=function(e,n,o){return function(l){var u=l.control,d=u.parents().filter("panel")[0],c=d.find("#"+n)[0],f=a(o,n);i(n,d,o),s(u.parent()),c&&c.visible()?(r(f,c,"onhide"),c.hide(),u.active(!1)):(c?(c.show(),r(f,c,"onshow")):(c=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),d.prepend(c),r(f,c,"onrender"),r(f,c,"onshow")),u.active(!0)),e.fire("ResizeEditor")}},u=function(){return!n.ie||n.ie>=11},d=function(e){return!(!u()||!e.sidebars)&&e.sidebars.length>0},c=function(t){var n=e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:l(t,e.name,t.sidebars)}});return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:n}]}};return{hasSidebar:d,createSidebar:c}}),s("tinymce.themes.modern.ui.SkinLoaded",[],function(){var e=function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}};return{fireSkinLoaded:e}}),s("tinymce.themes.modern.modes.Iframe",["tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.Branding","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.Resize","tinymce.themes.modern.ui.Sidebar","tinymce.themes.modern.ui.SkinLoaded","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,o,r,i,s,a,l,u,d){var c=e.DOM,f=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},p=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},m=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[p("0"),l.createSidebar(e)]}},h=function(e,n,h){var g,v,y,b=e.settings;return h.skinUiCss&&c.styleSheetLoader.load(h.skinUiCss,u.fireSkinLoaded(e)),g=n.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[b.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:s.createMenuButtons(e)},d.createToolbars(e,b.toolbar_items_size),l.hasSidebar(e)?m(e):p("1 0 0 0")]}),b.resize!==!1&&(v={type:"resizehandle",direction:b.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;y={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===b.resize?a.resizeTo(e,y.width+t.deltaX,y.height+t.deltaY):a.resizeTo(e,null,y.height+t.deltaY)}}),b.statusbar!==!1&&g.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},v]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",f(g)),g.renderBefore(h.targetNode).reflow(),b.readonly&&e.setMode("readonly"),h.width&&c.setStyle(g.getEl(),"width",h.width),e.on("remove",function(){g.remove(),g=null}),o.addKeys(e,g),i.addContextualToolbars(e),r.setup(e),{iframeContainer:g.find("#iframe")[0].getEl(),editorContainer:g.getEl()}};return{render:h}}),s("tinymce.core.ui.FloatPanel",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.FloatPanel")}),s("tinymce.themes.modern.modes.Inline",["tinymce.core.util.Tools","tinymce.core.ui.Factory","tinymce.core.dom.DOMUtils","tinymce.core.ui.FloatPanel","tinymce.themes.modern.ui.Toolbar","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.SkinLoaded"],function(e,t,n,o,r,i,s,a,l){var u=function(e,u,d){var c,f,p=e.settings,m=n.DOM;p.fixed_toolbar_container&&(f=m.select(p.fixed_toolbar_container)[0]);var h=function(){if(c&&c.moveRel&&c.visible()&&!c._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,r=0;if(t){var i=m.getPos(n),s=m.getPos(t);o=Math.max(0,s.x-i.x),r=Math.max(0,s.y-i.y)}c.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,r)}},g=function(){c&&(c.show(),h(),m.addClass(e.getBody(),"mce-edit-focus"))},v=function(){c&&(c.hide(),o.hideAll(),m.removeClass(e.getBody(),"mce-edit-focus"))},y=function(){return c?void(c.visible()||g()):(c=u.panel=t.create({type:f?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!f,border:1,items:[p.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:i.createMenuButtons(e)},r.createToolbars(e,p.toolbar_items_size)]}),e.fire("BeforeRenderUI"),c.renderTo(f||document.body).reflow(),a.addKeys(e,c),g(),s.addContextualToolbars(e),e.on("nodeChange",h),e.on("activate",g),e.on("deactivate",v),void e.nodeChanged())};return p.content_editable=!0,e.on("focus",function(){d.skinUiCss?m.styleSheetLoader.load(d.skinUiCss,y,y):y()}),e.on("blur hide",v),e.on("remove",function(){c&&(c.remove(),c=null)}),d.skinUiCss&&m.styleSheetLoader.load(d.skinUiCss,l.fireSkinLoaded(e)),{}};return{render:u}}),s("tinymce.core.ui.Throbber",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Throbber")}),s("tinymce.themes.modern.ui.ProgressState",["tinymce.core.ui.Throbber"],function(e){var t=function(t,n){var o;t.on("ProgressState",function(t){o=o||new e(n.panel.getEl("body")),t.state?o.show(t.time):o.hide()})};return{setup:t}}),s("tinymce.themes.modern.Theme",["global!window","tinymce.core.AddOnManager","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.ui.Api","tinymce.themes.modern.modes.Iframe","tinymce.themes.modern.modes.Inline","tinymce.themes.modern.ui.ProgressState","tinymce.themes.modern.ui.Resize"],function(e,t,n,o,r,i,s,a,l){var u=t.ThemeManager;r.appendTo(e.tinymce?e.tinymce:{});var d=function(e,t,o){var r=e.settings,l=r.skin!==!1&&(r.skin||"lightgray");if(l){var u=r.skin_url;u=u?e.documentBaseURI.toAbsolute(u):n.baseURL+"/skins/"+l,o.skinUiCss=u+"/skin.min.css",e.contentCSS.push(u+"/content"+(e.inline?".inline":"")+".min.css")}return a.setup(e,t),r.inline?s.render(e,t,o):i.render(e,t,o)};return u.add("modern",function(e){return{renderUI:function(t){return d(e,this,t)},resizeTo:function(t,n){return l.resizeTo(e,t,n)},resizeBy:function(t,n){return l.resizeBy(e,t,n)}}}),function(){}}),o("tinymce.themes.modern.Theme")()}()}).call(window)},"./node_modules/tinymce/tinymce.js":function(e,t,n){(function(n){(function(){!function(){var t={},o=function(e){for(var n=t[e],o=n.deps,r=n.defn,s=o.length,a=new Array(s),l=0;l<s;++l)a[l]=i(o[l]);var u=r.apply(null,a);if(void 0===u)throw"module ["+e+"] returned undefined";n.instance=u},r=function(e,n,o){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===o)throw"no definition function for "+e;t[e]={deps:n,defn:o,instance:void 0}},i=function(e){var n=t[e];if(void 0===n)throw"module ["+e+"] was undefined";return void 0===n.instance&&o(e),n.instance},s=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;++r)o.push(i(e[r]));t.apply(null,t)},a={};a.bolt={module:{api:{define:r,require:s,demand:i}}};var l=r,u=function(e,t){l(e,[],function(){return t})};l("tinymce.core.geom.Rect",[],function(){"use strict";function e(e,t,n){var o,r,s,a,l,d;return o=t.x,r=t.y,s=e.w,a=e.h,l=t.w,d=t.h,n=(n||"").split(""),"b"===n[0]&&(r+=d),"r"===n[1]&&(o+=l),"c"===n[0]&&(r+=u(d/2)),"c"===n[1]&&(o+=u(l/2)),"b"===n[3]&&(r-=a),"r"===n[4]&&(o-=s),"c"===n[3]&&(r-=u(a/2)),"c"===n[4]&&(o-=u(s/2)),i(o,r,s,a)}function t(t,n,o,r){var i,s;for(s=0;s<r.length;s++)if(i=e(t,n,r[s]),i.x>=o.x&&i.x+i.w<=o.w+o.x&&i.y>=o.y&&i.y+i.h<=o.h+o.y)return r[s];return null}function n(e,t,n){return i(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function o(e,t){var n,o,r,s;return n=l(e.x,t.x),o=l(e.y,t.y),r=a(e.x+e.w,t.x+t.w),s=a(e.y+e.h,t.y+t.h),r-n<0||s-o<0?null:i(n,o,r-n,s-o)}function r(e,t,n){var o,r,s,a,u,d,c,f,p,m;return u=e.x,d=e.y,c=e.x+e.w,f=e.y+e.h,p=t.x+t.w,m=t.y+t.h,o=l(0,t.x-u),r=l(0,t.y-d),s=l(0,c-p),a=l(0,f-m),u+=o,d+=r,n&&(c+=o,f+=r,u-=s,d-=a),c-=s,f-=a,i(u,d,c-u,f-d)}function i(e,t,n,o){return{x:e,y:t,w:n,h:o}}function s(e){return i(e.left,e.top,e.width,e.height)}var a=Math.min,l=Math.max,u=Math.round;return{inflate:n,relativePosition:e,findBestRelativePosition:t,intersect:o,clamp:r,create:i,fromClientRect:s}}),l("tinymce.core.util.Promise",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(r,this),e(i,this))}function o(e){var t=this;return null===this._state?void this._deferreds.push(e):void u(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var o;try{o=n(t._value)}catch(t){return void e.reject(t)}e.resolve(o)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(r,this),e(i,this))}this._state=!0,this._value=t,s.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o}function l(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,n(e))})}catch(e){if(o)return;o=!0,n(e)}}if(window.Promise)return window.Promise;var u=t.immediateFn||"function"==typeof n&&n||function(e){setTimeout(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t(function(t,i){o.call(r,new a(e,n,t,i))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function o(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){o(i,e)},n)}e[i]=s,0===--r&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var r=e.length,i=0;i<e.length;i++)o(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var o=0,r=e.length;o<r;o++)e[o].then(t,n)})},t}),l("tinymce.core.util.Delay",["tinymce.core.util.Promise"],function(e){function t(e,t){function n(e){window.setTimeout(e,0)}var o,r=window.requestAnimationFrame,i=["ms","moz","webkit"];for(o=0;o<i.length&&!r;o++)r=window[i[o]+"RequestAnimationFrame"];r||(r=n),r(e,t)}function n(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function o(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}function r(e){return clearTimeout(e)}function i(e){return clearInterval(e)}function s(e,t){var o,r;return r=function(){var r=arguments;clearTimeout(o),o=n(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(o)},r}var a;return{requestAnimationFrame:function(n,o){return a?void a.then(n):void(a=new e(function(e){o||(o=document.body),t(e,o)}).then(n))},setTimeout:n,setInterval:o,setEditorTimeout:function(e,t,o){return n(function(){e.removed||t()},o)},setEditorInterval:function(e,t,n){var r;return r=o(function(){e.removed?clearInterval(r):t()},n)},debounce:s,throttle:s,clearInterval:i,clearTimeout:r}}),l("tinymce.core.Env",[],function(){function e(e){return"matchMedia"in window&&matchMedia(e).matches}var t,n,o,r,i,s,a,l,u,d,c,f,p,m=navigator,h=m.userAgent;t=window.opera&&window.opera.buildNumber,u=/Android/.test(h),n=/WebKit/.test(h),o=!n&&!t&&/MSIE/gi.test(h)&&/Explorer/gi.test(m.appName),o=o&&/MSIE (\w+)\./.exec(h)[1],r=h.indexOf("Trident/")!=-1&&(h.indexOf("rv:")!=-1||m.appName.indexOf("Netscape")!=-1)&&11,i=h.indexOf("Edge/")!=-1&&!o&&!r&&12,o=o||r||i,s=!n&&!r&&/Gecko/.test(h),a=h.indexOf("Mac")!=-1,l=/(iPad|iPhone)/.test(h),d="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,c=e("only screen and (max-device-width: 480px)")&&(u||l),f=e("only screen and (min-width: 800px)")&&(u||l),p=h.indexOf("Windows Phone")!=-1,i&&(n=!1);var g=!l||d||h.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:t,webkit:n,ie:o,gecko:s,mac:a,iOS:l,android:u,contentEditable:g,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=o,range:window.getSelection&&"Range"in window,documentMode:o&&!i?document.documentMode||7:10,fileApi:d,ceFalse:o===!1||o>8,canHaveCSP:o===!1||o>11,desktop:!c&&!f,windowsPhone:p}}),l("tinymce.core.dom.EventUtils",["tinymce.core.util.Delay","tinymce.core.Env"],function(e,t){"use strict";function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){var n,o=t;return n=e.path,n&&n.length>0&&(o=n[0]),e.deepPath&&(n=e.deepPath(),n&&n.length>0&&(o=n[0])),o}function i(e,n){var o,i,s=n||{};for(o in e)d[o]||(s[o]=e[o]);if(s.target||(s.target=s.srcElement||document),t.experimentalShadowDom&&(s.target=r(e,s.target)),e&&u.test(e.type)&&e.pageX===i&&e.clientX!==i){var a=s.target.ownerDocument||document,l=a.documentElement,m=a.body;s.pageX=e.clientX+(l&&l.scrollLeft||m&&m.scrollLeft||0)-(l&&l.clientLeft||m&&m.clientLeft||0),s.pageY=e.clientY+(l&&l.scrollTop||m&&m.scrollTop||0)-(l&&l.clientTop||m&&m.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=p,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=p,s.stopPropagation()},c(s)===!1&&(s.isDefaultPrevented=f,s.isPropagationStopped=f,s.isImmediatePropagationStopped=f),"undefined"==typeof s.metaKey&&(s.metaKey=!1),s}function s(r,i,s){function a(){return"complete"===c.readyState||"interactive"===c.readyState&&c.body}function l(){s.domLoaded||(s.domLoaded=!0,i(f))}function u(){a()&&(o(c,"readystatechange",u),l())}function d(){try{c.documentElement.doScroll("left")}catch(t){return void e.setTimeout(d)}l()}var c=r.document,f={type:"ready"};return s.domLoaded?void i(f):(!c.addEventListener||t.ie&&t.ie<11?(n(c,"readystatechange",u),c.documentElement.doScroll&&r.self===r.top&&d()):a()?l():n(r,"DOMContentLoaded",l),void n(r,"load",l))}function a(){function e(e,t){var n,o,r,i,s=f[t];if(n=s&&s[e.type])for(o=0,r=n.length;o<r;o++)if(i=n[o],i&&i.func.call(i.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var t,r,a,u,d,c=this,f={};r=l+(+new Date).toString(32),u="onmouseenter"in document.documentElement,a="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,c.domLoaded=!1,c.events=f,c.bind=function(o,l,p,m){function h(t){e(i(t||j.event),g)}var g,v,y,b,_,x,C,j=window;if(o&&3!==o.nodeType&&8!==o.nodeType){for(o[r]?g=o[r]:(g=t++,o[r]=g,f[g]={}),m=m||o,l=l.split(" "),y=l.length;y--;)b=l[y],x=h,_=C=!1,"DOMContentLoaded"===b&&(b="ready"),c.domLoaded&&"ready"===b&&"complete"==o.readyState?p.call(m,i({type:b})):(u||(_=d[b],_&&(x=function(t){var n,o;if(n=t.currentTarget,o=t.relatedTarget,o&&n.contains)o=n.contains(o);else for(;o&&o!==n;)o=o.parentNode;o||(t=i(t||j.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=n,e(t,g))})),a||"focusin"!==b&&"focusout"!==b||(C=!0,_="focusin"===b?"focus":"blur",x=function(t){t=i(t||j.event),t.type="focus"===t.type?"focusin":"focusout",e(t,g)}),v=f[g][b],v?"ready"===b&&c.domLoaded?p({type:b}):v.push({func:p,scope:m}):(f[g][b]=v=[{func:p,scope:m}],v.fakeName=_,v.capture=C,v.nativeHandler=x,"ready"===b?s(o,x,c):n(o,_||b,x,C)));return o=v=0,p}},c.unbind=function(e,t,n){var i,s,a,l,u,d;if(!e||3===e.nodeType||8===e.nodeType)return c;if(i=e[r]){if(d=f[i],t){for(t=t.split(" "),a=t.length;a--;)if(u=t[a],s=d[u]){if(n)for(l=s.length;l--;)if(s[l].func===n){var p=s.nativeHandler,m=s.fakeName,h=s.capture;s=s.slice(0,l).concat(s.slice(l+1)),s.nativeHandler=p,s.fakeName=m,s.capture=h,d[u]=s}n&&0!==s.length||(delete d[u],o(e,s.fakeName||u,s.nativeHandler,s.capture))}}else{for(u in d)s=d[u],o(e,s.fakeName||u,s.nativeHandler,s.capture);d={}}for(u in d)return c;delete f[i];try{delete e[r]}catch(t){e[r]=null}}return c},c.fire=function(t,n,o){var s;if(!t||3===t.nodeType||8===t.nodeType)return c;o=i(null,o),o.type=n,o.target=t;do s=t[r],s&&e(o,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!o.isPropagationStopped());return c},c.clean=function(e){var t,n,o=c.unbind;if(!e||3===e.nodeType||8===e.nodeType)return c;if(e[r]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[r]&&o(e);return c},c.destroy=function(){f={}},c.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var l="mce-data-",u=/^(?:mouse|contextmenu)|click/,d={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},c=function(e){return e.isDefaultPrevented===p||e.isDefaultPrevented===f},f=function(){return!1},p=function(){return!0};return a.Event=new a,a.Event.bind(window,"ready",function(){}),a}),l("tinymce.core.dom.Sizzle",[],function(){function e(e,t,n,o){var r,i,s,a,l,d,f,p,m,h;if((t?t.ownerDocument||t:F)!==R&&I(t),t=t||R,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(M&&!o){if(r=ge.exec(e))if(s=r[1]){if(9===a){if(i=t.getElementById(s),!i||!i.parentNode)return n;if(i.id===s)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(s))&&L(t,i)&&i.id===s)return n.push(i),n}else{if(r[2])return X.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&_.getElementsByClassName)return X.apply(n,t.getElementsByClassName(s)),n}if(_.qsa&&(!D||!D.test(e))){if(p=f=B,m=t,h=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(d=E(e),(f=t.getAttribute("id"))?p=f.replace(ye,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=d.length;l--;)d[l]=p+c(d[l]);m=ve.test(e)&&u(t.parentNode)||t,h=d.join(",")}if(h)try{return X.apply(n,m.querySelectorAll(h)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return S(e.replace(se,"$1"),t,n,o)}function t(){function e(n,o){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=o}var t=[];return e}function n(e){return e[B]=!0,e}function o(e){var t=R.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),o=e.length;o--;)x.attrHandle[n[o]]=t}function i(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function a(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(n,o){for(var r,i=e([],n.length,t),s=i.length;s--;)n[r=i[s]]&&(n[r]=!(o[r]=n[r]))})})}function u(e){return e&&typeof e.getElementsByTagName!==G&&e}function d(){}function c(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function f(e,t,n){var o=t.dir,r=n&&"parentNode"===o,i=U++;return t.first?function(t,n,i){for(;t=t[o];)if(1===t.nodeType||r)return e(t,n,i)}:function(t,n,s){var a,l,u=[z,i];if(s){for(;t=t[o];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[o];)if(1===t.nodeType||r){if(l=t[B]||(t[B]={}),(a=l[o])&&a[0]===z&&a[1]===i)return u[2]=a[2];if(l[o]=u,u[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,o){for(var r=e.length;r--;)if(!e[r](t,n,o))return!1;return!0}:e[0]}function m(t,n,o){for(var r=0,i=n.length;r<i;r++)e(t,n[r],o);return o}function h(e,t,n,o,r){for(var i,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(i=e[a])&&(n&&!n(i,o,r)||(s.push(i),u&&t.push(a)));return s}function g(e,t,o,r,i,s){return r&&!r[B]&&(r=g(r)),i&&!i[B]&&(i=g(i,s)),n(function(n,s,a,l){var u,d,c,f=[],p=[],g=s.length,v=n||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?v:h(v,f,e,a,l),b=o?i||(n?e:g||r)?[]:s:y;if(o&&o(y,b,a,l),r)for(u=h(b,p),r(u,[],a,l),d=u.length;d--;)(c=u[d])&&(b[p[d]]=!(y[p[d]]=c));if(n){if(i||e){if(i){for(u=[],d=b.length;d--;)(c=b[d])&&u.push(y[d]=c);i(null,b=[],u,l)}for(d=b.length;d--;)(c=b[d])&&(u=i?ee.call(n,c):f[d])>-1&&(n[u]=!(s[u]=c))}}else b=h(b===s?b.splice(g,b.length):b),i?i(null,s,b,l):X.apply(s,b)})}function v(e){for(var t,n,o,r=e.length,i=x.relative[e[0].type],s=i||x.relative[" "],a=i?1:0,l=f(function(e){return e===t},s,!0),u=f(function(e){return ee.call(t,e)>-1},s,!0),d=[function(e,n,o){return!i&&(o||n!==k)||((t=n).nodeType?l(e,n,o):u(e,n,o))}];a<r;a++)if(n=x.relative[e[a].type])d=[f(p(d),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[B]){for(o=++a;o<r&&!x.relative[e[o].type];o++);return g(a>1&&p(d),a>1&&c(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(se,"$1"),n,a<o&&v(e.slice(a,o)),o<r&&v(e=e.slice(o)),o<r&&c(e))}d.push(n)}return p(d)}function y(t,o){var r=o.length>0,i=t.length>0,s=function(n,s,a,l,u){var d,c,f,p=0,m="0",g=n&&[],v=[],y=k,b=n||i&&x.find.TAG("*",u),_=z+=null==y?1:Math.random()||.1,C=b.length;for(u&&(k=s!==R&&s);m!==C&&null!=(d=b[m]);m++){if(i&&d){for(c=0;f=t[c++];)if(f(d,s,a)){l.push(d);break}u&&(z=_)}r&&((d=!f&&d)&&p--,n&&g.push(d))}if(p+=m,r&&m!==p){for(c=0;f=o[c++];)f(g,v,s,a);if(n){if(p>0)for(;m--;)g[m]||v[m]||(v[m]=J.call(l));v=h(v)}X.apply(l,v),u&&!n&&v.length>0&&p+o.length>1&&e.uniqueSort(l)}return u&&(z=_,k=y),g};return r?n(s):s}var b,_,x,C,j,E,w,S,k,T,P,I,R,N,M,D,O,A,L,B="sizzle"+-new Date,F=window.document,z=0,U=0,H=t(),W=t(),V=t(),q=function(e,t){return e===t&&(P=!0),0},G="undefined",K=1<<31,$={}.hasOwnProperty,Y=[],J=Y.pop,Z=Y.push,X=Y.push,Q=Y.slice,ee=Y.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+oe+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ie=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ae=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ie),ce=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var o="0x"+t-65536;return o!==o||n?t:o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)};try{X.apply(Y=Q.call(F.childNodes),F.childNodes),Y[F.childNodes.length].nodeType}catch(e){X={apply:Y.length?function(e,t){Z.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}_=e.support={},j=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=e.setDocument=function(e){function t(e){try{return e.top}catch(e){}return null}var n,r=e?e.ownerDocument||e:F,s=r.defaultView;return r!==R&&9===r.nodeType&&r.documentElement?(R=r,N=r.documentElement,M=!j(r),s&&s!==t(s)&&(s.addEventListener?s.addEventListener("unload",function(){I()},!1):s.attachEvent&&s.attachEvent("onunload",function(){I()})),_.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length;
}),_.getElementsByClassName=he.test(r.getElementsByClassName),_.getById=o(function(e){return N.appendChild(e).id=B,!r.getElementsByName||!r.getElementsByName(B).length}),_.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==G&&M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,_e);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,_e);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=_.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==G)return t.getElementsByTagName(e)}:function(e,t){var n,o=[],r=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},x.find.CLASS=_.getElementsByClassName&&function(e,t){if(M)return t.getElementsByClassName(e)},O=[],D=[],(_.qsa=he.test(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll(":checked").length||D.push(":checked")}),o(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(_.matchesSelector=he.test(A=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(e){_.disconnectedMatch=A.call(e,"div"),A.call(e,"[s!='']:x"),O.push("!=",ie)}),D=D.length&&new RegExp(D.join("|")),O=O.length&&new RegExp(O.join("|")),n=he.test(N.compareDocumentPosition),L=n||he.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=n?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===F&&L(F,e)?-1:t===r||t.ownerDocument===F&&L(F,t)?1:T?ee.call(T,e)-ee.call(T,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,o=0,s=e.parentNode,a=t.parentNode,l=[e],u=[t];if(!s||!a)return e===r?-1:t===r?1:s?-1:a?1:T?ee.call(T,e)-ee.call(T,t):0;if(s===a)return i(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?i(l[o],u[o]):l[o]===F?-1:u[o]===F?1:0},r):R},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==R&&I(t),n=n.replace(ue,"='$1']"),_.matchesSelector&&M&&(!O||!O.test(n))&&(!D||!D.test(n)))try{var o=A.call(t,n);if(o||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(e){}return e(n,R,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==R&&I(e),L(e,t)},e.attr=function(e,t){(e.ownerDocument||e)!==R&&I(e);var n=x.attrHandle[t.toLowerCase()],o=n&&$.call(x.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==o?o:_.attributes||!M?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],o=0,r=0;if(P=!_.detectDuplicates,T=!_.sortStable&&e.slice(0),e.sort(q),P){for(;t=e[r++];)t===e[r]&&(o=n.push(r));for(;o--;)e.splice(n[o],1)}return T=null,e},C=e.getText=function(e){var t,n="",o=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[o++];)n+=C(t);return n},x=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(be,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(t,n,o){return function(r){var i=e.attr(r,t);return null==i?"!="===n:!n||(i+="","="===n?i===o:"!="===n?i!==o:"^="===n?o&&0===i.indexOf(o):"*="===n?o&&i.indexOf(o)>-1:"$="===n?o&&i.slice(-o.length)===o:"~="===n?(" "+i+" ").indexOf(o)>-1:"|="===n&&(i===o||i.slice(0,o.length+1)===o+"-"))}},CHILD:function(e,t,n,o,r){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===o&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,d,c,f,p,m,h=i!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(i){for(;h;){for(c=t;c=c[h];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;m=h="only"===e&&!m&&"nextSibling"}return!0}if(m=[s?g.firstChild:g.lastChild],s&&y){for(d=g[B]||(g[B]={}),u=d[e]||[],p=u[0]===z&&u[1],f=u[0]===z&&u[2],c=p&&g.childNodes[p];c=++p&&c&&c[h]||(f=p=0)||m.pop();)if(1===c.nodeType&&++f&&c===t){d[e]=[z,p,f];break}}else if(y&&(u=(t[B]||(t[B]={}))[e])&&u[0]===z)f=u[1];else for(;(c=++p&&c&&c[h]||(f=p=0)||m.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++f||(y&&((c[B]||(c[B]={}))[e]=[z,f]),c!==t)););return f-=r,f===o||f%o===0&&f/o>=0}}},PSEUDO:function(t,o){var r,i=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[B]?i(o):i.length>1?(r=[t,t,"",o],x.setFilters.hasOwnProperty(t.toLowerCase())?n(function(e,t){for(var n,r=i(e,o),s=r.length;s--;)n=ee.call(e,r[s]),e[n]=!(t[n]=r[s])}):function(e){return i(e,0,r)}):i}},pseudos:{not:n(function(e){var t=[],o=[],r=w(e.replace(se,"$1"));return r[B]?n(function(e,t,n,o){for(var i,s=r(e,null,o,[]),a=e.length;a--;)(i=s[a])&&(e[a]=!(t[a]=i))}):function(e,n,i){return t[0]=e,r(t,null,i,o),!o.pop()}}),has:n(function(t){return function(n){return e(t,n).length>0}}),contains:n(function(e){return e=e.replace(be,_e),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:n(function(t){return ce.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(be,_e).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===N},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var o=n<0?n+t:n;--o>=0;)e.push(o);return e}),gt:l(function(e,t,n){for(var o=n<0?n+t:n;++o<t;)e.push(o);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=a(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,E=e.tokenize=function(t,n){var o,r,i,s,a,l,u,d=W[t+" "];if(d)return n?0:d.slice(0);for(a=t,l=[],u=x.preFilter;a;){o&&!(r=ae.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),o=!1,(r=le.exec(a))&&(o=r.shift(),i.push({value:o,type:r[0].replace(se," ")}),a=a.slice(o.length));for(s in x.filter)!(r=fe[s].exec(a))||u[s]&&!(r=u[s](r))||(o=r.shift(),i.push({value:o,type:s,matches:r}),a=a.slice(o.length));if(!o)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},w=e.compile=function(e,t){var n,o=[],r=[],i=V[e+" "];if(!i){for(t||(t=E(e)),n=t.length;n--;)i=v(t[n]),i[B]?o.push(i):r.push(i);i=V(e,y(r,o)),i.selector=e}return i},S=e.select=function(e,t,n,o){var r,i,s,a,l,d="function"==typeof e&&e,f=!o&&E(e=d.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&_.getById&&9===t.nodeType&&M&&x.relative[i[1].type]){if(t=(x.find.ID(s.matches[0].replace(be,_e),t)||[])[0],!t)return n;d&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(r=fe.needsContext.test(e)?0:i.length;r--&&(s=i[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(o=l(s.matches[0].replace(be,_e),ve.test(i[0].type)&&u(t.parentNode)||t))){if(i.splice(r,1),e=o.length&&c(i),!e)return X.apply(n,o),n;break}}return(d||w(e,f))(o,t,!M,n,ve.test(e)&&u(t.parentNode)||t),n},_.sortStable=B.split("").sort(q).join("")===B,_.detectDuplicates=!!P,I(),_.sortDetached=o(function(e){return 1&e.compareDocumentPosition(R.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var o;if(!n)return e[t]===!0?t.toLowerCase():(o=e.getAttributeNode(t))&&o.specified?o.value:null}),e}),l("tinymce.core.util.Arr",[],function(){function e(e){var t,n,o=e;if(!u(e))for(o=[],t=0,n=e.length;t<n;t++)o[t]=e[t];return o}function t(e,t,n){var o,r;if(!e)return 0;if(n=n||e,void 0!==e.length){for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&t.call(n,e[o],o,e)===!1)return 0;return 1}function n(e,n){var o=[];return t(e,function(t,r){o.push(n(t,r,e))}),o}function o(e,n){var o=[];return t(e,function(t,r){n&&!n(t,r,e)||o.push(t)}),o}function r(e,t){var n,o;if(e)for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function i(e,t,n,o){var r=0;for(arguments.length<3&&(n=e[0]);r<e.length;r++)n=t.call(o,n,e[r],r);return n}function s(e,t,n){var o,r;for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1}function a(e,t,n){var o=s(e,t,n);if(o!==-1)return e[o]}function l(e){return e[e.length-1]}var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:u,toArray:e,each:t,map:n,filter:o,indexOf:r,reduce:i,findIndex:s,find:a,last:l}}),l("tinymce.core.util.Tools",["tinymce.core.Env","tinymce.core.util.Arr"],function(e,t){function n(e){return null===e||void 0===e?"":(""+e).replace(p,"")}function o(e,n){return n?!("array"!=n||!t.isArray(e))||typeof e==n:void 0!==e}function r(e,t,n){var o;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t,n){var o,r,i,s,a,l=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],r=l.createNS(e[3].replace(/\.\w+$/,""),n),!r[i]){if("static"==e[2])return r[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],r[i]));t[i]||(t[i]=function(){},u=1),r[i]=t[i],l.extend(r[i].prototype,t),e[5]&&(o=l.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],a=r[i],u?r[i]=function(){return o[s].apply(this,arguments)}:r[i]=function(){return this.parent=o[s],a.apply(this,arguments)},r[i].prototype[i]=r[i],l.each(o,function(e,t){r[i].prototype[t]=o[t]}),l.each(t,function(e,t){o[t]?r[i].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=i&&(r[i].prototype[t]=e)})),l.each(t.static,function(e,t){r[i][t]=e})}}function a(e,t){var n,o,r,i,s=arguments;for(n=1,o=s.length;n<o;n++){t=s[n];for(r in t)t.hasOwnProperty(r)&&(i=t[r],void 0!==i&&(e[r]=i))}return e}function l(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),t.each(e,function(e,t){return n.call(r,e,t,o)!==!1&&void l(e,n,o,r)}))}function u(e,t){var n,o;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)o=e[n],t[o]||(t[o]={}),t=t[o];return t}function d(e,t){var n,o;for(t=t||window,e=e.split("."),n=0,o=e.length;n<o&&(t=t[e[n]],t);n++);return t}function c(e,r){return!e||o(e,"array")?e:t.map(e.split(r||","),n)}function f(t){var n=e.cacheSuffix;return n&&(t+=(t.indexOf("?")===-1?"?":"&")+n),t}var p=/^\s*|\s*$/g;return{trim:n,isArray:t.isArray,is:o,toArray:t.toArray,makeMap:r,each:t.each,map:t.map,grep:t.filter,inArray:t.indexOf,hasOwn:i,extend:a,create:s,walk:l,createNS:u,resolve:d,explode:c,_addCacheSuffix:f}}),l("tinymce.core.dom.DomQuery",["tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.Env"],function(e,t,n,o){function r(e){return"undefined"!=typeof e}function i(e){return"string"==typeof e}function s(e){return e&&e==e.window}function a(e,t){var n,o,r;for(t=t||C,r=t.createElement("div"),n=t.createDocumentFragment(),r.innerHTML=e;o=r.firstChild;)n.appendChild(o);return n}function l(e,t,n,o){var r;if(i(t))t=a(t,g(e[0]));else if(t.length&&!t.nodeType){if(t=c.makeArray(t),o)for(r=t.length-1;r>=0;r--)l(e,t[r],n,o);else for(r=0;r<t.length;r++)l(e,t[r],n,o);return e}if(t.nodeType)for(r=e.length;r--;)n.call(e[r],t);return e}function u(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1}function d(e,t,n){var o,r;return t=c(t)[0],e.each(function(){var e=this;n&&o==e.parentNode?r.appendChild(e):(o=e.parentNode,r=t.cloneNode(!1),e.parentNode.insertBefore(r,e),r.appendChild(e))}),e}function c(e,t){return new c.fn.init(e,t)}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e){return null===e||e===x?"":(""+e).replace(D,"")}function m(e,t){var n,o,r,i,s;if(e)if(n=e.length,n===i){for(o in e)if(e.hasOwnProperty(o)&&(s=e[o],t.call(s,o,s)===!1))break}else for(r=0;r<n&&(s=e[r],t.call(s,r,s)!==!1);r++);return e}function h(e,t){var n=[];return m(e,function(e,o){t(o,e)&&n.push(o)}),n}function g(e){return e?9==e.nodeType?e:e.ownerDocument:C}function v(e,t,n){var o=[],r=e[t];for("string"!=typeof n&&n instanceof c&&(n=n[0]);r&&9!==r.nodeType;){if(void 0!==n){if(r===n)break;if("string"==typeof n&&c(r).is(n))break}1===r.nodeType&&o.push(r),r=r[t]}return o}function y(e,t,n,o){var r=[];for(o instanceof c&&(o=o[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==o){if(e===o)break;if("string"==typeof o&&c(e).is(o))break}r.push(e)}return r}function b(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function _(e,t,n){m(n,function(n,o){e[n]=e[n]||{},e[n][t]=o})}var x,C=document,j=Array.prototype.push,E=Array.prototype.slice,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,S=e.Event,k=n.makeMap("children,contents,next,prev"),T=n.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),P=n.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),I={for:"htmlFor",class:"className",readonly:"readOnly"},R={float:"cssFloat"},N={},M={},D=/^\s*|\s*$/g;return c.fn=c.prototype={constructor:c,selector:"",context:null,length:0,init:function(e,t){var n,o,r=this;if(!e)return r;if(e.nodeType)return r.context=r[0]=e,r.length=1,r;if(t&&t.nodeType)r.context=t;else{if(t)return c(e).attr(t);r.context=t=document}if(i(e)){if(r.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:w.exec(e),!n)return c(t).find(e);if(n[1])for(o=a(e,g(t)).firstChild;o;)j.call(r,o),o=o.nextSibling;else{if(o=g(t).getElementById(n[2]),!o)return r;if(o.id!==n[2])return r.find(e);r.length=1,r[0]=o}}else this.add(e,!1);return r},toArray:function(){return n.toArray(this)},add:function(e,t){var n,o,r=this;if(i(e))return r.add(c(e));if(t!==!1)for(n=c.unique(r.toArray().concat(c.makeArray(e))),r.length=n.length,o=0;o<n.length;o++)r[o]=n[o];else j.apply(r,c.makeArray(e));return r},attr:function(e,t){var n,o=this;if("object"==typeof e)m(e,function(e,t){o.attr(e,t)});else{if(!r(t)){if(o[0]&&1===o[0].nodeType){if(n=N[e],n&&n.get)return n.get(o[0],e);if(P[e])return o.prop(e)?e:x;t=o[0].getAttribute(e,2),null===t&&(t=x)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=N[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return o},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=I[e]||e,"object"==typeof e)m(e,function(e,t){n.prop(e,t)});else{if(!r(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function o(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i,s,a=this;if("object"==typeof e)m(e,function(e,t){a.css(e,t)});else if(r(t))e=n(e),"number"!=typeof t||T[e]||(t+="px"),a.each(function(){var n=this.style;if(s=M[e],s&&s.set)return void s.set(this,t);try{this.style[R[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(o(e)):n.removeAttribute(e))});else{if(i=a[0],s=M[e],s&&s.get)return s.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(o(e))}catch(e){return x}else if(i.currentStyle)return i.currentStyle[n(e)]}return a},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],S.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(r(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(o){c(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(r(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return c(e).append(this),this},prependTo:function(e){return c(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return d(this,e)},wrapAll:function(e){return d(this,e,!0)},wrapInner:function(e){return this.each(function(){c(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),c(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(e.indexOf(" ")!==-1?m(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,o){var r,i;i=u(o,e),i!==t&&(r=o.className,i?o.className=p((" "+r+" ").replace(" "+e+" "," ")):o.className+=r?" "+e:e)}),n)},hasClass:function(e){return u(this[0],e)},each:function(e){return m(this,e)},on:function(e,t){return this.each(function(){S.bind(this,e,t)})},off:function(e,t){return this.each(function(){S.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?S.fire(this,e.type,e):S.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new c(E.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,o=[];for(t=0,n=this.length;t<n;t++)c.find(e,this[t],o);return c(o)},filter:function(e){return c("function"==typeof e?h(this.toArray(),function(t,n){return e(n,t)}):c.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof c&&(e=e[0]),this.each(function(n,o){for(;o;){if("string"==typeof e&&c(o).is(e)){t.push(o);break}if(o==e){t.push(o);break}o=o.parentNode}}),c(t)},offset:function(e){var t,n,o,r,i=0,s=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,o=n.documentElement,t.getBoundingClientRect&&(r=t.getBoundingClientRect(),i=r.left+(o.scrollLeft||n.body.scrollLeft)-o.clientLeft,s=r.top+(o.scrollTop||n.body.scrollTop)-o.clientTop)),{left:i,top:s})},push:j,sort:[].sort,splice:[].splice},n.extend(c,{extend:n.extend,makeArray:function(e){return s(e)||e.nodeType?[e]:n.toArray(e)},inArray:f,isArray:n.isArray,each:m,trim:p,grep:h,find:t,expr:t.selectors,unique:t.uniqueSort,text:t.getText,contains:t.contains,filter:function(e,t,n){var o=t.length;for(n&&(e=":not("+e+")");o--;)1!=t[o].nodeType&&t.splice(o,1);return t=1===t.length?c.find.matchesSelector(t[0],e)?[t[0]]:[]:c.find.matches(e,t)}}),m({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},next:function(e){return b(e,"nextSibling",1)},prev:function(e){return b(e,"previousSibling",1)},children:function(e){return y(e.firstChild,"nextSibling",1)},contents:function(e){return n.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){c.fn[e]=function(n){var o=this,r=[];return o.each(function(){var e=t.call(r,this,n,r);e&&(c.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(k[e]||(r=c.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=c(r),n?r.filter(n):r}}),m({parentsUntil:function(e,t){return v(e,"parentNode",t)},nextUntil:function(e,t){return y(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return y(e,"previousSibling",1,t).slice(1)}},function(e,t){c.fn[e]=function(n,o){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(c.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=c.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=c(i),o?i.filter(o):i}}),c.fn.is=function(e){return!!e&&this.filter(e).length>0},c.fn.init.prototype=c.fn,c.overrideDefaults=function(e){function t(o,r){return n=n||e(),0===arguments.length&&(o=n.element),r||(r=n.context),new t.fn.init(o,r)}var n;return c.extend(t,this),t},o.ie&&o.ie<8&&(_(N,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?x:t},size:function(e){var t=e.size;return 20===t?x:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?x:t}}),_(N,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),o.ie&&o.ie<9&&(R.float="styleFloat",_(M,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),c.attrHooks=N,c.cssHooks=M,c}),l("tinymce.core.html.Styles",[],function(){return function(e,t){function n(e,t,n,o){function r(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(o)}var o,r,i,s,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,c={},f="\ufeff";for(e=e||{},t&&(i=t.getValidStyles(),s=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+f).split(" "),o=0;o<r.length;o++)c[r[o]]=f+o,c[f+o]=r[o];return{toHex:function(e){return e.replace(a,n)},parse:function(t){function r(e,t,n){var r,i,s,a;if(r=C[e+"-top"+t],r&&(i=C[e+"-right"+t],i&&(s=C[e+"-bottom"+t],s&&(a=C[e+"-left"+t])))){var l=[r,i,s,a];for(o=l.length-1;o--&&l[o]===l[o+1];);o>-1&&n||(C[e+t]=o==-1?l[0]:l.join(" "),delete C[e+"-top"+t],delete C[e+"-right"+t],delete C[e+"-bottom"+t],delete C[e+"-left"+t])}}function i(e){var t,n=C[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return C[e]=n[0],!0}}function s(e,t,n,o){i(t)&&i(n)&&i(o)&&(C[e]=C[t]+" "+C[n]+" "+C[o],delete C[t],delete C[n],delete C[o])}function p(e){return x=!0,c[e]}function m(e,t){return x&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function h(e){return String.fromCharCode(parseInt(e.slice(1),16))}function g(e){return e.replace(/\\[0-9a-f]+/gi,h)}function v(t,n,o,r,i,s){if(i=i||s)return i=m(i),"'"+i.replace(/\'/g,"\\'")+"'";if(n=m(n||o||r),!e.allow_script_urls){var a=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(a))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(a))return""}return j&&(n=j.call(E,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var y,b,_,x,C={},j=e.url_converter,E=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,p).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,p)});y=u.exec(t);)if(u.lastIndex=y.index+y[0].length,b=y[1].replace(d,"").toLowerCase(),_=y[2].replace(d,""),b&&_){if(b=g(b),_=g(_),b.indexOf(f)!==-1||b.indexOf('"')!==-1)continue;if(!e.allow_script_urls&&("behavior"==b||/expression\s*\(|\/\*|\*\//.test(_)))continue;"font-weight"===b&&"700"===_?_="bold":"color"!==b&&"background-color"!==b||(_=_.toLowerCase()),_=_.replace(a,n),_=_.replace(l,v),C[b]=x?m(_,!0):_}r("border","",!0),r("border","-width"),r("border","-color"),r("border","-style"),r("padding",""),r("margin",""),s("border","border-width","border-style","border-color"),"medium none"===C.border&&delete C.border,"none"===C["border-image"]&&delete C["border-image"]}return C},serialize:function(e,t){function n(t){var n,o,r,s;if(n=i[t])for(o=0,r=n.length;o<r;o++)t=n[o],s=e[t],s&&(l+=(l.length>0?" ":"")+t+": "+s+";")}function o(e,t){var n;return n=s["*"],(!n||!n[e])&&(n=s[t],!n||!n[e])}var r,a,l="";if(t&&i)n("*"),n(t);else for(r in e)a=e[r],!a||s&&!o(r,t)||(l+=(l.length>0?" ":"")+r+": "+a+";");return l}}}}),l("tinymce.core.dom.TreeWalker",[],function(){return function(e,t){function n(e,n,o,r){var i,s;if(e){if(!r&&e[n])return e[n];if(e!=t){if(i=e[o])return i;for(s=e.parentNode;s&&s!=t;s=s.parentNode)if(i=s[o])return i}}}function o(e,n,o,r){var i,s,a;if(e){if(i=e[o],t&&i===t)return;if(i){if(!r)for(a=i[n];a;a=a[n])if(!a[n])return a;return i}if(s=e.parentNode,s&&s!==t)return s}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)},this.prev2=function(e){return r=o(r,"lastChild","previousSibling",e)}}}),l("tinymce.core.html.Entities",["tinymce.core.util.Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,o,i,s={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),r[o]||(i="&"+e[n+1]+";",s[o]=i,s[i]=o);return s}}var o,r,i,s=e.makeMap,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\"\']/g,d=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},i={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?a:l,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(u,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||o,e.replace(t?a:l,function(e){return r[e]||n[e]||e})},getEncodeFunc:function(e,t){function i(e,n){return e.replace(n?a:l,function(e){return void 0!==r[e]?r[e]:void 0!==t[e]?t[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";";
})}function u(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||o,e=s(e.replace(/\+/g,",")),e.named&&e.numeric?i:e.named?t?u:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(d,function(e,n){return n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):c[n]||String.fromCharCode(n)):i[e]||o[e]||t(e)})}};return f}),l("tinymce.core.dom.Range",["tinymce.core.util.Tools"],function(e){function t(n){function o(){return O.createDocumentFragment()}function r(e,t){j(F,e,t)}function i(e,t){j(z,e,t)}function s(e){r(e.parentNode,G(e))}function a(e){r(e.parentNode,G(e)+1)}function l(e){i(e.parentNode,G(e))}function u(e){i(e.parentNode,G(e)+1)}function d(e){e?(D[W]=D[H],D[V]=D[U]):(D[H]=D[W],D[U]=D[V]),D.collapsed=F}function c(e){s(e),u(e)}function f(e){r(e,0),i(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function p(e,t){var n=D[H],o=D[U],r=D[W],i=D[V],s=t.startContainer,a=t.startOffset,l=t.endContainer,u=t.endOffset;return 0===e?C(n,o,s,a):1===e?C(r,i,s,a):2===e?C(r,i,l,u):3===e?C(n,o,l,u):void 0}function m(){E(B)}function h(){return E(A)}function g(){return E(L)}function v(e){var t,o,r=this[H],i=this[U];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(o=r.childNodes[i]),o?r.insertBefore(e,o):3==r.nodeType?n.insertAfter(e,r):r.appendChild(e)):i?i>=r.nodeValue.length?n.insertAfter(e,r):(t=r.splitText(i),r.parentNode.insertBefore(e,t)):r.parentNode.insertBefore(e,r)}function y(e){var t=D.extractContents();D.insertNode(e),e.appendChild(t),D.selectNode(e)}function b(){return q(new t(n),{startContainer:D[H],startOffset:D[U],endContainer:D[W],endOffset:D[V],collapsed:D.collapsed,commonAncestorContainer:D.commonAncestorContainer})}function _(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function x(){return D[H]==D[W]&&D[U]==D[V]}function C(e,t,o,r){var i,s,a,l,u,d;if(e==o)return t==r?0:t<r?-1:1;for(i=o;i&&i.parentNode!=e;)i=i.parentNode;if(i){for(s=0,a=e.firstChild;a!=i&&s<t;)s++,a=a.nextSibling;return t<=s?-1:1}for(i=e;i&&i.parentNode!=o;)i=i.parentNode;if(i){for(s=0,a=o.firstChild;a!=i&&s<r;)s++,a=a.nextSibling;return s<r?-1:1}for(l=n.findCommonAncestor(e,o),u=e;u&&u.parentNode!=l;)u=u.parentNode;for(u||(u=l),d=o;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),u==d)return 0;for(a=l.firstChild;a;){if(a==u)return-1;if(a==d)return 1;a=a.nextSibling}}function j(e,t,o){var r,i;for(e?(D[H]=t,D[U]=o):(D[W]=t,D[V]=o),r=D[W];r.parentNode;)r=r.parentNode;for(i=D[H];i.parentNode;)i=i.parentNode;i==r?C(D[H],D[U],D[W],D[V])>0&&D.collapse(e):D.collapse(e),D.collapsed=x(),D.commonAncestorContainer=n.findCommonAncestor(D[H],D[W])}function E(e){var t,n,o,r,i,s,a,l=0,u=0;if(D[H]==D[W])return w(e);for(t=D[W],n=t.parentNode;n;t=n,n=n.parentNode){if(n==D[H])return S(t,e);++l}for(t=D[H],n=t.parentNode;n;t=n,n=n.parentNode){if(n==D[W])return k(t,e);++u}for(o=u-l,r=D[H];o>0;)r=r.parentNode,o--;for(i=D[W];o<0;)i=i.parentNode,o++;for(s=r.parentNode,a=i.parentNode;s!=a;s=s.parentNode,a=a.parentNode)r=s,i=a;return T(r,i,e)}function w(e){var t,n,r,i,s,a,l,u,d;if(e!=B&&(t=o()),D[U]==D[V])return t;if(3==D[H].nodeType){if(n=D[H].nodeValue,r=n.substring(D[U],D[V]),e!=L&&(i=D[H],u=D[U],d=D[V]-D[U],0===u&&d>=i.nodeValue.length-1?i.parentNode.removeChild(i):i.deleteData(u,d),D.collapse(F)),e==B)return;return r.length>0&&t.appendChild(O.createTextNode(r)),t}for(i=_(D[H],D[U]),s=D[V]-D[U];i&&s>0;)a=i.nextSibling,l=N(i,e),t&&t.appendChild(l),--s,i=a;return e!=L&&D.collapse(F),t}function S(e,t){var n,r,i,s,a,l;if(t!=B&&(n=o()),r=P(e,t),n&&n.appendChild(r),i=G(e),s=i-D[U],s<=0)return t!=L&&(D.setEndBefore(e),D.collapse(z)),n;for(r=e.previousSibling;s>0;)a=r.previousSibling,l=N(r,t),n&&n.insertBefore(l,n.firstChild),--s,r=a;return t!=L&&(D.setEndBefore(e),D.collapse(z)),n}function k(e,t){var n,r,i,s,a,l;for(t!=B&&(n=o()),i=I(e,t),n&&n.appendChild(i),r=G(e),++r,s=D[V]-r,i=e.nextSibling;i&&s>0;)a=i.nextSibling,l=N(i,t),n&&n.appendChild(l),--s,i=a;return t!=L&&(D.setStartAfter(e),D.collapse(F)),n}function T(e,t,n){var r,i,s,a,l,u,d;for(n!=B&&(i=o()),r=I(e,n),i&&i.appendChild(r),s=G(e),a=G(t),++s,l=a-s,u=e.nextSibling;l>0;)d=u.nextSibling,r=N(u,n),i&&i.appendChild(r),u=d,--l;return r=P(t,n),i&&i.appendChild(r),n!=L&&(D.setStartAfter(e),D.collapse(F)),i}function P(e,t){var n,o,r,i,s,a=_(D[W],D[V]-1),l=a!=D[W];if(a==e)return R(a,l,z,t);for(n=a.parentNode,o=R(n,z,z,t);n;){for(;a;)r=a.previousSibling,i=R(a,l,z,t),t!=B&&o.insertBefore(i,o.firstChild),l=F,a=r;if(n==e)return o;a=n.previousSibling,n=n.parentNode,s=R(n,z,z,t),t!=B&&s.appendChild(o),o=s}}function I(e,t){var n,o,r,i,s,a=_(D[H],D[U]),l=a!=D[H];if(a==e)return R(a,l,F,t);for(n=a.parentNode,o=R(n,z,F,t);n;){for(;a;)r=a.nextSibling,i=R(a,l,F,t),t!=B&&o.appendChild(i),l=F,a=r;if(n==e)return o;a=n.nextSibling,n=n.parentNode,s=R(n,z,F,t),t!=B&&s.appendChild(o),o=s}}function R(e,t,o,r){var i,s,a,l,u;if(t)return N(e,r);if(3==e.nodeType){if(i=e.nodeValue,o?(l=D[U],s=i.substring(l),a=i.substring(0,l)):(l=D[V],s=i.substring(0,l),a=i.substring(l)),r!=L&&(e.nodeValue=a),r==B)return;return u=n.clone(e,z),u.nodeValue=s,u}if(r!=B)return n.clone(e,z)}function N(e,t){return t!=B?t==L?n.clone(e,F):e:void e.parentNode.removeChild(e)}function M(){return n.create("body",null,g()).outerText}var D=this,O=n.doc,A=0,L=1,B=2,F=!0,z=!1,U="startOffset",H="startContainer",W="endContainer",V="endOffset",q=e.extend,G=n.nodeIndex;return q(D,{startContainer:O,startOffset:0,endContainer:O,endOffset:0,collapsed:F,commonAncestorContainer:O,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:i,setStartBefore:s,setStartAfter:a,setEndBefore:l,setEndAfter:u,collapse:d,selectNode:c,selectNodeContents:f,compareBoundaryPoints:p,deleteContents:m,extractContents:h,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:M}),D}return t.prototype.toString=function(){return this.toStringIE()},t}),u("global!Array",Array),u("global!Error",Error),l("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},o=function(e,t){return function(){return e(t.apply(null,arguments))}},r=function(e){return function(){return e}},i=function(e){return e},s=function(e,t){return e===t},a=function(t){for(var n=new e(arguments.length-1),o=1;o<arguments.length;o++)n[o-1]=arguments[o];return function(){for(var o=new e(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];var i=n.concat(o);return t.apply(null,i)}},l=function(e){return function(){return!e.apply(null,arguments)}},u=function(e){return function(){throw new t(e)}},d=function(e){return e()},c=function(e){e()},f=r(!1),p=r(!0);return{noop:n,compose:o,constant:r,identity:i,tripleEquals:s,curry:a,not:l,die:u,apply:d,call:c,never:f,always:p}}),u("global!Object",Object),l("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,o=e.always,r=function(){return i},i=function(){var i=function(e){return e.isNone()},s=function(e){return e()},a=function(e){return e},l=function(){},u={fold:function(e,t){return e()},is:n,isSome:n,isNone:o,getOr:a,getOrThunk:s,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:a,orThunk:s,map:r,ap:r,each:l,bind:r,flatten:r,exists:n,forall:o,filter:r,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(u),u}(),s=function(e){var t=function(){return e},a=function(){return d},l=function(t){return s(t(e))},u=function(t){return t(e)},d={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:o,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:a,orThunk:a,map:l,ap:function(t){return t.fold(r,function(t){return s(t(e))})},each:function(t){t(e)},bind:u,flatten:t,exists:u,forall:u,filter:function(t){return t(e)?d:i},equals:function(t){return t.is(e)},equals_:function(t,o){return t.fold(n,function(t){return o(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return d},a=function(e){return null===e||void 0===e?i:s(e)};return{some:s,none:r,from:a}}),u("global!String",String),l("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,o){var r=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},o=function(e,t){return _(e,t)};return void 0===e?o:n}(),i=function(t,n){var o=r(t,n);return o===-1?e.none():e.some(o)},s=function(e,t){return r(e,t)>-1},a=function(e,t){return b(e,t).isSome()},l=function(e,t){for(var n=[],o=0;o<e;o++)n.push(t(o));return n},u=function(e,t){for(var n=[],o=0;o<e.length;o+=t){var r=e.slice(o,o+t);n.push(r)}return n},d=function(e,n){for(var o=e.length,r=new t(o),i=0;i<o;i++){var s=e[i];r[i]=n(s,i,e)}return r},c=function(e,t){for(var n=0,o=e.length;n<o;n++){var r=e[n];t(r,n,e)}},f=function(e,t){for(var n=e.length-1;n>=0;n--){var o=e[n];t(o,n,e)}},p=function(e,t){for(var n=[],o=[],r=0,i=e.length;r<i;r++){var s=e[r],a=t(s,r,e)?n:o;a.push(s)}return{pass:n,fail:o}},m=function(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];t(i,o,e)&&n.push(i)}return n},h=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),o=[],r=[],i=0,s=e.length;i<s;i++){var a=e[i],l=t(a);l!==n&&(o.push(r),r=[]),n=l,r.push(a)}return 0!==r.length&&o.push(r),o},g=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return c(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(n(i,o,t))return e.some(i)}return e.none()},b=function(t,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(n(i,o,t))return e.some(o)}return e.none()},_=function(e,t){for(var n=0,o=e.length;n<o;++n)if(e[n]===t)return n;return-1},x=t.prototype.push,C=function(e){for(var o=[],r=0,i=e.length;r<i;++r){if(!t.prototype.isPrototypeOf(e[r]))throw new n("Arr.flatten item "+r+" was not an array, input: "+e);x.apply(o,e[r])}return o},j=function(e,t){var n=d(e,t);return C(n)},E=function(e,t){for(var n=0,o=e.length;n<o;++n){var r=e[n];if(t(r,n,e)!==!0)return!1}return!0},w=function(e,t){return e.length===t.length&&E(e,function(e,n){return e===t[n]})},S=t.prototype.slice,k=function(e){var t=S.call(e,0);return t.reverse(),t},T=function(e,t){return m(e,function(e){return!s(t,e)})},P=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r];n[o(s)]=t(s,r)}return n},I=function(e){return[e]},R=function(e,t){var n=S.call(e,0);return n.sort(t),n};return{map:d,each:c,eachr:f,partition:p,filter:m,groupBy:h,indexOf:i,foldr:g,foldl:v,find:y,findIndex:b,flatten:C,bind:j,forall:E,exists:a,contains:s,equal:w,reverse:k,chunk:u,difference:T,mapToObject:P,pure:I,sort:R,range:l}}),u("global!setTimeout",setTimeout),l("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(e,t,n){var o=function(r){var i=t.none(),s=[],a=function(e){return o(function(t){l(function(n){t(e(n))})})},l=function(e){d()?f(e):s.push(e)},u=function(e){i=t.some(e),c(s),s=[]},d=function(){return i.isSome()},c=function(t){e.each(t,f)},f=function(e){i.each(function(t){n(function(){e(t)},0)})};return r(u),{get:l,map:a,isReady:d}},r=function(e){return o(function(t){t(e)})};return{nu:o,pure:r}}),l("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(e,t){var n=function(n){return function(){var o=e.prototype.slice.call(arguments),r=this;t(function(){n.apply(r,o)},0)}};return{bounce:n}}),l("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(e,t){var n=function(o){var r=function(e){o(t.bounce(e))},i=function(e){return n(function(t){r(function(n){var o=e(n);t(o)})})},s=function(e){return n(function(t){r(function(n){e(n).get(t)})})},a=function(e){return n(function(t){r(function(n){e.get(t)})})},l=function(){return e.nu(r)};return{map:i,bind:s,anonBind:a,toLazy:l,get:r}},o=function(e){return n(function(t){t(e)})};return{nu:n,pure:o}}),l("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(e){var t=function(t,n){return n(function(n){var o=[],r=0,i=function(e){return function(i){o[e]=i,r++,r>=t.length&&n(o)}};0===t.length?n([]):e.each(t,function(e,t){e.get(i(t))})})};return{par:t}}),l("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(e,t,n){var o=function(e){return n.par(e,t.nu)},r=function(t,n){var r=e.map(t,n);return o(r)},i=function(e,t){return function(n){return t(n).bind(e)}};return{par:o,mapM:r,compose:i}}),l("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(o){var r=function(e){return o===e},i=function(e){return n(o)},s=function(e){return n(o)},a=function(e){return n(e(o))},l=function(e){e(o)},u=function(e){return e(o)},d=function(e,t){return t(o)},c=function(e){return e(o)},f=function(e){return e(o)},p=function(){return t.some(o)};return{is:r,isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(o),getOrThunk:e.constant(o),getOrDie:e.constant(o),or:i,orThunk:s,fold:d,map:a,each:l,bind:u,exists:c,forall:f,toOption:p}},o=function(n){var r=function(e){return e()},i=function(){return e.die(n)()},s=function(e){return e},a=function(e){return e()},l=function(e){return o(n)},u=function(e){return o(n)},d=function(e,t){return e(n)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:r,getOrDie:i,or:s,orThunk:a,fold:d,map:l,each:e.noop,bind:u,exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:o}}),l("tinymce.core.dom.StyleSheetLoader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){"use strict";return function(a,l){function u(e){a.getElementsByTagName("head")[0].appendChild(e)}function d(e,t,n){function o(){for(var e=b.passed,t=e.length;t--;)e[t]();b.status=2,b.passed=[],b.failed=[]}function r(){for(var e=b.failed,t=e.length;t--;)e[t]();b.status=3,b.passed=[],b.failed=[]}function l(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function d(e,t){e()||((new Date).getTime()-y<c?i.setTimeout(t):r())}function m(){d(function(){for(var e,t,n=a.styleSheets,r=n.length;r--;)if(e=n[r],t=e.ownerNode?e.ownerNode:e.owningElement,t&&t.id===g.id)return o(),!0},m)}function h(){d(function(){try{var e=v.sheet.cssRules;return o(),!!e}catch(e){}},h)}var g,v,y,b;if(e=s._addCacheSuffix(e),p[e]?b=p[e]:(b={passed:[],failed:[]},p[e]=b),t&&b.passed.push(t),n&&b.failed.push(n),1!=b.status){if(2==b.status)return void o();if(3==b.status)return void r();if(b.status=1,g=a.createElement("link"),g.rel="stylesheet",g.type="text/css",g.id="u"+f++,g.async=!1,g.defer=!1,y=(new Date).getTime(),"onload"in g&&!l())g.onload=m,g.onerror=r;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=a.createElement("style"),v.textContent='@import "'+e+'"',h(),void u(v);m()}u(g),g.href=e}}var c,f=0,p={};l=l||{},c=l.maxLoadTime||5e3;var m=function(e){return n.nu(function(n){d(e,t.compose(n,t.constant(r.value(e))),t.compose(n,t.constant(r.error(e))))})},h=function(e){return e.fold(t.identity,t.identity)},g=function(t,n,r){o.par(e.map(t,m)).get(function(t){var o=e.partition(t,function(e){return e.isValue()});o.fail.length>0?r(o.fail.map(h)):n(o.pass.map(h))})};return{load:d,loadAll:g}}}),l("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(e){function t(t,n){return t=e.trim(t),t?t.split(n||" "):[]}function n(e){function n(e,n,o){function r(e,t){var n,o,r={};for(n=0,o=e.length;n<o;n++)r[e[n]]=t||{};return r}var a,l,u;for(o=o||[],n=n||"","string"==typeof o&&(o=t(o)),e=t(e),a=e.length;a--;)l=t([s,n].join(" ")),u={attributes:r(l),attributesOrder:l,children:r(o,i)},p[e[a]]=u}function o(e,n){var o,r,i,s;for(e=t(e),o=e.length,n=t(n);o--;)for(r=p[e[o]],i=0,s=n.length;i<s;i++)r.attributes[n[i]]={},r.attributesOrder.push(n[i])}var s,l,u,d,c,f,p={};return r[e]?r[e]:(s="id accesskey class dir lang style tabindex title role",l="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",u="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=e&&(s+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",l+=" article aside details dialog figure header footer hgroup section nav",u+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=e&&(s+=" xml:lang",f="acronym applet basefont big font strike tt",u=[u,f].join(" "),a(t(f),function(e){n(e,"",u)}),c="center dir isindex noframes",l=[l,c].join(" "),d=[l,u].join(" "),a(t(c),function(e){n(e,"",d)})),d=d||[l,u].join(" "),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",d),n("address dt dd div caption","",d),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),n("blockquote","cite",d),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",d),n("dl","","dt dd"),n("a","href target rel media hreflang type",u),n("q","cite",u),n("ins del","cite datetime",d),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",d),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[d,"param"].join(" ")),n("param","name value"),n("map","name",[d,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",d),n("th","colspan rowspan headers scope abbr",d),n("form","accept-charset action autocomplete enctype method name novalidate target",d),n("fieldset","disabled form name",[d,"legend"].join(" ")),n("label","form for",u),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?d:u),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[d,"li"].join(" ")),n("noscript","",d),"html4"!=e&&(n("wbr"),n("ruby","",[u,"rt rp"].join(" ")),n("figcaption","",d),n("mark rt rp summary bdi","",u),n("canvas","width height",d),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[d,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[d,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[u,"option"].join(" ")),n("article section nav aside header footer","",d),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[d,"figcaption"].join(" ")),n("time","datetime",u),n("dialog","open",d),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",u),n("progress","value max",u),n("meter","value min max low high optimum",u),n("details","open",[d,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(o("script","language xml:space"),o("style","xml:space"),o("object","declare classid code codebase codetype archive standby align border hspace vspace"),o("embed","align name hspace vspace"),o("param","valuetype type"),o("a","charset name rev shape coords"),o("br","clear"),o("applet","codebase archive code object alt name width height align hspace vspace"),o("img","name longdesc align border hspace vspace"),o("iframe","longdesc frameborder marginwidth marginheight scrolling align"),o("font basefont","size color face"),o("input","usemap align"),o("select","onchange"),o("textarea"),o("h1 h2 h3 h4 h5 h6 div p legend caption","align"),o("ul","type compact"),o("li","type"),o("ol dl menu dir","compact"),o("pre","width xml:space"),o("hr","align noshade size width"),o("isindex","prompt"),o("table","summary width frame rules cellspacing cellpadding align bgcolor"),o("col","width align char charoff valign"),o("colgroup","width align char charoff valign"),o("thead","align char charoff valign"),o("tr","align char charoff valign bgcolor"),o("th","axis align char charoff valign nowrap bgcolor width height"),o("form","accept"),o("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),o("tfoot","align char charoff valign"),o("tbody","align char charoff valign"),o("area","nohref"),o("body","background bgcolor text link vlink alink")),"html4"!=e&&(o("input button select textarea","autofocus"),o("input textarea","placeholder"),o("a","download"),o("link script img","crossorigin"),o("iframe","sandbox seamless allowfullscreen")),a(t("a form meter progress dfn"),function(e){p[e]&&delete p[e].children[e]}),delete p.caption.children.table,delete p.script,r[e]=p,p)}function o(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),a(e,function(e,o){n[o]=n[o.toUpperCase()]="map"==t?s(e,/[, ]/):u(e,/[, ]/)})),n}var r={},i={},s=e.makeMap,a=e.each,l=e.extend,u=e.explode,d=e.inArray;return function(e){function i(t,n,o){var i=e[t];return i?i=s(i,/[, ]/,s(i.toUpperCase(),/[, ]/)):(i=r[t],i||(i=s(n," ",s(n.toUpperCase()," ")),i=l(i,o),r[t]=i)),i}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function f(e){var n,o,r,i,a,l,u,f,p,m,h,g,v,y,b,_,x,C,j,E=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,w=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=t(e,","),R["@"]&&(_=R["@"].attributes,x=R["@"].attributesOrder),n=0,o=e.length;n<o;n++)if(a=E.exec(e[n])){if(y=a[1],p=a[2],b=a[3],f=a[5],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===a[4]&&(l.removeEmptyAttrs=!0),_){for(C in _)g[C]=_[C];v.push.apply(v,x)}if(f)for(f=t(f,"|"),r=0,i=f.length;r<i;r++)if(a=w.exec(f[r])){if(u={},h=a[1],m=a[2].replace(/::/g,":"),y=a[3],j=a[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(m),u.required=!0),"-"===h){delete g[m],v.splice(d(v,m),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:m,value:j}),u.defaultValue=j),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:m,value:j}),u.forcedValue=j),"<"===y&&(u.validValues=s(j,"?"))),S.test(m)?(l.attributePatterns=l.attributePatterns||[],u.pattern=c(m),l.attributePatterns.push(u)):(g[m]||v.push(m),g[m]=u)}_||"@"!=p||(_=g,x=v),b&&(l.outputName=p,R[b]=l),S.test(p)?(l.pattern=c(p),M.push(l)):R[p]=l}}function p(e){R={},M=[],f(e),a(b,function(e,t){N[t]=e.children})}function m(e){var n=/^(~)?(.+)$/;e&&(r.text_block_elements=r.block_elements=null,a(t(e,","),function(e){var t=n.exec(e),o="~"===t[1],r=o?"span":"div",i=t[2];if(N[i]=N[r],D[i]=r,o||(w[i.toUpperCase()]={},w[i]={}),!R[i]){var s=R[r];s=l({},s),delete s.removeEmptyAttrs,delete s.removeEmpty,R[i]=s}a(N,function(e,t){e[r]&&(N[t]=e=l({},N[t]),e[i]=e[r])})}))}function h(n){var o=/^([+\-]?)(\w+)\[([^\]]+)\]$/;r[e.schema]=null,n&&a(t(n,","),function(e){var n,r,i=o.exec(e);i&&(r=i[1],n=r?N[i[2]]:N[i[2]]={"#comment":{}},n=N[i[2]],a(t(i[3],"|"),function(e){"-"===r?delete n[e]:n[e]={}}))})}function g(e){var t,n=R[e];if(n)return n;for(t=M.length;t--;)if(n=M[t],n.pattern.test(e))return n}var v,y,b,_,x,C,j,E,w,S,k,T,P,I=this,R={},N={},M=[],D={},O={};e=e||{},b=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),v=o(e.valid_styles),y=o(e.invalid_styles,"map"),E=o(e.valid_classes,"map"),_=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),x=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=i("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),j=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),S=i("non_empty_elements","td th iframe video audio object script pre code",C),k=i("move_caret_before_on_enter_elements","table",S),T=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),w=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",T),P=i("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),a((e.special||"script noscript style textarea").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?p(e.valid_elements):(a(b,function(e,t){R[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},N[t]=e.children}),"html5"!=e.schema&&a(t("strong/b em/i"),function(e){e=t(e,"/"),R[e[1]].outputName=e[0]}),a(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){R[e]&&(R[e].removeEmpty=!0)}),a(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){R[e].paddEmpty=!0}),a(t("span"),function(e){R[e].removeEmptyAttrs=!0})),m(e.custom_elements),h(e.valid_children),f(e.extended_valid_elements),h("+ol[ul|ol],+ul[ul|ol]"),a({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,n){R[n]&&(R[n].parentsRequired=t(e))}),e.invalid_elements&&a(u(e.invalid_elements),function(e){R[e]&&delete R[e]}),g("span")||f("span[!data-mce-type|*]"),I.children=N,I.getValidStyles=function(){return v},I.getInvalidStyles=function(){return y},I.getValidClasses=function(){return E},I.getBoolAttrs=function(){return j},I.getBlockElements=function(){return w},I.getTextBlockElements=function(){return T},I.getTextInlineElements=function(){return P},I.getShortEndedElements=function(){return C},I.getSelfClosingElements=function(){return x},I.getNonEmptyElements=function(){return S},I.getMoveCaretBeforeOnEnterElements=function(){return k},I.getWhiteSpaceElements=function(){return _},I.getSpecialElements=function(){return O},I.isValidChild=function(e,t){var n=N[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},I.isValid=function(e,t){var n,o,r=g(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},I.getElementRule=g,I.getCustomElements=function(){return D},I.addValidElements=f,I.setValidElements=p,I.addCustomElements=m,I.addValidChildren=h,I.elements=R}}),l("tinymce.core.dom.DOMUtils",["tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.Range","tinymce.core.dom.Sizzle","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.html.Entities","tinymce.core.html.Schema","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l,u,d){function c(e,t){var n,o={},r=t.keep_values;return n={set:function(n,o,r){t.url_converter&&(o=t.url_converter.call(t.url_converter_scope||e,o,r,n[0])),n.attr("data-mce-"+r,o).attr(r,o)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},o={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(r&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},r&&(o.href=o.src=n),o}function f(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)}function p(e,t){var n,o,r=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,(!t||3!=o||o!=n&&e.nodeValue.length)&&(r++,n=o);return r}function m(n,o){var i,s=this;s.doc=n,s.win=window,s.files={},s.counter=0,s.stdMode=!b||n.documentMode>=8,s.boxModel=!b||"CSS1Compat"==n.compatMode||s.stdMode,s.styleSheetLoader=new r(n),s.boundEvents=[],s.settings=o=o||{},s.schema=o.schema?o.schema:new l({}),s.styles=new u({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema),s.fixDoc(n),s.events=o.ownEvents?new t(o.proxy):t.Event,s.attrHooks=c(s,o),i=o.schema?o.schema.getBlockElements():{},s.$=e.overrideDefaults(function(){return{context:n,element:s.getRoot()}}),s.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!i[e.nodeName]):!!i[e]}}var h=d.each,g=d.is,v=d.grep,y=d.trim,b=s.ie,_=/^([a-z0-9],?)+$/i,x=/^[ \t\r\n]*$/;return m.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(b&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,o,r=this;return!b||1!==e.nodeType||t?e.cloneNode(t):(o=r.doc,t?n.firstChild:(n=o.createElement(e.nodeName),h(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),t.indexOf("px")===-1&&(t=0),n.indexOf("px")===-1&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,o){var r,i=this,s=[];for(e=i.get(e),o=void 0===o,n=n||("BODY"!=i.getRoot().nodeName?i.getRoot().parentNode:null),g(t,"string")&&(r=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return i.is(e,r)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return o(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e)return!1;if(void 0===e.length){if("*"===t)return 1==e.nodeType;if(_.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]==e)return!0;return!1}}if(e.nodeType&&1!=e.nodeType)return!1;var r=e.nodeType?[e]:e;return o(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,o,r){var i=this;return this.run(e,function(e){var s;return s=g(t,"string")?i.doc.createElement(t):t,i.setAttribs(s,n),
o&&(o.nodeType?s.appendChild(o):i.setHTML(s,o)),r?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,r="";r+="<"+e;for(o in t)t.hasOwnProperty(o)&&null!==t[o]&&"undefined"!=typeof t[o]&&(r+=" "+o+'="'+this.encode(t[o])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,o,r=this.doc;for(o=r.createElement("div"),t=r.createDocumentFragment(),e&&(o.innerHTML=e);n=o.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&f(this,e)},getStyle:function(e,t,n){return e=this.$$(e),n?e.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=s.ie&&s.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&f(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var o,r,i=this,s=i.settings;""===n&&(n=null),e=i.$$(e),o=e.attr(t),e.length&&(r=i.attrHooks[t],r&&r.set?r.set(e,n,t):e.attr(t,n),o!=n&&s.onSetAttrib&&s.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,o){h(t,function(e,t){n.setAttrib(o,t,e)})})},getAttrib:function(e,t,n){var o,r,i=this;return e=i.$$(e),e.length&&(o=i.attrHooks[t],r=o&&o.get?o.get(e,t):e.attr(t)),"undefined"==typeof r&&(r=n||""),r},getPos:function(t,n){var o,r,i=this,s=0,a=0,l=i.doc,u=l.body;if(t=i.get(t),n=n||u,t){if(n===u&&t.getBoundingClientRect&&"static"===e(u).css("position"))return r=t.getBoundingClientRect(),n=i.boxModel?l.documentElement:u,s=r.left+(l.documentElement.scrollLeft||u.scrollLeft)-n.clientLeft,a=r.top+(l.documentElement.scrollTop||u.scrollTop)-n.clientTop,{x:s,y:a};for(o=t;o&&o!=n&&o.nodeType;)s+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=t.parentNode;o&&o!=n&&o.nodeType;)s-=o.scrollLeft||0,a-=o.scrollTop||0,o=o.parentNode}return{x:s,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,o=this,r=o.doc;if(o!==m.DOM&&r===document){var i=m.DOM.addedStyles;if(i=i||[],i[e])return;i[e]=!0,m.DOM.addedStyles=i}n=r.getElementById("mceDefaultStyles"),n||(n=r.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=r.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(r.createTextNode(e))},loadCSS:function(e){var t,n=this,o=n.doc;return n!==m.DOM&&o===document?void m.DOM.loadCSS(e):(e||(e=""),t=o.getElementsByTagName("head")[0],void h(e.split(","),function(e){var r;e=d._addCacheSuffix(e),n.files[e]||(n.files[e]=!0,r=n.create("link",{rel:"stylesheet",href:e}),b&&o.documentMode&&o.recalc&&(r.onload=function(){o.recalc&&o.recalc(),r.onload=null}),t.appendChild(r))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(t,n,o){this.$$(t).toggleClass(n,o).each(function(){""===this.className&&e(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(t,n){t=this.$$(t),b?t.each(function(t,o){if(o.canHaveHTML!==!1){for(;o.firstChild;)o.removeChild(o.firstChild);try{o.innerHTML="<br>"+n,o.removeChild(o.firstChild)}catch(t){e("<div></div>").html("<br>"+n).contents().slice(1).appendTo(o)}return n}}):t.html(n)},getOuterHTML:function(t){return t=this.get(t),1==t.nodeType&&"outerHTML"in t?t.outerHTML:e("<div></div>").append(e(t).clone()).html()},setOuterHTML:function(t,n){var o=this;o.$$(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=n)}catch(e){}o.remove(e(this).html(n),!0)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,o;return n=t.parentNode,o=t.nextSibling,o?n.insertBefore(e,o):n.appendChild(e),e})},replace:function(e,t,n){var o=this;return o.run(t,function(t){return g(t,"array")&&(e=e.cloneNode(!0)),n&&h(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,o=this;return e.nodeName!=t.toUpperCase()&&(n=o.create(t),h(o.getAttribs(e),function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}),o.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){return this.styles.toHex(d.trim(e))},run:function(e,t,n){var o,r=this;return"string"==typeof e&&(e=r.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(o=[],h(e,function(e,i){e&&("string"==typeof e&&(e=r.get(e)),o.push(t.call(n,e,i)))}),o))},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(b){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,o,r,s,a,l,u=this,d=0;if(e=e.firstChild){a=new i(e,e.parentNode),t=t||(u.schema?u.schema.getNonEmptyElements():null),s=u.schema?u.schema.getWhiteSpaceElements():{};do{if(r=e.nodeType,1===r){var c=e.getAttribute("data-mce-bogus");if(c){e=a.next("all"===c);continue}if(l=e.nodeName.toLowerCase(),t&&t[l]){if("br"===l){d++,e=a.next();continue}return!1}for(o=u.getAttribs(e),n=o.length;n--;)if(l=o[n].nodeName,"name"===l||"data-mce-bookmark"===l)return!1}if(8==r)return!1;if(3===r&&!x.test(e.nodeValue))return!1;if(3===r&&e.parentNode&&s[e.parentNode.nodeName]&&x.test(e.nodeValue))return!1;e=a.next()}while(e)}return d<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new n(this)},nodeIndex:p,split:function(e,t,n){function o(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,r=e.childNodes,i=e.nodeType;if(1!=i||"bookmark"!=e.getAttribute("data-mce-type")){for(n=r.length-1;n>=0;n--)o(r[n]);if(9!=i){if(3==i&&e.nodeValue.length>0){var s=y(e.nodeValue).length;if(!a.isBlock(e.parentNode)||s>0||0===s&&t(e))return}else if(1==i&&(r=e.childNodes,1==r.length&&r[0]&&1==r[0].nodeType&&"bookmark"==r[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(r[0],e),r.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;a.remove(e)}return e}}var r,i,s,a=this,l=a.createRng();if(e&&t)return l.setStart(e.parentNode,a.nodeIndex(e)),l.setEnd(t.parentNode,a.nodeIndex(t)),r=l.extractContents(),l=a.createRng(),l.setStart(t.parentNode,a.nodeIndex(t)+1),l.setEnd(e.parentNode,a.nodeIndex(e)+1),i=l.extractContents(),s=e.parentNode,s.insertBefore(o(r),e),n?s.insertBefore(n,e):s.insertBefore(t,e),s.insertBefore(o(i),e),a.remove(e),n||t},bind:function(e,t,n,o){var r=this;if(d.isArray(e)){for(var i=e.length;i--;)e[i]=r.bind(e[i],t,n,o);return e}return!r.settings.collect||e!==r.doc&&e!==r.win||r.boundEvents.push([e,t,n,o]),r.events.bind(e,t,n,o||r)},unbind:function(e,t,n){var o,r=this;if(d.isArray(e)){for(o=e.length;o--;)e[o]=r.unbind(e[o],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win))for(o=r.boundEvents.length;o--;){var i=r.boundEvents[o];e!=i[0]||t&&t!=i[1]||n&&n!=i[2]||this.events.unbind(i[0],i[1],i[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var t=e.boundEvents.length;t--;){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}o.setDocument&&o.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var o=this,r=t;if(e)for("string"==typeof r&&(r=function(e){return o.is(e,t)}),e=e[n];e;e=e[n])if(r(e))return e;return null}},m.DOM=new m(document),m.nodeIndex=p,m}),l("tinymce.core.dom.ScriptLoader",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t){function n(){function e(e,n,r){function i(){d.remove(u),l&&(l.onreadystatechange=l.onload=l=null),n()}function a(){s(r)?r():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)}var l,u,d=o;u=d.uniqueId(),l=document.createElement("script"),l.id=u,l.type="text/javascript",l.src=t._addCacheSuffix(e),"onreadystatechange"in l?l.onreadystatechange=function(){/loaded|complete/.test(l.readyState)&&i()}:l.onload=i,l.onerror=a,(document.getElementsByTagName("head")[0]||document.body).appendChild(l)}var n,a=0,l=1,u=2,d=3,c={},f=[],p={},m=[],h=0;this.isDone=function(e){return c[e]==u},this.markDone=function(e){c[e]=u},this.add=this.load=function(e,t,o,r){var i=c[e];i==n&&(f.push(e),c[e]=a),t&&(p[e]||(p[e]=[]),p[e].push({success:t,failure:r,scope:o||this}))},this.remove=function(e){delete c[e],delete p[e]},this.loadQueue=function(e,t,n){this.loadScripts(f,e,t,n)},this.loadScripts=function(t,o,a,f){function g(e,t){r(p[t],function(t){s(t[e])&&t[e].call(t.scope)}),p[t]=n}var v,y=[];m.push({success:o,failure:f,scope:a||this}),(v=function(){var n=i(t);t.length=0,r(n,function(t){return c[t]===u?void g("success",t):c[t]===d?void g("failure",t):void(c[t]!==l&&(c[t]=l,h++,e(t,function(){c[t]=u,h--,g("success",t),v()},function(){c[t]=d,h--,y.push(t),g("failure",t),v()})))}),h||(r(m,function(e){0===y.length?s(e.success)&&e.success.call(e.scope):s(e.failure)&&e.failure.call(e.scope,y)}),m.length=0)})()}}var o=e.DOM,r=t.each,i=t.grep,s=function(e){return"function"==typeof e};return n.ScriptLoader=new n,n}),l("tinymce.core.AddOnManager",["tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(e,t){function n(){var e=this;e.items=[],e.urls={},e.lookup={}}var o=t.each;return n.prototype={get:function(e){if(this.lookup[e])return this.lookup[e].instance},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,o){var r=n.language;if(r&&n.languageLoad!==!1){if(o)if(o=","+o+",",o.indexOf(","+r.substr(0,2)+",")!=-1)r=r.substr(0,2);else if(o.indexOf(","+r+",")==-1)return;e.ScriptLoader.add(this.urls[t]+"/langs/"+r+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];o(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(t,r,i,s,a){function l(){var n=u.dependencies(t);o(n,function(e){var t=u.createUrl(r,e);u.load(t.resource,t,void 0,void 0)}),i&&(s?i.call(s):i.call(e))}var u=this,d=r;u.urls[t]||("object"==typeof r&&(d=r.prefix+r.resource+r.suffix),0!==d.indexOf("/")&&d.indexOf("://")==-1&&(d=n.baseURL+"/"+d),u.urls[t]=d.substring(0,d.lastIndexOf("/")),u.lookup[t]?l():e.ScriptLoader.add(d,l,s,a))}},n.PluginManager=new n,n.ThemeManager=new n,n}),l("tinymce.core.dom.NodeType",[],function(){function e(e){return function(t){return!!t&&t.nodeType==e}}function t(e){return e=e.toLowerCase().split(" "),function(t){var n,o;if(t&&t.nodeType)for(o=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(o===e[n])return!0;return!1}}function n(e,t){return t=t.toLowerCase().split(" "),function(n){var o,r;if(l(n))for(o=0;o<t.length;o++)if(r=n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(e),r===t[o])return!0;return!1}}function o(e,t){return function(n){return l(n)&&n[e]===t}}function r(e,t){return function(t){return l(t)&&t.hasAttribute(e)}}function i(e,t){return function(n){return l(n)&&n.getAttribute(e)===t}}function s(e){return l(e)&&e.hasAttribute("data-mce-bogus")}function a(e){return function(t){if(l(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}}var l=e(1);return{isText:e(3),isElement:l,isComment:e(8),isBr:t("br"),isContentEditableTrue:a("true"),isContentEditableFalse:a("false"),matchNodeNames:t,hasPropValue:o,hasAttribute:r,hasAttributeValue:i,matchStyleValues:n,isBogus:s}}),l("tinymce.core.text.Zwsp",[],function(){var e="\ufeff",t=function(t){return t===e},n=function(t){return t.replace(new RegExp(e,"g"),"")};return{isZwsp:t,ZWSP:e,trim:n}}),l("tinymce.core.caret.CaretContainer",["tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t){function n(e){return p(e)&&(e=e.parentNode),f(e)&&e.hasAttribute("data-mce-caret")}function o(e){return p(e)&&t.isZwsp(e.data)}function r(e){return n(e)||o(e)}function i(e,n){var o,i,s,a;if(o=e.ownerDocument,s=o.createTextNode(t.ZWSP),a=e.parentNode,n){if(i=e.previousSibling,p(i)){if(r(i))return i;if(u(i))return i.splitText(i.data.length-1)}a.insertBefore(s,e)}else{if(i=e.nextSibling,p(i)){if(r(i))return i;if(l(i))return i.splitText(1),i}e.nextSibling?a.insertBefore(s,e.nextSibling):a.appendChild(s)}return s}function s(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e}function a(e,t,n){var o,r,i;return o=t.ownerDocument,r=o.createElement(e),r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(s()),i=t.parentNode,n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r),r}function l(e){return p(e)&&e.data[0]==t.ZWSP}function u(e){return p(e)&&e.data[e.data.length-1]==t.ZWSP}function d(t){var n=t.getElementsByTagName("br"),o=n[n.length-1];e.isBogus(o)&&o.parentNode.removeChild(o)}function c(e){return e&&e.hasAttribute("data-mce-caret")?(d(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null}var f=e.isElement,p=e.isText,m=function(t){return t.firstChild!==t.lastChild||!e.isBr(t.firstChild)},h=function(n){if(e.isText(n)){var o=n.data;return o.length>0&&o.charAt(0)!==t.ZWSP&&n.insertData(0,t.ZWSP),n}return null},g=function(n){if(e.isText(n)){var o=n.data;return o.length>0&&o.charAt(o.length-1)!==t.ZWSP&&n.insertData(o.length,t.ZWSP),n}return null},v=function(n){return n&&e.isText(n.container())&&n.container().data.charAt(n.offset())===t.ZWSP},y=function(n){return n&&e.isText(n.container())&&n.container().data.charAt(n.offset()-1)===t.ZWSP};return{isCaretContainer:r,isCaretContainerBlock:n,isCaretContainerInline:o,showCaretContainerBlock:c,insertInline:i,prependInline:h,appendInline:g,isBeforeInline:v,isAfterInline:y,insertBlock:a,hasContent:m,startsWithCaretContainer:l,endsWithCaretContainer:u}}),l("tinymce.core.dom.RangeUtils",["tinymce.core.util.Tools","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.dom.Range","tinymce.core.caret.CaretContainer"],function(e,t,n,o,r){function i(e){return g(e)||v(e)}function s(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e}function a(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}function l(e,t,n){return null!==a(e,t,n)}function u(e,t,n){return l(e,t,function(e){return e.nodeName===n})}function d(e){return"_mce_caret"===e.id}function c(e,t){return y(e)&&l(e,t,d)===!1}function f(e){this.walk=function(t,n){function o(e){var t;return t=e[0],3===t.nodeType&&t===g&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e}function r(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function i(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function a(e,t,i){var s=i?"nextSibling":"previousSibling";for(c=e,f=c.parentNode;c&&c!=t;c=f)f=c.parentNode,p=r(c==e?c:c[s],s),p.length&&(i||p.reverse(),n(o(p)))}var l,u,d,c,f,p,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(m=e.select("td[data-mce-selected],th[data-mce-selected]"),m.length>0)return void h(m,function(e){n([e])});if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[v]),1==y.nodeType&&y.hasChildNodes()&&(y=s(y,b)),g==y)return n(o([g]));for(l=e.findCommonAncestor(g,y),c=g;c;c=c.parentNode){if(c===y)return a(g,l,!0);if(c===l)break}for(c=y;c;c=c.parentNode){if(c===g)return a(y,l);if(c===l)break}u=i(g,l)||g,d=i(y,l)||y,a(g,u,!0),p=r(u==g?u:u.nextSibling,"nextSibling",d==y?d.nextSibling:d),p.length&&n(o(p)),a(y,d)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;return n==r&&3==n.nodeType?o>0&&o<n.nodeValue.length&&(r=t(n,o),n=r.previousSibling,i>o?(i-=o,n=r=t(r,i).previousSibling,i=r.nodeValue.length,o=0):i=0):(3==n.nodeType&&o>0&&o<n.nodeValue.length&&(n=t(n,o),o=0),3==r.nodeType&&i>0&&i<r.nodeValue.length&&(r=t(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},this.normalize=function(n){function o(o){function s(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function a(n,o){for(var r=new t(n,e.getParent(n.parentNode,e.isBlock)||C);n=r[o?"prev":"next"]();)if("BR"===n.nodeName)return!0}function l(e){for(;e&&e!=C;){if(v(e))return!0;e=e.parentNode}return!1}function d(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function f(n,o){var s,a,l;if(o=o||p,l=e.getParent(o.parentNode,e.isBlock)||C,n&&"BR"==o.nodeName&&x&&e.isEmpty(l))return p=o.parentNode,m=e.nodeIndex(o),void(i=!0);for(s=new t(o,l);g=s[n?"prev":"next"]();){if("false"===e.getContentEditableParent(g)||c(g,e.getRoot()))return;if(3===g.nodeType&&g.nodeValue.length>0)return void(u(g,C,"A")===!1&&(p=g,m=n?g.nodeValue.length:0,i=!0));if(e.isBlock(g)||b[g.nodeName.toLowerCase()])return;a=g}r&&a&&(p=a,i=!0,m=0)}var p,m,h,g,b,_,x,C=e.getRoot();if(p=n[(o?"start":"end")+"Container"],m=n[(o?"start":"end")+"Offset"],x=1==p.nodeType&&m===p.childNodes.length,b=e.schema.getNonEmptyElements(),_=o,!y(p)){if(1==p.nodeType&&m>p.childNodes.length-1&&(_=!1),9===p.nodeType&&(p=e.getRoot(),m=0),p===C){if(_&&(g=p.childNodes[m>0?m-1:0])){if(y(g))return;if(b[g.nodeName]||"TABLE"==g.nodeName)return}if(p.hasChildNodes()){if(m=Math.min(!_&&m>0?m-1:m,p.childNodes.length-1),p=p.childNodes[m],m=0,!r&&p===C.lastChild&&"TABLE"===p.nodeName)return;if(l(p)||y(p))return;if(p.hasChildNodes()&&!/TABLE/.test(p.nodeName)){g=p,h=new t(p,C);do{if(v(g)||y(g)){i=!1;break}if(3===g.nodeType&&g.nodeValue.length>0){m=_?0:g.nodeValue.length,p=g,i=!0;break}if(b[g.nodeName.toLowerCase()]&&!s(g)){m=e.nodeIndex(g),p=g.parentNode,"IMG"!=g.nodeName||_||m++,i=!0;break}}while(g=_?h.next():h.prev())}}}r&&(3===p.nodeType&&0===m&&f(!0),1===p.nodeType&&(g=p.childNodes[m],g||(g=p.childNodes[m-1]),!g||"BR"!==g.nodeName||d(g,"A")||a(g)||a(g,!0)||f(!0,g))),_&&!r&&3===p.nodeType&&m===p.nodeValue.length&&f(!1),i&&n["set"+(o?"Start":"End")](p,m)}}var r,i=!1;return r=n.collapsed,o(!0),r||o(),i&&r&&n.collapse(!0),i}}function p(t,n,o){var r,i,s;if(r=o.elementFromPoint(t,n),i=o.body.createTextRange(),r&&"HTML"!=r.tagName||(r=o.body),i.moveToElementText(r),s=e.toArray(i.getClientRects()),s=s.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),s.length>0){n=(s[0].bottom+s[0].top)/2;try{return i.moveToPoint(t,n),i.collapse(!0),i}catch(e){}}return null}function m(e,t){var n=e&&e.parentElement?e.parentElement():null;return v(a(n,t,i))?null:e}var h=e.each,g=n.isContentEditableTrue,v=n.isContentEditableFalse,y=r.isCaretContainer;return f.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},f.getCaretRangeFromPoint=function(e,t,n){var o,r;if(n.caretPositionFromPoint)r=n.caretPositionFromPoint(e,t),o=n.createRange(),o.setStart(r.offsetNode,r.offset),o.collapse(!0);else if(n.caretRangeFromPoint)o=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){o=n.body.createTextRange();try{o.moveToPoint(e,t),o.collapse(!0)}catch(r){o=p(e,t,n)}return m(o,n.body)}return o},f.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},f.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},f}),l("tinymce.core.html.Node",[],function(){function e(e,t,n){var o,r,i=n?"lastChild":"firstChild",s=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(o=e[s])return o;for(r=e.parent;r&&r!==t;r=r.parent)if(o=r[s])return o}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,o={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,o,r,i=this;if("string"!=typeof e){for(o in e)i.attr(o,e[o]);return i}if(n=i.attributes){if(t!==r){if(null===t){if(e in n.map)for(delete n.map[e],o=n.length;o--;)if(n[o].name===e)return n=n.splice(o,1),i;return i}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},clone:function(){var e,n,o,r,i,s=this,a=new t(s.name,s.type);if(o=s.attributes){for(i=[],i.map={},e=0,n=o.length;e<n;e++)r=o[e],"id"!==r.name&&(i[i.length]={name:r.name,value:r.value},i.map[r.name]=r.value);a.attributes=i}return a.value=s.value,a.shortEnded=s.shortEnded,a},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o.next=n,t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n.prev=o,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e},getAll:function(t){var n,o=this,r=[];for(n=o.firstChild;n;n=e(n,o))n.name===t&&r.push(n);return r},empty:function(){var t,n,o,r=this;if(r.firstChild){for(t=[],o=r.firstChild;o;o=e(o,r))t.push(o);for(n=t.length;n--;)o=t[n],o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(t,o){var r,i,s=this,a=s.firstChild;if(o=o||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(r=a.attributes.length;r--;)if(i=a.attributes[r].name,"name"===i||0===i.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1;if(3===a.type&&a.parent&&o[a.parent.name]&&n.test(a.value))return!1}while(a=e(a,s));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var r,i;if(r=new t(e,o[e]||1),n)for(i in n)r.attr(i,n[i]);return r},t}),l("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t,n){function o(e,t,n){var o,r,i,s,a=1;for(s=e.getShortEndedElements(),i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,i.lastIndex=o=n;r=i.exec(t);){if(o=i.lastIndex,"/"===r[1])a--;else if(!r[1]){if(r[2]in s)continue;a++}if(0===a)break}return o}function r(r,a){function l(){}var u=this;r=r||{},u.schema=a=a||new e,r.fix_self_closing!==!1&&(r.fix_self_closing=!0),i("comment cdata text start end pi doctype".split(" "),function(e){e&&(u[e]=r[e]||l)}),u.parse=function(e){function i(e){var t,n;for(t=U.length;t--&&U[t].name!==e;);if(t>=0){for(n=U.length-1;n>=t;n--)e=U[n],e.valid&&F.end(e.name);U.length=t}}function l(e,t,n,o,i){var a,l,u=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in b?t:W(n||o||i||""),x&&!g&&s(t)===!1){if(a=S[t],!a&&k){for(l=k.length;l--&&(a=k[l],!a.pattern.test(t)););l===-1&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(V[t]&&!r.allow_script_urls){var d=n.replace(u,"");try{d=decodeURIComponent(d)}catch(e){d=unescape(d)}if(q.test(d))return;if(!r.allow_html_data_urls&&G.test(d)&&!/^data:image\//i.test(d))return}f.map[t]=n,f.push({name:t,value:n})}var u,d,c,f,p,m,h,g,v,y,b,_,x,C,j,E,w,S,k,T,P,I,R,N,M,D,O,A,L,B,F=this,z=0,U=[],H=0,W=t.decode,V=n.makeMap("src,href,data,background,formaction,poster"),q=/((java|vb)script|mhtml):/i,G=/^data:/i;for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),O=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=a.getShortEndedElements(),M=r.self_closing_elements||a.getSelfClosingElements(),b=a.getBoolAttrs(),x=r.validate,v=r.remove_internals,B=r.fix_self_closing,A=a.getSpecialElements(),R=e+">";u=D.exec(R);){if(z<u.index&&F.text(W(e.substr(z,u.index-z))),d=u[6])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),i(d);else if(d=u[7]){if(u.index+u[0].length>e.length){F.text(W(e.substr(u.index))),z=u.index+u[0].length;continue}if(d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),_=d in y,B&&M[d]&&U.length>0&&U[U.length-1].name===d&&i(d),!x||(C=a.getElementRule(d))){if(j=!0,x&&(S=C.attributes,k=C.attributePatterns),(w=u[8])?(g=w.indexOf("data-mce-type")!==-1,g&&v&&(j=!1),f=[],f.map={},w.replace(O,l)):(f=[],f.map={}),x&&!g){if(T=C.attributesRequired,P=C.attributesDefault,I=C.attributesForced,N=C.removeEmptyAttrs,N&&!f.length&&(j=!1),I)for(p=I.length;p--;)E=I[p],h=E.name,L=E.value,"{$uid}"===L&&(L="mce_"+H++),f.map[h]=L,f.push({name:h,value:L});if(P)for(p=P.length;p--;)E=P[p],h=E.name,h in f.map||(L=E.value,"{$uid}"===L&&(L="mce_"+H++),f.map[h]=L,f.push({name:h,value:L}));if(T){for(p=T.length;p--&&!(T[p]in f.map););p===-1&&(j=!1)}if(E=f.map["data-mce-bogus"]){if("all"===E){z=o(a,e,D.lastIndex),D.lastIndex=z;continue}j=!1}}j&&F.start(d,f,_)}else j=!1;if(c=A[d]){c.lastIndex=z=u.index+u[0].length,(u=c.exec(e))?(j&&(m=e.substr(z,u.index-z)),z=u.index+u[0].length):(m=e.substr(z),z=e.length),j&&(m.length>0&&F.text(m,!0),F.end(d)),D.lastIndex=z;continue}_||(w&&w.indexOf("/")==w.length-1?j&&F.end(d):U.push({name:d,valid:j}))}else(d=u[1])?(">"===d.charAt(0)&&(d=" "+d),r.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),F.comment(d)):(d=u[2])?F.cdata(d):(d=u[3])?F.doctype(d):(d=u[4])&&F.pi(d,u[5]);z=u.index+u[0].length}for(z<e.length&&F.text(W(e.substr(z))),p=U.length-1;p>=0;p--)d=U[p],d.valid&&F.end(d.name)}}var i=n.each,s=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")};return r.findEndTag=o,r}),l("tinymce.core.html.DomParser",["tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.util.Tools"],function(e,t,n,o){var r=o.makeMap,i=o.each,s=o.explode,a=o.extend,l=function(t,n){t.padd_empty_with_br?n.empty().append(new e("br","1")).shortEnded=!0:n.empty().append(new e("#text","3")).value=" "},u=function(e,t){return e&&e.firstChild===e.lastChild&&e.firstChild.name===t};return function(d,c){function f(t){var n,o,i,s,a,l,d,f,m,h,g,v,y,b,_,x;for(v=r("tr,td,th,tbody,thead,tfoot,table"),h=c.getNonEmptyElements(),g=c.getWhiteSpaceElements(),y=c.getTextBlockElements(),b=c.getSpecialElements(),n=0;n<t.length;n++)if(o=t[n],o.parent&&!o.fixed)if(y[o.name]&&"li"==o.parent.name){for(_=o.next;_&&y[_.name];)_.name="li",_.fixed=!0,o.parent.insert(_,o.parent),_=_.next;o.unwrap(o)}else{for(s=[o],i=o.parent;i&&!c.isValidChild(i.name,o.name)&&!v[i.name];i=i.parent)s.push(i);if(i&&s.length>1){for(s.reverse(),a=l=p.filterNode(s[0].clone()),m=0;m<s.length-1;m++){for(c.isValidChild(l.name,s[m].name)?(d=p.filterNode(s[m].clone()),l.append(d)):d=l,f=s[m].firstChild;f&&f!=s[m+1];)x=f.next,d.append(f),f=x;l=d}a.isEmpty(h,g)?i.insert(o,s[0],!0):(i.insert(a,s[0],!0),i.insert(o,a)),i=s[0],(i.isEmpty(h,g)||u(i,"br"))&&i.empty().remove()}else if(o.parent){if("li"===o.name){if(_=o.prev,_&&("ul"===_.name||"ul"===_.name)){_.append(o);continue}if(_=o.next,_&&("ul"===_.name||"ul"===_.name)){_.insert(o,_.firstChild,!0);continue}o.wrap(p.filterNode(new e("ul",1)));continue}c.isValidChild(o.parent.name,"div")&&c.isValidChild("div",o.name)?o.wrap(p.filterNode(new e("div",1))):b[o.name]?o.empty().remove():o.unwrap()}}}var p=this,m={},h=[],g={},v={};d=d||{},d.validate=!("validate"in d)||d.validate,d.root_name=d.root_name||"body",p.schema=c=c||new t,p.filterNode=function(e){var t,n,o;n in m&&(o=g[n],o?o.push(e):g[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(o=v[n],o?o.push(e):v[n]=[e]);return e},p.addNodeFilter=function(e,t){i(s(e),function(e){var n=m[e];n||(m[e]=n=[]),n.push(t)})},p.addAttributeFilter=function(e,t){i(s(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return void h[n].callbacks.push(t);h.push({name:e,callbacks:[t]})})},p.parse=function(t,o){function i(){function e(e){e&&(o=e.firstChild,o&&3==o.type&&(o.value=o.value.replace(I,"")),o=e.lastChild,o&&3==o.type&&(o.value=o.value.replace(N,"")))}var t,n,o=b.firstChild;if(c.isValidChild(b.name,B.toLowerCase())){for(;o;)t=o.next,3==o.type||1==o.type&&"p"!==o.name&&!P[o.name]&&!o.attr("data-mce-type")?n?n.append(o):(n=s(B,1),n.attr(d.forced_root_block_attrs),b.insert(n,o),n.append(o)):(e(n),n=null),o=t;e(n)}}function s(t,n){var o,r=new e(t,n);return t in m&&(o=g[t],o?o.push(r):g[t]=[r]),r}function u(e){var t,n,o,r,i=c.getBlockElements();for(t=e.prev;t&&3===t.type;){if(o=t.value.replace(N,""),o.length>0)return void(t.value=o);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!i[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}r=t.prev,t.remove(),t=r}}function p(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var y,b,_,x,C,j,E,w,S,k,T,P,I,R,N,M,D,O,A,L,B,F=[];if(o=o||{},g={},v={},P=a(r("script,style,head,html,body,title,meta,param"),c.getBlockElements()),L=c.getNonEmptyElements(),A=c.children,T=d.validate,B="forced_root_block"in o?o.forced_root_block:d.forced_root_block,O=c.getWhiteSpaceElements(),I=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,M=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/,y=new n({validate:T,allow_script_urls:d.allow_script_urls,allow_conditional_comments:d.allow_conditional_comments,self_closing_elements:p(c.getSelfClosingElements()),cdata:function(e){_.append(s("#cdata",4)).value=e},text:function(e,t){var n;R||(e=e.replace(M," "),_.lastChild&&P[_.lastChild.name]&&(e=e.replace(I,""))),0!==e.length&&(n=s("#text",3),n.raw=!!t,_.append(n).value=e)},comment:function(e){_.append(s("#comment",8)).value=e},pi:function(e,t){_.append(s(e,7)).value=t,u(_)},doctype:function(e){var t;t=_.append(s("#doctype",10)),t.value=e,u(_)},start:function(e,t,n){var o,r,i,a,l;if(i=T?c.getElementRule(e):{}){
for(o=s(i.outputName||e,1),o.attributes=t,o.shortEnded=n,_.append(o),l=A[_.name],l&&A[o.name]&&!l[o.name]&&F.push(o),r=h.length;r--;)a=h[r].name,a in t.map&&(S=v[a],S?S.push(o):v[a]=[o]);P[e]&&u(o),n||(_=o),!R&&O[e]&&(R=!0)}},end:function(e){var t,n,o,r,i;if(n=T?c.getElementRule(e):{}){if(P[e]&&!R){if(t=_.firstChild,t&&3===t.type)if(o=t.value.replace(I,""),o.length>0)t.value=o,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)o=t.value,r=t.next,(0===o.length||D.test(o))&&(t.remove(),t=r),t=r;if(t=_.lastChild,t&&3===t.type)if(o=t.value.replace(N,""),o.length>0)t.value=o,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)o=t.value,r=t.prev,(0===o.length||D.test(o))&&(t.remove(),t=r),t=r}if(R&&O[e]&&(R=!1),(n.removeEmpty||n.paddEmpty)&&_.isEmpty(L,O))if(n.paddEmpty)l(d,_);else if(!_.attributes.map.name&&!_.attributes.map.id)return i=_.parent,P[_.name]?_.empty().remove():_.unwrap(),void(_=i);_=_.parent}}},c),b=_=new e(o.context||d.root_name,11),y.parse(t),T&&F.length&&(o.context?o.invalid=!0:f(F)),B&&("body"==b.name||o.isRootContent)&&i(),!o.invalid){for(k in g){for(S=m[k],x=g[k],E=x.length;E--;)x[E].parent||x.splice(E,1);for(C=0,j=S.length;C<j;C++)S[C](x,k,o)}for(C=0,j=h.length;C<j;C++)if(S=h[C],S.name in v){for(x=v[S.name],E=x.length;E--;)x[E].parent||x.splice(E,1);for(E=0,w=S.callbacks.length;E<w;E++)S.callbacks[E](x,S.name,o)}}return b},d.remove_trailing_brs&&p.addNodeFilter("br",function(t){var n,o,r,i,s,u,f,p,m=t.length,h=a({},c.getBlockElements()),g=c.getNonEmptyElements(),v=c.getNonEmptyElements();for(h.body=1,n=0;n<m;n++)if(o=t[n],r=o.parent,h[o.parent.name]&&o===r.lastChild){for(s=o.prev;s;){if(u=s.name,"span"!==u||"bookmark"!==s.attr("data-mce-type")){if("br"!==u)break;if("br"===u){o=null;break}}s=s.prev}o&&(o.remove(),r.isEmpty(g,v)&&(f=c.getElementRule(r.name),f&&(f.removeEmpty?r.remove():f.paddEmpty&&l(d,r))))}else{for(i=o;r&&r.firstChild===i&&r.lastChild===i&&(i=r,!h[r.name]);)r=r.parent;i===r&&d.padd_empty_with_br!==!0&&(p=new e("#text",3),p.value=" ",o.replace(p))}}),d.allow_unsafe_link_target||p.addAttributeFilter("href",function(e){for(var t,n=e.length,r=function(e){var t=e.split(" ").filter(function(e){return e.length>0});return t.concat(["noopener"]).join(" ")},i=function(e){var t=e?o.trim(e):"";return/\b(noopener)\b/g.test(t)?t:r(t)};n--;)t=e[n],"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",i(t.attr("rel")))}),d.allow_html_in_named_anchor||p.addAttributeFilter("id,name",function(e){for(var t,n,o,r,i=e.length;i--;)if(r=e[i],"a"===r.name&&r.firstChild&&!r.attr("href")){o=r.parent,t=r.lastChild;do n=t.prev,o.insert(t,r),t=n;while(t)}}),d.fix_list_elements&&p.addNodeFilter("ul,ol",function(t){for(var n,o,r=t.length;r--;)if(n=t[r],o=n.parent,"ul"===o.name||"ol"===o.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var i=new e("li",1);i.attr("style","list-style-type: none"),n.wrap(i)}}),d.validate&&c.getValidClasses()&&p.addAttributeFilter("class",function(e){for(var t,n,o,r,i,s,a,l=e.length,u=c.getValidClasses();l--;){for(t=e[l],n=t.attr("class").split(" "),i="",o=0;o<n.length;o++)r=n[o],a=!1,s=u["*"],s&&s[r]&&(a=!0),s=u[t.name],!a&&s&&s[r]&&(a=!0),a&&(i&&(i+=" "),i+=r);i.length||(i=null),t.attr("class",i)}})}}),l("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;return function(t){var o,r,i,s,a,l=[];return t=t||{},o=t.indent,r=n(t.indent_before||""),i=n(t.indent_after||""),s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,n){var u,d,c,f;if(o&&r[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n")),l.push("<",e),t)for(u=0,d=t.length;u<d;u++)c=t[u],l.push(" ",c.name,'="',s(c.value,!0),'"');!n||a?l[l.length]=">":l[l.length]=" />",n&&o&&i[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),o&&i[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:s(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",s(t),"?>"):l.push("<?",e,"?>"),o&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",o?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),l("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(e,t){return function(n,o){var r=this,i=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,r.schema=o=o||new t,r.writer=i,r.serialize=function(e){function t(e){var n,a,l,u,d,c,f,p,m,h=r[e.type];if(h)h(e);else{if(n=e.name,a=e.shortEnded,l=e.attributes,s&&l&&l.length>1&&(c=[],c.map={},m=o.getElementRule(e.name))){for(f=0,p=m.attributesOrder.length;f<p;f++)u=m.attributesOrder[f],u in l.map&&(d=l.map[u],c.map[u]=d,c.push({name:u,value:d}));for(f=0,p=l.length;f<p;f++)u=l[f].name,u in c.map||(d=l.map[u],c.map[u]=d,c.push({name:u,value:d}));l=c}if(i.start(e.name,l,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);i.end(n)}}}var r,s;return s=n.validate,r={3:function(e){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},i.reset(),1!=e.type||n.inner?r[11](e):t(e),i.getContent()}}}),l("tinymce.core.dom.Serializer",["tinymce.core.dom.DOMUtils","tinymce.core.html.DomParser","tinymce.core.html.SaxParser","tinymce.core.html.Entities","tinymce.core.html.Serializer","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.text.Zwsp"],function(e,t,n,o,r,i,s,a,l,u){function d(e){function t(e){return e&&"br"===e.name}var n,o;n=e.lastChild,t(n)&&(o=n.prev,t(o)&&(n.remove(),o.remove()))}var c=l.each,f=l.trim,p=e.DOM;return function(e,i){function m(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>","\\s?("+x.join("|")+')="[^"]+"'].join("|"),"gi");return e=u.trim(e.replace(t,""))}function h(e){var t,o,r,s,a,l=e,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=i.schema;for(l=m(l),a=d.getShortEndedElements();s=u.exec(l);)o=u.lastIndex,r=s[0].length,t=a[s[1]]?o:n.findEndTag(d,l,o),l=l.substring(0,o-r)+l.substring(t),u.lastIndex=o-r;return l}function g(){return h(i.getBody().innerHTML)}function v(e){l.inArray(x,e)===-1&&(_.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),x.push(e))}var y,b,_,x=["data-mce-selected"];return i&&(y=i.dom,b=i.schema),y=y||p,b=b||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,_=new t(e,b),_.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,o=e.length;o--;)n=e[o],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),_.addAttributeFilter("src,href,style",function(t,n){for(var o,r,i,s=t.length,a="data-mce-"+n,l=e.url_converter,u=e.url_converter_scope;s--;)o=t[s],r=o.attributes.map[a],r!==i?(o.attr(n,r.length>0?r:null),o.attr(a,null)):(r=o.attributes.map[n],"style"===n?r=y.serializeStyle(y.parseStyle(r),o.name):l&&(r=l.call(u,r,n,o.name)),o.attr(n,r.length>0?r:null))}),_.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),_.addAttributeFilter("data-mce-type",function(e,t,n){for(var o,r=e.length;r--;)o=e[r],"bookmark"!==o.attributes.map["data-mce-type"]||n.cleanup||o.remove()}),_.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)t=e[n].firstChild,t&&(t.value=o.decode(t.value))}),_.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var o,r,i,s=e.length;s--;)o=e[s],r=o.firstChild?o.firstChild.value:"","script"===t?(i=o.attr("type"),i&&o.attr("type","mce-no/type"==i?null:i.replace(/^mce\-/,"")),r.length>0&&(o.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(o.firstChild.value="<!--\n"+n(r)+"\n-->")}),_.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),_.addNodeFilter("xml:namespace,input",function(e,t){for(var n,o=e.length;o--;)n=e[o],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),_.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:b,addNodeFilter:_.addNodeFilter,addAttributeFilter:_.addAttributeFilter,serialize:function(t,n){var o,i,s,l,p,m,h=this;return a.ie&&y.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),y.setHTML(t,p)):t=t.cloneNode(!0),o=document.implementation,o.createHTMLDocument&&(i=o.createHTMLDocument(""),c("BODY"==t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!=t.nodeName?i.body.firstChild:i.body,s=y.doc,y.doc=i),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,h.onPreProcess(n)),m=_.parse(f(n.getInner?t.innerHTML:y.getOuterHTML(t)),n),d(m),l=new r(e,b),n.content=l.serialize(m),n.cleanup||(n.content=u.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||h.onPostProcess(n),s&&(y.doc=s),n.node=null,n.content},addRules:function(e){b.addValidElements(e)},setRules:function(e){b.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)},addTempAttr:v,trimHtml:m,getTrimmedContent:g,trimContent:h}}}),l("tinymce.core.util.VK",["tinymce.core.Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),l("tinymce.core.dom.ControlSelection",["tinymce.core.util.VK","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.dom.NodeType"],function(e,t,n,o,r){function i(e,t){for(;t&&t!=e;){if(a(t)||s(t))return t;t=t.parentNode}return null}var s=r.isContentEditableFalse,a=r.isContentEditableTrue;return function(r,a){function l(e){var t=a.settings.object_resizing;return t!==!1&&!o.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!=a.getBody()&&a.dom.is(e,t)))}function u(t){var n,o,r,i,s;n=t.screenX-R,o=t.screenY-N,F=n*P[2]+O,z=o*P[3]+A,F=F<5?5:F,z=z<5?5:z,r="IMG"==w.nodeName&&a.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==w.nodeName&&P[2]*P[3]!==0,r&&($(n)>$(o)?(z=Y(F*L),F=Y(z/L)):(F=Y(z/L),z=Y(F*L))),W.setStyles(S,{width:F,height:z}),i=P.startPos.x+n,s=P.startPos.y+o,i=i>0?i:0,s=s>0?s:0,W.setStyles(k,{left:i,top:s,display:"block"}),k.innerHTML=F+" &times; "+z,P[2]<0&&S.clientWidth<=F&&W.setStyle(S,"left",M+(O-F)),P[3]<0&&S.clientHeight<=z&&W.setStyle(S,"top",D+(A-z)),n=J.scrollWidth-U,o=J.scrollHeight-H,n+o!==0&&W.setStyles(k,{left:i-n,top:s-o}),B||(a.fire("ObjectResizeStart",{target:w,width:O,height:A}),B=!0)}function d(){function e(e,t){t&&(w.style[e]||!a.schema.isValid(w.nodeName.toLowerCase(),e)?W.setStyle(w,e,t):W.setAttrib(w,e,t))}B=!1,e("width",F),e("height",z),W.unbind(q,"mousemove",u),W.unbind(q,"mouseup",d),G!=q&&(W.unbind(G,"mousemove",u),W.unbind(G,"mouseup",d)),W.remove(S),W.remove(k),K&&"TABLE"!=w.nodeName||c(w),a.fire("ObjectResized",{target:w,width:F,height:z}),W.setAttrib(w,"style",W.getAttrib(w,"style")),a.nodeChanged()}function c(e,t,n){var r,i,s,c,p;f(),x(),r=W.getPos(e,J),M=r.x,D=r.y,p=e.getBoundingClientRect(),i=p.width||p.right-p.left,s=p.height||p.bottom-p.top,w!=e&&(_(),w=e,F=z=0),c=a.fire("ObjectSelected",{target:e}),l(e)&&!c.isDefaultPrevented()?V(T,function(e,r){function a(t){R=t.screenX,N=t.screenY,O=w.clientWidth,A=w.clientHeight,L=A/O,P=e,e.startPos={x:i*e[0]+M,y:s*e[1]+D},U=J.scrollWidth,H=J.scrollHeight,S=w.cloneNode(!0),W.addClass(S,"mce-clonedresizable"),W.setAttrib(S,"data-mce-bogus","all"),S.contentEditable=!1,S.unSelectabe=!0,W.setStyles(S,{left:M,top:D,margin:0}),S.removeAttribute("data-mce-selected"),J.appendChild(S),W.bind(q,"mousemove",u),W.bind(q,"mouseup",d),G!=q&&(W.bind(G,"mousemove",u),W.bind(G,"mouseup",d)),k=W.add(J,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},O+" &times; "+A)}var l;return t?void(r==t&&a(n)):(l=W.get("mceResizeHandle"+r),l&&W.remove(l),l=W.add(J,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),o.ie&&(l.contentEditable=!1),W.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),a(e)}),e.elm=l,void W.setStyles(l,{left:i*e[0]+M-l.offsetWidth/2,top:s*e[1]+D-l.offsetHeight/2}))}):f(),w.setAttribute("data-mce-selected","1")}function f(){var e,t;x(),w&&w.removeAttribute("data-mce-selected");for(e in T)t=W.get("mceResizeHandle"+e),t&&(W.unbind(t),W.remove(t))}function p(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,o;if(!B&&!a.removed)return V(W.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),o="mousedown"==e.type?e.target:r.getNode(),o=W.$(o).closest(K?"table":"table,img,hr")[0],t(o,J)&&(C(),n=r.getStart(!0),t(n,o)&&t(r.getEnd(!0),o)&&(!K||o!=n&&"IMG"!==n.nodeName))?void c(o):void f()}function m(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function g(e){var t,n,o,r,i,s,l,u=e.srcElement;t=u.getBoundingClientRect(),s=I.clientX-t.left,l=I.clientY-t.top;for(n in T)if(o=T[n],r=u.offsetWidth*o[0],i=u.offsetHeight*o[1],$(r-s)<8&&$(i-l)<8){P=o;break}B=!0,a.fire("ObjectResizeStart",{target:w,width:w.clientWidth,height:w.clientHeight}),a.getDoc().selection.empty(),c(u,n,I)}function v(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function y(e){return s(i(a.getBody(),e))}function b(e){var t=e.srcElement;if(y(t))return void v(e);if(t!=w){if(a.fire("ObjectSelected",{target:t}),_(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);"IMG"!=t.nodeName&&"TABLE"!=t.nodeName||(f(),w=t,m(t,"resizestart",g))}}function _(){h(w,"resizestart",g)}function x(){for(var e in T){var t=T[e];t.elm&&(W.unbind(t.elm),delete t.elm)}}function C(){try{a.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function j(e){var t;if(K){t=q.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}}function E(){w=S=null,K&&(_(),h(J,"controlselect",b))}var w,S,k,T,P,I,R,N,M,D,O,A,L,B,F,z,U,H,W=a.dom,V=t.each,q=a.getDoc(),G=document,K=o.ie&&o.ie<11,$=Math.abs,Y=Math.round,J=a.getBody();T={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Z=".mce-content-body";return a.contentStyles.push(Z+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Z+" .mce-resizehandle:hover {background: #000}"+Z+" img[data-mce-selected],"+Z+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Z+" .mce-clonedresizable {position: absolute;"+(o.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Z+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),a.on("init",function(){K?(a.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(f(),j(e.target))}),m(J,"controlselect",b),a.on("mousedown",function(e){I=e})):(C(),o.ie>=11&&(a.on("mousedown click",function(e){var t=e.target,n=t.nodeName;B||!/^(TABLE|IMG|HR)$/.test(n)||y(t)||(a.selection.select(t,"TABLE"==n),"mousedown"==e.type&&a.nodeChanged())}),a.dom.bind(J,"mscontrolselect",function(e){function t(e){n.setEditorTimeout(a,function(){a.selection.select(e)})}return y(e.target)?(e.preventDefault(),void t(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target)))})));var e=n.throttle(function(e){a.composing||p(e)});a.on("nodechange ResizeEditor ResizeWindow drop",e),a.on("keyup compositionend",function(t){w&&"TABLE"==w.nodeName&&e(t)}),a.on("hide blur",f)}),a.on("remove",x),{isResizable:l,showResizeRect:c,hideResizeRect:f,updateResizeRect:p,controlSelect:j,destroy:E}}}),l("tinymce.core.util.Fun",[],function(){function e(e){return function(){return e}}function t(e){return function(t){return!e(t)}}function n(e,t){return function(n){return e(t(n))}}function o(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}function r(){var e=a.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}function i(e){var t=a.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return i.apply(this,e)}}function s(){}var a=[].slice;return{constant:e,negate:t,and:r,or:o,curry:i,compose:n,noop:s}}),l("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(e,t,n){function o(e){return!h(e)&&(c(e)?!f(e.parentNode):p(e)||d(e)||m(e)||u(e))}function r(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(u(e))return!1;if(l(e))return!0}return!0}function i(e){return!!u(e)&&t.reduce(e.getElementsByTagName("*"),function(e,t){return e||l(t)},!1)!==!0}function s(e){return p(e)||i(e)}function a(e,t){return o(e)&&r(e,t)}var l=e.isContentEditableTrue,u=e.isContentEditableFalse,d=e.isBr,c=e.isText,f=e.matchNodeNames("script style textarea"),p=e.matchNodeNames("img input textarea hr iframe video audio object"),m=e.matchNodeNames("table"),h=n.isCaretContainer;return{isCaretCandidate:o,isInEditable:r,isAtomic:s,isEditableCaretCandidate:a}}),l("tinymce.core.geom.ClientRect",[],function(){function e(e){return e?{left:d(e.left),top:d(e.top),bottom:d(e.bottom),right:d(e.right),width:d(e.width),height:d(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function t(t,n){return t=e(t),n?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t}function n(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function o(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function r(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&o(t.top-e.bottom,e,t)}function i(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&o(t.bottom-e.top,e,t)}function s(e,t){return e.left<t.left}function a(e,t){return e.right>t.right}function l(e,t){return r(e,t)?-1:i(e,t)?1:s(e,t)?-1:a(e,t)?1:0}function u(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}var d=Math.round;return{clone:e,collapse:t,isEqual:n,isAbove:r,isBelow:i,isLeft:s,isRight:a,compare:l,containsXY:u}}),l("tinymce.core.text.ExtendingChar",[],function(){function e(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}var t=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");return{isExtendingChar:e}}),l("tinymce.core.caret.CaretPosition",["tinymce.core.util.Fun","tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.dom.RangeUtils","tinymce.core.caret.CaretCandidate","tinymce.core.geom.ClientRect","tinymce.core.text.ExtendingChar"],function(e,t,n,o,r,i,s){function a(e){return"createRange"in e?e.createRange():n.DOM.createRng()}function l(e){return e&&/[\r\n\t ]/.test(e)}function u(e){var t,n=e.startContainer,o=e.startOffset;return!!(l(e.toString())&&v(n.parentNode)&&(t=n.data,l(t[o-1])||l(t[o+1])))}function d(e){function t(e){var t,n=e.ownerDocument,o=a(n),r=n.createTextNode(" "),s=e.parentNode;return s.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1),t=i.clone(o.getBoundingClientRect()),s.removeChild(r),t}function n(e){var n,o;return o=e.getClientRects(),n=o.length>0?i.clone(o[0]):i.clone(e.getBoundingClientRect()),b(e)&&0===n.left?t(e):n}function o(e,t){return e=i.collapse(e,t),e.width=1,e.right=e.left+1,e}function r(e){0!==e.height&&(p.length>0&&i.isEqual(e,p[p.length-1])||p.push(e))}function l(e,t){var i=a(e.ownerDocument);if(t<e.data.length){if(s.isExtendingChar(e.data[t]))return p;if(s.isExtendingChar(e.data[t-1])&&(i.setStart(e,t),i.setEnd(e,t+1),!u(i)))return r(o(n(i),!1)),p}t>0&&(i.setStart(e,t-1),i.setEnd(e,t),u(i)||r(o(n(i),!1))),t<e.data.length&&(i.setStart(e,t),i.setEnd(e,t+1),u(i)||r(o(n(i),!0)))}var d,c,p=[];if(y(e.container()))return l(e.container(),e.offset()),p;if(f(e.container()))if(e.isAtEnd())c=x(e.container(),e.offset()),y(c)&&l(c,c.data.length),g(c)&&!b(c)&&r(o(n(c),!1));else{if(c=x(e.container(),e.offset()),y(c)&&l(c,0),g(c)&&e.isAtEnd())return r(o(n(c),!1)),p;d=x(e.container(),e.offset()-1),g(d)&&!b(d)&&(m(d)||m(c)||!g(c))&&r(o(n(d),!1)),g(c)&&r(o(n(c),!0))}return p}function c(t,n,o){function r(){return y(t)?0===n:0===n}function i(){return y(t)?n>=t.data.length:n>=t.childNodes.length}function s(){var e;return e=a(t.ownerDocument),e.setStart(t,n),e.setEnd(t,n),e}function l(){return o||(o=d(new c(t,n))),o}function u(){return l().length>0}function f(e){return e&&t===e.container()&&n===e.offset()}function p(e){return x(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:s,getClientRects:l,isVisible:u,isAtStart:r,isAtEnd:i,isEqual:f,getNode:p}}var f=t.isElement,p=r.isCaretCandidate,m=t.matchStyleValues("display","block table"),h=t.matchStyleValues("float","left right"),g=e.and(f,p,e.negate(h)),v=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),y=t.isText,b=t.isBr,_=n.nodeIndex,x=o.getNode;return c.fromRangeStart=function(e){return new c(e.startContainer,e.startOffset)},c.fromRangeEnd=function(e){return new c(e.endContainer,e.endOffset)},c.after=function(e){return new c(e.parentNode,_(e)+1)},c.before=function(e){return new c(e.parentNode,_(e))},c.isAtStart=function(e){return!!e&&e.isAtStart()},c.isAtEnd=function(e){return!!e&&e.isAtEnd()},c.isTextPosition=function(e){return!!e&&t.isText(e.container())},c}),l("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(e,t,n,o,r){function i(e){var t=e.parentNode;return v(t)?i(t):t}function s(e){return e?o.reduce(e.childNodes,function(e,t){return v(t)&&"BR"!=t.nodeName?e=e.concat(s(t)):e.push(t),e},[]):[]}function a(e,t){for(;(e=e.previousSibling)&&g(e);)t+=e.data.length;return t}function l(e){return function(t){return e===t}}function u(t){var n,r,a;return n=s(i(t)),r=o.findIndex(n,l(t),t),n=n.slice(0,r+1),a=o.reduce(n,function(e,t,o){return g(t)&&g(n[o-1])&&e++,e},0),n=o.filter(n,e.matchNodeNames(t.nodeName)),r=o.findIndex(n,l(t),t),r-a}function d(e){var t;return t=g(e)?"text()":e.nodeName.toLowerCase(),t+"["+u(e)+"]"}function c(e,t,n){var o=[];for(t=t.parentNode;t!=e&&(!n||!n(t));t=t.parentNode)o.push(t);return o}function f(t,r){var i,s,l,u,f,p=[];return i=r.container(),s=r.offset(),g(i)?l=a(i,s):(u=i.childNodes,s>=u.length?(l="after",s=u.length-1):l="before",i=u[s]),p.push(d(i)),f=c(t,i),f=o.filter(f,n.negate(e.isBogus)),p=p.concat(o.map(f,function(e){return d(e)})),p.reverse().join("/")+","+l}function p(t,n,r){var i=s(t);return i=o.filter(i,function(e,t){return!g(e)||!g(i[t-1])}),i=o.filter(i,e.matchNodeNames(n)),i[r]}function m(e,t){for(var n,o=e,i=0;g(o);){if(n=o.data.length,t>=i&&t<=i+n){e=o,t-=i;break}if(!g(o.nextSibling)){e=o,t=n;break}i+=n,o=o.nextSibling}return t>e.data.length&&(t=e.data.length),new r(e,t)}function h(e,t){var n,i,s;return t?(n=t.split(","),t=n[0].split("/"),s=n.length>1?n[1]:"before",i=o.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),p(e,t[1],parseInt(t[2],10))):null},e),i?g(i)?m(i,parseInt(s,10)):(s="after"===s?y(i)+1:y(i),new r(i.parentNode,s)):null):null}var g=e.isText,v=e.isBogus,y=t.nodeIndex;return{create:f,resolve:h}}),l("tinymce.core.dom.BookmarkManager",["tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a){function l(s){var l=s.dom;this.getBookmark=function(i,c){function f(e,t){var n=0;return a.each(l.select(e),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!=t&&void n++}),n}function p(e){function t(t){var n,o,r,i=t?"start":"end";n=e[i+"Container"],o=e[i+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o)))}return t(!0),t(),e}function m(e){function t(e,t){var o,r=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],s=[],a=0;for(3===r.nodeType?s.push(c?d(r,i):i):(o=r.childNodes,i>=o.length&&o.length&&(a=1,i=Math.max(0,o.length-1)),s.push(l.nodeIndex(o[i],c)+a));r&&r!=n;r=r.parentNode)s.push(l.nodeIndex(r,c));return s}var n=l.getRoot(),o={};return o.start=t(e,!0),s.isCollapsed()||(o.end=t(e)),o}function h(e){function n(e,n){var i;if(o.isElement(e)&&(e=r.getNode(e,n),u(e)))return e;if(t.isCaretContainer(e)){if(o.isText(e)&&t.isCaretContainerBlock(e)&&(e=e.parentNode),i=e.previousSibling,u(i))return i;if(i=e.nextSibling,u(i))return i}}return n(e.startContainer,e.startOffset)||n(e.endContainer,e.endOffset)}var g,v,y,b,_,x,C,j="&#xFEFF;";if(2==i)return x=s.getNode(),_=x?x.nodeName:null,g=s.getRng(),u(x)||"IMG"==_?{name:_,index:f(_,x)}:s.tridentSel?s.tridentSel.getBookmark(i):(x=h(g),x?(_=x.tagName,{name:_,index:f(_,x)}):m(g));if(3==i)return g=s.getRng(),{start:e.create(l.getRoot(),n.fromRangeStart(g)),end:e.create(l.getRoot(),n.fromRangeEnd(g))};if(i)return{rng:s.getRng()};if(g=s.getRng(),y=l.uniqueId(),b=s.isCollapsed(),C="overflow:hidden;line-height:0px",g.duplicate||g.item){if(g.item)return x=g.item(0),_=x.nodeName,{name:_,index:f(_,x)};v=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+y+'_start" style="'+C+'">'+j+"</span>"),b||(v.collapse(!1),g.moveToElementText(v.parentElement()),0===g.compareEndPoints("StartToEnd",v)&&v.move("character",-1),v.pasteHTML('<span data-mce-type="bookmark" id="'+y+'_end" style="'+C+'">'+j+"</span>"))}catch(e){return null}}else{if(x=s.getNode(),_=x.nodeName,"IMG"==_)return{name:_,index:f(_,x)};v=p(g.cloneRange()),b||(v.collapse(!1),v.insertNode(l.create("span",{"data-mce-type":"bookmark",id:y+"_end",style:C},j))),g=p(g),g.collapse(!0),g.insertNode(l.create("span",{"data-mce-type":"bookmark",id:y+"_start",style:C},j))}return s.moveToBookmark({id:y,keep:1}),{id:y}},this.moveToBookmark=function(t){function n(e){var n,o,r,i,s=t[e?"start":"end"];if(s){for(r=s[0],o=c,n=s.length-1;n>=1;n--){if(i=o.childNodes,s[n]>i.length-1)return;o=i[s[n]]}3===o.nodeType&&(r=Math.min(s[0],o.nodeValue.length)),1===o.nodeType&&(r=Math.min(s[0],o.childNodes.length)),e?d.setStart(o,r):d.setEnd(o,r)}return!0}function o(e){var n,o,r,s,u=l.get(t.id+"_"+e),d=t.keep;if(u&&(n=u.parentNode,"start"==e?(d?(n=u.firstChild,o=1):o=l.nodeIndex(u),f=p=n,m=h=o):(d?(n=u.firstChild,o=1):o=l.nodeIndex(u),p=n,h=o),!d)){for(s=u.previousSibling,r=u.nextSibling,a.each(a.grep(u.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=l.get(t.id+"_"+e);)l.remove(u,1);s&&r&&s.nodeType==r.nodeType&&3==s.nodeType&&!i.opera&&(o=s.nodeValue.length,s.appendData(r.nodeValue),l.remove(r),"start"==e?(f=p=s,m=h=o):(p=s,h=o))}}function r(e){return!l.isBlock(e)||e.innerHTML||i.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e}function u(){var n,o;return n=l.createRng(),o=e.resolve(l.getRoot(),t.start),n.setStart(o.container(),o.offset()),o=e.resolve(l.getRoot(),t.end),n.setEnd(o.container(),o.offset()),n}var d,c,f,p,m,h;if(t)if(a.isArray(t.start)){if(d=l.createRng(),c=l.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(t);n(!0)&&n()&&s.setRng(d)}else"string"==typeof t.start?s.setRng(u(t)):t.id?(o("start"),o("end"),f&&(d=l.createRng(),d.setStart(r(f),m),d.setEnd(r(p),h),s.setRng(d))):t.name?s.select(l.select(t.name)[t.index]):t.rng&&s.setRng(t.rng)}}var u=o.isContentEditableFalse,d=function(e,t){var n,o;for(o=s.trim(e.data.slice(0,t)).length,n=e.previousSibling;n&&3===n.nodeType;n=n.previousSibling)o+=s.trim(n.data).length;return o};return l.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},l}),l("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(e){var t=function(e){for(var t=0,n=0,o=e;o&&o.nodeType;)t+=o.offsetLeft||0,n+=o.offsetTop||0,o=o.offsetParent;return{x:t,y:n}},n=function(e,t,n){var o={elm:t,alignToTop:n};return e.fire("scrollIntoView",o),o.isDefaultPrevented()},o=function(o,r,i){var s,a,l,u,d=o.dom,c=d.getRoot(),f=0;if(!n(o,r,i)&&e.isElement(r)){if(i===!1&&(f=r.offsetHeight),"BODY"!==c.nodeName){var p=o.selection.getScrollContainer();if(p)return s=t(r).y-t(p).y+f,u=p.clientHeight,l=p.scrollTop,void((s<l||s+25>l+u)&&(p.scrollTop=s<l?s:s-u+25))}a=d.getViewPort(o.getWin()),s=d.getPos(r).y+f,l=a.y,u=a.h,(s<a.y||s+25>l+u)&&o.getWin().scrollTo(0,s<l?s:s-u+25)}};return{scrollIntoView:o}}),l("tinymce.core.dom.TridentSelection",[],function(){function e(e){function t(t,n){var o,r,i,s,a,l,u,d,c=0,f=-1;if(o=t.duplicate(),o.collapse(n),d=o.parentElement(),d.ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(s=d.children,r=s.length-1;c<=r;)if(u=Math.floor((c+r)/2),a=s[u],o.moveToElementText(a),f=o.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)r=u-1;else{if(!(f<0))return{node:a};c=u+1}if(f<0)for(a?o.collapse(!1):(o.moveToElementText(d),o.collapse(!0),a=d,i=!0),l=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",1)&&d==o.parentElement();)l++;else for(o.collapse(!0),l=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",-1)&&d==o.parentElement();)l++;return{node:a,position:f,offset:l,inside:i}}}function n(){function n(e){var n,o,r,i,s,a=t(d,e),l=0;if(n=a.node,o=a.offset,a.inside&&!n.hasChildNodes())return void c[e?"setStart":"setEnd"](n,0);if(o===i)return void c[e?"setStartBefore":"setEndAfter"](n);if(a.position<0){if(r=a.inside?n.firstChild:n.nextSibling,!r)return void c[e?"setStartAfter":"setEndAfter"](n);if(!o)return void(3==r.nodeType?c[e?"setStart":"setEnd"](r,0):c[e?"setStartBefore":"setEndBefore"](r));for(;r;){if(3==r.nodeType&&(s=r.nodeValue,l+=s.length,l>=o)){n=r,l-=o,l=s.length-l;break}r=r.nextSibling}}else{if(r=n.previousSibling,!r)return c[e?"setStartBefore":"setEndBefore"](n);if(!o)return void(3==n.nodeType?c[e?"setStart":"setEnd"](r,n.nodeValue.length):c[e?"setStartAfter":"setEndAfter"](r));for(;r;){if(3==r.nodeType&&(l+=r.nodeValue.length,l>=o)){n=r,l-=o;break}r=r.previousSibling}}c[e?"setStart":"setEnd"](n,l)}var i,s,a,l,u,d=e.getRng(),c=r.createRng();if(i=d.item?d.item(0):d.parentElement(),
i.ownerDocument!=r.doc)return c;if(s=e.isCollapsed(),d.item)return c.setStart(i.parentNode,r.nodeIndex(i)),c.setEnd(c.startContainer,c.startOffset+1),c;try{n(!0),s||n()}catch(t){if(t.number!=-2147024809)throw t;u=o.getBookmark(2),a=d.duplicate(),a.collapse(!0),i=a.parentElement(),s||(a=d.duplicate(),a.collapse(!1),l=a.parentElement(),l.innerHTML=l.innerHTML),i.innerHTML=i.innerHTML,o.moveToBookmark(u),d=e.getRng(),n(!0),s||n()}return c}var o=this,r=e.dom,i=!1;this.getBookmark=function(n){function o(e){var t,n,o,i,s=[];for(t=e.parentNode,n=r.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(o=t.children,i=o.length;i--;)if(e===o[i]){s.push(i);break}e=t,t=t.parentNode}return s}function i(e){var n;if(n=t(s,e))return{position:n.position,offset:n.offset,indexes:o(n.node),inside:n.inside}}var s=e.getRng(),a={};return 2===n&&(s.item?a.start={ctrl:!0,indexes:o(s.item(0))}:(a.start=i(!0),e.isCollapsed()||(a.end=i()))),a},this.moveToBookmark=function(e){function t(e){var t,n,o,i;for(t=r.getRoot(),n=e.length-1;n>=0;n--)i=t.children,o=e[n],o<=i.length-1&&(t=i[o]);return t}function n(n){var r,s,a,l,u=e[n?"start":"end"];u&&(r=u.position>0,s=i.createTextRange(),s.moveToElementText(t(u.indexes)),l=u.offset,l!==a?(s.collapse(u.inside||r),s.moveStart("character",r?-l:l)):s.collapse(n),o.setEndPoint(n?"StartToStart":"EndToStart",s),n&&o.collapse(!0))}var o,i=r.doc.body;e.start&&(e.start.ctrl?(o=i.createControlRange(),o.addElement(t(e.start.indexes)),o.select()):(o=i.createTextRange(),n(!0),n(),o.select()))},this.addRange=function(t){function n(e){var t,n,s,c,f;s=r.create("a"),t=e?a:u,n=e?l:d,c=o.duplicate(),t!=m&&t!=m.documentElement||(t=h,n=0),3==t.nodeType?(t.parentNode.insertBefore(s,t),c.moveToElementText(s),c.moveStart("character",n),r.remove(s),o.setEndPoint(e?"StartToStart":"EndToEnd",c)):(f=t.childNodes,f.length?(n>=f.length?r.insertAfter(s,f[f.length-1]):t.insertBefore(s,f[n]),c.moveToElementText(s)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",s=t.firstChild,c.moveToElementText(s),c.collapse(i)),o.setEndPoint(e?"StartToStart":"EndToEnd",c),r.remove(s))}var o,s,a,l,u,d,c,f,p,m=e.dom.doc,h=m.body;if(a=t.startContainer,l=t.startOffset,u=t.endContainer,d=t.endOffset,o=h.createTextRange(),a==u&&1==a.nodeType){if(l==d&&!a.hasChildNodes()){if(a.canHaveHTML)return c=a.previousSibling,c&&!c.hasChildNodes()&&r.isBlock(c)?c.innerHTML="&#xFEFF;":c=null,a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",o.moveToElementText(a.lastChild),o.select(),r.doc.selection.clear(),a.innerHTML="",void(c&&(c.innerHTML=""));l=r.nodeIndex(a),a=a.parentNode}if(l==d-1)try{if(p=a.childNodes[l],s=h.createControlRange(),s.addElement(p),s.select(),f=e.getRng(),f.item&&p===f.item(0))return}catch(e){}}n(!0),n(),o.select()},this.getRangeAt=n}return e}),l("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(null===n)return"null";var o=typeof n;return"object"===o&&e.prototype.isPrototypeOf(n)?"array":"object"===o&&t.prototype.isPrototypeOf(n)?"string":o},o=function(e){return function(t){return n(t)===e}};return{isString:o("string"),isObject:o("object"),isArray:o("array"),isNull:o("null"),isBoolean:o("boolean"),isUndefined:o("undefined"),isFunction:o("function"),isNumber:o("number")}}),l("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,o){return function(){var r=arguments;return function(){for(var i=new n(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];if(r.length!==i.length)throw new o('Wrong number of arguments to struct. Expected "['+r.length+']", got '+i.length+" arguments");var a={};return e.each(r,function(e,n){a[e]=t.constant(i[n])}),a}}}),l("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return void 0===e?n:e}(),o=function(e,t){for(var o=n(e),r=0,i=o.length;r<i;r++){var s=o[r],a=e[s];t(a,s,e)}},r=function(e,t){return i(e,function(e,n,o){return{k:n,v:t(e,n,o)}})},i=function(e,t){var n={};return o(e,function(o,r){var i=t(o,r,e);n[i.k]=i.v}),n},s=function(e,t){var n={},r={};return o(e,function(e,o){var i=t(e,o)?n:r;i[o]=e}),{t:n,f:r}},a=function(e,t){var n=[];return o(e,function(e,o){n.push(t(e,o))}),n},l=function(t,o){for(var r=n(t),i=0,s=r.length;i<s;i++){var a=r[i],l=t[a];if(o(l,a,t))return e.some(l)}return e.none()},u=function(e){return a(e,function(e){return e})},d=function(e){return u(e).length};return{bifilter:s,each:o,map:r,mapToArray:a,tupleMap:i,find:l,keys:n,values:u,size:d}}),l("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var o=function(e){return e.slice(0).sort()},r=function(e,t){throw new n("All required keys ("+o(e).join(", ")+") were not specified. Specified keys were: "+o(t).join(", ")+".")},i=function(e){throw new n("Unsupported keys for object: "+o(e).join(", "))},s=function(o,r){if(!t.isArray(r))throw new n("The "+o+" fields must be an array. Was: "+r+".");e.each(r,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+o+" fields was not a string.")})},a=function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+o(e).join(", ")+") were not.")},l=function(t){var r=o(t),i=e.find(r,function(e,t){return t<r.length-1&&e===r[t+1]});i.each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})};return{sort:o,reqMessage:r,unsuppMessage:i,validateStrArr:s,invalidTypeMessage:a,checkDupes:l}}),l("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,o,r,i,s){return function(a,l){var u=a.concat(l);if(0===u.length)throw new i("You must specify at least one required or optional field.");return r.validateStrArr("required",a),r.validateStrArr("optional",l),r.checkDupes(u),function(i){var d=n.keys(i),c=e.forall(a,function(t){return e.contains(d,t)});c||r.reqMessage(a,d);var f=e.filter(d,function(t){return!e.contains(u,t)});f.length>0&&r.unsuppMessage(f);var p={};return e.each(a,function(e){p[e]=t.constant(i[e])}),e.each(l,function(e){p[e]=t.constant(s.prototype.hasOwnProperty.call(i,e)?o.some(i[e]):o.none())}),p}}}),l("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),l("ephox.sugar.alien.Recurse",[],function(){var e=function(e,t){var n=[],o=function(e){return n.push(e),t(e)},r=t(e);do r=r.bind(o);while(r.isSome());return n};return{toArray:e}}),l("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),l("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var o=void 0!==n?n:e,r=0;r<t.length&&void 0!==o&&null!==o;++r)o=o[t[r]];return o},n=function(e,n){var o=e.split(".");return t(o,n)},o=function(e,t){return void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},r=function(t,n){for(var r=void 0!==n?n:e,i=0;i<t.length;++i)r=o(r,t[i]);return r},i=function(e,t){var n=e.split(".");return r(n,t)};return{path:t,resolve:n,forge:r,namespace:i}}),l("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)},n=function(e,n){var o=t(e,n);if(void 0===o)throw e+" not available on this browser";return o};return{getOrDie:n}}),l("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){var t=e.getOrDie("Node");return t},n=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},o=function(e,o){return n(e,o,t().DOCUMENT_POSITION_PRECEDING)},r=function(e,o){return n(e,o,t().DOCUMENT_POSITION_CONTAINED_BY)};return{documentPositionPreceding:o,documentPositionContainedBy:r}}),l("ephox.katamari.api.Thunk",[],function(){var e=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}};return{cached:e}}),u("global!Number",Number),l("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var o=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}},r=function(e,n){var r=o(e,n);if(!r)return{major:0,minor:0};var i=function(e){return t(n.replace(r,"$"+e))};return a(i(1),i(2))},i=function(e,t){var o=n(t).toLowerCase();return 0===e.length?s():r(e,o)},s=function(){return a(0,0)},a=function(e,t){return{major:e,minor:t}};return{nu:a,detect:i,unknown:s}}),l("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge",o="Chrome",r="IE",i="Opera",s="Firefox",a="Safari",l=function(e,t){return function(){return t===e}},u=function(){return d({current:void 0,version:t.unknown()})},d=function(e){var t=e.current,u=e.version;return{current:t,version:u,isEdge:l(n,t),isChrome:l(o,t),isIE:l(r,t),isOpera:l(i,t),isFirefox:l(s,t),isSafari:l(a,t)}};return{unknown:u,nu:d,edge:e.constant(n),chrome:e.constant(o),ie:e.constant(r),opera:e.constant(i),firefox:e.constant(s),safari:e.constant(a)}}),l("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows",o="iOS",r="Android",i="Linux",s="OSX",a="Solaris",l="FreeBSD",u=function(e,t){return function(){return t===e}},d=function(){return c({current:void 0,version:t.unknown()})},c=function(e){var t=e.current,d=e.version;return{current:t,version:d,isWindows:u(n,t),isiOS:u(o,t),isAndroid:u(r,t),isOSX:u(s,t),isLinux:u(i,t),isSolaris:u(a,t),isFreeBSD:u(l,t)}};return{unknown:d,nu:c,windows:e.constant(n),ios:e.constant(o),android:e.constant(r),linux:e.constant(i),osx:e.constant(s),solaris:e.constant(a),freebsd:e.constant(l)}}),l("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,o){var r=t.isiOS()&&/ipad/i.test(o)===!0,i=t.isiOS()&&!r,s=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,l=r||s||a&&/mobile/i.test(o)===!0,u=t.isiOS()||t.isAndroid(),d=u&&!l,c=n.isSafari()&&t.isiOS()&&/safari/i.test(o)===!1;return{isiPad:e.constant(r),isiPhone:e.constant(i),isTablet:e.constant(l),isPhone:e.constant(d),isTouch:e.constant(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(c)}}}),l("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var o=function(t,o){var r=n(o).toLowerCase();return e.find(t,function(e){return e.search(r)})},r=function(e,n){return o(e,n).map(function(e){var o=t.detect(e.versionRegexes,n);return{current:e.name,version:o}})},i=function(e,n){return o(e,n).map(function(e){var o=t.detect(e.versionRegexes,n);return{current:e.name,version:o}})};return{detectBrowser:r,detectOs:i}}),l("ephox.katamari.str.StrAppend",[],function(){var e=function(e,t){return t+e},t=function(e,t){return e+t},n=function(e,t){return e.substring(t)},o=function(e,t){return e.substring(0,e.length-t)};return{addToStart:e,addToEnd:t,removeFromStart:n,removeFromEnd:o}}),l("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){var n=function(e,t){return e.substr(0,t)},o=function(e,t){return e.substr(e.length-t,e.length)},r=function(t){return""===t?e.none():e.some(t.substr(0,1))},i=function(t){return""===t?e.none():e.some(t.substring(1))};return{first:n,last:o,head:r,tail:i}}),l("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var o=function(e,t,n){if(""===t)return!0;if(e.length<t.length)return!1;var o=e.substr(n,n+t.length);return o===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,o){var r=t[o];return n(r)?r:e})},i=function(t,n){return c(t,n)?e.removeFromStart(t,n.length):t},s=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return c(t,n)?t:e.addToStart(t,n)},l=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},u=function(e,t){return e.indexOf(t)!==-1},d=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},c=function(e,t){return o(e,t,0)},f=function(e,t){return o(e,t,e.length-t.length)},p=function(e){return e.replace(/^\s+|\s+$/g,"")},m=function(e){return e.replace(/^\s+/g,"")},h=function(e){return e.replace(/\s+$/g,"")};return{supplant:r,startsWith:c,removeLeading:i,removeTrailing:s,ensureLeading:a,ensureTrailing:l,endsWith:f,contains:u,trim:p,lTrim:m,rTrim:h,capitalize:d}}),l("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,o=function(e){return function(n){return t.contains(n,e)}},r=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var n=t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit");return n}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:o("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:o("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:o("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:o("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:o("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:o("linux"),versionRegexes:[]},{name:"Solaris",search:o("sunos"),versionRegexes:[]},{name:"FreeBSD",search:o("freebsd"),versionRegexes:[]}];return{browsers:e.constant(r),oses:e.constant(i)}}),l("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,o,r){var i=function(i){var s=r.browsers(),a=r.oses(),l=o.detectBrowser(s,i).fold(e.unknown,e.nu),u=o.detectOs(a,i).fold(t.unknown,t.nu),d=n(u,l,i);return{browser:l,os:u,deviceType:d}};return{detect:i}}),u("global!navigator",navigator),l("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){var o=e.cached(function(){var e=n.userAgent;return t.detect(e)});return{detect:o}}),l("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),u("global!document",document),l("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,o){var r=function(e,t){var r=t||o,i=r.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return a(i.childNodes[0])},i=function(e,t){var n=t||o,r=n.createElement(e);return a(r)},s=function(e,t){var n=t||o,r=n.createTextNode(e);return a(r)},a=function(n){if(null===n||void 0===n)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:r,fromTag:i,fromText:s,fromDom:a}}),l("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),l("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,o,r,i){var s=0,a=1,l=2,u=3,d=function(){var e=i.createElement("span");return void 0!==e.matches?s:void 0!==e.msMatchesSelector?a:void 0!==e.webkitMatchesSelector?l:void 0!==e.mozMatchesSelector?u:-1}(),c=o.ELEMENT,f=o.DOCUMENT,p=function(e,t){var n=e.dom();if(n.nodeType!==c)return!1;if(d===s)return n.matches(t);if(d===a)return n.msMatchesSelector(t);if(d===l)return n.webkitMatchesSelector(t);if(d===u)return n.mozMatchesSelector(t);throw new r("Browser lacks native selectors")},m=function(e){return e.nodeType!==c&&e.nodeType!==f||0===e.childElementCount},h=function(t,o){var r=void 0===o?i:o.dom();return m(r)?[]:e.map(r.querySelectorAll(t),n.fromDom)},g=function(e,o){var r=void 0===o?i:o.dom();return m(r)?t.none():t.from(r.querySelector(e)).map(n.fromDom)};return{all:h,is:p,one:g}}),l("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,o,r){var i=function(e,t){return e.dom()===t.dom()},s=function(e,t){return e.dom().isEqualNode(t.dom())},a=function(n,o){return e.exists(o,t.curry(i,n))},l=function(e,t){var n=e.dom(),o=t.dom();return n!==o&&n.contains(o)},u=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())},d=o.detect().browser,c=d.isIE()?u:l;return{eq:i,isEqualNode:s,member:a,contains:c,is:r.is}}),l("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,o,r,i,s,a){var l=function(e){return a.fromDom(e.dom().ownerDocument)},u=function(e){var t=l(e);return a.fromDom(t.dom().documentElement)},d=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return a.fromDom(n)},c=function(e){var t=e.dom();return o.from(t.parentNode).map(a.fromDom)},f=function(e){return c(e).bind(function(n){var o=_(n);return t.findIndex(o,function(t){return s.eq(e,t)})})},p=function(t,o){for(var r=e.isFunction(o)?o:n.constant(!1),i=t.dom(),s=[];null!==i.parentNode&&void 0!==i.parentNode;){var l=i.parentNode,u=a.fromDom(l);if(s.push(u),r(u)===!0)break;i=l}return s},m=function(e){var n=function(n){return t.filter(n,function(t){return!s.eq(e,t)})};return c(e).map(_).map(n).getOr([])},h=function(e){var t=e.dom();return o.from(t.offsetParent).map(a.fromDom)},g=function(e){var t=e.dom();return o.from(t.previousSibling).map(a.fromDom)},v=function(e){var t=e.dom();return o.from(t.nextSibling).map(a.fromDom)},y=function(e){return t.reverse(i.toArray(e,g))},b=function(e){return i.toArray(e,v)},_=function(e){var n=e.dom();return t.map(n.childNodes,a.fromDom)},x=function(e,t){var n=e.dom().childNodes;return o.from(n[t]).map(a.fromDom)},C=function(e){return x(e,0)},j=function(e){return x(e,e.dom().childNodes.length-1)},E=r.immutable("element","offset"),w=function(e,t){var n=_(e);return n.length>0&&t<n.length?E(n[t],0):E(e,t)};return{owner:l,defaultView:d,documentElement:u,parent:c,findIndex:f,parents:p,siblings:m,prevSibling:g,offsetParent:h,prevSiblings:y,nextSibling:v,nextSiblings:b,children:_,child:x,firstChild:C,lastChild:j,leaf:w}}),l("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){var o=e.parent(t);o.each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(n,o){var i=e.nextSibling(n);i.fold(function(){var t=e.parent(n);t.each(function(e){r(e,o)})},function(e){t(e,o)})},o=function(t,n){var o=e.firstChild(t);o.fold(function(){r(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},r=function(e,t){e.dom().appendChild(t.dom())},i=function(n,o,i){e.child(n,i).fold(function(){r(n,o)},function(e){t(e,o)})},s=function(e,n){t(e,n),r(n,e)};return{before:t,after:n,prepend:o,append:r,appendAt:i,wrap:s}}),l("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){var t=e.dom().nodeName;return t.toLowerCase()},n=function(e){return e.dom().nodeType},o=function(e){return e.dom().nodeValue},r=function(e){return function(t){return n(t)===e}},i=function(o){return n(o)===e.COMMENT||"#comment"===t(o)},s=r(e.ELEMENT),a=r(e.TEXT),l=r(e.DOCUMENT);return{name:t,type:n,value:o,isElement:s,isText:a,isDocument:l,isComment:i}}),l("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,o,r,i){var s=function(t,n,o){if(!(e.isString(o)||e.isBoolean(o)||e.isNumber(o)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",o,":: Element ",t),new r("Attribute value was not simple");t.setAttribute(n,o+"")},a=function(e,t,n){s(e.dom(),t,n)},l=function(e,t){var o=e.dom();n.each(t,function(e,t){s(o,t,e)})},u=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},d=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},c=function(e,t){e.dom().removeAttribute(t)},f=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},p=function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},m=function(e,t,n){d(e,n)&&!d(t,n)&&a(t,n,u(e,n))},h=function(e,n,r){o.isElement(e)&&o.isElement(n)&&t.each(r,function(t){m(e,n,t)})};return{clone:p,set:a,setAll:l,get:u,has:d,remove:c,hasNone:f,transfer:h}}),l("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){var n=function(n,o){e.each(o,function(e){t.before(n,e)})},o=function(n,o){e.each(o,function(e,r){var i=0===r?n:o[r-1];t.after(i,e)})},r=function(n,o){e.each(o.slice().reverse(),function(e){t.prepend(n,e)})},i=function(n,o){e.each(o,function(e){t.append(n,e)})};return{before:n,after:o,prepend:r,append:i}}),l("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var o=function(t){t.dom().textContent="",e.each(n.children(t),function(e){r(e)})},r=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},i=function(e){var o=n.children(e);o.length>0&&t.before(e,o),r(e)};return{empty:o,remove:r,unwrap:i}}),l("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,o,r,i){var s=function(e,n){return t.fromDom(e.dom().cloneNode(n))},a=function(e){return s(e,!1)},l=function(e){return s(e,!0)},u=function(n,o){var r=t.fromTag(o),i=e.clone(n);return e.setAll(r,i),r},d=function(e,t){var n=u(e,t),r=i.children(l(e));return o.append(n,r),n},c=function(e,t){var s=u(e,t);n.before(e,s);var a=i.children(e);return o.append(s,a),r.remove(e),s};return{shallow:a,shallowAs:u,deep:l,copy:d,mutate:c}}),l("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){var o=function(o,r){var i=r||n,s=i.createDocumentFragment();return e.each(o,function(e){s.appendChild(e.dom())}),t.fromDom(s)};return{fromElements:o}}),l("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(e,t,n){var o=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],r=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],i=["td","th"],s=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],a=["h1","h2","h3","h4","h5","h6"],l=function(o){var r;return function(i){return r=r?r:e.mapToObject(o,t.constant(!0)),r.hasOwnProperty(n.name(i))}},u=l(a),d=l(o),c=function(e){return n.isElement(e)&&!d(e)};return{isBlock:d,isInline:c,isHeading:u,isTextBlock:l(s),isVoid:l(r),isTableCell:l(i)}}),l("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n){var o=function(e){return e.slice(0,-1)},r=function(e,r,i){return t.contains(r,e)?o(n.parents(e,function(e){return i(e)||t.eq(e,r)})):[]},i=function(t,n){return r(t,n,e.constant(!1))},s=function(e,t){return[e].concat(i(e,t))};return{parentsUntil:r,parents:i,parentsAndSelf:s}}),l("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){var t=function(e){for(var t=[],n=function(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},n=function(t,n){for(var o=0;o<t.length;o++){var r=n(t[o],o);if(r.isSome())return r}return e.none()},o=function(t,n){for(var o=[],r=0;r<t.length;r++){var i=t[r];if(!i.isSome())return e.none();o.push(i.getOrDie())}return e.some(n.apply(null,o))};return{cat:t,findMap:n,liftN:o}}),l("tinymce.core.selection.SelectionUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l){var u=function(e){var t=e.startContainer,o=e.startOffset;return l.isText(t)?0===o?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[o]).map(i.fromDom)},d=function(e){var t=e.endContainer,o=e.endOffset;return l.isText(t)?o===t.data.length?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[o-1]).map(i.fromDom)},c=function(e){return a.firstChild(e).fold(t.constant([e]),function(t){return[e].concat(c(t))})},f=function(e){return a.lastChild(e).fold(t.constant([e]),function(t){return"br"===s.name(t)?a.prevSibling(t).map(function(t){return[e].concat(f(t))}).getOr([]):[e].concat(f(t))})},p=function(n,i){return o.liftN([u(i),d(i)],function(o,i){var s=e.find(c(n),t.curry(r.eq,o)),a=e.find(f(n),t.curry(r.eq,i));return s.isSome()&&a.isSome()}).getOr(!1)};return{hasAllContentsSelected:p}}),l("tinymce.core.selection.FragmentReader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils"],function(e,t,n,o,r,i,s,a,l,u){var d=function(t){return e.find(t,function(e){return"ul"===s.name(e)||"ol"===s.name(e)})},c=function(n,o){return e.find(n,function(e){return"li"===s.name(e)&&u.hasAllContentsSelected(e,o)}).fold(t.constant([]),function(e){return d(n).map(function(e){return[r.fromTag("li"),r.fromTag(s.name(e))]}).getOr([])})},f=function(t,o){var r=e.foldl(o,function(e,t){return n.append(t,e),t},t);return o.length>0?i.fromElements([r]):r},p=function(t,n){var i=l.parentsAndSelf(r.fromDom(n.commonAncestorContainer),r.fromDom(t)),s=e.filter(i,function(e){return a.isInline(e)||a.isHeading(e)}),u=c(i,n);return e.map(s.concat(u),o.shallow)},m=function(e,t){return f(r.fromDom(t.cloneContents()),p(e,t))},h=function(e,t){return t.collapsed?i.fromElements([]):m(e,t)};return{read:h}}),l("tinymce.core.dom.Selection",["tinymce.core.caret.CaretPosition","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ControlSelection","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TreeWalker","tinymce.core.dom.TridentSelection","tinymce.core.Env","tinymce.core.selection.FragmentReader","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l,u,d,c){function f(e,o,r,i){var s=this;s.dom=e,s.win=o,s.serializer=r,s.editor=i,s.bookmarkManager=new t(s),s.controlSelection=new n(s,i),s.win.getSelection||(s.tridentSel=new a(s))}var p=c.each,m=c.trim,h=l.ie,g=function(e){if(e){if(e.select)return!0;var t=e.startContainer,n=e.endContainer;return!!(t&&t.parentNode&&n&&n.parentNode)}return!1};return f.prototype={setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();e?(o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)):(n._moveEndPoint(o,n.editor.getBody(),!0),n.setRng(o))},getContent:function(e){var t,n,o,r=this,i=r.getRng(),s=r.dom.create("body"),a=r.getSel();return e=e||{},t=n="",e.get=!0,e.format=e.format||"html",e.selection=!0,r.editor.fire("BeforeGetContent",e),"text"===e.format?r.isCollapsed()?"":d.trim(i.text||(a.toString?a.toString():"")):(i.cloneContents?(o=e.contextual?u.read(r.editor.getBody(),i).dom():i.cloneContents(),o&&s.appendChild(o)):void 0!==i.item||void 0!==i.htmlText?(s.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),s.removeChild(s.firstChild)):s.innerHTML=i.toString(),/^\s/.test(s.innerHTML)&&(t=" "),/\s+$/.test(s.innerHTML)&&(n=" "),e.getInner=!0,e.content=r.isCollapsed()?"":t+r.serializer.serialize(s,e)+n,r.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,o,r,i=this,s=i.getRng(),a=i.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,t.content=e,t.no_events||i.editor.fire("BeforeSetContent",t),e=t.content,s.insertNode){e+='<span id="__caret">_</span>',s.startContainer==a&&s.endContainer==a?a.body.innerHTML=e:(s.deleteContents(),0===a.body.childNodes.length?a.body.innerHTML=e:s.createContextualFragment?s.insertNode(s.createContextualFragment(e)):(o=a.createDocumentFragment(),r=a.createElement("div"),o.appendChild(r),r.outerHTML=e,s.insertNode(o))),n=i.dom.get("__caret"),s=a.createRange(),s.setStartBefore(n),s.setEndBefore(n),i.setRng(s),i.dom.remove("__caret");try{i.setRng(s)}catch(e){}}else s.item&&(a.execCommand("Delete",!1,null),s=i.getRng()),/^\s+/.test(e)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+e),i.dom.remove("__mce_tmp")):s.pasteHTML(e);t.no_events||i.editor.fire("SetContent",t)},getStart:function(e){var t,n,o,r,i=this,s=i.getRng();if(s.duplicate||s.item){if(s.item)return s.item(0);for(o=s.duplicate(),o.collapse(1),t=o.parentElement(),t.ownerDocument!==i.dom.doc&&(t=i.dom.getRoot()),n=r=s.parentElement();r=r.parentNode;)if(r==t){t=n;break}return t}return t=s.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&s.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,s.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,o=this,r=o.getRng();return r.duplicate||r.item?r.item?r.item(0):(r=r.duplicate(),r.collapse(0),t=r.parentElement(),t.ownerDocument!==o.dom.doc&&(t=o.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=r.endContainer,n=r.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&r.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,o=this,r=o.dom,i=r.createRng();if(o.lastFocusBookmark=null,e){if(!t&&o.controlSelection.controlSelect(e))return;n=r.nodeIndex(e),i.setStart(e.parentNode,n),i.setEnd(e.parentNode,n+1),t&&(o._moveEndPoint(i,e,!0),o._moveEndPoint(i,e)),o.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,o=n.getRng();o.item&&(t=o.item(0),o=n.win.document.body.createTextRange(),o.moveToElementText(t)),o.collapse(!!e),n.setRng(o)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var n,o,r,i,s,a,l=this;if(!l.win)return null;
if(i=l.win.document,"undefined"==typeof i||null===i)return null;if(!e&&l.lastFocusBookmark){var u=l.lastFocusBookmark;return u.startContainer?(o=i.createRange(),o.setStart(u.startContainer,u.startOffset),o.setEnd(u.endContainer,u.endOffset)):o=u,o}if(e&&l.tridentSel)return l.tridentSel.getRangeAt(0);try{(n=l.getSel())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():i.createRange())}catch(e){}if(a=l.editor.fire("GetSelectionRange",{range:o}),a.range!==o)return a.range;if(h&&o&&o.setStart&&i.selection){try{s=i.selection.createRange()}catch(e){}s&&s.item&&(r=s.item(0),o=i.createRange(),o.setStartBefore(r),o.setEndAfter(r))}return o||(o=i.createRange?i.createRange():i.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(r=l.dom.getRoot(),o.setStart(r,0),o.setEnd(r,0)),l.selectedRange&&l.explicitRange&&(0===t(o.START_TO_START,o,l.selectedRange)&&0===t(o.END_TO_END,o,l.selectedRange)?o=l.explicitRange:(l.selectedRange=null,l.explicitRange=null)),o},setRng:function(e,t){var n,o,r,i=this;if(g(e))if(e.select){i.explicitRange=null;try{e.select()}catch(e){}}else if(i.tridentSel){if(e.cloneRange)try{i.tridentSel.addRange(e)}catch(e){}}else{if(n=i.getSel(),r=i.editor.fire("SetSelectionRange",{range:e,forward:t}),e=r.range,n){i.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||l.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset],o&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1))),i.editor.fire("AfterSetSelectionRange",{range:e,forward:t})}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n,o,r,i,s=this,a=s.getRng(),l=s.dom.getRoot();return a?(n=a.startContainer,o=a.endContainer,r=a.startOffset,i=a.endOffset,a.setStart?(t=a.commonAncestorContainer,!a.collapsed&&(n==o&&i-r<2&&n.hasChildNodes()&&(t=n.childNodes[r]),3===n.nodeType&&3===o.nodeType&&(n=n.length===r?e(n.nextSibling,!0):n.parentNode,o=0===i?e(o.previousSibling,!1):o.parentNode,n&&n===o))?n:t&&3==t.nodeType?t.parentNode:t):(t=a.item?a.item(0):a.parentElement(),t.ownerDocument!==s.win.document&&(t=l),t)):l},getSelectedBlocks:function(e,t){var n,o,r=this,i=r.dom,a=[];if(o=i.getRoot(),e=i.getParent(e||r.getStart(),i.isBlock),t=i.getParent(t||r.getEnd(),i.isBlock),e&&e!=o&&a.push(e),e&&t&&e!=t){n=e;for(var l=new s(e,o);(n=l.next())&&n!=t;)i.isBlock(n)&&a.push(n)}return t&&e!=t&&t!=o&&a.push(t),a},isForward:function(){var e,t,n=this.dom,o=this.getSel();return!(o&&o.anchorNode&&o.focusNode)||(e=n.createRng(),e.setStart(o.anchorNode,o.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(o.focusNode,o.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this,t=e.getRng();return l.range&&new r(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,o=this;return o.selectorChangedData||(o.selectorChangedData={},n={},o.editor.on("NodeChange",function(e){var t=e.element,r=o.dom,i=r.getParents(t,null,r.getRoot()),s={};p(o.selectorChangedData,function(e,t){p(i,function(o){if(r.is(o,t))return n[t]||(p(e,function(e){e(!0,{node:o,selector:t,parents:i})}),n[t]=e),s[t]=e,!1})}),p(n,function(e,o){s[o]||(delete n[o],p(e,function(e){e(!1,{node:t,selector:o,parents:i})}))})})),o.selectorChangedData[e]||(o.selectorChangedData[e]=[]),o.selectorChangedData[e].push(t),o},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){i.scrollIntoView(this.editor,e,t)},placeCaretAt:function(e,t){this.setRng(r.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,n){var o=t,r=new s(t,o),i=this.dom.schema.getNonEmptyElements();do{if(3==t.nodeType&&0!==m(t.nodeValue).length)return void(n?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if(i[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName))return void(n?e.setStartBefore(t):"BR"==t.nodeName?e.setEndBefore(t):e.setEndAfter(t));if(l.ie&&l.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t))return void(n?e.setStart(t,0):e.setEnd(t,0))}while(t=n?r.next():r.prev());"BODY"==o.nodeName&&(n?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},getBoundingClientRect:function(){var t=this.getRng();return t.collapsed?e.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},f}),l("tinymce.core.dom.ElementUtils",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools"],function(e,t){function n(t){this.compare=function(n,r){function i(e){var n={};return o(t.getAttribs(e),function(o){var r=o.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&0!==r.indexOf("data-")&&(n[r]=t.getAttrib(e,r))}),n}function s(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if(n=t[o],"undefined"==typeof n)return!1;if(e[o]!=n)return!1;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return!1;return!0}return n.nodeName==r.nodeName&&(!!s(i(n),i(r))&&(!!s(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(r,"style")))&&(!e.isBookmarkNode(n)&&!e.isBookmarkNode(r))))}}var o=t.each;return n}),l("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(e,t,n){function o(e,o){function r(e,t){t.classes.length&&u.addClass(e,t.classes.join(" ")),u.setAttribs(e,t.attrs)}function i(e){var t;return d="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=u.create(d.name),r(t,d),t}function s(e,n){var o="string"!=typeof e?e.nodeName.toLowerCase():e,r=f.getElementRule(o),i=r&&r.parentsRequired;return!(!i||!i.length)&&(n&&t.inArray(i,n)!==-1?n:i[0])}function a(e,n,o){var r,l,d,c=n.length>0&&n[0],f=c&&c.name;if(d=s(e,f))f==d?(l=n[0],n=n.slice(1)):l=d;else if(c)l=n[0],n=n.slice(1);else if(!o)return e;return l&&(r=i(l),r.appendChild(e)),o&&(r||(r=u.create("div"),r.appendChild(e)),t.each(o,function(t){var n=i(t);r.insertBefore(n,e)})),a(r,n,l&&l.siblings)}var l,d,c,f=o&&o.schema||new n({});return e&&e.length?(d=e[0],l=i(d),c=u.create("div"),c.appendChild(a(l,e.slice(1),d.siblings)),c):""}function r(e,t){return o(s(e),t)}function i(e){var n,o={classes:[],attrs:{}};return e=o.selector=t.trim(e),"*"!==e&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,r,i,s){switch(n){case"#":o.attrs.id=r;break;case".":o.classes.push(r);break;case":":t.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(o.attrs[r]=r)}if("["==i){var a=s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(o.attrs[a[1]]=a[2])}return""})),o.name=n||"div",o}function s(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),i),o=n.pop();return n.length&&(o.siblings=n),o}).reverse()):[]}function a(e,t){function n(e){return e.replace(/%(\w+)/g,"")}var r,i,a,d,c,f,p="";if(f=e.settings.preview_styles,f===!1)return"";if("string"!=typeof f&&(f="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return"preview"in t&&(f=t.preview,f===!1)?"":(r=t.block||t.inline||"span",d=s(t.selector),d.length?(d[0].name||(d[0].name=r),r=t.selector,i=o(d,e)):i=o([r],e),a=u.select(r,i)[0]||i.firstChild,l(t.styles,function(e,t){e=n(e),e&&u.setStyle(a,t,e)}),l(t.attributes,function(e,t){e=n(e),e&&u.setAttrib(a,t,e)}),l(t.classes,function(e){e=n(e),u.hasClass(a,e)||u.addClass(a,e)}),e.fire("PreviewFormats"),u.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),c=u.getStyle(e.getBody(),"fontSize",!0),c=/px$/.test(c)?parseInt(c,10):0,l(f.split(" "),function(t){var n=u.getStyle(a,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=u.getStyle(e.getBody(),t,!0),"#ffffff"==u.toHex(n).toLowerCase())||"color"==t&&"#000000"==u.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===c)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*c+"px"}"border"==t&&n&&(p+="padding:0 2px;"),p+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),u.remove(i),p)}var l=t.each,u=e.DOM;return{getCssText:a,parseSelector:s,selectorToHtml:r}}),l("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(e,t,n){function o(e,t){var n=i[e];n||(i[e]=n=[]),i[e].push(t)}function r(e,t){a(i[e],function(e){e(t)})}var i={},s=e.filter,a=e.each;return o("pre",function(o){function r(t){return l(t.previousSibling)&&e.indexOf(u,t.previousSibling)!=-1}function i(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)}var l,u,d=o.selection.getRng();l=t.matchNodeNames("pre"),d.collapsed||(u=o.selection.getSelectedBlocks(),a(s(s(u,l),r),function(e){i(e.previousSibling,e)}))}),{postProcess:r}}),l("tinymce.core.Formatter",["tinymce.core.dom.TreeWalker","tinymce.core.dom.RangeUtils","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun","tinymce.core.util.Tools","tinymce.core.fmt.Preview","tinymce.core.fmt.Hooks"],function(e,t,n,o,r,i,s,a,l){return function(u){function d(e){return e.nodeType&&(e=e.nodeName),!!u.schema.getTextBlockElements()[e.toLowerCase()]}function c(e){return/^(TH|TD)$/.test(e.nodeName)}function f(e){return e&&/^(IMG)$/.test(e.nodeName)}function p(e,t){return oe.getParents(e,t,oe.getRoot())}function m(e){return 1===e.nodeType&&"_mce_caret"===e.id}function h(){y({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){ge(n,function(t,n){oe.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ge("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){y(e,{block:e,remove:"all"})}),y(u.settings.formats)}function g(){u.addShortcut("meta+b","bold_desc","Bold"),u.addShortcut("meta+i","italic_desc","Italic"),u.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)u.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);u.addShortcut("access+7","",["FormatBlock",!1,"p"]),u.addShortcut("access+8","",["FormatBlock",!1,"div"]),u.addShortcut("access+9","",["FormatBlock",!1,"address"])}function v(e){return e?ne[e]:ne}function y(e,t){e&&("string"!=typeof e?ge(e,function(e,t){y(t,e)}):(t=t.length?t:[t],ge(t,function(e){e.deep===Q&&(e.deep=!e.selector),e.split===Q&&(e.split=!e.selector||e.inline),e.remove===Q&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),ne[e]=t))}function b(e){return e&&ne[e]&&delete ne[e],ne}function _(e,t){var n=v(t);if(n)for(var o=0;o<n.length;o++)if(n[o].inherit===!1&&oe.is(e,n[o].selector))return!0;return!1}function x(e){var t;return u.dom.getParent(e,function(e){return t=u.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function C(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=x(e.parentNode),u.dom.getStyle(e,"color")&&t?u.dom.setStyle(e,"text-decoration",t):u.dom.getStyle(e,"text-decoration")===t&&u.dom.setStyle(e,"text-decoration",null))}function j(t,n,o){function r(e,t){if(t=t||h,e){if(t.onformat&&t.onformat(e,t,n,o),ge(t.styles,function(t,o){oe.setStyle(e,o,z(t,n))}),t.styles){var r=oe.getAttrib(e,"style");r&&e.setAttribute("data-mce-style",r)}ge(t.attributes,function(t,o){oe.setAttrib(e,o,z(t,n))}),ge(t.classes,function(t){t=z(t,n),oe.hasClass(e,t)||oe.addClass(e,t)})}}function i(e,t){var n=!1;return!!h.selector&&(ge(e,function(e){if(!("collapsed"in e&&e.collapsed!==g))return oe.is(t,e.selector)&&!m(t)?(r(t,e),n=!0,!1):void 0}),n)}function s(){function t(t,n){var r=new e(n);for(o=r.prev2();o;o=r.prev2()){if(3==o.nodeType&&o.data.length>0)return o;if(o.childNodes.length>1||o==t||"BR"==o.tagName)return o}}var n=u.selection.getRng(),r=n.startContainer,i=n.endContainer;if(r!=i&&0===n.endOffset){var s=t(r,i),a=3==s.nodeType?s.data.length:s.childNodes.length;n.setEnd(s,a)}return n}function a(e,o,s){var a,l,u=[],c=!0;a=h.inline||h.block,l=oe.create(a),r(l),ie.walk(e,function(e){function o(e){var g,v,y,b;if(b=c,g=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&me(e)&&(b=c,c="true"===me(e),y=!0),M(g,"br"))return f=0,void(h.block&&oe.remove(e));if(h.wrapper&&S(e,t,n))return void(f=0);if(c&&!y&&h.block&&!h.wrapper&&d(g)&&se(v,a))return e=oe.rename(e,a),r(e),u.push(e),void(f=0);if(h.selector){var _=i(p,e);if(!h.inline||_)return void(f=0)}!c||y||!se(a,g)||!se(v,a)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||m(e)||h.inline&&ae(e)?(f=0,ge(ve(e.childNodes),o),y&&(c=b),f=0):(f||(f=oe.clone(l,fe),e.parentNode.insertBefore(f,e),u.push(f)),f.appendChild(e))}var f;ge(e,o)}),h.links===!0&&ge(u,function(e){function t(e){"A"===e.nodeName&&r(e,h),ge(ve(e.childNodes),t)}t(e)}),ge(u,function(e){function o(e){var t=0;return ge(e.childNodes,function(e){U(e)||he(e)||t++}),t}function i(e){var t=!1;return ge(e.childNodes,function(e){if(O(e))return t=e,!1}),t}function s(e,t){do{if(1!==o(e))break;if(e=i(e),!e)break;if(t(e))return e}while(e);return null}function a(e){var t,n;return t=i(e),t&&!he(t)&&N(t,h)&&(n=oe.clone(t,fe),r(n),oe.replace(n,e,pe),oe.remove(t,1)),n||e}var l;if(l=o(e),(u.length>1||!ae(e))&&0===l)return void oe.remove(e,1);if(h.inline||h.wrapper){if(h.exact||1!==l||(e=a(e)),ge(p,function(t){ge(oe.select(t.inline,e),function(e){O(e)&&q(t,n,e,t.exact?e:null)}),_e(t,e)}),S(e.parentNode,t,n)&&q(h,n,e)&&(e=0),h.merge_with_parents&&oe.getParent(e.parentNode,function(o){if(S(o,t,n))return q(h,n,e)&&(e=0),pe}),e&&!ae(e)&&!B(e,"fontSize")){var d=s(e,A("fontSize"));d&&j("fontsize",{value:B(d,"fontSize")},e)}e&&h.merge_siblings!==!1&&(e=$(K(e),e),e=$(e,K(e,pe)))}})}var c,f,p=v(t),h=p[0],g=!o&&re.isCollapsed();if("false"!==me(re.getNode())){if(h){if(o)o.nodeType?i(p,o)||(f=oe.createRng(),f.setStartBefore(o),f.setEndAfter(o),a(W(f,p),null,!0)):a(o,null,!0);else if(g&&h.inline&&!oe.select("td[data-mce-selected],th[data-mce-selected]").length)J("apply",t,n);else{var y=u.selection.getNode();le||!p[0].defaultBlock||oe.getParent(y,oe.isBlock)||j(p[0].defaultBlock),u.selection.setRng(s()),c=re.getBookmark(),a(W(re.getRng(pe),p),c),h.styles&&((h.styles.color||h.styles.textDecoration)&&(ye(y,C,"childNodes"),C(y)),h.styles.backgroundColor&&D(y,A("fontSize"),L("backgroundColor",z(h.styles.backgroundColor,n)))),re.moveToBookmark(c),Z(re.getRng(pe)),u.nodeChanged()}l.postProcess(t,u)}}else{o=re.getNode();for(var b=0,_=p.length;b<_;b++)if(p[b].ceFalseOverride&&oe.is(o,p[b].selector))return void r(o,p[b])}}function E(e,t,n,o){function r(e){var n,o,i,s,a;if(1===e.nodeType&&me(e)&&(s=y,y="true"===me(e),a=!0),n=ve(e.childNodes),y&&!a)for(o=0,i=h.length;o<i&&!q(h[o],t,e,e);o++);if(g.deep&&n.length){for(o=0,i=n.length;o<i;o++)r(n[o]);a&&(y=s)}}function i(n){var r;return ge(p(n.parentNode).reverse(),function(n){var i;r||"_start"==n.id||"_end"==n.id||(i=S(n,e,t,o),i&&i.split!==!1&&(r=n))}),r}function s(e,n,o,r){var i,s,a,l,u,d;if(e){for(d=e.parentNode,i=n.parentNode;i&&i!=d;i=i.parentNode){for(s=oe.clone(i,fe),u=0;u<h.length;u++)if(q(h[u],t,s,s)){s=0;break}s&&(a&&s.appendChild(a),l||(l=s),a=s)}!r||g.mixed&&ae(e)||(n=oe.split(e,n)),a&&(o.parentNode.insertBefore(a,o),l.appendChild(o))}return n}function a(e){return s(i(e),e,e,!0)}function l(e){var t=oe.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return he(n)&&(n=n[e?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),oe.remove(t,!0),n}function d(e){var t,n,o=e.commonAncestorContainer;if(e=W(e,h,pe),g.split){if(t=Y(e,pe),n=Y(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&c(n)&&n.firstChild&&(n=n.firstChild||n),oe.isChildOf(t,n)&&!ae(n)&&!c(t)&&!c(n))return t=H(t,"span",{id:"_start","data-mce-type":"bookmark"}),a(t),void(t=l(pe));t=H(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=H(n,"span",{id:"_end","data-mce-type":"bookmark"}),a(t),a(n),t=l(pe),n=l()}else t=n=a(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=ue(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=ue(n)+1}ie.walk(e,function(e){ge(e,function(e){r(e),1===e.nodeType&&"underline"===u.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===x(e.parentNode)&&q({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var f,m,h=v(e),g=h[0],y=!0;if(n)return void(n.nodeType?(m=oe.createRng(),m.setStartBefore(n),m.setEndAfter(n),d(m)):d(n));if("false"!==me(re.getNode()))re.isCollapsed()&&g.inline&&!oe.select("td[data-mce-selected],th[data-mce-selected]").length?J("remove",e,t,o):(f=re.getBookmark(),d(re.getRng(pe)),re.moveToBookmark(f),g.inline&&k(e,t,re.getStart())&&Z(re.getRng(!0)),u.nodeChanged());else{n=re.getNode();for(var b=0,_=h.length;b<_&&(!h[b].ceFalseOverride||!q(h[b],t,n,n));b++);}}function w(e,t,n){var o=v(e);!k(e,t,n)||"toggle"in o[0]&&!o[0].toggle?j(e,t,n):E(e,t,n)}function S(e,t,n,o){function r(e,t,r){var i,s,a,l=t[r];if(t.onmatch)return t.onmatch(e,t,r);if(l)if(l.length===Q){for(i in l)if(l.hasOwnProperty(i)){if(s="attributes"===r?oe.getAttrib(e,i):B(e,i),o&&!s&&!t.exact)return;if((!o||t.exact)&&!M(s,F(z(l[i],n),i)))return}}else for(a=0;a<l.length;a++)if("attributes"===r?oe.getAttrib(e,l[a]):B(e,l[a]))return t;return t}var i,s,a,l=v(t);if(l&&e)for(s=0;s<l.length;s++)if(i=l[s],N(e,i)&&r(e,i,"attributes")&&r(e,i,"styles")){if(a=i.classes)for(s=0;s<a.length;s++)if(!oe.hasClass(e,a[s]))return;return i}}function k(e,t,n){function o(n){var o=oe.getRoot();return n!==o&&(n=oe.getParent(n,function(n){return!!_(n,e)||(n.parentNode===o||!!S(n,e,t,!0))}),S(n,e,t))}var r;return n?o(n):(n=re.getNode(),o(n)?pe:(r=re.getStart(),r!=n&&o(r)?pe:fe))}function T(e,t){var n,o=[],r={};return n=re.getStart(),oe.getParent(n,function(n){var i,s;for(i=0;i<e.length;i++)s=e[i],!r[s]&&S(n,s,t)&&(r[s]=!0,o.push(s))},oe.getRoot()),o}function P(e){var t,n,o,r,i,s=v(e);if(s)for(t=re.getStart(),n=p(t),r=s.length-1;r>=0;r--){if(i=s[r].selector,!i||s[r].defaultBlock)return pe;for(o=n.length-1;o>=0;o--)if(oe.is(n[o],i))return pe}return fe}function I(e,t,n){var o;return X||(X={},o={},u.on("NodeChange",function(e){var t=p(e.element),n={};t=s.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),ge(X,function(e,r){ge(t,function(i){return S(i,r,{},e.similar)?(o[r]||(ge(e,function(e){e(!0,{node:i,format:r,parents:t})}),o[r]=e),n[r]=e,!1):!_(i,r)&&void 0})}),ge(o,function(r,i){n[i]||(delete o[i],ge(r,function(n){n(!1,{node:e.element,format:i,parents:t})}))})})),ge(e.split(","),function(e){X[e]||(X[e]=[],X[e].similar=n),X[e].push(t)}),this}function R(e){return a.getCssText(u,e)}function N(e,t){return M(e,t.inline)?pe:M(e,t.block)?pe:t.selector?1==e.nodeType&&oe.is(e,t.selector):void 0}function M(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function D(e,t,n){ge(e.childNodes,function(e){O(e)&&(t(e)&&n(e),e.hasChildNodes()&&D(e,t,n))})}function O(e){return e&&1===e.nodeType&&!he(e)&&!m(e)&&!r.isBogus(e)}function A(e){return i.curry(function(e,t){return!(!t||!B(t,e))},e)}function L(e,t){return i.curry(function(e,t,n){oe.setStyle(n,e,t)},e,t)}function B(e,t){return F(oe.getStyle(e,t),t)}function F(e,t){return"color"!=t&&"backgroundColor"!=t||(e=oe.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function z(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function U(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function H(e,t,n){var o=oe.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function W(t,n,o){function r(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var o,r,i,s,a;if(o=r=e?g:y,s=e?"previousSibling":"nextSibling",a=oe.getRoot(),3==o.nodeType&&!U(o)&&(e?v>0:b<o.nodeValue.length))return o;for(;;){if(!n[0].block_expand&&ae(r))return r;for(i=r[s];i;i=i[s])if(!he(i)&&!U(i)&&!t(i))return r;if(r==a||r.parentNode==a){o=r;break}r=r.parentNode}return o}function i(e,t){for(t===Q&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function s(e){for(var t=e;t;){if(1===t.nodeType&&me(t))return"false"===me(t)?t:e;t=t.parentNode}return e}function a(t,n,r){function i(e,t){var n,i,s=e.nodeValue;return"undefined"==typeof t&&(t=r?s.length:0),r?(n=s.lastIndexOf(" ",t),i=s.lastIndexOf(" ",t),n=n>i?n:i,n===-1||o||n++):(n=s.indexOf(" ",t),i=s.indexOf(" ",t),n=n!==-1&&(i===-1||n<i)?n:i),n}var s,a,l,d;if(3===t.nodeType){if(l=i(t,n),l!==-1)return{container:t,offset:l};d=t}for(s=new e(t,oe.getParent(t,ae)||u.getBody());a=s[r?"prev":"next"]();)if(3===a.nodeType){if(d=a,l=i(a),l!==-1)return{container:a,offset:l}}else if(ae(a))break;if(d)return n=r?0:d.length,{container:d,offset:n}}function l(e,o){var r,i,s,a;for(3==e.nodeType&&0===e.nodeValue.length&&e[o]&&(e=e[o]),r=p(e),i=0;i<r.length;i++)for(s=0;s<n.length;s++)if(a=n[s],!("collapsed"in a&&a.collapsed!==t.collapsed)&&oe.is(r[i],a.selector))return r[i];return e}function c(e,t){var o,r=oe.getRoot();if(n[0].wrapper||(o=oe.getParent(e,n[0].block,r)),o||(o=oe.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=r&&d(e)})),o&&n[0].wrapper&&(o=p(o,"ul,ol").reverse()[0]||o),!o)for(o=e;o[t]&&!ae(o[t])&&(o=o[t],!M(o,"br")););return o||e}var f,m,h,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(f=g.childNodes.length-1,g=g.childNodes[v>f?f:v],3==g.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(f=y.childNodes.length-1,y=y.childNodes[b>f?f:b-1],3==y.nodeType&&(b=y.nodeValue.length)),g=s(g),y=s(y),(he(g.parentNode)||he(g))&&(g=he(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(v=0)),(he(y.parentNode)||he(y))&&(y=he(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(h=a(g,v,!0),h&&(g=h.container,v=h.offset),h=a(y,b),h&&(y=h.container,b=h.offset)),m=i(y,b),m.node)){for(;m.node&&0===m.offset&&m.node.previousSibling;)m=i(m.node.previousSibling);m.node&&m.offset>0&&3===m.node.nodeType&&" "===m.node.nodeValue.charAt(m.offset-1)&&m.offset>1&&(y=m.node,y.splitText(m.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==v||(g=r(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=r())),n[0].selector&&n[0].expand!==fe&&!n[0].inline&&(g=l(g,"previousSibling"),y=l(y,"nextSibling")),(n[0].block||n[0].selector)&&(g=c(g,"previousSibling"),y=c(y,"nextSibling"),n[0].block&&(ae(g)||(g=r(!0)),ae(y)||(y=r()))),1==g.nodeType&&(v=ue(g),g=g.parentNode),1==y.nodeType&&(b=ue(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function V(e,t){return t.links&&"A"==e.tagName}function q(e,t,n,o){var r,i,s;if(!N(n,e)&&!V(n,e))return fe;if("all"!=e.remove)for(ge(e.styles,function(r,i){r=F(z(r,t),i),"number"==typeof i&&(i=r,o=0),(e.remove_similar||!o||M(B(o,i),r))&&oe.setStyle(n,i,""),s=1}),s&&""===oe.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),ge(e.attributes,function(e,r){var i;if(e=z(e,t),"number"==typeof r&&(r=e,o=0),!o||M(oe.getAttrib(o,r),e)){if("class"==r&&(e=oe.getAttrib(n,r),e&&(i="",ge(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)}),i)))return void oe.setAttrib(n,r,i);"class"==r&&n.removeAttribute("className"),ce.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),ge(e.classes,function(e){e=z(e,t),o&&!oe.hasClass(o,e)||oe.removeClass(n,e)}),i=oe.getAttribs(n),r=0;r<i.length;r++){var a=i[r].nodeName;if(0!==a.indexOf("_")&&0!==a.indexOf("data-"))return fe}return"none"!=e.remove?(G(n,e),pe):void 0}function G(e,t){function n(e,t,n){return e=K(e,t,n),!e||"BR"==e.nodeName||ae(e)}var o,r=e.parentNode;t.block&&(le?r==oe.getRoot()&&(t.list_block&&M(e,t.list_block)||ge(ve(e.childNodes),function(e){se(le,e.nodeName.toLowerCase())?o?o.appendChild(e):(o=H(e,le),oe.setAttribs(o,u.settings.forced_root_block_attrs)):o=0})):ae(e)&&!ae(r)&&(n(e,fe)||n(e.firstChild,pe,1)||e.insertBefore(oe.create("br"),e.firstChild),n(e,pe)||n(e.lastChild,fe,1)||e.appendChild(oe.create("br")))),t.selector&&t.inline&&!M(t.inline,e)||oe.remove(e,1)}function K(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!U(e))return e}function $(e,t){function n(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!he(r))return r}return e}var r,i,s=new o(oe);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),s.compare(e,t))){for(r=e.nextSibling;r&&r!=t;)i=r,r=r.nextSibling,e.appendChild(i);return oe.remove(t),ge(ve(t.childNodes),function(t){e.appendChild(t)}),e}return t}function Y(t,n){var o,r,i;return o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],1==o.nodeType&&(i=o.childNodes.length-1,!n&&r&&r--,o=o.childNodes[r>i?i:r]),3===o.nodeType&&n&&r>=o.nodeValue.length&&(o=new e(o,u.getBody()).next()||o),3!==o.nodeType||n||0!==r||(o=new e(o,u.getBody()).prev()||o),o}function J(t,n,o,r){function i(e){var t=oe.create("span",{id:h,"data-mce-bogus":!0,style:g?"color:red":""});return e&&t.appendChild(u.getDoc().createTextNode(de)),t}function s(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==de||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function a(e){for(;e;){if(e.id===h)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,o;if(e)o=re.getRng(!0),s(e)?(t!==!1&&(o.setStartBefore(e),o.setEndBefore(e)),oe.remove(e)):(n=l(e),n.nodeValue.charAt(0)===de&&(n.deleteData(0,1),o.startContainer==n&&o.startOffset>0&&o.setStart(n,o.startOffset-1),o.endContainer==n&&o.endOffset>0&&o.setEnd(n,o.endOffset-1)),oe.remove(e,1)),re.setRng(o);else if(e=a(re.getStart()),!e)for(;e=oe.get(h);)c(e,!1)}function f(){var e,t,r,s,u,d,c;e=re.getRng(!0),s=e.startOffset,d=e.startContainer,c=d.nodeValue,t=a(re.getStart()),t&&(r=l(t));var f=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&s>0&&s<c.length&&f.test(c.charAt(s))&&f.test(c.charAt(s-1))?(u=re.getBookmark(),e.collapse(!0),e=W(e,v(n)),e=ie.split(e),j(n,o,e),re.moveToBookmark(u)):(t&&r.nodeValue===de?j(n,o,t):(t=i(!0),r=t.firstChild,e.insertNode(t),s=1,j(n,o,t)),re.setCursorLocation(r,s))}function p(){var e,t,s,a,l,u,c,f,p=re.getRng(!0),m=[];for(e=p.startContainer,t=p.startOffset,l=e,3==e.nodeType&&(t!=e.nodeValue.length&&(a=!0),l=l.parentNode);l;){if(S(l,n,o,r)){u=l;break}l.nextSibling&&(a=!0),m.push(l),l=l.parentNode}if(u)if(a)s=re.getBookmark(),p.collapse(!0),p=W(p,v(n),!0),p=ie.split(p),E(n,o,p),re.moveToBookmark(s);else{for(f=i(),l=f,c=m.length-1;c>=0;c--)l.appendChild(oe.clone(m[c],!1)),l=l.firstChild;l.appendChild(oe.doc.createTextNode(de)),l=l.firstChild;var h=oe.getParent(u,d);h&&oe.isEmpty(h)?u.parentNode.replaceChild(f,u):oe.insertAfter(f,u),re.setCursorLocation(l,1),oe.isEmpty(u)&&oe.remove(u)}}function m(){var e;e=a(re.getStart()),e&&!oe.isEmpty(e)&&ye(e,function(e){1!=e.nodeType||e.id===h||oe.isEmpty(e)||oe.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var h="_mce_caret",g=u.settings.caret_debug;u._hasCaretEvents||(te=function(){var e,t=[];if(s(a(re.getStart()),t))for(e=t.length;e--;)oe.setAttrib(t[e],"data-mce-bogus","1")},ee=function(e){var t=e.keyCode;c(),8==t&&re.isCollapsed()&&re.getStart().innerHTML==de&&c(a(re.getStart())),37!=t&&39!=t||c(a(re.getStart())),m()},u.on("SetContent",function(e){e.selection&&m()}),u._hasCaretEvents=!0),"apply"==t?f():p()}function Z(t){var n,o,r,i=t.startContainer,s=t.startOffset;if((t.startContainer!=t.endContainer||!f(t.startContainer.childNodes[t.startOffset]))&&(3==i.nodeType&&s>=i.nodeValue.length&&(s=ue(i),i=i.parentNode),1==i.nodeType))for(r=i.childNodes,s<r.length?(i=r[s],n=new e(i,oe.getParent(i,oe.isBlock))):(i=r[r.length-1],n=new e(i,oe.getParent(i,oe.isBlock)),n.next(!0)),o=n.current();o;o=n.next())if(3==o.nodeType&&!U(o))return t.setStart(o,0),void re.setRng(t)}var X,Q,ee,te,ne={},oe=u.dom,re=u.selection,ie=new t(oe),se=u.schema.isValidChild,ae=oe.isBlock,le=u.settings.forced_root_block,ue=oe.nodeIndex,de="\ufeff",ce=/^(src|href|style)$/,fe=!1,pe=!0,me=oe.getContentEditable,he=n.isBookmarkNode,ge=s.each,ve=s.grep,ye=s.walk,be=s.extend,_e=function(e,t){e.clear_child_styles&&ge(oe.select("*",t),function(t){ge(e.styles,function(e,n){oe.setStyle(t,n,"")})})};be(this,{get:v,register:y,
unregister:b,apply:j,remove:E,toggle:w,match:k,matchAll:T,matchNode:S,canApply:P,formatChanged:I,getCssText:R}),h(),g(),u.on("BeforeGetContent",function(e){te&&"raw"!=e.format&&te()}),u.on("mouseup keydown",function(e){ee&&ee(e)})}}),l("tinymce.core.undo.Diff",[],function(){var e=0,t=1,n=2,o=function(o,r){var i=o.length+r.length+2,s=new Array(i),a=new Array(i),l=function(e,t,n){return{start:e,end:t,diag:n}},u=function(i,s,a,l,d){var f=c(i,s,a,l);if(null===f||f.start===s&&f.diag===s-l||f.end===i&&f.diag===i-a)for(var p=i,m=a;p<s||m<l;)p<s&&m<l&&o[p]===r[m]?(d.push([e,o[p]]),++p,++m):s-i>l-a?(d.push([n,o[p]]),++p):(d.push([t,r[m]]),++m);else{u(i,f.start,a,f.start-f.diag,d);for(var h=f.start;h<f.end;++h)d.push([e,o[h]]);u(f.end,s,f.end-f.diag,l,d)}},d=function(e,t,n,i){for(var s=e;s-t<i&&s<n&&o[s]===r[s-t];)++s;return l(e,s,t)},c=function(e,t,n,i){var l=t-e,u=i-n;if(0===l||0===u)return null;var c=l-u,f=u+l,p=(f%2===0?f:f+1)/2;s[1+p]=e,a[1+p]=t+1;for(var m=0;m<=p;++m){for(var h=-m;h<=m;h+=2){var g=h+p;h===-m||h!=m&&s[g-1]<s[g+1]?s[g]=s[g+1]:s[g]=s[g-1]+1;for(var v=s[g],y=v-e+n-h;v<t&&y<i&&o[v]===r[y];)s[g]=++v,++y;if(c%2!=0&&c-m<=h&&h<=c+m&&a[g-c]<=s[g])return d(a[g-c],h+e-n,t,i)}for(h=c-m;h<=c+m;h+=2){for(g=h+p-c,h===c-m||h!=c+m&&a[g+1]<=a[g-1]?a[g]=a[g+1]-1:a[g]=a[g-1],v=a[g]-1,y=v-e+n-h;v>=e&&y>=n&&o[v]===r[y];)a[g]=v--,y--;if(c%2===0&&-m<=h&&h<=m&&a[g]<=s[g+c])return d(a[g],h+e-n,t,i)}}},f=[];return u(0,o.length,0,r.length,f),f};return{KEEP:e,DELETE:n,INSERT:t,diff:o}}),l("tinymce.core.undo.Fragments",["tinymce.core.util.Arr","tinymce.core.html.Entities","tinymce.core.undo.Diff"],function(e,t,n){var o=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?t.encodeRaw(e.data,!1):8===e.nodeType?"<!--"+e.data+"-->":""},r=function(e){var t,n,o;for(o=document.createElement("div"),t=document.createDocumentFragment(),e&&(o.innerHTML=e);n=o.firstChild;)t.appendChild(n);return t},i=function(e,t,n){var o=r(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(o,i)}else e.appendChild(o)},s=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},a=function(t,o){var r=0;e.each(t,function(e){e[0]===n.KEEP?r++:e[0]===n.INSERT?(i(o,e[1],r),r++):e[0]===n.DELETE&&s(o,r)})},l=function(t){return e.filter(e.map(t.childNodes,o),function(e){return e.length>0})},u=function(t,r){var i=e.map(r.childNodes,o);return a(n.diff(i,t),r),r};return{read:l,write:u}}),l("tinymce.core.undo.Levels",["tinymce.core.util.Arr","tinymce.core.undo.Fragments"],function(e,t){var n=function(e){return e.indexOf("</iframe>")!==-1},o=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},r=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},i=function(i){var s,a,l;return s=t.read(i.getBody()),l=e.map(s,function(e){return i.serializer.trimContent(e)}),a=l.join(""),n(a)?o(l):r(a)},s=function(e,n,o){"fragmented"===n.type?t.write(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw"}),e.selection.moveToBookmark(o?n.beforeBookmark:n.bookmark)},a=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},l=function(e,t){return a(e)===a(t)};return{createFragmentedLevel:o,createCompleteLevel:r,createFromEditor:i,applyToEditor:s,isEq:l}}),l("tinymce.core.UndoManager",["tinymce.core.util.VK","tinymce.core.util.Tools","tinymce.core.undo.Levels"],function(e,t,n){return function(e){function o(t){e.setDirty(t)}function r(e){p(!1),l.add({},e)}function i(){l.typing&&(p(!1),l.add())}var s,a,l=this,u=0,d=[],c=0,f=function(){return 0===c},p=function(e){f()&&(l.typing=e)};return e.on("init",function(){l.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(i(),l.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&r(e)}),e.on("ObjectResizeStart Cut",function(){l.beforeChange()}),e.on("SaveContent ObjectResized blur",r),e.on("DragEnd",r),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(r(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),a&&l.typing&&n.isEq(n.createFromEditor(e),d[0])===!1&&(e.isDirty()===!1&&(o(!0),e.fire("change",{level:d[0],lastLevel:null})),e.fire("TypingUndo"),a=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(l.typing&&r(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||l.typing||n||(l.beforeChange(),p(!0),l.add({},e),a=!0)}}),e.on("MouseDown",function(e){l.typing&&r(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),l={data:d,typing:!1,beforeChange:function(){f()&&(s=e.selection.getBookmark(2,!0))},add:function(r,i){var a,l,c,p=e.settings;if(c=n.createFromEditor(e),r=r||{},r=t.extend(r,c),f()===!1||e.removed)return null;if(l=d[u],e.fire("BeforeAddUndo",{level:r,lastLevel:l,originalEvent:i}).isDefaultPrevented())return null;if(l&&n.isEq(l,r))return null;if(d[u]&&(d[u].beforeBookmark=s),p.custom_undo_redo_levels&&d.length>p.custom_undo_redo_levels){for(a=0;a<d.length-1;a++)d[a]=d[a+1];d.length--,u=d.length}r.bookmark=e.selection.getBookmark(2,!0),u<d.length-1&&(d.length=u+1),d.push(r),u=d.length-1;var m={level:r,lastLevel:l,originalEvent:i};return e.fire("AddUndo",m),u>0&&(o(!0),e.fire("change",m)),r},undo:function(){var t;return l.typing&&(l.add(),l.typing=!1,p(!1)),u>0&&(t=d[--u],n.applyToEditor(e,t,!0),o(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return u<d.length-1&&(t=d[++u],n.applyToEditor(e,t,!1),o(!0),e.fire("redo",{level:t})),t},clear:function(){d=[],u=0,l.typing=!1,l.data=d,e.fire("ClearUndos")},hasUndo:function(){return u>0||l.typing&&d[0]&&!n.isEq(n.createFromEditor(e),d[0])},hasRedo:function(){return u<d.length-1&&!l.typing},transact:function(e){return i(),l.beforeChange(),l.ignore(e),l.add()},ignore:function(e){try{c++,e()}finally{c--}},extra:function(t,o){var r,i;l.transact(t)&&(i=d[u].bookmark,r=d[u-1],n.applyToEditor(e,r,!0),l.transact(o)&&(d[u-1].beforeBookmark=i))}}}}),l("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,o){var r=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},i=e.cached(function(){return s(t.fromDom(o))}),s=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:i,getBody:s,inBody:r}}),l("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,o,r,i,s){return n(r,i)?t.some(r):e.isFunction(s)&&s(r)?t.none():o(r,i,s)}}),l("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,o,r,i,s,a){var l=function(e){return p(r.body(),e)},u=function(t,r,i){for(var a=t.dom(),l=e.isFunction(i)?i:n.constant(!1);a.parentNode;){a=a.parentNode;var u=s.fromDom(a);if(r(u))return o.some(u);if(l(u))break}return o.none()},d=function(e,t,n){var o=function(e){return t(e)};return a(o,u,e,t,n)},c=function(e,t){var n=e.dom();return n.parentNode?f(s.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):o.none()},f=function(e,o){var r=t.find(e.dom().childNodes,n.compose(o,s.fromDom));return r.map(s.fromDom)},p=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(s.fromDom(e.childNodes[r])))return o.some(s.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return o.none()};return n(e.dom())};return{first:l,ancestor:u,closest:d,sibling:c,child:f,descendant:p}}),l("tinymce.core.caret.CaretUtils",["tinymce.core.util.Fun","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretCandidate"],function(e,t,n,o,r,i){function s(e){return e>0}function a(e){return e<0}function l(e,t){for(var n;n=e(t);)if(!E(n))return n;return null}function u(e,n,o,r,i){var u=new t(e,r);if(a(n)){if((x(e)||E(e))&&(e=l(u.prev,!0),o(e)))return e;for(;e=l(u.prev,i);)if(o(e))return e}if(s(n)){if((x(e)||E(e))&&(e=l(u.next,!0),o(e)))return e;for(;e=l(u.next,i);)if(o(e))return e}return null}function d(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(_(e))return e;return t}function c(e,t){for(;e&&e!=t;){if(C(e))return e;e=e.parentNode}return null}function f(e,t,n){return c(e.container(),n)==c(t.container(),n)}function p(e,t,n){return d(e.container(),n)==d(t.container(),n)}function m(e,t){var n,o;return t?(n=t.container(),o=t.offset(),S(n)?n.childNodes[o+e]:null):null}function h(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function g(e,t,n){return c(t,e)==c(n,e)}function v(e,t,n){var o,r;for(r=e?"previousSibling":"nextSibling";n&&n!=t;){if(o=n[r],j(o)&&(o=o[r]),x(o)){if(g(t,o,n))return o;break}if(k(o))break;n=n.parentNode}return null}function y(e,t,o){var i,s,a,l,u=w(v,!0,t),d=w(v,!1,t);if(s=o.startContainer,a=o.startOffset,r.isCaretContainerBlock(s)){if(S(s)||(s=s.parentNode),l=s.getAttribute("data-mce-caret"),"before"==l&&(i=s.nextSibling,x(i)))return T(i);if("after"==l&&(i=s.previousSibling,x(i)))return P(i)}if(!o.collapsed)return o;if(n.isText(s)){if(j(s)){if(1===e){if(i=d(s))return T(i);if(i=u(s))return P(i)}if(e===-1){if(i=u(s))return P(i);if(i=d(s))return T(i)}return o}if(r.endsWithCaretContainer(s)&&a>=s.data.length-1)return 1===e&&(i=d(s))?T(i):o;if(r.startsWithCaretContainer(s)&&a<=1)return e===-1&&(i=u(s))?P(i):o;if(a===s.data.length)return i=d(s),i?T(i):o;if(0===a)return i=u(s),i?P(i):o}return o}function b(e,t){return x(m(e,t))}var _=n.isContentEditableTrue,x=n.isContentEditableFalse,C=n.matchStyleValues("display","block table table-cell table-caption list-item"),j=r.isCaretContainer,E=r.isCaretContainerBlock,w=e.curry,S=n.isElement,k=i.isCaretCandidate,T=w(h,!0),P=w(h,!1);return{isForwards:s,isBackwards:a,findNode:u,getEditingHost:d,getParentBlock:c,isInSameBlock:f,isInSameEditingHost:p,isBeforeContentEditableFalse:w(b,0),isAfterContentEditableFalse:w(b,-1),normalizeRange:y}}),l("tinymce.core.caret.CaretWalker",["tinymce.core.dom.NodeType","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,o,r,i){function s(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}function a(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function l(e,t){if(h(e)){if(v(t.previousSibling)&&!f(t.previousSibling))return n.before(t);if(f(t))return n(t,0)}if(g(e)){if(v(t.nextSibling)&&!f(t.nextSibling))return n.after(t);if(f(t))return n(t,t.data.length)}return g(e)?m(t)?n.before(t):n.after(t):n.before(t)}function u(t,r){var i;return!!e.isBr(t)&&(i=d(1,n.after(t),r),!!i&&!o.isInSameBlock(n.before(t),n.before(i),r))}function d(e,t,_){var x,C,j,E,w,S,k;if(!p(_)||!t)return null;if(t.isEqual(n.after(_))&&_.lastChild){if(k=n.after(_.lastChild),g(e)&&v(_.lastChild)&&p(_.lastChild))return m(_.lastChild)?n.before(_.lastChild):k}else k=t;if(x=k.container(),C=k.offset(),f(x)){if(g(e)&&C>0)return n(x,--C);if(h(e)&&C<x.length)return n(x,++C);j=x}else{if(g(e)&&C>0&&(E=a(x,C-1),v(E)))return!y(E)&&(w=o.findNode(E,e,b,E))?f(w)?n(w,w.data.length):n.after(w):f(E)?n(E,E.data.length):n.before(E);if(h(e)&&C<x.childNodes.length&&(E=a(x,C),v(E)))return u(E,_)?d(e,n.after(E),_):!y(E)&&(w=o.findNode(E,e,b,E))?f(w)?n(w,0):n.before(w):f(E)?n(E,0):n.after(E);j=k.getNode()}return(h(e)&&k.isAtEnd()||g(e)&&k.isAtStart())&&(j=o.findNode(j,e,i.constant(!0),_,!0),b(j))?l(e,j):(E=o.findNode(j,e,b,_),S=r.last(r.filter(s(x,_),c)),!S||E&&S.contains(E)?E?l(e,E):null:k=h(e)?n.after(S):n.before(S))}var c=e.isContentEditableFalse,f=e.isText,p=e.isElement,m=e.isBr,h=o.isForwards,g=o.isBackwards,v=t.isCaretCandidate,y=t.isAtomic,b=t.isEditableCaretCandidate;return function(e){return{next:function(t){return d(1,t,e)},prev:function(t){return d(-1,t,e)}}}}),l("tinymce.core.caret.CaretFinder",["ephox.katamari.api.Fun","ephox.katamari.api.Option","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s){var a=function(e,t,n){var r=e?o.before(n):o.after(n);return m(e,t,r)},l=function(e){return s.isBr(e)?o.before(e):o.after(e)},u=function(e){return o.isTextPosition(e)?0===e.offset():n.isCaretCandidate(e.getNode())},d=function(e){return o.isTextPosition(e)?e.offset()===e.container().data.length:n.isCaretCandidate(e.getNode(!0))},c=function(e,t){return!o.isTextPosition(e)&&!o.isTextPosition(t)&&e.getNode()===t.getNode(!0)},f=function(e){return!o.isTextPosition(e)&&s.isBr(e.getNode())},p=function(e,t,n){return e?!c(t,n)&&!f(t)&&d(t)&&u(n):!c(n,t)&&u(t)&&d(n)},m=function(e,n,o){var r=new i(n);return t.from(e?r.next(o):r.prev(o))},h=function(e,n,o){return m(e,n,o).bind(function(i){return r.isInSameBlock(o,i,n)&&p(e,o,i)?m(e,n,i):t.some(i)})},g=function(e,r){var i=e?r.firstChild:r.lastChild;return s.isText(i)?t.some(new o(i,e?0:i.data.length)):i?n.isCaretCandidate(i)?t.some(e?o.before(i):l(i)):a(e,r,i):t.none()};return{fromPosition:m,navigate:h,positionIn:g}}),l("tinymce.core.delete.DeleteUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind"],function(e,t,n,o,r,i){var s=function(t){var n=e.foldl(t,function(e,t){return e[t]=!0,e},{});return function(e){return n[r.name(e)]===!0}},a=s(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),l=function(e){return function(t){return n.eq(e,o.fromDom(t.dom().parentNode))}},u=function(e,o){return n.contains(e,o)?i.closest(o,a,l(e)):t.none()};return{getParentTextBlock:u}}),l("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var o=function(e){return t.one(e)},r=function(n,o,r){return e.ancestor(n,function(e){return t.is(e,o)},r)},i=function(n,o){return e.sibling(n,function(e){return t.is(e,o)})},s=function(n,o){return e.child(n,function(e){return t.is(e,o)})},a=function(e,n){return t.one(n,e)},l=function(e,o,i){return n(t.is,r,e,o,i)};return{first:o,ancestor:r,sibling:i,child:s,descendant:a,closest:l}}),l("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){var t=function(t){return e.first(t).isSome()},n=function(t,n,o){return e.ancestor(t,n,o).isSome()},o=function(t,n){return e.sibling(t,n).isSome()},r=function(t,n){return e.child(t,n).isSome()},i=function(t,n){return e.descendant(t,n).isSome()},s=function(t,n,o){return e.closest(t,n,o).isSome()};return{any:t,ancestor:n,sibling:o,child:r,descendant:i,closest:s}}),l("tinymce.core.dom.Empty",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorExists","tinymce.core.caret.CaretCandidate","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,o,r,i,s){var a=function(r,i){var s=n.fromDom(r),a=n.fromDom(i);return o.ancestor(a,"pre,code",e.curry(t.eq,s))},l=function(e,t){return i.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&a(e,t)===!1},u=function(e){return i.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},d=function(e,t){return r.isCaretCandidate(t)&&l(e,t)===!1||u(t)||c(t)},c=i.hasAttribute("data-mce-bookmark"),f=i.hasAttribute("data-mce-bogus"),p=i.hasAttributeValue("data-mce-bogus","all"),m=function(e){var t,n,o=0;if(d(e,e))return!1;if(n=e.firstChild,!n)return!0;t=new s(n,e);do if(p(n))n=t.next(!0);else if(f(n))n=t.next();else if(i.isBr(n))o++,n=t.next();else{if(d(e,n))return!1;n=t.next()}while(n);return o<=1},h=function(e){return m(e.dom())};return{isEmpty:h}}),l("tinymce.core.delete.BlockBoundary",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p,m){var h=r.immutable("block","position"),g=r.immutable("from","to"),v=function(e,t){var n=s.fromDom(e),o=s.fromDom(t.container());return f.getParentTextBlock(n,o).map(function(e){return h(e,t)})},y=function(e){return i.eq(e.from().block(),e.to().block())===!1},b=function(e){return u.parent(e.from().block()).bind(function(t){return u.parent(e.to().block()).filter(function(e){return i.eq(t,e)})}).isSome()},_=function(e){return m.isContentEditableFalse(e.from().block())===!1&&m.isContentEditableFalse(e.to().block())===!1},x=function(e,t,o){return m.isBr(o.position().getNode())&&p.isEmpty(o.block())===!1?d.positionIn(!1,o.block().dom()).bind(function(r){return r.isEqual(o.position())?d.fromPosition(t,e,r).bind(function(t){return v(e,t)}):n.some(o)}).getOr(o):o},C=function(e,t,n){var r=v(e,c.fromRangeStart(n)),i=r.bind(function(n){return d.fromPosition(t,e,n.position()).bind(function(n){return v(e,n).map(function(n){return x(e,t,n)})})});return o.liftN([r,i],g).filter(function(e){return y(e)&&b(e)&&_(e)})},j=function(e,t,o){return o.collapsed?C(e,t,o):n.none()};return{read:j}}),l("tinymce.core.delete.MergeBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l,u){var d=function(a,d,c,f){var p=i.children(d);return u.isBr(f.getNode())&&(o.remove(r.fromDom(f.getNode())),f=s.positionIn(!1,c.dom()).getOr(f)),l.isEmpty(d)===!1&&e.each(p,function(e){n.append(c,e)}),l.isEmpty(d)&&o.remove(d),p.length>0?t.from(f):t.none()},c=function(e,t,n){return e?l.isEmpty(t)?(o.remove(t),s.positionIn(!0,n.dom())):s.positionIn(!1,t.dom()).bind(function(o){return d(e,n,t,o)}):l.isEmpty(n)?(o.remove(n),s.positionIn(!0,t.dom())):s.positionIn(!1,n.dom()).bind(function(o){return d(e,t,n,o)})};return{mergeBlocks:c}}),l("tinymce.core.delete.BlockBoundaryDelete",["tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(e,t){var n=function(n,o){var r;return r=e.read(n.getBody(),o,n.selection.getRng()).bind(function(e){return t.mergeBlocks(o,e.from().block(),e.to().block())}),r.each(function(e){n.selection.setRng(e.toRange())}),r.isSome()};return{backspaceDelete:n}}),l("tinymce.core.delete.BlockRangeDelete",["ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.delete.DeleteUtils","tinymce.core.delete.MergeBlocks"],function(e,t,n,o,r){var i=function(i,s){var a=s.getRng();return e.liftN([o.getParentTextBlock(i,n.fromDom(a.startContainer)),o.getParentTextBlock(i,n.fromDom(a.endContainer))],function(e,n){return t.eq(e,n)===!1&&(a.deleteContents(),r.mergeBlocks(!0,e,n).each(function(e){s.setRng(e.toRange())}),!0)}).getOr(!1)},s=function(e,t){var o=n.fromDom(e.getBody());return e.selection.isCollapsed()===!1&&i(o,e.selection)};return{backspaceDelete:s}}),l("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,o,r,i){var s=function(s){if(!n.isArray(s))throw new r("cases must be an array");if(0===s.length)throw new r("there must be at least one case");var a=[],l={};return e.each(s,function(u,d){var c=t.keys(u);if(1!==c.length)throw new r("one and only one name per case");var f=c[0],p=u[f];if(void 0!==l[f])throw new r("duplicate key detected:"+f);if("cata"===f)throw new r("cannot have a case named cata (sorry)");if(!n.isArray(p))throw new r("case arguments must be an array");a.push(f),l[f]=function(){var n=arguments.length;if(n!==p.length)throw new r("Wrong number of arguments to case "+f+". Expected "+p.length+" ("+p+"), got "+n);for(var l=new o(n),u=0;u<l.length;u++)l[u]=arguments[u];var c=function(n){var o=t.keys(n);if(a.length!==o.length)throw new r("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+o.join(","));var i=e.forall(a,function(t){return e.contains(o,t)});if(!i)throw new r("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+a.join(", "));return n[f].apply(null,l)};return{fold:function(){if(arguments.length!==s.length)throw new r("Wrong number of arguments to fold. Expected "+s.length+", got "+arguments.length);var e=arguments[d];return e.apply(null,l)},match:c,log:function(e){i.log(e,{constructors:a,constructor:f,params:l})}}}}),l};return{generate:s}}),l("tinymce.core.delete.CefDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a,l){var u=e.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),d=function(e,t){var n=t.getNode(e===!1),o=e?"after":"before";return l.isElement(n)&&n.getAttribute("data-mce-caret")===o},c=function(e,o,r,i){var l=i.getNode(o===!1);return s.getParentTextBlock(n.fromDom(e),n.fromDom(r.getNode())).map(function(e){return a.isEmpty(e)?u.remove(e.dom()):u.moveToElement(l)}).orThunk(function(){return t.some(u.moveToElement(l))})},f=function(e,n,r){return o.fromPosition(n,e,r).bind(function(o){return n&&l.isContentEditableFalse(o.getNode())?c(e,n,r,o):n===!1&&l.isContentEditableFalse(o.getNode(!0))?c(e,n,r,o):n&&i.isAfterContentEditableFalse(r)?t.some(u.moveToPosition(o)):n===!1&&i.isBeforeContentEditableFalse(r)?t.some(u.moveToPosition(o)):t.none()})},p=function(e,n){return e&&l.isContentEditableFalse(n.nextSibling)?t.some(u.moveToElement(n.nextSibling)):e===!1&&l.isContentEditableFalse(n.previousSibling)?t.some(u.moveToElement(n.previousSibling)):t.none()},m=function(e,n,o){return d(n,o)?p(n,o.getNode(n===!1)).fold(function(){return f(e,n,o)},t.some):f(e,n,o)},h=function(e,n,o){var s=i.normalizeRange(n?1:-1,e,o),a=r.fromRangeStart(s);return n===!1&&i.isAfterContentEditableFalse(a)?t.some(u.remove(a.getNode(!0))):n&&i.isBeforeContentEditableFalse(a)?t.some(u.remove(a.getNode())):m(e,n,a)};return{read:h}}),l("tinymce.core.text.Bidi",[],function(){var e=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,t=function(t){return e.test(t)};return{hasStrongRtl:t}}),l("tinymce.core.keyboard.InlineUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.text.Bidi"],function(e,t,n,o,r,i,s,a,l,u,d,c){var f=function(e){return u.DOM.is(e,"a[href],code")},p=function(e){return"rtl"===u.DOM.getStyle(e,"direction",!0)||c.hasStrongRtl(e.textContent)},m=function(t,n){return e.filter(u.DOM.getParents(n.container(),"*",t),f)},h=function(e,t){var o=m(e,t);return n.from(o[0])},g=function(e,t){var o=m(e,t);return n.from(o[o.length-1])},v=function(e,t,n){var o=a.getParentBlock(t,e),r=a.getParentBlock(n,e);return o&&o===r},y=function(e,t){return!!t&&g(e,t).isSome()},b=function(e,t){return g(e,t).map(function(e){return C(e,!1,t).isNone()||C(e,!0,t).isNone()}).getOr(!1)},_=function(e){return r.isBeforeInline(e)||r.isAfterInline(e)},x=function(e,t){return i.positionIn(t,e)},C=function(e,t,n){return i.fromPosition(t,e,n)},j=function(e,t){var n=t.container(),o=t.offset();return e?r.isCaretContainerInline(n)?d.isText(n.nextSibling)?new s(n.nextSibling,0):s.after(n):r.isBeforeInline(t)?new s(n,o+1):t:r.isCaretContainerInline(n)?d.isText(n.previousSibling)?new s(n.previousSibling,n.previousSibling.data.length):s.before(n):r.isAfterInline(t)?new s(n,o-1):t},E=t.curry(j,!0),w=t.curry(j,!1);return{isInlineTarget:f,findInline:h,findRootInline:g,isInInline:y,isRtl:p,isAtInlineEndPoint:b,isAtZwsp:_,findCaretPositionIn:x,findCaretPosition:C,normalizePosition:j,normalizeForwards:E,normalizeBackwards:w,hasSameParentBlock:v}}),l("tinymce.core.delete.DeleteElement",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p){var m=function(e,t){var n=e.container(),o=e.offset();return d.isTextPosition(e)===!1&&n===t.parentNode&&o>d.before(t).offset()},h=function(e,t){return m(t,e)?new d(t.container(),t.offset()-1):t},g=function(e){return f.isText(e)?new d(e,0):d.before(e)},v=function(e){return f.isText(e)?new d(e,e.data.length):d.after(e)},y=function(e){return u.isCaretCandidate(e.previousSibling)?t.some(v(e.previousSibling)):e.previousSibling?p.findCaretPositionIn(e.previousSibling,!1):t.none()},b=function(e){return u.isCaretCandidate(e.nextSibling)?t.some(g(e.nextSibling)):e.nextSibling?p.findCaretPositionIn(e.nextSibling,!0):t.none()},_=function(e,n){var o=d.before(n.previousSibling?n.previousSibling:n.parentNode);return p.findCaretPosition(e,!1,o).fold(function(){return p.findCaretPosition(e,!0,d.after(n))},t.some)},x=function(e,n){return p.findCaretPosition(e,!0,d.after(n)).fold(function(){return p.findCaretPosition(e,!1,d.before(n))},t.some)},C=function(e,t){return y(t).orThunk(function(){return b(t)}).orThunk(function(){return _(e,t)})},j=function(e,t){return b(t).orThunk(function(){return y(t)}).orThunk(function(){return x(e,t)})},E=function(e,t,n){return e?j(t,n):C(t,n)},w=function(t,n,o){return E(t,n,o).map(e.curry(h,o))},S=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},k=function(e){return function(t){return t.dom()===e}},T=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(s.name(t))},P=function(e){if(c.isEmpty(e)){var n=i.fromHtml('<br data-mce-bogus="1">');return r.empty(e),o.append(e,n),t.some(d.before(n.dom()))}return t.none()},I=function(e,t){return n.liftN([l.prevSibling(e),l.nextSibling(e),t],function(t,n,o){var i,s=t.dom(),a=n.dom();return f.isText(s)&&f.isText(a)?(i=s.data.length,s.appendData(a.data),r.remove(n),r.remove(e),o.container()===a?new d(s,i):o):(r.remove(e),o)}).orThunk(function(){return r.remove(e),t})},R=function(n,o,r){var i=w(o,n.getBody(),r.dom()),s=a.ancestor(r,e.curry(T,n),k(n.getBody())),l=I(r,i);s.bind(P).fold(function(){S(n,o,l)},function(e){S(n,o,t.some(e))})};return{deleteElement:R}}),l("tinymce.core.delete.CefDelete",["ephox.sugar.api.node.Element","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.BlockBoundary","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.delete.MergeBlocks","tinymce.core.dom.NodeType"],function(e,t,n,o,r,i,s,a){var l=function(t,n){return function(o){return i.deleteElement(t,n,e.fromDom(o)),!0}},u=function(e,n){return function(o){var r=n?t.before(o):t.after(o);return e.selection.setRng(r.toRange()),!0}},d=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},c=function(e,t){var n=r.read(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(l(e,t),u(e,t),d(e))});return n.getOr(!1)},f=function(t,n){var o=t.selection.getNode();return!!a.isContentEditableFalse(o)&&(i.deleteElement(t,n,e.fromDom(t.selection.getNode())),!0)},p=function(e,t){for(;t&&t!==e;){if(a.isContentEditableTrue(t)||a.isContentEditableFalse(t))return t;t=t.parentNode}return null},m=function(e){var n,o=p(e.getBody(),e.selection.getNode());return a.isContentEditableTrue(o)&&e.dom.isBlock(o)&&e.dom.isEmpty(o)&&(n=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(o,""),o.appendChild(n),e.selection.setRng(t.before(n).toRange())),!0},h=function(e,t){return e.selection.isCollapsed()?c(e,t):f(e,t)};return{backspaceDelete:h,paddEmptyElement:m}}),l("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var o=t.isText,r=function(e){return o(e)&&e.data[0]===n.ZWSP},i=function(e){return o(e)&&e.data[e.data.length-1]===n.ZWSP},s=function(e){return e.ownerDocument.createTextNode(n.ZWSP)},a=function(e){if(o(e.previousSibling))return i(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(n.ZWSP),e.previousSibling);if(o(e))return r(e)?e:(e.insertData(0,n.ZWSP),e);var t=s(e);return e.parentNode.insertBefore(t,e),t},l=function(e){if(o(e.nextSibling))return r(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,n.ZWSP),e.nextSibling);if(o(e))return i(e)?e:(e.appendData(n.ZWSP),e);var t=s(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},u=function(e,t){return e?a(t):l(t)};return{insertInline:u,insertInlineBefore:e.curry(u,!0),insertInlineAfter:e.curry(u,!1)}}),l("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i){var s=o.isElement,a=o.isText,l=function(e){var t=e.parentNode;t&&t.removeChild(e)},u=function(e){try{return e.nodeValue}catch(e){return""}},d=function(e,t){0===t.length?l(e):e.nodeValue=t},c=function(e){var t=r.trim(e);return{count:e.length-t.length,text:t}},f=function(e,t){return y(e),t},p=function(e,t){var o=c(e.data.substr(0,t.offset())),r=c(e.data.substr(t.offset())),i=o.text+r.text;return i.length>0?(d(e,i),new n(e,t.offset()-o.count)):t},m=function(t,o){var r=o.container(),i=e.indexOf(r.childNodes,t).map(function(e){return e<o.offset()?new n(r,o.offset()-1):o}).getOr(o);return y(t),i},h=function(e,t){return t.container()===e?p(e,t):f(e,t)},g=function(e,t){return t.container()===e.parentNode?m(e,t):f(e,t)},v=function(e,t){return n.isTextPosition(t)?h(e,t):g(e,t)},y=function(e){if(s(e)&&t.isCaretContainer(e)&&(t.hasContent(e)?e.removeAttribute("data-mce-caret"):l(e)),a(e)){var n=r.trim(u(e));d(e,n)}};return{removeAndReposition:v,remove:y}}),l("tinymce.core.keyboard.BoundaryCaret",["ephox.katamari.api.Option","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s){var a=function(e,t){return i.isText(e.container())?n.insertInline(t,e.container()):n.insertInline(t,e.getNode())},l=function(e,n){var o=n.get();return o&&e.container()===o&&t.isCaretContainerInline(o)},u=function(t,i){return i.fold(function(i){o.remove(t.get());var s=n.insertInlineBefore(i);return t.set(s),e.some(new r(s,s.length-1))},function(e){return s.findCaretPositionIn(e,!0).map(function(e){if(l(e,t))return new r(t.get(),1);
o.remove(t.get());var n=a(e,!0);return t.set(n),new r(n,1)})},function(e){return s.findCaretPositionIn(e,!1).map(function(e){if(l(e,t))return new r(t.get(),t.get().length-1);o.remove(t.get());var n=a(e,!1);return t.set(n),new r(n,n.length-1)})},function(i){o.remove(t.get());var s=n.insertInlineAfter(i);return t.set(s),e.some(new r(s,1))})};return{renderCaret:u}}),l("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(e){var t=function(t,n){for(var o=0;o<t.length;o++){var r=t[o].apply(null,n);if(r.isSome())return r}return e.none()};return{evaluateUntil:t}}),l("tinymce.core.keyboard.BoundaryLocation",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,o,r,i,s,a,l,u){var d=e.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),c=function(e,t){var n=s.getParentBlock(t,e);return n?n:e},f=function(e,o){var r=l.normalizeForwards(o),i=c(e,r.container());return l.findRootInline(i,r).fold(function(){return l.findCaretPosition(i,!0,r).bind(t.curry(l.findRootInline,i)).map(function(e){return d.before(e)})},n.none)},p=function(e,t){var o=l.normalizeBackwards(t);return l.findRootInline(e,o).bind(function(e){var t=l.findCaretPosition(e,!1,o);return t.isNone()?n.some(d.start(e)):n.none()})},m=function(e,t){var o=l.normalizeForwards(t);return l.findRootInline(e,o).bind(function(e){var t=l.findCaretPosition(e,!0,o);return t.isNone()?n.some(d.end(e)):n.none()})},h=function(e,o){var r=l.normalizeBackwards(o),i=c(e,r.container());return l.findRootInline(i,r).fold(function(){return l.findCaretPosition(i,!1,r).bind(t.curry(l.findRootInline,i)).map(function(e){return d.after(e)})},n.none)},g=function(e){return l.isRtl(y(e))===!1},v=function(e,t){var n=u.evaluateUntil([f,p,m,h],[e,t]);return n.filter(g)},y=function(e){return e.fold(t.identity,t.identity,t.identity,t.identity)},b=function(e){return e.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))},_=function(e){return e.fold(d.before,d.before,d.after,d.after)},x=function(e){return e.fold(d.start,d.start,d.end,d.end)},C=function(e,t){return b(e)===b(t)&&y(e)===y(t)},j=function(e,t,n,r,i){return o.liftN([l.findRootInline(t,n),l.findRootInline(t,r)],function(n,o){return n!==o&&l.hasSameParentBlock(t,n,o)?d.after(e?n:o):i}).getOr(i)},E=function(e,n){return e.fold(t.constant(!0),function(e){return!C(e,n)})},w=function(e,n,o,r){var i=l.normalizePosition(e,r),s=l.findCaretPosition(n,e,i).map(t.curry(l.normalizePosition,e)),a=s.fold(function(){return o.map(_)},function(r){return v(n,r).map(t.curry(j,e,n,i,r)).filter(t.curry(E,o))});return a.filter(g)},S=function(e,o){return e?o.fold(t.compose(n.some,d.start),n.none,t.compose(n.some,d.after),n.none):o.fold(n.none,t.compose(n.some,d.before),n.none,t.compose(n.some,d.end))},k=function(e,n,o){var r=l.normalizePosition(e,o),i=v(n,r);return v(n,r).bind(t.curry(S,e)).orThunk(function(){return w(e,n,i,o)})};return{readLocation:v,prevLocation:t.curry(k,!1),nextLocation:t.curry(k,!0),getElement:y,outside:_,inside:x}}),l("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,o=function(){return n},r=function(e){n=e},i=function(){return e(o())};return{get:o,set:r,clone:i}};return e}),l("tinymce.core.keyboard.BoundarySelection",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s,a){var l=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},u=function(e){return e.settings.inline_boundaries!==!1},d=function(e,t){e?t.setAttribute("data-mce-selected","1"):t.removeAttribute("data-mce-selected","1")},c=function(e,t,n){return i.renderCaret(t,n).map(function(t){return l(e,t),n})},f=function(e,t,n){var o=e.getBody(),i=r.fromRangeStart(e.selection.getRng()),a=n?s.nextLocation(o,i):s.prevLocation(o,i);return a.bind(function(n){return c(e,t,n)})},p=function(t,o){var r=t.select("a[href][data-mce-selected],code[data-mce-selected]"),i=e.filter(o,a.isInlineTarget);e.each(e.difference(r,i),n.curry(d,!1)),e.each(e.difference(i,r),n.curry(d,!0))},m=function(e,t){if(e.selection.isCollapsed()&&e.composing!==!0&&t.get()){var n=r.fromRangeStart(e.selection.getRng());r.isTextPosition(n)&&a.isAtZwsp(n)===!1&&(l(e,o.removeAndReposition(t.get(),n)),t.set(null))}},h=function(t,n,o){if(t.selection.isCollapsed()){var i=e.filter(o,a.isInlineTarget);e.each(i,function(e){var o=r.fromRangeStart(t.selection.getRng());s.readLocation(t.getBody(),o).bind(function(e){return c(t,n,e)})})}},g=function(e,t,n){return function(){return!!u(e)&&f(e,t,n).isSome()}},v=function(e){var n=new t(null);return e.on("NodeChange",function(t){u(e)&&(p(e.dom,t.parents),m(e,n),h(e,n,t.parents))}),n};return{move:g,setupSelectedState:v,setCaretPosition:l}}),l("tinymce.core.delete.InlineBoundaryDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Element","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteElement","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils"],function(e,t,n,o,r,i,s,a,l,u,d,c,f){var p=function(e){return e.settings.inline_boundaries!==!1},m=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},h=function(e){return n.liftN([f.findCaretPositionIn(e,!0),f.findCaretPositionIn(e,!1)],function(t,n){var o=f.normalizePosition(!0,t),r=f.normalizePosition(!1,n);return f.findCaretPosition(e,!0,o).map(function(e){return e.isEqual(r)}).getOr(!0)}).getOr(!0)},g=function(e,t){return function(n){return u.renderCaret(t,n).map(function(t){return c.setCaretPosition(e,t),!0}).getOr(!1)}},v=function(e,t,n,o){var r=e.getBody();e.undoManager.ignore(function(){e.selection.setRng(m(n,o)),e.execCommand("Delete"),d.readLocation(r,s.fromRangeStart(e.selection.getRng())).map(d.inside).map(g(e,t))}),e.nodeChanged()},y=function(e,t){var n=a.getParentBlock(t,e);return n?n:e},b=function(n,r,s,a){var u=y(n.getBody(),a.container()),c=d.readLocation(u,a);return c.bind(function(n){return s?n.fold(e.constant(t.some(d.inside(n))),t.none,e.constant(t.some(d.outside(n))),t.none):n.fold(t.none,e.constant(t.some(d.outside(n))),t.none,e.constant(t.some(d.inside(n))))}).map(g(n,r)).getOrThunk(function(){var e=i.navigate(s,u,a),t=e.bind(function(e){return d.readLocation(u,e)});return c.isSome()&&t.isSome()?f.findRootInline(u,a).map(function(e){return!!h(e)&&(l.deleteElement(n,s,o.fromDom(e)),!0)}).getOr(!1):t.bind(function(t){return e.map(function(e){return s?v(n,r,a,e):v(n,r,e,a),!0})}).getOr(!1)})},_=function(e,t,n){if(e.selection.isCollapsed()&&p(e)){var o=s.fromRangeStart(e.selection.getRng());return b(e,t,n,o)}return!1};return{backspaceDelete:_}}),l("tinymce.core.delete.DeleteCommands",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete"],function(e,t,n,o){var r=function(e,t){e.getDoc().execCommand(t,!1,null)},i=function(e){var t=e.dom,n=e.getBody();t.isEmpty(n)&&(e.setContent(""),n.firstChild&&t.isBlock(n.firstChild)?e.selection.setCursorLocation(n.firstChild,0):e.selection.setCursorLocation(n,0))},s=function(s){n.backspaceDelete(s,!1)||o.backspaceDelete(s,!1)||e.backspaceDelete(s,!1)||t.backspaceDelete(s,!1)||(r(s,"Delete"),i(s))},a=function(i){n.backspaceDelete(i,!0)||o.backspaceDelete(i,!0)||e.backspaceDelete(i,!0)||t.backspaceDelete(i,!0)||r(i,"ForwardDelete")};return{deleteCommand:s,forwardDeleteCommand:a}}),l("tinymce.core.dom.RangeNormalizer",["tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType"],function(e,t,n,o){var r=function(e){return o.isElement(e)&&/^(P|H[1-6]|DIV)$/.test(e.nodeName)},i=function(e,t){return t(e.endContainer)},s=function(e,t,n,o){var r=document.createRange();return r.setStart(e,t),r.setEnd(n,o),r},a=function(o){var a=t.fromRangeStart(o),l=t.fromRangeEnd(o),u=o.commonAncestorContainer;return o.collapsed===!1&&i(o,r)&&0===o.endOffset?e.fromPosition(!1,u,l).map(function(e){return!n.isInSameBlock(a,l,u)&&n.isInSameBlock(a,e,u)?s(a.container(),a.offset(),e.container(),e.offset()):o}).getOr(o):o},l=function(e){return a(e)};return{normalize:l}}),l("tinymce.core.InsertList",["tinymce.core.util.Tools","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition"],function(e,t,n){var o=function(e){var t=e.firstChild,n=e.lastChild;return t&&"meta"===t.name&&(t=t.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),!(!t||t!==n)&&("ul"===t.name||"ol"===t.name)},r=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},i=function(e,t,n){var o=t.serialize(n),i=e.createFragment(o);return r(i)},s=function(t){return e.grep(t.childNodes,function(e){return"LI"===e.nodeName})},a=function(e){return!e.firstChild},l=function(e){return e.length>0&&a(e[e.length-1])?e.slice(0,-1):e},u=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},d=function(e,t){return!!u(e,t)},c=function(e,t){var n=t.cloneRange(),o=t.cloneRange();return n.setStartBefore(e),o.setEndAfter(e),[n.cloneContents(),o.cloneContents()]},f=function(e,o){var r=n.before(e),i=new t(o),s=i.next(r);return s?s.toRange():null},p=function(e,o){var r=n.after(e),i=new t(o),s=i.prev(r);return s?s.toRange():null},m=function(t,n,o,r){var i=c(t,r),s=t.parentNode;return s.insertBefore(i[0],t),e.each(n,function(e){s.insertBefore(e,t)}),s.insertBefore(i[1],t),s.removeChild(t),p(n[n.length-1],o)},h=function(t,n,o){var r=t.parentNode;return e.each(n,function(e){r.insertBefore(e,t)}),f(t,o)},g=function(e,t,n,o){return o.insertAfter(t.reverse(),e),p(t[0],n)},v=function(e,o,r,a){var d=i(o,e,a),c=u(o,r.startContainer),f=l(s(d.firstChild)),p=1,v=2,y=o.getRoot(),b=function(e){var i=n.fromRangeStart(r),s=new t(o.getRoot()),a=e===p?s.prev(i):s.next(i);return!a||u(o,a.getNode())!==c};return b(p)?h(c,f,y):b(v)?g(c,f,y,o):m(c,f,y,r)};return{isListFragment:o,insertAtCaret:v,isParentBlockLi:d,trimListItems:l,listItems:s}}),l("tinymce.core.InsertContent",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.dom.RangeNormalizer","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.InsertList","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l){var u=o.matchNodeNames("td th"),d=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var o=n.firstChild,r=n.lastChild;!o||o===r&&"BR"===o.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},c=function(o,c,f){function p(e){function t(e){return o[e]&&3==o[e].nodeType}var n,o,r;return n=D.getRng(!0),o=n.startContainer,r=n.startOffset,3==o.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<o.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function m(){var e,t,n;e=D.getRng(!0),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed&&(" "===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(c)||(c+=" ")):" "===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(c)||(c=" "+c)))}function h(){if(N){var e=o.getBody(),t=new n(O);l.each(O.select("*[data-mce-fragment]"),function(n){for(var o=n.parentNode;o&&o!=e;o=o.parentNode)M[n.nodeName.toLowerCase()]&&t.compare(o,n)&&O.remove(n,!0)})}}function g(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}function v(e){l.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}function y(e){return!!e.getAttribute("data-mce-fragment")}function b(e){return e&&!o.schema.getShortEndedElements()[e.nodeName]}function _(n){function r(e){for(var t=o.getBody();e&&e!==t;e=e.parentNode)if("false"===o.dom.getContentEditable(e))return e;return null}function s(n){var r=e.fromRangeStart(n),i=new t(o.getBody());if(r=i.next(r))return r.toRange()}var a,l,d;if(n){if(D.scrollIntoView(n),a=r(n))return O.remove(n),void D.select(a);T=O.createRng(),P=n.previousSibling,P&&3==P.nodeType?(T.setStart(P,P.nodeValue.length),i.ie||(I=n.nextSibling,I&&3==I.nodeType&&(P.appendData(I.data),I.parentNode.removeChild(I)))):(T.setStartBefore(n),T.setEndBefore(n)),l=O.getParent(n,O.isBlock),O.remove(n),l&&O.isEmpty(l)&&(o.$(l).empty(),T.setStart(l,0),T.setEnd(l,0),u(l)||y(l)||!(d=s(T))?O.add(l,O.create("br",{"data-mce-bogus":"1"})):(T=d,O.remove(l))),D.setRng(T)}}var x,C,j,E,w,S,k,T,P,I,R,N,M=o.schema.getTextInlineElements(),D=o.selection,O=o.dom;/^ | $/.test(c)&&(c=p(c)),x=o.parser,N=f.merge,C=new s({validate:o.settings.validate},o.schema),R='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',S={content:c,format:"html",selection:!0},o.fire("BeforeSetContent",S),c=S.content,c.indexOf("{$caret}")==-1&&(c+="{$caret}"),c=c.replace(/\{\$caret\}/,R),T=D.getRng();var A=T.startContainer||(T.parentElement?T.parentElement():null),L=o.getBody();A===L&&D.isCollapsed()&&O.isBlock(L.firstChild)&&b(L.firstChild)&&O.isEmpty(L.firstChild)&&(T=O.createRng(),T.setStart(L.firstChild,0),T.setEnd(L.firstChild,0),D.setRng(T)),D.isCollapsed()||(o.selection.setRng(r.normalize(o.selection.getRng())),o.getDoc().execCommand("Delete",!1,null),m()),j=D.getNode();var B={context:j.nodeName.toLowerCase(),data:f.data};if(w=x.parse(c,B),f.paste===!0&&a.isListFragment(w)&&a.isParentBlockLi(O,j))return T=a.insertAtCaret(C,O,o.selection.getRng(!0),w),o.selection.setRng(T),void o.fire("SetContent",S);if(g(w),P=w.lastChild,"mce_marker"==P.attr("id"))for(k=P,P=P.prev;P;P=P.walk(!0))if(3==P.type||!O.isBlock(P.name)){o.schema.isValidChild(P.parent.name,"span")&&P.parent.insert(k,P,"br"===P.name);break}if(o._selectionOverrides.showBlockCaretContainer(j),B.invalid){for(D.setContent(R),j=D.getNode(),E=o.getBody(),9==j.nodeType?j=P=E:P=j;P!==E;)j=P,P=P.parentNode;c=j==E?E.innerHTML:O.getOuterHTML(j),c=C.serialize(x.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return C.serialize(w)}))),j==E?O.setHTML(E,c):O.setOuterHTML(j,c)}else c=C.serialize(w),d(o,c,j);h(),_(O.get("mce_marker")),v(o.getBody()),o.fire("SetContent",S),o.addVisual()},f=function(e){var t;return"string"!=typeof e?(t=l.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},p=function(e,t){var n=f(t);c(e,n.content,n.details)};return{insertAtCaret:p}}),l("tinymce.core.EditorCommands",["tinymce.core.delete.DeleteCommands","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.InsertContent","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){var a=s.each,l=s.extend,u=s.map,d=s.inArray,c=s.explode,f=r.ie&&r.ie<11,p=!0,m=!1;return function(s){function h(e,t,n,o){var r,i,l=0;if(!s.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||o&&o.skip_focus||s.focus(),o=s.fire("BeforeExecCommand",{command:e,ui:t,value:n}),o.isDefaultPrevented())return!1;if(i=e.toLowerCase(),r=M.exec[i])return r(i,t,n),s.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(a(s.plugins,function(o){if(o.execCommand&&o.execCommand(e,t,n))return s.fire("ExecCommand",{command:e,ui:t,value:n}),l=!0,!1}),l)return l;if(s.theme&&s.theme.execCommand&&s.theme.execCommand(e,t,n))return s.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{l=s.getDoc().execCommand(e,t,n)}catch(e){}return!!l&&(s.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}}function g(e){var t;if(!s.quirks.isHidden()&&!s.removed){if(e=e.toLowerCase(),t=M.state[e])return t(e);try{return s.getDoc().queryCommandState(e)}catch(e){}return!1}}function v(e){var t;if(!s.quirks.isHidden()&&!s.removed){if(e=e.toLowerCase(),t=M.value[e])return t(e);try{return s.getDoc().queryCommandValue(e)}catch(e){}}}function y(e,t){t=t||"exec",a(e,function(e,n){a(n.toLowerCase().split(","),function(n){M[t][n]=e})})}function b(e,t,n){e=e.toLowerCase(),M.exec[e]=function(e,o,r,i){return t.call(n||s,o,r,i)}}function _(e){if(e=e.toLowerCase(),M.exec[e])return!0;try{return s.getDoc().queryCommandSupported(e)}catch(e){}return!1}function x(e,t,n){e=e.toLowerCase(),M.state[e]=function(){return t.call(n||s)}}function C(e,t,n){e=e.toLowerCase(),M.value[e]=function(){return t.call(n||s)}}function j(e){return e=e.toLowerCase(),!!M.exec[e]}function E(e,t,n){return void 0===t&&(t=m),void 0===n&&(n=null),s.getDoc().execCommand(e,t,n)}function w(e){return R.match(e)}function S(e,t){R.toggle(e,t?{value:t}:void 0),s.nodeChanged()}function k(e){N=I.getBookmark(e)}function T(){I.moveToBookmark(N)}var P,I,R,N,M={state:{},exec:{},value:{}},D=s.settings;s.on("PreInit",function(){P=s.dom,I=s.selection,D=s.settings,R=s.formatter}),l(this,{execCommand:h,queryCommandState:g,queryCommandValue:v,queryCommandSupported:_,addCommands:y,addCommand:b,addQueryStateHandler:x,addQueryValueHandler:C,hasCustomCommand:j}),y({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=s.getDoc();try{E(e)}catch(e){t=p}if("paste"!==e||n.queryCommandEnabled(e)||(t=!0),t||!n.queryCommandSupported(e)){var o=s.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");r.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),s.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(I.isCollapsed()){var e=s.dom.getParent(s.selection.getStart(),"a");return void(e&&s.dom.remove(e,!0))}R.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),a("left,center,right,justify".split(","),function(e){t!=e&&R.remove("align"+e)}),"none"!=t&&S("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;E(e),t=P.getParent(I.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(k(),P.split(n,t),T()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){S(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){S(e,n)},FontSize:function(e,t,n){var o,r;n>=1&&n<=7&&(r=c(D.font_size_style_values),o=c(D.font_size_classes),n=o?o[n-1]||n:r[n-1]||n),S(e,n)},RemoveFormat:function(e){R.remove(e)},mceBlockQuote:function(){S("blockquote")},FormatBlock:function(e,t,n){return S(n||"p")},mceCleanup:function(){var e=I.getBookmark();s.setContent(s.getContent({cleanup:p}),{cleanup:p}),I.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||I.getNode();o!=s.getBody()&&(k(),s.dom.remove(o,p),T())},mceSelectNodeDepth:function(e,t,n){var o=0;P.getParent(I.getNode(),function(e){if(1==e.nodeType&&o++==n)return I.select(e),m},s.getBody())},mceSelectNode:function(e,t,n){I.select(n)},mceInsertContent:function(e,t,n){i.insertAtCaret(s,n)},mceInsertRawHTML:function(e,t,n){I.setContent("tiny_mce_marker"),s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){S(n)},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var t,n,o;t=D.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),g("InsertUnorderedList")||g("InsertOrderedList")?E(e):(D.forced_root_block||P.getParent(I.getNode(),P.isBlock)||R.apply("div"),a(I.getSelectedBlocks(),function(r){if("false"!==P.getContentEditable(r)&&"LI"!==r.nodeName){var i=s.getParam("indent_use_margin",!1)?"margin":"padding";i="TABLE"===r.nodeName?"margin":i,i+="rtl"==P.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(o=Math.max(0,parseInt(r.style[i]||0,10)-t),P.setStyle(r,i,o?o+n:"")):(o=parseInt(r.style[i]||0,10)+t+n,P.setStyle(r,i,o))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual,s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,I.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=P.getParent(I.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||R.remove("link"),n.href&&R.apply("link",n,o)},selectAll:function(){var e,n=P.getRoot();if(I.getRng().setStart){var o=P.getParent(I.getStart(),t.isContentEditableTrue);o&&(e=P.createRng(),e.selectNodeContents(o),I.setRng(e))}else e=I.getRng(),e.item||(e.moveToElementText(n),e.select())},delete:function(){e.deleteCommand(s)},forwardDelete:function(){e.forwardDeleteCommand(s)},mceNewDocument:function(){s.setContent("")},InsertLineBreak:function(e,t,r){function i(){for(var e,t=new o(h,v),n=s.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}var a,l,u,d=r,c=I.getRng(!0);new n(P).normalize(c);var m=c.startOffset,h=c.startContainer;if(1==h.nodeType&&h.hasChildNodes()){var g=m>h.childNodes.length-1;h=h.childNodes[Math.min(m,h.childNodes.length-1)]||h,m=g&&3==h.nodeType?h.nodeValue.length:0}var v=P.getParent(h,P.isBlock),y=v?v.nodeName.toUpperCase():"",b=v?P.getParent(v.parentNode,P.isBlock):null,_=b?b.nodeName.toUpperCase():"",x=d&&d.ctrlKey;"LI"!=_||x||(v=b,y=_),h&&3==h.nodeType&&m>=h.nodeValue.length&&(f||i()||(a=P.create("br"),c.insertNode(a),c.setStartAfter(a),c.setEndAfter(a),l=!0)),a=P.create("br"),c.insertNode(a);var C=P.doc.documentMode;return f&&"PRE"==y&&(!C||C<8)&&a.parentNode.insertBefore(P.doc.createTextNode("\r"),a),u=P.create("span",{},"&nbsp;"),a.parentNode.insertBefore(u,a),I.scrollIntoView(u),P.remove(u),l?(c.setStartBefore(a),c.setEndBefore(a)):(c.setStartAfter(a),c.setEndAfter(a)),I.setRng(c),s.undoManager.add(),p}}),y({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=I.isCollapsed()?[P.getParent(I.getNode(),P.isBlock)]:I.getSelectedBlocks(),o=u(n,function(e){return!!R.matchNode(e,t)});return d(o,p)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return w(e)},mceBlockQuote:function(){return w("blockquote")},Outdent:function(){var e;if(D.inline_styles){if((e=P.getParent(I.getStart(),P.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return p;if((e=P.getParent(I.getEnd(),P.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return p}return g("InsertUnorderedList")||g("InsertOrderedList")||!D.inline_styles&&!!P.getParent(I.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=P.getParent(I.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),y({"FontSize,FontName":function(e){var t,n=0;return(t=P.getParent(I.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),y({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}}),l("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(e,t){function n(t,s){var a,l,u=this;if(t=r(t),s=u.settings=s||{},a=s.base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(u.source=t);var d=0===t.indexOf("//");0!==t.indexOf("/")||d||(t=(a?a.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(l=s.base_uri?s.base_uri.path:new n(e.location.href).directory,""===s.base_uri.protocol?t="//mce_host"+u.toAbsPath(l,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(a&&a.protocol||"http")+"://mce_host"+u.toAbsPath(l,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),o(i,function(e,n){var o=t[n];o&&(o=o.replace(/\(mce_at\)/g,"@@")),u[e]=o}),a&&(u.protocol||(u.protocol=a.protocol),u.userInfo||(u.userInfo=a.userInfo),u.port||"mce_host"!==u.host||(u.port=a.port),u.host&&"mce_host"!==u.host||(u.host=a.host),u.source=""),d&&(u.protocol="")}var o=t.each,r=t.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),s={ftp:21,http:80,https:443,mailto:25};return n.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,o=this;if("./"===e)return e;if(e=new n(e,{base_uri:o}),"mce_host"!=e.host&&o.host!=e.host&&e.host||o.port!=e.port||o.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var r=o.getURI(),i=e.getURI();return r==i||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==i?r:(t=o.toRelPath(o.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new n(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=s[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,o,r,i=0,s="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,r=e.length;o<r;o++)if(o>=n.length||e[o]!=n[o]){i=o+1;break}if(e.length<n.length)for(o=0,r=n.length;o<r;o++)if(o>=e.length||e[o]!=n[o]){i=o+1;break}if(1===i)return t;for(o=0,r=e.length-(i-1);o<r;o++)s+="../";for(o=i-1,r=n.length;o<r;o++)s+=o!=i-1?"/"+n[o]:n[o];return s},toAbsPath:function(e,t){var n,r,i,s=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),o(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?s>0?s--:a.push(t[n]):s++);return n=e.length-s,i=n<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==i.indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},n.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},n.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},n}),l("tinymce.core.util.Class",["tinymce.core.util.Tools"],function(e){function t(){}var n,o,r=e.each,i=e.extend;return t.extend=n=function(e){function t(){var e,t,n,r=this;if(!o&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function s(){return this}function a(e,t){return function(){var n,o=this,r=o._super;return o._super=f[e],n=t.apply(o,arguments),o._super=r,n}}var l,u,d,c=this,f=c.prototype;o=!0,l=new c,o=!1,e.Mixins&&(r(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&r(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&r(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,o=this;return e!==t?(o[n]=e,o):o[n]}}),e.Statics&&r(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=i({},f.Defaults,e.Defaults));for(u in e)d=e[u],"function"==typeof d&&f[u]?l[u]=a(u,d):l[u]=d;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),l("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(e){function t(t){function n(){return!1}function o(){return!0}function r(e,r){var i,a,l,d;if(e=e.toLowerCase(),r=r||{},r.type=e,r.target||(r.target=u),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=o},r.stopPropagation=function(){r.isPropagationStopped=o},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=o},r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),t.beforeFire&&t.beforeFire(r),i=f[e])for(a=0,l=i.length;a<l;a++){if(d=i[a],d.once&&s(e,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(d.func.call(u,r)===!1)return r.preventDefault(),r}return r}function i(t,o,r,i){var s,a,l;if(o===!1&&(o=n),o)for(o={func:o},i&&e.extend(o,i),a=t.toLowerCase().split(" "),l=a.length;l--;)t=a[l],s=f[t],s||(s=f[t]=[],d(t,!0)),r?s.unshift(o):s.push(o);return c}function s(e,t){var n,o,r,i,s;if(e)for(i=e.toLowerCase().split(" "),n=i.length;n--;){if(e=i[n],o=f[e],!e){for(r in f)d(r,!1),delete f[r];return c}if(o){if(t)for(s=o.length;s--;)o[s].func===t&&(o=o.slice(0,s).concat(o.slice(s+1)),f[e]=o);else o.length=0;o.length||(d(e,!1),delete f[e])}}else{for(e in f)d(e,!1);f={}}return c}function a(e,t,n){return i(e,t,n,{once:!0})}function l(e){return e=e.toLowerCase(),!(!f[e]||0===f[e].length)}var u,d,c=this,f={};t=t||{},u=t.scope||c,d=t.toggleEvent||n,c.fire=r,c.on=i,c.off=s,c.once=a,c.has=l}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),l("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,o){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,o)}})),t._eventDispatcher}return{fire:function(e,n,o){var r=this;if(r.removed&&"remove"!==e)return n;if(n=t(r).fire(e,n,o),o!==!1&&r.parent)for(var i=r.parent();i&&!n.isPropagationStopped();)i.fire(e,n,!1),i=i.parent();return n},on:function(e,n,o){return t(this).on(e,n,o)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),l("tinymce.core.data.Binding",[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,o){function r(t){e.set(o,t.value)}function i(e){t.set(n,e.value)}var s;return e.on("change:"+o,i),t.on("change:"+n,r),s=e._bindings,s||(s=e._bindings=[],e.on("destroy",function(){for(var e=s.length;e--;)s[e]()})),s.push(function(){t.off("change:"+n,r)}),t.get(n)}})},e}),l("tinymce.core.data.ObservableObject",["tinymce.core.data.Binding","tinymce.core.util.Class","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,o){function r(e){return e.nodeType>0}function i(e,t){var n,s;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(o.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!i(e[n],t[n]))return!1}if(r(e)||r(t))return e===t;s={};for(n in t){if(!i(e[n],t[n]))return!1;s[n]=!0}for(n in e)if(!s[n]&&!i(e[n],t[n]))return!1;return!0}return t.extend({Mixins:[n],init:function(t){var n,o;t=t||{};for(n in t)o=t[n],o instanceof e&&(t[n]=o.create(this,n));this.data=t},set:function(t,n){var o,r,s=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(o in t)this.set(o,t[o]);return this}return i(s,n)||(this.data[t]=n,r={target:this,name:t,value:n,oldValue:s},this.fire("change:"+t,r),this.fire("change",r)),
this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),l("tinymce.core.ui.Selector",["tinymce.core.util.Class"],function(e){"use strict";function t(e){for(var t,n=[],o=e.length;o--;)t=e[o],t.__checked||(n.push(t),t.__checked=1);for(o=n.length;o--;)delete n[o].__checked;return n}var n,o=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=/^\s*|\s*$/g,s=e.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function s(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function a(e,t,n){if(e)return function(o){var r=o[e]?o[e]():"";return t?"="===t?r===n:"*="===t?r.indexOf(n)>=0:"~="===t?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===t?r!=n:"^="===t?0===r.indexOf(n):"$="===t&&r.substr(r.length-n.length)===n:!!n}}function l(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=d(e[1],[]),function(e){return!c(e,t)}):(e=e[2],function(t,n,o){return"first"===e?0===n:"last"===e?n===o-1:"even"===e?n%2===0:"odd"===e?n%2===1:!!t[e]&&t[e]()})}function u(e,r,u){function d(e){e&&r.push(e)}var c;return c=o.exec(e.replace(i,"")),d(t(c[1])),d(n(c[2])),d(s(c[3])),d(a(c[4],c[5],c[6])),d(l(c[7])),r.pseudo=!!c[7],r.direct=u,r}function d(e,t){var n,o,i,s=[];do if(r.exec(""),o=r.exec(e),o&&(e=o[3],s.push(o[1]),o[2])){n=o[3];break}while(o);for(n&&d(n,t),e=[],i=0;i<s.length;i++)">"!=s[i]&&e.push(u(s[i],[],">"===s[i-1]));return t.push(e),t}var c=this.match;this._selectors=d(e,[])},match:function(e,t){var n,o,r,i,s,a,l,u,d,c,f,p,m;for(t=t||this._selectors,n=0,o=t.length;n<o;n++){for(s=t[n],i=s.length,m=e,p=0,r=i-1;r>=0;r--)for(u=s[r];m;){if(u.pseudo)for(f=m.parent().items(),d=c=f.length;d--&&f[d]!==m;);for(a=0,l=u.length;a<l;a++)if(!u[a](m,d,c)){a=l+1;break}if(a===l){p++;break}if(r===i-1)break;m=m.parent()}if(p===i)return!0}return!1},find:function(e){function o(e,t,n){var r,i,s,l,u,d=t[n];for(r=0,i=e.length;r<i;r++){for(u=e[r],s=0,l=d.length;s<l;s++)if(!d[s](u,r,i)){s=l+1;break}if(s===l)n==t.length-1?a.push(u):u.items&&o(u.items(),t,n+1);else if(d.direct)return;u.items&&o(u.items(),t,n)}}var r,i,a=[],l=this._selectors;if(e.items){for(r=0,i=l.length;r<i;r++)o(e.items(),l[r],0);i>1&&(a=t(a))}return n||(n=s.Collection),new n(a)}});return s}),l("tinymce.core.ui.Collection",["tinymce.core.util.Tools","tinymce.core.ui.Selector","tinymce.core.util.Class"],function(e,t,n){"use strict";var o,r,i=Array.prototype.push,s=Array.prototype.slice;return r={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?i.apply(n,t):t instanceof o?n.add(t.toArray()):i.call(n,t),n},set:function(e){var t,n=this,o=n.length;for(n.length=0,n.add(e),t=n.length;t<o;t++)delete n[t];return n},filter:function(e){var n,r,i,s,a=this,l=[];for("string"==typeof e?(e=new t(e),s=function(t){return e.match(t)}):s=e,n=0,r=a.length;n<r;n++)i=a[n],s(i)&&l.push(i);return new o(l)},slice:function(){return new o(s.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new o(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,o,r=this;return t!==n?(r.each(function(n){n[e]&&n[e](t)}),r):(o=r[0],o&&o[e]?o[e]():void 0)},exec:function(t){var n=this,o=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,o)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){r[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){r[e]=function(t){return this.prop(e,t)}}),o=n.extend(r),t.Collection=o,o}),l("tinymce.core.ui.DomUtils",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.dom.DOMUtils"],function(e,t,n){"use strict";var o=0,r={id:function(){return"mceu_"+o++},create:function(e,o,r){var i=document.createElement(e);return n.DOM.setAttribs(i,o),"string"==typeof r?i.innerHTML=r:t.each(r,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return n.DOM.createFragment(e)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var o=e.getBoundingClientRect();t=Math.max(o.width||o.right-o.left,e.offsetWidth),n=Math.max(o.height||o.bottom-o.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return n.DOM.getPos(e,t||r.getContainer())},getContainer:function(){return e.container?e.container:document.body},getViewPort:function(e){return n.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return n.DOM.addClass(e,t)},removeClass:function(e,t){return n.DOM.removeClass(e,t)},hasClass:function(e,t){return n.DOM.hasClass(e,t)},toggleClass:function(e,t,o){return n.DOM.toggleClass(e,t,o)},css:function(e,t,o){return n.DOM.setStyle(e,t,o)},getRuntimeStyle:function(e,t){return n.DOM.getStyle(e,t,!0)},on:function(e,t,o,r){return n.DOM.bind(e,t,o,r)},off:function(e,t,o){return n.DOM.unbind(e,t,o)},fire:function(e,t,o){return n.DOM.fire(e,t,o)},innerHtml:function(e,t){n.DOM.setHTML(e,t)}};return r}),l("tinymce.core.ui.BoxUtils",[],function(){"use strict";return{parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function o(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:o(t+"TopWidth"),right:o(t+"RightWidth"),bottom:o(t+"BottomWidth"),left:o(t+"LeftWidth")}}}}),l("tinymce.core.ui.ClassList",["tinymce.core.util.Tools"],function(e){"use strict";function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),l("tinymce.core.ui.ReflowQueue",["tinymce.core.util.Delay"],function(e){var t,n={};return{add:function(o){var r=o.parent();if(r){if(!r._layout||r._layout.isNative())return;n[r._id]||(n[r._id]=r),t||(t=!0,e.requestAnimationFrame(function(){var e,o;t=!1;for(e in n)o=n[e],o.state.get("rendered")&&o.reflow();n={}},document.body))}},remove:function(e){n[e._id]&&delete n[e._id]}}}),l("tinymce.core.ui.Control",["tinymce.core.util.Class","tinymce.core.util.Tools","tinymce.core.util.EventDispatcher","tinymce.core.data.ObservableObject","tinymce.core.ui.Collection","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.ui.BoxUtils","tinymce.core.ui.ClassList","tinymce.core.ui.ReflowQueue"],function(e,t,n,o,r,i,s,a,l,u){"use strict";function d(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,o){o&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&c(e))}})),e._eventDispatcher}function c(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function o(t){var n,o,r,i=e.getParentCtrl(t.target),s=u._lastHoverCtrl,a=0;if(i!==s){if(u._lastHoverCtrl=i,o=i.parents().toArray().reverse(),o.push(i),s){for(r=s.parents().toArray().reverse(),r.push(s),a=0;a<r.length&&o[a]===r[a];a++);for(n=r.length-1;n>=a;n--)s=r[n],s.fire("mouseleave",{target:s.getEl()})}for(n=a;n<o.length;n++)i=o[n],i.fire("mouseenter",{target:i.getEl()})}}function r(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var i,a,l,u,d,c;if(d=e._nativeEvents){for(l=e.parents().toArray(),l.unshift(e),i=0,a=l.length;!u&&i<a;i++)u=l[i]._eventsRoot;for(u||(u=l[l.length-1]||e),e._eventsRoot=u,a=i,i=0;i<a;i++)l[i]._eventsRoot=u;var f=u._delegates;f||(f=u._delegates={});for(c in d){if(!d)return!1;"wheel"!==c||m?("mouseenter"===c||"mouseleave"===c?u._hasMouseEnter||(s(u.getEl()).on("mouseleave",n).on("mouseover",o),u._hasMouseEnter=1):f[c]||(s(u.getEl()).on(c,t),f[c]=!0),d[c]=!1):p?s(e.getEl()).on("mousewheel",r):s(e.getEl()).on("DOMMouseScroll",r)}}}var f,p="onmousewheel"in document,m=!1,h="mce-",g=0,v={Statics:{classPrefix:h},isRtl:function(){return f.rtl},classPrefix:h,init:function(e){function n(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)u.classes.add(e[t])}var r,i,u=this;u.settings=e=t.extend({},u.Defaults,e),u._id=e.id||"mceu_"+g++,u._aria={role:e.role},u._elmCache={},u.$=s,u.state=new o({visible:!0,active:!1,disabled:!1,value:""}),u.data=new o(e.data),u.classes=new l(function(){u.state.get("rendered")&&(u.getEl().className=this.toString())}),u.classes.prefix=u.classPrefix,r=e.classes,r&&(u.Defaults&&(i=u.Defaults.classes,i&&r!=i&&n(i)),n(r)),t.each("title text name visible disabled active value".split(" "),function(t){t in e&&u[t](e[t])}),u.on("click",function(){if(u.disabled())return!1}),u.settings=e,u.borderBox=a.parseBox(e.border),u.paddingBox=a.parseBox(e.padding),u.marginBox=a.parseBox(e.margin),e.hidden&&u.hide()},Properties:"parent,name",getContainerElm:function(){return i.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,o,r,s,l,u,d,c,f=this,p=f.settings,m=f.getEl();e=f.borderBox=f.borderBox||a.measureBox(m,"border"),f.paddingBox=f.paddingBox||a.measureBox(m,"padding"),f.marginBox=f.marginBox||a.measureBox(m,"margin"),c=i.getSize(m),u=p.minWidth,d=p.minHeight,r=u||c.width,s=d||c.height,n=p.width,o=p.height,l=p.autoResize,l="undefined"!=typeof l?l:!n&&!o,n=n||r,o=o||s;var h=e.left+e.right,g=e.top+e.bottom,v=p.maxWidth||65535,y=p.maxHeight||65535;return f._layoutRect=t={x:p.x||0,y:p.y||0,w:n,h:o,deltaW:h,deltaH:g,contentW:n-h,contentH:o-g,innerW:n-h,innerH:o-g,startMinWidth:u||0,startMinHeight:d||0,minW:Math.min(r,v),minH:Math.min(s,y),maxW:v,maxH:y,autoResize:l,scrollW:0},f._lastLayoutRect={},t},layoutRect:function(e){var t,n,o,r,i,s,a=this,l=a._layoutRect;return l||(l=a.initLayoutRect()),e?(o=l.deltaW,r=l.deltaH,e.x!==i&&(l.x=e.x),e.y!==i&&(l.y=e.y),e.minW!==i&&(l.minW=e.minW),e.minH!==i&&(l.minH=e.minH),n=e.w,n!==i&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-o),n=e.h,n!==i&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-r),n=e.innerW,n!==i&&(n=n<l.minW-o?l.minW-o:n,n=n>l.maxW-o?l.maxW-o:n,l.innerW=n,l.w=n+o),n=e.innerH,n!==i&&(n=n<l.minH-r?l.minH-r:n,n=n>l.maxH-r?l.maxH-r:n,l.innerH=n,l.h=n+r),e.contentW!==i&&(l.contentW=e.contentW),e.contentH!==i&&(l.contentH=e.contentH),t=a._lastLayoutRect,t.x===l.x&&t.y===l.y&&t.w===l.w&&t.h===l.h||(s=f.repaintControls,s&&s.map&&!s.map[a._id]&&(s.push(a),s.map[a._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),a):l},repaint:function(){var e,t,n,o,r,i,s,a,l,u,d=this;l=document.createRange?function(e){return e}:Math.round,e=d.getEl().style,o=d._layoutRect,a=d._lastRepaintRect||{},r=d.borderBox,i=r.left+r.right,s=r.top+r.bottom,o.x!==a.x&&(e.left=l(o.x)+"px",a.x=o.x),o.y!==a.y&&(e.top=l(o.y)+"px",a.y=o.y),o.w!==a.w&&(u=l(o.w-i),e.width=(u>=0?u:0)+"px",a.w=o.w),o.h!==a.h&&(u=l(o.h-s),e.height=(u>=0?u:0)+"px",a.h=o.h),d._hasBody&&o.innerW!==a.innerW&&(u=l(o.innerW),n=d.getEl("body"),n&&(t=n.style,t.width=(u>=0?u:0)+"px"),a.innerW=o.innerW),d._hasBody&&o.innerH!==a.innerH&&(u=l(o.innerH),n=n||d.getEl("body"),n&&(t=t||n.style,t.height=(u>=0?u:0)+"px"),a.innerH=o.innerH),d._lastRepaintRect=a,d.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,i.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(r){return t||o.parentsAndSelf().each(function(o){var r=o.settings.callbacks;if(r&&(t=r[e]))return n=o,!1}),t?t.call(n,r):(r.action=e,void this.fire("execute",r))}}var o=this;return d(o).on(e,n(t)),o},off:function(e,t){return d(this).off(e,t),this},fire:function(e,t,n){var o=this;if(t=t||{},t.control||(t.control=o),t=d(o).fire(e,t),n!==!1&&o.parent)for(var r=o.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return d(this).has(e)},parents:function(e){var t,n=this,o=new r;for(t=n.parent();t;t=t.parent())o.add(t);return e&&(o=o.filter(e)),o},parentsAndSelf:function(e){return new r(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=s("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,o=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&o.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return f.translate?f.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,o=n.getEl(),r=n.parent();if(n.items){var i=n.items().toArray();for(t=i.length;t--;)i[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&s(o).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],o&&o.parentNode&&o.parentNode.removeChild(o),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return s(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return s(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,o,r,i=this,a=i.settings;i.$el=s(i.getEl()),i.state.set("rendered",!0);for(o in a)0===o.indexOf("on")&&i.on(o.substr(2),a[o]);if(i._eventsRoot){for(n=i.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(o in r._nativeEvents)i._nativeEvents[o]=!0}c(i),a.style&&(e=i.getEl(),e&&(e.setAttribute("style",a.style),e.style.cssText=a.style)),i.settings.border&&(t=i.borderBox,i.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=i.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[i._id]=i;for(var d in i._aria)i.aria(d,i._aria[d]);i.state.get("visible")===!1&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(e){var t,n=e.value;i.state.get("rendered")&&(i.getEl().style.display=n===!1?"none":"",i.getEl().getBoundingClientRect()),t=i.parent(),t&&(t._lastRect=null),i.fire(n?"show":"hide"),u.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,o,r=e;for(n=o=0;r&&r!=t&&r.nodeType;)n+=r.offsetLeft||0,o+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:o}}var n,o,r,i,s,a,l=this.getEl(),u=l.parentNode,d=t(l,u);return n=d.x,o=d.y,r=l.offsetWidth,i=l.offsetHeight,s=u.clientWidth,a=u.clientHeight,"end"==e?(n-=s-r,o-=a-i):"center"==e&&(n-=s/2-r/2,o-=a/2-i/2),u.scrollLeft=n,u.scrollTop=o,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var o=n.length;o--;)n[o].rootControl=e;return e},reflow:function(){u.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};return t.each("text title visible disabled active value".split(" "),function(e){v[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),f=e.extend(v)}),l("tinymce.core.ui.Factory",[],function(){"use strict";var e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(t,n){var o;if("string"==typeof t?(n=n||{},n.type=t):(n=t,t=n.type),t=t.toLowerCase(),o=e[t],!o)throw new Error("Could not find control by type: "+t);return o=new o(n),o.type=t,o}}}),l("tinymce.core.ui.KeyboardNavigation",[],function(){"use strict";var e=function(e){return!!e.getAttribute("data-mce-tabstop")};return function(t){function n(e){return e&&1===e.nodeType}function o(e){return e=e||_,n(e)?e.getAttribute("role"):null}function r(e){for(var t,n=e||_;n=n.parentNode;)if(t=o(n))return t}function i(e){var t=_;if(n(t))return t.getAttribute("aria-"+e)}function s(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function a(t){return!(!s(t)||t.hidden)||(!!e(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(t)))}function l(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display&&!e.disabled){a(e)&&n.push(e);for(var o=0;o<e.childNodes.length;o++)t(e.childNodes[o])}}var n=[];return t(e||C.getEl()),n}function u(e){var t,n;e=e||x,n=e.parents().toArray(),n.unshift(e);for(var o=0;o<n.length&&(t=n[o],!t.settings.ariaRoot);o++);return t}function d(e){var t=u(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function f(e,t){var n=-1,o=u();t=t||l(o.getEl());for(var r=0;r<t.length;r++)t[r]===_&&(n=r);n+=e,o.lastAriaIndex=c(n,t)}function p(){var e=r();"tablist"==e?f(-1,l(_.parentNode)):x.parent().submenu?y():f(-1)}function m(){var e=o(),t=r();"tablist"==t?f(1,l(_.parentNode)):"menuitem"==e&&"menu"==t&&i("haspopup")?b():f(1)}function h(){f(-1)}function g(){var e=o(),t=r();"menuitem"==e&&"menubar"==t?b():"button"==e&&i("haspopup")?b({key:"down"}):f(1)}function v(e){var t=r();if("tablist"==t){var n=l(x.getEl("body"))[0];n&&n.focus()}else f(e.shiftKey?-1:1)}function y(){x.fire("cancel")}function b(e){e=e||{},x.fire("click",{target:_,aria:e})}var _,x,C=t.root;try{_=document.activeElement}catch(e){_=document.body}return x=C.getParentCtrl(_),C.on("keydown",function(t){function n(t,n){s(_)||e(_)||"slider"!==o(_)&&n(t)!==!1&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:n(t,p);break;case 39:n(t,m);break;case 38:n(t,h);break;case 40:n(t,g);break;case 27:y();break;case 14:case 13:case 32:n(t,b);break;case 9:v(t)!==!1&&t.preventDefault()}}),C.on("focusin",function(e){_=e.target,x=e.control}),{focusFirst:d}}}),l("tinymce.core.ui.Container",["tinymce.core.ui.Control","tinymce.core.ui.Collection","tinymce.core.ui.Selector","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.ui.ClassList","tinymce.core.ui.ReflowQueue"],function(e,t,n,o,r,i,s,a,l){"use strict";var u={};return e.extend({init:function(e){var n=this;n._super(e),e=n.settings,e.fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new a(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=o.create((e.layout||"")+"layout"),n.settings.items?n.add(n.settings.items):n.add(n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,o,r=this;return e&&(n=r.keyboardNav||r.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(r):(o=r.find("*"),r.statusbar&&o.add(r.statusbar.items()),o.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),r)},replace:function(e,t){for(var n,o=this.items(),r=o.length;r--;)if(o[r]===e){o[r]=t;break}r>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,r=this,s=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=i.extend({},r.settings.defaults,t),t.type=n.type=n.type||t.type||r.settings.defaultType||(n.defaults?n.defaults.type:null),t=o.create(n)),s.push(t))}),s},renderNew:function(){var e=this;return e.items().each(function(t,n){var o;t.parent(e),t.state.get("rendered")||(o=e.getEl("body"),o.hasChildNodes()&&n<=o.childNodes.length-1?s(o.childNodes[n]).before(t.renderHtml()):s(o).append(t.renderHtml()),t.postRender(),l.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var o,r,i,s=this;return e=s.create(e),o=s.items(),!n&&t<o.length-1&&(t+=1),t>=0&&t<o.length&&(r=o.slice(0,t).toArray(),i=o.slice(t).toArray(),o.set(r.concat(e,i))),s.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),o=e.value();n&&"undefined"!=typeof o&&(t[n]=o)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new r({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(l.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),l("tinymce.core.ui.DragHelper",["tinymce.core.dom.DomQuery"],function(e){"use strict";function t(e){var t,n,o,r,i,s,a,l,u=Math.max;return t=e.documentElement,n=e.body,o=u(t.scrollWidth,n.scrollWidth),r=u(t.clientWidth,n.clientWidth),i=u(t.offsetWidth,n.offsetWidth),s=u(t.scrollHeight,n.scrollHeight),a=u(t.clientHeight,n.clientHeight),l=u(t.offsetHeight,n.offsetHeight),{width:o<i?r:o,height:s<l?a:s}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(o,r){function i(){return p.getElementById(r.handle||o)}var s,a,l,u,d,c,f,p=r.document||document;r=r||{},l=function(o){var l,m,h=t(p);n(o),o.preventDefault(),a=o.button,l=i(),c=o.screenX,f=o.screenY,m=window.getComputedStyle?window.getComputedStyle(l,null).getPropertyValue("cursor"):l.runtimeStyle.cursor,s=e("<div></div>").css({position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:2147483647,opacity:1e-4,cursor:m}).appendTo(p.body),e(p).on("mousemove touchmove",d).on("mouseup touchend",u),r.start(o)},d=function(e){return n(e),e.button!==a?u(e):(e.deltaX=e.screenX-c,e.deltaY=e.screenY-f,e.preventDefault(),void r.drag(e))},u=function(t){n(t),e(p).off("mousemove touchmove",d).off("mouseup touchend",u),s.remove(),r.stop&&r.stop(t)},this.destroy=function(){e(i()).off()},e(i()).on("mousedown touchstart",l)}}),l("tinymce.core.ui.Scrollable",["tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper"],function(e,t){"use strict";return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,s,a,l,u,d){var c,f,p,m,h,g,v,y,b;if(f=r.getEl("scroll"+t)){if(y=s.toLowerCase(),b=a.toLowerCase(),e(r.getEl("absend")).css(y,r.layoutRect()[l]-1),!u)return void e(f).css("display","none");e(f).css("display","block"),c=r.getEl("body"),p=r.getEl("scroll"+t+"t"),m=c["client"+a]-2*i,m-=n&&o?f["client"+d]:0,h=c["scroll"+a],g=m/h,v={},v[y]=c["offset"+s]+i,v[b]=m,e(f).css(v),v={},v[y]=c["scroll"+s]*g,v[b]=m*g,e(p).css(v)}}var n,o,s;s=r.getEl("body"),n=s.scrollWidth>s.clientWidth,o=s.scrollHeight>s.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",o,"Width")}function o(){function n(n,o,s,a,l){var u,d=r._id+"-scroll"+n,c=r.classPrefix;e(r.getEl()).append('<div id="'+d+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'"><div id="'+d+'t" class="'+c+'scrollbar-thumb"></div></div>'),r.draghelper=new t(d+"t",{start:function(){u=r.getEl("body")["scroll"+o],e("#"+d).addClass(c+"active")},drag:function(e){var t,d,c,f,p=r.layoutRect();d=p.contentW>p.innerW,c=p.contentH>p.innerH,f=r.getEl("body")["client"+s]-2*i,f-=d&&c?r.getEl("scroll"+n)["client"+l]:0,t=f/r.getEl("body")["scroll"+s],r.getEl("body")["scroll"+o]=u+e["delta"+a]/t},stop:function(){e("#"+d).removeClass(c+"active")}})}r.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var r=this,i=2;r.settings.autoScroll&&(r._hasScroll||(r._hasScroll=!0,o(),r.on("wheel",function(e){var t=r.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e(r.getEl("body")).on("scroll",n)),n())}}}),l("tinymce.core.ui.Panel",["tinymce.core.ui.Container","tinymce.core.ui.Scrollable"],function(e,t){"use strict";return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),l("tinymce.core.ui.Movable",["tinymce.core.ui.DomUtils"],function(e){"use strict";function t(t,n,o){var r,i,s,a,l,u,d,c,f,p;return f=e.getViewPort(),i=e.getPos(n),s=i.x,a=i.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position")&&(s-=f.x,a-=f.y),r=t.getEl(),p=e.getSize(r),l=p.width,u=p.height,p=e.getSize(n),d=p.width,c=p.height,o=(o||"").split(""),"b"===o[0]&&(a+=c),"r"===o[1]&&(s+=d),"c"===o[0]&&(a+=Math.round(c/2)),"c"===o[1]&&(s+=Math.round(d/2)),"b"===o[3]&&(a-=u),"r"===o[4]&&(s-=l),"c"===o[3]&&(a-=Math.round(u/2)),"c"===o[4]&&(s-=Math.round(l/2)),{x:s,y:a,w:l,h:u}}return{testMoveRel:function(n,o){for(var r=e.getViewPort(),i=0;i<o.length;i++){var s=t(this,n,o[i]);if(this.state.get("fixed")){if(s.x>0&&s.x+s.w<r.w&&s.y>0&&s.y+s.h<r.h)return o[i]}else if(s.x>r.x&&s.x+s.w<r.w+r.x&&s.y>r.y&&s.y+s.h<r.h+r.y)return o[i]}return o[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var o=t(this,e,n);return this.moveTo(o.x,o.y)},moveBy:function(e,t){var n=this,o=n.layoutRect();return n.moveTo(o.x+e,o.y+t),n},moveTo:function(t,n){function o(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var i=e.getViewPort(window),s=r.layoutRect();t=o(t,i.w+i.x,s.w),n=o(n,i.h+i.y,s.h)}return r.state.get("rendered")?r.layoutRect({x:t,y:n}).repaint():(r.settings.x=t,r.settings.y=n),r.fire("move",{x:t,y:n}),r}}}),l("tinymce.core.ui.Resizable",["tinymce.core.ui.DomUtils"],function(e){"use strict";return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var o=e.getWindowSize();t=t<=1?t*o.w:t,n=n<=1?n*o.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,o=n.layoutRect();return n.resizeTo(o.w+e,o.h+t)}}}),l("tinymce.core.ui.FloatPanel",["tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.util.Delay"],function(e,t,n,o,r,i){"use strict";function s(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function a(e){for(var t=y.length;t--;){var n=y[t],o=n.getParentCtrl(e.target);if(n.settings.autohide){if(o&&(s(o,n)||n.parent()===o))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function l(){m||(m=function(e){2!=e.button&&a(e)},r(document).on("click touchstart",m))}function u(){h||(h=function(){var e;for(e=y.length;e--;)c(y[e])},r(window).on("scroll",h))}function d(){if(!g){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;g=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,_.hideAll())},r(window).on("resize",g)}}function c(e){function t(t,n){for(var o,r=0;r<y.length;r++)if(y[r]!=e)for(o=y[r].parent();o&&(o=o.parent());)o==e&&y[r].fixed(t).moveBy(0,n).repaint()}var n=o.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function f(e,t){var n,o,i=_.zIndex||65535;if(e)b.push(t);else for(n=b.length;n--;)b[n]===t&&b.splice(n,1);if(b.length)for(n=0;n<b.length;n++)b[n].modal&&(i++,o=b[n]),b[n].getEl().style.zIndex=i,b[n].zIndex=i,i++;var s=r("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];o?r(s).css("z-index",o.zIndex-1):s&&(s.parentNode.removeChild(s),v=!1),_.currentZIndex=i}function p(e){var t;for(t=y.length;t--;)y[t]===e&&y.splice(t,1);for(t=b.length;t--;)b[t]===e&&b.splice(t,1)}var m,h,g,v,y=[],b=[],_=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(l(),d(),y.push(t)),e.autofix&&(u(),
t.on("move",function(){c(this)})),t.on("postrender show",function(e){if(e.control==t){var n,o=t.classPrefix;t.modal&&!v&&(n=r("#"+o+"modal-block",t.getContainerElm()),n[0]||(n=r('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>').appendTo(t.getContainerElm())),i.setTimeout(function(){n.addClass(o+"in"),r(t.getEl()).addClass(o+"in")}),v=!0),f(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=o.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=y.length;e--&&y[e]!==t;);return e===-1&&y.push(t),n},hide:function(){return p(this),f(!1,this),this._super()},hideAll:function(){_.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),f(!1,e)),e},remove:function(){p(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return _.hideAll=function(){for(var e=y.length;e--;){var t=y[e];t&&t.settings.autohide&&(t.hide(),y.splice(e,1))}},_}),l("tinymce.core.ui.Window",["tinymce.core.ui.FloatPanel","tinymce.core.ui.Panel","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper","tinymce.core.ui.BoxUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,o,r,i,s,a){"use strict";function l(e){var t,n="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",r=o("meta[name=viewport]")[0];s.overrideViewPort!==!1&&(r||(r=document.createElement("meta"),r.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(r)),t=r.getAttribute("content"),t&&"undefined"!=typeof p&&(p=t),r.setAttribute("content",e?n:p))}function u(e,t){d()&&t===!1&&o([document.documentElement,document.body]).removeClass(e+"fullscreen")}function d(){for(var e=0;e<f.length;e++)if(f[e]._fullscreen)return!0;return!1}function c(){function e(){var e,t,o=n.getWindowSize();for(e=0;e<f.length;e++)t=f[e].layoutRect(),f[e].moveTo(f[e].settings.x||Math.max(0,o.w/2-t.w/2),f[e].settings.y||Math.max(0,o.h/2-t.h/2))}if(!s.desktop){var t={w:window.innerWidth,h:window.innerHeight};a.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},o(window).trigger("resize"))},100)}o(window).on("resize",e)}var f=[],p="",m=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var o=this;o._super(e),o.isRtl()&&o.classes.add("rtl"),o.classes.add("window"),o.bodyClasses.add("window-body"),o.state.set("fixed",!0),e.buttons&&(o.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:o.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),o.statusbar.classes.add("foot"),o.statusbar.parent(o)),o.on("click",function(e){var t=o.classPrefix+"close";(n.hasClass(e.target,t)||n.hasClass(e.target.parentNode,t))&&o.close()}),o.on("cancel",function(){o.close()}),o.aria("describedby",o.describedBy||o._id+"-none"),o.aria("label",e.title),o._fullscreen=!1},recalc:function(){var e,t,o,r,i=this,s=i.statusbar;i._fullscreen&&(i.layoutRect(n.getWindowSize()),i.layoutRect().contentH=i.layoutRect().innerH),i._super(),e=i.layoutRect(),i.settings.title&&!i._fullscreen&&(t=e.headerW,t>e.w&&(o=e.x-Math.max(0,t/2),i.layoutRect({w:t,x:o}),r=!0)),s&&(s.layoutRect({w:i.layoutRect().innerW}).recalc(),t=s.layoutRect().minW+e.deltaW,t>e.w&&(o=e.x-Math.max(0,t-e.w),i.layoutRect({w:t,x:o}),r=!0)),r&&i.recalc()},initLayoutRect:function(){var e,t=this,o=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var i=n.getSize(e);o.headerW=i.width,o.headerH=i.height,r+=o.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),o.deltaH+=r,o.minH+=r,o.h+=r;var s=n.getWindowSize();return o.x=t.settings.x||Math.max(0,s.w/2-o.w/2),o.y=t.settings.y||Math.max(0,s.h/2-o.h/2),o},renderHtml:function(){var e=this,t=e._layout,n=e._id,o=e.classPrefix,r=e.settings,i="",s="",a=r.html;return e.preRender(),t.preRender(e),r.title&&(i='<div id="'+n+'-head" class="'+o+'window-head"><div id="'+n+'-title" class="'+o+'title">'+e.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+o+'dragh"></div><button type="button" class="'+o+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),"undefined"==typeof a&&(a=t.renderHtml(e)),e.statusbar&&(s=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+a+"</div>"+s+"</div></div>"},fullscreen:function(e){var t,r,s=this,l=document.documentElement,u=s.classPrefix;if(e!=s._fullscreen)if(o(window).on("resize",function(){var e;if(s._fullscreen)if(t)s._timer||(s._timer=a.setTimeout(function(){var e=n.getWindowSize();s.moveTo(0,0).resizeTo(e.w,e.h),s._timer=0},50));else{e=(new Date).getTime();var o=n.getWindowSize();s.moveTo(0,0).resizeTo(o.w,o.h),(new Date).getTime()-e>50&&(t=!0)}}),r=s.layoutRect(),s._fullscreen=e,e){s._initial={x:r.x,y:r.y,w:r.w,h:r.h},s.borderBox=i.parseBox("0"),s.getEl("head").style.display="none",r.deltaH-=r.headerH+2,o([l,document.body]).addClass(u+"fullscreen"),s.classes.add("fullscreen");var d=n.getWindowSize();s.moveTo(0,0).resizeTo(d.w,d.h)}else s.borderBox=i.parseBox(s.settings.border),s.getEl("head").style.display="",r.deltaH+=r.headerH,o([l,document.body]).removeClass(u+"fullscreen"),s.classes.remove("fullscreen"),s.moveTo(s._initial.x,s._initial.y).resizeTo(s._initial.w,s._initial.h);return s.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new r(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),f.push(t),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),u(t.classPrefix,!1),e=f.length;e--;)f[e]===t&&f.splice(e,1);l(f.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return c(),m}),l("tinymce.core.ui.MessageBox",["tinymce.core.ui.Window"],function(e){"use strict";var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[o("Ok",!0,!0),o("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:r=[o("Yes",1,!0),o("No",0)],n.buttons==t.YES_NO_CANCEL&&r.push(o("Cancel",-1));break;default:r=[o("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){i(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),l("tinymce.core.WindowManager",["tinymce.core.ui.Window","tinymce.core.ui.MessageBox"],function(e,t){return function(n){function o(){if(a.length)return a[a.length-1]}function r(e){n.fire("OpenWindow",{win:e})}function i(e){n.fire("CloseWindow",{win:e})}var s=this,a=[];s.windows=a,n.on("remove",function(){for(var e=a.length;e--;)a[e].close()}),s.open=function(t,o){var s;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){s.find("form")[0].submit()}},{text:"Cancel",onclick:function(){s.close()}}]),s=new e(t),a.push(s),s.on("close",function(){for(var e=a.length;e--;)a[e]===s&&a.splice(e,1);a.length||n.focus(),i(s)}),t.data&&s.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),s.features=t||{},s.params=o||{},1===a.length&&n.nodeChanged(),s=s.renderTo().reflow(),r(s),s},s.alert=function(e,o,s){var a;a=t.alert(e,function(){o?o.call(s||this):n.focus()}),a.on("close",function(){i(a)}),r(a)},s.confirm=function(e,n,o){var s;s=t.confirm(e,function(e){n.call(o||this,e)}),s.on("close",function(){i(s)}),r(s)},s.close=function(){o()&&o().close()},s.getParams=function(){return o()?o().params:null},s.setParams=function(e){o()&&(o().params=e)},s.getWindows=function(){return a}}}),l("tinymce.core.ui.Tooltip",["tinymce.core.ui.Control","tinymce.core.ui.Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),l("tinymce.core.ui.Widget",["tinymce.core.ui.Control","tinymce.core.ui.Tooltip"],function(e,t){"use strict";var n,o=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&o.tooltips!==!1&&(t.on("mouseenter",function(n){var o=t.tooltip().moveTo(-65535);if(n.control==t){var r=o.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);o.classes.toggle("tooltip-n","bc-tc"==r),o.classes.toggle("tooltip-nw","bc-tl"==r),o.classes.toggle("tooltip-ne","bc-tr"==r),o.moveRel(t.getEl(),r)}else o.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return o}),l("tinymce.core.ui.Progress",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}})}),l("tinymce.core.ui.Notification",["tinymce.core.ui.Control","tinymce.core.ui.Movable","tinymce.core.ui.Progress","tinymce.core.util.Delay"],function(e,t,n,o){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){e.target.className.indexOf(t.classPrefix+"close")!=-1&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",o="",r="",i="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(i=' style="background-color: '+e.color+'"'),e.closeButton&&(o='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(r=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+i+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+r+o+"</div>"},postRender:function(){var e=this;return o.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar&&e.progressBar.bindStates(),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}})}),l("tinymce.core.NotificationManager",["tinymce.core.ui.Notification","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n){return function(o){function r(){if(f.length)return f[f.length-1]}function i(){t.requestAnimationFrame(function(){s(),a()})}function s(){for(var e=0;e<f.length;e++)f[e].moveTo(0,0)}function a(){if(f.length>0){var e=f.slice(0,1)[0],t=o.inline?o.getElement():o.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),f.length>1)for(var n=1;n<f.length;n++)f[n].moveRel(f[n-1].getEl(),"bc-tc")}}function l(e,t){if(!d(t))return null;var o=n.grep(e,function(e){return u(t,e)});return 0===o.length?null:o[0]}function u(e,t){return e.type===t.settings.type&&e.text===t.settings.text}function d(e){return!e.progressBar&&!e.timeout}var c=this,f=[];c.notifications=f,o.on("remove",function(){for(var e=f.length;e--;)f[e].close()}),o.on("ResizeEditor",a),o.on("ResizeWindow",i),c.open=function(t){if(!o.removed){var n;o.editorManager.setActive(o);var r=l(f,t);return null===r?(n=new e(t),f.push(n),t.timeout>0&&(n.timer=setTimeout(function(){n.close()},t.timeout)),n.on("close",function(){var e=f.length;for(n.timer&&o.getWin().clearTimeout(n.timer);e--;)f[e]===n&&f.splice(e,1);a()}),n.renderTo(),a()):n=r,n}},c.close=function(){r()&&r().close()},c.getNotifications=function(){return f},o.on("SkinLoaded",function(){var e=o.settings.service_message;e&&o.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})})}}),l("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){function o(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=s.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function r(e,t){function n(e){return!e.hidden&&!e.readonly}var r,a;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(r=o(e,t),e.settings.event_root){if(i||(i={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&i){for(t in i)e.dom.unbind(o(e,t));i=null}})),i[t])return;a=function(o){for(var r=o.target,i=e.editorManager.editors,a=i.length;a--;){var l=i[a].getBody();(l===r||s.isChildOf(r,l))&&n(i[a])&&i[a].fire(t,o)}},i[t]=a,s.bind(r,t,a)}else a=function(o){n(e)&&e.fire(t,o)},s.bind(r,t,a),e.delegates[t]=a}var i,s=t.DOM,a={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){r(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?r(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(o(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(o(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return a=n.extend({},e,a)}),l("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each,o=e.explode,r={f9:120,f10:121,f11:122},i=e.makeMap("alt,ctrl,shift,meta,access");return function(s){function a(e){var s,a,l={};n(o(e,"+"),function(e){e in i?l[e]=!0:/^[0-9]{2,}$/.test(e)?l.keyCode=parseInt(e,10):(l.charCode=e.charCodeAt(0),l.keyCode=r[e]||e.toUpperCase().charCodeAt(0))}),s=[l.keyCode];for(a in i)l[a]?s.push(a):l[a]=!1;return l.id=s.join(","),l.access&&(l.alt=!0,t.mac?l.ctrl=!0:l.shift=!0),l.meta&&(t.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(t,n,r,i){var l;return l=e.map(o(t,">"),a),l[l.length-1]=e.extend(l[l.length-1],{func:r,scope:i||s}),e.extend(l[0],{desc:s.translate(n),subpatterns:l.slice(1)})}function u(e){return e.altKey||e.ctrlKey||e.metaKey}function d(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}function c(e,t){return!!t&&(t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&(t.alt==e.altKey&&t.shift==e.shiftKey&&(!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0))))}function f(e){return e.func?e.func.call(e.scope):null}var p=this,m={},h=[];s.on("keyup keypress keydown",function(e){!u(e)&&!d(e)||e.isDefaultPrevented()||(n(m,function(t){if(c(e,t))return h=t.subpatterns.slice(0),"keydown"==e.type&&f(t),!0}),c(e,h[0])&&(1===h.length&&"keydown"==e.type&&f(h[0]),h.shift()))}),p.add=function(t,r,i,a){var u;return u=i,"string"==typeof i?i=function(){s.execCommand(u,!1,null)}:e.isArray(u)&&(i=function(){s.execCommand(u[0],u[1],u[2])}),n(o(e.trim(t.toLowerCase())),function(e){var t=l(e,r,i,a);m[t.id]=t}),!0},p.remove=function(e){var t=l(e);return!!m[t.id]&&(delete m[t.id],!0)}}}),u("global!window",window),l("tinymce.core.ErrorReporter",["tinymce.core.AddOnManager"],function(e){var t=e.PluginManager,n=function(e,n){for(var o in t.urls){var r=t.urls[o]+"/plugin"+n+".js";if(r===e)return o}return null},o=function(e,t){var o=n(t,e.suffix);return o?"Failed to load plugin: "+o+" from url "+t:"Failed to load plugin url: "+t},r=function(e,t){e.notificationManager.open({type:"error",text:t})},i=function(e,t){e._skinLoaded?r(e,t):e.on("SkinLoaded",function(){r(e,t)})},s=function(e,t){i(e,"Failed to upload image: "+t)},a=function(e,t){i(e,o(e,t))},l=function(e,t){i(e,"Failed to load content css: "+t[0])},u=function(e){var t=window.console;t&&!window.test&&(t.error?t.error.apply(t,arguments):t.log.apply(t,arguments))};return{pluginLoadError:a,uploadError:s,displayError:i,contentCssError:l,initError:u}}),l("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","tinymce.core.caret.CaretContainer"],function(e,t){var n=function(e){return e.dom.select("*[data-mce-caret]")[0]},o=function(e){e.selection.setRng(e.selection.getRng())},r=function(e,n){n.hasAttribute("data-mce-caret")&&(t.showCaretContainerBlock(n),o(e),e.selection.scrollIntoView(n))},i=function(e,o){var i=n(e);if(i)return"compositionstart"===o.type?(o.preventDefault(),o.stopPropagation(),void r(i)):void(t.hasContent(i)&&r(e,i))},s=function(t){t.on("keyup compositionstart",e.curry(i,t))};return{setup:s}}),l("tinymce.core.file.Uploader",["tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.Fun"],function(e,t,n){return function(n,o){function r(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function i(e,t,n,i){var s,a;s=new XMLHttpRequest,s.open("POST",o.url),s.withCredentials=o.credentials,s.upload.onprogress=function(e){i(e.loaded/e.total*100)},s.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+s.status)},s.onload=function(){var e;return s.status<200||s.status>=300?void n("HTTP Error: "+s.status):(e=JSON.parse(s.responseText),e&&"string"==typeof e.location?void t(r(o.basePath,e.location)):void n("Invalid JSON: "+s.responseText))},a=new FormData,a.append("file",e.blob(),e.filename()),s.send(a)}function s(){return new e(function(e){e([])})}function a(e,t){return{url:t,blobInfo:e,status:!0}}function l(e,t){return{url:"",blobInfo:e,status:!1,error:t}}function u(e,n){t.each(h[e],function(e){e(n)}),delete h[e]}function d(t,o,r){return n.markPending(t.blobUri()),new e(function(e){var i,s,d=function(){};try{var c=function(){i&&(i.close(),s=d)},f=function(o){c(),n.markUploaded(t.blobUri(),o),u(t.blobUri(),a(t,o)),e(a(t,o))},p=function(o){c(),n.removeFailed(t.blobUri()),u(t.blobUri(),l(t,o)),e(l(t,o))};s=function(e){e<0||e>100||(i||(i=r()),i.progressBar.value(e))},o(t,f,p,s)}catch(n){e(l(t,n.message))}})}function c(e){return e===i}function f(t){var n=t.blobUri();return new e(function(e){h[n]=h[n]||[],h[n].push(e)})}function p(r,i){return r=t.grep(r,function(e){return!n.isUploaded(e.blobUri())}),e.all(t.map(r,function(e){return n.isPending(e.blobUri())?f(e):d(e,o.handler,i)}))}function m(e,t){return!o.url&&c(o.handler)?s():p(e,t)}var h={};return o=t.extend({credentials:!1,handler:i},o),{upload:m}}}),l("tinymce.core.file.Conversions",["tinymce.core.util.Promise"],function(e){function t(t){return new e(function(e,n){var o=function(){n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(){200==this.status?e(this.response):o()},r.onerror=o,r.send()}catch(e){o()}})}function n(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}}function o(t){return new e(function(e){var o,r,i;t=n(t);try{o=atob(t.data)}catch(t){return void e(new Blob([]))}for(r=new Uint8Array(o.length),i=0;i<r.length;i++)r[i]=o.charCodeAt(i);e(new Blob([r],{type:t.type}))})}function r(e){return 0===e.indexOf("blob:")?t(e):0===e.indexOf("data:")?o(e):null}function i(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:r,blobToDataUri:i,parseDataUri:n}}),l("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(e,t,n,o,r){var i=0,s=function(e){return(e||"blobid")+i++},a=function(e,t,n,r){var i,a;return 0===t.src.indexOf("blob:")?(a=e.getByUri(t.src),void(a?n({image:t,blobInfo:a}):o.uriToBlob(t.src).then(function(r){o.blobToDataUri(r).then(function(l){i=o.parseDataUri(l).data,a=e.create(s(),r,i),e.add(a),n({image:t,blobInfo:a})})},function(e){r(e)}))):(i=o.parseDataUri(t.src).data,a=e.findFirst(function(e){return e.base64()===i}),void(a?n({image:t,blobInfo:a}):o.uriToBlob(t.src).then(function(o){a=e.create(s(),o,i),e.add(a),n({image:t,blobInfo:a})},function(e){r(e)})))},l=function(e){return e?e.getElementsByTagName("img"):[]};return function(o,i){function s(s,d){var c,f;return d||(d=n.constant(!0)),c=t.filter(l(s),function(e){var t=e.src;return!!r.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!t||t==r.transparentSrc)&&(0===t.indexOf("blob:")?!o.isUploaded(t):0===t.indexOf("data:")&&d(e)))))}),f=t.map(c,function(t){var n;return u[t.src]?new e(function(e){u[t.src].then(function(n){return"string"==typeof n?n:void e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e,n){a(i,t,e,n)}).then(function(e){return delete u[e.image.src],e}).catch(function(e){return delete u[t.src],e}),u[t.src]=n,n)}),e.all(f)}var u={};return{findAll:s}}}),l("tinymce.core.util.Uuid",[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)},t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()},n=function(n){return n+e++ +t()};return{uuid:n}}),u("global!URL",URL),l("tinymce.core.file.BlobCache",["tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Uuid","global!URL"],function(e,t,n,o){return function(){function r(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return t[e.toLowerCase()]||"dat"}function i(e,t,n,o){return s("object"==typeof e?e:{id:e,name:o,blob:t,base64:n})}function s(e){var t,i;if(!e.blob||!e.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";return t=e.id||n.uuid("blobid"),i=e.name||t,{id:m(t),name:m(i),filename:m(i+"."+r(e.blob.type)),blob:m(e.blob),base64:m(e.base64),blobUri:m(e.blobUri||o.createObjectURL(e.blob)),uri:m(e.uri)}}function a(e){l(e.id())||p.push(e)}function l(e){return u(function(t){return t.id()===e})}function u(t){return e.filter(p,t)[0]}function d(e){return u(function(t){return t.blobUri()==e})}function c(t){p=e.filter(p,function(e){return e.blobUri()!==t||(o.revokeObjectURL(e.blobUri()),!1)})}function f(){e.each(p,function(e){o.revokeObjectURL(e.blobUri())}),p=[]}var p=[],m=t.constant;return{create:i,add:a,get:l,getByUri:d,findFirst:u,removeByUri:c,destroy:f}}}),l("tinymce.core.file.UploadStatus",[],function(){return function(){function e(e,t){return{status:e,resultUri:t}}function t(e){return e in c}function n(e){var t=c[e];return t?t.resultUri:null}function o(e){return!!t(e)&&c[e].status===u}function r(e){return!!t(e)&&c[e].status===d}function i(t){c[t]=e(u,null)}function s(t,n){c[t]=e(d,n)}function a(e){delete c[e]}function l(){c={}}var u=1,d=2,c={};return{hasBlobUri:t,getResultUri:n,isPending:o,isUploaded:r,markPending:i,markUploaded:s,removeFailed:a,destroy:l}}}),l("tinymce.core.EditorUpload",["tinymce.core.util.Arr","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.ErrorReporter"],function(e,t,n,o,r,i){return function(s){function a(e){return function(t){return s.selection?e(t):[]}}function l(){return"?"+(new Date).getTime()}function u(e,t,n){var o=0;do o=e.indexOf(t,o),o!==-1&&(e=e.substring(0,o)+n+e.substr(o+t.length),o+=n.length-t.length+1);while(o!==-1);return e}function d(e,t,n){return e=u(e,'src="'+t+'"','src="'+n+'"'),e=u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function c(t,n){e.each(s.undoManager.data,function(o){"fragmented"===o.type?o.fragments=e.map(o.fragments,function(e){return d(e,t,n)}):o.content=d(o.content,t,n)})}function f(){return s.notificationManager.open({text:s.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function p(e,t){C.removeByUri(e.src),c(e.src,t),s.$(e).attr({src:j.images_reuse_filename?t+l():t,"data-mce-src":s.convertURL(t,"src")})}function m(n){return _||(_=new t(E,{url:j.images_upload_url,basePath:j.images_upload_base_path,credentials:j.images_upload_credentials,handler:j.images_upload_handler})),v().then(a(function(t){var o;return o=e.map(t,function(e){return e.blobInfo}),_.upload(o,f).then(a(function(o){var r=e.map(o,function(e,n){var o=t[n].image;return e.status&&s.settings.images_replace_blob_uris!==!1?p(o,e.url):e.error&&i.uploadError(s,e.error),{element:o,status:e.status}});return n&&n(r),r}))}))}function h(e){if(j.automatic_uploads!==!1)return m(e)}function g(e){return!j.images_dataimg_filter||j.images_dataimg_filter(e)}function v(){return x||(x=new n(E,C)),x.findAll(s.getBody(),g).then(a(function(t){return t=e.filter(t,function(e){return"string"!=typeof e||(i.displayError(s,e),!1)}),e.each(t,function(e){c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))}function y(){C.destroy(),E.destroy(),x=_=null}function b(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var o=E.getResultUri(n);if(o)return'src="'+o+'"';var r=C.getByUri(n);return r||(r=e.reduce(s.editorManager.editors,function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':t})}var _,x,C=new o,j=s.settings,E=new r;return s.on("setContent",function(){s.settings.automatic_uploads!==!1?h():v()}),s.on("RawSaveContent",function(e){e.content=b(e.content)}),s.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=b(e.content))}),s.on("PostRender",function(){s.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(!C.getByUri(t)){var n=E.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:C,uploadImages:m,uploadImagesAuto:h,scanForImages:v,destroy:y}}}),l("tinymce.core.ForceBlocks",["ephox.katamari.api.Fun"],function(e){var t=function(e){var t,n,o,r,i,s,a,l,u,d,c,f,p=e.settings,m=e.dom,h=e.selection,g=e.schema,v=g.getBlockElements(),y=h.getStart(),b=e.getBody(),_=-16777215;if(f=p.forced_root_block,y&&1===y.nodeType&&f){for(;y&&y!==b;){if(v[y.nodeName])return;y=y.parentNode}if(t=h.getRng(),t.setStart){n=t.startContainer,o=t.startOffset,r=t.endContainer,i=t.endOffset;try{u=e.getDoc().activeElement===b}catch(e){}}else t.item&&(y=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(y)),u=t.parentElement().ownerDocument===e.getDoc(),d=t.duplicate(),d.collapse(!0),o=d.move("character",_)*-1,d.collapsed||(d=t.duplicate(),d.collapse(!1),i=d.move("character",_)*-1-o);for(y=b.firstChild,c=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!v[y.nodeName])&&g.isValidChild(c,f.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){a=y,y=y.nextSibling,m.remove(a);continue}s||(s=m.create(f,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(s,y),l=!0),a=y,y=y.nextSibling,s.appendChild(a)}else s=null,y=y.nextSibling;if(l&&u){if(t.setStart)t.setStart(n,o),t.setEnd(r,i),h.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",o),i>0&&t.moveEnd("character",i),t.select()}catch(e){}e.nodeChanged()}}},n=function(n){n.settings.forced_root_block&&n.on("NodeChange",e.curry(t,n))};return{setup:n}}),l("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(e,t,n){function o(r){function i(t){return e.map(t,function(e){return e=n.clone(e),e.node=r,e})}if(e.isArray(r))return e.reduce(r,function(e,t){return e.concat(o(t))},[]);if(t.isElement(r))return i(r.getClientRects());if(t.isText(r)){var s=r.ownerDocument.createRange();return s.setStart(r,0),s.setEnd(r,r.data.length),i(s.getClientRects())}}return{getClientRects:o}}),l("tinymce.core.caret.LineUtils",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.Dimensions","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretCandidate"],function(e,t,n,o,r,i,s){function a(e,t){return Math.abs(e.left-t)}function l(e,t){return Math.abs(e.right-t)}function u(e,n){function o(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var r,i;return r=Math.min(a(e,n),l(e,n)),i=Math.min(a(t,n),l(t,n)),o(n,t)?t:o(n,e)?e:i==r&&h(t.node)?t:i<r?t:e})}function d(e,t,n,o){for(;o=g(o,e,s.isEditableCaretCandidate,t);)if(n(o))return}function c(e,n){function i(e,r){var i;return i=t.filter(o.getClientRects(r),function(t){
return!e(t,n)}),s=s.concat(i),0===i.length}var s=[];return s.push(n),d(-1,e,v(i,r.isAbove),n.node),d(1,e,v(i,r.isBelow),n.node),s}function f(e){return t.filter(t.toArray(e.getElementsByTagName("*")),h)}function p(e,t){return{node:e.node,before:a(e,t)<l(e,t)}}function m(e,n,r){var i,s;return i=o.getClientRects(f(e)),i=t.filter(i,function(e){return r>=e.top&&r<=e.bottom}),s=u(i,n),s&&(s=u(c(e,s),n),s&&h(s.node))?p(s,n):null}var h=n.isContentEditableFalse,g=i.findNode,v=e.curry;return{findClosestClientRect:u,findLineNodeRects:c,closestCaret:m}}),l("tinymce.core.caret.LineWalker",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.Dimensions","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition","tinymce.core.geom.ClientRect"],function(e,t,n,o,r,i,s,a){function l(e,t,n,i){for(;i=r.findNode(i,e,o.isEditableCaretCandidate,t);)if(n(i))return}function u(e,o,r,i,s,a){function u(i){var a,l,u;for(u=n.getClientRects(i),e==-1&&(u=u.reverse()),a=0;a<u.length;a++)if(l=u[a],!r(l,c)){if(p.length>0&&o(l,t.last(p))&&f++,l.line=f,s(l))return!0;p.push(l)}}var d,c,f=0,p=[];return(c=t.last(a.getClientRects()))?(d=a.getNode(),u(d),l(e,i,u,d),p):p}function d(e,t){return t.line>e}function c(e,t){return t.line===e}function f(e,n,o,r){function l(n){return 1==e?t.last(n.getClientRects()):t.last(n.getClientRects())}var u,d,c,f,p,m,h=new i(n),g=[],v=0;1==e?(u=h.next,d=a.isBelow,c=a.isAbove,f=s.after(r)):(u=h.prev,d=a.isAbove,c=a.isBelow,f=s.before(r)),m=l(f);do if(f.isVisible()&&(p=l(f),!c(p,m))){if(g.length>0&&d(p,t.last(g))&&v++,p=a.clone(p),p.position=f,p.line=v,o(p))return g;g.push(p)}while(f=u(f));return g}var p=e.curry,m=p(u,-1,a.isAbove,a.isBelow),h=p(u,1,a.isBelow,a.isAbove);return{upUntil:m,downUntil:h,positionsUntil:f,isAboveLine:p(d),isLine:p(c)}}),l("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(e,t,n,o){var r=n.isContentEditableTrue,i=n.isContentEditableFalse,s=function(e,t,n,o){return t._selectionOverrides.showCaret(e,n,o)},a=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},l=function(e,t){var n;return n=e.fire("BeforeObjectSelected",{target:t}),n.isDefaultPrevented()?null:a(t)},u=function(n,a){var l,u;return a=t.normalizeRange(1,n.getBody(),a),l=e.fromRangeStart(a),i(l.getNode())?s(1,n,l.getNode(),!l.isAtEnd()):i(l.getNode(!0))?s(1,n,l.getNode(!0),!1):(u=n.dom.getParent(l.getNode(),o.or(i,r)),i(u)?s(1,n,u,!1):null)},d=function(e,t){var n;return t&&t.collapsed?(n=u(e,t),n?n:t):t};return{showCaret:s,selectNode:l,renderCaretAtRange:u,renderRangeCaret:d}}),l("tinymce.core.keyboard.CefNavigation",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.LineUtils","tinymce.core.caret.LineWalker","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.keyboard.CefUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,o,r,i,s,a,l,u,d,c){var f=s.isContentEditableFalse,p=a.getSelectedNode,m=n.isAfterContentEditableFalse,h=n.isBeforeContentEditableFalse,g=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},v=function(e,t){var o=n.isInSameBlock(e,t);return!(o||!s.isBr(e.getNode()))||o},y=function(t){return e.isCaretContainerBlock(t.startContainer)},b=function(e,o,r){return r=n.normalizeRange(e,o,r),e===-1?t.fromRangeStart(r):t.fromRangeEnd(r)},_=function(e,t,n,o,r){var i,s,a,l;return!r.collapsed&&(i=p(r),f(i))?u.showCaret(e,t,i,e===-1):(l=y(r),s=b(e,t.getBody(),r),o(s)?u.selectNode(t,s.getNode(e===-1)):(s=n(s))?o(s)?u.showCaret(e,t,s.getNode(e===-1),1===e):(a=n(s),o(a)&&v(s,a)?u.showCaret(e,t,a.getNode(e===-1),1===e):l?u.renderRangeCaret(t,s.toRange()):null):l?r:null)},x=function(e,t,n,o){var s,a,l,c,g,v,y,_,x;if(x=p(o),s=b(e,t.getBody(),o),a=n(t.getBody(),i.isAboveLine(1),s),l=d.filter(a,i.isLine(1)),g=d.last(s.getClientRects()),h(s)&&(x=s.getNode()),m(s)&&(x=s.getNode(!0)),!g)return null;if(v=g.left,c=r.findClosestClientRect(l,v),c&&f(c.node))return y=Math.abs(v-c.left),_=Math.abs(v-c.right),u.showCaret(e,t,c.node,y<_);if(x){var C=i.positionsUntil(e,t.getBody(),i.isAboveLine(1),x);if(c=r.findClosestClientRect(d.filter(C,i.isLine(1)),v))return u.renderRangeCaret(t,c.position.toRange());if(c=d.last(d.filter(C,i.isLine(0))))return u.renderRangeCaret(t,c.position.toRange())}},C=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!l.ie||l.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},j=function(e,n,r){var i,s,a,l=new o(e.getBody()),u=c.curry(g,l.next),d=c.curry(g,l.prev);if(r.collapsed&&e.settings.forced_root_block){if(i=e.dom.getParent(r.startContainer,"PRE"),!i)return;s=1===n?u(t.fromRangeStart(r)):d(t.fromRangeStart(r)),s||(a=C(e),1===n?e.$(i).after(a):e.$(i).before(a),e.selection.select(a,!0),e.selection.collapse())}},E=function(e,t){var n,r=new o(e.getBody()),i=c.curry(g,r.next),s=c.curry(g,r.prev),a=t?1:-1,l=t?i:s,u=t?h:m,d=e.selection.getRng();return(n=_(a,e,l,u,d))?n:(n=j(e,a,d),n?n:null)},w=function(e,t){var n,o=t?1:-1,r=t?i.downUntil:i.upUntil,s=e.selection.getRng();return(n=x(o,e,r,s))?n:(n=j(e,o,s),n?n:null)},S=function(e,t){return function(){var n=E(e,t);return!!n&&(e.selection.setRng(n),!0)}},k=function(e,t){return function(){var n=w(e,t);return!!n&&(e.selection.setRng(n),!0)}};return{moveH:S,moveV:k}}),l("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var o=function(e,t){return t},r=function(t,n){var o=e.isObject(t)&&e.isObject(n);return o?s(t,n):n},i=function(e){return function(){for(var o=new t(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];if(0===o.length)throw new n("Can't merge zero objects");for(var i={},s=0;s<o.length;s++){var a=o[s];for(var l in a)a.hasOwnProperty(l)&&(i[l]=e(i[l],a[l]))}return i}},s=i(r),a=i(o);return{deepMerge:s,merge:a}}),l("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(e,t,n){var o=function(o){return e.map(o,function(e){return n.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t.noop},e)})},r=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},i=function(t,n){return e.bind(o(t),function(e){return r(e,n)?[e]:[]})},s=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}};return{match:i,action:s}}),l("tinymce.core.keyboard.ArrowKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,o,r,i){var s=function(t,s,a){var l=r.match([{keyCode:i.RIGHT,action:o.moveH(t,!0)},{keyCode:i.LEFT,action:o.moveH(t,!1)},{keyCode:i.UP,action:o.moveV(t,!1)},{keyCode:i.DOWN,action:o.moveV(t,!0)},{keyCode:i.RIGHT,action:n.move(t,s,!0)},{keyCode:i.LEFT,action:n.move(t,s,!1)}],a);e.find(l,function(e){return e.action()}).each(function(e){a.preventDefault()})},a=function(e,t){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&s(e,t,n)})};return{setup:a}}),l("tinymce.core.keyboard.DeleteBackspaceKeys",["ephox.katamari.api.Arr","tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,o,r,i,s){var a=function(a,l,u){var d=i.match([{keyCode:s.BACKSPACE,action:i.action(o.backspaceDelete,a,!1)},{keyCode:s.DELETE,action:i.action(o.backspaceDelete,a,!0)},{keyCode:s.BACKSPACE,action:i.action(r.backspaceDelete,a,l,!1)},{keyCode:s.DELETE,action:i.action(r.backspaceDelete,a,l,!0)},{keyCode:s.BACKSPACE,action:i.action(n.backspaceDelete,a,!1)},{keyCode:s.DELETE,action:i.action(n.backspaceDelete,a,!0)},{keyCode:s.BACKSPACE,action:i.action(t.backspaceDelete,a,!1)},{keyCode:s.DELETE,action:i.action(t.backspaceDelete,a,!0)}],u);e.find(d,function(e){return e.action()}).each(function(e){u.preventDefault()})},l=function(t,n){var r=i.match([{keyCode:s.BACKSPACE,action:i.action(o.paddEmptyElement,t)},{keyCode:s.DELETE,action:i.action(o.paddEmptyElement,t)}],n);e.find(r,function(e){return e.action()})},u=function(e,t){e.on("keydown",function(n){n.isDefaultPrevented()===!1&&a(e,t,n)}),e.on("keyup",function(t){t.isDefaultPrevented()===!1&&l(e,t)})};return{setup:u}}),l("tinymce.core.keyboard.EnterKey",["tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){var a=r.ie&&r.ie<11,l=function(e){return e&&"A"===e.nodeName&&0===s.trim(i.trim(e.innerText||e.textContent)).length},u=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},d=function(e){e.innerHTML=a?"":'<br data-mce-bogus="1">'},c=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},f=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},p=function(e,t,n){var o;e.isBlock(n)&&(o=t.getRng(),n.appendChild(e.create("span",null," ")),t.select(n),n.lastChild.outerHTML="",t.setRng(o))},m=function(e,t,n){var o,r=n,i=[];if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;1!=r.nodeType||t[r.nodeName.toLowerCase()]||i.push(r)}for(o=i.length;o--;)r=i[o],!r.hasChildNodes()||r.firstChild==r.lastChild&&""===r.firstChild.nodeValue?e.remove(r):l(r)&&e.remove(r)}},h=function(e,n,o){return t.isText(n)===!1?o:e?1===o&&n.data.charAt(o-1)===i.ZWSP?0:o:o===n.data.length-1&&n.data.charAt(o)===i.ZWSP?n.data.length:o},g=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,h(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,h(!1,e.endContainer,e.endOffset)),t},v=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},y=function(t){function i(i){function j(e){var t,n,i,a,u=e;if(e){if(r.ie&&r.ie<9&&F&&F.firstChild&&F.firstChild==F.lastChild&&"BR"==F.firstChild.tagName&&s.remove(F.firstChild),/^(LI|DT|DD)$/.test(e.nodeName)){var d=v(e.firstChild);d&&/^(UL|OL|DL)$/.test(d.nodeName)&&e.insertBefore(s.doc.createTextNode(" "),e.firstChild)}if(i=s.createRng(),r.ie||e.normalize(),e.hasChildNodes()){for(t=new o(e,e);n=t.current();){if(3==n.nodeType){i.setStart(n,0),i.setEnd(n,0);break}if(C[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}u=n,n=t.next()}n||(i.setStart(u,0),i.setEnd(u,0))}else"BR"==e.nodeName?e.nextSibling&&s.isBlock(e.nextSibling)?((!z||z<9)&&(a=s.create("br"),e.parentNode.insertBefore(a,e)),i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)):(i.setStart(e,0),i.setEnd(e,0));l.setRng(i),s.remove(a),l.scrollIntoView(e)}}function E(e){var t=y.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&s.setAttribs(e,y.forced_root_block_attrs)}function w(e){var t,n,o,r=L,i=_.getTextInlineElements();if(e||"TABLE"==q||"HR"==q?(t=s.create(e||K),E(t)):t=F.cloneNode(!1),o=t,y.keep_styles===!1)s.setAttrib(t,"style",null),s.setAttrib(t,"class",null);else do if(i[r.nodeName]){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),s.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(o=n,t.appendChild(n))}while((r=r.parentNode)&&r!=A);return a||(o.innerHTML='<br data-mce-bogus="1">'),t}function S(e){var t,n,r,i;if(i=h(e,L,B),3==L.nodeType&&(e?i>0:i<L.nodeValue.length))return!1;if(L.parentNode==F&&$&&!e)return!0;if(e&&1==L.nodeType&&L==F.firstChild)return!0;if(c(L,"TABLE")||c(L,"HR"))return $&&!e||!$&&e;for(t=new o(L,F),3==L.nodeType&&(e&&0===i?t.prev():e||i!=L.nodeValue.length||t.next());n=t.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),x[r]&&"br"!==r))return!1}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0}function k(e,n){var o,r,i,a,l,d,c=K||"P";if(r=s.getParent(e,s.isBlock),!r||!f(s,r)){if(r=r||A,d=r==t.getBody()||u(r)?r.nodeName.toLowerCase():r.parentNode.nodeName.toLowerCase(),!r.hasChildNodes())return o=s.create(c),E(o),r.appendChild(o),D.setStart(o,0),D.setEnd(o,0),o;for(a=e;a.parentNode!=r;)a=a.parentNode;for(;a&&!s.isBlock(a);)i=a,a=a.previousSibling;if(i&&_.isValidChild(d,c.toLowerCase())){for(o=s.create(c),E(o),i.parentNode.insertBefore(o,i),a=i;a&&!s.isBlock(a);)l=a.nextSibling,o.appendChild(a),a=l;D.setStart(e,n),D.setEnd(e,n)}}return e}function T(){function e(e){for(var t=V[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===F}function n(){var e=V.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:V}if(V!=t.getBody()){var o=V.parentNode.nodeName;/^(OL|UL|LI)$/.test(o)&&(K="LI"),H=K?w(K):s.create("BR"),e(!0)&&e()?"LI"==o?s.insertAfter(H,n()):s.replace(H,V):e(!0)?"LI"==o?(s.insertAfter(H,n()),H.appendChild(s.doc.createTextNode(" ")),H.appendChild(V)):V.parentNode.insertBefore(H,V):e()?(s.insertAfter(H,n()),p(s,l,H)):(V=n(),O=D.cloneRange(),O.setStartAfter(F),O.setEndAfter(V),W=O.extractContents(),"LI"==K&&"LI"==W.firstChild.nodeName?(H=W.firstChild,s.insertAfter(W,V)):(s.insertAfter(W,V),s.insertAfter(H,V))),s.remove(F),j(H),b.add()}}function P(){t.execCommand("InsertLineBreak",!1,i)}function I(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function R(e){var t,n,o=s.getRoot();for(t=e;t!==o&&"false"!==s.getContentEditable(t);)"true"===s.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==o?n:o}function N(e){var t;a||(e.normalize(),t=e.lastChild,t&&!/^(left|right)$/gi.test(s.getStyle(t,"float",!0))||s.add(e,"br"))}function M(){H=/^(H[1-6]|PRE|FIGURE)$/.test(q)&&"HGROUP"!=G?w(K):w(),y.end_container_on_empty_block&&f(s,V)&&s.isEmpty(F)?H=s.split(V,F):s.insertAfter(H,F),j(H)}var D,O,A,L,B,F,z,U,H,W,V,q,G,K,$;if(D=l.getRng(!0),!i.isDefaultPrevented()){if(!D.collapsed)return void t.execCommand("Delete");if(new n(s).normalize(D),L=D.startContainer,B=D.startOffset,K=(y.force_p_newlines?"p":"")||y.forced_root_block,K=K?K.toUpperCase():"",z=s.doc.documentMode,U=i.shiftKey,1==L.nodeType&&L.hasChildNodes()&&($=B>L.childNodes.length-1,L=L.childNodes[Math.min(B,L.childNodes.length-1)]||L,B=$&&3==L.nodeType?L.nodeValue.length:0),A=R(L)){if(b.beforeChange(),!s.isBlock(A)&&A!=s.getRoot())return void(K&&!U||P());if((K&&!U||!K&&U)&&(L=k(L,B)),F=s.getParent(L,s.isBlock),V=F?s.getParent(F.parentNode,s.isBlock):null,q=F?F.nodeName.toUpperCase():"",G=V?V.nodeName.toUpperCase():"","LI"!=G||i.ctrlKey||(F=V,q=G),t.undoManager.typing&&(t.undoManager.typing=!1,t.undoManager.add()),/^(LI|DT|DD)$/.test(q)){if(!K&&U)return void P();if(s.isEmpty(F))return void T()}if("PRE"==q&&y.br_in_pre!==!1){if(!U)return void P()}else if(!K&&!U&&"LI"!=q||K&&U)return void P();K&&F===t.getBody()||(K=K||"P",e.isCaretContainerBlock(F)?(H=e.showCaretContainerBlock(F),s.isEmpty(F)&&d(F),j(H)):S()?M():S(!0)?(H=F.parentNode.insertBefore(w(),F),p(s,l,H),j(c(F,"HR")?H:F)):(O=g(D).cloneRange(),O.setEndAfter(F),W=O.extractContents(),I(W),H=W.firstChild,s.insertAfter(W,F),m(s,x,H),N(F),s.isEmpty(F)&&d(F),H.normalize(),s.isEmpty(H)?(s.remove(H),M()):j(H)),s.setAttrib(H,"id",""),t.fire("NewBlock",{newBlock:H}),b.typing=!1,b.add())}}}var s=t.dom,l=t.selection,y=t.settings,b=t.undoManager,_=t.schema,x=_.getNonEmptyElements(),C=_.getMoveCaretBeforeOnEnterElements();t.on("keydown",function(e){13==e.keyCode&&i(e)!==!1&&e.preventDefault()})};return{setup:y}}),l("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation"],function(e,t,n,o){var r=function(e,t){return l(e)&&n.isText(t.container())},i=function(e,t){var n=t.container(),o=t.offset();n.insertData(o," "),e.selection.setCursorLocation(n,o+1)},s=function(e,t,n){return!!r(n,t)&&(i(e,t),!0)},a=function(n){var r=t.fromRangeStart(n.selection.getRng()),i=o.readLocation(n.getBody(),r);return i.map(e.curry(s,n,r)).getOr(!1)},l=function(t){return t.fold(e.constant(!1),e.constant(!0),e.constant(!0),e.constant(!1))},u=function(e){return!!e.selection.isCollapsed()&&a(e)};return{insertAtSelection:u}}),l("tinymce.core.keyboard.SpaceKey",["ephox.katamari.api.Arr","tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,o){var r=function(r,i){var s=n.match([{keyCode:o.SPACEBAR,action:n.action(t.insertAtSelection,r)}],i);e.find(s,function(e){return e.action()}).each(function(e){i.preventDefault()})},i=function(e){e.on("keydown",function(t){t.isDefaultPrevented()===!1&&r(e,t)})};return{setup:i}}),l("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(e,t,n,o,r){var i=function(i){var s=t.setupSelectedState(i);e.setup(i,s),n.setup(i,s),o.setup(i),r.setup(i)};return{setup:i}}),l("tinymce.core.NodeChange",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n){return function(o){function r(e){var t,n;if(n=o.$(e).parentsUntil(o.getBody()).add(e),n.length===s.length){for(t=n.length;t>=0&&n[t]===s[t];t--);if(t===-1)return s=n,!0}return s=n,!1}var i,s=[];"onselectionchange"in o.getDoc()||o.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,r;n=o.selection.getRng(),r={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(r,i)||o.fire("SelectionChange"),i=r}),o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(!0);!t.range&&o.selection.isCollapsed()||!r(e)&&o.dom.isChildOf(e,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==o.selection.getNode().nodeName?n.setEditorTimeout(o,function(){o.nodeChanged()}):o.nodeChanged())}),this.nodeChanged=function(e){var t,n,r,i=o.selection;o.initialized&&i&&!o.settings.disable_nodechange&&!o.readonly&&(r=o.getBody(),t=i.getStart(!0)||r,t.ownerDocument==o.getDoc()&&o.dom.isChildOf(t,r)||(t=r),n=[],o.dom.getParent(t,function(e){return e===r||void n.push(e)}),e=e||{},e.element=t,e.parents=n,o.fire("NodeChange",e))}}}),l("tinymce.core.caret.FakeCaret",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.dom.DomQuery","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.geom.ClientRect","tinymce.core.util.Delay"],function(e,t,n,o,r,i,s,a){var l=r.isContentEditableFalse,u=function(e){return e&&/^(TD|TH)$/i.test(e.nodeName)};return function(n,r){function i(e,t){var o,r,i,a,l,u=s.collapse(e.getBoundingClientRect(),t);return"BODY"==n.tagName?(o=n.ownerDocument.documentElement,r=n.scrollLeft||o.scrollLeft,i=n.scrollTop||o.scrollTop):(l=n.getBoundingClientRect(),r=n.scrollLeft-l.left,i=n.scrollTop-l.top),u.left+=r,u.right+=r,u.top+=i,u.bottom+=i,u.width=1,a=e.offsetWidth-e.clientWidth,a>0&&(t&&(a*=-1),u.left+=a,u.right+=a),u}function d(){var t,r,i,s,a;for(t=o("*[contentEditable=false]",n),s=0;s<t.length;s++)r=t[s],i=r.previousSibling,e.endsWithCaretContainer(i)&&(a=i.data,1==a.length?i.parentNode.removeChild(i):i.deleteData(a.length-1,1)),i=r.nextSibling,e.startsWithCaretContainer(i)&&(a=i.data,1==a.length?i.parentNode.removeChild(i):i.deleteData(0,1));return null}function c(t,s){var a,d;return f(),u(s)?null:r(s)?(y=e.insertBlock("p",s,t),a=i(s,t),o(y).css("top",a.top),v=o('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(n),t&&v.addClass("mce-visual-caret-before"),p(),d=s.ownerDocument.createRange(),d.setStart(y,0),d.setEnd(y,0),d):(y=e.insertInline(s,t),d=s.ownerDocument.createRange(),l(y.nextSibling)?(d.setStart(y,0),d.setEnd(y,0)):(d.setStart(y,1),d.setEnd(y,1)),d)}function f(){d(),y&&(t.remove(y),y=null),v&&(v.remove(),v=null),clearInterval(g)}function p(){g=a.setInterval(function(){o("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden")},500)}function m(){a.clearInterval(g)}function h(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"}var g,v,y;return{show:c,hide:f,getCss:h,destroy:m}}}),l("tinymce.core.dom.MousePosition",[],function(){var e=function(e){var t,n,o,r;return r=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,o=t.defaultView,{top:r.top+o.pageYOffset-n.clientTop,left:r.left+o.pageXOffset-n.clientLeft}},t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}},n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},o=function(e){var t=e.getBody(),n=e.getDoc().documentElement,o={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?o:r},r=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var r=e(t.getContentAreaContainer()),i=o(t);return{left:n.pageX-r.left+i.left,top:n.pageY-r.top+i.top}}return{left:n.pageX,top:n.pageY}},i=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},s=function(e,o){return i(t(e),n(e),r(e,o))};return{calc:s}}),l("tinymce.core.DragDropOverrides",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Delay","tinymce.core.dom.DOMUtils","tinymce.core.dom.MousePosition"],function(e,t,n,o,r,i){var s=e.isContentEditableFalse,a=e.isContentEditableTrue,l=function(e,t){return s(t)&&t!==e},u=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!s(t)},d=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},c=function(e,t,n,o){var r=t.cloneNode(!0);e.dom.setStyles(r,{width:n,height:o}),e.dom.setAttrib(r,"data-mce-selected",null);var i=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),e.dom.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},f=function(e,t){e.parentNode!==t&&t.appendChild(e)},p=function(e,t,n,o,r,i){var s=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r&&(s=t.pageX+n-r),t.pageY+o>i&&(a=t.pageY+o-i),e.style.width=n-s+"px",e.style.height=o-a+"px"},m=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},h=function(e){return 0===e.button},g=function(e){return e.element},v=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},y=function(e,o){return function(r){if(h(r)){var i=t.find(o.dom.getParents(r.target),n.or(s,a));if(l(o.getBody(),i)){var u=o.dom.getPos(i),d=o.getBody(),f=o.getDoc().documentElement;e.element=i,e.screenX=r.screenX,e.screenY=r.screenY,e.maxX=(o.inline?d.scrollWidth:f.offsetWidth)-2,e.maxY=(o.inline?d.scrollHeight:f.offsetHeight)-2,e.relX=r.pageX-u.x,e.relY=r.pageY-u.y,e.width=i.offsetWidth,e.height=i.offsetHeight,e.ghost=c(o,i,e.width,e.height)}}}},b=function(e,t){var n=o.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(o){var r=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(g(e)&&!e.dragging&&r>10){var s=t.fire("dragstart",{target:e.element});if(s.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var a=v(e,i.calc(t,o));f(e.ghost,t.getBody()),p(e.ghost,a,e.width,e.height,e.maxX,e.maxY),n(o.clientX,o.clientY)}}},_=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},x=function(e,t){return function(n){if(e.dragging&&u(t,_(t.selection),e.element)){var o=d(e.element),r=t.fire("drop",{targetClone:o,clientX:n.clientX,clientY:n.clientY});r.isDefaultPrevented()||(o=r.targetClone,t.undoManager.transact(function(){m(e.element),t.insertContent(t.dom.getOuterHTML(o)),t._selectionOverrides.hideFakeCaret()}))}j(e)}},C=function(e,t){return function(){j(e),e.dragging&&t.fire("dragend")}},j=function(e){e.dragging=!1,e.element=null,m(e.ghost)},E=function(e){var t,n,o,i,s,a,l={};t=r.DOM,a=document,n=y(l,e),o=b(l,e),i=x(l,e),s=C(l,e),e.on("mousedown",n),e.on("mousemove",o),e.on("mouseup",i),t.bind(a,"mousemove",o),t.bind(a,"mouseup",s),e.on("remove",function(){t.unbind(a,"mousemove",o),t.unbind(a,"mouseup",s)})},w=function(e){e.on("drop",function(t){var n="undefined"!=typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(s(n)||s(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},S=function(e){E(e),w(e)};return{init:S}});l("tinymce.core.SelectionOverrides",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.dom.NodeType","tinymce.core.DragDropOverrides","tinymce.core.Env","tinymce.core.geom.ClientRect","tinymce.core.keyboard.CefUtils","tinymce.core.util.Arr","tinymce.core.util.Delay","tinymce.core.util.Fun","tinymce.core.util.VK"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p,m){function h(s){function p(e){return s.dom.hasClass(e,"mce-offscreen-selection")}function h(){var e=s.dom.get(B);return e?e.getElementsByTagName("*")[0]:e}function _(e){return s.dom.isBlock(e)}function x(e){e&&s.selection.setRng(e)}function C(){return s.selection.getRng()}function j(e,t){s.selection.scrollIntoView(e,t)}function E(e,t,n){var o;return o=s.fire("ShowCaret",{target:t,direction:e,before:n}),o.isDefaultPrevented()?null:(j(t,e===-1),L.show(n,t))}function w(e,o){return o=n.normalizeRange(e,A,o),e==-1?t.fromRangeStart(o):t.fromRangeEnd(o)}function S(t){t.hasAttribute("data-mce-caret")&&(e.showCaretContainerBlock(t),x(C()),j(t[0]))}function k(){function e(e){for(var t=s.getBody();e&&e!=t;){if(g(e)||v(e))return e;e=e.parentNode}return null}function n(e,t,n){return!n.collapsed&&c.reduce(n.getClientRects(),function(n,o){return n||u.containsXY(o,e,t)},!1)}function r(t){var n=!1;t.on("touchstart",function(){n=!1}),t.on("touchmove",function(){n=!0}),t.on("touchend",function(o){var r=e(o.target);v(r)&&(n||(o.preventDefault(),R(d.selectNode(t,r))))})}s.on("mouseup",function(){var e=C();e.collapsed&&x(d.renderCaretAtRange(s,e))}),s.on("click",function(t){var n;n=e(t.target),n&&(v(n)&&(t.preventDefault(),s.focus()),g(n)&&s.dom.isChildOf(n,s.selection.getNode())&&N())}),s.on("blur NewBlock",function(){N(),D()});var _=function(e){var n=new o(e);if(!e.firstChild)return!1;var r=t.before(e.firstChild),i=n.next(r);return i&&!b(i)&&!y(i)},j=function(e,t){var n=s.dom.getParent(e,s.dom.isBlock),o=s.dom.getParent(t,s.dom.isBlock);return n===o},w=function(e,t){var n=s.dom.getParent(e,s.dom.isBlock),o=s.dom.getParent(t,s.dom.isBlock);return n&&!j(n,o)&&_(n)};r(s),s.on("mousedown",function(t){var o;if(o=e(t.target))v(o)?(t.preventDefault(),R(d.selectNode(s,o))):(N(),g(o)&&t.shiftKey||n(t.clientX,t.clientY,s.selection.getRng())||s.selection.placeCaretAt(t.clientX,t.clientY));else{N(),D();var r=i.closestCaret(A,t.clientX,t.clientY);r&&(w(t.target,r.node)||(t.preventDefault(),s.getBody().focus(),x(E(1,r.node,r.before))))}}),s.on("keypress",function(e){if(!m.modifierPressed(e))switch(e.keyCode){default:v(s.selection.getNode())&&e.preventDefault()}}),s.on("getSelectionRange",function(e){var t=e.range;if(O){if(!O.parentNode)return void(O=null);t=t.cloneRange(),t.selectNode(O),e.range=t}}),s.on("setSelectionRange",function(e){var t;t=R(e.range,e.forward),t&&(e.range=t)}),s.on("AfterSetSelectionRange",function(e){var t=e.range;I(t)||D(),p(t.startContainer.parentNode)||N()}),s.on("focus",function(){f.setEditorTimeout(s,function(){s.selection.setRng(d.renderRangeCaret(s,s.selection.getRng()))},0)}),s.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!l.ie){var n=h();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),a.init(s)}function T(){var e=s.contentStyles,t=".mce-content-body";e.push(L.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")}function P(t){return e.isCaretContainer(t)||e.startsWithCaretContainer(t)||e.endsWithCaretContainer(t)}function I(e){return P(e.startContainer)||P(e.endContainer)}function R(e,t){var n,o,r,i,a,u,d,c,f,p,m=s.$,h=s.dom;if(!e)return null;if(e.collapsed){if(!I(e))if(t===!1){if(c=w(-1,e),v(c.getNode(!0)))return E(-1,c.getNode(!0),!1);if(v(c.getNode()))return E(-1,c.getNode(),!c.isAtEnd())}else{if(c=w(1,e),v(c.getNode()))return E(1,c.getNode(),!c.isAtEnd());if(v(c.getNode(!0)))return E(1,c.getNode(!0),!1)}return null}return i=e.startContainer,a=e.startOffset,u=e.endOffset,3==i.nodeType&&0==a&&v(i.parentNode)&&(i=i.parentNode,a=h.nodeIndex(i),i=i.parentNode),1!=i.nodeType?null:(u==a+1&&(n=i.childNodes[a]),v(n)?(f=p=n.cloneNode(!0),d=s.fire("ObjectSelected",{target:n,targetClone:f}),d.isDefaultPrevented()?null:(f=d.targetClone,o=m("#"+B),0===o.length&&(o=m('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",B),o.appendTo(s.getBody())),e=s.dom.createRng(),f===p&&l.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(f),e.setStartAfter(o[0].firstChild.firstChild),e.setEndAfter(f)):(o.empty().append(" ").append(f).append(" "),e.setStart(o[0].firstChild,1),e.setEnd(o[0].lastChild,0)),o.css({top:h.getPos(n,s.getBody()).y}),o[0].focus(),r=s.selection.getSel(),r.removeAllRanges(),r.addRange(e),s.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),O=n,D(),e)):null)}function N(){O&&(O.removeAttribute("data-mce-selected"),s.$("#"+B).remove(),O=null)}function M(){L.destroy(),O=null}function D(){L.hide()}var O,A=s.getBody(),L=new r(s.getBody(),_),B="sel-"+s.dom.uniqueId();return l.ceFalse&&(k(),T()),{showCaret:E,showBlockCaretContainer:S,hideFakeCaret:D,destroy:M}}var g=s.isContentEditableTrue,v=s.isContentEditableFalse,y=n.isAfterContentEditableFalse,b=n.isBeforeContentEditableFalse;return h});l("tinymce.core.dom.NodePath",["tinymce.core.dom.DOMUtils"],function(e){function t(t,n,o){for(var r=[];n&&n!=t;n=n.parentNode)r.push(e.nodeIndex(n,o));return r}function n(e,t){var n,o,r;for(o=e,n=t.length-1;n>=0;n--){if(r=o.childNodes,t[n]>r.length-1)return null;o=r[t[n]]}return o}return{create:t,resolve:n}}),l("tinymce.core.util.Quirks",["tinymce.core.util.VK","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodePath","tinymce.core.html.Node","tinymce.core.html.Entities","tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker"],function(e,t,n,o,r,i,s,a,l,u,d,c){return function(n){function o(e,t){try{n.getDoc().execCommand(e,!1,t)}catch(e){}}function f(){var e=n.getDoc().documentMode;return e?e:6}function p(e){return e.isDefaultPrevented()}function m(e){var t,o;e.dataTransfer&&(n.selection.isCollapsed()&&"IMG"==e.target.tagName&&Q.select(e.target),t=n.selection.getContent(),t.length>0&&(o=se+escape(n.id)+","+escape(t),e.dataTransfer.setData(ae,o)))}function h(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(ae),t&&t.indexOf(se)>=0)?(t=t.substr(se.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function g(e,t){n.queryCommandSupported("mceInsertClipboardContent")?n.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):n.execCommand("mceInsertContent",!1,e);
}function v(){function e(e){var t=X.create("body"),n=e.cloneContents();return t.appendChild(n),Q.serializer.serialize(t,{format:"html"})}function o(o){if(!o.setStart){if(o.item)return!1;var r=o.duplicate();return r.moveToElementText(n.getBody()),t.compareRanges(o,r)}var i=e(o),s=X.createRng();s.selectNode(n.getBody());var a=e(s);return i===a}n.on("keydown",function(e){var t,r,i=e.keyCode;if(!p(e)&&(i==Z||i==J)){if(t=n.selection.isCollapsed(),r=n.getBody(),t&&!X.isEmpty(r))return;if(!t&&!o(n.selection.getRng()))return;e.preventDefault(),n.setContent(""),r.firstChild&&X.isBlock(r.firstChild)?n.selection.setCursorLocation(r.firstChild,0):n.selection.setCursorLocation(r,0),n.nodeChanged()}})}function y(){n.shortcuts.add("meta+a",null,"SelectAll")}function b(){n.settings.content_editable||X.bind(n.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==n.getDoc().documentElement)if(t=Q.getRng(),n.getBody().focus(),"mousedown"==e.type){if(u.isCaretContainer(t.startContainer))return;Q.placeCaretAt(e.clientX,e.clientY)}else Q.setRng(t)})}function _(){n.on("keydown",function(e){if(!p(e)&&e.keyCode===J){if(!n.getBody().getElementsByTagName("hr").length)return;if(Q.isCollapsed()&&0===Q.getRng(!0).startOffset){var t=Q.getNode(),o=t.previousSibling;if("HR"==t.nodeName)return X.remove(t),void e.preventDefault();o&&o.nodeName&&"hr"===o.nodeName.toLowerCase()&&(X.remove(o),e.preventDefault())}}})}function x(){window.Range.prototype.getClientRects||n.on("mousedown",function(e){if(!p(e)&&"HTML"===e.target.nodeName){var t=n.getBody();t.blur(),l.setEditorTimeout(n,function(){t.focus()})}})}function C(){n.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==X.getContentEditableParent(t)&&(e.preventDefault(),n.selection.select(t),n.nodeChanged()),"A"==t.nodeName&&X.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),Q.select(t))})}function j(){function e(){var e=X.getAttribs(Q.getStart().cloneNode(!1));return function(){var t=Q.getStart();t!==n.getBody()&&(X.setAttrib(t,"style",null),Y(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!Q.isCollapsed()&&X.getParent(Q.getStart(),X.isBlock)!=X.getParent(Q.getEnd(),X.isBlock)}n.on("keypress",function(o){var r;if(!p(o)&&(8==o.keyCode||46==o.keyCode)&&t())return r=e(),n.getDoc().execCommand("delete",!1,null),r(),o.preventDefault(),!1}),X.bind(n.getDoc(),"cut",function(o){var r;!p(o)&&t()&&(r=e(),l.setEditorTimeout(n,function(){r()}))})}function E(){document.body.setAttribute("role","application")}function w(){n.on("keydown",function(e){if(!p(e)&&e.keyCode===J&&Q.isCollapsed()&&0===Q.getRng(!0).startOffset){var t=Q.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function S(){f()>7||(o("RespectVisibilityInDesign",!0),n.contentStyles.push(".mceHideBrInPre pre br {display: none}"),X.addClass(n.getBody(),"mceHideBrInPre"),te.addNodeFilter("pre",function(e){for(var t,n,o,i,s=e.length;s--;)for(t=e[s].getAll("br"),n=t.length;n--;)o=t[n],i=o.prev,i&&3===i.type&&"\n"!=i.value.charAt(i.value-1)?i.value+="\n":o.parent.insert(new r("#text",3),o,!0).value="\n"}),ne.addNodeFilter("pre",function(e){for(var t,n,o,r,i=e.length;i--;)for(t=e[i].getAll("br"),n=t.length;n--;)o=t[n],r=o.prev,r&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function k(){X.bind(n.getBody(),"mouseup",function(){var e,t=Q.getNode();"IMG"==t.nodeName&&((e=X.getStyle(t,"width"))&&(X.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),X.setStyle(t,"width","")),(e=X.getStyle(t,"height"))&&(X.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),X.setStyle(t,"height","")))})}function T(){n.on("keydown",function(t){var o,r,i,s,a;if(!p(t)&&t.keyCode==e.BACKSPACE&&(o=Q.getRng(),r=o.startContainer,i=o.startOffset,s=X.getRoot(),a=r,o.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=s;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(n.formatter.toggle("blockquote",null,a),o=X.createRng(),o.setStart(r,0),o.setEnd(r,0),Q.setRng(o))}})}function P(){function e(){G(),o("StyleWithCSS",!1),o("enableInlineTableEditing",!1),ee.object_resizing||o("enableObjectResizing",!1)}ee.readonly||n.on("BeforeExecCommand MouseDown",e)}function I(){function e(){Y(X.select("a"),function(e){var t=e.parentNode,n=X.getRoot();if(t.lastChild===e){for(;t&&!X.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}X.add(t,"br",{"data-mce-bogus":1})}})}n.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||e()})}function R(){ee.forced_root_block&&n.on("init",function(){o("DefaultParagraphSeparator",ee.forced_root_block)})}function N(){n.on("keydown",function(e){var t;p(e)||e.keyCode!=J||(t=n.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),n.undoManager.beforeChange(),X.remove(t.item(0)),n.undoManager.add()))})}function M(){var e;f()>=10&&(e="",Y("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),n.contentStyles.push(e+"{padding-right: 1px !important}"))}function D(){f()<9&&(te.addNodeFilter("noscript",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),ne.addNodeFilter("noscript",function(e){for(var t,n,o,s=e.length;s--;)t=e[s],n=e[s].firstChild,n?n.value=i.decode(n.value):(o=t.attributes.map["data-mce-innertext"],o&&(t.attr("data-mce-innertext",null),n=new r("#text",3),n.value=o,n.raw=!0,t.append(n)))}))}function O(){function e(e,t){var n=a.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function t(t){var o;t.button?(o=e(t.x,t.y),o&&(o.compareEndPoints("StartToStart",r)>0?o.setEndPoint("StartToStart",r):o.setEndPoint("EndToEnd",r),o.select())):n()}function n(){var e=s.selection.createRange();r&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&r.select(),X.unbind(s,"mouseup",n),X.unbind(s,"mousemove",t),r=o=0}var o,r,i,s=X.doc,a=s.body;s.documentElement.unselectable=!0,X.bind(s,"mousedown contextmenu",function(a){if("HTML"===a.target.nodeName){if(o&&n(),i=s.documentElement,i.scrollHeight>i.clientHeight)return;o=1,r=e(a.x,a.y),r&&(X.bind(s,"mouseup",n),X.bind(s,"mousemove",t),X.getRoot().focus(),r.select())}})}function A(){n.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||Q.normalize()},!0)}function L(){n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function B(){n.inline||n.on("keydown",function(){document.activeElement==document.body&&n.getWin().focus()})}function F(){n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(s.ie>11)return void n.getBody().focus();t=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(t),n.selection.normalize(),n.nodeChanged()}}))}function z(){s.mac&&n.on("keydown",function(t){!e.metaKeyPressed(t)||t.shiftKey||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),n.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function U(){o("AutoUrlDetect",!1)}function H(){n.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function W(){n.on("init",function(){n.dom.bind(n.getBody(),"submit",function(e){e.preventDefault()})})}function V(){te.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}function q(){n.on("dragstart",function(e){m(e)}),n.on("drop",function(e){if(!p(e)){var o=h(e);if(o&&o.id!=n.id){e.preventDefault();var r=t.getCaretRangeFromPoint(e.x,e.y,n.getDoc());Q.setRng(r),g(o.html,!0)}}})}function G(){}function K(){var e;return!oe||n.removed?0:(e=n.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount)}function $(){function t(e){var t=new c(e.getBody()),n=e.selection.getRng(),o=d.fromRangeStart(n),r=d.fromRangeEnd(n),i=t.prev(o),s=t.next(r);return!e.selection.isCollapsed()&&(!i||i.isAtStart()&&o.isEqual(i))&&(!s||s.isAtEnd()&&o.isEqual(s))}n.on("keypress",function(o){!p(o)&&!Q.isCollapsed()&&o.charCode>31&&!e.metaKeyPressed(o)&&t(n)&&(o.preventDefault(),n.setContent(String.fromCharCode(o.charCode)),n.selection.select(n.getBody(),!0),n.selection.collapse(!1),n.nodeChanged())}),n.on("keydown",function(e){var o=e.keyCode;p(e)||o!=Z&&o!=J||t(n)&&(e.preventDefault(),n.setContent(""),n.nodeChanged())})}var Y=a.each,J=e.BACKSPACE,Z=e.DELETE,X=n.dom,Q=n.selection,ee=n.settings,te=n.parser,ne=n.serializer,oe=s.gecko,re=s.ie,ie=s.webkit,se="data:text/mce-internal,",ae=re?"Text":"URL";return T(),v(),s.windowsPhone||A(),ie&&($(),b(),C(),R(),W(),w(),V(),s.iOS?(B(),F(),H()):y()),re&&s.ie<11&&(_(),E(),S(),k(),N(),M(),D(),O()),s.ie>=11&&(F(),w()),s.ie&&(y(),U(),q()),oe&&($(),_(),x(),j(),P(),I(),L(),z(),w()),{refreshContentEditable:G,isHidden:K}}}),l("tinymce.core.init.InitContentBody",["global!document","global!window","tinymce.core.caret.CaretContainerInput","tinymce.core.dom.DOMUtils","tinymce.core.dom.Selection","tinymce.core.dom.Serializer","tinymce.core.EditorUpload","tinymce.core.ErrorReporter","tinymce.core.ForceBlocks","tinymce.core.Formatter","tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.UndoManager","tinymce.core.util.Delay","tinymce.core.util.Quirks","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p,m,h,g,v,y,b){var _=o.DOM,x=function(e){var t=new d(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var o,r,i,s=t.length,a=e.dom;s--;)if(o=t[s],r=o.attr(n),i="data-mce-"+n,!o.attributes.map[i]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===n?(r=a.serializeStyle(a.parseStyle(r),o.name),r.length||(r=null),o.attr(i,r),o.attr(n,r)):"tabindex"===n?(o.attr(i,r),o.attr(n,null)):o.attr(i,e.convertURL(r,n,o.name))}}),t.addNodeFilter("script",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,o=t.length,r=e.schema.getNonEmptyElements();o--;)n=t[o],n.isEmpty(r)&&0===n.getAll("br").length&&(n.append(new c("br",1)).shortEnded=!0)}),t},C=function(e){e.settings.auto_focus&&v.setEditorTimeout(e,function(){var t;t=e.settings.auto_focus===!0?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},j=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),C(e)},E=function(d,c){var v,C,E=d.settings,w=d.getElement(),S=d.getDoc();E.inline||(d.getElement().style.visibility=d.orgVisibility),c||E.content_editable||(S.open(),S.write(d.iframeHTML),S.close()),E.content_editable&&(d.on("remove",function(){var e=this.getBody();_.removeClass(e,"mce-content-body"),_.removeClass(e,"mce-edit-focus"),_.setAttrib(e,"contentEditable",null)}),_.addClass(w,"mce-content-body"),d.contentDocument=S=E.content_document||e,d.contentWindow=E.content_window||t,d.bodyElement=w,E.content_document=E.content_window=null,E.root_name=w.nodeName.toLowerCase()),v=d.getBody(),v.disabled=!0,d.readonly=E.readonly,d.readonly||(d.inline&&"static"===_.getStyle(v,"position",!0)&&(v.style.position="relative"),v.contentEditable=d.getParam("content_editable_state",!0)),v.disabled=!1,d.editorUpload=new s(d),d.schema=new f(E),d.dom=new o(S,{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:E.force_hex_style_colors,class_filter:E.class_filter,update_styles:!0,root_element:d.inline?d.getBody():null,collect:E.content_editable,schema:d.schema,onSetAttrib:function(e){d.fire("SetAttrib",e)}}),d.parser=x(d),d.serializer=new i(E,d),d.selection=new r(d.dom,d.getWin(),d.serializer,d),d.formatter=new u(d),d.undoManager=new g(d),d._nodeChangeDispatcher=new m(d),d._selectionOverrides=new h(d),n.setup(d),p.setup(d),l.setup(d),d.fire("PreInit"),E.browser_spellcheck||E.gecko_spellcheck||(S.body.spellcheck=!1,_.setAttrib(v,"spellcheck","false")),d.quirks=new y(d),d.fire("PostRender"),E.directionality&&(v.dir=E.directionality),E.nowrap&&(v.style.whiteSpace="nowrap"),E.protect&&d.on("BeforeSetContent",function(e){b.each(E.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),d.on("SetContent",function(){d.addVisual(d.getBody())}),E.padd_empty_editor&&d.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.on("compositionstart compositionend",function(e){d.composing="compositionstart"===e.type}),d.contentStyles.length>0&&(C="",b.each(d.contentStyles,function(e){C+=e+"\r\n"}),d.dom.addStyle(C)),d.dom.styleSheetLoader.loadAll(d.contentCSS,function(e){j(d)},function(e){j(d),a.contentCssError(d,e)})};return{initContentBody:E}}),l("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(e){return e.PluginManager}),l("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(e){return e.ThemeManager}),l("tinymce.core.init.Init",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.init.InitContentBody","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,o,r,i,s,a,l){var u=n.DOM,d=function(e,t,n){var o,r,s=i.get(n);if(o=i.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=a.trim(n),s&&a.inArray(t,n)===-1){if(a.each(i.dependencies(n),function(n){d(e,t,n)}),e.plugins[n])return;r=new s(e,o,e.$),e.plugins[n]=r,r.init&&(r.init(e,o),t.push(n))}},c=function(e){var t=[];a.each(e.settings.plugins.replace(/\-/g,"").split(/[ ,]/),function(n){d(e,t,n)})},f=function(e){var t,n=e.settings;n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),t=s.get(n.theme),e.theme=new t(e,s.urls[n.theme]),e.theme.init&&e.theme.init(e,s.urls[n.theme]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme=n.theme)},p=function(e){var t,n,o,r,i,s=e.settings,a=e.getElement();return s.render_ui&&e.theme&&(e.orgDisplay=a.style.display,"function"!=typeof s.theme?(t=s.width||u.getStyle(a,"width")||"100%",n=s.height||u.getStyle(a,"height")||a.offsetHeight,o=s.min_height||100,r=/^[0-9\.]+(|px)$/i,r.test(""+t)&&(t=Math.max(parseInt(t,10),100)),r.test(""+n)&&(n=Math.max(parseInt(n,10),o)),i=e.theme.renderUI({targetNode:a,width:t,height:n,deltaWidth:s.delta_width,deltaHeight:s.delta_height}),s.content_editable||(n=(i.iframeHeight||n)+("number"==typeof n?i.deltaHeight||0:""),n<o&&(n=o))):(i=s.theme(e,a),i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),n=i.iframeHeight||a.offsetHeight),e.editorContainer=i.editorContainer,i.height=n),i},m=function(n,i){if(e.domain!==t.location.hostname&&o.ie&&o.ie<12){var s=l.uuid("mce");n[s]=function(){r.initContentBody(n)};var a='javascript:(function(){document.open();document.domain="'+e.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.'+s+"(true);})()";return u.setAttrib(i,"src",a),!0}return!1},h=function(e,t){var n,r,i=e.settings;e.iframeHTML=i.doctype+"<html><head>",i.document_base_url!=e.documentBaseUrl&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),!o.caretAfter&&i.ie7_compat&&(e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',n=i.body_id||"tinymce",n.indexOf("=")!=-1&&(n=e.getParam("body_id","","hash"),n=n[e.id]||n),r=i.body_class||"",r.indexOf("=")!=-1&&(r=e.getParam("body_class","","hash"),r=r[e.id]||""),i.content_security_policy&&(e.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+i.content_security_policy+'" />'),e.iframeHTML+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>';var s=u.create("iframe",{id:e.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:t.height,display:"block"}});s.onload=function(){s.onload=null,e.fire("load")};var a=m(e,s);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=s,u.add(t.iframeContainer,s),a},g=function(e){var t,n=e.settings,o=e.getElement();if(e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||u.getAttrib(o,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),f(e),c(e),t=p(e),n.content_css&&a.each(a.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_style&&e.contentStyles.push(n.content_style),n.content_editable)return r.initContentBody(e);var i=h(e,t);t.editorContainer&&(u.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=u.isHidden(t.editorContainer)),e.getElement().style.display="none",u.setAttrib(e.id,"aria-hidden",!0),i||r.initContentBody(e)};return{init:g}}),l("tinymce.core.init.Render",["global!window","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.init.Init","tinymce.core.NotificationManager","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.WindowManager"],function(e,t,n,o,r,i,s,a,l,u,d,c){var f=t.DOM,p=function(e,t){var n=e.settings,r=o.ScriptLoader;if(n.language&&"en"!=n.language&&!n.language_url&&(n.language_url=e.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&r.add(n.language_url),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!u.urls[n.theme]){var a=n.theme_url;a=a?e.documentBaseURI.toAbsolute(a):"themes/"+n.theme+"/theme"+t+".js",u.load(n.theme,a)}d.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),d.each(n.external_plugins,function(e,t){l.load(t,e),n.plugins+=" "+t}),d.each(n.plugins.split(/[ ,]/),function(e){if(e=d.trim(e),e&&!l.urls[e])if("-"===e.charAt(0)){e=e.substr(1,e.length);var n=l.dependencies(e);d.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=l.createUrl(n,e),l.load(e.resource,e)})}else l.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}),r.loadQueue(function(){e.removed||s.init(e)},e,function(t){i.pluginLoadError(e,t[0]),e.removed||s.init(e)})},m=function(t){function o(){f.unbind(e,"ready",o),t.render()}var i=t.settings,s=t.id;if(!n.Event.domLoaded)return void f.bind(e,"ready",o);if(t.getElement()&&r.contentEditable){i.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var l=t.getElement().form||f.getParent(s,"form");l&&(t.formElement=l,i.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(f.insertAfter(f.create("input",{type:"hidden",name:s}),s),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},f.bind(l,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!i.submit_patch||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)})),t.windowManager=new c(t),t.notificationManager=new a(t),"xml"===i.encoding&&t.on("GetContent",function(e){e.save&&(e.content=f.encode(e.content))}),i.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),i.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),p(t,t.suffix)}};return{render:m}}),l("tinymce.core.Mode",[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function t(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}function n(n,o){n._clickBlocker&&(n._clickBlocker.unbind(),n._clickBlocker=null),o?(n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable=!1):(n.readonly=!1,n.getBody().contentEditable=!0,e(n,"StyleWithCSS",!1),e(n,"enableInlineTableEditing",!1),e(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())}function o(e,t){var o=e.readonly?"readonly":"design";t!=o&&(e.initialized?n(e,"readonly"==t):e.on("init",function(){n(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}return{setMode:o}}),l("tinymce.core.ui.Sidebar",[],function(){var e=function(e,t,n){var o=e.sidebars?e.sidebars:[];o.push({name:t,settings:n}),e.sidebars=o};return{add:e}}),l("tinymce.core.Editor",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.EditorCommands","tinymce.core.EditorObservable","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.init.Render","tinymce.core.Mode","tinymce.core.Shortcuts","tinymce.core.ui.Sidebar","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.Uuid"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p){function m(n,r,s){var a,l,d,c=this;a=c.documentBaseUrl=s.documentBaseURL,l=s.baseURI,d=s.defaultSettings,r=g({id:n,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:c.convertURL,url_converter_scope:c,ie7_compat:!0},d,r),d&&d.external_plugins&&r.external_plugins&&(r.external_plugins=g({},d.external_plugins,r.external_plugins)),c.settings=r,e.language=r.language||"en",e.languageLoad=r.language_load,e.baseURL=s.baseURL,c.id=r.id=n,c.setDirty(!1),c.plugins={},c.documentBaseURI=new f(r.document_base_url||a,{base_uri:l}),c.baseURI=l,c.contentCSS=[],c.contentStyles=[],c.shortcuts=new u(c),c.loadedCSS={},c.editorCommands=new o(c),c.suffix=s.suffix,c.editorManager=s,c.inline=r.inline,c.settings.content_editable=c.inline,r.cache_suffix&&(i.cacheSuffix=r.cache_suffix.replace(/^[\?\&]+/,"")),r.override_viewport===!1&&(i.overrideViewPort=!1),s.fire("SetupEditor",c),c.execCallback("setup",c),c.$=t.overrideDefaults(function(){return{context:c.inline?c.getBody():c.getDoc(),element:c.getBody()}})}var h=n.DOM,g=c.extend,v=c.each,y=c.trim,b=c.resolve,_=i.gecko,x=i.ie;return m.prototype={render:function(){a.render(this)},focus:function(e){function t(e){return s.dom.getParent(e,function(e){return"true"===s.dom.getContentEditable(e)})}var n,o,r,s=this,a=s.selection,l=s.settings.content_editable,u=s.getDoc(),d=s.getBody();if(!s.removed){if(!e){if(n=a.getRng(),n.item&&(o=n.item(0)),s.quirks.refreshContentEditable(),r=t(a.getNode()),s.$.contains(d,r))return r.focus(),a.normalize(),void s.editorManager.setActive(s);if(l||(i.opera||s.getBody().focus(),s.getWin().focus()),_||l){if(d.setActive)try{d.setActive()}catch(e){d.focus()}else d.focus();l&&a.normalize()}o&&o.ownerDocument==u&&(n=u.body.createControlRange(),n.addElement(o),n.select())}s.editorManager.setActive(s)}},execCallback:function(e){var t,n=this,o=n.settings[e];if(o)return n.callbackLookup&&(t=n.callbackLookup[e])&&(o=t.func,t=t.scope),"string"==typeof o&&(t=o.replace(/\.\w+$/,""),t=t?b(t):0,o=b(o),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:o,scope:t}),o.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?(e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,o){return n.data[t+"."+o]||"{#"+o+"}"}),this.editorManager.translate(e)):""},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){var o,r=e in this.settings?this.settings[e]:t;return"hash"===n?(o={},"string"==typeof r?v(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),e.length>1?o[y(e[0])]=y(e[1]):o[y(e[0])]=y(e)}):o=r,o):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return d.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n,o=this;o.contextToolbars=o.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return o.dom.is(e,n)}),o.contextToolbars.push({id:p.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,o){this.shortcuts.add(e,t,n,o)},execCommand:function(e,t,n,o){return this.editorCommands.execCommand(e,t,n,o)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(h.show(e.getContainer()),h.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(x&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(h.hide(e.getContainer()),h.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,o=n.getElement();return n.removed?"":o?(e=e||{},e.load=!0,t=n.setContent(void 0!==o.value?o.value:o.innerHTML,e),e.element=o,e.no_events||n.fire("LoadContent",e),e.element=o=null,t):void 0},save:function(e){var t,n,o=this,r=o.getElement();if(r&&o.initialized&&!o.removed)return e=e||{},e.save=!0,e.element=r,t=e.content=o.getContent(e),e.no_events||o.fire("SaveContent",e),"raw"==e.format&&o.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=t:(o.inline||(r.innerHTML=t),(n=h.getParent(o.id,"form"))&&v(n.elements,function(e){if(e.name==o.id)return e.value=t,!1})),e.element=r=null,e.set_dirty!==!1&&o.setDirty(!1),t},setContent:function(e,t){var n,o,r=this,i=r.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||r.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(o=x&&x<11?"":'<br data-mce-bogus="1">',"TABLE"==i.nodeName?e="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(e="<li>"+o+"</li>"),n=r.settings.forced_root_block,n&&r.schema.isValidChild(i.nodeName.toLowerCase(),n.toLowerCase())?(e=o,e=r.dom.createHTML(n,r.settings.forced_root_block_attrs,e)):x||e||(e='<br data-mce-bogus="1">'),r.dom.setHTML(i,e),r.fire("SetContent",t)):("raw"!==t.format&&(e=new s({validate:r.validate},r.schema).serialize(r.parser.parse(e,{isRootContent:!0}))),t.content=y(e),r.dom.setHTML(i,t.content),t.no_events||r.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,o=n.getBody();return n.removed?"":(e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?c.trim(n.serializer.getTrimmedContent()):"text"==e.format?o.innerText||o.textContent:n.serializer.serialize(o,e),"text"!=e.format?e.content=y(t):e.content=t,e.no_events||n.fire("GetContent",e),e.content)},insertContent:function(e,t){t&&(e=g({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){l.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=h.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=h.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var o=this,r=o.settings;return r.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,o=n.settings,r=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=o.visual),v(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return t=o.visual_table_class||"mce-item-table",i=r.getAttrib(e,"border"),void(i&&"0"!=i||!n.hasVisual?r.removeClass(e,t):r.addClass(e,t));case"A":return void(r.getAttrib(e,"href",!1)||(i=r.getAttrib(e,"name")||e.id,t=o.visual_anchor_class||"mce-item-anchor",i&&n.hasVisual?r.addClass(e,t):r.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&h.remove(e.getElement().nextSibling),e.inline||(x&&x<10&&e.getDoc().execCommand("SelectAll",!1,null),h.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),h.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),h.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},g(m.prototype,r),m}),l("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(e){"use strict";var t={},n="en";
return{setCode:function(e){e&&(n=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return n},rtl:!1,add:function(e,n){var o=t[e];o||(t[e]=o={});for(var r in n)o[r]=n[r];this.setCode(e)},translate:function(o){function r(t){return e.is(t,"function")?Object.prototype.toString.call(t):i(t)?"":""+t}function i(t){return""===t||null===t||e.is(t,"undefined")}function s(t){return t=r(t),e.hasOwn(a,t)?r(a[t]):t}var a=t[n]||{};if(i(o))return"";if(e.is(o,"object")&&e.hasOwn(o,"raw"))return r(o.raw);if(e.is(o,"array")){var l=o.slice(1);o=s(o[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(l,n)?r(l[n]):t})}return s(o).replace(/{context:\w+}$/,"")},data:t}}),l("tinymce.core.FocusManager",["tinymce.core.dom.DOMUtils","tinymce.core.util.Delay","tinymce.core.Env"],function(e,t,n){function o(e){function o(){try{return document.activeElement}catch(e){return document.body}}function u(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function f(f){var p=f.editor;p.on("init",function(){(p.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?p.dom.bind(p.getBody(),"beforedeactivate",function(e){if(e.target==p.getBody())try{p.lastRng=p.selection.getRng()}catch(e){}}):p.on("nodechange mouseup keyup",function(e){var t=o();"nodechange"==e.type&&e.selectionChange||(t&&t.id==p.id+"_ifr"&&(t=p.getBody()),p.dom.isChildOf(t,p.getBody())&&(p.lastRng=p.selection.getRng()))}),n.webkit&&!r&&(r=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(p.lastRng=n)}},a.bind(document,"selectionchange",r)))}),p.on("setcontent",function(){p.lastRng=null}),p.on("mousedown",function(){p.selection.lastFocusBookmark=null}),p.on("focusin",function(){var t,n=e.focusedEditor;p.selection.lastFocusBookmark&&(t=c(p,p.selection.lastFocusBookmark),p.selection.lastFocusBookmark=null,p.selection.setRng(t)),n!=p&&(n&&n.fire("blur",{focusedEditor:p}),e.setActive(p),e.focusedEditor=p,p.fire("focus",{blurredEditor:n}),p.focus(!0)),p.lastRng=null}),p.on("focusout",function(){t.setEditorTimeout(p,function(){var t=e.focusedEditor;l(p,o())||t!=p||(p.fire("blur",{focusedEditor:null}),e.focusedEditor=null,p.selection&&(p.selection.lastFocusBookmark=null))})}),i||(i=function(t){var n,o=e.activeEditor;n=t.target,o&&n.ownerDocument===document&&(o.selection&&n!==o.getBody()&&d(p,n)&&(o.selection.lastFocusBookmark=u(o.dom,o.lastRng)),n===document.body||l(o,n)||e.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},a.bind(document,"focusin",i)),p.inline&&!s&&(s=function(t){var n=e.activeEditor,o=n.dom;if(n.inline&&o&&!o.isChildOf(t.target,n.getBody())){var r=n.selection.getRng();r.collapsed||(n.lastRng=r)}},a.bind(document,"mouseup",s))}function p(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(a.unbind(document,"selectionchange",r),a.unbind(document,"focusin",i),a.unbind(document,"mouseup",s),r=i=s=null)}e.on("AddEditor",f),e.on("RemoveEditor",p)}var r,i,s,a=e.DOM,l=function(e,t){var n=e?e.settings.custom_ui_selector:"",r=a.getParent(t,function(t){return o.isEditorUIElement(t)||!!n&&e.dom.is(t,n)});return null!==r},u=function(e){return e.inline===!0},d=function(e,t){return u(e)===!1||e.dom.isChildOf(t,e.getBody())===!1};return o.isEditorUIElement=function(e){return e.className.toString().indexOf("mce-")!==-1},o._isUIElement=l,o}),l("tinymce.core.LegacyInput",["tinymce.core.util.Tools"],function(e){var t=e.each,n=e.explode,o=function(e){e.on("AddEditor",function(e){var o=e.editor;o.on("preInit",function(){function e(e,n){t(n,function(t,n){t&&a.setStyle(e,n,t)}),a.rename(e,"span")}function r(e){a=o.dom,l.convert_fonts_to_spans&&t(a.select("font,u,strike",e.node),function(e){i[e.nodeName.toLowerCase()](a,e)})}var i,s,a,l=o.settings;l.inline_styles&&(s=n(l.font_size_legacy_values),i={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:s[parseInt(n.size,10)-1]})},u:function(t,n){"html4"===o.settings.schema&&e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},o.on("PreProcess SetContent",r))})})};return{register:o}}),l("tinymce.core.EditorManager",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.Editor","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.FocusManager","tinymce.core.LegacyInput","tinymce.core.util.I18n","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI"],function(e,t,n,o,r,i,s,a,l,u,d,c,f){function p(e){x(y.editors,function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})}function m(e,n){n!==E&&(n?t(window).on("resize scroll",p):t(window).off("resize scroll",p),E=n)}function h(e){var t,n=y.editors;delete n[e.id];for(var o=0;o<n.length;o++)if(n[o]==e){n.splice(o,1),t=!0;break}return y.activeEditor==e&&(y.activeEditor=n[0]),y.focusedEditor==e&&(y.focusedEditor=null),t}function g(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(h(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e}var v,y,b=n.DOM,_=c.explode,x=c.each,C=c.extend,j=0,E=!1;return y={$:t,majorVersion:"4",minorVersion:"6.3",releaseDate:"2017-05-30",editors:[],i18n:l,activeEditor:null,setup:function(){var e,t,n,o,r=this,i="";if(t=f.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,i=n.suffix;else{for(var a=document.getElementsByTagName("script"),l=0;l<a.length;l++){o=a[l].src;var u=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){u.indexOf(".min")!=-1&&(i=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}!e&&document.currentScript&&(o=document.currentScript.src,o.indexOf(".min")!=-1&&(i=".min"),e=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new f(t).toAbsolute(e),r.documentBaseURL=t,r.baseURI=new f(r.baseURL),r.suffix=i,r.focusManager=new s(r)},overrideDefaults:function(t){var n,o;n=t.base_url,n&&(this.baseURL=new f(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new f(this.baseURL)),o=t.suffix,t.suffix&&(this.suffix=o),this.defaultSettings=t;var r=t.plugin_base_urls;for(var i in r)e.PluginManager.urls[i]=r[i]},init:function(e){function n(e,t){return e.inline&&t.tagName.toLowerCase()in m}function s(e){var t=e.id;return t||(t=e.name,t=t&&!b.get(t)?e.name:b.uniqueId(),e.setAttribute("id",t)),t}function a(t){var n=e[t];if(n)return n.apply(h,Array.prototype.slice.call(arguments,2))}function l(e,t){return t.constructor===RegExp?t.test(e.className):b.hasClass(e,t)}function u(e){var t,n=[];if(r.ie&&r.ie<11)return i.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return x(e.types,function(e){n=n.concat(b.select(e.selector))}),n;if(e.selector)return b.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&x(_(t),function(e){var t;(t=b.get(e))?n.push(t):x(document.forms,function(t){x(t.elements,function(t){t.name===e&&(e="mce_editor_"+j++,b.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":x(b.select("textarea"),function(t){e.editor_deselector&&l(t,e.editor_deselector)||e.editor_selector&&!l(t,e.editor_selector)||n.push(t)})}return n}function f(){function r(e,t,n){var r=new o(e,t,h);p.push(r),r.on("init",function(){++d===l.length&&v(p)}),r.targetElm=r.targetElm||n,r.render()}var l,d=0,p=[];return b.unbind(window,"ready",f),a("onpageload"),l=t.unique(u(e)),e.types?void x(e.types,function(t){c.each(l,function(n){return!b.is(n,t.selector)||(r(s(n),C({},e,t),n),!1)})}):(c.each(l,function(e){g(h.get(e.id))}),l=c.grep(l,function(e){return!h.get(e.id)}),void(0===l.length?v([]):x(l,function(t){n(e,t)?i.initError("Could not initialize inline editor on invalid inline target element",t):r(s(t),e,t)})))}var p,m,h=this;m=c.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var v=function(e){p=e};return h.settings=e,b.bind(window,"ready",f),new d(function(e){p?e(p):v=function(t){e(t)}})},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),m(n,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),v||(v=function(){t.fire("BeforeUnload")},b.bind(window,"beforeunload",v)),e},createEditor:function(e,t){return this.add(new o(e,t,this))},remove:function(e){var t,n,o=this,r=o.editors;{if(e)return"string"==typeof e?(e=e.selector||e,void x(b.select(e),function(e){n=r[e.id],n&&o.remove(n)})):(n=e,r[n.id]?(h(n)&&o.fire("RemoveEditor",{editor:n}),r.length||b.unbind(window,"beforeunload",v),n.remove(),m(r,r.length>0),n):null);for(t=r.length-1;t>=0;t--)o.remove(r[t])}},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new o(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){x(this.editors,function(e){e.save()})},addI18n:function(e,t){l.add(e,t)},translate:function(e){return l.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},C(y,u),y.setup(),a.register(y),y}),l("tinymce.core.util.XHR",["tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t){var n={send:function(e){function o(){!e.async||4==r.readyState||i++>1e4?(e.success&&i<1e4&&200==r.status?e.success.call(e.success_scope,""+r.responseText,r,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",r,e),r=null):setTimeout(o,10)}var r,i=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",n.fire("beforeInitialize",{settings:e}),r=new XMLHttpRequest){if(r.overrideMimeType&&r.overrideMimeType(e.content_type),r.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(r.withCredentials=!0),e.content_type&&r.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&t.each(e.requestheaders,function(e){r.setRequestHeader(e.key,e.value)}),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r=n.fire("beforeSend",{xhr:r,settings:e}).xhr,r.send(e.data),!e.async)return o();setTimeout(o,10)}}};return t.extend(n,e),n}),l("tinymce.core.util.JSON",[],function(){function e(t,n){var o,r,i,s;if(n=n||'"',null===t)return"null";if(i=typeof t,"string"==i)return r="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(o=r.indexOf(t),o+1?"\\"+r.charAt(o+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==i){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(o=0,r="[";o<t.length;o++)r+=(o>0?",":"")+e(t[o],n);return r+"]"}r="{";for(s in t)t.hasOwnProperty(s)&&(r+="function"!=typeof t[s]?(r.length>1?","+n:n)+s+n+":"+e(t[s],n):"");return r+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),l("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(e,t,n){function o(e){this.settings=r({},e),this.count=0}var r=n.extend;return o.sendRPC=function(e){return(new o).send(e)},o.prototype={send:function(n){var o=n.error,i=n.success;n=r(this.settings,n),n.success=function(t,r){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?o.call(n.error_scope||n.scope,t.error,r):i.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){o&&o.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},o}),l("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var n=this,o=e.DOM,r=void 0!==t.count?t.count:n.count,i="tinymce_jsonp_"+r;n.callbacks[r]=function(e){o.remove(i),delete n.callbacks[r],t.callback(e)},o.add(o.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}}}),l("tinymce.core.util.LocalStorage",[],function(){function e(){s=[];for(var e in i)s.push(e);o.length=s.length}function t(){function t(e){var t,n;return n=void 0!==e?u+e:o.indexOf(",",u),n===-1||n>o.length?null:(t=o.substring(u,n),u=n+1,t)}var n,o,s,u=0;if(i={},l){r.load(a),o=r.getAttribute(a)||"";do{var d=t();if(null===d)break;if(n=t(parseInt(d,32)||0),null!==n){if(d=t(),null===d)break;s=t(parseInt(d,32)||0),n&&(i[n]=s)}}while(null!==n);e()}}function n(){var t,n="";if(l){for(var o in i)t=i[o],n+=(n?",":"")+o.length.toString(32)+","+o+","+t.length.toString(32)+","+t;r.setAttribute(a,n);try{r.save(a)}catch(e){}e()}}var o,r,i,s,a,l;try{if(window.localStorage)return localStorage}catch(e){}return a="tinymce",r=document.documentElement,l=!!r.addBehavior,l&&r.addBehavior("#default#userData"),o={key:function(e){return s[e]},getItem:function(e){return e in i?i[e]:null},setItem:function(e,t){i[e]=""+t,n()},removeItem:function(e){delete i[e],n()},clear:function(){i={},n()}},t(),o}),l("tinymce.core.api.Compat",["tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.util.Tools","tinymce.core.Env"],function(e,t,n,o,r,i){var s=function(s){s.DOM=e.DOM,s.ScriptLoader=n.ScriptLoader,s.PluginManager=o.PluginManager,s.ThemeManager=o.ThemeManager,s.dom=s.dom||{},s.dom.Event=t.Event,r.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(e){s[e]=r[e]}),r.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){s[e]=i[e.substr(2).toLowerCase()]})};return{register:s}}),l("tinymce.core.util.Color",[],function(){function e(e){function r(e,r,i){var s,a,l,u,d,c;return s=0,a=0,l=0,e/=255,r/=255,i/=255,d=t(e,t(r,i)),c=n(e,n(r,i)),d==c?(l=d,{h:0,s:0,v:100*l}):(u=e==d?r-i:i==d?e-r:i-e,s=e==d?3:i==d?1:5,s=60*(s-u/(c-d)),a=(c-d)/c,l=c,{h:o(s),s:o(100*a),v:o(100*l)})}function i(e,r,i){var s,a,l,u;if(e=(parseInt(e,10)||0)%360,r=parseInt(r,10)/100,i=parseInt(i,10)/100,r=n(0,t(r,1)),i=n(0,t(i,1)),0===r)return void(c=f=p=o(255*i));switch(s=e/60,a=i*r,l=a*(1-Math.abs(s%2-1)),u=i-a,Math.floor(s)){case 0:c=a,f=l,p=0;break;case 1:c=l,f=a,p=0;break;case 2:c=0,f=a,p=l;break;case 3:c=0,f=l,p=a;break;case 4:c=l,f=0,p=a;break;case 5:c=a,f=0,p=l;break;default:c=f=p=0}c=o(255*(c+u)),f=o(255*(f+u)),p=o(255*(p+u))}function s(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(c)+e(f)+e(p)}function a(){return{r:c,g:f,b:p}}function l(){return r(c,f,p)}function u(e){var t;return"object"==typeof e?"r"in e?(c=e.r,f=e.g,p=e.b):"v"in e&&i(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(c=parseInt(t[1],10),f=parseInt(t[2],10),p=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(c=parseInt(t[1],16),f=parseInt(t[2],16),p=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(c=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),p=parseInt(t[3]+t[3],16)),c=c<0?0:c>255?255:c,f=f<0?0:f>255?255:f,p=p<0?0:p>255?255:p,d}var d=this,c=0,f=0,p=0;e&&u(e),d.toRgb=a,d.toHsv=l,d.toHex=s,d.parse=u}var t=Math.min,n=Math.max,o=Math.round;return e}),l("tinymce.core.ui.Layout",["tinymce.core.util.Class","tinymce.core.util.Tools"],function(e,t){"use strict";return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,o,r,i=this,s=i.settings;t=s.firstControlClass,n=s.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(s.controlClass),e.visible()&&(o||(o=e),r=e)}),o&&o.classes.add(t),r&&r.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),l("tinymce.core.ui.AbsoluteLayout",["tinymce.core.ui.Layout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),l("tinymce.core.ui.Button",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t=this,n=t._id,o=t.classPrefix,r=t.state.get("icon"),i=t.state.get("text"),s="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(t.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+t.encode(i)+"</span>"),r=r?o+"ico "+o+"i-"+r:"",'<div id="'+n+'" class="'+t.classes+'" tabindex="-1"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+s+"</button></div>"},bindStates:function(){function e(e){var r=n("span."+o,t.getEl());e?(r[0]||(n("button:first",t.getEl()).append('<span class="'+o+'"></span>'),r=n("span."+o,t.getEl())),r.html(t.encode(e))):r.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,o=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var o=n.value,r=t.classPrefix;t.settings.icon=o,o=o?r+"ico "+r+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,s=i.getElementsByTagName("i")[0];o?(s&&s==i.firstChild||(s=document.createElement("i"),i.insertBefore(s,i.firstChild)),s.className=o):s&&i.removeChild(s),e(t.state.get("text"))}),t._super()}})}),l("tinymce.core.ui.ButtonGroup",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),l("tinymce.core.ui.Checkbox",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,o=t.classPrefix;if("undefined"==typeof n)return t.settings.icon;t.settings.icon=n,n=n?o+"ico "+o+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0];n?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=n):i&&r.removeChild(i)}),t.state.get("checked")&&e(!0),t._super()}})}),l("tinymce.core.ui.ComboBox",["tinymce.core.ui.Widget","tinymce.core.ui.Factory","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.util.VK","tinymce.core.util.Tools"],function(e,t,n,o,r,i){"use strict";return e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,i=t.getEl();if(o.contains(i,r)||r==i)for(;r&&r!=i;)r.id&&r.id.indexOf("-open")!=-1&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13==e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"==e.target.nodeName){var n=t.state.get("value"),o=e.target.value;o!==n&&(t.state.set("value",o),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&e.target.className.indexOf(t.classPrefix+"status")!==-1){var o=t.statusMessage()||"Ok",r=n.text(o).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==r),n.classes.toggle("tooltip-nw","bc-tl"==r),n.classes.toggle("tooltip-ne","bc-tr"==r),n.moveRel(e.target,r)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,n=this,o=n.settings;n.menu||(e=o.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,r=this,i=r.getEl(),s=r.getEl("open"),a=r.layoutRect(),l=0,u=i.firstChild;r.statusLevel()&&"none"!==r.statusLevel()&&(l=parseInt(n.getRuntimeStyle(u,"padding-right"),10)-parseInt(n.getRuntimeStyle(u,"padding-left"),10)),e=s?a.w-n.getSize(s).width-10:a.w-10;var d=document;return d.all&&(!d.documentMode||d.documentMode<=8)&&(t=r.layoutRect().h-2+"px"),o(u).css({width:e-l,lineHeight:t}),r._super(),r},postRender:function(){var e=this;return o(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,o=n._id,r=n.settings,i=n.classPrefix,s=n.state.get("value")||"",a="",l="",u="";return"spellcheck"in r&&(l+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(l+=' maxlength="'+r.maxLength+'"'),r.size&&(l+=' size="'+r.size+'"'),r.subtype&&(l+=' type="'+r.subtype+'"'),u='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(l+=' disabled="disabled"'),e=r.icon,e&&"caret"!=e&&(e=i+"ico "+i+"i-"+r.icon),t=n.state.get("text"),(e||t)&&(a='<div id="'+o+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+i+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+o+'" class="'+n.classes+'"><input id="'+o+'-inp" class="'+i+'textbox" value="'+n.encode(s,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(r.placeholder)+'" />'+u+a+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,n){var o=this;if(0===e.length)return void o.hideMenu();var r=function(e,t){return function(){o.fire("selectitem",{title:t,value:e})}};o.menu?o.menu.items().remove():o.menu=t.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(o).renderTo(),i.each(e,function(e){o.menu.add({text:e.title,url:e.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),o.menu.renderNew(),o.hideMenu(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()});var s=o.layoutRect().w;o.menu.layoutRect({w:s,minW:0,maxW:s}),o.menu.reflow(),o.menu.show(),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var o=e.getEl("status"),r=e.classPrefix,i=t.value;n.css(o,"display","none"===i?"none":""),n.toggleClass(o,r+"i-checkmark","ok"===i),n.toggleClass(o,r+"i-warning","warn"===i),n.toggleClass(o,r+"i-error","error"===i),e.classes.toggle("has-status","none"!==i),e.repaint()}),n.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var o=n.keyCode;"INPUT"===n.target.nodeName&&(o===r.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):o===r.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){o(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})}),l("tinymce.core.ui.ColorBox",["tinymce.core.ui.ComboBox"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}})}),l("tinymce.core.ui.PanelButton",["tinymce.core.ui.Button","tinymce.core.ui.FloatPanel"],function(e,t){"use strict";return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var o=n.panel;o.type&&(o={layout:"grid",items:o}),o.role=o.role||"dialog",o.popover=!0,o.autohide=!0,o.ariaRoot=!0,e.panel=new t(o).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),l("tinymce.core.ui.ColorButton",["tinymce.core.ui.PanelButton","tinymce.core.dom.DOMUtils"],function(e,t){"use strict";var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,o=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",s="";return o&&(e.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+e.encode(o)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(o){o.aria&&"down"==o.aria.key||o.control!=e||n.getParent(o.target,"."+e.classPrefix+"open")||(o.stopImmediatePropagation(),t.call(e,o))}),delete e.settings.onclick,e._super()}})}),l("tinymce.core.ui.ColorPicker",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper","tinymce.core.ui.DomUtils","tinymce.core.util.Color"],function(e,t,n,o){"use strict";return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var o,r,i=n.getPos(e);return o=t.pageX-i.x,r=t.pageY-i.y,o=Math.max(0,Math.min(o/e.clientWidth,1)),r=Math.max(0,Math.min(r/e.clientHeight,1)),{x:o,y:r}}function r(e,t){var r=(360-e.h)/360;n.css(u,{top:100*r+"%"}),t||n.css(c,{left:e.s+"%",top:100-e.v+"%"}),d.style.background=new o({s:100,v:100,h:e.h}).toHex(),f.color().parse({s:e.s,v:e.v,h:e.h})}function i(t){var n;n=e(d,t),a.s=100*n.x,a.v=100*(1-n.y),r(a),f.fire("change")}function s(t){var n;n=e(l,t),a=p.toHsv(),a.h=360*(1-n.y),r(a,!0),f.fire("change")}var a,l,u,d,c,f=this,p=f.color();l=f.getEl("h"),u=f.getEl("hp"),d=f.getEl("sv"),c=f.getEl("svp"),f._repaint=function(){a=p.toHsv(),r(a)},f._super(),f._svdraghelper=new t(f._id+"-sv",{start:i,drag:i}),f._hdraghelper=new t(f._id+"-h",{start:s,drag:s}),f._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new o),this._color},renderHtml:function(){function e(){var e,t,n,o,s="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",o=i.split(","),e=0,t=o.length-1;e<t;e++)s+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+o[e]+",endColorstr="+o[e+1]+");-ms-"+n+o[e]+",endColorstr="+o[e+1]+')"></div>';return s}var t,n=this,o=n._id,r=n.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",s="background: -ms-linear-gradient(top,"+i+");background: linear-gradient(to bottom,"+i+");";return t='<div id="'+o+'-h" class="'+r+'colorpicker-h" style="'+s+'">'+e()+'<div id="'+o+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+o+'" class="'+n.classes+'"><div id="'+o+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+o+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>";
}})}),l("tinymce.core.ui.Path",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n,o=e.target;(n=o.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,o=this,r=e||[],i="",s=o.classPrefix;for(t=0,n=r.length;t<n;t++)i+=(t>0?'<div class="'+s+'divider" aria-hidden="true"> '+o.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(t==n-1?" "+s+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+o._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return i||(i='<div class="'+s+'path-item"> </div>'),i}})}),l("tinymce.core.ui.ElementPath",["tinymce.core.ui.Path"],function(e){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return n.settings.elementpath!==!1&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(o){for(var r=[],i=o.parents,s=i.length;s--;)if(1==i[s].nodeType&&!e(i[s])){var a=n.fire("ResolveName",{name:i[s].nodeName.toLowerCase(),target:i[s]});if(a.isDefaultPrevented()||r.push({name:a.name,element:i[s]}),a.isPropagationStopped())break}t.row(r)})),t._super()}})}),l("tinymce.core.ui.FormItem",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),l("tinymce.core.ui.Form",["tinymce.core.ui.Container","tinymce.core.ui.FormItem","tinymce.core.util.Tools"],function(e,t,n){"use strict";return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,o=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),o.each(function(o){var r,i=o.settings.label;i&&(r=new t(n.extend({items:{type:"label",id:o._id+"-l",text:i,flex:0,forId:o._id,disabled:o.disabled()}},e.settings.formItemDefaults)),r.type="formitem",o.aria("labelledby",o._id+"-l"),"undefined"==typeof o.settings.flex&&(o.settings.flex=1),e.replace(o,r),r.add(o))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,o,r=0,i=[];if(t.settings.labelGapCalc!==!1)for(o="children"==t.settings.labelGapCalc?t.find("formitem"):t.items(),o.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+n}var t=this;t._super(),t.on("show",e),e()}})}),l("tinymce.core.ui.FieldSet",["tinymce.core.ui.Form"],function(e){"use strict";return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),l("tinymce.core.content.LinkTargets",["tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,o,r,i){var s=r.trim,a=function(e,t,n,o,r){return{type:e,title:t,url:n,level:o,attach:r}},l=function(e){for(;e=e.parentNode;){var n=e.contentEditable;if(n&&"inherit"!==n)return t.isContentEditableTrue(e)}return!1},u=function(t,n){return e.DOM.select(t,n)},d=function(e){return e.innerText||e.textContent},c=function(e){return e.id?e.id:i.uuid("h")},f=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},p=function(e){return f(e)&&h(e)},m=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},h=function(e){return l(e)&&!t.isContentEditableFalse(e)},g=function(e){return m(e)&&h(e)},v=function(e){return m(e)?parseInt(e.nodeName.substr(1),10):0},y=function(e){var t=c(e),n=function(){e.id=t};return a("header",d(e),"#"+t,v(e),n)},b=function(e){var t=e.id||e.name,n=d(e);return a("anchor",n?n:"#"+t,"#"+t,0,o.noop)},_=function(e){return n.map(n.filter(e,g),y)},x=function(e){return n.map(n.filter(e,p),b)},C=function(e){var t=u("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},j=function(e){return s(e.title).length>0},E=function(e){var t=C(e);return n.filter(_(t).concat(x(t)),j)};return{find:E}}),l("tinymce.core.ui.FilePicker",["global!window","tinymce.core.content.LinkTargets","tinymce.core.EditorManager","tinymce.core.ui.ComboBox","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Tools"],function(e,t,n,o,r,i,s){"use strict";var a=function(){return e.tinymce?e.tinymce.activeEditor:n.activeEditor},l={},u=5,d=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},c=function(e){return s.map(e,d)},f=function(e,t){return{title:e,value:{title:e,url:t,attach:i.noop}}},p=function(e,t){var n=r.find(t,function(t){return t.url===e});return!n},m=function(e,t,n){var o=t in e?e[t]:n;return o===!1?null:o},h=function(e,t,n,o){var a={title:"-"},u=function(e){var o=r.filter(e[n],function(e){return p(e,t)});return s.map(o,function(e){return{title:e,value:{title:e,url:e,attach:i.noop}}})},d=function(e){var n=r.filter(t,function(t){return t.type==e});return c(n)},h=function(){var e=d("anchor"),t=m(o,"anchor_top","#top"),n=m(o,"anchor_bottom","#bottom");return null!==t&&e.unshift(f("<top>",t)),null!==n&&e.push(f("<bottom>",n)),e},g=function(e){return r.reduce(e,function(e,t){var n=0===e.length||0===t.length;return n?e.concat(t):e.concat(a,t)},[])};return o.typeahead_urls===!1?[]:"file"===n?g([v(e,u(l)),v(e,d("header")),v(e,h())]):v(e,u(l))},g=function(e,t){var n=l[t];/^https?/.test(e)&&(n?r.indexOf(n,e)===-1&&(l[t]=n.slice(0,u).concat(e)):l[t]=[e])},v=function(e,t){var n=e.toLowerCase(),o=s.grep(t,function(e){return e.title.toLowerCase().indexOf(n)!==-1});return 1===o.length&&o[0].title===e?[]:o},y=function(e){var t=e.title;return t.raw?t.raw:t},b=function(e,n,o,r){var i=function(i){var s=t.find(o),a=h(i,s,r,n);e.showAutoComplete(a,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var o=y(n);"image"===r?e.fire("change",{meta:{alt:o,attach:n.attach}}):e.fire("change",{meta:{text:o,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||g(e.value(),r)})})},_=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},x=function(e,t,n){var o=t.filepicker_validator_handler;if(o){var r=function(t){return 0===t.length?void e.statusLevel("none"):void o({url:t,type:n},function(t){var n=_(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){r(e.value)})}};return o.extend({init:function(t){var n,o,r,i=this,l=a(),u=l.settings,d=t.filetype;t.spellcheck=!1,r=u.file_picker_types||u.file_browser_callback_types,r&&(r=s.makeMap(r,/[, ]/)),r&&!r[d]||(o=u.file_picker_callback,!o||r&&!r[d]?(o=u.file_browser_callback,!o||r&&!r[d]||(n=function(){o(i.getEl("inp").id,i.value(),d,e)})):n=function(){var e=i.fire("beforecall").meta;e=s.extend({filetype:d},e),o.call(l,function(e,t){i.value(e).fire("change",{meta:t})},i.value(),e)}),n&&(t.icon="browse",t.onaction=n),i._super(t),b(i,u,l.getBody(),d),x(i,u,d)}})}),l("tinymce.core.ui.FitLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),l("tinymce.core.ui.FlexLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,o,r,i,s,a,l,u,d,c,f,p,m,h,g,v,y,b,_,x,C,j,E,w,S,k,T,P,I,R,N,M,D,O,A,L,B,F=[],z=Math.max,U=Math.min;for(o=e.items().filter(":visible"),r=e.layoutRect(),i=e.paddingBox,s=e.settings,f=e.isRtl()?s.direction||"row-reversed":s.direction,a=s.align,l=e.isRtl()?s.pack||"end":s.pack,u=s.spacing||0,"row-reversed"!=f&&"column-reverse"!=f||(o=o.set(o.toArray().reverse()),f=f.split("-")[0]),"column"==f?(w="y",j="h",E="minH",S="maxH",T="innerH",k="top",P="deltaH",I="contentH",O="left",M="w",R="x",N="innerW",D="minW",A="right",L="deltaW",B="contentW"):(w="x",j="w",E="minW",S="maxW",T="innerW",k="left",P="deltaW",I="contentW",O="top",M="h",R="y",N="innerH",D="minH",A="bottom",L="deltaH",B="contentH"),c=r[T]-i[k]-i[k],C=d=0,t=0,n=o.length;t<n;t++)p=o[t],m=p.layoutRect(),h=p.settings,g=h.flex,c-=t<n-1?u:0,g>0&&(d+=g,m[S]&&F.push(p),m.flex=g),c-=m[E],v=i[O]+m[D]+i[A],v>C&&(C=v);if(_={},c<0?_[E]=r[E]-c+r[P]:_[E]=r[T]-c+r[P],_[D]=C+r[L],_[I]=r[T]-c,_[B]=C,_.minW=U(_.minW,r.maxW),_.minH=U(_.minH,r.maxH),_.minW=z(_.minW,r.startMinWidth),_.minH=z(_.minH,r.startMinHeight),!r.autoResize||_.minW==r.minW&&_.minH==r.minH){for(b=c/d,t=0,n=F.length;t<n;t++)p=F[t],m=p.layoutRect(),y=m[S],v=m[E]+m.flex*b,v>y?(c-=m[S]-m[E],d-=m.flex,m.flex=0,m.maxFlexSize=y):m.maxFlexSize=0;for(b=c/d,x=i[k],_={},0===d&&("end"==l?x=c+i[k]:"center"==l?(x=Math.round(r[T]/2-(r[T]-c)/2)+i[k],x<0&&(x=i[k])):"justify"==l&&(x=i[k],u=Math.floor(c/(o.length-1)))),_[R]=i[O],t=0,n=o.length;t<n;t++)p=o[t],m=p.layoutRect(),v=m.maxFlexSize||m[E],"center"===a?_[R]=Math.round(r[N]/2-m[M]/2):"stretch"===a?(_[M]=z(m[D]||0,r[N]-i[O]-i[A]),_[R]=i[O]):"end"===a&&(_[R]=r[N]-m[M]-i.top),m.flex>0&&(v+=m.flex*b),_[j]=v,_[w]=x,p.layoutRect(_),p.recalc&&p.recalc(),x+=v+u}else if(_.w=_.minW,_.h=_.minH,e.layoutRect(_),this.recalc(e),null===e._lastRect){var H=e.parent();H&&(H._lastRect=null,H.recalc())}}})}),l("tinymce.core.ui.FlowLayout",["tinymce.core.ui.Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),l("tinymce.core.fmt.FontInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.dom.DOMUtils"],function(e,t,n,o,r){var i=function(e,n,o){for(;o!==n;){if(o.style[e]){var r=o.style[e];return""!==r?t.some(r):t.none()}o=o.parentNode}return t.none()},s=function(e){return/[0-9.]+px$/.test(e)?Math.round(72*parseInt(e,10)/96)+"pt":e},a=function(e){return e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")},l=function(e,n){return t.from(r.DOM.getStyle(n,e,!0))},u=function(e){return function(r,s){return t.from(s).map(n.fromDom).filter(o.isElement).bind(function(t){return i(e,r,t.dom()).or(l(e,t.dom()))}).getOr("")}};return{getFontSize:u("fontSize"),getFontFamily:e.compose(a,u("fontFamily")),toPt:s}}),l("tinymce.core.ui.FormatControls",["tinymce.core.ui.Control","tinymce.core.ui.Widget","tinymce.core.ui.FloatPanel","tinymce.core.util.Tools","tinymce.core.util.Arr","tinymce.core.dom.DOMUtils","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.fmt.FontInfo"],function(e,t,n,o,r,i,s,a,l){function u(e){e.settings.ui_container&&(a.container=i.DOM.select(e.settings.ui_container)[0])}function d(t){t.on("ScriptsLoaded",function(){t.rtl&&(e.rtl=!0)})}function c(e){function t(t,n){return function(){var o=this;e.on("nodeChange",function(r){var i=e.formatter,s=null;f(r.parents,function(e){if(f(t,function(t){if(n?i.matchNode(e,n,{value:t.value})&&(s=t.value):i.matchNode(e,t.value)&&(s=t.value),s)return!1}),s)return!1}),o.value(s)})}}function r(t){return function(){var n=this,o=function(e){return e?e.split(",")[0]:""};e.on("nodeChange",function(r){var i,s=null;i=l.getFontFamily(e.getBody(),r.element),f(t,function(e){e.value.toLowerCase()===i.toLowerCase()&&(s=e.value)}),f(t,function(e){s||o(e.value).toLowerCase()!==o(i).toLowerCase()||(s=e.value)}),n.value(s),!s&&i&&n.text(o(i))})}}function i(t){return function(){var n=this;e.on("nodeChange",function(o){var r,i,s=null;r=l.getFontSize(e.getBody(),o.element),i=l.toPt(r),f(t,function(e){e.value===r?s=r:e.value===i&&(s=i)}),n.value(s),s||n.text(i)})}}function s(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function a(){function t(e){var n=[];if(e)return f(e,function(e){var i={text:e.title,icon:e.icon};if(e.items)i.menu=t(e.items);else{var s=e.format||"custom"+o++;e.format||(e.name=s,r.push(e)),i.format=s,i.cmd=e.cmd}n.push(i)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?i.concat(e.settings.style_formats):i:e.settings.style_formats||i)}var o=0,r=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){f(r,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,o;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),o=t.settings.cmd,o&&t.active(e.queryCommandState(o))})},onclick:function(){this.settings.format&&m(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function u(t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}function d(t){return function(){function n(){var n="redo"==t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()}var o=this;o.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){o.disabled(e.readonly||!n())})}}function c(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function m(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}function h(t){var n=t.length;return o.each(t,function(t){t.menu&&(t.hidden=0===h(t.menu));var o=t.format;o&&(t.hidden=!e.formatter.canApply(o)),t.hidden&&n--}),n}function g(t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(g(t.menu)>0),!t.menu&&t.settings.menu&&t.visible(h(t.settings.menu)>0);var o=t.settings.format;o&&t.visible(e.formatter.canApply(o)),t.visible()||n--}),n}var v;v=a(),f({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:u(n),onclick:function(){m(n)}})}),f({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),f({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:u(n)})});var y=function(e){var t=e;return t.length>0&&"-"===t[0].text&&(t=t.slice(1)),t.length>0&&"-"===t[t.length-1].text&&(t=t.slice(0,t.length-1)),t},b=function(t){var n,r;if("string"==typeof t)r=t.split(" ");else if(o.isArray(t))return p(o.map(t,b));return n=o.grep(r,function(t){return"|"===t||t in e.menuItems}),o.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},_=function(t){var n=[{text:"-"}],r=o.grep(e.menuItems,function(e){return e.context===t});return o.each(r,function(e){"before"==e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"==e.separator&&n.push({text:"|"})}),n},x=function(e){return y(e.insert_button_items?b(e.insert_button_items):_("insert"))};e.addButton("undo",{tooltip:"Undo",onPostRender:d("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:d("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:d("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:d("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:c,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(x(e.settings)),this.menu.renderNew()}}),f({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:v,onShowMenu:function(){e.settings.style_formats_autohide&&g(this.menu)}}),e.addButton("formatselect",function(){var n=[],o=s(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return f(o,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:o[0][0],values:n,fixedWidth:!0,onselect:m,onPostRender:t(n)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],o=s(e.settings.font_formats||t);return f(o,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf("dings")==-1?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:r(n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||n;return f(o.split(" "),function(e){var n=e,o=e,r=e.split("=");r.length>1&&(n=r[0],o=r[1]),t.push({text:n,value:o})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:i(t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:v})}var f=o.each,p=function(e){return r.reduce(e,function(e,t){return e.concat(t)},[])};return s.on("AddEditor",function(e){var t=e.editor;d(t),c(t),u(t)}),e.translate=function(e){return s.translate(e)},t.tooltips=!a.iOS,{}}),l("tinymce.core.ui.GridLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,o,r,i,s,a,l,u,d,c,f,p,m,h,g,v,y,b,_,x,C,j,E,w,S,k,T,P,I=[],R=[];t=e.settings,r=e.items().filter(":visible"),i=e.layoutRect(),o=t.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/o),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,_=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,T="reverseRows"in t?t.reverseRows:e.isRtl(),_&&"string"==typeof _&&(_=[_]),x&&"string"==typeof x&&(x=[x]);for(c=0;c<o;c++)I.push(0);for(f=0;f<n;f++)R.push(0);for(f=0;f<n;f++)for(c=0;c<o&&(d=r[f*o+c],d);c++)u=d.layoutRect(),E=u.minW,w=u.minH,I[c]=E>I[c]?E:I[c],R[f]=w>R[f]?w:R[f];for(S=i.innerW-g.left-g.right,C=0,c=0;c<o;c++)C+=I[c]+(c>0?y:0),S-=(c>0?y:0)+I[c];for(k=i.innerH-g.top-g.bottom,j=0,f=0;f<n;f++)j+=R[f]+(f>0?b:0),k-=(f>0?b:0)+R[f];if(C+=g.left+g.right,j+=g.top+g.bottom,l={},l.minW=C+(i.w-i.innerW),l.minH=j+(i.h-i.innerH),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH,l.minW=Math.min(l.minW,i.maxW),l.minH=Math.min(l.minH,i.maxH),l.minW=Math.max(l.minW,i.startMinWidth),l.minH=Math.max(l.minH,i.startMinHeight),!i.autoResize||l.minW==i.minW&&l.minH==i.minH){i.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH);var N;N="start"==t.packV?0:k>0?Math.floor(k/n):0;var M=0,D=t.flexWidths;if(D)for(c=0;c<D.length;c++)M+=D[c];else M=o;var O=S/M;for(c=0;c<o;c++)I[c]+=D?D[c]*O:O;for(m=g.top,f=0;f<n;f++){for(p=g.left,a=R[f]+N,c=0;c<o&&(P=T?f*o+o-1-c:f*o+c,d=r[P],d);c++)h=d.settings,u=d.layoutRect(),s=Math.max(I[c],u.startMinWidth),u.x=p,u.y=m,v=h.alignH||(_?_[c]||_[0]:null),"center"==v?u.x=p+s/2-u.w/2:"right"==v?u.x=p+s-u.w:"stretch"==v&&(u.w=s),v=h.alignV||(x?x[c]||x[0]:null),"center"==v?u.y=m+a/2-u.h/2:"bottom"==v?u.y=m+a-u.h:"stretch"==v&&(u.h=a),d.layoutRect(u),p+=s+y,d.recalc&&d.recalc();m+=a+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var A=e.parent();A&&(A._lastRect=null,A.recalc())}}})}),l("tinymce.core.ui.Iframe",["tinymce.core.ui.Widget","tinymce.core.util.Delay"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var o=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,n&&n()):t.setTimeout(function(){o.html(e)}),this}})}),l("tinymce.core.ui.InfoBox",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),l("tinymce.core.ui.Label",["tinymce.core.ui.Widget","tinymce.core.ui.DomUtils"],function(e,t){"use strict";return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var o=t.getSize(e.getEl());o.width>n.maxW&&(n.minW=n.maxW,e.classes.add("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,o=n.settings.forId,r=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!o&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0],e&&(o=e._id)),o?'<label id="'+n._id+'" class="'+n.classes+'"'+(o?' for="'+o+'"':"")+">"+r+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+r+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),l("tinymce.core.ui.Toolbar",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),l("tinymce.core.ui.MenuBar",["tinymce.core.ui.Toolbar"],function(e){"use strict";return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),l("tinymce.core.ui.MenuButton",["tinymce.core.ui.Button","tinymce.core.ui.Factory","tinymce.core.ui.MenuBar"],function(e,t,n){"use strict";function o(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var r=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var n,o=this;return o.menu&&o.menu.visible()&&e!==!1?o.hideMenu():(o.menu||(n=o.state.get("menu")||[],n.length?n={type:"menu",items:n}:n.type=n.type||"menu",n.renderTo?o.menu=n.parent(o).show().renderTo():o.menu=t.create(n).parent(o).renderTo(),o.fire("createmenu"),o.menu.reflow(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()}),o.menu.on("show hide",function(e){e.control==o.menu&&o.activeMenu("show"==e.type),o.aria("expanded","show"==e.type)}).fire("show")),o.menu.show(),o.menu.layoutRect({w:o.layoutRect().w}),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void o.fire("showmenu"))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,o=t._id,r=t.classPrefix,i=t.settings.icon,s=t.state.get("text"),a="";return e=t.settings.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",s&&(t.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+t.encode(s)+"</span>"),i=t.settings.icon?r+"ico "+r+"i-"+i:"",t.aria("role",t.parent()instanceof n?"menuitem":"button"),'<div id="'+o+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+o+'"><button id="'+o+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+a+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&o(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,o=t.control,i=e.parent();o&&i&&o instanceof r&&o.parent()==i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=o&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(o.focus(),o.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return r}),l("tinymce.core.ui.MenuItem",["tinymce.core.ui.Widget","tinymce.core.ui.Factory","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,o){"use strict";return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,o=n.settings,r=n.parent();if(r.items().each(function(e){e!==n&&e.hideMenu()}),o.menu){e=n.menu,e?e.show():(e=o.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var i=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),i),e.rel=i,i="menu-sub-"+i,e.classes.remove(e._lastRel).add(i),e._lastRel=i,n.classes.add("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,o,r={};for(r=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),
t=0;t<e.length;t++)o=r[e[t].toLowerCase()],o&&(e[t]=o);return e.join("+")}function t(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){var n=a.match||"";return n?e.replace(new RegExp(t(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function r(e){return e.replace(new RegExp(t("!mce~match["),"g"),"<b>").replace(new RegExp(t("]mce~match!"),"g"),"</b>")}var i=this,s=i._id,a=i.settings,l=i.classPrefix,u=i.state.get("text"),d=i.settings.icon,c="",f=a.shortcut,p=i.encode(a.url),m="";return d&&i.parent().classes.add("menu-has-icons"),a.image&&(c=" style=\"background-image: url('"+a.image+"')\""),f&&(f=e(f)),d=l+"ico "+l+"i-"+(i.settings.icon||"none"),m="-"!==u?'<i class="'+d+'"'+c+"></i> ":"",u=r(i.encode(o(u))),p=r(i.encode(o(p))),'<div id="'+s+'" class="'+i.classes+'" tabindex="-1">'+m+("-"!==u?'<span id="'+s+'-text" class="'+l+'text">'+u+"</span>":"")+(f?'<div id="'+s+'-shortcut" class="'+l+'menu-shortcut">'+f+"</div>":"")+(a.menu?'<div class="'+l+'caret"></div>':"")+(p?'<div class="'+l+'menu-item-link">'+p+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),o.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),l("tinymce.core.ui.Throbber",["tinymce.core.dom.DomQuery","tinymce.core.ui.Control","tinymce.core.util.Delay"],function(e,t,n){"use strict";return function(o,r){var i,s,a=this,l=t.classPrefix;a.show=function(t,u){function d(){i&&(e(o).append('<div class="'+l+"throbber"+(r?" "+l+"throbber-inline":"")+'"></div>'),u&&u())}return a.hide(),i=!0,t?s=n.setTimeout(d,t):d(),a},a.hide=function(){var e=o.lastChild;return n.clearTimeout(s),e&&e.className.indexOf("throbber")!=-1&&e.parentNode.removeChild(e),i=!1,a}}}),l("tinymce.core.ui.Menu",["tinymce.core.ui.FloatPanel","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.util.Tools"],function(e,t,n,o){"use strict";return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,r=n.length;r--;)n[r]=o.extend({},e.itemDefaults,n[r]);t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var t,o,r=this;o=r.settings.itemsFactory,o&&(r.throbber||(r.throbber=new n(r.getEl("body"),(!0)),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",e)),r.requestTime=t=(new Date).getTime(),r.settings.itemsFactory(function(n){return 0===n.length?void r.hide():void(r.requestTime===t&&(r.getEl().style.width="",r.getEl("body").style.width="",e(),r.items().remove(),r.getEl("body").innerHTML="",r.add(n),r.renderNew(),r.fire("loaded")))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e._super()}})}),l("tinymce.core.ui.ListBox",["tinymce.core.ui.MenuButton","tinymce.core.ui.Menu"],function(e,t){"use strict";return e.extend({init:function(e){function t(n){for(var i=0;i<n.length;i++){if(o=n[i].selected||e.value===n[i].value)return r=r||n[i].text,s.state.set("value",n[i].value),!0;if(n[i].menu&&t(n[i].menu))return!0}}var n,o,r,i,s=this;s._super(e),e=s.settings,s._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!o&&n.length>0&&(r=n[0].text,s.state.set("value",n[0].value)),s.state.set("menu",n)),s.state.set("text",e.text||r),s.classes.add("listbox"),s.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):s.value(t.control.value()),i=n})},bindStates:function(){function e(e,n){e instanceof t&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}function n(e,t){var o;if(e)for(var r=0;r<e.length;r++){if(e[r].value===t)return e[r];if(e[r].menu&&(o=n(e[r].menu,t)))return o}}var o=this;return o.on("show",function(t){e(t.control,o.value())}),o.state.on("change:value",function(e){var t=n(o.state.get("menu"),e.value);t?o.text(t.text):o.text(o.settings.text)}),o._super()}})}),l("tinymce.core.ui.Radio",["tinymce.core.ui.Checkbox"],function(e){"use strict";return e.extend({Defaults:{classes:"radio",role:"radio"}})}),l("tinymce.core.ui.ResizeHandle",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"==e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),l("tinymce.core.ui.SelectBox",["tinymce.core.ui.Widget"],function(e){"use strict";function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,n=this,o="";return e=t(n._options),n.size&&(o=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+o+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),l("tinymce.core.ui.Slider",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper","tinymce.core.ui.DomUtils"],function(e,t,n){"use strict";function o(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function r(e,t,n){e.setAttribute("aria-"+t,n)}function i(e,t){var o,i,s,a,l,u;"v"==e.settings.orientation?(a="top",s="height",i="h"):(a="left",s="width",i="w"),u=e.getEl("handle"),o=(e.layoutRect()[i]||100)-n.getSize(u)[s],l=o*((t-e._minValue)/(e._maxValue-e._minValue))+"px",u.style[a]=l,u.style.height=e.layoutRect().h+"px",r(u,"valuenow",t),r(u,"valuetext",""+e.settings.previewFilter(t)),r(u,"valuemin",e._minValue),r(u,"valuemax",e._maxValue)}return e.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"==e.orientation&&t.classes.add("vertical"),t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function r(e,t,n){return n*(t-e)-e}function i(t,n){function i(i){var s;s=p.value(),s=r(t,n,e(t,n,s)+.05*i),s=o(s,t,n),p.value(s),p.fire("dragstart",{value:s}),p.fire("drag",{value:s}),p.fire("dragend",{value:s})}p.on("keydown",function(e){switch(e.keyCode){case 37:case 38:i(-1);break;case 39:case 40:i(1)}})}function s(e,r,i){var s,a,l,m,h;p._dragHelper=new t(p._id,{handle:p._id+"-handle",start:function(e){s=e[u],a=parseInt(p.getEl("handle").style[d],10),l=(p.layoutRect()[f]||100)-n.getSize(i)[c],p.fire("dragstart",{value:h})},drag:function(t){var n=t[u]-s;m=o(a+n,0,l),i.style[d]=m+"px",h=e+m/l*(r-e),p.value(h),p.tooltip().text(""+p.settings.previewFilter(h)).show().moveRel(i,"bc tc"),p.fire("drag",{value:h})},stop:function(){p.tooltip().hide(),p.fire("dragend",{value:h})}})}var a,l,u,d,c,f,p=this;a=p._minValue,l=p._maxValue,"v"==p.settings.orientation?(u="screenY",d="top",c="height",f="h"):(u="screenX",d="left",c="width",f="w"),p._super(),i(a,l,p.getEl("handle")),s(a,l,p.getEl("handle"))},repaint:function(){this._super(),i(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){i(e,t.value)}),e._super()}})}),l("tinymce.core.ui.Spacer",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),l("tinymce.core.ui.SplitButton",["tinymce.core.ui.MenuButton","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery"],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,o,r=this,i=r.getEl(),s=r.layoutRect();return r._super(),e=i.firstChild,o=i.lastChild,n(e).css({width:s.w-t.getSize(o).width,height:s.h-2}),n(o).css({height:s.h-2}),r},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,o=t.classPrefix,r=t.state.get("icon"),i=t.state.get("text"),s="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",r=t.settings.icon?o+"ico "+o+"i-"+r:"",i&&(t.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+t.encode(i)+"</span>"),'<div id="'+n+'" class="'+t.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+s+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(r?" ":"")+t._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&n.className.indexOf("open")==-1)return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),l("tinymce.core.ui.StackLayout",["tinymce.core.ui.FlowLayout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),l("tinymce.core.ui.TabPanel",["tinymce.core.ui.Panel","tinymce.core.dom.DomQuery","tinymce.core.ui.DomUtils"],function(e,t,n){"use strict";return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",o=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,r){var i=e._id+"-t"+r;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+o+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+o+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id==e._id+"-head")for(var o=n.childNodes.length;o--;)n.childNodes[o]==t.target&&e.activateTab(o)})},initLayoutRect:function(){var e,t,o,r=this;t=n.getSize(r.getEl("head")).width,t=t<0?0:t,o=0,r.items().each(function(e){t=Math.max(t,e.layoutRect().minW),o=Math.max(o,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=o,e.layoutRect({x:0,y:0,w:t,h:o})});var i=n.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=o+i,e=r._super(),e.deltaH+=i,e.innerH=e.h-e.deltaH,e}})}),l("tinymce.core.ui.TextBox",["tinymce.core.ui.Widget","tinymce.core.util.Tools","tinymce.core.ui.DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,o,r,i=this,s=0;e=i.getEl().style,t=i._layoutRect,r=i._lastRepaintRect||{};var a=document;return!i.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(e.lineHeight=t.h-s+"px"),n=i.borderBox,o=n.left+n.right+8,s=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-o+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-s+"px",r.h=t.h),i._lastRepaintRect=r,i.fire("repaint",{},!1),i},renderHtml:function(){var e,o,r=this,i=r.settings;return e={id:r._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=i[t]}),r.disabled()&&(e.disabled="disabled"),i.subtype&&(e.type=i.subtype),o=n.create(i.multiline?"textarea":"input",e),o.value=r.state.get("value"),o.className=r.classes,o.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),l("tinymce.core.ui.Api",["tinymce.core.ui.Selector","tinymce.core.ui.Collection","tinymce.core.ui.ReflowQueue","tinymce.core.ui.Control","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.ui.Container","tinymce.core.ui.DragHelper","tinymce.core.ui.Scrollable","tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.FloatPanel","tinymce.core.ui.Window","tinymce.core.ui.MessageBox","tinymce.core.ui.Tooltip","tinymce.core.ui.Widget","tinymce.core.ui.Progress","tinymce.core.ui.Notification","tinymce.core.ui.Layout","tinymce.core.ui.AbsoluteLayout","tinymce.core.ui.Button","tinymce.core.ui.ButtonGroup","tinymce.core.ui.Checkbox","tinymce.core.ui.ComboBox","tinymce.core.ui.ColorBox","tinymce.core.ui.PanelButton","tinymce.core.ui.ColorButton","tinymce.core.ui.ColorPicker","tinymce.core.ui.Path","tinymce.core.ui.ElementPath","tinymce.core.ui.FormItem","tinymce.core.ui.Form","tinymce.core.ui.FieldSet","tinymce.core.ui.FilePicker","tinymce.core.ui.FitLayout","tinymce.core.ui.FlexLayout","tinymce.core.ui.FlowLayout","tinymce.core.ui.FormatControls","tinymce.core.ui.GridLayout","tinymce.core.ui.Iframe","tinymce.core.ui.InfoBox","tinymce.core.ui.Label","tinymce.core.ui.Toolbar","tinymce.core.ui.MenuBar","tinymce.core.ui.MenuButton","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.ui.Menu","tinymce.core.ui.ListBox","tinymce.core.ui.Radio","tinymce.core.ui.ResizeHandle","tinymce.core.ui.SelectBox","tinymce.core.ui.Slider","tinymce.core.ui.Spacer","tinymce.core.ui.SplitButton","tinymce.core.ui.StackLayout","tinymce.core.ui.TabPanel","tinymce.core.ui.TextBox"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p,m,h,g,v,y,b,_,x,C,j,E,w,S,k,T,P,I,R,N,M,D,O,A,L,B,F,z,U,H,W,V,q,G,K,$,Y,J,Z,X,Q,ee,te,ne,oe,re){"use strict";var ie=function(e,t){r.add(e.split(".").pop(),t)},se=function(e,t,n){var o,r;for(r=t.split(/[.\/]/),o=0;o<r.length-1;++o)void 0===e[r[o]]&&(e[r[o]]={}),e=e[r[o]];e[r[r.length-1]]=n,ie(t,n)},ae=function(ie){se(ie,"ui.Selector",e),se(ie,"ui.Collection",t),se(ie,"ui.ReflowQueue",n),se(ie,"ui.Control",o),se(ie,"ui.Factory",r),se(ie,"ui.KeyboardNavigation",i),se(ie,"ui.Container",s),se(ie,"ui.DragHelper",a),se(ie,"ui.Scrollable",l),se(ie,"ui.Panel",u),se(ie,"ui.Movable",d),se(ie,"ui.Resizable",c),se(ie,"ui.FloatPanel",f),se(ie,"ui.Window",p),se(ie,"ui.MessageBox",m),se(ie,"ui.Tooltip",h),se(ie,"ui.Widget",g),se(ie,"ui.Progress",v),se(ie,"ui.Notification",y),se(ie,"ui.Layout",b),se(ie,"ui.AbsoluteLayout",_),se(ie,"ui.Button",x),se(ie,"ui.ButtonGroup",C),se(ie,"ui.Checkbox",j),se(ie,"ui.ComboBox",E),se(ie,"ui.ColorBox",w),se(ie,"ui.PanelButton",S),se(ie,"ui.ColorButton",k),se(ie,"ui.ColorPicker",T),se(ie,"ui.Path",P),se(ie,"ui.ElementPath",I),se(ie,"ui.FormItem",R),se(ie,"ui.Form",N),se(ie,"ui.FieldSet",M),se(ie,"ui.FilePicker",D),se(ie,"ui.FitLayout",O),se(ie,"ui.FlexLayout",A),se(ie,"ui.FlowLayout",L),se(ie,"ui.FormatControls",B),se(ie,"ui.GridLayout",F),se(ie,"ui.Iframe",z),se(ie,"ui.InfoBox",U),se(ie,"ui.Label",H),se(ie,"ui.Toolbar",W),se(ie,"ui.MenuBar",V),se(ie,"ui.MenuButton",q),se(ie,"ui.MenuItem",G),se(ie,"ui.Throbber",K),se(ie,"ui.Menu",$),se(ie,"ui.ListBox",Y),se(ie,"ui.Radio",J),se(ie,"ui.ResizeHandle",Z),se(ie,"ui.SelectBox",X),se(ie,"ui.Slider",Q),se(ie,"ui.Spacer",ee),se(ie,"ui.SplitButton",te),se(ie,"ui.StackLayout",ne),se(ie,"ui.TabPanel",oe),se(ie,"ui.TextBox",re),se(ie,"ui.Api",le)},le={appendTo:ae};return le}),l("tinymce.core.api.Tinymce",["tinymce.core.geom.Rect","tinymce.core.util.Promise","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.html.Styles","tinymce.core.dom.TreeWalker","tinymce.core.html.Entities","tinymce.core.dom.DOMUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.dom.RangeUtils","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.html.DomParser","tinymce.core.html.Writer","tinymce.core.html.Serializer","tinymce.core.dom.Serializer","tinymce.core.util.VK","tinymce.core.dom.ControlSelection","tinymce.core.dom.BookmarkManager","tinymce.core.dom.Selection","tinymce.core.Formatter","tinymce.core.UndoManager","tinymce.core.EditorCommands","tinymce.core.util.URI","tinymce.core.util.Class","tinymce.core.util.EventDispatcher","tinymce.core.util.Observable","tinymce.core.WindowManager","tinymce.core.NotificationManager","tinymce.core.EditorObservable","tinymce.core.Shortcuts","tinymce.core.Editor","tinymce.core.util.I18n","tinymce.core.FocusManager","tinymce.core.EditorManager","tinymce.core.util.XHR","tinymce.core.util.JSON","tinymce.core.util.JSONRequest","tinymce.core.util.JSONP","tinymce.core.util.LocalStorage","tinymce.core.api.Compat","tinymce.core.util.Color","tinymce.core.ui.Api"],function(e,t,n,o,r,i,s,a,l,u,d,c,f,p,m,h,g,v,y,b,_,x,C,j,E,w,S,k,T,P,I,R,N,M,D,O,A,L,B,F,z,U,H,W,V,q,G,K,$){var Y=z,J=function(e,t,n){var o,r;for(r=t.split(/[.\/]/),o=0;o<r.length-1;++o)void 0===e[r[o]]&&(e[r[o]]={}),e=e[r[o]];e[r[r.length-1]]=n};return J(Y,"geom.Rect",e),J(Y,"util.Promise",t),J(Y,"util.Delay",n),J(Y,"Env",o),J(Y,"dom.EventUtils",r),J(Y,"dom.Sizzle",i),J(Y,"util.Tools",s),J(Y,"dom.DomQuery",a),J(Y,"html.Styles",l),J(Y,"dom.TreeWalker",u),J(Y,"html.Entities",d),J(Y,"dom.DOMUtils",c),J(Y,"dom.ScriptLoader",f),J(Y,"AddOnManager",p),J(Y,"dom.RangeUtils",m),J(Y,"html.Node",h),J(Y,"html.Schema",g),J(Y,"html.SaxParser",v),J(Y,"html.DomParser",y),J(Y,"html.Writer",b),J(Y,"html.Serializer",_),J(Y,"dom.Serializer",x),J(Y,"util.VK",C),J(Y,"dom.ControlSelection",j),J(Y,"dom.BookmarkManager",E),J(Y,"dom.Selection",w),J(Y,"Formatter",S),J(Y,"UndoManager",k),J(Y,"EditorCommands",T),J(Y,"util.URI",P),J(Y,"util.Class",I),J(Y,"util.EventDispatcher",R),J(Y,"util.Observable",N),J(Y,"WindowManager",M),J(Y,"NotificationManager",D),J(Y,"EditorObservable",O),J(Y,"Shortcuts",A),J(Y,"Editor",L),J(Y,"util.I18n",B),J(Y,"FocusManager",F),J(Y,"EditorManager",z),J(Y,"util.XHR",U),J(Y,"util.JSON",H),J(Y,"util.JSONRequest",W),J(Y,"util.JSONP",V),J(Y,"util.LocalStorage",q),J(Y,"Compat",G),J(Y,"util.Color",K),$.appendTo(Y),G.register(Y),Y}),l("tinymce.core.Register",[],function(){var t=this||window,n=function(n){"function"==typeof t.define&&(t.define.amd||(t.define("ephox/tinymce",[],function(){return n}),t.define("tinymce.core.EditorManager",[],function(){return n}))),e.exports=n};return{exposeToModuleLoaders:n}}),l("tinymce.core.api.Main",["tinymce.core.api.Tinymce","tinymce.core.Register"],function(e,t){return function(){return window.tinymce=e,window.tinyMCE=e,t.exposeToModuleLoaders(e),e}}),i("tinymce.core.api.Main")()}()}).call(window),t.window=tinymce}).call(t,n("./node_modules/timers-browserify/main.js").setImmediate)}});