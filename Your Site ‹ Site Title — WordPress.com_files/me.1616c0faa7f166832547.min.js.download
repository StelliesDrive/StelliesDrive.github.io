webpackJsonp(["me"],{"./client/blocks/edit-gravatar/constants.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ALLOWED_FILE_EXTENSIONS=["jpg","jpeg","png","gif","bmp"]},"./client/blocks/edit-gravatar/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditGravatar=void 0;var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/classnames/index.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/i18n-calypso/index.js"),x=o("./node_modules/path-browserify/index.js"),k=n(x),j=o("./node_modules/gridicons/build/index.js"),C=n(j),S=o("./client/blocks/edit-gravatar/constants.js"),w=o("./client/state/ui/editor/image-editor/constants.js"),R=o("./client/components/dialog/index.jsx"),A=n(R),L=o("./client/components/file-picker/index.jsx"),T=n(L),P=o("./client/state/current-user/selectors.js"),N=o("./client/components/gravatar/index.jsx"),I=n(N),M=o("./client/state/current-user/gravatar-status/selectors.js"),D=o("./client/state/ui/editor/image-editor/actions.js"),O=o("./client/components/spinner/index.jsx"),F=n(O),U=o("./client/state/current-user/gravatar-status/actions.js"),B=o("./client/blocks/image-editor/index.jsx"),z=n(B),W=o("./client/components/info-popover/index.jsx"),V=n(W),G=o("./client/components/external-link/index.jsx"),q=n(G),H=o("./client/components/email-verification/email-verification-dialog/index.jsx"),Q=n(H),Y=o("./client/components/drop-zone/index.jsx"),Z=n(Y),X=o("./client/state/analytics/actions.js"),J=t.EditGravatar=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.state={isEditingImage:!1,image:!1,showEmailVerificationNotice:!1},n.onReceiveFile=function(e){var t=n.props,o=t.receiveGravatarImageFailed,a=t.translate,s=t.recordReceiveImageEvent,i=k.default.extname(e[0].name).toLowerCase().substring(1);if(s(),S.ALLOWED_FILE_EXTENSIONS.indexOf(i)===-1){var r="";return r=i?a("Sorry, %s files are not supported — please make sure your image is in JPG, GIF, or PNG format.",{args:i}):a("Sorry, images of that filetype are not supported — please make sure your image is in JPG, GIF, or PNG format."),void o({errorMessage:r,statName:"bad_filetype"})}var l=URL.createObjectURL(e[0]);n.setState({isEditingImage:!0,image:l})},n.onImageEditorDone=function(e,t){var o=n.props,a=o.receiveGravatarImageFailed,s=o.translate,i=o.uploadGravatar,r=o.user;return n.hideImageEditor(),e?void a({errorMessage:s("We couldn't save that image — please try another one."),statName:"image_editor_error"}):void i(t,r.email)},n.hideImageEditor=function(){var e=n.props.resetAllImageEditorState;e(),URL.revokeObjectURL(n.state.image),n.setState({isEditingImage:!1,image:!1})},n.handleUnverifiedUserClick=function(){n.props.recordClickButtonEvent({isVerified:n.props.user.email_verified}),n.props.user.email_verified||n.setState({showEmailVerificationNotice:!0})},n.closeVerifyEmailDialog=function(){n.setState({showEmailVerificationNotice:!1})},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"renderImageEditor",value:function(){if(this.state.isEditingImage)return _.default.createElement(A.default,{additionalClassNames:"edit-gravatar-modal",isVisible:!0},_.default.createElement(z.default,{allowedAspectRatios:[w.AspectRatios.ASPECT_1X1],media:{src:this.state.image},onDone:this.onImageEditorDone,onCancel:this.hideImageEditor,doneButtonText:this.props.translate("Change My Photo")}))}},{key:"render",value:function(){var e=this.props,t=e.isUploading,o=e.translate,n=e.user,a="https://gravatar.com/"+(n.username||""),s=400,i=n.email_verified?"cloud-upload":"notice",r=o(n.email_verified?"Click to change photo":"Verify your email");return _.default.createElement("div",{className:(0,v.default)("edit-gravatar",{"is-unverified":!n.email_verified},{"is-uploading":t})},_.default.createElement("div",{onClick:this.handleUnverifiedUserClick},this.state.showEmailVerificationNotice&&_.default.createElement(Q.default,{onClose:this.closeVerifyEmailDialog}),this.renderImageEditor(),_.default.createElement(T.default,{accept:"image/*",onPick:this.onReceiveFile},_.default.createElement("div",{className:(0,v.default)("edit-gravatar__image-container",{"is-uploading":t})},n.email_verified&&_.default.createElement(Z.default,{textLabel:o("Drop to upload profile photo"),onFilesDrop:this.onReceiveFile}),_.default.createElement(I.default,{imgSize:s,size:150,user:n}),!t&&_.default.createElement("div",{className:"edit-gravatar__label-container"},_.default.createElement(C.default,{icon:i,size:36}),_.default.createElement("span",{className:"edit-gravatar__label"},r)),t&&_.default.createElement(F.default,{className:"edit-gravatar__spinner"})))),_.default.createElement("div",null,_.default.createElement("p",{className:"edit-gravatar__explanation"},o("Your profile photo is public.")),_.default.createElement(V.default,{className:"edit-gravatar__pop-over",position:"left"},o('{{p}}The avatar you use on WordPress.com comes from {{ExternalLink}}Gravatar{{/ExternalLink}}, a universal avatar service (it stands for "Globally Recognized Avatar," get it?).{{/p}}{{p}}Your image may also appear on other sites using Gravatar whenever you\'re logged in with your email address %(email)s.{{/p}}',{components:{ExternalLink:_.default.createElement(q.default,{href:a,target:"_blank",rel:"noopener noreferrer",icon:!0}),p:_.default.createElement("p",null)},args:{email:n.email}}))))}}]),t}(g.Component);J.propTypes={isUploading:h.default.bool,translate:h.default.func,receiveGravatarImageFailed:h.default.func,resetAllImageEditorState:h.default.func,uploadGravatar:h.default.func,user:h.default.object,recordClickButtonEvent:h.default.func,recordReceiveImageEvent:h.default.func};var K=function(e){var t=e.isVerified;return(0,X.composeAnalytics)((0,X.recordTracksEvent)("calypso_edit_gravatar_click",{userVerified:t}),(0,X.recordGoogleEvent)("Me","Clicked on Edit Gravatar Button in Profile"))},$=function(){return(0,X.recordTracksEvent)("calypso_edit_gravatar_file_receive")};t.default=(0,E.connect)(function(e){return{user:(0,P.getCurrentUser)(e)||{},isUploading:(0,M.isCurrentUserUploadingGravatar)(e)}},{resetAllImageEditorState:D.resetAllImageEditorState,receiveGravatarImageFailed:U.receiveGravatarImageFailed,uploadGravatar:U.uploadGravatar,recordClickButtonEvent:K,recordReceiveImageEvent:$})((0,y.localize)(J))},"./client/blocks/image-editor/image-editor-buttons.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/react-redux/es/index.js"),v=o("./node_modules/lodash/lodash.js"),E=o("./node_modules/i18n-calypso/index.js"),y=o("./client/components/button/index.jsx"),x=n(y),k=o("./client/state/ui/editor/image-editor/selectors.js"),j=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.hasChanges,o=e.onCancel,n=e.src,a=e.onDone,s=e.onReset,i=e.translate,r=e.doneButtonText;return _.default.createElement("div",{className:"image-editor__buttons"},o&&_.default.createElement(x.default,{className:"image-editor__buttons-button",onClick:o,"data-e2e-button":"cancel"},i("Cancel")),_.default.createElement(x.default,{className:"image-editor__buttons-button",disabled:!t,onClick:s,"data-e2e-button":"reset"},i("Reset")),_.default.createElement(x.default,{className:"image-editor__buttons-button",disabled:!n,primary:!0,onClick:a,"data-e2e-button":"done"},r||i(" Done ")))}}]),t}(g.Component);j.propTypes={src:h.default.string,hasChanges:h.default.bool,resetImageEditorState:h.default.func,onDone:h.default.func,onCancel:h.default.func,onReset:h.default.func,doneButtonText:h.default.string},j.defaultProps={src:"",hasChanges:!1,resetImageEditorState:v.noop,onDone:v.noop,onCancel:v.noop,onReset:v.noop,doneButtonText:""},t.default=(0,b.connect)(function(e){var t=(0,k.getImageEditorFileInfo)(e),o=t.src,n=(0,k.imageEditorHasChanges)(e);return{src:o,hasChanges:n}})((0,E.localize)(j)),e.exports=t.default},"./client/blocks/image-editor/image-editor-canvas.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorCanvas=void 0;var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/react-dom/index.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/lodash/lodash.js"),x=o("./node_modules/classnames/index.js"),k=n(x),j=o("./client/blocks/image-editor/image-editor-crop.jsx"),C=n(j),S=o("./client/lib/media/utils.js"),w=n(S),R=o("./client/state/ui/editor/image-editor/selectors.js"),A=o("./client/state/ui/editor/image-editor/actions.js"),L=o("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),T=n(L),P=t.ImageEditorCanvas=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return o.frameRateInterval=1e3/30,o.requestAnimationFrameId=null,o.lastTimestamp=null,o.onWindowResize=function(){o.requestAnimationFrameId=window.requestAnimationFrame(o.updateCanvasPosition)},o.onLoadComplete=o.onLoadComplete.bind(o),o.updateCanvasPosition=o.updateCanvasPosition.bind(o),o.isVisible=!1,o}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.isVisible=!0}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&this.getImage(e.src)}},{key:"isBlobSrc",value:function(e){return(0,y.startsWith)(e,"blob")}},{key:"getImage",value:function(e){var t=this,o=this.props,n=o.onLoadError,a=o.mimeType,s=new XMLHttpRequest;this.isBlobSrc(e)||(e+="?"),s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){if(t.isVisible){var e=window.URL.createObjectURL(new Blob([s.response],{type:a}));t.initImage(e)}},s.onerror=function(e){return n(e)},s.send()}},{key:"initImage",value:function(e){this.image=new Image,this.image.src=e,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete}},{key:"onLoadComplete",value:function(e){"load"===e.type&&this.isVisible&&(this.drawImage(),this.updateCanvasPosition(),"undefined"!=typeof window&&(this.lastTimestamp=window.performance.now(),window.addEventListener("resize",this.onWindowResize)),this.props.setImageEditorImageHasLoaded(this.image.width,this.image.height))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&this.onWindowResize&&(window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.requestAnimationFrameId)),this.isVisible=!1}},{key:"componentDidUpdate",value:function(){this.drawImage(),this.updateCanvasPosition()}},{key:"toBlob",value:function(e){var t=this.props.crop,o=t.leftRatio,n=t.topRatio,a=t.widthRatio,s=t.heightRatio,i=this.props,r=i.mimeType,l=i.transform,d=v.default.findDOMNode(this.refs.canvas),u=d.getContext("2d"),c=l.degrees%180!==0,p=c?this.image.height:this.image.width,f=c?this.image.width:this.image.height,m=o*p,h=n*f,g=a*p,_=s*f,b=u.getImageData(m,h,g,_),E=document.createElement("canvas");E.width=g,E.height=_;var y=E.getContext("2d");y.putImageData(b,0,0),w.default.canvasToBlob(E,e,r,1)}},{key:"drawImage",value:function(){if(this.image){var e=v.default.findDOMNode(this.refs.canvas),t=this.image.width,o=this.image.height,n=this.props.transform,a=n.degrees%180!==0;e.width=a?o:t,e.height=a?t:o;var s=e.getContext("2d");s.clearRect(0,0,e.width,e.height),s.save(),s.setTransform(1,0,0,1,e.width/2,e.height/2),s.scale(n.scaleX,n.scaleY),s.rotate(n.degrees*Math.PI/180),s.drawImage(this.image,-t/2,-o/2),s.restore()}}},{key:"updateCanvasPosition",value:function(e){var t=e,o=t-this.lastTimestamp;if(!(o<this.frameRateInterval)){this.lastTimestamp=t-o%this.frameRateInterval;var n=this.props.crop,a=n.leftRatio,s=n.topRatio,i=n.widthRatio,r=n.heightRatio,l=v.default.findDOMNode(this.refs.canvas),d=-50*i-100*a,u=-50*r-100*s,c=l.offsetTop,p=l.offsetLeft,f=l.offsetWidth,m=l.offsetHeight;this.props.setImageEditorCropBounds(c-m*-u/100,p-f*-d/100,c+m*(1+u/100),p+f*(1+d/100))}}},{key:"preventDrag",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this.props.crop,t=e.leftRatio,o=e.topRatio,n=e.widthRatio,a=e.heightRatio,s=this.props,i=s.isImageLoaded,r=s.showCrop,l=-50*n-100*t,d=-50*a-100*o,u={transform:"translate("+l+"%, "+d+"%)",maxWidth:85/n+"%",maxHeight:85/a+"%"},c=(0,k.default)("image-editor__canvas",{"is-placeholder":!i});return _.default.createElement("div",{className:"image-editor__canvas-container"},_.default.createElement("canvas",{ref:"canvas",style:u,onMouseDown:this.preventDrag,className:c}),r&&_.default.createElement(C.default,null))}}]),t}(g.Component);P.propTypes={src:h.default.string,mimeType:h.default.string,transform:h.default.shape({degrees:h.default.number,scaleX:h.default.number,scaleY:h.default.number}),crop:h.default.shape({topRatio:h.default.number,leftRatio:h.default.number,widthRatio:h.default.number,heightRatio:h.default.number}),setImageEditorCropBounds:h.default.func,setImageEditorImageHasLoaded:h.default.func,onLoadError:h.default.func,isImageLoaded:h.default.bool,showCrop:h.default.bool},P.defaultProps={transform:{degrees:0,scaleX:1,scaleY:1},crop:{cropTopRatio:0,cropLeftRatio:0,cropWidthRatio:1,cropHeightRatio:1},setImageEditorCropBounds:y.noop,setImageEditorImageHasLoaded:y.noop,onLoadError:y.noop,isImageLoaded:!1,showCrop:!0},t.default=(0,E.connect)(function(e){var t=(0,R.getImageEditorTransform)(e),o=(0,R.getImageEditorFileInfo)(e),n=o.src,a=o.mimeType,s=(0,R.getImageEditorCrop)(e),i=(0,R.isImageEditorImageLoaded)(e),r=(0,T.default)(e);return{src:n,mimeType:a,transform:t,crop:s,isImageLoaded:i,showCrop:!(!i||!r)}},{setImageEditorCropBounds:A.setImageEditorCropBounds,setImageEditorImageHasLoaded:A.setImageEditorImageHasLoaded},null,{withRef:!0})(P)},"./client/blocks/image-editor/image-editor-crop.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/toConsumableArray.js"),s=n(a),i=o("./node_modules/babel-runtime/core-js/object/assign.js"),r=n(i),l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/createClass.js"),f=n(p),m=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n(m),g=o("./node_modules/babel-runtime/helpers/inherits.js"),_=n(g),b=o("./node_modules/prop-types/index.js"),v=n(b),E=o("./node_modules/react/react.js"),y=n(E),x=o("./node_modules/react-redux/es/index.js"),k=o("./node_modules/lodash/lodash.js"),j=o("./node_modules/classnames/index.js"),C=n(j),S=o("./client/components/draggable/index.jsx"),w=n(S),R=o("./client/state/ui/editor/image-editor/selectors.js"),A=o("./client/state/ui/editor/image-editor/constants.js"),L=o("./client/state/ui/editor/image-editor/actions.js"),T=o("./client/state/ui/editor/image-editor/reducer.js"),P=o("./client/state/selectors/get-image-editor-original-aspect-ratio.js"),N=n(P),I=function(e){function t(e){(0,c.default)(this,t);var o=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return o.state=o.getDefaultState(e),o.onTopLeftDrag=o.onTopLeftDrag.bind(o),o.onTopRightDrag=o.onTopRightDrag.bind(o),o.onBottomLeftDrag=o.onBottomLeftDrag.bind(o),o.onBottomRightDrag=o.onBottomRightDrag.bind(o),o.applyCrop=o.applyCrop.bind(o),o.onBorderDrag=o.onBorderDrag.bind(o),o}return(0,_.default)(t,e),(0,f.default)(t,[{key:"getDefaultState",value:function(e){return{top:e.bounds.topBound,left:e.bounds.leftBound,bottom:e.bounds.bottomBound,right:e.bounds.rightBound}}},{key:"componentWillMount",value:function(){this.updateCrop(this.getDefaultState(this.props),this.props,this.applyComputedCrop)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,o=t.bounds,n=t.aspectRatio,a=t.crop;if(!(0,k.isEqual)(o,e.bounds)){var s=e.bounds.rightBound-e.bounds.leftBound,i=e.bounds.bottomBound-e.bounds.topBound,r=e.bounds.topBound+e.crop.topRatio*i,l=e.bounds.leftBound+e.crop.leftRatio*s,d=r+e.crop.heightRatio*i,u=l+e.crop.widthRatio*s,c={top:r,left:l,bottom:d,right:u};this.setState(c),this.updateCrop(c)}n!==e.aspectRatio&&this.updateCrop(this.getDefaultState(e),e,this.applyCrop),e.imageEditorHasChanges||!(0,k.isEqual)(e.crop,T.defaultCrop)||(0,k.isEqual)(a,e.crop)||this.updateCrop(this.getDefaultState(e),e,this.applyComputedCrop)}},{key:"updateCrop",value:function(e,t,o){t=t||this.props;var n=t.aspectRatio;if(n===A.AspectRatios.FREE)return void this.setState(e,o);var a=t.degrees%180!==0,s=(0,r.default)({},this.state,e),i=s.right-s.left,l=s.bottom-s.top,d=void 0,u=void 0,c=i,p=l;switch(n){case A.AspectRatios.ORIGINAL:if(!this.props.originalAspectRatio)return void this.setState(e,o);var f=this.props.originalAspectRatio,m=f.width,h=f.height;d=a?h:m,u=a?m:h;break;case A.AspectRatios.ASPECT_1X1:d=1,u=1;break;case A.AspectRatios.ASPECT_16X9:d=a?9:16,u=a?16:9;break;case A.AspectRatios.ASPECT_4X3:d=a?3:4,u=a?4:3;break;case A.AspectRatios.ASPECT_3X2:d=a?2:3,u=a?3:2}var g=Math.min(i/d,l/u);c=d*g,p=u*g,e.hasOwnProperty("top")?e.top=s.bottom-p:e.hasOwnProperty("bottom")&&(e.bottom=s.top+p),e.hasOwnProperty("left")?e.left=s.right-c:e.hasOwnProperty("right")&&(e.right=s.left+c),this.setState(e,o)}},{key:"onTopLeftDrag",value:function(e,t){var o=this.state,n=o.right,a=o.bottom,s=this.props.minCropSize,i=t,r=e;n-r<=s.width&&(r=n-s.width),a-i<=s.height&&(i=a-s.height),this.updateCrop({top:i,left:r})}},{key:"onTopRightDrag",value:function(e,t){var o=this.state,n=o.left,a=o.bottom,s=this.props.minCropSize,i=t,r=e;r-n<=s.width&&(r=n+s.width),a-i<=s.height&&(i=a-s.height),this.updateCrop({top:i,right:r})}},{key:"onBottomRightDrag",value:function(e,t){var o=this.state,n=o.left,a=o.top,s=this.props.minCropSize,i=t,r=e;r-n<=s.width&&(r=n+s.width),i-a<=s.height&&(i=a+s.height),this.updateCrop({bottom:i,right:r})}},{key:"onBottomLeftDrag",value:function(e,t){var o=this.state,n=o.right,a=o.top,s=this.props.minCropSize,i=t,r=e;n-r<=s.width&&(r=n-s.width),i-a<=s.height&&(i=a+s.height),this.updateCrop({bottom:i,left:r})}},{key:"onBorderDrag",value:function(e,t){var o=this.state,n=o.top,a=o.left,s=o.right,i=o.bottom,r=s-a,l=i-n;this.setState({top:t,left:e,bottom:t+l,right:e+r})}},{key:"getCropBounds",value:function(){var e=this.state,t=e.top,o=e.left,n=e.right,a=e.bottom,s=this.props.bounds,i=s.topBound,r=s.leftBound,l=s.rightBound,d=s.bottomBound,u=t-i,c=o-r,p=n-o,f=a-t,m=l-r,h=d-i,g=this.props.degrees%180!==0;if(this.props.originalAspectRatio){var _=this.props.originalAspectRatio,b=_.width,v=_.height,E=g?v:b,y=g?b:v,x=y/E;h=m*x}return[u/h,c/m,p/m,f/h]}},{key:"applyCrop",value:function(){var e;(e=this.props).imageEditorCrop.apply(e,(0,s.default)(this.getCropBounds()))}},{key:"applyComputedCrop",value:function(){var e;(e=this.props).imageEditorComputedCrop.apply(e,(0,s.default)(this.getCropBounds()))}},{key:"render",value:function(){var e=this.state,t=e.top,o=e.left,n=e.right,a=e.bottom,s=n-o,i=a-t,r="image-editor__crop-handle",l=this.props.bounds,d=l.topBound,u=l.leftBound,c=l.rightBound,p=l.bottomBound;return y.default.createElement("div",null,y.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:o+"px",width:s+"px",height:Math.max(0,t-d)+"px"}}),y.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:u+"px",width:Math.max(0,o-u)+"px",height:Math.max(0,p-d)+"px"}}),y.default.createElement("div",{className:"image-editor__crop-background",style:{top:a+"px",left:o+"px",width:s+"px",height:Math.max(0,p-a)+"px"}}),y.default.createElement("div",{className:"image-editor__crop-background",style:{top:d+"px",left:n+"px",width:Math.max(0,c-n)+"px",height:Math.max(0,p-d)+"px"}}),y.default.createElement(w.default,{ref:"border",onDrag:this.onBorderDrag,onStop:this.applyCrop,x:o,y:t,width:s,height:i,bounds:{top:d,left:u,bottom:p,right:c},className:"image-editor__crop"}),y.default.createElement(w.default,{onDrag:this.onTopLeftDrag,onStop:this.applyCrop,x:o,y:t,controlled:!0,bounds:{bottom:a,right:n,top:d,left:u},ref:"topLeft",className:(0,C.default)(r,r+"-nwse")}),y.default.createElement(w.default,{onDrag:this.onTopRightDrag,onStop:this.applyCrop,y:t,x:n,controlled:!0,bounds:{bottom:a,left:o,top:d,right:c},ref:"topRight",className:(0,C.default)(r,r+"-nesw")}),y.default.createElement(w.default,{onDrag:this.onBottomRightDrag,onStop:this.applyCrop,y:a,x:n,controlled:!0,bounds:{top:t,left:o,bottom:p,right:c},ref:"bottomRight",className:(0,C.default)(r,r+"-nwse")}),y.default.createElement(w.default,{onDrag:this.onBottomLeftDrag,onStop:this.applyCrop,y:a,x:o,controlled:!0,bounds:{top:t,right:n,bottom:p,left:u},ref:"bottomLeft",className:(0,C.default)(r,r+"-nesw")}))}}]),t}(E.Component);I.propTypes={degrees:v.default.number,bounds:v.default.shape({topBound:v.default.number,leftBound:v.default.number,bottomBound:v.default.number,rightBound:v.default.number}),crop:v.default.shape({topRatio:v.default.number,leftRatio:v.default.number,widthRatio:v.default.number,heightRatio:v.default.number}),aspectRatio:v.default.string,imageEditorCrop:v.default.func,imageEditorComputedCrop:v.default.func,minCropSize:v.default.shape({width:v.default.number,height:v.default.number}),imageEditorHasChanges:v.default.bool},I.defaultProps={degrees:0,bounds:{topBound:0,leftBound:0,bottomBound:100,rightBound:100},imageEditorCrop:k.noop,imageEditorComputedCrop:k.noop,minCropSize:{width:50,height:50},imageEditorHasChanges:!1},t.default=(0,x.connect)(function(e){var t=(0,R.getImageEditorCropBounds)(e),o=(0,R.getImageEditorCrop)(e),n=(0,R.getImageEditorAspectRatio)(e),a=(0,R.getImageEditorTransform)(e),s=a.degrees;return{bounds:t,crop:o,aspectRatio:n,degrees:s,originalAspectRatio:(0,N.default)(e),imageEditorHasChanges:(0,R.imageEditorHasChanges)(e)}},{imageEditorCrop:L.imageEditorCrop,imageEditorComputedCrop:L.imageEditorComputedCrop})(I),e.exports=t.default},"./client/blocks/image-editor/image-editor-toolbar.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEditorToolbar=void 0;var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/react-redux/es/index.js"),v=o("./node_modules/lodash/lodash.js"),E=o("./node_modules/i18n-calypso/index.js"),y=o("./node_modules/gridicons/build/index.js"),x=n(y),k=o("./node_modules/classnames/index.js"),j=n(k),C=o("./client/components/popover/menu.jsx"),S=n(C),w=o("./client/components/popover/menu-item.jsx"),R=n(w),A=o("./client/state/ui/editor/image-editor/constants.js"),L=o("./client/state/ui/editor/image-editor/selectors.js"),T=o("./client/state/ui/editor/image-editor/actions.js"),P=o("./client/state/selectors/get-image-editor-is-greater-than-minimum-dimensions.js"),N=n(P),I=t.ImageEditorToolbar=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return o.state={showAspectPopover:!1},o.setAspectMenuContext=o.setAspectMenuContext.bind(o),o.onAspectOpen=o.onAspectOpen.bind(o),o.onAspectClose=o.onAspectClose.bind(o),o.rotate=o.rotate.bind(o),o.flip=o.flip.bind(o),o}return(0,f.default)(t,e),(0,d.default)(t,[{key:"rotate",value:function(){this.props.imageEditorRotateCounterclockwise()}},{key:"flip",value:function(){this.props.imageEditorFlip()}},{key:"onAspectOpen",value:function(e){e.preventDefault();var t=this.props,o=t.isAspectRatioDisabled,n=t.onShowNotice,a=t.translate;if(o){var s=a("To change the aspect ratio, the height and width must be bigger than {{strong}}%(width)dpx{{/strong}}.",{args:{width:A.MinimumImageDimensions.WIDTH,height:A.MinimumImageDimensions.HEIGHT},components:{strong:_.default.createElement("strong",null)}});return void n(s)}this.setState({showAspectPopover:!0})}},{key:"onAspectClose",value:function(e){this.setState({showAspectPopover:!1}),"string"==typeof e&&this.props.setImageEditorAspectRatio(e)}},{key:"setAspectMenuContext",value:function(e){this.setState({popoverContext:e})}},{key:"renderAspectMenu",value:function(){var e=this.state,t=e.popoverContext,o=e.showAspectPopover,n=this.props,a=n.translate,s=n.aspectRatio,i=n.allowedAspectRatios;if(t&&1!==i.length){var r=[{action:A.AspectRatios.FREE,label:a("Free")},{action:A.AspectRatios.ORIGINAL,label:a("Original")},{action:A.AspectRatios.ASPECT_1X1,label:a("Square")},{action:A.AspectRatios.ASPECT_16X9,label:a("16:9")},{action:A.AspectRatios.ASPECT_4X3,label:a("4:3")},{action:A.AspectRatios.ASPECT_3X2,label:a("3:2")}];return _.default.createElement(S.default,{isVisible:o,onClose:this.onAspectClose,position:"top",context:t,className:"image-editor__toolbar-popover popover is-dialog-visible"},r.map(function(e){return i.indexOf(e.action)!==-1?_.default.createElement(R.default,{key:"image-editor-toolbar-aspect-"+e.action,action:e.action},s===e.action&&_.default.createElement(x.default,{icon:"checkmark",size:12}),e.label):null}))}}},{key:"renderButtons",value:function(){var e=this.props,t=e.translate,o=e.allowedAspectRatios,n=e.isAspectRatioDisabled,a=[{tool:"rotate",icon:"rotate",text:t("Rotate"),onClick:this.rotate},1===o.length?null:{tool:"aspect",ref:this.setAspectMenuContext,icon:"crop",text:t("Crop"),onClick:this.onAspectOpen,disabled:n},{tool:"flip-vertical",icon:"flip-vertical",text:t("Flip"),onClick:this.flip}];return a.map(function(e){var t=(0,j.default)("image-editor__toolbar-button",{"is-disabled":e&&e.disabled});return e?_.default.createElement("button",{key:"image-editor-toolbar-"+e.tool,ref:e.ref,className:t,onClick:e.onClick},_.default.createElement(x.default,{icon:e.icon}),_.default.createElement("span",null,e.text)):null})}},{key:"render",value:function(){return _.default.createElement("div",{className:"image-editor__toolbar"},this.renderButtons(),this.renderAspectMenu())}}]),t}(g.Component);I.propTypes={aspectRatio:h.default.string,imageEditorRotateCounterclockwise:h.default.func,imageEditorFlip:h.default.func,setImageEditorAspectRatio:h.default.func,allowedAspectRatios:h.default.array,onShowNotice:h.default.func,isAspectRatioDisabled:h.default.bool},I.defaultProps={imageEditorRotateCounterclockwise:v.noop,imageEditorFlip:v.noop,setImageEditorAspectRatio:v.noop,allowedAspectRatios:(0,v.values)(A.AspectRatios),onShowNotice:v.noop,isAspectRatioDisabled:!1},t.default=(0,b.connect)(function(e){var t=(0,L.getImageEditorAspectRatio)(e),o=(0,N.default)(e);return{aspectRatio:t,isAspectRatioDisabled:!o}},{imageEditorRotateCounterclockwise:T.imageEditorRotateCounterclockwise,imageEditorFlip:T.imageEditorFlip,setImageEditorAspectRatio:T.setImageEditorAspectRatio})((0,E.localize)(I))},"./client/blocks/image-editor/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/extends.js"),s=n(a),i=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/createClass.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=n(p),m=o("./node_modules/babel-runtime/helpers/inherits.js"),h=n(m),g=o("./node_modules/prop-types/index.js"),_=n(g),b=o("./node_modules/react/react.js"),v=n(b),E=o("./node_modules/react-redux/es/index.js"),y=o("./node_modules/redux/lib/index.js"),x=o("./node_modules/lodash/lodash.js"),k=o("./node_modules/path-browserify/index.js"),j=n(k),C=o("./node_modules/i18n-calypso/index.js"),S=o("./node_modules/classnames/index.js"),w=n(S),R=o("./client/components/close-on-escape/index.jsx"),A=n(R),L=o("./client/components/notice/index.jsx"),T=n(L),P=o("./client/blocks/image-editor/image-editor-canvas.jsx"),N=n(P),I=o("./client/blocks/image-editor/image-editor-toolbar.jsx"),M=n(I),D=o("./client/blocks/image-editor/image-editor-buttons.jsx"),O=n(D),F=o("./client/lib/media/utils.js"),U=n(F),B=o("./client/state/ui/editor/image-editor/actions.js"),z=o("./client/state/ui/editor/image-editor/selectors.js"),W=o("./client/state/ui/selectors.js"),V=o("./client/state/sites/selectors.js"),G=o("./client/components/data/query-sites/index.jsx"),q=n(G),H=o("./client/state/ui/editor/image-editor/constants.js"),Q=o("./client/blocks/image-editor/utils.js"),Y=function(e){function t(){var e,o,n,a;(0,d.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return o=n=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),n.state={noticeText:null,noticeStatus:"is-info"},n.setDefaultAspectRatio=function(){var e=n.props,t=e.defaultAspectRatio,o=e.allowedAspectRatios;n.props.setImageEditorDefaultAspectRatio((0,Q.getDefaultAspectRatio)(t,o))},n.updateFileInfo=function(e){var t=n.props.site,o=void 0,a="default",s="image/png",i="default";e&&(o=e.src||U.default.url(e,{photon:t&&!t.is_private}),a=e.file||j.default.basename(o),s=U.default.getMimeType(e)||s,i=e.title||i),n.props.resetImageEditorState(),n.props.setImageEditorFileInfo(o,a,s,i)},n.convertBlobToImage=function(e){var t=n.props.onDone,o=document.createElement("img"),a=URL.createObjectURL(e),i=n.getImageEditorProps();o.onload=function(){URL.revokeObjectURL(a),t(null,e,(0,s.default)({},i,{width:o.width,height:o.height}))},o.onerror=function(){t(null,e,i)},o.src=a},n.onDone=function(){var e=n.props,t=e.isImageLoaded,o=e.onDone;if(!t)return void o(new Error("Image not loaded yet."),null,n.getImageEditorProps());var a=n.refs.editCanvas.getWrappedInstance();a.toBlob(n.convertBlobToImage)},n.onCancel=function(){n.props.onCancel(n.getImageEditorProps())},n.onReset=function(){n.props.resetImageEditorState(),n.props.onReset(n.getImageEditorProps())},n.getImageEditorProps=function(){var e=n.props,t=e.src,o=e.fileName,a=e.media,s=e.mimeType,i=e.title,r=e.site,l={src:t,fileName:o,mimeType:s,title:i,site:r,resetAllImageEditorState:n.props.resetAllImageEditorState};return a&&a.ID&&(l.ID=a.ID),l},n.showNotice=function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-info";n.setState({noticeText:e,noticeStatus:t})},n.clearNoticeState=function(){n.setState({noticeText:null,noticeStatus:"is-info"})},n.renderNotice=function(){if(!n.state.noticeText)return null;var e="is-info"===n.state.noticeStatus;return v.default.createElement(T.default,{status:n.state.noticeStatus,showDismiss:e,text:n.state.noticeText,isCompact:!1,onDismissClick:n.clearNoticeState,className:"image-editor__notice"})},n.onLoadCanvasError=function(){var e=n.props.translate;n.showNotice(e("Sorry, there was a problem loading the image. Please close this editor and try selecting the image again."),"is-error")},a=o,(0,f.default)(n,a)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.media;e.media&&!(0,x.isEqual)(e.media,t)&&(this.props.resetAllImageEditorState(),this.updateFileInfo(e.media),this.setDefaultAspectRatio())}},{key:"componentDidMount",value:function(){this.updateFileInfo(this.props.media),this.setDefaultAspectRatio()}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.siteId,n=e.allowedAspectRatios,a=this.state.noticeText,s=(0,w.default)("image-editor",t);return v.default.createElement("div",{className:s},a&&this.renderNotice(),v.default.createElement(A.default,{onEscape:this.onCancel}),v.default.createElement(q.default,{siteId:o}),v.default.createElement("figure",null,v.default.createElement("div",{className:"image-editor__content"},v.default.createElement(N.default,{ref:"editCanvas",onLoadError:this.onLoadCanvasError}),v.default.createElement(M.default,{onShowNotice:this.showNotice,allowedAspectRatios:n}),v.default.createElement(O.default,{onCancel:this.props.onCancel&&this.onCancel,onDone:this.onDone,onReset:this.onReset,doneButtonText:this.props.doneButtonText}))))}}]),t}(v.default.Component);Y.propTypes={media:_.default.object,siteId:_.default.number,onDone:_.default.func,onCancel:_.default.func,onReset:_.default.func,className:_.default.string,defaultAspectRatio:_.default.oneOf(H.AspectRatiosValues),allowedAspectRatios:_.default.arrayOf(_.default.oneOf(H.AspectRatiosValues)),site:_.default.object,fileName:_.default.string,setImageEditorFileInfo:_.default.func,setImageEditorDefaultAspectRatio:_.default.func,translate:_.default.func,isImageLoaded:_.default.bool},Y.defaultProps={media:null,onDone:x.noop,onCancel:null,onReset:x.noop,isImageLoaded:!1,defaultAspectRatio:H.AspectRatios.FREE,allowedAspectRatios:H.AspectRatiosValues,setImageEditorDefaultAspectRatio:x.noop},t.default=(0,E.connect)(function(e,t){var o=t.siteId;return o||(o=(0,W.getSelectedSiteId)(e)),(0,s.default)({},(0,z.getImageEditorFileInfo)(e),{site:(0,V.getSite)(e,o),isImageLoaded:(0,z.isImageEditorImageLoaded)(e)})},function(e,t){var o=(0,Q.getDefaultAspectRatio)(t.defaultAspectRatio,t.allowedAspectRatios),n={aspectRatio:o};return(0,y.bindActionCreators)({setImageEditorFileInfo:B.setImageEditorFileInfo,setImageEditorDefaultAspectRatio:B.setImageEditorDefaultAspectRatio,resetImageEditorState:(0,x.partial)(B.resetImageEditorState,n),resetAllImageEditorState:(0,x.partial)(B.resetAllImageEditorState,n)},e)})((0,C.localize)(Y)),e.exports=t.default},"./client/blocks/image-editor/utils.js":function(e,t,o){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.AspectRatiosValues;return(0,a.includes)(t,e)||(e=(0,a.get)(t,"0",s.AspectRatios.FREE)),(0,a.includes)(s.AspectRatiosValues,e)?e:n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultAspectRatio=n;var a=o("./node_modules/lodash/lodash.js"),s=o("./client/state/ui/editor/image-editor/constants.js")},"./client/components/card/compact.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return l.default.createElement(p.default,(0,i.default)({},e,{className:(0,u.default)(e.className,"is-compact")}),e.children)}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/extends.js"),i=n(s);t.default=a;var r=o("./node_modules/react/react.js"),l=n(r),d=o("./node_modules/classnames/index.js"),u=n(d),c=o("./client/components/card/index.jsx"),p=n(c);e.exports=t.default},"./client/components/draggable/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/extends.js"),s=n(a),i=o("./node_modules/babel-runtime/core-js/object/keys.js"),r=n(i),l=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/createClass.js"),f=n(p),m=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n(m),g=o("./node_modules/babel-runtime/helpers/inherits.js"),_=n(g),b=o("./node_modules/prop-types/index.js"),v=n(b),E=o("./node_modules/react/react.js"),y=n(E),x=o("./node_modules/lodash/lodash.js"),k=function(e){function t(e){(0,c.default)(this,t);var o=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return o.state={x:o.props.x,y:o.props.y},o.onTouchStartHandler=o.onTouchStartHandler.bind(o),o.onMouseDownHandler=o.onMouseDownHandler.bind(o),o.draggingHandler=o.draggingHandler.bind(o),o.draggingEndedHandler=o.draggingEndedHandler.bind(o),o.update=o.update.bind(o),o}return(0,_.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.x===e.x&&this.state.y===e.y||this.setState({x:e.x,y:e.y})}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"draggingStartedHandler",value:function(e){this.dragging=!0;var t=e;this.isTouchEvent(e)&&(t=e.touches[0]),this.relativePos={x:t.pageX-this.state.x,y:t.pageY-this.state.y},cancelAnimationFrame(this.frameRequestId),this.frameRequestId=requestAnimationFrame(this.update)}},{key:"isTouchEvent",value:function(e){return(!e.pageX||!e.pageY)&&e.targetTouches&&e.targetTouches.length}},{key:"draggingHandler",value:function(e){var t=e;this.isTouchEvent(e)&&(t=e.touches[0]);var o=t.pageX-this.relativePos.x,n=t.pageY-this.relativePos.y;this.mousePos={x:o,y:n}}},{key:"draggingEndedHandler",value:function(){this.dragging=!1,this.mousePos=null,cancelAnimationFrame(this.frameRequestId),this.removeListeners(),this.props.onStop()}},{key:"onTouchStartHandler",value:function(e){e.preventDefault(),document.addEventListener("touchmove",this.draggingHandler),document.addEventListener("touchend",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"onMouseDownHandler",value:function(e){e.preventDefault(),document.addEventListener("mousemove",this.draggingHandler),document.addEventListener("mouseup",this.draggingEndedHandler),this.draggingStartedHandler(e)}},{key:"update",value:function(){if(!this.mousePos)return void(this.frameRequestId=requestAnimationFrame(this.update));var e=this.props.bounds,t=this.mousePos,o=t.x,n=t.y;e&&(o=Math.max(e.left,Math.min(e.right-this.props.width,o)),n=Math.max(e.top,Math.min(e.bottom-this.props.height,n))),this.dragging&&(this.frameRequestId=requestAnimationFrame(this.update)),this.props.onDrag(o,n),this.props.controlled||this.setState({x:o,y:n})}},{key:"removeListeners",value:function(){document.removeEventListener("mousemove",this.draggingHandler),document.removeEventListener("mouseup",this.draggingEndedHandler),document.removeEventListener("touchmove",this.draggingHandler),document.removeEventListener("touchend",this.draggingEndedHandler)}},{key:"render",value:function(){var e=(0,x.omit)(this.props,(0,r.default)(this.constructor.propTypes)),t={transform:"translate("+this.state.x+"px, "+this.state.y+"px)"};return(this.props.width||this.props.height)&&(t.width=this.props.width+"px",t.height=this.props.height+"px"),y.default.createElement("div",(0,s.default)({},e,{style:t,onMouseDown:this.onMouseDownHandler,onTouchStart:this.onTouchStartHandler}))}}]),t}(E.Component);k.propTypes={onDrag:v.default.func,onStop:v.default.func,width:v.default.number,height:v.default.number,x:v.default.number,y:v.default.number,controlled:v.default.bool,bounds:v.default.shape({top:v.default.number,left:v.default.number,bottom:v.default.number,right:v.default.number})},k.defaultProps={onDrag:x.noop,onStop:x.noop,width:0,height:0,x:0,y:0,controlled:!1,bounds:null},t.default=k,e.exports=t.default},"./client/components/drop-zone/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DropZone=void 0;var a=o("./node_modules/babel-runtime/core-js/array/from.js"),s=n(a),i=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/createClass.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=n(p),m=o("./node_modules/babel-runtime/helpers/inherits.js"),h=n(m),g=o("./node_modules/react-dom/index.js"),_=n(g),b=o("./node_modules/react/react.js"),v=n(b),E=o("./node_modules/prop-types/index.js"),y=n(E),x=o("./node_modules/react-redux/es/index.js"),k=o("./node_modules/classnames/index.js"),j=n(k),C=o("./node_modules/gridicons/build/index.js"),S=n(C),w=o("./node_modules/i18n-calypso/index.js"),R=o("./node_modules/lodash/lodash.js"),A=o("./client/components/root-child/index.jsx"),L=n(A),T=o("./client/state/ui/drop-zone/actions.js"),P=t.DropZone=function(e){function t(){var e,o,n,a;(0,d.default)(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return o=n=(0,f.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(l))),n.state={isDraggingOverDocument:!1,isDraggingOverElement:!1,lastVisibleState:!1},n.resetDragState=function(){(n.state.isDraggingOverDocument||n.state.isDraggingOverElement)&&(n.setState({isDraggingOverDocument:!1,isDraggingOverElement:!1}),n.toggleDropZoneReduxState(!1))},n.toggleMutationObserver=function(){n.disconnectMutationObserver(),n.state.isDraggingOverDocument&&(n.observer=new window.MutationObserver(n.detectNodeRemoval),n.observer.observe(document.body,{childList:!0,subtree:!0}))},n.disconnectMutationObserver=function(){n.observer&&(n.observer.disconnect(),delete n.observer)},n.detectNodeRemoval=function(e){e.forEach(function(e){e.removedNodes.length&&(n.dragEnterNodes=(0,R.without)(n.dragEnterNodes,(0,s.default)(e.removedNodes)))})},n.toggleDraggingOverDocument=function(e){"dragenter"!==e.type||(0,R.includes)(n.dragEnterNodes,e.target)?"dragleave"===e.type&&(n.dragEnterNodes=(0,R.without)(n.dragEnterNodes,e.target)):n.dragEnterNodes.push(e.target);var t=window.CustomEvent&&e instanceof window.CustomEvent?e.detail:e,o=n.props.onVerifyValidTransfer(t.dataTransfer),a=o&&n.dragEnterNodes.length;n.setState({isDraggingOverDocument:a,isDraggingOverElement:a&&(n.props.fullScreen||n.isWithinZoneBounds(t.clientX,t.clientY))}),window.CustomEvent&&e instanceof window.CustomEvent&&(n.dragEnterNodes=(0,R.without)(n.dragEnterNodes,window)),n.toggleDropZoneReduxState(!(!n.state.isDraggingOverDocument&&!n.state.isDraggingOverElement))},n.toggleDropZoneReduxState=function(e){n.state.lastVisibleState!==e&&(e?n.props.showDropZone(n.props.dropZoneName):n.props.hideDropZone(n.props.dropZoneName),n.setState({lastVisibleState:e}))},n.preventDefault=function(e){e.preventDefault()},n.isWithinZoneBounds=function(e,t){if(!n.refs.zone)return!1;var o=n.refs.zone.getBoundingClientRect();return o.bottom!==o.top&&o.left!==o.right&&(e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom)},n.onDrop=function(e){e.dataTransfer&&e.dataTransfer.files.length,n.resetDragState(),e.preventDefault(),(n.props.fullScreen||_.default.findDOMNode(n.refs.zone).contains(e.target))&&(n.props.onDrop(e),n.props.onVerifyValidTransfer(e.dataTransfer)&&(e.dataTransfer&&n.props.onFilesDrop(Array.prototype.slice.call(e.dataTransfer.files)),e.stopPropagation()))},n.renderContent=function(){var e=n.props.textLabel?n.props.textLabel:n.props.translate("Drop files to upload");return v.default.createElement("div",{className:"drop-zone__content"},n.props.children?n.props.children:v.default.createElement("div",null,v.default.createElement("span",{className:"drop-zone__content-icon"},n.props.icon),v.default.createElement("span",{className:"drop-zone__content-text"},e)))},a=o,(0,f.default)(n,a)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.dragEnterNodes=[],window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.onDrop),window.addEventListener("dragenter",this.toggleDraggingOverDocument),window.addEventListener("dragleave",this.toggleDraggingOverDocument),window.addEventListener("mouseup",this.resetDragState)}},{key:"componentDidUpdate",value:function(e,t){t.isDraggingOverDocument!==this.state.isDraggingOverDocument&&this.toggleMutationObserver()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragenter",this.toggleDraggingOverDocument),window.removeEventListener("dragleave",this.toggleDraggingOverDocument),window.removeEventListener("mouseup",this.resetDragState),this.disconnectMutationObserver()}},{key:"render",value:function(){var e=(0,j.default)("drop-zone",this.props.className,{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen}),t=v.default.createElement("div",{ref:"zone",className:e},this.renderContent());return this.props.fullScreen?v.default.createElement(L.default,null,t):t}}]),t}(v.default.Component);P.propTypes={className:y.default.string,fullScreen:y.default.bool,icon:y.default.node,onDrop:y.default.func,onVerifyValidTransfer:y.default.func,onFilesDrop:y.default.func,textLabel:y.default.string,translate:y.default.func,showDropZone:y.default.func.isRequired,hideDropZone:y.default.func.isRequired,dropZoneName:y.default.string},P.defaultProps={className:null,onDrop:R.noop,onVerifyValidTransfer:function(){return!0},onFilesDrop:R.noop,fullScreen:!1,icon:v.default.createElement(S.default,{icon:"cloud-upload",size:48}),translate:R.identity,dropZoneName:null};var N={showDropZone:T.showDropZone,hideDropZone:T.hideDropZone};t.default=(0,x.connect)(null,N)((0,w.localize)(P))},"./client/components/email-verification/email-verification-dialog/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/lodash/lodash.js"),v=o("./node_modules/i18n-calypso/index.js"),E=o("./node_modules/react-redux/es/index.js"),y=o("./client/components/dialog/index.jsx"),x=n(y),k=o("./client/components/button/index.jsx"),j=n(k),C=o("./client/components/spinner/index.jsx"),S=n(C),w=o("./client/state/current-user/selectors.js"),R=o("./client/state/current-user/email-verification/actions.js"),A=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.handleClose=function(){n.props.resetVerifyEmailState(),n.props.onClose()},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getResendButtonLabel",value:function(){return"sent"===this.props.emailVerificationStatus||"error"===this.props.emailVerificationStatus?this.props.translate("Email Sent"):"requesting"===this.props.emailVerificationStatus?_.default.createElement(S.default,{className:"email-verification-dialog__confirmation-dialog-spinner"}):this.props.translate("Resend Email")}},{key:"getDialogButtons",value:function(){return[_.default.createElement(j.default,{key:"resend",primary:!1,disabled:(0,b.includes)(["requesting","sent","error"],this.props.emailVerificationStatus),onClick:this.props.verifyEmail},this.getResendButtonLabel()),_.default.createElement(j.default,{key:"close",primary:!0,onClick:this.handleClose},this.props.translate("OK"))]}},{key:"render",value:function(){var e={confirmHeading:this.props.translate("Please verify your email address:"),confirmExplanation:this.props.translate("When you first signed up for a WordPress.com account we sent you an email. Please open it and click on the blue button to verify your email address."),confirmReasoning:this.props.translate("Verifying your email allows us to assist you if you ever lose access to your account in the future."),confirmEmail:this.props.translate("{{wrapper}}%(email)s{{/wrapper}} {{emailPreferences}}change{{/emailPreferences}}",{components:{wrapper:_.default.createElement("span",{className:"email-verification-dialog__confirmation-dialog-email-wrapper"}),emailPreferences:_.default.createElement("a",{href:"/me/account"})},args:{email:this.props.email}})};return _.default.createElement(x.default,{isVisible:!0,buttons:this.getDialogButtons(),additionalClassNames:"email-verification-dialog__confirmation-dialog is-narrow"},_.default.createElement("h1",{className:"email-verification-dialog__confirmation-dialog-heading is-variable-height"},e.confirmHeading),_.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-email"},e.confirmEmail),_.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-explanation"},e.confirmExplanation),_.default.createElement("p",{className:"email-verification-dialog__confirmation-dialog-reasoning"},e.confirmReasoning))}}]),t}(g.Component);A.propTypes={onClose:h.default.func,translate:h.default.func,email:h.default.string,emailVerificationStatus:h.default.string},A.defaultProps={onClose:b.noop},t.default=(0,E.connect)(function(e){return{email:(0,w.getCurrentUserEmail)(e),emailVerificationStatus:(0,b.get)(e,"currentUser.emailVerification.status")}},{verifyEmail:R.verifyEmail,resetVerifyEmailState:R.resetVerifyEmailState})((0,v.localize)(A)),e.exports=t.default},"./client/components/file-picker/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/lodash/lodash.js"),v=o("./node_modules/component-file-picker/index.js"),E=n(v),y=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return o.showPicker=o.showPicker.bind(o),o}return(0,f.default)(t,e),(0,d.default)(t,[{key:"showPicker",value:function(){this.props.onClick(),(0,E.default)((0,b.assign)({},this.props),this.props.onPick)}},{key:"render",value:function(){return _.default.createElement("span",{className:"file-picker",onClick:this.showPicker},this.props.children)}}]),t}(_.default.Component);t.default=y,y.displayName="FilePicker",y.propTypes={multiple:h.default.bool,directory:h.default.bool,accept:h.default.string,onClick:h.default.func,onPick:h.default.func},y.defaultProps={multiple:!1,directory:!1,accept:null,onClick:b.noop,onPick:b.noop},e.exports=t.default},"./client/components/forms/form-checkbox/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/extends.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=n(i),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/classnames/index.js"),c=n(u),p=function(e){var t=e.className,o=(0,r.default)(e,["className"]);return d.default.createElement("input",(0,s.default)({},o,{type:"checkbox",className:(0,c.default)(t,"form-checkbox")}))};t.default=p,e.exports=t.default},"./client/components/forms/form-tel-input/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.className,o=e.isError,n=e.isValid,a=(0,l.default)(e,["className","isError","isValid"]),s=(0,m.default)("form-tel-input",t,{"is-error":o,"is-valid":n});return u.default.createElement("input",(0,i.default)({},a,{type:"tel",pattern:"[0-9]*",className:s}))}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/helpers/extends.js"),i=n(s),r=o("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),l=n(r);t.default=a;var d=o("./node_modules/react/react.js"),u=n(d),c=o("./node_modules/prop-types/index.js"),p=n(c),f=o("./node_modules/classnames/index.js"),m=n(f);a.propTypes={className:p.default.string,isError:p.default.bool,isValid:p.default.bool},a.defaultProps={isError:!1,isValid:!1},e.exports=t.default},"./client/components/forms/form-textarea/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/extends.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/objectWithoutProperties.js"),r=n(i),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/classnames/index.js"),c=n(u),p=function(e){var t=e.className,o=e.isError,n=e.isValid,a=e.children,i=(0,r.default)(e,["className","isError","isValid","children"]);return d.default.createElement("textarea",(0,s.default)({},i,{className:(0,c.default)(t,"form-textarea",{"is-error":o,"is-valid":n})}),a)};t.default=p,e.exports=t.default},"./client/components/info-popover/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/react/react.js"),h=n(m),g=o("./node_modules/prop-types/index.js"),_=n(g),b=o("./node_modules/gridicons/build/index.js"),v=n(b),E=o("./node_modules/classnames/index.js"),y=n(E),x=o("./client/components/popover/index.jsx"),k=n(x),j=o("./client/lib/analytics/index.js"),C=n(j),S=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.state={showPopover:!1},n.handleClick=function(e){e.preventDefault(),n.setState({showPopover:!n.state.showPopover},n.recordStats)},n.handleClose=function(){return n.setState({showPopover:!1},n.recordStats)},n.recordStats=function(){var e=n.props,t=e.gaEventCategory,o=e.popoverName;if(t&&o){var a=n.state.showPopover?" Opened":" Closed";C.default.ga.recordEvent(t,"InfoPopover: "+o+a)}},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return h.default.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:(0,y.default)("info-popover",{is_active:this.state.showPopover},this.props.className)},h.default.createElement(v.default,{icon:this.props.icon,size:this.props.iconSize}),h.default.createElement(k.default,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:(0,y.default)("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}]),t}(m.Component);S.propTypes={autoRtl:_.default.bool,className:_.default.string,gaEventCategory:_.default.string,icon:_.default.string,iconSize:_.default.number,id:_.default.string,ignoreContext:_.default.shape({getDOMNode:_.default.func}),popoverName:_.default.string,position:_.default.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:_.default.string},S.defaultProps={autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom"},t.default=S,e.exports=t.default},"./client/components/section-header/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/react/react.js"),h=n(m),g=o("./node_modules/classnames/index.js"),_=n(g),b=o("./client/components/card/compact.jsx"),v=n(b),E=o("./client/components/count/index.jsx"),y=n(E),x=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),o=(0,_.default)(this.props.className,"section-header",{"is-empty":t});return h.default.createElement(v.default,{className:o,href:this.props.href},h.default.createElement("div",{className:"section-header__label"},h.default.createElement("span",{className:"section-header__label-text"},this.props.label),e&&h.default.createElement(y.default,{count:this.props.count})),h.default.createElement("div",{className:"section-header__actions"},this.props.children))}}]),t}(m.PureComponent);x.defaultProps={label:"",href:null},t.default=x,e.exports=t.default},"./client/components/sidebar-navigation/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/react-redux/es/index.js"),v=o("./node_modules/gridicons/build/index.js"),E=n(v),y=o("./client/state/document-head/selectors.js"),x=o("./client/state/ui/layout-focus/actions.js"),k=function(e){function t(e){(0,r.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return o.toggleSidebar=o.toggleSidebar.bind(o),o}return(0,f.default)(t,e),(0,d.default)(t,[{key:"toggleSidebar",value:function(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}},{key:"render",value:function(){return _.default.createElement("header",{className:"current-section"},_.default.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},_.default.createElement(E.default,{icon:"chevron-left"}),this.props.children,_.default.createElement("div",null,_.default.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),_.default.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}]),t}(_.default.Component);k.propTypes={title:h.default.string,linkClassName:h.default.string,sectionTitle:h.default.string,sectionName:h.default.string.isRequired,setLayoutFocus:h.default.func.isRequired},t.default=(0,b.connect)(function(e){return{title:(0,y.getDocumentHeadTitle)(e)}},{setLayoutFocus:x.setLayoutFocus})(k),e.exports=t.default},"./client/lib/application-passwords-data/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return this instanceof a?(this.data=null,this.newApplicationPassword=null,void(this.fetching=!1)):new a}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/lodash.js"),i=o("./node_modules/debug/browser.js"),r=n(i),l=o("./client/lib/mixins/emitter/index.js"),d=n(l),u=o("./node_modules/store/store.js"),c=n(u),p=o("./client/lib/wp/browser.js"),f=n(p),m=(0,r.default)("calypso:application-passwords-data"),h=f.default.undocumented();(0,d.default)(a.prototype),a.prototype.get=function(){return this.data||(m("First time loading ApplicationPasswords, check store"),this.data=c.default.get("wpcom_me_application_passwords")||[],this.fetch()),this.data},a.prototype.fetch=function(){this.fetching=!0,h.me().getApplicationPasswords(function(e,t){return e?void m("Something went wrong fetching application passwords."):(this.data=t.application_passwords,this.fetching=!1,c.default.set("wpcom_me_application_passwords",this.data),m("Application passwords successfully retrieved"),void this.emit("change"))}.bind(this))},a.prototype.revoke=function(e,t){h.me().revokeApplicationPassword(e,function(o,n){o&&"unknown_application_password"!==o.error||(this.data=(0,s.filter)(this.data,function(t){return parseInt(t.ID,10)!==e}),c.default.set("wpcom_me_application_passwords",this.data),this.emit("change")),t(o,n)}.bind(this))},a.prototype.create=function(e,t){h.me().createApplicationPassword(e,function(e,o){e?m("Creating application password failed."):(m("Application password successfully created"),this.newApplicationPassword=o,this.fetch()),t(e,o)}.bind(this))},a.prototype.hasNewPassword=function(){return!!this.newApplicationPassword},a.prototype.clearNewPassword=function(){this.newApplicationPassword=null,this.emit("change")},t.default=new a,e.exports=t.default},"./client/lib/connected-applications-data/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return this instanceof a?(this.data=[],this.initialized=!1,void(this.fetching=!1)):new a}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/lodash.js"),i=o("./node_modules/debug/browser.js"),r=n(i),l=o("./client/lib/mixins/emitter/index.js"),d=n(l),u=o("./client/lib/wp/browser.js"),c=n(u),p=(0,r.default)("calypso:connected-applications-data"),f=c.default.undocumented();(0,d.default)(a.prototype),a.prototype.get=function(){return this.initialized||this.fetch(),this.data},a.prototype.fetch=function(){this.fetching=!0,f.me().getConnectedApplications(function(e,t){return this.fetching=!1,e?void p("Something went wrong fetching connected applications."):(this.data=t.connected_applications,this.initialized=!0,p("Connected applications successfully retrieved"),void this.emit("change"))}.bind(this))},a.prototype.revoke=function(e,t){f.me().revokeApplicationConnection(e,function(o,n){return o?(p("Revoking application connection failed."),void t(o)):(this.data=(0,s.filter)(this.data,function(t){return parseInt(t.ID,10)!==e}),t(null,n),void this.emit("change"))}.bind(this))},a.prototype.getApplication=function(e){var t;return this.initialized?(t=(0,s.find)(this.data,function(t){return parseInt(e,10)===parseInt(t.ID,10);
}),"undefined"==typeof t&&this.fetch(),t):void this.fetch()},t.default=new a,e.exports=t.default},"./client/lib/safe-protocol-url/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,o=["host","hash","search","path"];return null===e||""===e||"undefined"==typeof e?null:(t=i.default.parse(e),/^\/[^\/]/.test(e)?e:"http:"===t.protocol||"https:"===t.protocol?e:i.default.format((0,a.assign)((0,a.pick)(t,o),{protocol:"http"})))};var a=o("./node_modules/lodash/lodash.js"),s=o("./node_modules/url/url.js"),i=n(s);e.exports=t.default},"./client/lib/two-step-authorization/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return this instanceof a?(this.data=null,this.initialized=!1,this.indvalidCode=!1,this.smsResendThrottled=!1,this.bumpMCStat=function(e){E.default.mc.bumpStat("2fa",e)},void this.fetch()):new a}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/babel-runtime/core-js/json/stringify.js"),i=n(s),r=o("./node_modules/debug/browser.js"),l=n(r),d=o("./client/lib/mixins/emitter/index.js"),u=n(d),c=o("./client/lib/user-settings/index.js"),p=n(c),f=o("./client/lib/application-passwords-data/index.js"),m=n(f),h=o("./client/lib/connected-applications-data/index.js"),g=n(h),_=o("./client/lib/user-profile-links/index.js"),b=n(_),v=o("./client/lib/analytics/index.js"),E=n(v),y=o("./client/lib/wp/browser.js"),x=n(y),k=(0,l.default)("calypso:two-step-authorization"),j=x.default.undocumented();a.prototype.fetch=function(e){j.me().getTwoStep(function(t,o){t||(this.data=o,this.isReauthRequired()&&this.isTwoStepSMSEnabled()&&!this.initialized&&this.sendSMSCode(),this.isReauthRequired()&&!this.initialized&&this.bumpMCStat("reauth-required"),this.initialized=!0,this.emit("change")),e&&e(t,o)}.bind(this))},a.prototype.validateCode=function(e,t){j.me().validateTwoStepCode(e,function(o,n){!o&&n.success?(this.isReauthRequired()&&(p.default.fetchSettings(),m.default.fetch(),g.default.fetch(),b.default.reAuthRequired=!1,b.default.fetchProfileLinks()),this.data.two_step_reauthorization_required=!1,this.data.two_step_authorization_expires_soon=!1,this.invalidCode=!1,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-successful":"disable-2fa-successful"):this.bumpMCStat("reauth-successful"),this.emit("change")):o||(this.invalidCode=!0,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-failed-invalid-code":"disable-2fa-failed-invalid-code"):this.bumpMCStat("reauth-failed-invalid-code")),t&&t(o,n)}.bind(this))},a.prototype.sendSMSCode=function(e){j.me().sendSMSValidationCode(function(t,o){t?(k("Sending SMS code failed: "+(0,i.default)(t)),t.error&&"rate_limited"===t.error&&(k("SMS resend throttled."),this.bumpMCStat("sms-code-send-throttled"),this.smsResendThrottled=!0)):(this.smsResendThrottled=!1,this.bumpMCStat("sms-code-send-success")),this.emit("change"),e&&e(t,o)}.bind(this))},a.prototype.backupCodes=function(e){j.me().backupCodes(function(t,o){t?k("Fetching Backup Codes failed: "+(0,i.default)(t)):this.bumpMCStat("new-backup-codes-success"),e&&e(t,o)}.bind(this))},a.prototype.validateBackupCode=function(e,t){var o={code:e,action:"create-backup-receipt"};j.me().validateTwoStepCode(o,function(e,o){e&&k("Validating Two Step Code failed: "+(0,i.default)(e)),o&&this.bumpMCStat(o.success?"backup-code-validate-success":"backup-code-validate-failure"),t&&t(e,o)}.bind(this))},a.prototype.getAppAuthCodes=function(e){j.me().getAppAuthCodes(function(t,o){t&&k("Getting App Auth Codes failed: "+(0,i.default)(t)),e&&e(t,o)})},a.prototype.codeValidationFailed=function(){return this.invalidCode},a.prototype.isSMSResendThrottled=function(){return this.smsResendThrottled},a.prototype.isReauthRequired=function(){return!!this.data&&this.data.two_step_reauthorization_required},a.prototype.authExpiresSoon=function(){return!!this.data&&this.data.two_step_authorization_expires_soon},a.prototype.isTwoStepSMSEnabled=function(){return!!this.data&&this.data.two_step_sms_enabled},a.prototype.getSMSLastFour=function(){return this.data?this.data.two_step_sms_last_four:null},(0,u.default)(a.prototype),t.default=new a,e.exports=t.default},"./client/lib/user-profile-links/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return this instanceof a?(this.profileLinks=!1,this.initialized=!1,this.reAuthRequired=!1,void(this.fetchingProfileLinks=!1)):new a}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/lodash/lodash.js"),i=o("./node_modules/debug/browser.js"),r=n(i),l=o("./client/lib/wp/browser.js"),d=n(l),u=o("./client/lib/mixins/emitter/index.js"),c=n(u),p=(0,r.default)("calypso:user:profile-links");(0,c.default)(a.prototype),a.prototype.hasProfileLinks=function(){return!!this.profileLinks},a.prototype.isSiteInProfileLinks=function(e){return!!this.initialized&&(0,s.some)(this.profileLinks,function(t){return e.domain===t.value.replace(/^.*:\/\//,"")})},a.prototype.getProfileLinks=function(){return this.profileLinks||this.fetchProfileLinks(),this.profileLinks},a.prototype.fetchProfileLinks=function(){this.fetchingProfileLinks||this.reAuthRequired||(this.fetchingProfileLinks=!0,p("Fetching profile links for user"),d.default.me().settings().profileLinks().get(function(e,t){return this.fetchingProfileLinks=!1,e?(p("Something went wrong fetching the profile links for the user."),"error"in e&&"reauthorization_required"===e.error&&(this.reAuthRequired=!0),void this.emit("change")):(this.profileLinks=t.profile_links,this.initialized=!0,this.emit("change"),void p("Profile links successfully retrieved"))}.bind(this)))},a.prototype.addProfileLinks=function(e,t){d.default.me().settings().profileLinks().add(e,function(e,o){o&&o.profile_links&&(this.profileLinks=o.profile_links,this.emit("change")),t(e,o)}.bind(this))},a.prototype.deleteProfileLinkBySlug=function(e,t){d.default.me().settings().profileLinks().del(e,function(o,n){o||(this.profileLinks=(0,s.reject)(this.profileLinks,{link_slug:e}),this.emit("change")),t(o,n)}.bind(this))},t.default=new a,e.exports=t.default},"./client/me/constants.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/i18n-calypso/index.js"),s=n(a);t.default={sixDigit2faPlaceholder:s.default.translate("e.g. %(example)s",{args:{example:"123456"}}),sevenDigit2faPlaceholder:s.default.translate("e.g. %(example)s",{args:{example:"1234567"}}),eightDigitBackupCodePlaceholder:s.default.translate("e.g. %(example)s",{args:{example:"12345678"}})},e.exports=t.default},"./client/me/controller.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/react-dom/index.js"),s=n(a),i=o("./node_modules/react/react.js"),r=n(i),l=o("./node_modules/lodash/lodash.js"),d=o("./node_modules/page/index.js"),u=n(d),c=o("./node_modules/i18n-calypso/index.js"),p=n(c),f=o("./client/lib/analytics/index.js"),m=n(f),h=o("./client/lib/route/index.js"),g=n(h),_=o("./client/lib/user-settings/index.js"),b=n(_),v=o("./client/state/document-head/actions.js"),E=o("./client/state/ui/actions.js"),y=o("./client/lib/react-helpers/index.js"),x="Me";t.default={sidebar:function(e,t){var n=o("./client/me/sidebar/index.jsx");(0,y.renderWithReduxStore)(r.default.createElement(n,{context:e}),document.getElementById("secondary"),e.store),t()},profile:function(e){var t=o("./client/me/profile/index.jsx"),n=e.path;e.store.dispatch((0,v.setDocumentHeadTitle)(p.default.translate("My Profile",{textOnly:!0}))),m.default.pageView.record(n,x+" > My Profile"),(0,y.renderWithReduxStore)(r.default.createElement(t,{userSettings:b.default,path:e.path}),document.getElementById("primary"),e.store)},apps:function(e){var t=o("./client/me/get-apps/index.jsx").default,n=e.path;e.store.dispatch((0,v.setDocumentHeadTitle)(p.default.translate("Get Apps",{textOnly:!0}))),m.default.pageView.record(n,x+" > Get Apps"),(0,y.renderWithReduxStore)(r.default.createElement(t,{userSettings:b.default,path:e.path}),document.getElementById("primary"),e.store)},nextSteps:function(e){var t=g.default.sectionify(e.path),n=o("./client/me/next-steps/index.jsx"),a="welcome"===e.params.welcome;e.store.dispatch((0,v.setDocumentHeadTitle)(p.default.translate("Next Steps",{textOnly:!0}))),a&&(s.default.unmountComponentAtNode(document.getElementById("secondary")),e.store.dispatch((0,E.setSection)(null,{hasSidebar:!1}))),m.default.tracks.recordEvent("calypso_me_next_view",{is_welcome:a}),m.default.pageView.record(t,x+" > Next"),(0,y.renderWithReduxStore)(r.default.createElement(n,{path:e.path,isWelcome:a}),document.getElementById("primary"),e.store)},nextStepsWelcomeRedirect:function(e,t){return(0,l.includes)(e.path,"?welcome")?u.default.redirect("/me/next/welcome"):void t()},profileRedirect:function(){u.default.redirect("/me")},trophiesRedirect:function(){u.default.redirect("/me")},findFriendsRedirect:function(){u.default.redirect("/me")}},e.exports=t.default},"./client/me/form-base/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/json/stringify.js"),s=n(a),i=o("./node_modules/debug/browser.js"),r=n(i),l=o("./client/notices/index.js"),d=n(l),u=(0,r.default)("calypso:me:form-base");t.default={componentDidMount:function(){this.props.userSettings.getSettings()},componentWillUnmount:function(){this.props.userSettings.unsavedSettings={}},getDisabledState:function(){return this.state.submittingForm},componentWillReceiveProps:function(e){e.showNoticeInitially&&this.setState({showNotice:e.showNoticeInitially})},componentWillUpdate:function(){this.showNotice()},getInitialState:function(){return{redirect:!1,submittingForm:!1,changingUsername:!1,usernameAction:"new",showNotice:!1}},showNotice:function(){this.props.userSettings.initialized&&this.state.showNotice&&(d.default.clearNotices("notices"),d.default.success(this.props.translate("Settings saved successfully!")),this.state.showNotice=!1)},getSetting:function(e){return this.props.userSettings.getSetting(e)||""},toggleSetting:function(e){var t=e.currentTarget.name;this.props.userSettings.updateSetting(t,!this.getSetting(t))},updateSetting:function(e){var t=e.currentTarget,o=t.name,n=t.value;this.props.userSettings.updateSetting(o,n)},submitForm:function(e){e.preventDefault(),u("Submitting form"),this.setState({submittingForm:!0}),this.props.userSettings.saveSettings(function(e,t){if(this.setState({submittingForm:!1}),e)u("Error saving settings: "+(0,s.default)(e)),e.message?d.default.error(e.message):d.default.error(this.props.translate("There was a problem saving your changes."));else{if(this.props.markSaved&&this.props.markSaved(),this.state&&this.state.redirect)return void(window.location=this.state.redirect+"?updated=success");this.setState({showNotice:!0}),this.showNotice(),u("Settings saved successfully "+(0,s.default)(t))}}.bind(this))}},e.exports=t.default},"./client/me/get-apps/desktop-download-card.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./node_modules/react-redux/es/index.js"),v=o("./node_modules/lodash/lodash.js"),E=o("./node_modules/i18n-calypso/index.js"),y=o("./client/components/card/index.jsx"),x=n(y),k=o("./client/components/button/index.jsx"),j=n(k),C=o("./client/state/analytics/actions.js"),S="https://apps.wordpress.com/d/windows?ref=getapps",w="https://apps.wordpress.com/d/osx?ref=getapps",R="https://apps.wordpress.com/d/linux?ref=getapps",A="https://apps.wordpress.com/d/linux-deb?ref=getapps",L=function(e){function t(){return(0,r.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getDescription",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":case"Linux i686":case"Linux i686 on x86_64":return t("A desktop app that gives WordPress a permanent home in your dock.");default:return t("A desktop app that gives WordPress a permanent home in your taskbar.")}}},{key:"getRequirementsText",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":return t("Requires Mac OS X 10.11+. ");case"Linux i686":case"Linux i686 on x86_64":return t("Requires a 64-bit kernel. ");default:return t("Requires Windows 7+. ")}}},{key:"getTranslateComponents",value:function(e){switch(e){case"MacIntel":return{firstAvailableLink:this.getLinkAnchorTag(S),secondAvailableLink:this.getLinkAnchorTag(R),thirdAvailableLink:this.getLinkAnchorTag(A)};case"Linux i686":case"Linux i686 on x86_64":return{firstAvailableLink:this.getLinkAnchorTag(A),secondAvailableLink:this.getLinkAnchorTag(S),thirdAvailableLink:this.getLinkAnchorTag(w)};default:return{firstAvailableLink:this.getLinkAnchorTag(w),secondAvailableLink:this.getLinkAnchorTag(R),thirdAvailableLink:this.getLinkAnchorTag(A)}}}},{key:"getAlsoAvailableText",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":return t("Also available for: {{firstAvailableLink}}Windows{{/firstAvailableLink}}, {{secondAvailableLink}}Linux (.tar.gz){{/secondAvailableLink}}, {{thirdAvailableLink}}Linux (.deb){{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)});case"Linux i686":case"Linux i686 on x86_64":return t("Also available for: {{firstAvailableLink}}Linux (.deb){{/firstAvailableLink}}, {{secondAvailableLink}}Windows{{/secondAvailableLink}}, {{thirdAvailableLink}}Mac{{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)});default:return t("Also available for: {{firstAvailableLink}}MacOS{{/firstAvailableLink}}, {{secondAvailableLink}}Linux (.tar.gz){{/secondAvailableLink}}, {{thirdAvailableLink}}Linux (.deb){{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)})}}},{key:"getButtonClickHandler",value:function(e){var t=this.props,o=t.trackWindowsClick,n=t.trackMacClick,a=t.trackLinuxTarClick,s=t.trackLinuxDebClick;switch(e){case"MacIntel":return n;case"Linux i686":return a;case"Linux i686 on x86_64":return s;default:return o}}},{key:"getButtonLink",value:function(e){switch(e){case"MacIntel":return w;case"Linux i686":case"Linux i686 on x86_64":return R;default:return S}}},{key:"getCardTitle",value:function(e){var t=this.props.translate;switch(e){case"MacIntel":return t("Desktop App for Mac");case"Linux i686":case"Linux i686 on x86_64":return t("Desktop App for Linux");default:return t("Desktop App for Windows")}}},{key:"getLinkAnchorTag",value:function(e){var t=this.props,o=t.trackWindowsClick,n=t.trackMacClick,a=t.trackLinuxTarClick,s=t.trackLinuxDebClick;switch(e){case w:return _.default.createElement("a",{href:e,onClick:n});case R:return _.default.createElement("a",{href:e,onClick:a});case A:return _.default.createElement("a",{href:e,onClick:s});default:return _.default.createElement("a",{href:e,onClick:o})}}},{key:"render",value:function(){var e=this.props.translate,t=!!(navigator.platform&&navigator.platform.length>0)&&navigator.platform;return _.default.createElement(x.default,{className:"get-apps__desktop"},_.default.createElement("div",{className:"get-apps__card-text"},_.default.createElement("h3",{className:"get-apps__card-title"},this.getCardTitle(t)),_.default.createElement("p",{className:"get-apps__description"},this.getDescription(t)),_.default.createElement("p",{className:"get-apps__also-available"},this.getRequirementsText(t),this.getAlsoAvailableText(t))),_.default.createElement(j.default,{className:"get-apps__desktop-button",href:this.getButtonLink(t),onClick:this.getButtonClickHandler(t)},e("Download")))}}]),t}(g.Component);L.propTypes={translate:h.default.func,trackWindowsClick:h.default.func,trackMacClick:h.default.func,trackLinuxTarClick:h.default.func,trackLinuxDebClick:h.default.func},L.defaultProps={translate:v.identity,trackWindowsClick:v.noop,trackMacClick:v.noop,trackLinuxTarClick:v.noop,trackLinuxDebClick:v.noop};var T={trackWindowsClick:function(){return(0,C.recordTracksEvent)("calypso_app_download_windows_click")},trackMacClick:function(){return(0,C.recordTracksEvent)("calypso_app_download_mac_click")},trackLinuxTarClick:function(){return(0,C.recordTracksEvent)("calypso_app_download_linux_tar_click")},trackLinuxDebClick:function(){return(0,C.recordTracksEvent)("calypso_app_download_linux_deb_click")}};t.default=(0,b.connect)(null,T)((0,E.localize)(L)),e.exports=t.default},"./client/me/get-apps/illustration.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/react/react.js"),s=n(a),i=o("./node_modules/i18n-calypso/index.js"),r=function(e){var t=e.translate;return s.default.createElement("div",{className:"get-apps__illustration"},s.default.createElement("img",{src:"/calypso/images/illustrations/get-apps-banner.svg",alt:t("Groups of people looking at WordPress mobile apps.")}),s.default.createElement("h2",{className:"get-apps__illustration-heading"},t("Inspiration strikes any time, anywhere.")),s.default.createElement("p",{className:"get-apps__illustration-tagline"},t("Get WordPress apps for all your screens.")))};t.default=(0,i.localize)(r),e.exports=t.default},"./client/me/get-apps/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GetApps=void 0;var a=o("./node_modules/react/react.js"),s=n(a),i=o("./client/me/sidebar-navigation/sidebar-navigation.jsx"),r=n(i),l=o("./client/components/main/index.jsx"),d=n(l),u=o("./client/me/get-apps/illustration.jsx"),c=n(u),p=o("./client/me/get-apps/desktop-download-card.jsx"),f=n(p),m=o("./client/me/get-apps/mobile-download-card.jsx"),h=n(m),g=t.GetApps=function(){return s.default.createElement(d.default,{className:"get-apps"},s.default.createElement(r.default,null),s.default.createElement(c.default,null),s.default.createElement(h.default,null),s.default.createElement(f.default,null))};t.default=g},"./client/me/get-apps/mobile-download-card.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/prop-types/index.js"),s=n(a),i=o("./node_modules/react/react.js"),r=n(i),l=o("./node_modules/react-redux/es/index.js"),d=o("./node_modules/i18n-calypso/index.js"),u=o("./node_modules/lodash/lodash.js"),c=o("./client/components/card/index.jsx"),p=n(c),f=o("./client/state/analytics/actions.js"),m=function(e){var t=e.translate,o=e.trackIosClick,n=e.trackAndroidClick;return r.default.createElement(p.default,{className:"get-apps__mobile"},r.default.createElement("div",{className:"get-apps__card-text"},r.default.createElement("h3",{className:"get-apps__card-title"},t("Mobile Apps")),r.default.createElement("p",{className:"get-apps__description"},t("WordPress at your fingertips."))),r.default.createElement("div",{className:"get-apps__badges"},r.default.createElement("a",{href:"https://itunes.apple.com/us/app/wordpress/id335703880?mt=8",onClick:o},r.default.createElement("img",{src:"/calypso/images/me/get-apps-app-store.png",title:t("Download the WordPress iOS mobile app."),alt:t("Apple App Store download badge")})),r.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=org.wordpress.android",onClick:n},r.default.createElement("img",{src:"/calypso/images/me/get-apps-google-play.png",title:t("Download the WordPress Android mobile app."),alt:t("Google Play Store download badge")}))))};m.propTypes={translate:s.default.func,trackIosClick:s.default.func,trackAndroidClick:s.default.func},m.defaultProps={translate:u.identity,trackIosClick:u.noop,trackAndroidClick:u.noop};var h={trackIosClick:function(){return(0,f.recordTracksEvent)("calypso_app_download_ios_click")},trackAndroidClick:function(){return(0,f.recordTracksEvent)("calypso_app_download_android_click")}};t.default=(0,l.connect)(null,h)((0,d.localize)(m)),e.exports=t.default},"./client/me/index.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){s.default.isEnabled("me/my-profile")&&((0,r.default)("/me",d.default.sidebar,d.default.profile),(0,r.default)("/me/profile",d.default.profileRedirect),(0,r.default)("/me/public-profile",d.default.profileRedirect)),s.default.isEnabled("me/next-steps")&&(0,r.default)("/me/next/:welcome?",d.default.sidebar,d.default.nextStepsWelcomeRedirect,d.default.nextSteps),s.default.isEnabled("me/trophies")||(0,r.default)("/me/trophies",d.default.trophiesRedirect),s.default.isEnabled("me/find-friends")||(0,r.default)("/me/find-friends",d.default.findFriendsRedirect),(0,r.default)("/me/get-apps",d.default.sidebar,d.default.apps)};var a=o("./client/config/index.js"),s=n(a),i=o("./node_modules/page/index.js"),r=n(i),l=o("./client/me/controller.js"),d=n(l);e.exports=t.default},"./client/me/next-steps/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/react/react.js"),h=n(m),g=o("./node_modules/react-redux/es/index.js"),_=o("./node_modules/i18n-calypso/index.js"),b=o("./client/me/sidebar-navigation/sidebar-navigation.jsx"),v=n(b),E=o("./client/me/next-steps/next-steps-box.jsx"),y=n(E),x=o("./client/me/next-steps/steps.js"),k=n(x),j=o("./client/state/selectors/get-newest-site.js"),C=n(j),S=o("./client/state/selectors/user-has-any-paid-plans.js"),w=n(S),R=o("./client/state/analytics/actions.js"),A=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.recordEvent=function(e){var t=n.props,o=t.isWelcome,a=t.recordGoogleEvent,s=t.recordTracksEvent;a("Me > Next > Welcome Message",e.action),s("calypso_me_next_welcome_click",{link:e.tracks,is_welcome:o})},n.recordBloggingUniversityLinkClick=function(){n.recordEvent({tracks:"blogging_course",action:"Clicked Blogging University Link"})},n.recordDocsLinkClick=function(){n.recordEvent({tracks:"documentation",action:"Clicked Documentation Link"})},n.recordDismissLinkClick=function(){n.recordEvent({tracks:"dismiss",action:"Clicked Dismiss Link"})},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillUnmount",value:function(){window.scrollTo(0,0)}},{key:"renderMeSidebar",value:function(){if(!this.props.isWelcome)return h.default.createElement(v.default,null)}},{key:"renderIntroMessage",value:function(){var e=this.props,t=e.isWelcome,o=e.translate;if(t)return h.default.createElement("div",{className:"next-steps__intro"},h.default.createElement("h3",{className:"next-steps__title"},o("Thanks for signing up for WordPress.com.")),h.default.createElement("p",{className:"next-steps__intro"},o("Next you can take any of the following steps, join a {{bloggingUniversityLink}}guided blogging course{{/bloggingUniversityLink}}, or check out our {{docsLink}}support documentation{{/docsLink}}.",{components:{bloggingUniversityLink:h.default.createElement("a",{href:"https://bloggingu.wordpress.com/",target:"_blank",rel:"noopener noreferrer",onClick:this.recordBloggingUniversityLinkClick}),docsLink:h.default.createElement("a",{href:"http://en.support.wordpress.com/",target:"_blank",rel:"noopener noreferrer",onClick:this.recordDocsLinkClick})}})))}},{key:"renderOutroMessage",value:function(){var e=this.props,t=e.isWelcome,o=e.newestSite,n=e.translate;if(t){var a="/stats/insights/"+(o?o.slug:"");return h.default.createElement("div",{className:"next-steps__outro"},h.default.createElement("p",null,n("If you want you can {{a}}skip these steps{{/a}}. You can come back to this page any time.",{components:{a:h.default.createElement("a",{href:a,onClick:this.recordDismissLinkClick})}})))}}},{key:"renderSteps",value:function(){var e=this.props,t=e.hasPlan,o=e.isWelcome,n=e.newestSite,a=k.default.defaultSequence;return t&&(a=k.default.hasPlanSequence),h.default.createElement("div",{className:"next-steps__steps"},a.map(function(e,t){var a=k.default.definitions(n)[e];return h.default.createElement(y.default,{key:e,stepName:e,step:a,primary:0===t,isWelcome:o})}))}},{key:"render",value:function(){return h.default.createElement("div",{className:"main main-column next-steps"},this.renderMeSidebar(),this.renderIntroMessage(),this.renderSteps(),this.renderOutroMessage())}}]),t}(h.default.Component);t.default=(0,g.connect)(function(e){return{newestSite:(0,C.default)(e),hasPlan:(0,w.default)(e)}},{recordGoogleEvent:R.recordGoogleEvent,recordTracksEvent:R.recordTracksEvent})((0,_.localize)(A)),e.exports=t.default},"./client/me/next-steps/next-steps-box.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/react/react.js"),h=n(m),g=o("./client/lib/analytics/index.js"),_=n(g),b=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.recordEvent=function(){_.default.ga.recordEvent("Me > Next > Box",n.props.stepName),_.default.tracks.recordEvent("calypso_me_next_click",{module:n.props.stepName,is_welcome:n.props.isWelcome})},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e="next-steps-box",t="next-steps-box__step-body",o="button";return this.props.primary&&(e+=" is-primary",t+=" is-primary",o+=" is-primary"),h.default.createElement("div",{className:e},h.default.createElement("div",{className:"next-steps-box__step-header"},h.default.createElement("h2",null,this.props.step.title)),h.default.createElement("div",{className:t},this.props.step.body,h.default.createElement("div",{className:"next-steps-box__step-action"},h.default.createElement("a",{className:o,href:this.props.step.buttonURL,onClick:this.recordEvent},this.props.step.buttonText))))}}]),t}(h.default.Component);b.displayName="NextStepsBox",t.default=b,e.exports=t.default},"./client/me/next-steps/steps.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return e?e.jetpack?e.options.admin_url+"customize.php":"/customize/"+e.slug:"/customize/"}Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/react/react.js"),i=n(s),r=o("./node_modules/gridicons/build/index.js"),l=n(r),d=o("./node_modules/i18n-calypso/index.js"),u=n(d),c=o("./client/lib/paths/index.js"),p=n(c),f=o("./client/config/index.js"),m=n(f);t.default={defaultSequence:["customize","theme","plans","post","page"],hasPlanSequence:["customize","theme","post","page","follow"],userOnly:["site","profile","follow"],definitions:function(e){return{post:{title:u.default.translate("Start Your First Post"),body:u.default.translate("{{p1}}Start blogging right away by writing your first post.{{/p1}}{{p2}}You can create new posts by clicking the {{pencil}}{{/pencil}} at the top of the screen.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null),pencil:i.default.createElement(l.default,{icon:"create",size:18})}}),buttonText:u.default.translate("Start a Post"),buttonURL:p.default.newPost(e)},theme:{title:u.default.translate("Select a Theme"),body:u.default.translate("{{p1}}The theme is the look and feel of your WordPress. A theme doesn't change your content, just the way it is presented.{{/p1}}{{p2}}Choose a theme based on your taste. You can always change it later.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Select a Theme"),buttonURL:"/themes/"+(e?e.slug:"")},customize:{title:u.default.translate("Customize Your Site"),body:u.default.translate("{{p1}}You can use the Customizer to add header and background images, or tweak your theme.  {{/p1}}{{p2}}You can find the Customizer in My Sites.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Customize Your Site"),buttonURL:a(e)},plans:{title:u.default.translate("Add Features with a Plan"),body:u.default.translate("{{p1}}Plans upgrade your WordPress with storage, design options, and a custom domain.{{/p1}}{{p2}}A plan will also remove ads and enable audio and video uploads.{{/p2}}",{comment:"p1 and p2 are paragraph tags",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Add a Plan"),buttonURL:"/plans/"+(e?e.slug:"")},page:{title:u.default.translate("Create a Page"),body:u.default.translate("{{p1}}Pages are sections of your site that contain information for your visitors.{{/p1}}{{p2}}Think about creating an About or Contact Us page to get started.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Create a Page"),buttonURL:p.default.newPage(e)},site:{title:u.default.translate("Create a Site"),body:u.default.translate("{{p1}}Start a new WordPress site or blog.{{/p1}}{{p2}}Your own WordPress is free and a great way to create a home on the web.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Create a Site"),buttonURL:(0,m.default)("signup_url")},profile:{title:u.default.translate("Complete Your Profile"),body:u.default.translate("{{p1}}Your profile is how other users see you.{{/p1}}{{p2}}Share a blurb about yourself to let others know what you're all about.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Complete Your Profile"),buttonURL:"/me"},follow:{title:u.default.translate("Follow Some Blogs"),body:u.default.translate("{{p1}}Follow some other sites to stay informed and find inspiration.{{/p1}}{{p2}}All of the content you follow shows up in your Reader.{{/p2}}",{comment:"p1 and p2 are paragraph tags.",components:{p1:i.default.createElement("p",null),p2:i.default.createElement("p",null)}}),buttonText:u.default.translate("Follow Some Blogs"),buttonURL:"/recommendations/"}}}},e.exports=t.default},"./client/me/profile-gravatar/index.jsx":function(e,t,o){
"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/react/react.js"),h=n(m),g=o("./node_modules/i18n-calypso/index.js"),_=o("./node_modules/react-redux/es/index.js"),b=o("./client/components/animate/index.jsx"),v=n(b),E=o("./client/components/gravatar/index.jsx"),y=n(E),x=o("./client/state/analytics/actions.js"),k=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.recordGravatarMisclick=function(){n.props.recordGoogleEvent("Me","Clicked on Unclickable Gravatar Image in Sidebar")},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=400;return h.default.createElement("div",{className:"profile-gravatar"},h.default.createElement("div",{onClick:this.recordGravatarMisclick},h.default.createElement(v.default,{type:"appear"},h.default.createElement(y.default,{user:this.props.user,size:150,imgSize:e}))),h.default.createElement("h2",{className:"profile-gravatar__user-display-name"},this.props.user.display_name),h.default.createElement("div",{className:"profile-gravatar__user-secondary-info"},"@",this.props.user.username))}}]),t}(m.Component);t.default=(0,_.connect)(null,{recordGoogleEvent:x.recordGoogleEvent})((0,g.localize)(k)),e.exports=t.default},"./client/me/profile-link/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/prop-types/index.js"),s=n(a),i=o("./node_modules/react/react.js"),r=n(i),l=o("./node_modules/create-react-class/index.js"),d=n(l),u=o("./node_modules/classnames/index.js"),c=n(u),p=o("./node_modules/gridicons/build/index.js"),f=n(p),m=o("./client/lib/safe-protocol-url/index.js"),h=n(m),g=o("./client/me/event-recorder/index.js"),_=n(g),b=o("./client/lib/url/index.js"),v=o("./client/components/button/index.jsx"),E=n(v);t.default=(0,d.default)({displayName:"ProfileLink",mixins:[_.default],getDefaultProps:function(){return{imageSize:100,title:"",url:"",slug:"",isPlaceholder:!1}},propTypes:{imageSize:s.default.number,title:s.default.string.isRequired,url:s.default.string.isRequired,slug:s.default.string.isRequired},renderRemove:function(){return r.default.createElement(E.default,{borderless:!0,icon:!0,className:"profile-link__remove",onClick:this.recordClickEvent("Remove Link Next to Site",this.props.onRemoveLink)},r.default.createElement(f.default,{icon:"cross"}))},render:function(){var e=(0,c.default)({"profile-link":!0,"is-placeholder":this.props.isPlaceholder}),t="//s1.wp.com/mshots/v1/"+encodeURIComponent(this.props.url)+"?w="+this.props.imageSize+"&h=64",o=this.props.isPlaceholder?null:(0,h.default)(this.props.url);return r.default.createElement("li",{className:e},this.props.isPlaceholder?r.default.createElement("div",{className:"profile-link__image-link"}):r.default.createElement("a",{href:o,className:"profile-link__image-link",target:"_blank",rel:"noopener noreferrer",onClick:this.recordClickEvent("Profile Links Site Images Link")},r.default.createElement("img",{className:"profile-link__image",src:t})),r.default.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:this.recordClickEvent("Profile Links Site Link")},r.default.createElement("span",{className:"profile-link__title"},this.props.title),r.default.createElement("span",{className:"profile-link__url"},(0,b.withoutHttp)(this.props.url))),this.props.isPlaceholder?null:this.renderRemove())}}),e.exports=t.default},"./client/me/profile-links-add-other/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/defineProperty.js"),s=n(a),i=o("./node_modules/react/react.js"),r=n(i),l=o("./node_modules/create-react-class/index.js"),d=n(l),u=o("./node_modules/i18n-calypso/index.js"),c=o("./client/components/forms/form-fieldset/index.jsx"),p=n(c),f=o("./client/components/forms/form-text-input/index.jsx"),m=n(f),h=o("./client/components/forms/form-button/index.jsx"),g=n(h),_=o("./client/me/event-recorder/index.js"),b=n(_),v=o("./client/components/notice/index.jsx"),E=n(v),y=(0,d.default)({displayName:"ProfileLinksAddOther",mixins:[b.default],getInitialState:function(){return{title:"",value:"",lastError:!1}},getFormDisabled:function(){var e=this.state.value.trim();return!this.state.title.trim()||!e||(-1!==e.indexOf(" ")||(!e.match(/[a-zA-z0-9]+\.[a-zA-z]{2,}/)||!(!e.match(/^.*:\/\//)||e.match(/^https?:\/\//))))},onSubmit:function(e){e.preventDefault(),this.getFormDisabled()||this.props.userProfileLinks.addProfileLinks([{title:this.state.title.trim(),value:this.state.value.trim()}],this.onSubmitResponse)},onCancel:function(e){e.preventDefault(),this.props.onCancel()},onSubmitResponse:function(e,t){e?this.setState({lastError:this.props.translate("Unable to add link right now. Please try again later.")}):t.duplicate?this.setState({lastError:this.props.translate("That link is already in your profile links. No changes were made.")}):t.malformed?this.setState({lastError:this.props.translate("An unexpected error occurred. Please try again later.")}):this.props.onSuccess()},clearLastError:function(){this.setState({lastError:!1})},possiblyRenderError:function(){return this.state.lastError?r.default.createElement(E.default,{className:"profile-links-add-other__error",status:"is-error",onDismissClick:this.clearLastError,text:this.state.lastError}):null},render:function(){return r.default.createElement("form",{className:"profile-links-add-other",onSubmit:this.onSubmit},r.default.createElement("p",null,this.props.translate("Please enter the URL and description of the site you want to add to your profile.")),this.possiblyRenderError(),r.default.createElement(p.default,null,r.default.createElement(m.default,{className:"profile-links-add-other__value",placeholder:this.props.translate("Enter a URL"),onFocus:this.recordFocusEvent("Add Other Site URL Field"),name:"value",value:this.state.value,onChange:this.handleChange}),r.default.createElement(m.default,{className:"profile-links-add-other__title",placeholder:this.props.translate("Enter a description"),onFocus:this.recordFocusEvent("Add Other Site Description Field"),name:"title",value:this.state.title,onChange:this.handleChange}),r.default.createElement(g.default,{className:"profile-links-add-other__add",disabled:this.getFormDisabled(),onClick:this.recordClickEvent("Save Other Site Button")},this.props.translate("Add Site")),r.default.createElement(g.default,{className:"profile-links-add-other__cancel",isPrimary:!1,onClick:this.recordClickEvent("Cancel Other Site Button",this.onCancel)},this.props.translate("Cancel"))))},handleChange:function(e){var t=e.currentTarget,o=t.name,n=t.value;this.setState((0,s.default)({},o,n))}});t.default=(0,u.localize)(y),e.exports=t.default},"./client/me/profile-links-add-wordpress/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/react/react.js"),h=n(m),g=o("./node_modules/react-redux/es/index.js"),_=o("./node_modules/i18n-calypso/index.js"),b=o("./node_modules/lodash/lodash.js"),v=o("./client/config/index.js"),E=n(v),y=o("./client/components/forms/form-button/index.jsx"),x=n(y),k=o("./client/components/notice/index.jsx"),j=n(k),C=o("./client/me/event-recorder/index.js"),S=o("./client/state/selectors/get-public-sites.js"),w=n(S),R=o("./client/state/sites/selectors.js"),A=o("./client/me/profile-links-add-wordpress/site.jsx"),L=n(A),T=function(e,t,o){return function(n,a){var s=(0,b.pickBy)(e,function(e,t){return"site-"===t.substr(0,5)&&e}),i=(0,b.map)(s,function(e,t){return parseInt(t.substr(5),10)}).map(function(e){return(0,R.getSite)(a(),e)}).map(function(e){return{title:e.name,value:e.URL}});i.length&&t.addProfileLinks(i,o)}},P=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.state={},n.handleCheckedChanged=function(e){var t={};t[e.target.name]=e.target.checked,n.setState(t)},n.onSelect=function(e,t){var o={};o[t]=!n.state[t],n.setState(o)},n.onAddableSubmit=function(e){e.preventDefault(),n.props.addProfileLinks(n.state,n.props.userProfileLinks,n.onSubmitResponse)},n.onCancel=function(e){e.preventDefault(),n.props.onCancel()},n.onCreateSite=function(e){e.preventDefault(),window.open((0,E.default)("signup_url")+"?ref=me-profile-links"),n.props.onCancel()},n.onJetpackMe=function(e){e.preventDefault(),window.open("http://jetpack.me/"),n.props.onCancel()},n.onSubmitResponse=function(e,t){var o=n.props.translate;return e?void n.setState({lastError:o("Unable to add any links right now. Please try again later.")}):t.malformed?void n.setState({lastError:o("An unexpected error occurred. Please try again later.")}):(t.duplicate&&n.props.userProfileLinks.fetchProfileLinks(),void n.props.onSuccess())},n.clearLastError=function(){n.setState({lastError:!1})},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getCheckedCount",value:function(){var e=0,t=void 0;for(t in this.state)this.state[t]&&e++;return e}},{key:"possiblyRenderError",value:function(){return this.state.lastError?h.default.createElement(j.default,{className:"profile-links-add-wordpress__error",status:"is-error",onDismissClick:this.clearLastError},this.state.lastError):null}},{key:"renderAddableSites",value:function(){var e=this;return this.props.publicSites.map(function(t){var o="site-"+t.ID,n=e.state[o];return e.props.userProfileLinks.isSiteInProfileLinks(t)?null:h.default.createElement(L.default,{key:o,site:t,checked:n,onChange:e.handleCheckedChanged,onSelect:e.onSelect})})}},{key:"renderAddableSitesForm",value:function(){var e=this.props.translate,t=this.getCheckedCount();return h.default.createElement("form",{className:"profile-links-add-wordpress",onSubmit:this.onAddableSubmit},h.default.createElement("p",null,e("Please select one or more sites to add to your profile.")),h.default.createElement("ul",{className:"profile-links-add-wordpress__list"},this.renderAddableSites()),this.possiblyRenderError(),h.default.createElement(x.default,{disabled:0===t,onClick:(0,C.recordClickEvent)("Add WordPress Sites Button")},e("Add Site","Add Sites",{count:t})),h.default.createElement(x.default,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:(0,C.recordClickEvent)("Cancel Add WordPress Sites Button",this.onCancel)},e("Cancel")))}},{key:"renderInvitationForm",value:function(){var e=this.props.translate;return h.default.createElement("form",null,h.default.createElement("p",null,e("You have no public sites on WordPress.com yet, but if you like you can create one now. You may also add self-hosted WordPress sites here after installing {{jetpackLink}}Jetpack{{/jetpackLink}} on them.",{components:{jetpackLink:h.default.createElement("a",{href:"#",className:"profile-links-add-wordpress__jetpack-link",onClick:(0,C.recordClickEvent)("Jetpack Link in Profile Links",this.onJetpackMe)})}})),h.default.createElement(x.default,{onClick:(0,C.recordClickEvent)("Create Sites Button in Profile Links",this.onCreateSite)},e("Create Site")),h.default.createElement(x.default,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:(0,C.recordClickEvent)("Cancel Add WordPress Sites Button",this.onCancel)},e("Cancel")))}},{key:"render",value:function(){return h.default.createElement("div",null,0===this.props.publicSites.length?this.renderInvitationForm():this.renderAddableSitesForm())}}]),t}(m.Component);t.default=(0,g.connect)(function(e){return{publicSites:(0,w.default)(e)}},{addProfileLinks:T})((0,_.localize)(P)),e.exports=t.default},"./client/me/profile-links-add-wordpress/site.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=n(a),i=o("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/createClass.js"),d=n(l),u=o("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n(u),p=o("./node_modules/babel-runtime/helpers/inherits.js"),f=n(p),m=o("./node_modules/prop-types/index.js"),h=n(m),g=o("./node_modules/react/react.js"),_=n(g),b=o("./client/blocks/site/index.jsx"),v=n(b),E=o("./client/me/event-recorder/index.js"),y=function(e){function t(){var e,o,n,a;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return o=n=(0,c.default)(this,(e=t.__proto__||(0,s.default)(t)).call.apply(e,[this].concat(l))),n.onSelect=function(e){n.props.onSelect(e,n.getInputName())},a=o,(0,c.default)(n,a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"getInputName",value:function(){return"site-"+this.props.site.ID}},{key:"render",value:function(){var e=this.props,t=e.checked,o=e.onChange,n=e.site;return _.default.createElement("li",{key:n.ID,className:"profile-links-add-wordpress__item",onClick:(0,E.recordCheckboxEvent)("Add WordPress Site")},_.default.createElement("input",{className:"profile-links-add-wordpress__checkbox",type:"checkbox",name:this.getInputName(),onChange:o,checked:t}),_.default.createElement(v.default,{site:n,indicator:!1,onSelect:this.onSelect}))}}]),t}(g.Component);y.propTypes={onChange:h.default.func.isRequired,onSelect:h.default.func.isRequired,site:h.default.object.isRequired,checked:h.default.bool},y.defaultProps={checked:!1},t.default=y,e.exports=t.default},"./client/me/profile-links/add-buttons.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/prop-types/index.js"),s=n(a),i=o("./node_modules/i18n-calypso/index.js"),r=o("./node_modules/react/react.js"),l=n(r),d=o("./node_modules/create-react-class/index.js"),u=n(d),c=o("./node_modules/gridicons/build/index.js"),p=n(c),f=o("./client/components/button/index.jsx"),m=n(f),h=o("./client/lib/mixins/data-observe/index.js"),g=n(h),_=o("./client/me/event-recorder/index.js"),b=n(_),v=o("./client/components/popover/menu.jsx"),E=n(v),y=o("./client/components/popover/menu-item.jsx"),x=n(y),k=(0,u.default)({displayName:"AddProfileLinksButtons",mixins:[(0,g.default)("userProfileLinks"),b.default],propTypes:{showingForm:s.default.bool,showPopoverMenu:s.default.bool},getDefaultProps:function(){return{showingForm:!1}},getInitialState:function(){return{popoverPosition:"top"}},render:function(){return l.default.createElement("div",null,l.default.createElement(E.default,{isVisible:this.props.showPopoverMenu,onClose:this.props.onClosePopoverMenu,position:this.state.popoverPosition,context:this.refs&&this.refs.popoverMenuButton},l.default.createElement(x.default,{onClick:this.recordClickEvent("Add a WordPress Site Button",this.props.onShowAddWordPress)},this.props.translate("Add WordPress Site")),l.default.createElement(x.default,{onClick:this.recordClickEvent("Add Other Site Button",this.props.onShowAddOther)},this.props.translate("Add URL"))),l.default.createElement(m.default,{compact:!0,ref:"popoverMenuButton",className:"popover-icon",onClick:this.props.onShowPopoverMenu},l.default.createElement(p.default,{icon:"add-outline"}),this.props.translate("Add")))}});t.default=(0,i.localize)(k),e.exports=t.default},"./client/me/profile-links/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/react/react.js"),s=n(a),i=o("./node_modules/create-react-class/index.js"),r=n(i),l=o("./node_modules/i18n-calypso/index.js"),d=o("./node_modules/lodash/lodash.js"),u=o("./client/me/profile-link/index.jsx"),c=n(u),p=o("./client/lib/mixins/data-observe/index.js"),f=n(p),m=o("./client/me/profile-links/add-buttons.jsx"),h=n(m),g=o("./client/components/section-header/index.jsx"),_=n(g),b=o("./client/components/card/index.jsx"),v=n(b),E=o("./client/components/notice/index.jsx"),y=n(E),x=o("./client/me/event-recorder/index.js"),k=n(x),j=o("./client/me/profile-links-add-wordpress/index.jsx"),C=n(j),S=o("./client/me/profile-links-add-other/index.jsx"),w=n(S),R=(0,r.default)({displayName:"ProfileLinks",mixins:[(0,f.default)("userProfileLinks"),k.default],componentDidMount:function(){this.props.userProfileLinks.getProfileLinks(),"undefined"!=typeof document.hidden&&document.addEventListener("visibilitychange",this.handleVisibilityChange)},componentWillUnmount:function(){"undefined"!=typeof document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},handleVisibilityChange:function(){document.hidden||this.props.userProfileLinks.fetchProfileLinks()},getDefaultProps:function(){return{userProfileLinks:{initialized:!1}}},getInitialState:function(){return{showingForm:!1,lastError:!1,showPopoverMenu:!1}},showAddWordPress:function(){this.setState({showingForm:"wordpress",showPopoverMenu:!1})},showAddOther:function(){this.setState({showingForm:"other",showPopoverMenu:!1})},showPopoverMenu:function(){this.setState({showPopoverMenu:!this.state.showPopoverMenu})},closePopoverMenu:function(){this.setState({showPopoverMenu:!1})},hideForms:function(){this.setState({showingForm:!1})},onRemoveLinkResponse:function(e){e?this.setState({lastError:e}):this.setState({lastError:!1})},clearLastError:function(){this.setState({lastError:!1})},onRemoveLink:function(e){this.props.userProfileLinks.deleteProfileLinkBySlug(e.link_slug,this.onRemoveLinkResponse)},possiblyRenderError:function(){return this.state.lastError?s.default.createElement(y.default,{className:"profile-links__error",status:"is-error",onDismissClick:this.clearLastError},this.props.translate("An error occurred while attempting to remove the link. Please try again later.")):null},renderProfileLinksList:function(){var e=this;return s.default.createElement("ul",{className:"profile-links__list"},this.props.userProfileLinks.getProfileLinks().map(function(t){return s.default.createElement(c.default,{key:t.link_slug,title:t.title,url:t.value,slug:t.link_slug,onRemoveLink:e.onRemoveLink.bind(e,t)})}))},renderNoProfileLinks:function(){return s.default.createElement("p",{className:"profile-links__no-links"},this.props.translate("You have no sites in your profile links. You may add sites if you'd like."))},renderPlaceholders:function(){return s.default.createElement("ul",{className:"profile-links__list"},(0,d.times)(2,function(e){return s.default.createElement(c.default,{title:"Loading Profile Links",url:"http://wordpress.com",slug:"A placeholder profile link",isPlaceholder:!0,key:e})}))},renderProfileLinks:function(){var e=this.props.userProfileLinks.initialized,t=this.props.userProfileLinks.getProfileLinks().length,o=void 0;return o=e?t>0?this.renderProfileLinksList():this.renderNoProfileLinks():this.renderPlaceholders(),s.default.createElement("div",null,s.default.createElement("p",null,this.props.translate("Manage which sites appear in your profile.")),this.possiblyRenderError(),o)},renderForm:function(){return"wordpress"===this.state.showingForm?s.default.createElement(C.default,{userProfileLinks:this.props.userProfileLinks,onSuccess:this.hideForms,onCancel:this.hideForms}):s.default.createElement(w.default,{userProfileLinks:this.props.userProfileLinks,onSuccess:this.hideForms,onCancel:this.hideForms})},render:function(){return s.default.createElement("div",null,s.default.createElement(_.default,{label:this.props.translate("Profile Links")},s.default.createElement(h.default,{userProfileLinks:this.props.userProfileLinks,showingForm:!!this.state.showingForm,onShowAddOther:this.showAddOther,showPopoverMenu:this.state.showPopoverMenu,onShowAddWordPress:this.showAddWordPress,onShowPopoverMenu:this.showPopoverMenu,onClosePopoverMenu:this.closePopoverMenu})),s.default.createElement(v.default,null,this.state.showingForm?this.renderForm():this.renderProfileLinks()))}});t.default=(0,l.localize)(R),e.exports=t.default},"./client/me/profile/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/react/react.js"),s=n(a),i=o("./node_modules/create-react-class/index.js"),r=n(i),l=o("./node_modules/i18n-calypso/index.js"),d=o("./node_modules/debug/browser.js"),u=n(d),c=o("./node_modules/lodash/lodash.js"),p=o("./client/me/sidebar-navigation/sidebar-navigation.jsx"),f=n(p),m=o("./client/lib/protect-form/index.jsx"),h=o("./client/me/form-base/index.js"),g=n(h),_=o("./client/components/forms/form-button/index.jsx"),b=n(_),v=o("./client/components/forms/form-fieldset/index.jsx"),E=n(v),y=o("./client/components/forms/form-label/index.jsx"),x=n(y),k=o("./client/components/forms/form-text-input/index.jsx"),j=n(k),C=o("./client/components/forms/form-textarea/index.jsx"),S=n(C),w=o("./client/blocks/edit-gravatar/index.jsx"),R=n(w),A=o("./client/me/profile-links/index.jsx"),L=n(A),T=o("./client/lib/user-profile-links/index.js"),P=n(T),N=o("./client/me/reauth-required/index.jsx"),I=n(N),M=o("./client/lib/two-step-authorization/index.js"),D=n(M),O=o("./client/components/card/index.jsx"),F=n(O),U=o("./client/lib/mixins/data-observe/index.js"),B=n(U),z=o("./client/me/event-recorder/index.js"),W=n(z),V=o("./client/components/main/index.jsx"),G=n(V),q=o("./client/components/section-header/index.jsx"),H=n(q),Q=(0,u.default)("calypso:me:profile"),Y=(0,r.default)({displayName:"Profile",mixins:[g.default,(0,B.default)("userSettings"),W.default],componentDidMount:function(){Q(this.displayName+" component is mounted.")},componentWillUnmount:function(){Q(this.displayName+" component is unmounting.")},render:function(){var e="https://gravatar.com/"+this.props.userSettings.getSetting("user_login");return s.default.createElement(G.default,{className:"profile"},s.default.createElement(f.default,null),s.default.createElement(I.default,{twoStepAuthorization:D.default}),s.default.createElement(H.default,{label:this.props.translate("Profile")}),s.default.createElement(F.default,{className:"me-profile-settings"},s.default.createElement(R.default,null),s.default.createElement("form",{onSubmit:this.submitForm,onChange:this.props.markChanged},s.default.createElement(E.default,null,s.default.createElement(x.default,{htmlFor:"first_name"},this.props.translate("First Name")),s.default.createElement(j.default,{disabled:this.getDisabledState(),id:"first_name",name:"first_name",onChange:this.updateSetting,onFocus:this.recordFocusEvent("First Name Field"),value:this.getSetting("first_name")})),s.default.createElement(E.default,null,s.default.createElement(x.default,{htmlFor:"last_name"},this.props.translate("Last Name")),s.default.createElement(j.default,{disabled:this.getDisabledState(),id:"last_name",name:"last_name",onChange:this.updateSetting,onFocus:this.recordFocusEvent("Last Name Field"),value:this.getSetting("last_name")})),s.default.createElement(E.default,null,s.default.createElement(x.default,{htmlFor:"display_name"},this.props.translate("Public Display Name")),s.default.createElement(j.default,{disabled:this.getDisabledState(),id:"display_name",name:"display_name",onChange:this.updateSetting,onFocus:this.recordFocusEvent("Display Name Field"),value:this.getSetting("display_name")})),s.default.createElement(E.default,null,s.default.createElement(x.default,{htmlFor:"description"},this.props.translate("About Me")),s.default.createElement(S.default,{disabled:this.getDisabledState(),id:"description",name:"description",onChange:this.updateSetting,onFocus:this.recordFocusEvent("About Me Field"),value:this.getSetting("description")})),s.default.createElement("p",null,s.default.createElement(b.default,{disabled:!this.props.userSettings.hasUnsavedSettings()||this.getDisabledState(),onClick:this.recordClickEvent("Save Profile Details Button")},this.state.submittingForm?this.props.translate("Saving…"):this.props.translate("Save Profile Details")))),s.default.createElement("p",{className:"me-profile-settings__info-text"},this.props.translate("This information will be displayed publicly on {{profilelink}}your profile{{/profilelink}} and in {{hovercardslink}}Gravatar Hovercards{{/hovercardslink}}.",{components:{profilelink:s.default.createElement("a",{onClick:this.recordClickEvent("My Profile Link"),href:e,target:"_blank",rel:"noopener noreferrer"}),hovercardslink:s.default.createElement("a",{onClick:this.recordClickEvent("Gravatar Hovercards Link"),href:"https://support.wordpress.com/gravatar-hovercards/",target:"_blank",rel:"noopener noreferrer"})}}))),s.default.createElement(L.default,{userProfileLinks:P.default}))}});t.default=(0,c.flowRight)(m.protectForm,l.localize)(Y),e.exports=t.default},"./client/me/reauth-required/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/defineProperty.js"),s=n(a),i=o("./node_modules/babel-runtime/core-js/json/stringify.js"),r=n(i),l=o("./node_modules/react/react.js"),d=n(l),u=o("./node_modules/create-react-class/index.js"),c=n(u),p=o("./node_modules/i18n-calypso/index.js"),f=o("./node_modules/debug/browser.js"),m=n(f),h=o("./client/components/dialog/index.jsx"),g=n(h),_=o("./client/components/forms/form-fieldset/index.jsx"),b=n(_),v=o("./client/components/forms/form-label/index.jsx"),E=n(v),y=o("./client/components/forms/form-tel-input/index.jsx"),x=n(y),k=o("./client/components/forms/form-checkbox/index.jsx"),j=n(k),C=o("./client/components/forms/form-button/index.jsx"),S=n(C),w=o("./client/components/forms/form-buttons-bar/index.jsx"),R=n(w),A=o("./client/components/forms/form-input-validation/index.jsx"),L=n(A),T=o("./client/lib/mixins/data-observe/index.js"),P=n(T),N=o("./client/me/event-recorder/index.js"),I=n(N),M=o("./client/lib/user/utils.js"),D=n(M),O=o("./client/me/constants.js"),F=n(O),U=o("./client/components/notice/index.jsx"),B=n(U),z=(0,m.default)("calypso:me:reauth-required"),W=(0,c.default)({displayName:"ReauthRequired",mixins:[(0,P.default)("twoStepAuthorization"),I.default],getInitialState:function(){return{remember2fa:!1,code:"",smsRequestsAllowed:!0}},getCodeMessage:function(){var e="";return e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?this.props.translate("Please check your text messages at the phone number ending with {{strong}}%(smsLastFour)s{{/strong}} and enter the verification code below.",{args:{smsLastFour:this.props.twoStepAuthorization.getSMSLastFour()},components:{strong:d.default.createElement("strong",null)}}):this.props.translate("Please enter the verification code generated by your authenticator app.")},submitForm:function(e){e.preventDefault(),this.setState({validatingCode:!0}),this.props.twoStepAuthorization.validateCode({code:this.state.code,remember2fa:this.state.remember2fa},function(e,t){this.setState({validatingCode:!1}),z(e?"There was an error validating that code: "+(0,r.default)(e):"The code validated!"+(0,r.default)(t))}.bind(this))},codeRequestTimer:!1,allowSMSRequests:function(){this.setState({smsRequestsAllowed:!0})},sendSMSCode:function(){this.setState({smsRequestsAllowed:!1}),this.codeRequestTimer=setTimeout(this.allowSMSRequests,6e4),this.props.twoStepAuthorization.sendSMSCode(function(e,t){z(!e&&t.sent?"SMS code successfully sent":"There was a failure sending the SMS code.")})},preValidateAuthCode:function(){return this.state.code.length&&this.state.code.length>5},renderSendSMSButton:function(){var e;return e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?d.default.createElement(S.default,{disabled:!this.state.smsRequestsAllowed,isPrimary:!1,onClick:this.recordClickEvent("Resend SMS Code Button on Reauth Required",this.sendSMSCode),type:"button"},this.props.translate("Resend SMS Code")):d.default.createElement(S.default,{disabled:!this.state.smsRequestsAllowed,isPrimary:!1,onClick:this.recordClickEvent("Send SMS Code Button on Reauth Required",this.sendSMSCode),type:"button"},this.props.translate("Send SMS Code"))},renderFailedValidationMsg:function(){return this.props.twoStepAuthorization.codeValidationFailed()?d.default.createElement(L.default,{isError:!0,text:this.props.translate("You entered an invalid code. Please try again.")}):null},renderSMSResendThrottled:function(){return this.props.twoStepAuthorization.isSMSResendThrottled()?d.default.createElement("div",{className:"reauth-required__send-sms-throttled"},d.default.createElement(B.default,{showDismiss:!1,text:this.props.translate("SMS codes are limited to once per minute. Please wait and try again.")})):null},render:function(){var e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?F.default.sevenDigit2faPlaceholder:F.default.sixDigit2faPlaceholder;return d.default.createElement(g.default,{autoFocus:!1,className:"reauth-required__dialog",isFullScreen:!1,isVisible:this.props.twoStepAuthorization.isReauthRequired(),buttons:null,onClose:null},d.default.createElement("p",null,this.getCodeMessage()),d.default.createElement("p",null,d.default.createElement("a",{className:"reauth-required__sign-out",onClick:this.recordClickEvent("Reauth Required Log Out Link",D.default.logout)},this.props.translate("Not you? Sign Out"))),d.default.createElement("form",{onSubmit:this.submitForm},d.default.createElement(b.default,null,d.default.createElement(E.default,{htmlFor:"code"},this.props.translate("Verification Code")),d.default.createElement(x.default,{autoFocus:!0,id:"code",isError:this.props.twoStepAuthorization.codeValidationFailed(),name:"code",placeholder:e,onFocus:this.recordFocusEvent("Reauth Required Verification Code Field"),value:this.state.code,onChange:this.handleChange}),this.renderFailedValidationMsg()),d.default.createElement(b.default,null,d.default.createElement(E.default,null,d.default.createElement(j.default,{id:"remember2fa",name:"remember2fa",onClick:this.recordCheckboxEvent("Remember 2fa"),checked:this.state.remember2fa,onChange:this.handleCheckedChange}),d.default.createElement("span",null,this.props.translate("Remember for 30 days.")))),this.renderSMSResendThrottled(),d.default.createElement(R.default,null,d.default.createElement(S.default,{disabled:this.state.validatingCode||!this.preValidateAuthCode(),onClick:this.recordClickEvent("Submit Validation Code on Reauth Required")},this.props.translate("Verify")),this.renderSendSMSButton())))},handleChange:function(e){var t=e.currentTarget,o=t.name,n=t.value;this.setState((0,s.default)({},o,n))},handleCheckedChange:function(e){var t=e.currentTarget,o=t.name,n=t.checked;this.setState((0,s.default)({},o,n))}});t.default=(0,p.localize)(W),e.exports=t.default},"./client/me/sidebar-navigation/sidebar-navigation.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/react/react.js"),s=n(a),i=o("./node_modules/i18n-calypso/index.js"),r=o("./client/components/sidebar-navigation/index.jsx"),l=n(r),d=o("./client/components/gravatar/index.jsx"),u=n(d),c=o("./client/lib/user/index.js"),p=n(c),f=(0,
p.default)(),m=function(e){var t=e.translate;return s.default.createElement(l.default,{sectionName:"me",sectionTitle:t("Me")},s.default.createElement(u.default,{user:f.get(),size:30,imgSize:400}))};t.default=(0,i.localize)(m),e.exports=t.default},"./client/me/sidebar/index.jsx":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o("./node_modules/babel-runtime/helpers/defineProperty.js"),s=n(a),i=o("./node_modules/react/react.js"),r=n(i),l=o("./node_modules/create-react-class/index.js"),d=n(l),u=o("./node_modules/debug/browser.js"),c=n(u),p=o("./node_modules/react-redux/es/index.js"),f=o("./node_modules/lodash/lodash.js"),m=o("./node_modules/i18n-calypso/index.js"),h=o("./client/layout/sidebar/index.jsx"),g=n(h),_=o("./client/layout/sidebar/footer.jsx"),b=n(_),v=o("./client/layout/sidebar/heading.jsx"),E=n(v),y=o("./client/layout/sidebar/item.jsx"),x=n(y),k=o("./client/layout/sidebar/menu.jsx"),j=n(k),C=o("./client/config/index.js"),S=n(C),w=o("./client/me/profile-gravatar/index.jsx"),R=n(w),A=o("./client/me/event-recorder/index.js"),L=n(A),T=o("./client/lib/user/index.js"),P=n(T),N=o("./client/lib/user/utils.js"),I=n(N),M=o("./client/components/button/index.jsx"),D=n(M),O=o("./client/me/purchases/paths.js"),F=n(O),U=o("./client/state/ui/layout-focus/actions.js"),B=o("./client/state/current-user/selectors.js"),z=o("./client/state/login/actions.js"),W=(0,c.default)("calypso:me:sidebar"),V=(0,P.default)(),G=(0,d.default)({displayName:"MeSidebar",mixins:[L.default],componentDidMount:function(){W("The MeSidebar React component is mounted.")},onNavigate:function(){this.props.setNextLayoutFocus("content"),window.scrollTo(0,0)},onSignOut:function(){var e=this.props.currentUser,t=e&&"en"===e.localeSlug,o=null;t&&!S.default.isEnabled("desktop")&&(o="/?apppromo"),S.default.isEnabled("login/wp-login")?this.props.logoutUser(o).then(function(e){var t=e.redirect_to;return V.clear(function(){return location.href=t||"/"})},function(){return I.default.logout(o)}):I.default.logout(o),this.recordClickEvent("Sidebar Sign Out Link")},render:function(){var e,t=this.props,o=t.context,n=t.translate,a=(e={"/me":"profile","/me/security/account-recovery":"security","/me/security/connected-applications":"security","/me/security/social-login":"security","/me/security/two-step":"security","/me/notifications/comments":"notifications","/me/notifications/updates":"notifications","/me/notifications/subscriptions":"notifications","/help/contact":"help"},(0,s.default)(e,F.default.purchasesRoot(),"purchases"),(0,s.default)(e,F.default.billingHistory(),"purchases"),(0,s.default)(e,F.default.addCreditCard(),"purchases"),(0,s.default)(e,"/me/chat","happychat"),e),i=o.path.replace(/\/\d+$/,""),l=void 0;return l=a[i]?a[i]:o.path.split("/").pop(),r.default.createElement(g.default,null,r.default.createElement(R.default,{user:this.props.currentUser}),r.default.createElement("div",{className:"me-sidebar__signout"},r.default.createElement(D.default,{compact:!0,className:"me-sidebar__signout-button",onClick:this.onSignOut,title:n("Sign out of WordPress.com",{textOnly:!0})},n("Sign Out"))),r.default.createElement(j.default,null,r.default.createElement(E.default,null,n("Profile")),r.default.createElement("ul",null,r.default.createElement(x.default,{selected:"profile"===l,link:S.default.isEnabled("me/my-profile")?"/me":"//wordpress.com/me/public-profile",label:n("My Profile"),icon:"user",onNavigate:this.onNavigate}),r.default.createElement(x.default,{selected:"account"===l,link:S.default.isEnabled("me/account")?"/me/account":"//wordpress.com/me/account",label:n("Account Settings"),icon:"cog",onNavigate:this.onNavigate,preloadSectionName:"account"}),r.default.createElement(x.default,{selected:"purchases"===l,link:F.default.purchasesRoot(),label:n("Manage Purchases"),icon:"credit-card",onNavigate:this.onNavigate,preloadSectionName:"purchases"}),r.default.createElement(x.default,{selected:"security"===l,link:"/me/security",label:n("Security"),icon:"lock",onNavigate:this.onNavigate,preloadSectionName:"security"}),r.default.createElement(x.default,{selected:"notifications"===l,link:S.default.isEnabled("me/notifications")?"/me/notifications":"//wordpress.com/me/notifications",label:n("Notification Settings"),icon:"bell",onNavigate:this.onNavigate,preloadSectionName:"notification-settings"}))),r.default.createElement(j.default,null,r.default.createElement(E.default,null,n("Special")),r.default.createElement("ul",null,r.default.createElement(x.default,{selected:"get-apps"===l,link:"/me/get-apps",label:n("Get Apps"),icon:"my-sites",onNavigate:this.onNavigate}),this.renderNextStepsItem(l))),r.default.createElement(b.default,null))},renderNextStepsItem:function(e){var t=this.props,o=t.currentUser,n=t.translate;if(S.default.isEnabled("me/next-steps")&&o&&o.site_count>0)return r.default.createElement(x.default,{selected:"next"===e,link:"/me/next",label:n("Next Steps"),icon:"list-checkmark",onNavigate:this.onNavigate})}}),q=(0,f.flow)(m.localize,(0,p.connect)(function(e){return{currentUser:(0,B.getCurrentUser)(e)}},{logoutUser:z.logoutUser,setNextLayoutFocus:U.setNextLayoutFocus}));t.default=q(G),e.exports=t.default},"./client/state/current-user/email-verification/actions.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetVerifyEmailState=t.verifyEmail=void 0;var n=o("./client/state/action-types.js");t.verifyEmail=function(){return{type:n.EMAIL_VERIFY_REQUEST}},t.resetVerifyEmailState=function(){return{type:n.EMAIL_VERIFY_STATE_RESET}}},"./client/state/current-user/gravatar-status/actions.js":function(e,t,o){"use strict";function n(e,t){return(0,s.withAnalytics)((0,s.recordTracksEvent)("calypso_edit_gravatar_upload_start"),{type:a.GRAVATAR_UPLOAD_REQUEST,file:e,email:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.receiveGravatarImageFailed=void 0,t.uploadGravatar=n;var a=o("./client/state/action-types.js"),s=o("./client/state/analytics/actions.js");t.receiveGravatarImageFailed=function(e){var t=e.errorMessage,o=e.statName;return(0,s.withAnalytics)((0,s.composeAnalytics)((0,s.recordTracksEvent)("calypso_edit_gravatar_file_receive_failure"),(0,s.bumpStat)("calypso_gravatar_update_error",o)),{type:a.GRAVATAR_RECEIVE_IMAGE_FAILURE,errorMessage:t})}},"./client/state/login/actions.js":function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,m.get)(e,"body.data.phone_number");return(0,h.translate)("Message sent to phone number ending in %(phoneNumber)s",{args:{phoneNumber:t}})}function s(e){var t="global";if(!e.status)return{code:"network_error",message:e.message,field:t};var o=(0,m.get)(e,"response.body.data.errors[0].code");if(o)if(o in j)t=j[o];else if("admin_login_attempt"===o){var n=(0,k.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=lostpassword",(0,k.getLocaleSlug)());return{code:o,message:c.default.createElement("div",null,c.default.createElement("p",null,(0,h.translate)("You attempted to login with the username {{em}}admin{{/em}} on WordPress.com.",{components:{em:c.default.createElement("em",null)}})),c.default.createElement("p",null,(0,h.translate)("If you were trying to access your self hosted {{a}}WordPress.org{{/a}} site, try {{strong}}yourdomain.com/wp-admin/{{/strong}} instead.",{components:{a:c.default.createElement("a",{href:"http://wordpress.org",target:"_blank",rel:"noopener noreferrer"}),strong:c.default.createElement("strong",null)}})),c.default.createElement("p",null,(0,h.translate)("If you can’t remember your WordPress.com username, you can {{a}}reset your password{{/a}} by providing your email address.",{components:{a:c.default.createElement("a",{href:n,rel:"external"})}}))),field:t}}var a=(0,m.get)(e,"response.body.data.errors[0].message");return a||(a=(0,m.get)(e,"response.body.data",e.message)),{code:o,message:a,field:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.logoutUser=t.formUpdate=t.stopPollAppPushAuth=t.startPollAppPushAuth=t.sendSmsCode=t.createSocialUserFailed=t.disconnectSocialUser=t.connectSocialUser=t.createSocialUser=t.loginSocialUser=t.loginUserWithTwoFactorVerificationCode=t.loginUser=void 0;var i=o("./node_modules/babel-runtime/core-js/promise.js"),r=n(i),l=o("./node_modules/babel-runtime/helpers/extends.js"),d=n(l),u=o("./node_modules/react/react.js"),c=n(u),p=o("./node_modules/superagent/lib/client.js"),f=n(p),m=o("./node_modules/lodash/lodash.js"),h=o("./node_modules/i18n-calypso/index.js"),g=o("./client/config/index.js"),_=n(g),b=o("./client/state/action-types.js"),v=o("./client/state/login/selectors.js"),E=o("./client/state/current-user/selectors.js"),y=o("./client/lib/wp/browser.js"),x=n(y),k=o("./client/lib/i18n-utils/browser.js"),j={empty_password:"password",empty_two_step_code:"twoStepCode",empty_username:"usernameOrEmail",incorrect_password:"password",invalid_email:"usernameOrEmail",invalid_two_step_code:"twoStepCode",invalid_username:"usernameOrEmail"},C=function(e){return(0,d.default)({message:e.message,code:e.error,field:"global"},(0,m.omit)(e,["error","message","field"]))};t.loginUser=function(e,t,o){return function(n){return n({type:b.LOGIN_REQUEST}),f.default.post((0,k.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=login-endpoint",(0,k.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({username:e,password:t,remember_me:!0,redirect_to:o,client_id:(0,_.default)("wpcom_signup_id"),client_secret:(0,_.default)("wpcom_signup_key")}).then(function(e){n({type:b.LOGIN_REQUEST_SUCCESS,data:e.body&&e.body.data}),"sms"===(0,m.get)(e,"body.data.two_step_notification_sent")&&n({type:b.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_SUCCESS,notice:{message:a(e),status:"is-success"},twoStepNonce:(0,m.get)(e,"body.data.two_step_nonce_sms")})}).catch(function(e){var t=s(e);return n({type:b.LOGIN_REQUEST_FAILURE,error:t}),r.default.reject(t)})}},t.loginUserWithTwoFactorVerificationCode=function(e,t){return function(o,n){return o({type:b.TWO_FACTOR_AUTHENTICATION_LOGIN_REQUEST}),f.default.post((0,k.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=two-step-authentication-endpoint",(0,k.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({user_id:(0,v.getTwoFactorUserId)(n()),auth_type:t,two_step_code:e,two_step_nonce:(0,v.getTwoFactorAuthNonce)(n(),t),remember_me:!0,client_id:(0,_.default)("wpcom_signup_id"),client_secret:(0,_.default)("wpcom_signup_key")}).then(function(){o({type:b.TWO_FACTOR_AUTHENTICATION_LOGIN_REQUEST_SUCCESS})}).catch(function(e){var n=(0,m.get)(e,"response.body.data.two_step_nonce");n&&o({type:b.TWO_FACTOR_AUTHENTICATION_UPDATE_NONCE,twoStepNonce:n,nonceType:t});var a=s(e);return o({type:b.TWO_FACTOR_AUTHENTICATION_LOGIN_REQUEST_FAILURE,error:a}),r.default.reject(a)})}},t.loginSocialUser=function(e,t){return function(o){return o({type:b.SOCIAL_LOGIN_REQUEST}),f.default.post((0,k.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=social-login-endpoint",(0,k.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send((0,d.default)({},e,{redirect_to:t,client_id:(0,_.default)("wpcom_signup_id"),client_secret:(0,_.default)("wpcom_signup_key")})).then(function(e){o({type:b.SOCIAL_LOGIN_REQUEST_SUCCESS,data:(0,m.get)(e,"body.data")}),"sms"===(0,m.get)(e,"body.data.two_step_notification_sent")&&o({type:b.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_SUCCESS,notice:{message:a(e),status:"is-success"},twoStepNonce:(0,m.get)(e,"body.data.two_step_nonce_sms")})}).catch(function(t){var n=s(t);return n.email=(0,m.get)(t,"response.body.data.email"),o({type:b.SOCIAL_LOGIN_REQUEST_FAILURE,error:n,authInfo:e,data:(0,m.get)(t,"response.body.data")}),r.default.reject(n)})}},t.createSocialUser=function(e,t){return function(o){return o({type:b.SOCIAL_CREATE_ACCOUNT_REQUEST,notice:{message:(0,h.translate)("Creating your account")}}),x.default.undocumented().usersSocialNew((0,d.default)({},e,{signup_flow_name:t})).then(function(e){var t={username:e.username,bearerToken:e.bearer_token};return o({type:b.SOCIAL_CREATE_ACCOUNT_REQUEST_SUCCESS,data:t}),t},function(e){var t=C(e);return o({type:b.SOCIAL_CREATE_ACCOUNT_REQUEST_FAILURE,error:t}),r.default.reject(t)})}},t.connectSocialUser=function(e,t){return function(o){return o({type:b.SOCIAL_CONNECT_ACCOUNT_REQUEST,notice:{message:(0,h.translate)("Creating your account")}}),x.default.undocumented().me().socialConnect((0,d.default)({},e,{redirect_to:t})).then(function(e){o({type:b.SOCIAL_CONNECT_ACCOUNT_REQUEST_SUCCESS,redirect_to:e.redirect_to})},function(e){var t=C(e);return o({type:b.SOCIAL_CONNECT_ACCOUNT_REQUEST_FAILURE,error:t}),r.default.reject(t)})}},t.disconnectSocialUser=function(e){return function(t){return t({type:b.SOCIAL_DISCONNECT_ACCOUNT_REQUEST,notice:{message:(0,h.translate)("Creating your account")}}),x.default.undocumented().me().socialDisconnect(e).then(function(){t({type:b.SOCIAL_DISCONNECT_ACCOUNT_REQUEST_SUCCESS})},function(e){var o=C(e);return t({type:b.SOCIAL_DISCONNECT_ACCOUNT_REQUEST_FAILURE,error:o}),r.default.reject(o)})}},t.createSocialUserFailed=function(e,t){return{type:b.SOCIAL_CREATE_ACCOUNT_REQUEST_FAILURE,authInfo:e,error:t.field?t:C(t)}},t.sendSmsCode=function(){return function(e,t){return e({type:b.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST,notice:{message:(0,h.translate)("Sending you a text message…")}}),f.default.post((0,k.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=send-sms-code-endpoint",(0,k.getLocaleSlug)())).set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({user_id:(0,v.getTwoFactorUserId)(t()),two_step_nonce:(0,v.getTwoFactorAuthNonce)(t(),"sms"),client_id:(0,_.default)("wpcom_signup_id"),client_secret:(0,_.default)("wpcom_signup_key")}).then(function(t){var o=a(t);e({type:b.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_SUCCESS,notice:{message:o,status:"is-success"},twoStepNonce:(0,m.get)(t,"body.data.two_step_nonce")})}).catch(function(t){var o=s(t);e({type:b.TWO_FACTOR_AUTHENTICATION_SEND_SMS_CODE_REQUEST_FAILURE,error:o,twoStepNonce:(0,m.get)(t,"response.body.data.two_step_nonce")})})}},t.startPollAppPushAuth=function(){return{type:b.TWO_FACTOR_AUTHENTICATION_PUSH_POLL_START}},t.stopPollAppPushAuth=function(){return{type:b.TWO_FACTOR_AUTHENTICATION_PUSH_POLL_STOP}},t.formUpdate=function(){return{type:b.LOGIN_FORM_UPDATE}},t.logoutUser=function(e){return function(t,o){t({type:b.LOGOUT_REQUEST});var n=(0,E.getCurrentUser)(o()),a=(n.logout_URL||"").match(/_wpnonce=([^&]*)/),i=a&&a[1];return f.default.post((0,k.addLocaleToWpcomUrl)("https://wordpress.com/wp-login.php?action=logout-endpoint",(0,k.getLocaleSlug)())).withCredentials().set("Content-Type","application/x-www-form-urlencoded").accept("application/json").send({redirect_to:e,client_id:(0,_.default)("wpcom_signup_id"),client_secret:(0,_.default)("wpcom_signup_key"),logout_nonce:i}).then(function(e){var o=(0,m.get)(e,"body.data",{});return t({type:b.LOGOUT_REQUEST_SUCCESS,data:o}),r.default.resolve(o)}).catch(function(e){var o=s(e);return t({type:b.LOGOUT_REQUEST_FAILURE,error:o}),r.default.reject(o)})}}},"./client/state/ui/drop-zone/actions.js":function(e,t,o){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:s.DROPZONE_SHOW,dropZoneName:e}}function a(e){return{type:s.DROPZONE_HIDE,dropZoneName:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDropZone=n,t.hideDropZone=a;var s=o("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/actions.js":function(e,t,o){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.IMAGE_EDITOR_STATE_RESET,additionalData:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m.IMAGE_EDITOR_STATE_RESET_ALL,additionalData:e}}function s(){return{type:m.IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE}}function i(){return{type:m.IMAGE_EDITOR_FLIP}}function r(e){return{type:m.IMAGE_EDITOR_SET_ASPECT_RATIO,ratio:e}}function l(e){return{type:m.IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO,ratio:e}}function d(e,t,o,n){return{type:m.IMAGE_EDITOR_SET_FILE_INFO,src:e,fileName:t,mimeType:o,title:n}}function u(e,t,o,n){return{type:m.IMAGE_EDITOR_SET_CROP_BOUNDS,topBound:e,leftBound:t,bottomBound:o,rightBound:n}}function c(e,t,o,n){return{type:m.IMAGE_EDITOR_COMPUTED_CROP,topRatio:e,leftRatio:t,widthRatio:o,heightRatio:n}}function p(e,t,o,n){return{type:m.IMAGE_EDITOR_CROP,topRatio:e,leftRatio:t,widthRatio:o,heightRatio:n}}function f(e,t){return{type:m.IMAGE_EDITOR_IMAGE_HAS_LOADED,width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetImageEditorState=n,t.resetAllImageEditorState=a,t.imageEditorRotateCounterclockwise=s,t.imageEditorFlip=i,t.setImageEditorAspectRatio=r,t.setImageEditorDefaultAspectRatio=l,t.setImageEditorFileInfo=d,t.setImageEditorCropBounds=u,t.imageEditorComputedCrop=c,t.imageEditorCrop=p,t.setImageEditorImageHasLoaded=f;var m=o("./client/state/action-types.js")},"./client/state/ui/editor/image-editor/selectors.js":function(e,t,o){"use strict";function n(e){return e.ui.editor.imageEditor.transform}function a(e){return e.ui.editor.imageEditor.fileInfo}function s(e){return e.ui.editor.imageEditor.hasChanges}function i(e){return!e.ui.editor.imageEditor.imageIsLoading}function r(e){return e.ui.editor.imageEditor.cropBounds}function l(e){return e.ui.editor.imageEditor.crop}function d(e){return e.ui.editor.imageEditor.aspectRatio}Object.defineProperty(t,"__esModule",{value:!0}),t.getImageEditorTransform=n,t.getImageEditorFileInfo=a,t.imageEditorHasChanges=s,t.isImageEditorImageLoaded=i,t.getImageEditorCropBounds=r,t.getImageEditorCrop=l,t.getImageEditorAspectRatio=d},"./node_modules/component-file-picker/index.js":function(e,t,o){function n(e,t){function o(e){t(i.files,e,i),a.unbind(i,"change",o),r=!1}"function"==typeof e&&(t=e,e={}),e=e||{},i.multiple=!!e.multiple,i.webkitdirectory=i.mozdirectory=i.directory=!!e.directory,null==e.accept?delete i.accept:e.accept.join?i.accept=e.accept.join(","):e.accept&&(i.accept=e.accept),r&&a.unbind(i,"change",r),a.bind(i,"change",o),r=o,s.reset(),i.click()}var a=o("./node_modules/component-event/index.js");e.exports=n;var s=document.createElement("form");s.innerHTML='<input type="file" style="top: -1000px; position: absolute" aria-hidden="true">',document.body.appendChild(s);var i=s.childNodes[0],r=!1}});