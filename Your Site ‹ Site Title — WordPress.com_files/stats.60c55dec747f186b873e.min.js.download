webpackJsonp(["stats"],{"./client/lib/follow-list/index.js":function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(){return this instanceof i?void(this.data=[]):new i}Object.defineProperty(e,"__esModule",{value:!0});var n=s("./node_modules/lodash/lodash.js"),l=s("./client/lib/follow-list/site.js"),o=a(l);i.prototype.add=function(t){var e=this.siteExists(t.site_id);return e||(e=new o.default(t),this.data.push(e)),e},i.prototype.siteExists=function(t){return(0,n.find)(this.data,{site_id:t})||!1},e.default=i,t.exports=e.default},"./client/lib/follow-list/site.js":function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t){return this instanceof i?(this.site_id=t.site_id,this.is_following=t.is_following,void(this.blog_domain=t.blog_domain)):new i(t)}Object.defineProperty(e,"__esModule",{value:!0});var n=s("./node_modules/debug/browser.js"),l=a(n),o=s("./client/lib/wp/browser.js"),d=a(o),r=s("./client/lib/mixins/emitter/index.js"),u=a(r),c=(0,l.default)("calypso:follow-list:site");(0,u.default)(i.prototype),i.prototype.follow=function(){this.is_following||(c("following site",this.site_id),this.is_following=!0,this.emit("change"),d.default.site(this.site_id).follow().add(function(t){c("follow success",t)}))},i.prototype.unfollow=function(){this.is_following&&(this.is_following=!1,this.emit("change"),d.default.site(this.site_id).follow().del(function(t){c("unfollow success",t)}))},e.default=i,t.exports=e.default},"./client/my-sites/stats/controller.jsx":function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var s={period:t,startOf:e.clone().startOf(t),endOf:e.clone().endOf(t)};return"week"===t&&("0"===e.format("d")?(s.startOf.subtract(6,"d"),s.endOf.subtract(6,"d")):(s.startOf.add(1,"d"),s.endOf.add(1,"d"))),s.key=t+":"+s.endOf.format("YYYY-MM-DD"),s}function n(t,e,s){var a=t.endOf(s),i=y.default.moment.duration(a.diff(e)),n=void 0;switch(s){case"day":n=i.asDays();break;case"week":n=i.asWeeks();break;case"month":n=i.asMonths();break;case"year":n=i.asYears()}return n}function l(t){var e=[{title:y.default.translate("Insights"),path:"/stats/insights/"+t,id:"stats-insights"},{title:y.default.translate("Days"),path:"/stats/day/"+t,id:"stats-day",period:"day"},{title:y.default.translate("Weeks"),path:"/stats/week/"+t,id:"stats-week",period:"week"},{title:y.default.translate("Months"),path:"/stats/month/"+t,id:"stats-month",period:"month"},{title:y.default.translate("Years"),path:"/stats/year/"+t,id:"stats-year",period:"year"}];return e}Object.defineProperty(e,"__esModule",{value:!0});var o=s("./node_modules/babel-runtime/core-js/number/is-finite.js"),d=a(o),r=s("./node_modules/babel-runtime/helpers/extends.js"),u=a(r),c=s("./node_modules/react/react.js"),f=a(c),m=s("./node_modules/page/index.js"),p=a(m),h=s("./node_modules/i18n-calypso/index.js"),y=a(h),g=s("./node_modules/lodash/lodash.js"),v=s("./client/lib/route/index.js"),_=a(v),x=s("./client/lib/analytics/index.js"),w=a(x),j=s("./node_modules/to-title-case/index.js"),S=a(j),b=s("./client/state/document-head/actions.js"),E=s("./client/lib/react-helpers/index.js"),O=s("./client/state/preferences/actions.js"),D=s("./client/state/sites/selectors.js"),k=s("./client/state/ui/layout-focus/selectors.js"),M=s("./client/state/ui/layout-focus/actions.js"),I=s("./client/state/ui/selectors.js"),P=s("./client/components/async-load/index.jsx"),V=a(P),W=s("./client/my-sites/stats/stats-page-placeholder/index.jsx"),q=a(W),Y="Stats",L=function(t){s.e("async-load-my-sites-stats-stats-insights").then(function(e){t(s("./client/my-sites/stats/stats-insights/index.jsx").__esModule?s("./client/my-sites/stats/stats-insights/index.jsx").default:s("./client/my-sites/stats/stats-insights/index.jsx"))}.bind(null,s)).catch(s.oe)},N=function(t){s.e("async-load-my-sites-stats-overview").then(function(e){t(s("./client/my-sites/stats/overview.jsx").__esModule?s("./client/my-sites/stats/overview.jsx").default:s("./client/my-sites/stats/overview.jsx"))}.bind(null,s)).catch(s.oe)},T=function(t){s.e("async-load-my-sites-stats-site").then(function(e){t(s("./client/my-sites/stats/site.jsx").__esModule?s("./client/my-sites/stats/site.jsx").default:s("./client/my-sites/stats/site.jsx"))}.bind(null,s)).catch(s.oe)},C=function(t){s.e("async-load-my-sites-stats-summary").then(function(e){t(s("./client/my-sites/stats/summary/index.jsx").__esModule?s("./client/my-sites/stats/summary/index.jsx").default:s("./client/my-sites/stats/summary/index.jsx"))}.bind(null,s)).catch(s.oe)},F=function(t){s.e("async-load-my-sites-stats-stats-post-detail").then(function(e){t(s("./client/my-sites/stats/stats-post-detail/index.jsx").__esModule?s("./client/my-sites/stats/stats-post-detail/index.jsx").default:s("./client/my-sites/stats/stats-post-detail/index.jsx"))}.bind(null,s)).catch(s.oe)},R=function(t){s.e("async-load-my-sites-stats-comment-follows").then(function(e){t(s("./client/my-sites/stats/comment-follows/index.jsx").__esModule?s("./client/my-sites/stats/comment-follows/index.jsx").default:s("./client/my-sites/stats/comment-follows/index.jsx"))}.bind(null,s)).catch(s.oe)},B=function(t){s.e("async-load-my-sites-stats-activity-log").then(function(e){t(s("./client/my-sites/stats/activity-log/index.jsx").__esModule?s("./client/my-sites/stats/activity-log/index.jsx").default:s("./client/my-sites/stats/activity-log/index.jsx"))}.bind(null,s)).catch(s.oe)};e.default={resetFirstView:function(t){t.store.dispatch((0,O.savePreference)("firstViewHistory",[]))},redirectToDefaultSitePage:function(t,e){var s=_.default.getSiteFragment(t.path);if(s){var a=(0,k.getCurrentLayoutFocus)(t.store.getState());t.store.dispatch((0,M.setNextLayoutFocus)(a)),p.default.redirect(_.default.getStatsDefaultSitePage(s))}else e()},insights:function(t){var e=s("./client/lib/follow-list/index.js"),a=t.params.site_id,i=_.default.sectionify(t.path),n=new e;t.store.dispatch((0,b.setDocumentHeadTitle)(y.default.translate("Stats",{textOnly:!0})));var l=(0,D.getSite)(t.store.getState(),a);a=l?l.ID||0:0,w.default.pageView.record(i,Y+" > Insights");var o={followList:n};(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({require:L,placeholder:f.default.createElement(q.default,null)},o)),document.getElementById("primary"),t.store)},overview:function(t,e){var s=function(){return[{title:y.default.translate("Days"),path:"/stats/day",altPaths:["/stats"],id:"stats-day",period:"day"},{title:y.default.translate("Weeks"),path:"/stats/week",id:"stats-week",period:"week"},{title:y.default.translate("Months"),path:"/stats/month",id:"stats-month",period:"month"},{title:y.default.translate("Years"),path:"/stats/year",id:"stats-year",period:"year"}]},a=_.default.sectionify(t.path);window.scrollTo(0,0),t.store.dispatch((0,b.setDocumentHeadTitle)(y.default.translate("Stats",{textOnly:!0})));var i=(0,g.find)(s(),function(e){return t.pathname===e.path||e.altPaths&&-1!==e.altPaths.indexOf(t.pathname)});if(i){w.default.mc.bumpStat("calypso_stats_overview_period",i.period),w.default.pageView.record(a,Y+" > "+(0,S.default)(i.period));var n={period:i.period,path:t.pathname};(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({placeholder:f.default.createElement(q.default,null),require:N},n)),document.getElementById("primary"),t.store)}else e()},site:function(t,e){var s=t.params.site_id,a=l(s),o=t.query,r=void 0,c=void 0,m=void 0,p=0,h=_.default.sectionify(t.path),v=void 0;t.store.dispatch((0,b.setDocumentHeadTitle)(y.default.translate("Stats",{textOnly:!0})));var x=(0,D.getSite)(t.store.getState(),s);s=x?x.ID||0:0;var j=(0,g.find)(a,function(e){return t.pathname===e.path||e.altPaths&&-1!==e.altPaths.indexOf(t.pathname)});if(j){x&&x.domain&&t.store.dispatch((0,b.setDocumentHeadTitle)(y.default.translate("Stats",{textOnly:!0})));var O=(0,D.getSiteOption)(t.store.getState(),s,"gmt_offset"),k=y.default.moment().utcOffset((0,d.default)(O)?O:0);o.startDate&&y.default.moment(o.startDate).isValid()?(r=y.default.moment(o.startDate).locale("en"),p=n(k,r,j.period)):r=i(j.period,k.locale("en")).startOf,p=parseInt(p,10),p?(p>9&&(p="10plus"),p="-"+p):p="",v=h+"/:site",w.default.mc.bumpStat("calypso_stats_site_period",j.period+p),w.default.pageView.record(v,Y+" > "+(0,S.default)(j.period)),m=i(j.period,r),c=o.tab||"views";var M={path:t.pathname,date:r,chartTab:c,context:t,period:m};(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({placeholder:f.default.createElement(q.default,null),require:T},M)),document.getElementById("primary"),t.store)}else e()},summary:function(t,e){var s=t.params.site_id,a=_.default.getSiteFragment(t.path),n=t.query,l=t.params.module,o=[{path:"/stats/"+l+"/"+s,altPaths:["/stats/day/"+l+"/"+s],id:"stats-day",period:"day"},{path:"/stats/week/"+l+"/"+s,id:"stats-week",period:"week"},{path:"/stats/month/"+l+"/"+s,id:"stats-month",period:"month"},{path:"/stats/year/"+l+"/"+s,id:"stats-year",period:"year"}],r=void 0,c=void 0,m=["posts","referrers","clicks","countryviews","authors","videoplays","videodetails","podcastdownloads","searchterms"],p=y.default.moment(),h=_.default.sectionify(t.path),v=(0,D.getSite)(t.store.getState(),s);s=v?v.ID||0:0;var x=(0,g.find)(o,function(e){return t.pathname===e.path||e.altPaths&&-1!==e.altPaths.indexOf(t.pathname)});if(a&&0===s)window.location="/stats";else if(x&&-1!==m.indexOf(t.params.module)){var j=(0,D.getSiteOption)(t.store.getState(),s,"gmt_offset");(0,d.default)(j)&&(p=y.default.moment().utcOffset(j)),r=n.startDate&&y.default.moment(n.startDate).isValid()?y.default.moment(n.startDate):p.endOf(x.period),c=i(x.period,r);var b="videodetails"===t.params.module?{postId:parseInt(n.post,10)}:{},O={};n.summarize&&n.num&&(O=(0,g.pick)(n,["num","summarize"]),O.period="day"),w.default.pageView.record(h,Y+" > "+(0,S.default)(x.period)+" > "+(0,S.default)(t.params.module));var k=(0,u.default)({path:t.pathname,statsQueryOptions:O,date:r,context:t,period:c},b);(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({placeholder:f.default.createElement(q.default,null),require:C},k)),document.getElementById("primary"),t.store)}else e()},post:function(t){var e=t.params.site_id,s=parseInt(t.params.post_id,10),a=t.path.split("/"),i="post"===a[2]?"post":"page",n=(0,D.getSite)(t.store.getState(),e);if(e=n?n.ID||0:0,0===e)window.location="/stats";else{w.default.pageView.record("/stats/"+i+"/:post_id/:site",Y+" > Single "+(0,S.default)(i));var l={path:t.path,postId:s,context:t};(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({placeholder:f.default.createElement(q.default,null),require:F},l)),document.getElementById("primary"),t.store)}},follows:function(t){var e=t.params.site_id,a=s("./client/lib/follow-list/index.js"),i=t.params.page_num,n=new a,l=_.default.sectionify(t.path),o=(0,D.getSite)(t.store.getState(),e);e=o?o.ID||0:0;var d=o&&"undefined"!=typeof o.slug?o.slug:_.default.getSiteFragment(t.path);if(0===e)window.location="/stats";else{i=parseInt(i,10),(!i||i<1)&&(i=1),w.default.pageView.record(l.replace("/"+i,""),Y+" > Followers > Comment");var r={path:t.path,page:i,perPage:20,total:10,domain:d,siteId:e,followList:n};(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({placeholder:f.default.createElement(q.default,null),require:R},r)),document.getElementById("primary"),t.store)}},activityLog:function(t){var e=t.store.getState(),s=(0,I.getSelectedSiteId)(e),a=(0,D.isJetpackSite)(e,s),i=y.default.moment(t.query.startDate,"YYYY-MM-DD").isValid()?t.query.startDate:void 0;if(s&&!a)p.default.redirect("/stats");else{w.default.pageView.record("/stats/activity/:site",Y+" > Activity ");var n={path:t.path,siteId:s,context:t,startDate:i};(0,E.renderWithReduxStore)(f.default.createElement(V.default,(0,u.default)({placeholder:f.default.createElement(q.default,null),require:B},n)),document.getElementById("primary"),t.store)}}},t.exports=e.default},"./client/my-sites/stats/index.js":function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){u.default.isEnabled("jetpack/activity-log")&&(0,n.default)("/stats/activity/:site_id",l.siteSelection,l.navigation,d.default.activityLog),u.default.isEnabled("manage/stats")&&((0,n.default)("/stats",l.siteSelection,l.navigation,d.default.overview),(0,n.default)("/stats/day",l.siteSelection,l.navigation,d.default.overview),(0,n.default)("/stats/week",l.siteSelection,l.navigation,d.default.overview),(0,n.default)("/stats/month",l.siteSelection,l.navigation,d.default.overview),(0,n.default)("/stats/year",l.siteSelection,l.navigation,d.default.overview),(0,n.default)("/stats/insights/:site_id",l.siteSelection,l.navigation,d.default.insights),(0,n.default)("/stats/day/:site_id",l.siteSelection,l.navigation,d.default.site),(0,n.default)("/stats/week/:site_id",l.siteSelection,l.navigation,d.default.site),(0,n.default)("/stats/month/:site_id",l.siteSelection,l.navigation,d.default.site),(0,n.default)("/stats/year/:site_id",l.siteSelection,l.navigation,d.default.site),(0,n.default)("/stats/:module/:site_id",l.siteSelection,l.navigation,d.default.summary),(0,n.default)("/stats/day/:module/:site_id",l.siteSelection,l.navigation,d.default.summary),(0,n.default)("/stats/week/:module/:site_id",l.siteSelection,l.navigation,d.default.summary),(0,n.default)("/stats/month/:module/:site_id",l.siteSelection,l.navigation,d.default.summary),(0,n.default)("/stats/year/:module/:site_id",l.siteSelection,l.navigation,d.default.summary),(0,n.default)("/stats/post/:post_id/:site_id",l.siteSelection,l.navigation,d.default.post),(0,n.default)("/stats/page/:post_id/:site_id",l.siteSelection,l.navigation,d.default.post),(0,n.default)("/stats/follows/comment/:site_id",l.siteSelection,l.navigation,d.default.follows),(0,n.default)("/stats/follows/comment/:page_num/:site_id",l.siteSelection,l.navigation,d.default.follows),u.default.isEnabled("ui/first-view/reset-route")&&(0,n.default)("/stats/reset-first-view",d.default.resetFirstView),(0,n.default)("/stats/(.*)",l.siteSelection,l.navigation,d.default.redirectToDefaultSitePage,l.sites))};var i=s("./node_modules/page/index.js"),n=a(i),l=s("./client/my-sites/controller.js"),o=s("./client/my-sites/stats/controller.jsx"),d=a(o),r=s("./client/config/index.js"),u=a(r);t.exports=e.default},"./client/my-sites/stats/stats-page-placeholder/index.jsx":function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s("./node_modules/prop-types/index.js"),n=a(i),l=s("./node_modules/react/react.js"),o=a(l),d=s("./node_modules/classnames/index.js"),r=a(d),u=s("./client/components/card/index.jsx"),c=a(u),f=function(t){return o.default.createElement("div",{className:(0,r.default)("main is-wide-layout",t.className)},o.default.createElement(c.default,{className:"stats-module stats-page-placeholder__header is-loading"},o.default.createElement("div",{className:"module-header"},o.default.createElement("h3",{className:"module-header-title"}))),o.default.createElement(c.default,{className:"stats-module stats-page-placeholder__content is-loading"},o.default.createElement("div",{className:"module-header"},o.default.createElement("h3",{className:"module-header-title"}))))};f.propTypes={className:n.default.string},e.default=f,t.exports=e.default},"./node_modules/escape-regexp-component/index.js":function(t,e){t.exports=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},"./node_modules/escape-regexp/index.js":function(t,e){t.exports=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")}},"./node_modules/title-case-minors/index.js":function(t,e){t.exports=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"]},"./node_modules/to-capital-case/index.js":function(t,e,s){function a(t){return i(t).replace(/(^|\s)(\w)/g,function(t,e,s){return e+s.toUpperCase()})}var i=s("./node_modules/to-capital-case/node_modules/to-no-case/index.js");t.exports=a},"./node_modules/to-capital-case/node_modules/to-no-case/index.js":function(t,e){function s(t){return n.test(t)?t.toLowerCase():(o.test(t)&&(t=a(t)),l.test(t)&&(t=i(t)),t.toLowerCase())}function a(t){return t.replace(d,function(t,e){return e?" "+e:""})}function i(t){return t.replace(r,function(t,e,s){return e+" "+s.toLowerCase().split("").join(" ")})}t.exports=s;var n=/\s/,l=/[a-z][A-Z]/,o=/[\W_]/,d=/[\W_]+(.|$)/g,r=/(.)([A-Z]+)/g},"./node_modules/to-title-case/index.js":function(t,e,s){function a(t){return n(t).replace(d,function(t){return t.toLowerCase()}).replace(r,function(t){return t.toUpperCase()})}try{var i=s("./node_modules/escape-regexp/index.js")}catch(t){var i=s("./node_modules/escape-regexp-component/index.js")}var n=s("./node_modules/to-capital-case/index.js"),l=s("./node_modules/title-case-minors/index.js");t.exports=a;var o=l.map(i),d=new RegExp("[^^]\\b("+o.join("|")+")\\b","ig"),r=/:\s*(\w)/g}});